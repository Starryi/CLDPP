<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>10. The ulimit parameter</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="RedHat, redhat, maddy, linus, linux, Linux, Securing, Optimising, security, secure, openna, gerhard"><link rel="home" href="index.html" title="Securing and Optimizing Linux"><link rel="up" href="gen-optim.html" title="Chapter 6. Linux General Optimization"><link rel="prev" href="chap6sec72.html" title="9.  The file-max parameter"><link rel="next" href="chap6sec73.html" title="11. The atime and noatime attribute"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">10. The ulimit parameter</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="chap6sec72.html">Prev</a> </td><th width="60%" align="center">Chapter 6. Linux General Optimization</th><td width="20%" align="right"> <a accesskey="n" href="chap6sec73.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm4733"></a>10. The ulimit parameter</h2></div></div></div><p>
          Linux itself has a Max Processes per user limit. This feature allows us to control the number of processes an existing user on the server may be authorized 
          to have. To improve performance, we can safely set the limit of processes for the super-user root to be unlimited.
          Edit the <code class="filename">.bashrc</code> file vi <code class="filename">/root/.bashrc</code> and add the following line:
          </p><pre class="screen">
          <span class="command"><strong>ulimit</strong></span> -u unlimited
          </pre><p>
          You must exit and re-login from your terminal for the change to take effect. 
          </p><div class="informalexample"><pre class="screen">
          [root@deep] /# <span class="command"><strong>ulimit</strong></span> -a
           </pre><pre class="programlisting">
          core file size (blocks) 	1000000
          data seg size (kbytes)  	unlimited
          file size (blocks)	        unlimited
          max memory size (kbytes)	unlimited
          stack size (kbytes)	        8192
          cpu time (seconds)	        unlimited
          max user processes	        unlimited  <a name="rhomp1"></a><span><img src="images/callouts/1.png" alt="1" border="0"></span>
          pipe size (512 bytes)	        8
          open files	                1024
          virtual memory (kbytes)	2105343
          </pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#rhomp1"><span><img src="images/callouts/1.png" alt="1" border="0"></span></a> </p></td><td valign="top" align="left"><p>
          Make sure that when you type as root the command <span class="command"><strong>ulimit</strong></span> <code class="literal">-a</code> on your terminal, it shows <code class="envar">unlimited</code> next to 
          max user processes.
          </p></td></tr></table></div></div><p>
          </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">
<span class="inlinemediaobject"><img src="./images/Tip.gif" alt="Tip"></span>
</h3><p>
          You may also do <span class="command"><strong>ulimit</strong></span> <code class="literal">-u</code> unlimited at the command prompt instead of adding it to the <code class="filename">/root/.bashrc</code> file.
          </p></div><p>
          Increases the system limit on open files for instance a process on Red Hat 6.0 with kernel 2.2.5 could open at least 31000 file descriptors this way and a process on kernel 2.2.12 can open at 
          least 90000 file descriptors this way. The upper bound seems to be available memory. To increases the number of open files to 90000 for the root account do the following:

          Edit the <code class="filename">.bashrc file</code> vi <code class="filename">/root/.bashrc</code> and add the following line:
          </p><pre class="screen">
          <span class="command"><strong>ulimit</strong></span> -n 90000
          </pre><p>
          You must exit from your terminal and re-login for the change to take effect. 
          
          </p><p>
          </p><pre class="screen">
          [root@deep] /# <span class="command"><strong>ulimit</strong></span> -a
          </pre><p>
          
            </p><pre class="programlisting">
          core file size (blocks)	1000000
          data seg size (kbytes)	unlimited
          file size (blocks)	        unlimited
          max memory size (kbytes)	unlimited
          stack size (kbytes)	        8192
          cpu time (seconds)	        unlimited
          max user processes	        unlimited
          pipe size (512 bytes)	        8
          open files	                90000   <a name="rhopf1"></a><span><img src="images/callouts/1.png" alt="1" border="0"></span>
          virtual memory (kbytes)	2105343
           </pre><p>
          </p><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#rhopf1"><span><img src="images/callouts/1.png" alt="1" border="0"></span></a> </p></td><td valign="top" align="left"><p>
          Make sure that when you type as root the command ulimit -a on your terminal, it 
          shows 90000 next to open files.
          </p></td></tr></table></div><p>
          
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><span class="inlinemediaobject"><img src="./images/Note.gif" alt="Note"></span></h3><p>
          In older 2.2 kernels, though, the number of open files per process is still limited to 1024, even with the above changes.
          </p></div><p>
          </p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chap6sec72.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="gen-optim.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="chap6sec73.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">9. 
          The file-max parameter
             </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 11. The atime and noatime attribute</td></tr></table></div></body></html>
