<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>7. Disable all console access</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="RedHat, redhat, maddy, linus, linux, Linux, Securing, Optimising, security, secure, openna, gerhard"><link rel="home" href="index.html" title="Securing and Optimizing Linux"><link rel="up" href="gen-syssecured.html" title="Chapter 5. General System Security"><link rel="prev" href="chap5sec34.html" title="6. Disable console program access"><link rel="next" href="chap5sec36.html" title="8. The inetd - /etc/inetd.conf file"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">7. Disable all console access</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="chap5sec34.html">Prev</a> </td><th width="60%" align="center">Chapter 5. General System Security</th><td width="20%" align="right"> <a accesskey="n" href="chap5sec36.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm3330"></a>7. Disable all console access</h2></div></div></div><p>
               The Linux-PAM library installed by default on your system allows the system administrator to choose how applications authenticate users, such as for console access, program and file access. In order to disable all these accesses for the 
               users, you must comment out all lines that refer to <code class="filename">pam_console.so</code> in the <code class="filename">/etc/pam.d/</code> directory. This step is a continuation of the above hack <a class="link" href="chap5sec34.html" title="6. Disable console program access"> Disable console program access.</a>
               The following script will do the trick automatically for you. As root creates the <code class="filename">disabling.sh</code> script file, <span class="command"><strong>touch</strong></span> <code class="filename">disabling.sh</code> and add the following lines inside:
               </p><pre class="programlisting">
               # !/bin/sh
               cd /etc/pam.d
               for i in * ; do
               sed '/[^#].*pam_console.so/s/^/#/' &lt; $i &gt; foo &amp;&amp; mv foo $i
               done
               </pre><p>               
               Make this script executable with the following command and execute it:
               </p><pre class="screen">
               [root@deep] /# <span class="command"><strong>chmod</strong></span>  700  disabling.sh
               [root@deep] /# <span class="command"><strong>./disabling.sh</strong></span>
               </pre><p>
               This will comment out all lines that refer to <code class="filename">pam_console.so</code> for all files located under <code class="filename">/etc/pam.d</code> directory. Once the script has been executed, you can remove it from your system.
               
             </p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chap5sec34.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="gen-syssecured.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="chap5sec36.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">6. Disable console program access </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 8. The inetd - <code class="filename">/etc/inetd.conf</code> file</td></tr></table></div></body></html>
