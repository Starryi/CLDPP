<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>18. Shell logging</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="RedHat, redhat, maddy, linus, linux, Linux, Securing, Optimising, security, secure, openna, gerhard"><link rel="home" href="index.html" title="Securing and Optimizing Linux"><link rel="up" href="gen-syssecured.html" title="Chapter 5. General System Security"><link rel="prev" href="chap5sec46.html" title="17. Conceal binary RPM"><link rel="next" href="chap5sec48.html" title="19. The LILO and lilo.conf file"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">18. Shell logging</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="chap5sec46.html">Prev</a> </td><th width="60%" align="center">Chapter 5. General System Security</th><td width="20%" align="right"> <a accesskey="n" href="chap5sec48.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm3744"></a>18. Shell logging</h2></div></div></div><p>
                To make it easy for you to repeat long commands, the bash shell stores up to 500 old commands in the <code class="filename">~/.bash_history</code> file where <code class="filename">~/</code> is your home directory. Each 
                user that has an account on the system will have this file <code class="filename">.bash_history</code> in their home directory. Reducing the number of old commands the <code class="filename">.bash_history</code> files can 
                hold may protect users on the server who enter by mistake their password on the screen in plain text and have their password stored for a long time in the <code class="filename">.bash_history</code> file.
                </p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>
                      The <code class="envar">HISTFILESIZE</code> and <code class="envar">HISTSIZE</code> lines in the <code class="filename">/etc/profile</code> file determine the size of old commands the <code class="filename">.bash_history</code> file for all users on your system can 
                      hold. For all accounts I would highly recommend setting the HISTFILESIZE and HISTSIZE in <code class="filename">/etc/profile</code> file to a low value such as 20.
                      Edit the profile file vi <code class="filename">/etc/profile</code> and change the lines to:
                      </p><pre class="screen">
                        HISTFILESIZE=20
                        HISTSIZE=20
                      </pre><p>
                      Which mean, the <code class="filename">.bash_history</code> file in each users home directory can store 20 old commands and no more. Now, if a cracker tries to see the <code class="filename">~/.bash_history</code> file of users on your server to find 
                      some password typed by mistake in plain text, he or she has less chance to find one.
                    </p></li><li class="step"><p>
                      The administrator should also add into the /etc/skel/.bash_logout file the <span class="command"><strong>rm</strong></span>   -f  <code class="filename">$HOME/.bash_history</code> line, so that each time a user logs out, its <code class="filename">.bash_history</code> 
                      file will be deleted so crackers will not be able to use <code class="filename">.bash_history</code> file of users who are not presently logged into the system.
                      Edit the <code class="filename">.bash_logout</code> file vi <code class="filename">/etc/skel/.bash_logout</code> and add the following line:
                      </p><pre class="screen">
                        <span class="command"><strong>rm</strong></span> -f  $HOME/.bash_history
                      </pre><p>
                    </p></li></ol></div><p>
                <span class="emphasis"><em>
                  The above hack will only work for future users you'll add in the server. If you already have existing users in the <code class="filename">/etc/passwd</code> file, you must edit and add the above line into their <code class="filename">.bash_logout</code> files manually.
                </em></span>
            </p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chap5sec46.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="gen-syssecured.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="chap5sec48.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">17. Conceal binary <acronym class="acronym">RPM</acronym>  </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 19. The LILO and <code class="filename">lilo.conf</code> file</td></tr></table></div></body></html>
