<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>2. The topology</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="RedHat, redhat, maddy, linus, linux, Linux, Securing, Optimising, security, secure, openna, gerhard"><link rel="home" href="index.html" title="Securing and Optimizing Linux"><link rel="up" href="soft-netfirew.html" title="Chapter 10. Networking -Firewall"><link rel="prev" href="chap10sec97.html" title="1. Policy, Guidelines etc."><link rel="next" href="chap10sec99.html" title="3. Build a kernel with IPCHAINS Firewall support"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2. The topology</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="chap10sec97.html">Prev</a> </td><th width="60%" align="center">Chapter 10. Networking -Firewall</th><td width="20%" align="right"> <a accesskey="n" href="chap10sec99.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm6306"></a>2. The topology</h2></div></div></div><p>
          All servers should be configured to block at least the unused ports, even if there are not a firewall server. This is required for more security. Imagine someone gains access to your firewall gateway server: if 
          your neighborhoods servers are not configured to block unused ports, this is a serious network risk. The same is true for local connections; unauthorized employees can gain access from the inside to your other 
          servers in this manner.
          </p><p>
          In our configuration we will give you three different examples that can help you to configure your firewall rules depending on the type of the server you want to protect and the placement of these servers on your 
          network architecture. 
          </p><table border="0" summary="Simple list" class="simplelist"><tr><td>
          The first example firewall rules file will be for a <code class="literal">Web Server</code>. 
          </td></tr><tr><td>
          The second for a <code class="literal">Mail Server</code>. 
          </td></tr><tr><td>
          The last for a <code class="literal">Gateway Server</code> that acts as proxy for the inside Wins, Workstations and Servers machines. 
          </td></tr></table><p>
          </p><p>
          See the graph below to get an idea:

          </p><div class="mediaobject"><img src="./images/Firewall-Schema.gif" alt="Firewall schematic representaion"><div class="caption"><p>
          The graph above shows you the ports that I enable on the different servers by default in my firewall scripts file in this book
            </p></div></div><p>
          </p><p><b>
          www.openna.com
          Caching Only DNS
          208.164.186.3
          . </b>
          </p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p>
          Unlimited traffic on the loopback interface allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">ICMP</acronym> traffic allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">DNS</acronym> Caching and Client Server on port 53 allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">SSH</acronym> Server on port 22 allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">HTTP</acronym> Server on port 80 allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">HTTPS</acronym> Server on port 443 allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">SMTP</acronym> Client on port 25 allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">FTP</acronym> Server on ports 20, 21 allowed
          </p></li><li class="listitem"><p>
          Outgoing traceroute request allowed
          </p></li></ol></div><p>
          </p><p><b>
          deep.openna.com
          Master DNS Server
          208.164.186.1
            . </b>
          </p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p>
          Unlimited traffic on the loopback interface allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">ICMP</acronym> traffic allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">DNS</acronym> Server and Client on port 53 allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">SSH</acronym> Server and Client on port 22 allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">HTTP</acronym> Server and Client on port 80 allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">HTTPS</acronym> Server and Client on port 443 allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">WWW</acronym>-CACHE Client on port 8080 allowed
          </p></li><li class="listitem"><p>
          External <acronym class="acronym">POP</acronym> Client on port 110 allowed
          </p></li><li class="listitem"><p>
          External <acronym class="acronym">NNTP</acronym> NEWS Client on port 119 allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">SMTP</acronym> Server and Client on port 25 allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">IMAP</acronym> Server on port 143 allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">IRC</acronym> Client on port 6667 allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">ICQ</acronym> Client on port 4000 allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">FTP</acronym> Client on port 20, 21 allowed
          </p></li><li class="listitem"><p>
          RealAudio / QuickTime Client allowed
          </p></li><li class="listitem"><p>
          Outgoing traceroute request allowed
          </p></li></ol></div><p>
          </p><p><b>
          mail.openna.com
          Slave DNS Server
          208.164.186.2
          . </b>
          </p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p>
          Unlimited traffic on the loopback interface allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">ICMP</acronym> traffic allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">DNS</acronym> Server and Client on port 53 allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">SSH</acronym> Server on port 22 allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">SMTP</acronym> Server and Client on port 25 allowed
          </p></li><li class="listitem"><p>
          <acronym class="acronym">IMAP</acronym> Server on port 143 allowed
          </p></li><li class="listitem"><p>
          Outgoing traceroute request allowed
          </p></li></ol></div><p>
          </p><p>
          The list above shows you the ports that I enable on the different servers by default in my firewall scripts file in this book. Depending on what services must be available in the server for the outside, you 
          must configure your firewall script file to allow the traffic on the specified ports. 
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal">www.openna.com</code> is our Web Server, 
          </p></li><li class="listitem"><p>
          <code class="literal">mail.openna.com</code> is our Mail Hub Server for all the internal network, 
          </p></li><li class="listitem"><p>
          <code class="literal">deep.openna.com </code> is our Gateway Server 
          </p></li></ul></div><p>
          for all the examples explained later in this chapter.
          </p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chap10sec97.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="soft-netfirew.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="chap10sec99.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">1. Policy, Guidelines <abbr class="abbrev">etc.</abbr> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 3. Build a kernel with <code class="literal">IPCHAINS</code> Firewall support</td></tr></table></div></body></html>
