<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>4. Disk Setup- Disk Druid</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="RedHat, redhat, maddy, linus, linux, Linux, Securing, Optimising, security, secure, openna, gerhard"><link rel="home" href="index.html" title="Securing and Optimizing Linux"><link rel="up" href="installlin.html" title="Chapter 3. Installation of your Linux Server"><link rel="prev" href="chap3sec12.html" title="3. Installation Class and Method (Install Type)"><link rel="next" href="chap3sec14.html" title="5. Disk Druid"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4. Disk Setup- Disk Druid</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="chap3sec12.html">Prev</a> </td><th width="60%" align="center">Chapter 3. Installation of your Linux Server</th><td width="20%" align="right"> <a accesskey="n" href="chap3sec14.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm536"></a>4. Disk Setup- Disk Druid</h2></div></div></div><p>
                </p><div class="mediaobject"><img src="images/VersionAll.gif" alt="Versian All"></div><p> We 
                assume that you are installing your new Linux server to a new hard drive, with no other existing file system or operating system previously 
                installed. A good partition strategy is to create a separate partition for each major file system. This enhances security and prevents accidental 
                denial of service or exploit of <acronym class="acronym">SUID</acronym> programs.
                </p><p>Creating multiple partitions offers you the following advantages:
                  </p><table border="0" summary="Simple list" class="simplelist"><tr><td>
                  Protection against denial of service attack.
                  </td></tr><tr><td>
                  Protection against <acronym class="acronym">SUID</acronym> programs.
                  </td></tr><tr><td>
                  Faster booting.
                  </td></tr><tr><td>
                  Easy backup and upgrade management.
                  </td></tr><tr><td>
                  Ability for better control of mounted file system.
                  </td></tr><tr><td>
                  Limit each file system's ability to grow.
                  </td></tr></table><p>
                </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">
<span class="inlinemediaobject"><img src="./images/Warning.gif" alt="Warning"></span>
</h3><p>
                    If previous file system or operating system exist on the hard drive and computer where you 
                    want to install your Linux system, we highly recommend, that you make a backup of your current 
                    system before proceeding with the disk partitioning.
                  </p></div><p><b>Step 1. </b>
                  For performance, stability and security reasons you must create something like the following partitions 
                  listed below on your computer. We suppose for this partition configuration the fact that you have a <acronym class="acronym">SCSI</acronym> 
                  hard drive of 3.2 GB. Of course you will need to adjust partition sizes according to your own needs and 
                  disk size.
                  Partitions that must be created on your system:
                 
                   

                      </p><pre class="programlisting">

                      /boot	   5MB		<a name="boot"></a><span><img src="images/callouts/1.png" alt="1" border="0"></span>
                      /usr	 512MB		<a name="usr"></a><span><img src="images/callouts/2.png" alt="2" border="0"></span>
                      /home	1146MB		<a name="home"></a><span><img src="images/callouts/3.png" alt="3" border="0"></span>
                      /chroot	 256MB		<a name="chroot"></a><span><img src="images/callouts/4.png" alt="4" border="0"></span>
                      /cache	 256MB		<a name="cache"></a><span><img src="images/callouts/5.png" alt="5" border="0"></span>
                      /var	 256MB		<a name="var"></a><span><img src="images/callouts/6.png" alt="6" border="0"></span>
                   &lt;Swap&gt;	 128MB		<a name="swap"></a><span><img src="images/callouts/7.png" alt="7" border="0"></span>
                      /tmp	 256MB		<a name="tmp"></a><span><img src="images/callouts/8.png" alt="8" border="0"></span>
                      /		 256MB		<a name="root"></a><span><img src="images/callouts/9.png" alt="9" border="0"></span>
                      </pre><p>                    
                    </p><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#boot"><span><img src="images/callouts/1.png" alt="1" border="0"></span></a> </p></td><td valign="top" align="left"><p>All Kernel images are kept here.
                        </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#usr"><span><img src="images/callouts/2.png" alt="2" border="0"></span></a> </p></td><td valign="top" align="left"><p>Must be large, since all Linux binaries programs are installed here.
                        </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#home"><span><img src="images/callouts/3.png" alt="3" border="0"></span></a> </p></td><td valign="top" align="left"><p>Proportional to the number of users you intend to host <abbr class="abbrev">i.e.</abbr> 10MB per users 
                          multiplied by the number of users 114 = 1140MB.
                        </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#chroot"><span><img src="images/callouts/4.png" alt="4" border="0"></span></a> </p></td><td valign="top" align="left"><p>If you want to install programs in chroot jail environment <abbr class="abbrev">i.e.</abbr> DNS.
                        </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#cache"><span><img src="images/callouts/5.png" alt="5" border="0"></span></a> </p></td><td valign="top" align="left"><p>This is the cache partition of a proxy server <abbr class="abbrev">i.e.</abbr> Squid.
                        </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#var"><span><img src="images/callouts/6.png" alt="6" border="0"></span></a> </p></td><td valign="top" align="left"><p>Contains files that change when the system run normally <abbr class="abbrev">i.e.</abbr> Log files.
                        </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#var"><span><img src="images/callouts/6.png" alt="6" border="0"></span></a> </p></td><td valign="top" align="left"><p>Our swap partition. The virtual memory of the Linux operating system.
                        </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#tmp"><span><img src="images/callouts/8.png" alt="8" border="0"></span></a> </p></td><td valign="top" align="left"><p>Our temporary files partition.
                        </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#root"><span><img src="images/callouts/9.png" alt="9" border="0"></span></a> </p></td><td valign="top" align="left"><p>Our root partition.
                        </p></td></tr></table></div><p>

                    </p><p>
               We have made two more special partitions:
               </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="filename">/chroot</code> </span></dt><dd><p>
               The <code class="filename">/chroot</code> partition can be used for DNS server chrooted, Apache server chrooted and other chrooted future programs. 
               </p></dd><dt><span class="term"><code class="filename">/cache</code></span></dt><dd><p>
               The <code class="filename">/cache</code> partition can be used for a Squid Proxy server. 
               </p></dd></dl></div><p>
               If you are not intending to install Squid Proxy server you don't need to create the <code class="filename">/cache</code> partition.
               </p><p>
               Keeping <code class="filename">/tmp</code> and <code class="filename">/home</code> on separate partitions is pretty much mandatory if users have shell access 
               to the server- protection against <code class="envar">SUID</code> programs; splitting these off into separate partitions also 
               prevent users from filling up any critical file system -denial of service attack.
               The same applies to  <code class="filename">/var</code>, and <code class="filename">/usr</code> on separate partitions is also a very good idea. By isolating the <code class="filename">/var</code> partition, you protect 
               your root partition from overfilling -denial of service attack.

               </p><p>
               In our partition configuration we'll reserve 256 MB of disk space for chrooted programs like Apache, 
               DNS and other software. This is necessary because Apache <code class="filename">DocumentRoot</code> files and other binaries, programs 
               related to Apache will be installed in this partition if you decide to run Apache web server in a chrooted 
               jail. 
               </p><p>
               Take note that the size of the Apache chrooted directory on the chrooted partition is proportional 
               to the size of your <code class="filename">DocumentRoot</code> files. If you're not intending to install and use Apache on your server, 
               you can reduce the size of this partition to something like 10 MB for <acronym class="acronym">DNS</acronym> server that you always need in 
               a chrooted jail environment for security reasons.
               </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">
              Minimum size of partitions
              </h3><div class="mediaobject"><img src="./images/Note.gif" alt="Note"></div><p>
              For information purposes only, this is the minimum size in megabytes, which a Linux installation must have to function properly. The sizes of partitions 
              listed below are really small. This configuration can fit into a very old hard disk of 512MB in size that you might find in old x486 computers. We show 
              you this partition just to get an idea of the minimum requirements.
              </p><pre class="screen">

              /	         35MB
              /boot	  5MB
              /chroot	 10MB
              /home	100MB
              /tmp	 30MB
              /usr	232MB
              /var	 25MB
              </pre><p>
              </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chap3sec12.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="installlin.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="chap3sec14.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">3. Installation Class and Method (Install Type) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 5. Disk Druid</td></tr></table></div></body></html>
