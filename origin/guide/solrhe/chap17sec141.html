<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>6. Integrity or Interactive Check Mode</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="RedHat, redhat, maddy, linus, linux, Linux, Securing, Optimising, security, secure, openna, gerhard"><link rel="home" href="index.html" title="Securing and Optimizing Linux"><link rel="up" href="sysintegrity.html" title="Chapter 17. Software -Securities/System Integrity"><link rel="prev" href="chap17sec140.html" title="5. Securing Tripwire for Linux"><link rel="next" href="chap17sec142.html" title="7. Installed files"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6. Integrity or Interactive Check Mode</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="chap17sec140.html">Prev</a> </td><th width="60%" align="center">Chapter 17. Software -Securities/System Integrity</th><td width="20%" align="right"> <a accesskey="n" href="chap17sec142.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm9566"></a>6. Integrity or Interactive Check Mode</h2></div></div></div><p>
           Tripwire has a feature called <em class="wordasword">Integrity Check Mode</em>. Now that our database has been built, we can run this feature to compare the current file system objects with their properties as recorded 
           in the Tripwire database. All violations of files will be printed to <code class="literal">stdout</code>, the report-generated file will be saved and can later be accessed by the twprint utility.
           The syntax for integrity check mode is:
           </p><pre class="screen">
           [root@deep] /#<span class="command"><strong>tripwire</strong></span> --check
           </pre><p>
           To run the integrity check mode, use the command:
           </p><pre class="screen">
           [root@deep] /#<span class="command"><strong>tripwire</strong></span> --check
           </pre><p>
           </p><p>
           Tripwire can also be run in <em class="wordasword">Interactive Check Mode</em>. In this mode you can automatically update your changes via the terminal.

           To run in interactive check mode, use the command:
           </p><pre class="screen">
           [root@deep] /#<span class="command"><strong>tripwire</strong></span> --check --interactive
           </pre><p>
           </p><p>
           An email option exists with Tripwire and allows you to send email. This option will specify that reports be emailed to the recipients designated in the policy file.

           To run in integrity check mode and send email to the recipient, use the command:
           </p><pre class="screen">
           [root@deep] /#<span class="command"><strong>tripwire</strong></span> --check --email-report
           </pre><p>
           </p><p>
           Updating the database after an integrity check
           If you have decided to use the <em class="wordasword">Integrity Check Mode</em> of Tripwire instead of the <em class="wordasword">Interactive Check Mode</em>, you must update the Tripwire database with 
           the <em class="wordasword">Database Update Mode</em> feature. This update process allows you to save time by updating the database without having to regenerate it, and it also enables selective 
           updating, which cannot be done through regeneration.

           The syntax for database update mode is:
           </p><pre class="screen">
           [root@deep] /# tripwire --update -r
           </pre><p>

           To update the database, use the command:
           </p><pre class="screen">
           [root@deep] /#<span class="command"><strong>tripwire</strong></span> --update -r /usr/TSS/report/deep.openna.com-200001-021854.twr
           </pre><p>
           Where  -r read the specified report file <code class="filename">deep.openna.com-200001-021854.twr</code>. This option is required since the <code class="envar">REPORTFILE</code> variable in the current 
           configuration file uses <code class="prompt">$</code>(DATE).
           </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">
<span class="inlinemediaobject"><img src="./images/Important.gif" alt="Important"></span>
</h3><p>
           In Database Update Mode or Interactive Check Mode, Tripwire software displays the report in your terminal with a ballot box next to each policy violation. You can approve a change to the file system by 
           leaving the x next to each policy violation or remove the x from the ballot box and the database will not be updated with the new value(s) for that object. After you exit the editor and provide the local pass 
           phrase, Tripwire software will update and save your changes.
           </p></div><p>
           Updating the policy file
           Some times you want to change the rules in your policy file to reflect new file locations or policy rules. A special command exists to do the work and update the database without requiring a complete 
           re-initialization of the policy file. This can save a significant amount of time and preserves security by keeping the policy file synchronized with the database it uses.

           The syntax for policy update mode is:
           </p><pre class="screen">
           [root@deep] /#<span class="command"><strong>tripwire</strong></span> --update-policy /path/to/new/policy/file
           </pre><p>

           To update the policy file, use the command:
           </p><pre class="screen">
           [root@deep] /#<span class="command"><strong>tripwire</strong></span> --update-policy /usr/TSS/policy/newtwpol.txt
           </pre><p>
           </p><p>
           The policy Update mode runs with the  --secure-mode high option by default. You may encounter errors when running with this option if the file system has changed since the last database update, and 
           if the changes cause a violation in the new policy. After determining that all of the violations reported in high security mode are authorized, you can update the policy file in low security mode to solve this situation:

           To update the policy file in low security mode, use the command:
           </p><pre class="screen">
           [root@deep] /#<span class="command"><strong>tripwire</strong></span> --update-policy --secure-mode low /usr/TSS/policy/newtwpol.txt
           </pre><p>
           </p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chap17sec140.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="sysintegrity.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="chap17sec142.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">5. Securing Tripwire for Linux </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 7. Installed files</td></tr></table></div></body></html>
