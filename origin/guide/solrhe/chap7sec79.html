<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>4. Compilation</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="RedHat, redhat, maddy, linus, linux, Linux, Securing, Optimising, security, secure, openna, gerhard"><link rel="home" href="index.html" title="Securing and Optimizing Linux"><link rel="up" href="secopt-kernel.html" title="Chapter 7. Configuring and Building a Secure, Optimized Kernel"><link rel="prev" href="chap7sec78.html" title="3. Securing the kernel"><link rel="next" href="chap7sec80.html" title='5. Kernel configuration -Part "A"'></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4. Compilation</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="chap7sec78.html">Prev</a> </td><th width="60%" align="center">Chapter 7. Configuring and Building a Secure, Optimized Kernel</th><td width="20%" align="right"> <a accesskey="n" href="chap7sec80.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm5235"></a>4. Compilation</h2></div></div></div><p>
             It is important to be sure that your <code class="filename">/usr/include/asm</code>, and <code class="filename">/usr/include/linux</code> subdirectories are just symlinks to the kernel sources.
             </p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>
             The asm, and linux subdirectories are a soft link to the real include kernel source header directories needed for our Linux architecture, for example <code class="filename">/usr/src/linux/include/asm-i386</code> for asm. Type the following
             commands on your terminal:
             </p><pre class="screen">
             [root@deep ]/src#<span class="command"><strong>cd</strong></span> /usr/include/
             [root@deep ] /include#<span class="command"><strong>rm</strong></span> -rf  asm linux
             [root@deep ] /include#<span class="command"><strong>ln</strong></span> -s  /usr/src/linux/include/asm-i386 asm
             [root@deep ] /include#<span class="command"><strong>ln</strong></span> -s  /usr/src/linux/include/linux  linux
             </pre><p>
             This is a very important part of the configuration; we remove the asm, and linux directories under <code class="filename"></code>/usr/include then build a new links that point to the same name directories 
             under the new Linux kernel source version directory. The include directory contains important header files needed by your Linux kernel and programs to be able to compile on your system.                       
             </p></li><li class="step"><p>
             Make sure you have no stale .o files and dependencies lying around.

             Type the following commands on your terminal:
             </p><pre class="screen">
             [root@deep ] /include#<span class="command"><strong>cd</strong></span> /usr/src/linux/
             [root@deep ] /linux#<span class="command"><strong>make</strong></span> mrproper
             </pre><p>
             </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><span class="inlinemediaobject"><img src="./images/Note.gif" alt="Note"></span></h3><p>
             These two steps above simply clean up anything that might have accidentally been left in the source tree by the development team.
             </p></div><p>
             You should now have the sources correctly installed. You can configure the Linux kernel in one of three ways. 
             </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
             The first method is to use the <span class="command"><strong>make config</strong></span> command. It provides you with a text-based interface for answering all the 
             configuration options. You are prompted for all the options you need to set up your kernel.
             </p></li><li class="listitem"><p>
             The second method is to use the <span class="command"><strong>make menuconfig</strong></span> command, which provides all the kernel options in an easy-to-use menu. 
             </p></li><li class="listitem"><p>
             The third is to use the <span class="command"><strong>make xconfig</strong></span> command, which provides a full graphical interface to all the kernel options.
             </p></li></ul></div><p>
             </p></li><li class="step"><p>
             For configuration, you will use the <span class="command"><strong>make config</strong></span> command because we have not installed the XFree86 window Interface on our Linux server.
             Type the following commands on your terminal to load the kernel configuration:
             </p><pre class="screen">
             [root@deep] /#<span class="command"><strong>cd</strong></span> /usr/src/linux/ (if you are not already in this directory).
             [root@deep ] /linux#<span class="command"><strong>make</strong></span> config
             rm -f include/asm
             ( cd include ; ln -sf asm-i386 asm)
             /bin/sh scripts/Configure arch/i386/config.in
             #
             # Using defaults found in arch/i386/defconfig
             #
             </pre><p>
             </p></li></ol></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chap7sec78.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="secopt-kernel.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="chap7sec80.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">3. Securing the kernel </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 5. Kernel configuration -Part "A"</td></tr></table></div></body></html>
