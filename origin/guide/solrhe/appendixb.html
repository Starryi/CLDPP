<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Appendix B. Tweaks, Tips and Administration tasks</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="RedHat, redhat, maddy, linus, linux, Linux, Securing, Optimising, security, secure, openna, gerhard"><link rel="home" href="index.html" title="Securing and Optimizing Linux"><link rel="up" href="Appendix.html" title="Part I. Appendixes"><link rel="prev" href="appendixa.html" title="Appendix A. Resources"><link rel="next" href="appendixc.html" title="Appendix C. Obtaining Requests for Comments (RFCs)"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Appendix B. Tweaks, Tips and Administration tasks</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="appendixa.html">Prev</a> </td><th width="60%" align="center">Part I. Appendixes</th><td width="20%" align="right"> <a accesskey="n" href="appendixc.html">Next</a></td></tr></table><hr></div><div class="appendix"><div class="titlepage"><div><div><h2 class="title"><a name="idm24626"></a>Appendix B. Tweaks, Tips and Administration tasks</h2></div></div></div><p>
Some of the tips in this section are specific to Linux systems. Most are applicable to <acronym class="acronym">UNIX</acronym> system in general.
</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">The <span class="command"><strong>du</strong></span> utility command</h3><div class="mediaobject"><img src="./images/Tip.gif" alt="Tip"></div><p>
You can use the <span class="command"><strong>du</strong></span> utility to estimate file space usage. For example, to determine in megabyte the sizes of the <code class="filename">/var/log/</code> and <code class="filename">/home/</code> directory 
trees, type the following command:
</p><pre class="screen">
[root@deep] /# <span class="command"><strong>du</strong></span> -sh /var/log /home
</pre><p>
</p><pre class="literallayout"><code class="computeroutput">
3.5M    	/var/log
350M    	/home
</code></pre><p>
</p><p>
Keep in mind that the above command will report the actual size of your data. Now that you know for example that <code class="filename">/home</code> is using 350M you can move into it and <span class="command"><strong>du</strong></span> -sh * to 
locate where the largest files are.
</p><p>
</p><pre class="screen">
[root@deep] /# <span class="command"><strong>cd</strong></span> /home/
[root@deep ]/home# <span class="command"><strong>du</strong></span> -sh *
</pre><p>
</p><pre class="literallayout"><code class="computeroutput">
343M    	admin
11k     	ftp
6.8M    	httpd
12k     	lost+found
6.0k    	named
6.0k    	smbclient
6.0k    	test
8.0k    	www
</code></pre><p>
</p></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">
<span class="inlinemediaobject"><img src="./images/Tip.gif" alt="Tip"></span>
</h3><p>
You can add this command to your crontab so that every day you get emailed the desired disk space list, and you'll be able to monitor it without logging in constantly.
</p></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Find the route </h3><div class="mediaobject"><img src="./images/Tip.gif" alt="Tip"></div><p>
If you want to find out the route that the packets sent from your machine to a remote host, simply issue the following command:
</p><pre class="screen">
[root@deep] /# <span class="command"><strong>traceroute</strong></span> www.redhat.com
</pre><p>
</p><pre class="literallayout"><code class="computeroutput">
traceroute to www.portal.redhat.com (206.132.41.202), 30 hops max, 38 byte packets
 1  ppp005.108-253-207.mtl.mt.videotron.net (207.253.108.5)  98.584 ms  1519.806 ms  109.911 ms
 2  fa5-1-0.rb02-piex.videotron.net (207.96.135.1)  149.888 ms  89.830 ms  109.914 ms
 3  ia-tlpt-bb01-fec1.videotron.net (207.253.253.53)  149.896 ms  99.873 ms  139.930 ms
 4  ia-cduc-bb02-ge2-0.videotron.net (207.253.253.61)  99.897 ms  169.863 ms  329.926 ms
 5  if-4-1.core1.Montreal.Teleglobe.net (207.45.204.5)  409.895 ms  1469.882 ms  109.902 ms
 6  if-1-1.core1.NewYork.Teleglobe.net (207.45.223.109)  189.920 ms  139.852 ms  109.939 ms
 7  206.132.150.133 (206.132.150.133)  99.902 ms  99.724 ms  119.914 ms
 8  pos1-0-2488M.wr2.CLE1.gblx.net (206.132.111.89)  189.899 ms  129.873 ms  129.934 ms
 9  pos8-0-2488m.wr2.kcy1.globalcenter.net (206.132.111.82)  169.890 ms  179.884 ms  169.933 ms
10  206.132.114.77 (206.132.114.77)  199.890 ms  179.771 ms  169.928 ms
11  pos8-0-2488M.wr2.SFO1.gblx.net (206.132.110.110)  159.909 ms  199.959 ms  179.837 ms
12  pos1-0-2488M.cr1.SNV2.gblx.net (208.48.118.118)  179.885 ms  309.855 ms  299.937 ms
13  pos0-0-0-155M.hr2.SNV2.gblx.net (206.132.151.46)  329.905 ms  179.843 ms  169.936 ms
14  206.132.41.202 (206.132.41.202)  2229.906 ms  199.752 ms  309.927 ms
</code></pre><p>
Where &lt;www.redhat.com&gt; is the name or ip address of the host that you want to trace.
</p></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Display Web pages access</h3><div class="mediaobject"><img src="./images/Tip.gif" alt="Tip"></div><p>
To display quickly the number of times your web page has been accessed use this command:
</p><pre class="screen">
[root@deep] /# <span class="command"><strong>grep</strong></span> "GET / HTTP" /var/log/httpd/access_log | wc -l
</pre><p>
</p><pre class="literallayout"><code class="computeroutput">
      467
</code></pre><p>
</p></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Shut down most services altogether</h3><div class="mediaobject"><img src="./images/Tip.gif" alt="Tip"></div><p>
As root, you can shut down most services altogether with the following command:
</p><pre class="screen">
[root@deep] /# killall httpd smbd nmbd slapd named
</pre><p> 
The above command will shut down the Apache server, Samba services, <acronym class="acronym">LDAP</acronym> server, and <acronym class="acronym">DNS</acronym> server respectively.
</p></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">clock on the top of your terminal </h3><div class="mediaobject"><img src="./images/Tip.gif" alt="Tip"></div><p>
Edit the <code class="filename">profile</code> file, <span class="command"><strong>vi</strong></span> <code class="filename">/etc/profile</code> and add the following line:
</p><pre class="programlisting">
PROMPT_COMMAND='echo -ne "\0337\033[2;999r\033[1;1H\033[00;44m\033[K"`date`"\033[00m\0338"'
</pre><p>
The result will look like:
</p><div class="mediaobject"><img src="./images/time01.gif" alt="Clock on terminal window"></div><p>
</p></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">lsof installed on your server?</h3><div class="mediaobject"><img src="./images/Tip.gif" alt="Tip"></div><p>
If not, install it and execute <span class="command"><strong>lsof</strong></span>-i. This should list which ports you have open on your machine. The lsof program is a great tool as it will tell you which processes are 
listening on a given port.
</p><pre class="screen">
[root@deep] /# <span class="command"><strong>lsof</strong></span> -i
</pre><p>
</p><pre class="literallayout"><code class="computeroutput">
COMMAND    PID     USER   FD    TYPE   DEVICE SIZE NODE  NAME
Inetd	   344     root   4u  	IPv4    327        TCP 	 *:ssh (LISTEN)
sendmail   389     root   4u  	IPv4    387        TCP 	 *:smtp (LISTEN)
smbd       450     root   5u  	IPv4    452        TCP 	 deep.openna.com:netbios-ssn (LISTEN)
nmbd       461     root   5u  	IPv4    463        UDP 	 *:netbios-ns
nmbd       461     root   6u  	IPv4    465        UDP 	 *:netbios-dgm
nmbd       461     root   8u  	IPv4    468        UDP 	 deep.openna.com:netbios-ns
nmbd       461     root   9u  	IPv4    470        UDP 	 deep.openna.com:netbios-dgm
named     2599	   root   4u  	IPv4   3095        UDP 	 *:32771
named     2599	   root   20u  	IPv4   3091        UDP 	 localhost.localdomain:domain
named     2599	   root   21u  	IPv4   3092        TCP 	 localhost.localdomain:domain (LISTEN)
named     2599	   root   22u  	IPv4   3093        UDP 	 deep.openna.com:domain
named     2599	   root   23u  	IPv4   3094        TCP 	 deep.openna.com:domain (LISTEN)
</code></pre><p>
</p></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">commands on remote servers via ssh protocol </h3><div class="mediaobject"><img src="./images/Tip.gif" alt="Tip"></div><p>
The <span class="command"><strong>ssh</strong></span> command can also be used to run commands on remote systems without logging in. The output of the command is displayed, and control returns to the local system. Here is an example which will display all 
the users logged in on the remote system.
 </p><pre class="screen">
[admin@deep /]$ <span class="command"><strong>ssh</strong></span> mail.openna.com who
</pre><p>
</p><pre class="literallayout"><code class="computeroutput">
admin@mail.openna.com's password:
root	tty1	Dec  2 14:45
admin	tty2	Dec  2 14:45
wahib	pts/0	Dec  2 11:38
</code></pre><p>
</p></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Filename Completion</h3><div class="mediaobject"><img src="./images/Tip.gif" alt="Tip"></div><p>
Tab filename completion allows you to type in portions of a filename or program, and then press <span class="keycap"><strong>TAB</strong></span>, and it will complete the filename for you. If there's more than one file or program that starts with what you already 
typed in, it will beep, and then when you press <span class="keycap"><strong>TAB</strong></span> again it will list all the files that start with what you initially typed.
</p></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Special Characters</h3><div class="mediaobject"><img src="./images/Tip.gif" alt="Tip"></div><p>
You can quickly accomplish tasks that you perform frequently by using shortcut keys  one or more keys you press on the keyboard to complete a task. For example, special characters can be used on the Linux shell like the following:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
<span class="keycap"><strong>Control</strong></span>+<span class="keycap"><strong>d</strong></span>: If you are in the shell and hit <span class="keycap"><strong>Control</strong></span>+<span class="keycap"><strong>d</strong></span> you get logged off.
</p></li><li class="listitem"><p>
<span class="keycap"><strong>Control</strong></span>+<span class="keycap"><strong>l</strong></span>: If you are in the shell and hit <span class="keycap"><strong>Control</strong></span>+<span class="keycap"><strong>l</strong></span> you clear the screen.
</p></li><li class="listitem"><p>
<span class="keycap"><strong>?</strong></span>: This is a wildcard. This can represent a single character. If you specified something at the command line like "m?b" Linux would look for mob, mib, mub, and every other letter/number between a-z, 0-9.
</p></li><li class="listitem"><p>
<span class="keycap"><strong>*</strong></span>: This can represent any number of characters. If you specified a "mi*" it would use "mit", mim, miiii, miya, and ANYTHING that starts with mi. "m*l" could by mill, mull, ml, and anything that starts with an m and ends with an l.
</p></li><li class="listitem"><p>
<span class="keycap"><strong>[]</strong></span> - Specifies a range. if I did m[o,u,i]m Linux would think: mim, mum, mom if I did: m[a-d]m Linux would think: mam, mbm, mcm, mdm. Get the idea? The <span class="keycap"><strong>[]</strong></span>, <span class="keycap"><strong>?</strong></span>, 
and <span class="keycap"><strong>*</strong></span> are usually used with copying, deleting, and directory listings.
</p></li></ul></div><p>
</p></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">
<span class="inlinemediaobject"><img src="./images/Important.gif" alt="Important"></span>
</h3><p>
<span class="emphasis"><em>Everything in Linux is</em></span> CASE <span class="emphasis"><em>sensitive</em></span>. This means "Bill" and "bill" are not the same thing. This allows for many files to be able to be stored, since "Bill" "bill" "bIll" "biLl", etc. can be 
different files. So, when using the <span class="keycap"><strong>[]</strong></span> stuff, you have to specify capital letters if any files you are dealing with have capital letters. Much of everything is lower case in UNIX, though.
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="appendixa.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="Appendix.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="appendixc.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Appendix A. Resources </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Appendix C. Obtaining Requests for Comments (RFCs)</td></tr></table></div></body></html>
