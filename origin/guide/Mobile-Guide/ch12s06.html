<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>6. Graphics Chip</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="laptop, notebook, pda, handheld, computer, mobile, mobile phone, cell phone, portable player, linux, unix"><link rel="home" href="index.html" title="Linux on the Road"><link rel="up" href="ch12.html" title="Chapter 12. Hardware in Detail: CPU, Display, Keyboard, Sound and More"><link rel="prev" href="ch12s05.html" title="5. PCMCIA Controller"><link rel="next" href="ch12s07.html" title="7. DVI Port"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6. Graphics Chip</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch12s05.html">Prev</a> </td><th width="60%" align="center">Chapter 12. Hardware in Detail: CPU, Display, Keyboard, Sound and More</th><td width="20%" align="right"> <a accesskey="n" href="ch12s07.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mobile-guide-p2c1s4-graphic-chip"></a>6. Graphics Chip</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm1963"></a>6.1. Linux Compatibility Check</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm1965"></a>6.1.1. Video Mode</h4></div></div></div><p>

   Attention: The <span class="command"><strong>SuperProbe</strong></span> is deprecated.

   The tool <span class="command"><strong>SuperProbe</strong></span> is part of XFree86 and is able to
   check many graphics chips. Please read the documentation carefully,
   because it might crash your hardware. 
   From <span class="command"><strong>man SuperProbe</strong></span>:
</p><p>
   "<span class="command"><strong>SuperProbe</strong></span> is a program that will attempt to determine the type of
   video hardware installed in an EISA/ISA/VLB-bus system by checking for
   known registers in various combinations at various locations
   (MicroChannel and PCI machines may not be fully supported; many work
   with the use of the <span class="command"><strong>-no_bios</strong></span> option). This is an
   error-prone process, especially on <acronym class="acronym">UNIX</acronym> (which
   usually has a lot more esoteric hardware installed than MS-DOS system
   do), so <span class="command"><strong>SuperProbe</strong></span> may likely need help from the user.
</p><p>
   At this time, <span class="command"><strong>SuperProbe</strong></span> can identify MDA, Hercules, CGA, MCGA, EGA,
   VGA, and an entire horde of SVGA chipsets (see the -info option, below).
   It can also identify several HiColor/True-color RAMDACs in use on SVGA
   boards, and the amount of video memory installed (for many chipsets). It
   can identify 8514/A and some derivatives, but not XGA, or PGC (although
   the author intends to add those capabilities). Nor can it identify other
   esoteric video hardware (like Targa, TIGA, or Microfield boards).":



</p><p>
   For testing reasons start the X11 server with <span class="command"><strong>X 2&gt;
   &lt;error.msg&gt;</strong></span>. And try to change the resolution by typing
   <span class="command"><strong>&lt;CTL&gt;&lt;ALT&gt;&lt;+&gt;</strong></span> or
   <span class="command"><strong>&lt;CTL&gt;&lt;ALT&gt;&lt;-&gt;</strong></span>. Note: the + or -
   sign have to be taken from the numeric pad, which can be emulated at
   the letter pad or with the <span class="command"><strong>Fn</strong></span> key by some laptops.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm1983"></a>6.1.2. Text Mode</h4></div></div></div><p>
   Just watch the display and determine if it works properly. 
   If not, try to enable different video modes at startup time. 
   Setting up X11 can sometimes be an exercise in trial and error.
   


</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm1986"></a>6.2. Related Documentation</h3></div></div></div><p>

</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
   First of all the
   <a class="ulink" href="http://www.xfree86.org/" target="_top">XFree86 documentation</a>
   itself. Often locally available at
   <code class="filename">/usr/share/doc/xfree86*</code>.
   Or the <a class="ulink" href="http://x.org/" target="_top">X.Org</a> documentation.
</p></li><li class="listitem"><p>
   <a class="ulink" href="http://tldp.org/HOWTO/XFree86-HOWTO/" target="_top">XFree86-HOWTO</a>
</p></li><li class="listitem"><p>
   <a class="ulink" href="http://tldp.org/HOWTO/XFree86-Video-Timings-HOWTO/" target="_top">XFree86-Video-Timings-HOWTO</a>
</p></li><li class="listitem"><p>
   <a class="ulink" href="http://tldp.org/HOWTO/XFree86-XInside.html" target="_top">XFree86-XInside-HOWTO</a>
</p></li><li class="listitem"><p>
   <a class="ulink" href="http://tldp.org/HOWTO/X-Big-Cursor.html" target="_top">X-Big-Cursor-mini-HOWTO</a>
   (useful when running X11 on a notebook with low contrast <acronym class="acronym">LCD</acronym>)
</p></li><li class="listitem"><p>
   <a class="ulink" href="http://tldp.org/HOWTO/Keyboard-and-Console-HOWTO.html" target="_top">Keyboard-and-Console-HOWTO</a>
</p></li><li class="listitem"><p>
   <a class="ulink" href="http://tldp.org/HOWTO/Framebuffer-HOWTO.html" target="_top">Framebuffer-HOWTO</a>
   
</p></li></ol></div><p>

</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm2014"></a>6.3. Survey X11-Servers</h3></div></div></div><p>
   You might discover that some features of your laptop are not supported by
   <a class="ulink" href="http://www.xfree86.org/" target="_top">XFree86</a>
   or <a class="ulink" href="http://x.org/" target="_top">X.Org</a>.
   , e.g. high resolutions, accelerated X or an external monitor.
   Therefore I give a survey of available X11 servers.


</p><p>

</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
   <a class="ulink" href="http://www.xfree86.org/" target="_top">XFree86</a>
</p></li><li class="listitem"><p>
   <a class="ulink" href="http://x.org/" target="_top">X.Org</a>.
</p></li><li class="listitem"><p>
   VESA Frame-Buffer-Device, available with 2.2.x kernels and XFree86 3.3.2 or greater. 
   See
   <a class="ulink" href="http://linux-fbdev.org/" target="_top">FBDev.ORG</a> and
   <a class="ulink" href="http://www.strusel007.de/linux/fb.html" target="_top">FB FAQ</a> 
   and kernel source <code class="filename">/usr/src/linux/Documentation</code>
   .
</p><p>
   Please check the latest release of
   <a class="ulink" href="http://directfb.org/" target="_top">DirectFB</a>
   for a dedicated Framebuffer Driver for the NeoMagic 
   chip and other chipsets, with support for acceleration.
   DirectFB is a thin library that provides developers with hardware graphics
   acceleration, input device handling and abstraction, an integrated
   windowing system with support for translucent windows and multiple display
   layers on top of the Linux framebuffer device. It is a complete hardware
   abstraction layer with software fallbacks for every graphics operation that
   is not supported by the underlying hardware. 
</p></li><li class="listitem"><p>
   <a class="ulink" href="http://www.xig.com/" target="_top">Xi Graphics</a> 
   , commercial, also known under their former names 
   AcceleratedX or Xinside. 
</p></li><li class="listitem"><p>
   <a class="ulink" href="http://www.scitechsoft.com/" target="_top">SciTech</a>, commercial.
</p></li><li class="listitem"><p>
   <a class="ulink" href="http://www.metrolink.com/" target="_top">Metro-X</a>, commercial.
</p></li></ol></div><p>

</p><p>
   If you can't get an appropriate X11 server working, but cannot
   afford a commercial X11 server you may try the VGA16 or the mono server
   included in XFree86.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm2044"></a>6.4. Resources</h3></div></div></div><p>
   You may find a survey about
   <a class="ulink" href="http://tuxmobil.org/graphic_linux.html" target="_top">current graphics chips
   used in laptops and notebooks</a> at TuxMobil.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm2048"></a>6.5. External Monitors: LCD, CRT, TV, Projector</h3></div></div></div><p>
   There are several different methods to activate support for an external
   monitor: as a <span class="emphasis"><em>BIOS option</em></span> or during runtime with a
   <span class="emphasis"><em>keystroke</em></span> e.g.
   <span class="command"><strong>&lt;Fn&gt;+&lt;F4&gt;</strong></span>.
</p><p>
   Read the X11 docs about your graphics chip carefully, for instance for
   the NeoMagic NM20xx chips you have to edit
   <code class="filename">/etc/XF86Config</code> by configuring
   <span class="command"><strong>intern_disp</strong></span> and <span class="command"><strong>extern_disp</strong></span>. Note:
   As far as I know these options are only valid for XFree86 3.3.x, for
   XFree86 4.x I couldn't find a similar option.
</p><p>
   If you can't get the external monitor to work with XFree86, try a demo
   version of the commercial X11 servers mentioned above. Also check with
   the RedHat and SuSE WWW sites as they may have new, binary-only, X11
   servers that may work with your laptop.
   Or check X11 servers from <a class="ulink" href="http://x.org/" target="_top">X.Org</a>.
</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm2060"></a>6.5.1. Tools</h4></div></div></div><p>
   The 
   <a class="ulink" href="http://www.stud.uni-hamburg.de/users/lennart/projects/atitvout/" target="_top">atitvout</a>
   utility may be used for executing several configuration commands
   for the TV Out connector of ATI Rage Mobility P/M graphics boards under
   GNU/Linux on x86.  It is intended primarily to enable TV Out support after
   bootup and for switching the used TV standard from NTSC to PAL.
</p><p>
   <a class="ulink" href="http://www.probo.com/timr/savage40.html" target="_top">s3switch</a>
   will allow you to switch your
   display between the various output devices supported by the Savage (CRT,
   LCD, TV).
</p><p>
   <a class="ulink" href="http://sourceforge.net/projects/nv-tv-out" target="_top">nv-tv-out</a>
   is a tool to enable TV-Out on Linux for NVidia cards. It does not
   need the kernel, supports multiple TV encoder chips. You may use all the
   features of the chip, down to direct register access, and all resolutions
   and sizes the chip supports.
</p><p>
   <a class="ulink" href="http://www16.plala.or.jp/mano-a-mano/i810switch.html" target="_top">i810switch</a>
   is an utility for switching the LCD and external VGA displays on and off,
   with almost every graphics chip from Intel's i8xx family, including
   Centrino.
</p><p>
   <a class="ulink" href="http://sourceforge.net/projects/i855crt" target="_top">i855crt</a>
   is an userspace driver that can enable the CRT out (port for
   external monitor) on Intel 855GM based laptops.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm2072"></a>6.5.2. Solutions</h4></div></div></div><p>
   Klaus Weidner has described a
   <a class="ulink" href="http://mailman.linux-thinkpad.org/pipermail/linux-thinkpad/2003-November/013701.html" target="_top">Dual monitor setup</a>
   without using xinerama, but <span class="command"><strong>x2vnc</strong></span> instead.
   This approach allows to add and
   remove the second monitor dynamically without reconfiguring or restarting anything.
</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm2077"></a>6.6. Power Management for Graphics Cards</h3></div></div></div><p>
The uptime on batteries can be improved by enabling the power management
features of the graphics card. There are tools available to change the clock
frequency and to shut down the backlight of the display. Usually these tools
are specific for a graphics card or a graphics card manufacturer.
Here are some techniques for graphics cards made by ATI.
</p><p>
The proprietary <code class="filename">fglrx</code> driver from ATI needs to be
enabled by adding the PowerState option to the Device Section in the
<code class="filename">/etc/X11/xorg.conf</code> X11 configuration file:
</p><p>

</p><pre class="programlisting">
Section "Device"
Identifier "aticonfig-Device[0]"
Driver "fglrx"
Option "PowerState" "1"
EndSection
</pre><p>

</p><p>
After rebooting or re-starting X11 you can start the power save mode with the
command <span class="command"><strong>aticonfig --set-powerstate=1 --effective=now</strong></span>.
Use <span class="command"><strong>aticonfig --list-powerstates</strong></span> to get all available
powerstates.
</p><p>
For ATI Radeon graphics cards the <span class="command"><strong>rovclock</strong></span> tool can be used
to save power e.g. <span class="command"><strong>rovclock -c 80 -m 80</strong></span> to use only 80MHz chip
and memory frequency. The command <span class="command"><strong>radeontool light off</strong></span>
switches the backlight off, if closing the lid or using an extra key is not an
option.
</p><p>
The 
<a class="ulink" href="http://lkml.org/lkml/2006/10/9/83" target="_top">ACPI backlight driver</a>
by Holger Macht in 2.6.x  for IBM, Toshiba, ASUS laptops
adds support for the generic backlight interface below
<code class="filename">/sys/class/backlight</code>. The patch keeps the procfs brightness handling for
backward compatibility. For this to archive, the patch adds two generic
functions brightness_get and brightness_set to be used both by the procfs
related and the sysfs related methods.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm2095"></a>6.7. Miscellaneous</h3></div></div></div><p>
   Sometimes you may encounter a display not working properly in text mode.
   Currently I don't have any recommendations, please see
   <a class="ulink" href="http://tldp.org/HOWTO/Keyboard-and-Console-HOWTO.html" target="_top">Keyboard-and-Console-HOWTO</a>
   .
</p><p>
   Take care of the <span class="emphasis"><em>backlight</em></span> as far as I know this
   device can only bear a limited number of uptime circles. So avoid using
   screensavers too much.
</p><p>
   For problems with X Windows and <acronym class="acronym">APM</acronym> please see the
   <acronym class="acronym">APM</acronym> chapter.
</p><p>
   <a class="ulink" href="http://www.srcf.ucam.org/~mjg59/vbetool/" target="_top">vbetool</a>
   uses LRMI in order to run code from the video BIOS.
   Currently, it is able to alter DPMS states, save/restore video card state,
   and attempt to initialize the video card from scratch. It exists primarily
   in order to increase the chances of successfully recovering video state
   after an ACPI S3 suspend-to-RAM.
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch12s05.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch12.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch12s07.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">5. <acronym class="acronym">PCMCIA</acronym> Controller </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 7. DVI Port</td></tr></table></div></body></html>
