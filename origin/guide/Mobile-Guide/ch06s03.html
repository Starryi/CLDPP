<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>3. SHARP SL-5000/5500/C700-860/C3x00/6000 aka Zaurus</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="laptop, notebook, pda, handheld, computer, mobile, mobile phone, cell phone, portable player, linux, unix"><link rel="home" href="index.html" title="Linux on the Road"><link rel="up" href="ch06.html" title="Chapter 6. Linux PDAs"><link rel="prev" href="ch06s02.html" title="2. Samsung: YOPY"><link rel="next" href="ch07.html" title="Chapter 7. Non-Linux PDAs - Ports and Tools"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3. SHARP SL-5000/5500/C700-860/C3x00/6000 aka Zaurus</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch06s02.html">Prev</a> </td><th width="60%" align="center">Chapter 6. Linux PDAs</th><td width="20%" align="right"> <a accesskey="n" href="ch07.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mobile-guide-p3c2s8-zaurus"></a>3. SHARP SL-5000/5500/C700-860/C3x00/6000 aka Zaurus</h2></div></div></div><p>
   The SHARP Zaurus SL-5000/5500 wasn't the first Linux PDA, but the one
   with the greatest success in the Linux community and beyond.
</p><p>

</p><div class="figure"><a name="idm1201"></a><p class="title"><b>Figure 6.2. Screenshot of the SHARP Zaurus SL-5500 PDA.</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/zaurus1.png" alt="Screenshot of the SHARP Zaurus SL-5500 PDA."></div></div></div><p><br class="figure-break">

</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm1210"></a>3.1. The SHARP System</h3></div></div></div><p>
   You may find the official site for information about Linux on the Zaurus at
   <a class="ulink" href="http://developer.ezaurus.com/" target="_top">SHARP Japan</a> (in Japanese). 
   You can get the official kernel, either complete or just the patches for the
   Zaurus there. You can also get the official root-filesystem, that is the
   initrd, but without the 
   <a class="ulink" href="http://qpe.sourceforge.net/" target="_top">QTopia</a>
   environment.
   
   Check the documentation at SHARP how to create your zImage, bootflag and
   initrd for flashing the ROM of the Zaurus with your custom setup. Or go to
   your country-specific division of SHARP to get a complete ROM in one file
   called "ospack", which is
   <a class="ulink" href="http://www.zaurus.de/" target="_top">Zaurus.DE</a>
   for Germany or 
   <a class="ulink" href="http://www.myzaurus.com/" target="_top">MyZaurus</a>
   for the US versions.
   
   The kernel is rather old: 2.4.6 with 2.4.6-rmk2-patches and some more from
   <a class="ulink" href="http://www.lineo.com/" target="_top">Lineo</a>.
   The rmk-patches are from 
   <a class="ulink" href="http://www.arm.uk.linux.org/" target="_top">Linux ARM Community</a>.
   The root filesystem from SHARP is known for its weird structure with
   symbolic links all over the place.
   
   The custom compile worked. Remember to hit the "/"-key when the Zaurus
   displays "Wait... ", so you can choose to start a login instead of QTopia,
   which is not available then. Unless you downloaded QTopia, (cross-)compiled
   it and installed it into the root filesystem.
   BTW, you can create a new user with "adduser", a command provided by BusyBox.
   <a class="ulink" href="http://www.busybox.org/" target="_top">BusyBox</a>
   , provides nearly all UNIX-commands available on the official system.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm1220"></a>3.2. The Community Systems</h3></div></div></div><p>
Currently I know of two running systems: OpenZaurus and Debian (unofficial).
</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm1223"></a>3.2.1. OpenZaurus</h4></div></div></div><p>
   <a class="ulink" href="http://openzaurus.org/" target="_top">OpenZaurus</a>
   tries to create the same environment as the one from SHARP, but
   based upon free software only.
   
   At the moment, it still uses the old kernel from Sharp, but slightly
   modified in regards of usage of the FLASH-ROM as RAM and division of RAM
   between RAMDISK and RAM. Unfortunately, the driver for the SD-controller is
   binary-only and thus non-free. But also SHARP itself tries to convince the
   vendor, SDCA, to provide the sources for the public.
   
   Moreover, 
   <a class="ulink" href="http://openzaurus.org/" target="_top">OpenZaurus</a>
   created a sane root-filesystem we all know from our
   regular Linux systems. It also replaces QTopia by 
   <a class="ulink" href="http://opie.handhelds.org" target="_top">Open Palmtop Integrated Environment - OPIE</a>
   , which
   is a fork from QTopia with no relations to Trolltech anymore. All
   applications from QTopia should run on OPIE, but not quite: The Doom-like
   game called Zraycast does not run on OPIE, but does on QTopia (more or less).
   
   You can download a ready zimage, bootflag and initrd directly or checkout the
   sources from CVS. The downloaded images worked fine.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm1229"></a>3.2.2. Debian</h4></div></div></div><p>
   The current, unofficial version of 
   <a class="ulink" href="http://people.debian.org/~mdz/zaurus/" target="_top">Debian Zaurus</a>
   really tries to be a regular
   Debian system with apt and X. A simple version of dpkg is already shipped with
   <a class="ulink" href="http://www.busybox.org/" target="_top">BusyBox</a>
   , which makes it a little bit easier. The maintainer has therefore
   stripped down some more tools to fit them into the Flash-ROM.
   It uses the kernel provided by 
   <a class="ulink" href="http://openzaurus.org/" target="_top">OpenZaurus</a>
   and thus the one from Sharp.
   There are some issues with the RAMdisk, calibration of the stylus and
   sleep / power-off/-on.
   
   As soon as it is in a more stable state, it will join forces with 
   <a class="ulink" href="http://emdebian.sourceforge.net/" target="_top">EmDebian</a>
   and the sources will become available (probably already furnished upon
   request). The downloaded images still have to be tweaked. :)
   
   All systems, including the sources from SHARP, are set to use the US
   keyboard layout (or the German keyboard). It seems that the keymap
   available is fixed in the kernel and there are no user-space tools
   installed per default to change this. Perhaps I will give the package
   "console-tools" on Debian a try.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm1236"></a>3.2.3. PocketWorkStation</h4></div></div></div><p>
Here are some of the features of
<a class="ulink" href="http://www.pocketworkstation.net/" target="_top">PocketWorkStation</a>
a Debian/GNU Linux distribution for PDAs:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
Full Debian GNU/Linux operating environment, with easy access to the many GB of available software. 
Want the Konqueror web browser and have 50MB free space on your SD card? Run <span class="command"><strong>apt-get install konqueror</strong></span>, 
go eat lunch and come back to find it ready to run. No porting needed.
</p></li><li class="listitem"><p>
Includes X11 able to run most Linux applications - it supports virtual screens 
larger than the physical screen, realtime anti-aliased scaling and rotation, 
3-mouse-button emulation and a full keyboard 
(useful i.e. if you need to send Ctrl-Alt-Del to an application).
</p></li><li class="listitem"><p>
VNC client fbvnc (same features as X11 above) - remote administer your NT box from your Zaurus.
</p></li><li class="listitem"><p>
Runs completely out of a single directory (a 256MB SD card is ideal), 
no re-flashing or modification of the existing operating system is required.
</p></li><li class="listitem"><p>
Switch between QTopia and X11 whenever you like without rebooting or needing to stop any of your X11 applications.
</p></li></ul></div><p>

</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm1252"></a>3.3. Synchronization with your Linux PC</h3></div></div></div><p>
   The QTopia-Desktop is available as a download from 
   <a class="ulink" href="http://www.trolltech.com/developer/download/qtopia.html" target="_top">Trolltech</a>
   for free (as in beer): There is a 
   <a class="ulink" href="http://docs.zaurus.com" target="_top">FAQ</a>,
   which explains the necessary steps for setup (Ethernet-over-USB). It is not
   quite up-to-date, because SHARP has tightened the security with their current
   ROM-release, so you have to give the IP-address 192.168.129.1 to your usb0
   network device.  You have to download and compile a patch for your kernel
   to use the driver usbdnet (see aforementioned website). Afterwards, a
   connection between the QTopia-Desktop and the Zaurus is possible.
   I had a lot of problems with the usb network layer on my system and could not
   sync properly. A switch from the driver uhci to usb-uhci for my host dit it.
   Just recently I had to reboot my notebook and the Zaurus due to a hiccup in
   the corresponding usb-net drivers. The network via an ethernet-card in the
   CF-slot is much more reliable than the connection via usb and you can still
   use the keyboard. The disadvantage is, that you cannot have a storage device
   in your CF-slot while you are on-line.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm1257"></a>3.4. External Serial Keyboard</h3></div></div></div><p>
   So far I was not able to get it going.  
   There is a site which offers a 
   <a class="ulink" href="http://www.doc.ic.ac.uk/~jpc1/linux/ipaq/serial.html" target="_top">serial keyboard driver and a patch for the iPAQ</a>
   .  Since the iPAQ and the Zaurus are based on the same CPU architecture,
   StrongArm, I hope that the driver provided there will also work on the
   Zaurus.  You also need a user-space tool called
   <span class="command"><strong>inputattach</strong></span>, which you can also get from there (source
   or binary for ARM).  I got a Happy Hacking Keyboard Lite with a PS/2
   connector.  An adaptor translates to serial which itself is plugged into
   to the Collie serial &lt;-&gt; serial connector.  I do not know if this
   chain is even possible to work.  The provided patch applied with only one
   failing hunk which made a trivial change in the sources
   (include/linux/serio.h) necessary; check the output.  After having
   re-configured the SHARP kernel config and having compiled the modules, I
   transferred them to the Zaurus.  The modules marked and created are:
   newtonkbd.o, serio.o, serport.o and perhaps stowaway.o from
   drivers/char/joystick/ and input.o and keybdev.o from drivers/input/.
   When you start <span class="command"><strong>inputattach</strong></span>, you have to use the line
   <span class="command"><strong>inputattach --newtonkbd /dev/ttyS0</strong></span>, _not_ ttySA0 as
   stated on the website.  For some strange reason, the Collie serial driver
   does not comply to the official StrongARM documentation of the kernel,
   which states that the serial ports are accessible via /dev/ttySAx.  And
   because the serial_collie.o is already compiled into the Sharp kernel,
   you do not have to load the generic module serial.o.  Well, I also tried
   the serial_collie.o as a module, while it was still compiled into the
   kernel.  There were no complaints when loading it, but the system froze
   unpredictably, so I had to do a soft-reset quite often.  Why can I load a
   module whose code is already in the kernel, I wonder...  Anyway, it does
   not work.  :( I tried inputattach in the --dump mode (you have to
   undefine a variable in the source and recompile) and it seems that there
   is nothing happening between the serial port and the keyboard.  The call
   for select (man 2 select) fails due to a timeout.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm1264"></a>3.5. Cross-Compiling</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm1266"></a>3.5.1. Kernel</h4></div></div></div><p>
   In order to build the kernel, initrd and applications you need a
   cross-compiling environment, GCC is preferred.  
   <a class="ulink" href="http://emdebian.sourceforge.net/" target="_top">EmDebian</a>
   offers
   .deb packages for Debian GNU/Linux i386.  
   
   Note: you have to look up the download
   links in the old site (a link is provided on the new site), because they are
   missing on the new site (though the download page exists).
   
   There are some
   dependancy problems with the g++ and libstdc++-dev packages which can be
   "resolved" with a --force-depends.  The package libstdc++-dev has some problems
   finding an info-file: just create a symlink from
   <code class="filename">/usr/share/info/iostream.ifo.gz</code>
   to <code class="filename">/usr/share/info/iostream-295.info.gz</code>.
   
   You should get some pointers for other systems at the 
   <a class="ulink" href="http://www.arm.uk.linux.org/" target="_top">Linux ARM Community</a>.
   Once installed, you can grab a standard kernel, apply the current ARM-patches
   and modify the top Makefile to target the arm-architecture.  I did not try that
   so far.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm1273"></a>3.5.2. Applications</h4></div></div></div><p>
   Check the 
   <a class="ulink" href="http://qpe.sourceforge.net/sharp.html" target="_top">QTopia</a> pages for more info 
   and the
   <a class="ulink" href="http://qpe.sourceforge.net/development.html" target="_top">QTopia - Development</a> pages.
   
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm1278"></a>3.5.3. Tool Chains</h4></div></div></div><p>
   Werner Schulte explains how to build a OPIE development Live CD.
   The CD contains an ISO image with the tools and methods described in his
   <a class="ulink" href="http://www.uv-ac.de/opiedev" target="_top">Opie Development HOWTO - LiveCD chapter</a>.
   The CD allows the user to crosscompile OPIE programs without having a
   cross-compiler installed on his linux-box (also i386 embedded available).
</p><p>
   Instructions for building a 
   <a class="ulink" href="http://www.lucid-cake.net/osx_arm/index_en.html" target="_top">cross-compiling GCC for the Zaurus under Mac OS X</a>.
</p><p>
   A 
   <a class="ulink" href="http://www.pellicosystems.com/demolinux/zdemolinux/index.html" target="_top">DemoLinux distribution</a> 
   to show the Trolltech Qtopia development environment for the SHARP Zaurus Personal Mobility
   Tool or any ARM based device running the Trolltech QPE system
   provided by Pellico Systems.


</p><p>
   <a class="ulink" href="http://kopsisengineering.com/kopsis/SharpZaurusSdkDsl" target="_top">Zaurus Development with Damn Small Linux</a>
   offers a cross-development environment to build binaries for the ARM processor
   used in the SHARP Zaurus Linux PDAs. You may run it either inside the QEMU
   virtual machine or from a Live CD.
</p><p>
   <a class="ulink" href="http://free-electrons.com/community/tools/kernelkit/en" target="_top">KernelKit</a>
   is a Knoppix derivative dedicated to developers of Linux
   device drivers and Free Software embedded systems. In particular, it
   includes uClibc cross-compiling toolchains for several embedded
   architectures (currently ARM, i386, MIPS, mipsel, PPC, and m68k) and
   emulators (currently qemu and SkyEye). It can be used for demonstration or
   training purposes, or by developers who cannot install GNU/Linux on their
   workstations.
</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm1290"></a>3.6. Caveats</h3></div></div></div><p>
  SHARP introduced a proprietary serial interface at the bottom of the Zaurus
  SL-5x00 series.  You can buy an adaptor to a regular serial interface from them, but
  unfortunately, the plug is very thick and you cannot open the slide for the
  keyboard anymore. Hopefully, you can still plug an external keyboard into this port!
  You can at least plug the power cord into the adaptor so you do not have to
  run on battery. There are third-party adaptors available, which overcome
  this caveat.
</p><p>
  There is no speaker for the soundchip of the SL-5500. You have to use the socket for the
  headphones to hear OggVorbis and the alikes. The buzzer currently supports
  only 14 different sounds defined in 
  <code class="filename">&lt;kernel-source&gt;/include/asm-arm/sharp_char.h</code>
  , check for <span class="command"><strong>SHARP_BUZ_ALL_SOUNDS</strong></span>.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm1296"></a>3.7. Resources</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm1298"></a>3.7.1. Manufacturer: SHARP</h4></div></div></div><p>

</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
   <a class="ulink" href="http://docs.zaurus.com" target="_top">ZaurusZone</a>.

</p></li><li class="listitem"><p>
   <a class="ulink" href="http://more.sbc.co.jp/slj/linux.asp" target="_top">Sharp Linux/Java PDA Linux Information</a>
</p></li><li class="listitem"><p>

   <a class="ulink" href="http://www.zaurus.com/dev/" target="_top">Sharp Zaurus Developer's Program</a>
</p></li></ol></div><p>

</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm1311"></a>3.7.2. Kernel and Community Distributions</h4></div></div></div><p>

</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
   <a class="ulink" href="http://www.arm.uk.linux.org/" target="_top">ARM Linux</a>
</p></li><li class="listitem"><p>
   <a class="ulink" href="http://emdebian.sourceforge.net/" target="_top">Emdebian</a>
</p></li><li class="listitem"><p>
   <a class="ulink" href="http://openzaurus.org/" target="_top">OpenZaurus Project</a>
</p></li><li class="listitem"><p>
   <a class="ulink" href="http://www.doc.ic.ac.uk/~jpc1/linux/ipaq/serial.html" target="_top">Linux serial keyboards</a>
</p></li></ol></div><p>

</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm1327"></a>3.7.3. FAQs, Forums, etc.</h4></div></div></div><p>

</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
   <a class="ulink" href="http://zaurus.help4free.de/html/modules/news/" target="_top">Sharp Zaurus Hilfe und Support Community (German)</a>
</p></li><li class="listitem"><p>
   <a class="ulink" href="http://www.zaurususergroup.com/modules.php?op=modload&amp;name=FAQ&amp;file=index" target="_top">Unofficial Sharp Zaurus SL-5500 FAQ</a>
</p></li><li class="listitem"><p>
   <a class="ulink" href="http://docs.zaurus.com" target="_top">Sharp Zaurus - Developer Site</a>
   
</p></li><li class="listitem"><p>
   <a class="ulink" href="http://www.handhelds.org" target="_top">handhelds.org - mobile Devices</a>
</p></li></ol></div><p>

</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm1343"></a>3.7.4. Applications, Desktop Environments</h4></div></div></div><p>

</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
   <a class="ulink" href="http://opie.handhelds.org" target="_top">Open Palmtop Integrated Environment (OPIE)</a>
</p></li><li class="listitem"><p>
   <a class="ulink" href="http://gpe.handhelds.org" target="_top">GPE Palmtop Environment, GTK-based alternative to OPIE</a>
</p></li><li class="listitem"><p>
   <a class="ulink" href="http://qpe.sourceforge.net" target="_top">QTopia</a>
</p></li><li class="listitem"><p>
   <a class="ulink" href="http://www.trolltech.com/developer/download/qtopia.html" target="_top">QTopia-Desktop</a>
</p></li><li class="listitem"><p>
   The 
   <a class="ulink" href="http://www.uv-ac.de/ipaqhelp" target="_top">iPAQ and Zaurus Development using QPE handbook</a>
   by Werner Schulte
   describes how to install the Familiar Linux and Qtopia / OPIE on the Compaq iPAQ Handheld (and SHARP
   Zaurus) and how to develop applications for the iPAQ/Zaurus using the Familiar distribution and QPE desktop from
   Trolltech or OPIE (the free clone).
</p></li></ol></div><p>

</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm1362"></a>3.7.5. Software Indexes</h4></div></div></div><p>
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
   <a class="ulink" href="http://www.killefiz.de/zaurus/" target="_top">Zaurus Software Index - ZSI</a>
</p></li><li class="listitem"><p>
   <a class="ulink" href="http://ipkgfind.handhelds.org" target="_top">IPKGfind Software Index</a>
</p></li></ol></div><p>

</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm1372"></a>3.8. Conversion from Palm Pilot to Zaurus</h3></div></div></div><p>
   See my 
   <a class="ulink" href="http://tuxmobil.org/go2z.html" target="_top">survey of applications and conversion tools</a>
   between a conventional PDA
   operating system (only PalmOS yet,
   WinCE/Pocket PC and Epoc will follow hopefully)
   and a Linux PDA.
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch06s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch06.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch07.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">2. Samsung: YOPY </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 7. Non-Linux PDAs - Ports and Tools</td></tr></table></div></body></html>
