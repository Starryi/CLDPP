<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>3. Filters</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="Linux, Beginners, linux, start, Getting started, guide, Guide, Exercises, exercises"><link rel="home" href="index.html" title="Introduction to Linux"><link rel="up" href="ch05.html" title="Chapter 5. I/O redirection"><link rel="prev" href="ch05s02.html" title="2. Advanced redirection features"><link rel="next" href="ch05s04.html" title="4. Summary"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3. Filters</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch05s02.html">Prev</a> </td><th width="60%" align="center">Chapter 5. I/O redirection</th><td width="20%" align="right"> <a accesskey="n" href="ch05s04.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sect_05_03"></a>3. Filters</h2></div></div></div><p>When a program performs operations on input and writes the result to the standard output, it is called a filter.  One of the most common uses of filters is to restructure output.  We'll discuss a couple of the most important filters below.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sect_05_03_01"></a>3.1. More about grep</h3></div></div></div><p>As we saw in <a class="xref" href="ch03s03.html#sect_03_03_03_04" title="3.3.4. The grep command">Section 3.3.4, &#8220;The grep command&#8221;</a>, <span class="command"><strong>grep<a class="indexterm" name="idm6470"></a></strong></span> scans the output line per line, searching for matching patterns.  All lines containing the pattern will be printed to standard output.  This behavior can be reversed using the <code class="option">-v</code> option.
</p><p>Some examples: suppose we want to know which files in a certain directory have been modified<a class="indexterm" name="idm6475"></a> in February:</p><pre class="screen">
<code class="prompt">jenny:~&gt;</code> <span class="command"><strong>ls -la | grep Feb</strong></span>
</pre><p>The <span class="command"><strong>grep</strong></span> command, like most commands, is case sensitive. Use the <code class="option">-i</code> option to make no difference between upper and lower case.  A lot of GNU extensions are available as well, such as <code class="option">--colour</code>, which is helpful to highlight searchterms in long lines, and <code class="option">--after-context</code>, which prints the number of lines after the last matching line.  You can issue a recursive <span class="command"><strong>grep</strong></span> that searches all subdirectories of encountered directories using the <code class="option">-r</code> option.  As usual, options can be combined.</p><p>Regular expressions<a class="indexterm" name="idm6489"></a> can be used to further detail the exact character matches you want to select out of all the input lines.  The best way to start with regular expressions is indeed to read the <span class="command"><strong>grep</strong></span> documentation.  An excellent chapter is included in the <span class="command"><strong>grep</strong></span> <span class="application">Info</span> page.  Since it would lead us too far discussing the ins and outs of regular expressions, it is strongly advised to start here if you want to know more about them.</p><p>Play around a bit with <span class="command"><strong>grep</strong></span>, it will be worth the trouble putting some time in this most basic but very powerful filtering command.  The exercises at the end of this chapter will help you to get started, see <a class="xref" href="ch05s05.html" title="5. Exercises">Section 5, &#8220;Exercises&#8221;</a>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sect_05_03_02"></a>3.2. Filtering output</h3></div></div></div><p>The command <span class="command"><strong>sort<a class="indexterm" name="idm6502"></a></strong></span> arranges lines in alphabetical<a class="indexterm" name="idm6504"></a> order by default:</p><pre class="screen">
<code class="prompt">thomas:~&gt;</code> <span class="command"><strong>cat people-I-like | sort</strong></span>
Auntie Emmy
Boyfriend
Dad
Grandma
Mum
My boss
</pre><p>But there are many more things <span class="command"><strong>sort</strong></span> can do.  Looking at the file size, for instance.  With this command, directory content is sorted smallest files<a class="indexterm" name="idm6512"></a> first, biggest<a class="indexterm" name="idm6515"></a> files last:</p><div class="cmdsynopsis"><p><code class="command">ls <code class="option">-la</code> | sort <code class="option">-nk</code> <em class="parameter"><code>5</code></em></code> </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Old sort syntax</h3><p>You might obtain the same result with <span class="command"><strong>ls <code class="option">-la</code> | sort <code class="option">+4n</code></strong></span>, but this is an old form which does not comply with the current standards.</p></div><p>The <span class="command"><strong>sort</strong></span> command is also used in combination with the <span class="command"><strong>uniq</strong></span> program (or <span class="command"><strong>sort <code class="option">-u</code></strong></span>) to sort output and filter out double<a class="indexterm" name="idm6534"></a> entries:</p><pre class="screen">
<code class="prompt">thomas:~&gt; </code><span class="command"><strong>cat <code class="filename">itemlist</code></strong></span>
1
4
2
5
34
567
432
567
34
555

<code class="prompt">thomas:~&gt; </code><span class="command"><strong>sort <code class="filename">itemlist</code> | uniq</strong></span>
1
2
34
4
432
5
555
567
</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch05s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch05.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch05s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">2. Advanced redirection features </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 4. Summary</td></tr></table></div></body></html>
