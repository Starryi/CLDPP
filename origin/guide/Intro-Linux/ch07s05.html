<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>5. Installing new software</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="Linux, Beginners, linux, start, Getting started, guide, Guide, Exercises, exercises"><link rel="home" href="index.html" title="Introduction to Linux"><link rel="up" href="ch07.html" title="Chapter 7. Home sweet /home"><link rel="prev" href="ch07s04.html" title="4. Region specific settings"><link rel="next" href="ch07s06.html" title="6. Summary"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5. Installing new software</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch07s04.html">Prev</a> </td><th width="60%" align="center">Chapter 7. Home sweet /home</th><td width="20%" align="right"> <a accesskey="n" href="ch07s06.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sect_07_06"></a>5. Installing new software</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sect_07_06_01"></a>5.1. General</h3></div></div></div><p>Most people are surprised to see that they have a running, usable computer after installing Linux; most distributions contain ample support for video and network cards, monitors and other external devices, so there is usually no need to install extra drivers.  Also common tools such as office suites, web browsers, E-mail and other network client programs are included in the main distributions.  Even so, an initial installation might not meet your requirements.</p><p>If you just can't find<a class="indexterm" name="idm8094"></a> what you need, maybe it is not installed on your system.  It may also be that you have the required software, but it does not do what it is supposed to do.  Remember that Linux moves fast, and software improves on a daily basis.  Don't waste your time troubleshooting problems that might already be resolved.</p><p>You can update your system or add packages to it at any time you want.  Most software comes in packages.  Extra software may be found on your installation CDs or on the Internet.  The website of your Linux distribution is a good place to start looking for additional software and contains instructions about how to install it on your type of Linux, see <a class="xref" href="apa.html" title="Appendix A. Where to go from here?">Appendix A, <i>Where to go from here?</i></a>.  Always read the documentation that comes with new software, and any installation guidelines the package might contain.  All software comes with a <code class="filename">README<a class="indexterm" name="idm8100"></a></code> file, which you are very strongly advised to read.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sect_07_06_02"></a>5.2. Package formats</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_07_06_02_01"></a>5.2.1. RPM packages</h4></div></div></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="sect_07_06_02_01_01"></a>5.2.1.1. What is RPM?</h5></div></div></div><p>RPM, the <span class="application">RedHat Package Manager<a class="indexterm" name="idm8110"></a></span>, is a powerful package manager that you can use to install, update and remove packages.  It allows you to search for packages and keeps track of the files that come with each package.  A system is built-in so that you can verify the authenticity of packages downloaded from the Internet.  Advanced users can build their own packages with RPM.</p><p>An RPM package  consists  of an archive of files and meta-data used to install and erase the archive files. The meta-data includes  helper  scripts,  file attributes,  and  descriptive  information about the package.  Packages come in two varieties: binary packages, used to encapsulate software to be  installed,  and source  packages,  containing  the source code and recipe necessary to produce binary packages.</p><p>Many other distributions support RPM packages, among the popular ones RedHat Enterprise Linux, Mandriva (former Mandrake), Fedora Core and SuSE Linux.  Apart from the advice for your distribution, you will want to read <span class="command"><strong>man <em class="parameter"><code>rpm</code></em></strong></span>.</p></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="sect_07_06_02_01_02"></a>5.2.1.2. RPM examples</h5></div></div></div><p>Most packages are simply installed with the upgrade option, <code class="option">-U</code>, whether the package is already installed or not.  The RPM package contains a complete<a class="indexterm" name="idm8121"></a> version of the program, which overwrites existing versions or installs as a new package.  The typical usage<a class="indexterm" name="idm8124"></a> is as follows:</p><div class="cmdsynopsis"><p><code class="command">rpm <code class="option">-Uvh</code> <code class="filename">/path/to/rpm-package(s)</code></code> </p></div><p>The <code class="option">-v</code> option generates more verbose output, and <code class="option">-h</code> makes <span class="command"><strong>rpm</strong></span> print a progress bar:</p><pre class="screen">
<code class="prompt">[root@jupiter tmp]#</code> <span class="command"><strong>rpm -Uvh totem-0.99.5-1.fr.i386.rpm</strong></span>
Preparing...                ########################################### [100%]
   1:totem                  ########################################### [100%]
<code class="prompt">[root@jupiter tmp]#</code>
</pre><p>New kernel packages, however, are installed with the install option <code class="option">-i</code>, which does not overwrite existing version(s) of the package. That way, you will still be able to boot your system with the old kernel if the new one does not work.</p><p>You can also use <span class="command"><strong>rpm<a class="indexterm" name="idm8143"></a></strong></span> to check whether a package is installed<a class="indexterm" name="idm8145"></a> on your system:</p><pre class="screen">
<code class="prompt">[david@jupiter ~]</code> <span class="command"><strong>rpm -qa | grep vim</strong></span>
vim-minimal-6.1-29
vim-X11-6.1-29
vim-enhanced-6.1-29
vim-common-6.1-29
</pre><p>Or you can find out which package contains a certain file<a class="indexterm" name="idm8152"></a> or executable:</p><pre class="screen">
<code class="prompt">[david@jupiter ~]</code> <span class="command"><strong>rpm -qf /etc/profile</strong></span>
setup-2.5.25-1

<code class="prompt">[david@jupiter ~]</code> <span class="command"><strong>which cat</strong></span>
cat is /bin/cat

<code class="prompt">[david@jupiter ~]</code> <span class="command"><strong>rpm -qf /bin/cat</strong></span>
coreutils-4.5.3-19
</pre><p>Note that you need not have access to administrative privileges in order to use <span class="command"><strong>rpm</strong></span> to query the RPM database.  You only need to be <span class="emphasis"><em>root</em></span> when adding, modifying or deleting packages.</p><p>Below is one last example, demonstrating how to uninstall<a class="indexterm" name="idm8166"></a> a package using <span class="command"><strong>rpm</strong></span>:</p><pre class="screen">
<code class="prompt">[root@jupiter root]#</code> <span class="command"><strong>rpm -e totem</strong></span>
<code class="prompt">[root@jupiter root]#</code>
</pre><p>Note that uninstalling is not that verbose by default, it is normal that you don't see much happening.  When in doubt, use <span class="command"><strong>rpm <code class="option">-qa</code></strong></span> again to verify that the package has been removed.</p><p>RPM can do much more than the couple of basic functions we discussed in this introduction; the <a class="ulink" href="http://www.tldp.org/HOWTO/RPM-HOWTO/index.html" target="_top">RPM HOWTO</a> contains further references.</p></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_07_06_02_02"></a>5.2.2. DEB (.deb) packages</h4></div></div></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="sect_07_06_02_02_01"></a>5.2.2.1. What are Debian packages?</h5></div></div></div><p>This package format<a class="indexterm" name="idm8184"></a> is the default on Debian GNU/Linux, where <span class="command"><strong>dselect<a class="indexterm" name="idm8188"></a></strong></span>, and, nowadays more common, <span class="command"><strong>aptitude<a class="indexterm" name="idm8191"></a></strong></span>, is the standard tool for managing the packages.  It is used to select packages that you want to install or upgrade, but it will also run during the installation of a Debian system and help you to define the access method to use, to list available packages and to configure packages.</p><p>The <a class="ulink" href="http://debian.org" target="_top">Debian web site</a> contains all information you need, including a <span class="quote">&#8220;<span class="quote">dselect Documentation for Beginners</span>&#8221;</span>.</p><p>According to the latest news, the Debian package format is becoming more and more popular.  At the time of this writing, 5 of the top-10 distributions use it.  Also <span class="command"><strong>apt-get<a class="indexterm" name="idm8198"></a></strong></span> (see <a class="xref" href="ch07s05.html#sect_07_06_03_02" title="5.3.2. APT">Section 5.3.2, &#8220;APT&#8221;</a> is becoming extremely popular, also on non-DEB systems.</p></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="sect_07_06_02_02_02"></a>5.2.2.2. Examples with DEB tools</h5></div></div></div><p>Checking whether a package is installed is done using the <span class="command"><strong>dpkg</strong></span> command.  For instance, if you want to know which version of the <span class="application">Gallery</span> software is installed on your machine:</p><pre class="screen">
<code class="prompt">nghtwsh@gorefest:~$ </code><span class="command"><strong>dpkg <code class="option">-l</code> <em class="parameter"><code>*gallery*</code></em></strong></span>
Desired=Unknown/Install/Remove/Purge/Hold
| Status=Not/Installed/Config-files/Unpacked/Failed-config/Half-installed
|/ Err?=(none)/Hold/Reinst-required/X=both-problems (Status,Err: uppercase=bad)
||/ Name           Version        Description
+++-==============-==============-============================================
ii  gallery        1.5-1sarge2    a web-based photo album written in php
</pre><p>The <span class="quote">&#8220;<span class="quote">ii</span>&#8221;</span> prefix means the package is installed.  Should you see <span class="quote">&#8220;<span class="quote">un</span>&#8221;</span> as a prefix, that means that the package is known in the list that your computer keeps, but that it is not installed.</p><p>Searching which package a file belongs to is done using the <code class="option">-S</code> to <span class="command"><strong>dpkg</strong></span>:</p><pre class="screen">
<code class="prompt">nghtwsh@gorefest:~$ </code><span class="command"><strong>dpkg <code class="option">-S</code> <em class="parameter"><code>/bin/cat</code></em></strong></span>
coreutils: /bin/cat
</pre><p>More information can be found in the <span class="application">Info</span> pages for <span class="command"><strong>dpkg</strong></span>.</p></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_07_06_02_03"></a>5.2.3. Source packages</h4></div></div></div><p>The largest part of Linux programs is Free/Open Source, so source<a class="indexterm" name="idm8228"></a> packages are available for these programs.  Source files are needed for compiling your own program version.  Sources for a program can be downloaded from its web site, often as a compressed tarball (<code class="filename">program-version.tar.gz</code> or similar). For RPM-based distributions, the source is often provided in the <code class="filename">program-version.src.rpm</code>.  Debian, and most distributions based on it, provide themselves the adapted source which can be obtained using <span class="command"><strong>apt-get <em class="parameter"><code>source</code></em></strong></span>.</p><p>Specific requirements, dependencies and installation instructions are provided in the <code class="filename">README</code> file.  You will probably need a C compiler, <span class="command"><strong>gcc</strong></span>.  This GNU C compiler is included in most Linux systems and is ported to many other platforms.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sect_07_06_03"></a>5.3. Automating package management and updates</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_07_06_03_01"></a>5.3.1. General remarks</h4></div></div></div><p>The first thing you do after installing a new system is applying updates;
this applies to all operating systems and Linux is not different.</p><p>The updates for most Linux<a class="indexterm" name="idm8244"></a> systems can usually be found on a nearby site mirroring your distribution.  Lists of sites offering this service can be found at your distribution's web site, see <a class="xref" href="apa.html" title="Appendix A. Where to go from here?">Appendix A, <i>Where to go from here?</i></a>.</p><p>Updates<a class="indexterm" name="idm8249"></a> should be applied regularly, daily if possible - but every couple of weeks would be a reasonable start.  You really should try to have the most recent version of your distribution, since Linux changes constantly.  As we said before, new features, improvements and bug fixes are supplied at a steady rhythm, and sometimes important security problems are addressed.</p><p>The good news is that most Linux distributions provide tools so that you don't have to upgrade tens of packages daily by hand.  The following sections give an overview of <span class="emphasis"><em>package manager managers.</em></span>  There is much more to this subject, even regular updates of source packages is manageable automatically; we only list the most commonly known systems.  Always refer to the documentation for your specific distribution for advised procedures.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_07_06_03_02"></a>5.3.2. APT</h4></div></div></div><p>The <span class="application">Advanced Package Tool</span> is a management<a class="indexterm" name="idm8258"></a> system for software packages.  The command line tool for handling packages is <span class="command"><strong>apt-get<a class="indexterm" name="idm8262"></a></strong></span>, which comes with an excellent man page describing how to install and update packages and how to upgrade singular packages or your entire distribution.  APT has its roots in the Debian GNU/Linux distribution, where it is the default manager for the Debian packages.  APT has been ported to work with RPM packages as well.  The main advantage of APT is that it is free and flexible to use.  It will allow you to set up systems similar to the distribution specific (and in some cases commercial) ones listed in the next sections.</p><p>Generally, when first using<a class="indexterm" name="idm8265"></a> <span class="command"><strong>apt-get</strong></span>, you will need to get an index of the available packages.  This is done using the command</p><div class="cmdsynopsis"><p><code class="command">apt-get <em class="parameter"><code>update</code></em></code> </p></div><p>After that<a class="indexterm" name="idm8273"></a>, you can use <span class="command"><strong>apt-get</strong></span> to upgrade your system:</p><div class="cmdsynopsis"><p><code class="command">apt-get <em class="parameter"><code>upgrade</code></em></code> </p></div><p>Do this often, it's an easy way to keep your system up-to-date and thus safe.</p><p>Apart from this general usage, <span class="command"><strong>apt-get</strong></span> is also very fast for installing<a class="indexterm" name="idm8283"></a> individual packages.  This is how it works:</p><pre class="screen">
<code class="prompt">[david@jupiter ~]</code> <span class="command"><strong>su - -c "apt-get install xsnow"</strong></span>
Password:
Reading Package Lists... Done
Building Dependency Tree... Done
The following NEW packages will be installed:
  xsnow
0 packages upgraded, 1 newly installed, 0 removed and 3 not upgraded.
Need to get 33.6kB of archives.
After unpacking 104kB of additional disk space will be used.
Get:1 http://ayo.freshrpms.net redhat/9/i386/os xsnow 1.42-10 [33.6kB]
Fetched 33.6kB in 0s (106kB/s)
Executing RPM (-Uvh)...
Preparing...                ########################################### [100%]
   1:xsnow                  ########################################### [100%]
</pre><p>Note the <code class="option">-c</code> option to the <span class="command"><strong>su</strong></span> command, which indicates to the root shell to only execute this command, and then return to the user's environment.  This way, you cannot forget to quit the root account.</p><p>If there are any dependencies on other packages, <span class="command"><strong>apt-get</strong></span> will download and install these supporting packages.</p><p>More information can be found in the <a class="ulink" href="http://www.debian.org/doc/user-manuals#apt-howto" target="_top">APT HOWTO</a>.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_07_06_03_03"></a>5.3.3. Systems using RPM packages</h4></div></div></div><p><span class="application">Update Agent<a class="indexterm" name="idm8300"></a></span>, which originally only supported RedHat RPM packages, is now ported to a wider set of software, including non-RedHat repositories.  This tool provides a complete system for updating the RPM packages on a RedHat or Fedora Core system.  On the command line, type <span class="command"><strong>up2date<a class="indexterm" name="idm8304"></a></strong></span> to update your system.  On the desktop, by default a small icon is activated, telleng you whether or not there are updates available for your system.</p><p><span class="application">Yellowdog's Updater Modified<a class="indexterm" name="idm8308"></a></span> (<span class="command"><strong>yum<a class="indexterm" name="idm8312"></a></strong></span>) is another tool that recently became more popular.  It is an interactive but automated update program for installing, updating or removing RPM packages on a system.  It is the tool of choice on Fedora systems.</p><p>On SuSE Linux, everything is done with <span class="application">YaST<a class="indexterm" name="idm8316"></a></span>, Yet another Setup Tool, which supports a wide variety of system administration tasks, among which updating RPM packages.  Starting from SuSE Linux 7.1 you can also upgrade using a web interface and <span class="application">YOU<a class="indexterm" name="idm8320"></a></span>, Yast Online Update.</p><p>Mandrake Linux and Mandriva provide so-called URPMI<a class="indexterm" name="idm8324"></a> tools, a set of wrapper programs that make installing new software easier for the user.  These tools combine with <span class="application">RPMDrake</span> and <span class="application">MandrakeUpdate</span> to provide everything needed for smooth install and uninstall of software packages.  MandrakeOnline offers an extended range of services and can automatically notify administrators when updates are available for your particular Mandrake system.  See <span class="command"><strong>man <em class="parameter"><code>urpmi</code></em></strong></span>, among others, for more info.</p><p>Also the <span class="application">KDE</span> and <span class="application">Gnome</span> desktop suites have their own (graphical) versions of package managers.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sect_07_06_04"></a>5.4. Upgrading your kernel</h3></div></div></div><p>Most Linux installations are fine if you periodically upgrade your distribution.  The upgrade<a class="indexterm" name="idm8337"></a> procedure will install a new kernel<a class="indexterm" name="idm8340"></a> when needed and make all necessary changes to your system.  You should only compile or install a new kernel manually if you need kernel features that are not supported by the default kernel included in your Linux distribution.</p><p>Whether compiling your own optimized kernel or using a pre-compiled kernel package, install it in co-existence with the old kernel until you are sure that everything works according to plan.</p><p>Then create a dual boot system that will allow you to choose which kernel to boot by updating your boot loader configuration file <code class="filename">grub.conf<a class="indexterm" name="idm8346"></a></code>.  This is a simple example:</p><pre class="screen">
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making config changes. 
# NOTICE:  You have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /boot/, e.g.
#          root (hd0,0)
#          kernel /vmlinuz-version ro root=/dev/hde8
#          initrd /initrd-version.img
#boot=/dev/hde
default=0
timeout=10
splashimage=(hd0,0)/grub/splash.xpm.gz
title Red Hat Linux new (2.4.9-31)
	root (hd0,0)
	kernel /vmlinuz-2.4.9-31 ro root=/dev/hde8
	initrd /initrd-2.4.9-31.img
title old-kernel
        root (hd0,0)
        kernel /vmlinuz-2.4.9-21 ro root=/dev/hde8
        initrd /initrd-2.4.9-21.img
</pre><p>After the new kernel has proven to work, you may remove the lines for the old one from the GRUB config file, although it is best to wait a couple of days just to be sure.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sect_07_06_05"></a>5.5. Installing extra packages from the installation CDs</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_07_06_05_01"></a>5.5.1. Mounting a CD</h4></div></div></div><p>This is basically done in the same way as installing packages manually, except that you have to append the file system of the CD<a class="indexterm" name="idm8356"></a> to your machine's file system to make it accessible.  On most systems, this will be done automatically upon insertion of a CD in the drive because the <span class="command"><strong>automount<a class="indexterm" name="idm8360"></a></strong></span> daemon is started up at boot time.  If your CD is not made available automatically, issue the <span class="command"><strong>mount<a class="indexterm" name="idm8363"></a></strong></span> command in a terminal window.  Depending on your actual system configuration, a line similar to this one will usually<a class="indexterm" name="idm8365"></a> do the trick:</p><div class="cmdsynopsis"><p><code class="command">mount <code class="filename">/dev/cdrom /mnt/cdrom</code></code> </p></div><p>On some systems, only <span class="emphasis"><em>root</em></span> can mount removable media; this depends on the configuration.</p><p>For automation purposes, the CD drive usually has an entry in <code class="filename">/etc/fstab<a class="indexterm" name="idm8376"></a></code>, which lists the file systems and their mount points, that make up your file system tree.  This is such a line:</p><pre class="screen">
<code class="prompt">[david@jupiter ~]</code> <span class="command"><strong>grep cdrom /etc/fstab</strong></span>
/dev/cdrom	/mnt/cdrom	iso9660		noauto,owner,ro 0 0
</pre><p>This indicates that the system will understand the command <span class="command"><strong>mount <code class="filename">/mnt/cdrom</code></strong></span>.  The <code class="option">noauto</code> option means that on this system, CDs are not mounted at boot time.</p><p>You may even try to right click on the CD icon on your desktop to mount the CD if your file manager doesn't do it for you.  You can check whether it worked issuing the <span class="command"><strong>mount<a class="indexterm" name="idm8387"></a></strong></span> command with no arguments:</p><pre class="screen">
<code class="prompt">[david@jupiter ~]</code> <span class="command"><strong>mount | grep cdrom</strong></span>
/dev/cdrom on /mnt/cdrom type iso9660 (ro,nosuid,nodev)
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_07_06_05_02"></a>5.5.2. Using the CD</h4></div></div></div><p>After mounting the CD, you can change directories<a class="indexterm" name="idm8396"></a>, usually to the mount point <code class="filename">/mnt/cdrom</code>, where you can access the content of the CD-ROM.  Use the same commands for dealing with files and directories as you would use for files on the hard disk.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_07_06_05_03"></a>5.5.3. Ejecting the CD</h4></div></div></div><p>In order to get the CD<a class="indexterm" name="idm8403"></a> out of the drive after you've finished using it, the file system on the CD should be unused.  Even being in one of the subdirectories of the mount point, <code class="filename">/mnt/cdrom</code> in our example, will be considered as <span class="quote">&#8220;<span class="quote">using the file system</span>&#8221;</span>, so you should get out of there.  Do this for instance by typing <span class="command"><strong>cd</strong></span> with no arguments, which will put you back in your home directory.  After that, you can either use the command</p><div class="cmdsynopsis"><p><code class="command">umount <code class="filename">/mnt/cdrom</code></code> </p></div><p>or</p><div class="cmdsynopsis"><p><code class="command">eject <em class="parameter"><code>cdrom</code></em></code> </p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Blocked drives</h3><p><span class="emphasis"><em>NEVER</em></span> force the drive.  The trick with the paperclip is a bad idea, because this will eventually expunge the CD, but your system will think the CD is still there because normal procedures were not followed.  Chances are likely that you will have to reboot to get the system back in a consistent state.</p><p>If you keep getting <span class="quote">&#8220;<span class="quote">device busy</span>&#8221;</span> messages, check first that all shell sessions have left the CD file system and that no graphical applications are using it anymore.  When in doubt, use the <span class="command"><strong>lsof</strong></span> tool to trace down the process(es) still using the CD resource.</p></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch07s04.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch07.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch07s06.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">4. Region specific settings </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 6. Summary</td></tr></table></div></body></html>
