<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>1. General good housekeeping</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="Linux, Beginners, linux, start, Getting started, guide, Guide, Exercises, exercises"><link rel="home" href="index.html" title="Introduction to Linux"><link rel="up" href="ch07.html" title="Chapter 7. Home sweet /home"><link rel="prev" href="ch07.html" title="Chapter 7. Home sweet /home"><link rel="next" href="ch07s02.html" title="2. Your text environment"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1. General good housekeeping</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch07.html">Prev</a> </td><th width="60%" align="center">Chapter 7. Home sweet /home</th><td width="20%" align="right"> <a accesskey="n" href="ch07s02.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sect_07_01"></a>1. General good housekeeping</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sect_07_01_01"></a>1.1. Introduction</h3></div></div></div><p>As we mentioned before, it is easy enough to make a mess of the system.  We can't put enough stress on the importance of keeping the place tidy.  When you learn this from the start, it will become a good habit that will save you time when programming on a Linux or UNIX system or when confronted with system management tasks.  Here are some ways of making life easier<a class="indexterm" name="idm7025"></a> on yourself:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Make a <code class="filename">bin</code> directory for your program files and scripts.</p></li><li class="listitem"><p>Organize non-executable files in appropriate directories, and make as many directories as you like.  Examples include separate directories for images, documents, projects, downloaded files, spreadsheets, personal files, and so on.</p></li><li class="listitem"><p>Make directories private with the <span class="command"><strong>chmod <em class="parameter"><code>700</code></em> <code class="filename">dirname</code></strong></span> command.</p></li><li class="listitem"><p>Give your files sensible names, such as <code class="filename">Complaint to the prime minister 050302</code> rather than <code class="filename">letter1</code>.</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sect_07_01_02"></a>1.2. Make space</h3></div></div></div><p>On some systems, the <span class="command"><strong>quota</strong></span> system may force you to clean up from time to time, or the physical limits of your hard disk may force you to make more space without running any monitoring programs.  This section discusses a number of ways, besides using the <span class="command"><strong>rm</strong></span> command, to reclaim disk space.</p><p>Run the <span class="command"><strong>quota <code class="option">-v</code></strong></span> command to see how much space is left.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_07_01_02_01"></a>1.2.1. Emptying files</h4></div></div></div><p>Sometimes the content of a file doesn't interest you, but you need the file name as a marker (for instance, you just need the timestamp of a file, a reminder that the file was there or should be there some time in the future).  Redirecting the output of a null command<a class="indexterm" name="idm7054"></a> is how this is done in the <span class="application">Bourne</span> and <span class="application">Bash</span> shells<a class="indexterm" name="idm7059"></a>:</p><pre class="screen">
<code class="prompt">andy:~&gt;</code> <span class="command"><strong>cat wishlist &gt; placeholder</strong></span>

<code class="prompt">andy:~&gt;</code> <span class="command"><strong>ls -la placeholder</strong></span>
-rw-rw-r--    1 andy   andy       200 Jun 12 13:34 placeholder

<code class="prompt">andy:~&gt;</code> <span class="command"><strong> &gt; placeholder</strong></span>

<code class="prompt">andy:~&gt;</code> <span class="command"><strong>ls -la placeholder</strong></span>

-rw-rw-r--    1 andy   andy         0 Jun 12 13:35 placeholder
</pre><p>The process of reducing an existing file to a file with the same name that is 0 bytes large is called <span class="emphasis"><em>truncating<a class="indexterm" name="idm7073"></a></em></span>.</p><p>For creating a new empty file, the same effect is obtained with the <span class="command"><strong>touch<a class="indexterm" name="idm7077"></a></strong></span> command.  On an existing file, <span class="command"><strong>touch</strong></span> will only update the timestamp.  See the <span class="application">Info</span> pages on <span class="command"><strong>touch</strong></span> for more details.</p><p>To <span class="quote">&#8220;<span class="quote">almost</span>&#8221;</span> empty a file, use the <span class="command"><strong>tail<a class="indexterm" name="idm7085"></a></strong></span> command.  Suppose user <span class="emphasis"><em>andy</em></span>'s wishlist becomes rather long because he always adds stuff at the end but never deletes the things he actually gets.  Now he only wants to keep the last five items:</p><pre class="screen">
<code class="prompt">andy:~&gt;</code> <span class="command"><strong>tail -5 wishlist &gt; newlist</strong></span>

<code class="prompt">andy:~&gt;</code> <span class="command"><strong>cat newlist &gt; wishlist</strong></span>

<code class="prompt">andy:~&gt;</code> <span class="command"><strong>rm newlist</strong></span>
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_07_01_02_02"></a>1.2.2. More about log files</h4></div></div></div><p>Some Linux programs insist on writing all sorts of output in a log<a class="indexterm" name="idm7098"></a> file.  Usually there are options to only log errors, or to log a minimal amount of information, for example setting the debugging level of the program.  But even then, you might not care about the log file.  Here are some ways to get rid of them or at least set some limits to their size:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Try removing the log file when the program is not running, if you are sure that you won't need it again.  Some programs may even see, when restarted, that there is no log file and will therefore not log.</p></li><li class="listitem"><p>If you remove the log file and the program recreates it, read the documentation for this particular program in search for command options that avoid making log files.</p></li><li class="listitem"><p>Try making smaller log files by logging only the information that is relevant to you, or by logging only significant information.</p></li><li class="listitem"><p>Try replacing the log file with a symbolic link to <code class="filename">/dev/null</code>; if you're lucky the program won't complain.  Don't do this with the log files of programs that run at system boot or programs that run from cron (see <a class="xref" href="ch04.html" title="Chapter 4. Processes">Chapter 4, <i>Processes</i></a>).  These programs might replace the symbolic link with a small file that starts growing again.</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_07_01_02_03"></a>1.2.3. Mail</h4></div></div></div><p>Regularly clean out your mailbox, make sub-folders and automatic redirects using <span class="command"><strong>procmail</strong></span> (see the <span class="application">Info</span> pages) or the filters of your favorite mail reading application.  If you have a trash folder, clean it out on a regular basis.</p><p>To redirect mail, use the <code class="filename">.forward<a class="indexterm" name="idm7119"></a></code> file in your home directory.  The Linux mail service looks for this file whenever it has to deliver local mail.  The content of the file defines what the mail system should do with your mail.  It can contain a single line holding a fully qualified E-mail address.  In that case the system will send all your mail to this address.  For instance, when renting space for a website, you might want to forward the mail destined for the webmaster to your own account in order not to waste disk space.  The webmaster's <code class="filename">.forward</code> may look like this:</p><pre class="screen">
<code class="prompt">webmaster@www ~/&gt;</code> <span class="command"><strong>cat .forward</strong></span>
mike@pandora.be
</pre><p>Using mail forwarding is also useful to prevent yourself from having to check several different mailboxes.  You can make every address point to a central and easily accessible account.</p><p>You can ask your system administrator to define a forward for you in the local mail aliases file, like when an account is being closed but E-mail remains active for a while.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_07_01_02_04"></a>1.2.4. Save space with a link</h4></div></div></div><p>When several users need access to the same file or program, when the original file name is too long or too difficult to remember, use a symbolic<a class="indexterm" name="idm7130"></a> link instead of a separate copy for each user or purpose.</p><p>Multiple symbolic links may have different names, e.g. a link may be called <code class="filename">monfichier</code> in one user's directory, and <code class="filename">mylink</code> in another's.  Multiple links (different names) to the same file may also occur in the same directory.  This is often done in the <code class="filename">/lib</code> directory: when issuing the command</p><div class="cmdsynopsis"><p><code class="command">ls <code class="option">-l</code> <code class="filename">/lib</code></code> </p></div><p>you will see that this directory is plenty of links pointing to the same files.  These are created so that programs searching for one name would not get stuck, so they are pointed to the correct/current name of the libraries they need.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_07_01_02_05"></a>1.2.5. Limit file sizes</h4></div></div></div><p>The shell contains a built-in command to limit file sizes, <span class="command"><strong>ulimit<a class="indexterm" name="idm7146"></a></strong></span>, which can also be used to display limitations on system<a class="indexterm" name="idm7148"></a> resources:</p><pre class="screen">
<code class="prompt">cindy:~&gt;</code> <span class="command"><strong>ulimit -a</strong></span>
core file size (blocks)     0
data seg size (kbytes)      unlimited
file size (blocks)          unlimited
max locked memory (kbytes)  unlimited
max memory size (kbytes)    unlimited
open files                  1024
pipe size (512 bytes)       8
stack size (kbytes)         8192
cpu time (seconds)          unlimited
max user processes          512
virtual memory (kbytes)     unlimited
</pre><p>Cindy is not a developer and doesn't care about core<a class="indexterm" name="idm7155"></a> dumps, which contain debugging information on a program.  If you do want core dumps, you can set their size using the <span class="command"><strong>ulimit</strong></span> command.  Read the <span class="application">Info</span> pages on <span class="command"><strong>bash</strong></span> for a detailed explanation.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Core file?</h3><p>A core file or <span class="emphasis"><em>core dump</em></span> is sometimes generated when things go wrong with a program during its execution.  The core file contains a copy of the system's memory, as it was at the time that the error occured.</p></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_07_01_02_06"></a>1.2.6. Compressed files</h4></div></div></div><p>Compressed files are useful because they take less space on your hard disk.  Another advantage is that it takes less bandwidth to send a compressed file over your network.  A lot of files, such as the man pages, are stored in a compressed format on your system.  Yet unpacking these to get a little bit of information and then having to compress them again is rather time-consuming.  You don't want to unpack a man page, for instance, read about an option to a command and then compress the man page again.  Most people will probably forget to clean up after they found the information they needed.</p><p>So we have tools that work on compressed files, by uncompressing them only in memory.  The actual compressed file stays on your disk as it is.  Most systems support <span class="command"><strong>zgrep</strong></span>, <span class="command"><strong>zcat</strong></span>, <span class="command"><strong>bzless</strong></span> and other members of the z-family to prevent unnecessary decompressing/compressing actions.  See your system's binary directory and the Info pages.</p><p>See <a class="xref" href="ch09.html" title="Chapter 9. Fundamental Backup Techniques">Chapter 9, <i>Fundamental Backup Techniques</i></a> for more on the actual compressing of files and examples on making archives.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch07.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch07.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch07s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 7. Home sweet /home </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 2. Your text environment</td></tr></table></div></body></html>
