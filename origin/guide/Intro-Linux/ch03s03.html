<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>3. Manipulating files</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="Linux, Beginners, linux, start, Getting started, guide, Guide, Exercises, exercises"><link rel="home" href="index.html" title="Introduction to Linux"><link rel="up" href="ch03.html" title="Chapter 3. About files and the file system"><link rel="prev" href="ch03s02.html" title="2. Orientation in the file system"><link rel="next" href="ch03s04.html" title="4. File security"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3. Manipulating files</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch03s02.html">Prev</a> </td><th width="60%" align="center">Chapter 3. About files and the file system</th><td width="20%" align="right"> <a accesskey="n" href="ch03s04.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sect_03_03"></a>3. Manipulating files</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sect_03_03_01"></a>3.1. Viewing file properties</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_03_03_01_01"></a>3.1.1. More about ls</h4></div></div></div><p>Besides the name of the file, <span class="command"><strong>ls<a class="indexterm" name="idm2962"></a></strong></span> can give a lot of other information, such as the file type, as we already discussed.  It can also show permissions<a class="indexterm" name="idm2964"></a> on a file, file size, inode number, creation date and time, owners and amount of links to the file.  With the <code class="option">-a</code> option to <span class="command"><strong>ls</strong></span>, files that are normally hidden from view can be displayed as well.  These are files that have a name starting with a dot.  A couple of typical examples include the configuration files in your home directory.  When you've worked with a certain system for a while, you will notice that tens of files and directories have been created that are not automatically listed in a directory index.  Next to that, every directory contains a file named just dot (.) and one with two dots (..)<a class="indexterm" name="idm2969"></a>, which are used in combination with their inode number to determine the directory's position in the file system's tree structure.</p><p>You should really read the <span class="application">Info</span> pages about <span class="command"><strong>ls</strong></span>, since it is a very common command with a lot of useful options.  Options can be combined, as is the case with most UNIX commands and their options.  A common combination is <span class="command"><strong>ls <code class="option">-al</code></strong></span>; it shows a long list of files and their properties as well as the destinations that any symbolic links point to.  <span class="command"><strong>ls <code class="option">-latr</code></strong></span> displays the same files, only now in reversed order of the last change, so that the file changed most recently occurs at the bottom of the list.  Here are a couple of examples<a class="indexterm" name="idm2978"></a>:</p><pre class="screen">
<code class="prompt">krissie:~/mp3&gt;</code> <span class="command"><strong>ls</strong></span>
Albums/  Radio/  Singles/  gene/  index.html

<code class="prompt">krissie:~/mp3&gt;</code> <span class="command"><strong>ls -a</strong></span>
./   .thumbs  Radio     gene/
../  Albums/  Singles/  index.html

<code class="prompt">krissie:~/mp3&gt;</code> <span class="command"><strong>ls -l Radio/</strong></span>
total 8
drwxr-xr-x    2 krissie krissie  4096 Oct 30  1999 Carolina/
drwxr-xr-x    2 krissie krissie  4096 Sep 24  1999 Slashdot/

<code class="prompt">krissie:~/mp3&gt;</code> <span class="command"><strong>ls -ld Radio/</strong></span>
drwxr-xr-x    4 krissie krissie  4096 Oct 30  1999 Radio/

<code class="prompt">krissie:~/mp3&gt;</code> <span class="command"><strong>ls -ltr</strong></span>
total 20
drwxr-xr-x    4 krissie krissie  4096 Oct 30  1999 Radio/
-rw-r--r--    1 krissie krissie   453 Jan  7  2001 index.html
drwxrwxr-x   30 krissie krissie  4096 Oct 20 17:32 Singles/
drwxr-xr-x    2 krissie krissie  4096 Dec  4 23:22 gene/
drwxrwxr-x   13 krissie krissie  4096 Dec 21 11:40 Albums/
</pre><p>On most Linux versions <span class="command"><strong>ls</strong></span> is <span class="emphasis"><em>aliased</em></span> to color-ls<a class="indexterm" name="idm2995"></a> by default.  This feature allows to see the file type without using any options to <span class="command"><strong>ls</strong></span>.  To achieve this<a class="indexterm" name="idm2999"></a>, every file type has its own color.  The standard scheme is in <code class="filename">/etc/DIR_COLORS</code>:</p><div class="table"><a name="idm3003"></a><p class="title"><b>Table 3.5. Color-ls default color scheme</b></p><div class="table-contents"><table class="table" summary="Color-ls default color scheme" border="1"><colgroup><col><col></colgroup><thead><tr><th align="left">Color</th><th align="left">File type</th></tr></thead><tbody><tr><td align="left">blue</td><td align="left">directories</td></tr><tr><td align="left">red</td><td align="left">compressed archives</td></tr><tr><td align="left">white</td><td align="left">text files</td></tr><tr><td align="left">pink</td><td align="left">images</td></tr><tr><td align="left">cyan</td><td align="left">links</td></tr><tr><td align="left">yellow</td><td align="left">devices</td></tr><tr><td align="left">green</td><td align="left">executables</td></tr><tr><td align="left">flashing red</td><td align="left">broken links</td></tr></tbody></table></div></div><br class="table-break"><p>More information is in the man page.  The same information was in earlier days displayed using suffixes to every non-standard file name.  For mono-color use (like printing a directory listing) and for general readability, this scheme is still<a class="indexterm" name="idm3036"></a> in use:</p><div class="table"><a name="idm3039"></a><p class="title"><b>Table 3.6. Default suffix scheme for ls</b></p><div class="table-contents"><table class="table" summary="Default suffix scheme for ls" border="1"><colgroup><col><col></colgroup><thead><tr><th align="left">Character</th><th align="left">File type</th></tr></thead><tbody><tr><td align="left">nothing</td><td align="left">regular file</td></tr><tr><td align="left">/</td><td align="left">directory</td></tr><tr><td align="left">*</td><td align="left">executable file</td></tr><tr><td align="left">@</td><td align="left">link</td></tr><tr><td align="left">=</td><td align="left">socket</td></tr><tr><td align="left">|</td><td align="left">named pipe</td></tr></tbody></table></div></div><br class="table-break"><p>A description of the full functionality and features of the <span class="command"><strong>ls</strong></span> command<a class="indexterm" name="idm3067"></a> can be read with <span class="command"><strong>info <em class="parameter"><code>coreutils ls</code></em></strong></span>.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_03_03_01_02"></a>3.1.2. More tools</h4></div></div></div><p>To find out more about the kind of data we are dealing with, we use the <span class="command"><strong>file<a class="indexterm" name="idm3075"></a></strong></span> command.  By applying certain tests that check properties of a file in the file system, magic numbers and language tests, <span class="command"><strong>file<a class="indexterm" name="idm3078"></a></strong></span> tries to make an educated guess about the format of a file.  Some examples<a class="indexterm" name="idm3081"></a>:</p><pre class="screen">
<code class="prompt">mike:~&gt;</code> <span class="command"><strong>file Documents/</strong></span>
Documents/: directory

<code class="prompt">mike:~&gt;</code> <span class="command"><strong>file high-tech-stats.pdf</strong></span>
high-tech-stats.pdf: PDF document, version 1.2

<code class="prompt">mike:~&gt;</code> <span class="command"><strong>file Nari-288.rm</strong></span>
Nari-288.rm: RealMedia file

<code class="prompt">mike:~&gt;</code> <span class="command"><strong>file bijlage10.sdw</strong></span>
bijlage10.sdw: Microsoft Office Document

<code class="prompt">mike:~&gt;</code> <span class="command"><strong>file logo.xcf</strong></span>
logo.xcf: GIMP XCF image data, version 0, 150 x 38, RGB Color

<code class="prompt">mike:~&gt;</code> <span class="command"><strong>file cv.txt</strong></span>
cv.txt: ISO-8859 text

<code class="prompt">mike:~&gt;</code> <span class="command"><strong>file image.png</strong></span>
image.png: PNG image data, 616 x 862, 8-bit grayscale, non-interlaced

<code class="prompt">mike:~&gt;</code> <span class="command"><strong>file figure</strong></span>
figure: ASCII text

<code class="prompt">mike:~&gt;</code> <span class="command"><strong>file me+tux.jpg</strong></span>
me+tux.jpg: JPEG image data, JFIF standard 1.01, resolution (DPI),
            "28 Jun 1999", 144 x 144

<code class="prompt">mike:~&gt;</code> <span class="command"><strong>file 42.zip.gz</strong></span>
42.zip.gz: gzip compressed data, deflated, original filename,
         `42.zip', last modified: Thu Nov  1 23:45:39 2001, os: Unix

<code class="prompt">mike:~&gt;</code> <span class="command"><strong>file vi.gif</strong></span>
vi.gif: GIF image data, version 89a, 88 x 31

<code class="prompt">mike:~&gt;</code> <span class="command"><strong>file slide1</strong></span>
slide1: HTML document text

<code class="prompt">mike:~&gt;</code> <span class="command"><strong>file template.xls</strong></span>
template.xls: Microsoft Office Document

<code class="prompt">mike:~&gt;</code> <span class="command"><strong>file abook.ps</strong></span>
abook.ps: PostScript document text conforming at level 2.0

<code class="prompt">mike:~&gt;</code> <span class="command"><strong>file /dev/log</strong></span>
/dev/log: socket

<code class="prompt">mike:~&gt;</code> <span class="command"><strong>file /dev/hda</strong></span>
/dev/hda: block special (3/0)
</pre><p>The <span class="command"><strong>file</strong></span> command has a series of options, among others the <code class="option">-z</code> option to look into compressed files.  See <span class="command"><strong>info <em class="parameter"><code>file</code></em></strong></span> for a detailed description.  Keep in mind that the results of <span class="command"><strong>file</strong></span> are not absolute, it is only a guess.  In other words, <span class="command"><strong>file</strong></span> can be tricked.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Why all the fuss about file types and formats?</h3><p>Shortly, we will discuss a couple of command-line tools for looking at <span class="emphasis"><em>plain text files</em></span>.  These tools will not work when used on the wrong type of files.  In the worst case, they will crash your terminal and/or make a lot of beeping noises.  If this happens to you, just close the terminal session and start a new one.  But try to avoid it, because it is usually very disturbing for other people.</p></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sect_03_03_02"></a>3.2. Creating and deleting files and directories</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_03_03_02_01"></a>3.2.1. Making a mess...</h4></div></div></div><p>... Is not a difficult thing to do.  Today almost every system is networked, so naturally files get copied from one machine to another.  And especially when working in a graphical environment, creating new files is a piece of cake and is often done without the approval of the user.  To illustrate the problem, here's the full content of a new user's directory, created on a standard RedHat system:</p><pre class="screen">
<code class="prompt">[newuser@blob user]$</code> <span class="command"><strong>ls -al</strong></span>
total 32
drwx------   3 user 	user        4096 Jan 16 13:32 .
drwxr-xr-x   6 root     root        4096 Jan 16 13:32 ..
-rw-r--r--   1 user 	user      24 Jan 16 13:32 .bash_logout
-rw-r--r--   1 user 	user     191 Jan 16 13:32 .bash_profile
-rw-r--r--   1 user 	user     124 Jan 16 13:32 .bashrc
drwxr-xr-x   3 user 	user    4096 Jan 16 13:32 .kde
-rw-r--r--   1 user 	user    3511 Jan 16 13:32 .screenrc
-rw-------   1 user 	user      61 Jan 16 13:32 .xauthDqztLr
</pre><p>On first sight, the content of a <span class="quote">&#8220;<span class="quote">used</span>&#8221;</span> home directory doesn't look that bad<a class="indexterm" name="idm3138"></a> either:</p><pre class="screen">
<code class="prompt">olduser:~&gt;</code> <span class="command"><strong>ls</strong></span>
app-defaults/ crossover/   Fvwm@     mp3/      OpenOffice.org638/
articles/     Desktop/     GNUstep/  Nautilus/ staroffice6.0/
bin/          Desktop1/    images/   nqc/      training/
brol/         desktoptest/ Machines@ ns_imap/  webstart/
C/            Documents/   mail/     nsmail/   xml/
closed/       Emacs@       Mail/     office52/ Xrootenv.0
</pre><p>But when all the directories and files starting with a dot are included, there are 185 items in this directory.  This is because most applications have their own directories and/or files, containing user-specific settings, in the home directory of that user.  Usually these files are created the first time you start an application.  In some cases you will be notified when a non-existent directory needs to be created, but most of the time everything is done automatically.</p><p>Furthermore, new files are created seemingly continuously because users want to save files, keep different versions of their work, use Internet applications, and download files and attachments to their local machine.  It doesn't stop.  It is clear that one definitely needs a scheme to keep an overview on things.</p><p>In the next section, we will discuss our means of keeping order.  We only discuss text tools available to the shell, since the graphical tools are very intuitive and have the same look and feel as the well known point-and-click MS Windows-style file managers, including graphical help functions and other features you expect from this kind of applications.  The following list is an overview of the most popular file managers for GNU/Linux.  Most file managers can be started from the menu of your desktop manager, or by clicking your home directory icon, or from the command line, issuing these<a class="indexterm" name="idm3147"></a> commands:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="command"><strong>nautilus<a class="indexterm" name="idm3154"></a></strong></span>: The default file manager in <span class="application">Gnome</span>, the GNU desktop.  Excellent documentation about working with this tool can be found at <a class="ulink" href="http://www.gnome.org/learn/users-guide/latest/gosnautilus-1.html" target="_top">http://www.gnome.org</a>.</p></li><li class="listitem"><p><span class="command"><strong>konqueror<a class="indexterm" name="idm3161"></a></strong></span>: The file manager typically used on a <span class="application">KDE</span> desktop.  The handbook is at <a class="ulink" href="http://docs.kde.org/en/3.1/kdebase/konqueror/" target="_top">http://docs.kde.org</a>.</p></li><li class="listitem"><p><span class="command"><strong>mc<a class="indexterm" name="idm3168"></a></strong></span>: <span class="application">Midnight Commander</span>, the Unix file manager after the fashion of Norton Commander.  All documentation available from <a class="ulink" href="http://www.gnu.org/directory/midnightcommander.html" target="_top">http://gnu.org/directory/</a> or a mirror, such as <a class="ulink" href="http://www.ibiblio.org" target="_top">http://www.ibiblio.org</a>.</p></li></ul></div><p>These applications are certainly worth giving a try and usually impress newcomers to Linux, if only because there is such a wide variety: these are only the most popular tools for managing directories and files, and many other projects are being developed.  Now let's find out about the internals and see how these graphical tools use common UNIX commands.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_03_03_02_03"></a>3.2.2. The tools</h4></div></div></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="idm3176"></a>3.2.2.1. Creating directories</h5></div></div></div><p>A way of keeping things in place is to give certain files specific default locations by creating<a class="indexterm" name="idm3179"></a> directories and subdirectories (or folders and sub-folders if you wish).  This is done with the <span class="command"><strong>mkdir<a class="indexterm" name="idm3183"></a></strong></span> command:</p><pre class="screen">
<code class="prompt">richard:~&gt;</code> <span class="command"><strong>mkdir archive</strong></span>

<code class="prompt">richard:~&gt;</code> <span class="command"><strong>ls -ld archive</strong></span>
drwxrwxrwx  2 richard richard           4096 Jan 13 14:09 archive/
</pre><p>Creating directories and subdirectories in one step is done using the <code class="option">-p</code> option:</p><pre class="screen">
<code class="prompt">richard:~&gt;</code> <span class="command"><strong>cd archive</strong></span>

<code class="prompt">richard:~/archive&gt;</code> <span class="command"><strong>mkdir 1999 2000 2001</strong></span>

<code class="prompt">richard:~/archive&gt;</code> <span class="command"><strong>ls</strong></span>
1999/  2000/  2001/

<code class="prompt">richard:~/archive&gt;</code> <span class="command"><strong>mkdir 2001/reports/Restaurants-Michelin/</strong></span>
mkdir: cannot create directory `2001/reports/Restaurants-Michelin/':
No such file or directory

<code class="prompt">richard:~/archive&gt;</code> <span class="command"><strong>mkdir -p 2001/reports/Restaurants-Michelin/</strong></span>

<code class="prompt">richard:~/archive&gt;</code> <span class="command"><strong>ls 2001/reports/</strong></span>
Restaurants-Michelin/
</pre><p>If the new file needs other permissions than the default file creation permissions, the new access rights can be set in one move, still using the <span class="command"><strong>mkdir</strong></span> command, see the <span class="application">Info</span> pages for more.  We are going to discuss access modes in the next section on file security.</p><p>The name of a directory has to comply with the same rules as those applied on regular file names<a class="indexterm" name="idm3209"></a>.  One of the most important restrictions is that you can't have two files with the same name in one directory (but keep in mind that Linux is, like UNIX, a case sensitive operating system).  There are virtually no limits on the length of a file name, but it is usually kept shorter than 80 characters, so it can fit on one line of a terminal.  You can use any character you want in a file name, although it is advised to exclude characters that have a special meaning to the shell.  When in doubt, check with <a class="xref" href="apc.html" title="Appendix C. Shell Features">Appendix C, <i>Shell Features</i></a>.</p></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="idm3213"></a>3.2.2.2. Moving files</h5></div></div></div><p>Now that we have properly structured our home directory, it is time to clean up unclassified<a class="indexterm" name="idm3216"></a> files using the <span class="command"><strong>mv<a class="indexterm" name="idm3220"></a></strong></span> command:</p><pre class="screen">
<code class="prompt">richard:~/archive&gt;</code> <span class="command"><strong>mv ../report[1-4].doc reports/Restaurants-Michelin/</strong></span>
</pre><p>This command is also applicable when renaming<a class="indexterm" name="idm3226"></a> files:</p><pre class="screen">
<code class="prompt">richard:~&gt;</code> <span class="command"><strong>ls To_Do</strong></span>
-rw-rw-r--    1 richard richard      2534 Jan 15 12:39 To_Do

<code class="prompt">richard:~&gt;</code> <span class="command"><strong>mv To_Do done</strong></span>

<code class="prompt">richard:~&gt;</code> <span class="command"><strong>ls -l done</strong></span>
-rw-rw-r--    1 richard richard      2534 Jan 15 12:39 done
</pre><p>It is clear that only the name of the file changes.  All other properties remain the same.</p><p>Detailed information about the syntax and features of the <span class="command"><strong>mv</strong></span> command can be found in the man or Info pages.  The use of this documentation should always be your first reflex when confronted with a problem.  The answer to your problem is likely to be in the system documentation.  Even experienced users read man pages every day, so beginning users should read them all the time.  After a while, you will get to know the most common options to the common commands, but you will still need the documentation as a primary source of information.  Note that the information contained in the HOWTOs, FAQs, man pages and other sources is slowly being merged into the Info pages, which are today the most up-to-date source of online (as in readily available on the system) documentation.</p></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="idm3239"></a>3.2.2.3. Copying files</h5></div></div></div><p>Copying<a class="indexterm" name="idm3242"></a> files and directories is done with the <span class="command"><strong>cp<a class="indexterm" name="idm3246"></a></strong></span> command.  A useful option is recursive copy (copy all underlying files and subdirectories), using the <code class="option">-R</code> option to <span class="command"><strong>cp</strong></span>.  The general syntax is</p><div class="cmdsynopsis"><p><code class="command">cp [<span class="optional"><code class="option">-R</code></span>] <code class="filename">fromfile</code> <code class="filename">tofile</code></code> </p></div><p>As an example the case of user <span class="emphasis"><em>newguy</em></span>, who wants the same Gnome desktop settings user <span class="emphasis"><em>oldguy</em></span> has.  One way to solve the problem is to copy the settings of <span class="emphasis"><em>oldguy</em></span> to the home directory of <span class="emphasis"><em>newguy</em></span>:</p><pre class="screen">
<code class="prompt">victor:~&gt;</code> <span class="command"><strong>cp -R ../oldguy/.gnome/ .</strong></span>
</pre><p>This gives some errors involving file permissions, but all the errors have to do with private files that <span class="emphasis"><em>newguy</em></span> doesn't need anyway.  We will discuss in the next part how to change these permissions in case they really are a problem.</p></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="idm3266"></a>3.2.2.4. Removing files</h5></div></div></div><p>Use the <span class="command"><strong>rm<a class="indexterm" name="idm3270"></a></strong></span> command to remove<a class="indexterm" name="idm3272"></a> single files, <span class="command"><strong>rmdir<a class="indexterm" name="idm3276"></a></strong></span> to remove<a class="indexterm" name="idm3279"></a> empty directories.  (Use <span class="command"><strong>ls <code class="option">-a</code></strong></span> to check whether a directory is empty or not).  The <span class="command"><strong>rm</strong></span> command also has options for removing non-empty directories with all their subdirectories, read the Info pages for these rather dangerous options.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">How empty can a directory be?</h3><p>It is normal that the directories . (dot) and .. (dot-dot) can't be removed, since they are also necessary in an empty directory to determine the directories ranking in the file system hierarchy.</p></div><p>On Linux, just like on UNIX, there is no garbage can - at least not for the shell, although there are plenty of solutions for graphical use.  So once removed, a file is really gone, and there is generally no way to get it back unless you have backups, or you are really fast and have a real good system administrator.  To protect the beginning user from this malice, the interactive behavior<a class="indexterm" name="idm3289"></a> of the <span class="command"><strong>rm<a class="indexterm" name="idm3292"></a></strong></span>, <span class="command"><strong>cp<a class="indexterm" name="idm3295"></a></strong></span> and <span class="command"><strong>mv<a class="indexterm" name="idm3298"></a></strong></span> commands can be activated using the <code class="option">-i</code> option.  In that case the system won't immediately act upon request.  Instead it will ask for confirmation, so it takes an additional click on the <span class="keycap"><strong>Enter</strong></span> key to inflict the damage:</p><pre class="screen">
<code class="prompt">mary:~&gt;</code> <span class="command"><strong>rm -ri archive/</strong></span>
rm: descend into directory `archive'? <span class="command"><strong>y</strong></span>
rm: descend into directory `archive/reports'? <span class="command"><strong>y</strong></span>
rm: remove directory `archive/reports'? <span class="command"><strong>y</strong></span>
rm: descend into directory `archive/backup'? <span class="command"><strong>y</strong></span>
rm: remove `archive/backup/sysbup200112.tar'? <span class="command"><strong>y</strong></span>
rm: remove directory `archive/backup'? <span class="command"><strong>y</strong></span>
rm: remove directory `archive'? <span class="command"><strong>y</strong></span>
</pre><p>We will discuss how to make this option the default in <a class="xref" href="ch07.html" title="Chapter 7. Home sweet /home">Chapter 7, <i>Home sweet /home</i></a>, which discusses customizing your shell environment.</p></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sect_03_03_03"></a>3.3. Finding files</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_03_03_03_01"></a>3.3.1. Using shell features</h4></div></div></div><p>In the example on moving files we already saw how the shell<a class="indexterm" name="idm3319"></a> can manipulate multiple files at once.  In that example, the shell finds out automatically what the user means by the requirements between the square<a class="indexterm" name="idm3322"></a> braces <span class="quote">&#8220;<span class="quote">[</span>&#8221;</span> and <span class="quote">&#8220;<span class="quote">]</span>&#8221;</span>.  The shell can substitute ranges<a class="indexterm" name="idm3326"></a> of numbers and upper or lower case characters alike.  It also substitutes as many characters as you want with an asterisk, and only one character with a question mark.</p><p>All sorts of substitutions can be used simultaneously; the shell is very logical about it.  The <span class="application">Bash</span> shell, for instance, has no problem with expressions like<a class="indexterm" name="idm3331"></a> <span class="command"><strong>ls <em class="parameter"><code>dirname/*/*/*[2-3]</code></em></strong></span>.</p><p>In other shells, the asterisk is commonly used to minimize the efforts of typing:  people would enter <span class="command"><strong>cd <em class="parameter"><code>dir*</code></em></strong></span> instead of <span class="command"><strong>cd <code class="filename">directory</code></strong></span>.  In <span class="application">Bash</span> however, this is not necessary because the GNU shell has a feature called file name completion.  It means that you can type the first few characters of a command (anywhere) or a file (in the current directory) and if no confusion is possible, the shell will find out what you mean.   For example in a directory containing many files, you can check if there are any files beginning with the letter A just by typing <span class="command"><strong>ls <em class="parameter"><code>A</code></em></strong></span> and pressing the <span class="keycap"><strong>Tab</strong></span> key twice, rather than pressing <span class="keycap"><strong>Enter</strong></span>.  If there is only one file starting with <span class="quote">&#8220;<span class="quote">A</span>&#8221;</span>, this file will be shown as the argument to <span class="command"><strong>ls</strong></span> (or any shell command, for that matter) immediately.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_03_03_03_02"></a>3.3.2. Which</h4></div></div></div><p>A very simple way of looking<a class="indexterm" name="idm3351"></a> up files is using the <span class="command"><strong>which<a class="indexterm" name="idm3355"></a></strong></span> command, to look in the directories listed in the user's search path for the required file.  Of course, since the search path contains only paths to directories containing executable programs, <span class="command"><strong>which</strong></span> doesn't work for ordinary files.  The <span class="command"><strong>which</strong></span> command is useful when troubleshooting <span class="quote">&#8220;<span class="quote">Command not Found<a class="indexterm" name="idm3360"></a></span>&#8221;</span> problems.  In the example below, user <span class="emphasis"><em>tina</em></span> can't use the <span class="command"><strong>acroread</strong></span> program, while her colleague has no troubles whatsoever on the same system.  The problem is similar to the <code class="varname">PATH</code> problem in the previous part: Tina's colleague tells her that he can see the required program in <code class="filename">/opt/acroread/bin</code>, but this directory is not in her path:</p><pre class="screen">
<code class="prompt">tina:~&gt;</code> <span class="command"><strong>which acroread</strong></span>
/usr/bin/which: no acroread in (/bin:/usr/bin:/usr/bin/X11)
</pre><p>The problem can be solved by giving the full path to the command to run, or by re-exporting the content of the <code class="varname">PATH<a class="indexterm" name="idm3372"></a></code> variable:</p><pre class="screen">
<code class="prompt">tina:~&gt;</code> <span class="command"><strong>export PATH=$PATH:/opt/acroread/bin</strong></span>

<code class="prompt">tina:~&gt;</code> <span class="command"><strong>echo $PATH</strong></span>
/bin:/usr/bin:/usr/bin/X11:/opt/acroread/bin
</pre><p>Using the <span class="command"><strong>which</strong></span> command also checks to see if a command is an alias for another command<a class="indexterm" name="idm3382"></a>:</p><pre class="screen">
<code class="prompt">gerrit:~&gt;</code> <span class="command"><strong>which -a ls</strong></span>
ls is aliased to `ls -F --color=auto'
ls is /bin/ls
</pre><p>If this does not work on your system, use the <span class="command"><strong>alias</strong></span> command:</p><pre class="screen">
<code class="prompt">tille@www:~/mail$</code> <span class="command"><strong>alias ls</strong></span>
alias ls='ls --color'
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_03_03_03_03"></a>3.3.3. Find and locate</h4></div></div></div><p>These are the real tools<a class="indexterm" name="idm3396"></a>, used when searching other paths beside those listed in the search path.  The <span class="command"><strong>find<a class="indexterm" name="idm3400"></a></strong></span> tool, known from UNIX, is very powerful, which may be the cause of a somewhat more difficult syntax.  GNU <span class="command"><strong>find<a class="indexterm" name="idm3403"></a></strong></span>, however, deals with the syntax problems.  This command not only allows you to search file names, it can also accept file size, date of last change and other file properties as criteria for a search.  The most common use is for finding file<a class="indexterm" name="idm3406"></a> names:</p><div class="cmdsynopsis"><p><code class="command">find <code class="filename">&lt;path&gt;</code> <code class="option">-name</code> <em class="parameter"><code>&lt;searchstring&gt;</code></em></code> </p></div><p>This can be interpreted as <span class="quote">&#8220;<span class="quote">Look in all files and subdirectories contained in a given path, and print the names of the files containing the search string in their name</span>&#8221;</span> (not in their content).</p><p>Another application of <span class="command"><strong>find</strong></span> is for searching files of a certain size, as in the example below, where user <span class="emphasis"><em>peter</em></span> wants to find all files in the current directory or one of its subdirectories, that are bigger<a class="indexterm" name="idm3419"></a> than 5 MB:</p><pre class="screen">
<code class="prompt">peter:~&gt;</code> <span class="command"><strong>find . -size +5000k</strong></span>
psychotic_chaos.mp3
</pre><p>If you dig in the man pages, you will see that <span class="command"><strong>find</strong></span> can also perform operations on the found files.  A common example is removing files.  It is best to first test without the <code class="option">-exec</code> option that the correct files are selected, after that the command can be rerun to delete the selected files.  Below, we search for files ending in <code class="filename">.tmp</code>:</p><pre class="screen">
<code class="prompt">peter:~&gt; </code> <span class="command"><strong>find . -name "*.tmp" -exec rm {} \;</strong></span>

<code class="prompt">peter:~&gt;</code>
</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Optimize!</h3><p>This command will call on <span class="command"><strong>rm</strong></span> as many times as a file answering the requirements is found.  In the worst case, this might be thousands or millions of times.  This is quite a load on your system.</p><p>A more realistic way of working would be the use of a pipe (|) and the <span class="command"><strong>xargs<a class="indexterm" name="idm3439"></a></strong></span> tool with <span class="command"><strong>rm</strong></span> as an argument.  This way, the <span class="command"><strong>rm</strong></span> command is only called when the command line is full, instead of for every file.  See <a class="xref" href="ch05.html" title="Chapter 5. I/O redirection">Chapter 5, <i>I/O redirection</i></a> for more on using I/O redirection to ease everyday tasks.</p></div><p>Later on (in 1999 according to the man pages, after 20 years of <span class="command"><strong>find</strong></span>), <span class="command"><strong>locate<a class="indexterm" name="idm3447"></a></strong></span> was developed.  This program is easier<a class="indexterm" name="idm3449"></a> to use, but more restricted than <span class="command"><strong>find</strong></span>, since its output is based on a file index database that is updated only once every day.  On the other hand, a search in the <span class="command"><strong>locate</strong></span> database uses less resources than <span class="command"><strong>find</strong></span> and therefore shows the results nearly instantly.</p><p>Most Linux distributions use <span class="command"><strong>slocate</strong></span> these days, security enhanced locate, the modern version of <span class="command"><strong>locate</strong></span> that prevents users from getting output they have no right to read.  The files in <span class="emphasis"><em>root</em></span>'s home directory are such an example, these are not normally accessible to the public.  A user who wants to find someone who knows about the <span class="application">C shell</span> may issue the command <span class="command"><strong>locate <code class="filename">.cshrc</code></strong></span>, to display all users who have a customized configuration file for the <span class="application">C shell</span>.  Supposing the users <span class="emphasis"><em>root</em></span> and <span class="emphasis"><em>jenny</em></span> are running <span class="application">C shell</span>, then only the file <code class="filename">/home/jenny/.cshrc</code> will be displayed, and not the one in <span class="emphasis"><em>root</em></span>'s home directory.  On most systems, <span class="command"><strong>locate</strong></span> is a symbolic link to the <span class="command"><strong>slocate</strong></span> program:</p><pre class="screen">
<code class="prompt">billy:~&gt;</code> <span class="command"><strong>ls -l /usr/bin/locate</strong></span>
lrwxrwxrwx 1 root slocate  7 Oct 28 14:18 /usr/bin/locate -&gt; slocate*
</pre><p>User <span class="emphasis"><em>tina</em></span> could have used <span class="command"><strong>locate</strong></span> to find the application she wanted:</p><pre class="screen">
<code class="prompt">tina:~&gt;</code> <span class="command"><strong>locate acroread</strong></span>
/usr/share/icons/hicolor/16x16/apps/acroread.png
/usr/share/icons/hicolor/32x32/apps/acroread.png
/usr/share/icons/locolor/16x16/apps/acroread.png
/usr/share/icons/locolor/32x32/apps/acroread.png
/usr/local/bin/acroread
/usr/local/Acrobat4/Reader/intellinux/bin/acroread
/usr/local/Acrobat4/bin/acroread
</pre><p>Directories that don't contain the name <code class="filename">bin</code> can't contain the program - they don't contain executable files.  There are three possibilities left.  The file in <code class="filename">/usr/local/bin</code> is the one <span class="emphasis"><em>tina</em></span> would have wanted: it is a link to the shell script that starts the actual program:</p><pre class="screen">
<code class="prompt">tina:~&gt;</code> <span class="command"><strong>file /usr/local/bin/acroread</strong></span>
/usr/local/bin/acroread: symbolic link to ../Acrobat4/bin/acroread

<code class="prompt">tina:~&gt;</code> <span class="command"><strong>file /usr/local/Acrobat4/bin/acroread</strong></span>
/usr/local/Acrobat4/bin/acroread: Bourne shell script text executable

<code class="prompt">tina:~&gt;</code> <span class="command"><strong>file /usr/local/Acrobat4/Reader/intellinux/bin/acroread</strong></span>
/usr/local/Acrobat4/Reader/intellinux/bin/acroread: ELF 32-bit LSB 
executable, Intel 80386, version 1, dynamically linked (uses 
shared libs), not stripped
</pre><p>In order to keep the path as short as possible, so the system doesn't have to search too long every time a user wants to execute a command, we add <code class="filename">/usr/local/bin</code> to the path and not the other directories, which only contain the binary files of one specific program, while <code class="filename">/usr/local/bin</code> contains other useful programs as well.</p><p>Again, a description of the full features of <span class="command"><strong>find</strong></span> and <span class="command"><strong>locate</strong></span> can be found in the <span class="application">Info</span> pages.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_03_03_03_04"></a>3.3.4. The grep command</h4></div></div></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="sect_03_03_03_04_01"></a>3.3.4.1. General line filtering</h5></div></div></div><p>A simple but powerful program, <span class="command"><strong>grep<a class="indexterm" name="idm3503"></a></strong></span> is used for filtering<a class="indexterm" name="idm3505"></a> input lines and returning certain patterns to the output.  There are literally thousands of applications for the <span class="command"><strong>grep</strong></span> program.  In the example below, <span class="emphasis"><em>jerry</em></span> uses <span class="command"><strong>grep</strong></span> to see how he did the thing with <span class="command"><strong>find</strong></span>:</p><pre class="screen">
<code class="prompt">jerry:~&gt;</code> <span class="command"><strong>grep -a find .bash_history</strong></span>
find . -name userinfo
man find
find ../ -name common.cfg
</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Search history</h3><p>Also useful in these cases is the search<a class="indexterm" name="idm3518"></a> function in <span class="command"><strong>bash</strong></span>, activated by pressing <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>R</strong></span> at once, such as in the example where we want to check how we did that last <span class="command"><strong>find</strong></span> again:</p><pre class="screen">
<code class="prompt">thomas ~&gt;</code> <span class="command"><strong>^R</strong></span> 
(reverse-i-search)`find': find `/home/thomas` -name *.xml
</pre><p>Type your search string at the search prompt.  The more characters you type, the more restricted the search gets.  This reads the command history for this shell session (which is written to <code class="filename">.bash_history</code> in your home directory when you quit that session).  The most recent occurrence of your search string is shown.  If you want to see previous commands containing the same string, type <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>R</strong></span> again.</p><p>See the <span class="application">Info</span> pages on <span class="command"><strong>bash</strong></span> for more.</p></div><p>All UNIXes with just a little bit of decency have an online dictionary.  So does Linux.  The dictionary is a list of known words in a file named <code class="filename">words</code>, located in <code class="filename">/usr/share/dict</code>.  To quickly check the correct spelling of a word, no graphical application<a class="indexterm" name="idm3538"></a> is needed:</p><pre class="screen">
<code class="prompt">william:~&gt;</code> <span class="command"><strong>grep pinguin /usr/share/dict/words</strong></span>

<code class="prompt">william:~&gt;</code> <span class="command"><strong>grep penguin /usr/share/dict/words</strong></span>
penguin
penguins
</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Dictionary vs. word list</h3><p>Some distributions offer the <span class="command"><strong>dict<a class="indexterm" name="idm3550"></a></strong></span> command, which offers more features than simply searching words in a list.</p></div><p>Who is the owner of that home directory next to mine?  Hey, there's his telephone number!</p><pre class="screen">
<code class="prompt">lisa:~&gt;</code> <span class="command"><strong>grep gdbruyne /etc/passwd</strong></span>
gdbruyne:x:981:981:Guy Debruyne, tel 203234:/home/gdbruyne:/bin/bash
</pre><p>And what was the E-mail address of Arno again?</p><pre class="screen">
<code class="prompt">serge:~/mail&gt;</code> <span class="command"><strong>grep -i arno *</strong></span>
sent-mail: To: &lt;Arno.Hintjens@celeb.com&gt;
sent-mail: On Mon, 24 Dec 2001, Arno.Hintjens@celeb.com wrote:
</pre><p><span class="command"><strong>find</strong></span> and <span class="command"><strong>locate</strong></span> are often used in combination with <span class="command"><strong>grep</strong></span> to define some serious queries.  For more information, see <a class="xref" href="ch05.html" title="Chapter 5. I/O redirection">Chapter 5, <i>I/O redirection</i></a> on I/O redirection.</p></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="sect_03_03_03_04_02"></a>3.3.4.2. Special characters</h5></div></div></div><p>Characters that have a special meaning to the shell have to be <span class="emphasis"><em>escaped<a class="indexterm" name="idm3569"></a></em></span>.  The escape character in <span class="application">Bash</span> is backslash<a class="indexterm" name="idm3572"></a>, as in most shells; this takes away the special<a class="indexterm" name="idm3574"></a> meaning of the following character.  The shell knows about quite some special characters, among the most common /, ., ? and *.  A full list can be found in the Info pages and documentation for your shell.</p><p>For instance, say that you want to display the file <span class="quote">&#8220;<span class="quote">*</span>&#8221;</span> instead of all the files in a directory, you would have to use </p><div class="cmdsynopsis"><p><code class="command">less <code class="filename">\*</code></code> </p></div><p>The same goes for filenames containing a space:</p><div class="cmdsynopsis"><p><code class="command">cat <code class="filename">This\ File</code></code> </p></div></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sect_03_03_04"></a>3.4. More ways to view file content</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_03_03_04_01"></a>3.4.1. General</h4></div></div></div><p>Apart from <span class="command"><strong>cat</strong></span>, which really doesn't do much more than sending files to the standard output, there are other tools to view file content.</p><p>The easiest way of course would be to use graphical tools instead of command line tools.  In the introduction we already saw a glimpse of an office application, <span class="application">OpenOffice.org</span>.  Other examples are the <span class="application">GIMP</span> (start up with <span class="command"><strong>gimp<a class="indexterm" name="idm3596"></a></strong></span> from the command line), the GNU Image Manipulation Program; <span class="command"><strong>xpdf<a class="indexterm" name="idm3599"></a></strong></span> to view Portable Document Format files (PDF); <span class="application">GhostView</span> (<span class="command"><strong>gv<a class="indexterm" name="idm3603"></a></strong></span>) for viewing PostScript files; <span class="application">Mozilla/FireFox</span>, <span class="command"><strong>links</strong></span> (a text mode browser), <span class="application">Konqueror</span>, <span class="application">Opera</span> and many others for web content; XMMS, <span class="application">CDplay</span> and others for multimedia file content; <span class="application">AbiWord</span>, <span class="application">Gnumeric</span>, <span class="application">KOffice</span> etc. for all kinds of office applications and so on.  There are thousands of Linux applications; to list them all would take days.</p><p>Instead we keep concentrating on shell- or text-mode applications, which form the basics for all other applications.  These commands work best in a text environment on files containing text.  When in doubt, check first using the <span class="command"><strong>file<a class="indexterm" name="idm3615"></a></strong></span> command.</p><p>So let's see what text tools we have that are useful to look inside files.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Font problems</h3><p>Plain text tools such as the ones we will now be discussing, often have problems with <span class="quote">&#8220;<span class="quote">plain</span>&#8221;</span> text files because of the font encoding used in those files.  Special characters, such as accented alphabetical characters, Chinese characters and other characters from languages using different character sets than the default <span class="emphasis"><em>en_US</em></span> encoding and so on, are then displayed the wrong way or replaced by unreadable rubbish.  These problems are discussed in <a class="xref" href="ch07s04.html" title="4. Region specific settings">Section 4, &#8220;Region specific settings&#8221;</a>.</p></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_03_03_04_02"></a>3.4.2. <span class="quote">&#8220;<span class="quote"><span class="command"><strong>less</strong></span> is <span class="command"><strong>more</strong></span></span>&#8221;</span></h4></div></div></div><p>Undoubtedly you will hear someone say this phrase sooner or later when working in a UNIX environment.  A little bit of UNIX history explains this:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>First there was <span class="command"><strong>cat<a class="indexterm" name="idm3634"></a></strong></span>.  Output was streamed in an uncontrollable way.</p></li><li class="listitem"><p>Then there was <span class="command"><strong>pg<a class="indexterm" name="idm3639"></a></strong></span>, which may still be found on older UNIXes.  This command puts text to the output one page at the time.</p></li><li class="listitem"><p>The <span class="command"><strong>more<a class="indexterm" name="idm3644"></a></strong></span> program was a revised version of <span class="command"><strong>pg</strong></span>.  This command is still available on every Linux system.</p></li><li class="listitem"><p><span class="command"><strong>less<a class="indexterm" name="idm3650"></a></strong></span> is the GNU version of more and has extra features allowing highlighting of search strings, scrolling back etc.  The syntax is very simple:</p><div class="cmdsynopsis"><p><code class="command">less <code class="filename">name_of_file</code></code> </p></div><p>More information is located in the <span class="application">Info</span> pages.</p></li></ul></div><p>You already know about pagers by now, because they are used for viewing the man pages.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_03_03_04_03"></a>3.4.3. The head and tail commands</h4></div></div></div><p>These two commands display the n first/last lines of a file respectively.  To see the last<a class="indexterm" name="idm3661"></a> ten commands entered:</p><pre class="screen">
<code class="prompt">tony:~&gt;</code> <span class="command"><strong>tail -10 .bash_history </strong></span>
locate configure | grep bin
man bash
cd
xawtv &amp;
grep usable /usr/share/dict/words 
grep advisable /usr/share/dict/words 
info quota
man quota
echo $PATH
frm
</pre><p><span class="command"><strong>head<a class="indexterm" name="idm3668"></a></strong></span> works similarly.  The <span class="command"><strong>tail</strong></span> command has a handy feature to continuously show the last n lines of a file that changes all the time.  This <code class="option">-f</code> option is often used by system administrators to check on log files.  More information is located in the system documentation files.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sect_03_03_05"></a>3.5. Linking files</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_03_03_05_01"></a>3.5.1. Link types</h4></div></div></div><p>Since we know more about files and their representation in the file system, understanding<a class="indexterm" name="idm3677"></a> links (or shortcuts) is a piece of cake.  A link is nothing more than a way of matching two or more file names to the same set of file data.  There are two ways<a class="indexterm" name="idm3680"></a> to achieve this:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Hard link<a class="indexterm" name="idm3686"></a>: Associate two or more file names with the same inode.  Hard links share the same data blocks on the hard disk, while they continue to behave as independent files.</p><p>There is an immediate disadvantage: hard links can't span partitions, because inode numbers are only unique within a given partition.</p></li><li class="listitem"><p>Soft link or symbolic<a class="indexterm" name="idm3692"></a> link (or for short: symlink): a small file that is a pointer to another file.  A symbolic link contains the path to the target file instead of a physical location on the hard disk.  Since inodes are not used in this system, soft links can span across partitions.</p></li></ul></div><p>The two link types behave similar, but are not the same, as illustrated in the scheme<a class="indexterm" name="idm3696"></a> below:</p><div class="figure"><a name="idm3699"></a><p class="title"><b>Figure 3.2. Hard and soft link mechanism</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/links.png" alt="Hard links share the same inode, symbolic links have their own inode that points to datablocks holding the filename of the original file that the link is pointing to."></div></div></div><br class="figure-break"><p>Note that removing the target file for a symbolic link makes the link useless.</p><p>Each regular file is in principle a hardlink.  Hardlinks can not span across partitions, since they refer to inodes, and inode numbers are only unique within a given partition.</p><p>It may be argued that there is a third kind of link, the <span class="emphasis"><em>user-space</em></span> link<a class="indexterm" name="idm3715"></a>, which is similar to a shortcut in MS Windows.  These are files containing meta-data which can only be interpreted by the graphical file manager.  To the kernel and the shell these are just normal files.  They may end in a <span class="emphasis"><em>.desktop</em></span> or <span class="emphasis"><em>.lnk</em></span> suffix; an example can be found in <code class="filename">~/.gnome-desktop</code>:</p><pre class="screen">
<code class="prompt">[dupont@boulot .gnome-desktop]$</code> <span class="command"><strong>cat La\ Maison\ Dupont</strong></span>
[Desktop Entry]
Encoding=Legacy-Mixed
Name=La Maison Dupont
Type=X-nautilus-home
X-Nautilus-Icon=temp-home
URL=file:///home/dupont
</pre><p>This example is from a <span class="application">KDE</span> desktop:</p><pre class="screen">
<code class="prompt">[lena@venus Desktop]$</code> <span class="command"><strong>cat camera</strong></span>
[Desktop Entry]
Dev=/dev/sda1
FSType=auto
Icon=memory
MountPoint=/mnt/camera
Type=FSDevice
X-KDE-Dynamic-Device=true
</pre><p>Creating this kind of link is easy enough using the features of your graphical environment.  Should you need help, your system documentation should be your first resort.</p><p>In the next section, we will study the creation of UNIX-style symbolic links using the command line.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_03_03_05_02"></a>3.5.2. Creating symbolic links</h4></div></div></div><p>The symbolic<a class="indexterm" name="idm3734"></a> link is particularly interesting for beginning users: they are fairly obvious to see and you don't need to worry about partitions.</p><p>The command<a class="indexterm" name="idm3738"></a> to make links is <span class="command"><strong>ln<a class="indexterm" name="idm3741"></a></strong></span>.  In order to create symlinks, you need to use the <code class="option">-s</code> option:</p><div class="cmdsynopsis"><p><code class="command">ln <code class="option">-s</code> <code class="filename">targetfile</code> <code class="filename">linkname</code></code> </p></div><p>In the example below, user <span class="emphasis"><em>freddy</em></span> creates a link in a subdirectory of his home directory to a directory on another part of the system:</p><pre class="screen">
<code class="prompt">freddy:~/music&gt;</code> <span class="command"><strong>ln -s /opt/mp3/Queen/ Queen</strong></span>

<code class="prompt">freddy:~/music&gt;</code> <span class="command"><strong>ls -l</strong></span>
lrwxrwxrwx  1 freddy  freddy  17 Jan 22 11:07 Queen -&gt; /opt/mp3/Queen
</pre><p>Symbolic links are always very small files, while hard links have the same size as the original file.</p><p>The application of symbolic<a class="indexterm" name="idm3758"></a> links is widespread.  They are often used to save disk space, to make a copy of a file in order to satisfy installation requirements of a new program that expects the file to be in another location, they are used to fix scripts that suddenly have to run in a new environment and can generally save a lot of work.  A system admin may decide to move the home directories of the users to a new location, <code class="filename">disk2</code> for instance, but if he wants everything to work like before, like the <code class="filename">/etc/passwd</code> file, with a minimum of effort he will create a symlink from <code class="filename">/home</code> to the new location <code class="filename">/disk2/home</code>.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch03s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch03.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch03s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">2. Orientation in the file system </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 4. File security</td></tr></table></div></body></html>
