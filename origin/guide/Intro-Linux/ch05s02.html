<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>2. Advanced redirection features</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="Linux, Beginners, linux, start, Getting started, guide, Guide, Exercises, exercises"><link rel="home" href="index.html" title="Introduction to Linux"><link rel="up" href="ch05.html" title="Chapter 5. I/O redirection"><link rel="prev" href="ch05s01.html" title="1. Simple redirections"><link rel="next" href="ch05s03.html" title="3. Filters"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2. Advanced redirection features</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch05s01.html">Prev</a> </td><th width="60%" align="center">Chapter 5. I/O redirection</th><td width="20%" align="right"> <a accesskey="n" href="ch05s03.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sect_05_02"></a>2. Advanced redirection features</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sect_05_02_01"></a>2.1. Use of file descriptors</h3></div></div></div><p>There are three types of I/O, which each have their own identifier, called a file descriptor<a class="indexterm" name="idm6362"></a>:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>standard input: 0</p></li><li class="listitem"><p>standard output: 1</p></li><li class="listitem"><p>standard error<a class="indexterm" name="idm6372"></a>: 2</p></li></ul></div><p>In the following descriptions, if the file descriptor number is omitted, and the first character of the redirection operator is &lt;, the redirection refers to the standard input (file descriptor 0).  If the first character of the redirection operator is &gt;, the redirection refers to the standard output (file descriptor 1).</p><p>Some practical examples will make this more<a class="indexterm" name="idm6376"></a> clear:</p><div class="cmdsynopsis"><p><code class="command">ls &gt; <code class="filename">dirlist</code> 2&gt;&amp;1</code> </p></div><p>will direct both standard output and standard error to the file <code class="filename">dirlist</code>, while the command</p><div class="cmdsynopsis"><p><code class="command">ls 2&gt;&amp;1 &gt; <code class="filename">dirlist</code></code> </p></div><p>will only direct standard output to <code class="filename">dirlist</code>.  This can be a useful option for programmers.</p><p>Things are getting quite complicated here, don't confuse the use of the ampersand here with the use of it in <a class="xref" href="ch04s01.html#sect_04_01_02_01" title="1.2.1. Interactive processes">Section 1.2.1, &#8220;Interactive processes&#8221;</a>, where the ampersand is used to run a process in the background.  Here, it merely serves as an indication that the number that follows is not a file name, but rather a location that the data stream is pointed to.  Also note that the bigger-than sign should not be separated by spaces from the number of the file descriptor.  If it would be separated, we would be pointing the output to a file again.  The example below demonstrates this:</p><pre class="screen">
<code class="prompt">[nancy@asus /var/tmp]$ </code><span class="command"><strong>ls 2&gt; <code class="filename">tmp</code></strong></span>

<code class="prompt">[nancy@asus /var/tmp]$ </code><span class="command"><strong>ls -l <code class="filename">tmp</code></strong></span>
-rw-rw-r--  1 nancy nancy 0 Sept  7 12:58 tmp

<code class="prompt">[nancy@asus /var/tmp]$ </code><span class="command"><strong>ls 2 &gt; <code class="filename">tmp</code></strong></span>
ls: 2: No such file or directory
</pre><p>The first command that <span class="emphasis"><em>nancy</em></span> executes is correct (eventhough no errors are generated and thus the file to which standard error is redirected is empty).  The second command expects that <code class="filename">2</code> is a file name, which does not exist in this case, so an error is displayed.</p><p>All these features are explained in detail in the Bash Info pages.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sect_05_02_02"></a>2.2. Examples</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_05_02_02_01"></a>2.2.1. Analyzing errors</h4></div></div></div><p>If your process generates a lot of errors, this is a way to thoroughly examine them<a class="indexterm" name="idm6410"></a>:</p><div class="cmdsynopsis"><p><code class="command">command 2&gt;&amp;1 | less</code> </p></div><p>This is often used when creating new software using the <span class="command"><strong>make</strong></span> command, such as in:</p><pre class="screen">
<code class="prompt">andy:~/newsoft&gt;</code> <span class="command"><strong>make all 2&gt;&amp;1 | less</strong></span>
--output ommitted--
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_05_02_02_02"></a>2.2.2. Separating standard output from standard error</h4></div></div></div><p>Constructs<a class="indexterm" name="idm6423"></a> like these are often used by programmers, so that output is displayed in one terminal window, and errors in another.  Find out which pseudo terminal you are using issuing the <span class="command"><strong>tty</strong></span> command first:</p><pre class="screen">
<code class="prompt">andy:~/newsoft&gt;</code> <span class="command"><strong>make all 2&gt; /dev/pts/7</strong></span>
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_05_02_02_03"></a>2.2.3. Writing to output and files simultaneously</h4></div></div></div><p>You can use the <span class="command"><strong>tee<a class="indexterm" name="idm6434"></a></strong></span> command to copy input to standard<a class="indexterm" name="idm6436"></a> output and one or more output files in one move.  Using the <code class="option">-a</code> option to <span class="command"><strong>tee</strong></span> results in appending input to the file(s).  This command is useful if you want to both see and save output.  The <span class="command"><strong>&gt;</strong></span> and <span class="command"><strong>&gt;&gt;</strong></span> operators do not allow to perform both actions simultaneously.</p><p>This tool is usually called on through a pipe (<span class="command"><strong>|</strong></span>), as demonstrated in the example below:</p><pre class="screen">
<code class="prompt">mireille ~/test&gt;</code> <span class="command"><strong>date | tee <code class="filename">file1 file2</code></strong></span>
Thu Jun 10 11:10:34 CEST 2004

<code class="prompt">mireille ~/test&gt;</code> <span class="command"><strong>cat <code class="filename">file1</code></strong></span>
Thu Jun 10 11:10:34 CEST 2004

<code class="prompt">mireille ~/test&gt;</code> <span class="command"><strong>cat <code class="filename">file2</code></strong></span>
Thu Jun 10 11:10:34 CEST 2004

<code class="prompt">mireille ~/test&gt;</code> <span class="command"><strong>uptime | tee <code class="option">-a</code> <code class="filename">file2</code></strong></span>
 11:10:51 up 21 days, 21:21, 57 users,  load average: 0.04, 0.16, 0.26

<code class="prompt">mireille ~/test&gt;</code> <span class="command"><strong>cat <code class="filename">file2</code></strong></span>
Thu Jun 10 11:10:34 CEST 2004
 11:10:51 up 21 days, 21:21, 57 users,  load average: 0.04, 0.16, 0.26
</pre></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch05s01.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch05.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch05s03.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">1. Simple redirections </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 3. Filters</td></tr></table></div></body></html>
