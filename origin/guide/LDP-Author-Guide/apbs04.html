<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>4. Transformations</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="LDP Author Guide"><link rel="up" href="apb.html" title="Appendix B. System Setup: Editors, Validation and Transformations"><link rel="prev" href="apbs03.html" title="3. Validation"><link rel="next" href="apbs05.html" title="5. DocBook DTD"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4. Transformations</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="apbs03.html">Prev</a> </td><th width="60%" align="center">Appendix B. System Setup: Editors, Validation and
	 Transformations</th><td width="20%" align="right"> <a accesskey="n" href="apbs05.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="transformations"></a>4. Transformations</h2></div></div></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">TLDP will convert your document</h3><p>This section is about how to transform documents
			from DocBook to other formats. If you do not need 
			to transform documents for your own web site, or to proof read the content, please	<span class="emphasis"><em>skip this section</em></span>.</p><p>
			If you would like to transform your documents for 
			proofreading purposes, please use the <a class="ulink" href="http://www.xml-dev.com/blog/xml2html.php" target="_top">XML to HTML on-line
			converter</a>. You will need to upload your XML file(s)
			to a web site. Then simply drop the URL into the form and
			click the submit button. Your document will be magically
			transformed into a beautiful (and legible)
			HTML document. External files are supported. You may use 
			either absolute or relative URIs.
		</p><p>Another easy-to-use package is
			<span class="application">xmlto</span>. It is a front-end for
			<span class="application">xsltproc</span>. It is available as a
			RedHat, Debian (etc) package or can be downloaded from <a class="ulink" href="http://cyberelk.net/tim/xmlto/" target="_top">http://cyberelk.net/tim/xmlto/</a>. You can use it to convert
			documents with:</p><pre class="programlisting">
<code class="prompt">bash$ </code><strong class="userinput"><code>xmlto html <code class="filename">mydoc.xml</code></code></strong>
<code class="prompt">bash$ </code><strong class="userinput"><code>xmlto txt <code class="filename">mydoc.xml</code></code></strong>
</pre><p>
			You do not ever need to transform documents
			before submitting to the LDP. The LDP
			volunteers have a system which transforms
			your DocBook file into HTML, PDF and plain
			text formats. There, you've been warned.
		</p></div><p>
	Still here? Great! Transformations are
	a pretty basic requirement to get what
	you've written from a messy tag-soup into
	something that can be read.  This section
	will help you get your system set up and
	ready to transform your latest document
	into other formats. This is very useful
	is you want to <span class="emphasis"><em>see</em></span>
	your document before you release it to
	the world.
</p><p>
	There are currently two ways to transform
	your document: Document Style Semantics and
	Specification Language (DSSSL); and XML
	Style sheets (XSLT). Although the LDP web site uses
	DSSSL to convert documents you may use XSLT
	if you want. You only need to choose <span class="emphasis"><em>one</em></span> of these
	methods. For more information about DSSSL read: <a class="xref" href="apbs04.html#dsssl" title="4.1. DSSSL">Section 4.1, &#8220;DSSSL&#8221;</a>, for more information about XSLT read: <a class="xref" href="apbs04.html#xsl" title="4.3. XSL">Section 4.3, &#8220;XSL&#8221;</a>.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="dsssl"></a>4.1. DSSSL</h3></div></div></div><p>
	There are three basic requirements to transform a document using DSSSL:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
	The Document Style and Semantics Specification Language files
	(these are plain text files). <a class="xref" href="apbs04.html#dsssl-files" title="4.1.1. The Style Sheets">Section 4.1.1, &#8220;The Style Sheets&#8221;</a>
	</p></li><li class="listitem"><p>
	The Document Type Definition file
	which matches the DOCTYPE of your
	document (this is a plain text file).
	<a class="xref" href="apbs05.html" title="5. DocBook DTD">Section 5, &#8220;DocBook DTD&#8221;</a>
</p></li><li class="listitem"><p>
	A processor to do the actual work. <a class="xref" href="apbs04.html#dsssl-processors" title="4.1.2. DSSSL Processors">Section 4.1.2, &#8220;DSSSL Processors&#8221;</a>
	</p></li></ul></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="dsssl-files"></a>4.1.1. The Style Sheets</h4></div></div></div><p>There are two versions of the
		Document Style Semantics and Specification Language
		used by the LDP to transform documents from your
		raw DocBook files into other formats (which are then
		published on the Web). The LDP version of the style
		sheets requires the Norman Walsh version--which
		basically means if you're using DSSSL the Norman
		Walsh version can be considered a requirement for
		system setup.</p><p><b>Norman Walsh DSSSL <a class="ulink" href="http://docbook.sourceforge.net/projects/dsssl/" target="_top">http://docbook.sourceforge.net/projects/dsssl/</a>. </b>The
				<a class="indexterm" name="idm2039"></a>
	Document Style Semantics and Specification Language tells
	Jade (see <a class="xref" href="apbs04.html#dsssl-processors" title="4.1.2. DSSSL Processors">Section 4.1.2, &#8220;DSSSL Processors&#8221;</a>) how to render
		  a DocBook document into print or on-line
	form. The DSSSL is what converts a
		  <code class="sgmltag-element">title</code> tag into an
	&lt;h1&gt; HTML tag, or to 14 point bold Times Roman for
	RTF, for example. Documentation for DSSSL is located at
	the same site. Note that modifying the DSSSL doesn't modify
	DocBook itself. It merely changes the way the rendered text
	looks. The LDP uses a modified DSSSL (see below).</p><p><b>LDP DSSSL <a class="ulink" href="http://www.tldp.org/authors/tools/ldp.dsl" target="_top">http://www.tldp.org/authors/tools/ldp.dsl</a>. </b>The LDP DSSSL requires the Norman Walsh version (see
	above) but is a slightly modified DSSSL to provide things
	like a table of contents.</p><div class="example"><a name="ex-dsssl"></a><p class="title"><b>Example B.5. <span class="quote">&#8220;<span class="quote">Installing</span>&#8221;</span> DSSSL style sheets</b></p><div class="example-contents"><p>Create a base directory to store everything such as <code class="filename">/usr/share/sgml/</code>. Copy the DSSSL
			style sheets into a sub-directory named 
			<code class="filename">dsssl</code>.
	</p></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="dsssl-processors"></a>4.1.2. DSSSL Processors</h4></div></div></div><p>
	<a class="indexterm" name="idm2056"></a> 
		There are two versions of the <span class="application">Jade</span> processor: the
		  original version by James Clark; and an open-source
		  version of approximately the same program, <span class="application">OpenJade</span>.
		  You only need <span class="emphasis"><em>one</em></span> of these programs. It should
		  be installed <span class="emphasis"><em>after</em></span> the DTD
		  and DSSSL have been <span class="quote">&#8220;<span class="quote">installed.</span>&#8221;</span>
</p><div class="variablelist"><p class="title"><b>DSSSL Transformation Tools</b></p><dl class="variablelist"><dt><span class="term">Jade</span></dt><dd><p>
	<a class="ulink" href="ftp://ftp.jclark.com/pub/jade/" target="_top">ftp://ftp.jclark.com/pub/jade/</a></p><p>Currently, the latest version of the package is <code class="filename">jade-1.2.1.tar.gz</code>.</p><p>Jade is the front-end processor for SGML and
	XML. It uses the DSSSL and DocBook DTD to perform the
	verification and rendering from SGML and XML into the target
	format.</p></dd><dt><span class="term">OpenJade</span></dt><dd><p><a class="ulink" href="http://openjade.sourceforge.net/" target="_top">http://openjade.sourceforge.net/</a></p><p>An extension of Jade written by the DSSSL
	community. Some applications require jade, but are being
	updated to support either software package.</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="dsssl-setup"></a>4.1.3. System Setup for DSSSL Transformations</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
	Tell your system where to find the SGML_CATALOG_FILES (yes, even if you
	are using XML). You can find an example of how to do this in <a class="xref" href="apbs03.html#ex-catalog-files" title="Example B.1. Setting the SGML_CATALOG_FILES and XML_CATALOG_FILES Environmental Variables">Example B.1, &#8220;Setting the SGML_CATALOG_FILES and XML_CATALOG_FILES
	 Environmental Variables&#8221;</a>.

</p></li><li class="listitem"><p>
	Download the DSSSL and DTD files and copy them into your working
	directory. You can find an example of how to do this in <a class="xref" href="apbs04.html#ex-dsssl" title="Example B.5. &#8220;Installing&#8221; DSSSL style sheets">Example B.5, &#8220;<span class="quote">&#8220;<span class="quote">Installing</span>&#8221;</span> DSSSL style sheets&#8221;</a> and <a class="xref" href="apbs05.html#ex-dtd" title="Example B.7. &#8220;Installing&#8221; DocBook Document Type Definitions">Example B.7, &#8220;<span class="quote">&#8220;<span class="quote">Installing</span>&#8221;</span> DocBook Document Type Definitions&#8221;</a>.
</p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="usingjade"></a>4.1.4. Transformations with DSSSL</h4></div></div></div><p>
	Once your system is configured (see the previous section), you should
	be able to start using <span class="application">jade</span> to transform
	your files from XML to XHTML.
</p><p>
	To create individual HTML files, point <span class="application">jade</span>
	at the correct DSL (style sheet). The following example uses the LDP
	style sheet.
</p><pre class="screen">
<code class="prompt">bash$ </code><span class="command"><strong>jade -t xml -i html \
	-d /usr/local/sgml/dsssl/docbook/html/ldp.dsl#html \
	<em class="replaceable"><code>HOWTO.xml</code></em></strong></span>
</pre><p>
		If you would like to produce a single-file HTML page, add the
		<em class="parameter"><code>-V nochunks</code></em> parameter. You can specify the 
		name of the final HTML file by appending the command with <em class="parameter"><code>
		&gt; <em class="replaceable"><code>output.html</code></em></code></em>.
	</p><pre class="screen">
<code class="prompt">bash$ </code><span class="command"><strong>jade -t xml -i html -V nochunks \
	-d /usr/local/sgml/dsssl/stylesheets/ldp.dsl#html \
	<em class="replaceable"><code>HOWTO.sgml</code></em> &gt; output.html</strong></span>
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a name="dcl-errors"></a><span class="emphasis"><em>Not a function name</em></span> errors</h3><p>
		If you get an error about <span class="quote">&#8220;<span class="quote">is not a function name</span>&#8221;</span>, you
		will need to add a pointer to <code class="filename">xml.dcl</code>. It has
		to be listed immediately before the pointer to your XML
		document. Try one of the following locations:
		<code class="filename">/usr/lib/sgml/declaration/xml.dcl</code>, or
		<code class="filename">/usr/share/sgml/declaration/xml.dcl</code>. Use
		<span class="application">locate</span> to find the file if it is not in
		either of those two places. The modified command would be as
		follows:
	</p><pre class="screen">
<code class="prompt">bash$ </code><span class="command"><strong>jade -t xml -i html \
	-d /usr/local/sgml/dsssl/docbook/html/ldp.dsl#html \
	/usr/lib/sgml/declaration/xml.dcl <em class="replaceable"><code>HOWTO.xml</code></em></strong></span>
	</pre></div><p>
	If you would like to create print-friendly files instead of HTML files,
	simply change the style sheet that you are using. In the file name
	above, note <span class="quote">&#8220;<span class="quote">html/ldp.dsl</span>&#8221;</span> at the end. Change this to
	<span class="quote">&#8220;<span class="quote">print/docbook.dsl</span>&#8221;</span>, or if you want XHTML output, instead
	of HTML, change the file name to <span class="quote">&#8220;<span class="quote">xhtml/docbook.dsl</span>&#8221;</span>.
</p><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="dsssl-css"></a>4.1.4.1. Changing CSS Files</h5></div></div></div><p>If you want your HTML files to use a specific 
	<acronym class="acronym">CSS</acronym> stylesheet, you will need to edit 
	<code class="filename">ldp.dsl</code>. Immediately after
 	<code class="literal">;; End of $verbatim-display$ redefinition</code> 
	add the following lines:</p><pre class="screen">
(define %stylesheet-type%
  ;; The type of the stylesheet to use
  "text/css")

(define %stylesheet%
  ;; Name of the css stylesheet to use, use value #f if you don't want to
  ;; use css stylesheets
  "base.css")
</pre><p>
		Replace <code class="filename">base.css</code> with the name of the
		<acronym class="acronym">CSS</acronym> file you would like to use.
	</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="docbook-utils"></a>4.2. The docbook-utils Package</h3></div></div></div><p>The <span class="application">docbook-utils</span> provide commands like <span class="command"><strong>db2html</strong></span>, <span class="command"><strong>db2pdf</strong></span> and <span class="command"><strong>db2ps</strong></span>, based on the <span class="command"><strong>jw</strong></span> scripts, that is a front-end to <span class="application">Jade</span>.  These tools ease the everyday management of documentation and add comfortable features.</p><p>The package, originally created by RedHat and available from <a class="ulink" href="http://sources.redhat.com/docbook-tools/" target="_top">http://sources.redhat.com/docbook-tools/</a> can be installed on most systems.</p><div class="example"><a name="ex-htmloutput"></a><p class="title"><b>Example B.6. Example creating HTML output</b></p><div class="example-contents"><p>After validating your document, simply issue the command
<span class="command"><strong>db2html <code class="filename">mydoc.xml</code></strong></span> to create (a)
HTML file(s).  You can also use the
<span class="application">docbook-utils</span> as validation tools.  Remember: when errors occur, always start by solving only the first problem. The rest of the problems may be fixed when you fix the first error.</p><p>
	If you get errors about a function name, please read <a class="xref" href="apbs04.html#dcl-errors" title="Not a function name errors"><span class="emphasis"><em>Not a function name</em></span> errors</a>.
</p></div></div><br class="example-break"><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stylesheets"></a>4.2.1. Using CSS and DSL for pretty output</h4></div></div></div><p>You can define your own additional DSL instructions, which can
include a pointer to a personalized CSS file. Sample DSL and CSS files are
provided in <a class="xref" href="apa.html" title="Appendix A. Templates">Appendix A, <i>Templates</i></a>.</p><p>The sample DSL file will create a table of contents, and have all
HTML files start with the prefix <code class="filename">intro2linux-</code> and end
with a suffix of <code class="filename">.html</code>.  The
<code class="varname">%stylesheet%</code> variable points to the CSS file which
should be called by your HTML file.</p><p>To use a specific DSL style sheet the following command should be
used:</p><div class="cmdsynopsis"><p><code class="command">db2html <code class="option">-d</code> <code class="filename">mystyle.dsl</code> <code class="filename">mydoc.xml</code></code> </p></div><p>You can compare the result here: <a class="ulink" href="http://tille.xalasys.com/training/unix/" target="_top">http://tille.xalasys.com/training/unix/</a> is a book formatted with the standard tools; <a class="ulink" href="http://tille.xalasys.com/training/tldp/" target="_top">http://tille.xalasys.com/training/tldp/</a> is one using personalized DSL and CSS files.  Soft tones and special effects, for instance in buttons, were used to achieve maximum effect.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xsl"></a>4.3. XSL</h3></div></div></div><p>
	There are alternatives to DSSSL and Jade/OpenJade.</p><p>When working with DocBook XML, the LDP offers a series of 
      XSL<a href="#ftn.idm2174" class="footnote" name="idm2174"><sup class="footnote">[2]</sup></a>
      style sheets to process documents into HTML.  These style 
sheets create
      output files using the XML tool set that are similar to those produced by
      the SGML tools using <a class="link" href="apbs04.html#dsssl" title="4.1. DSSSL">ldp.dsl</a>.
      </p><p>The major difference between using <code class="filename">ldp.dsl</code>
      and the XSL style sheets is the way that the generation of multiple
      files is handled, such as the creation of a separate file for each chapter,
      section and appendix.  With the SGML tools, such as
      <span class="application">jade</span> or
		<span class="application">openjade</span>, the tool
      itself was responsible for generating the separate files. Because of
      this, only a single file, <code class="filename">ldp.dsl</code> was necessary as
      a customization layer for the standard DocBook DSSSL style sheets.
      </p><p>With the DocBook XSL style sheets, generation of multiple files is
      controlled <span class="emphasis"><em>by the style sheet</em></span>. If you want to
      generate a single file, you call one style sheet. If you want to generate
      multiple files, you call a different style sheet.  For that reason the
      LDP XSL style sheet distribution is comprised of four files:
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="filename">tldp-html.xsl</code> - style sheet called to generate
      a <span class="emphasis"><em>single</em></span> file.
      </p></li><li class="listitem"><p><code class="filename">tldp-html-chunk.xsl</code><a href="#ftn.idm2195" class="footnote" name="idm2195"><sup class="footnote">[3]</sup></a> - style sheet called to generate
      multiple files based on chapter, section and appendix elements.
      </p></li><li class="listitem"><p><code class="filename">tldp-html-common.xsl</code> - style sheet containing
      the actual XSLT transformations. It is called by the other two HTML
      style sheets and is <span class="emphasis"><em>never</em></span> directly called.
      </p></li><li class="listitem"><p><code class="filename">tldp-print.xsl</code> - style sheet for generation of
      XSL Formatting Objects for print output.
      </p></li></ol></div><p>
      You can find the latest copy of the files at <a class="ulink" href="http://my.core.com/~dhorton/docbook/tldp-xsl/" target="_top">http://my.core.com/~dhorton/docbook/tldp-xsl/</a>.
		The package includes installation instructions which are duplicated
		at <a class="ulink" href="http://my.core.com/~dhorton/docbook/tldp-xsl/doc/tldp-xsl-howto.html" target="_top">http://my.core.com/~dhorton/docbook/tldp-xsl/doc/tldp-xsl-howto.html</a>. The short version of the install instructions is as follows: 
		Download and unzip the latest package from the web site. Take the 
		files from the <code class="filename">html</code> 
		directory of TLDP-XSL and put them in the
		<code class="filename">html</code> directory of Norman Walsh's 
		stylesheets. Take the file from the TLDP-XSL <code class="filename">fo</code> directory and put it in the Norman Walsh
		<code class="filename">fo</code> directory.
		</p><p>
	 	Once you have installed these files you can use
		<span class="application">xsltproc</span> to generate HTML files from your
		XML documents. To transform your XML file(s) into a single-page HTML
		document use the following command:
    </p><pre class="screen">
<code class="prompt">bash$</code> <span class="command"><strong> xsltproc -o <em class="replaceable"><code>HOWTO.html</code></em> /usr/local/sgml/stylesheets/tldp-html.xsl <em class="replaceable"><code>HOWTO.xml</code></em></strong></span>
</pre><p>To generate a set of linked HTML pages, with a separate page for each 
	 <code class="sgmltag-element">chapter</code>, <code class="sgmltag-element">sect1</code> or
	 <code class="sgmltag-element">appendix</code>,  use the following
    command:
    </p><pre class="screen">
<code class="prompt">bash$ </code><span class="command"><strong>xsltproc /usr/share/sgml/stylesheets/tldp-html-chunk.xsl <em class="replaceable"><code>HOWTO.xml</code></em></strong></span>
</pre><p>Note that you never directly call the style sheet
    <code class="filename">tldp-html-common.xsl</code>. It is called by both of the
    other two style sheets.
    </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="xsl-css"></a>4.3.1. Changing CSS Files</h4></div></div></div><p>If you want your HTML files to use a specific 
	<acronym class="acronym">CSS</acronym> stylesheet, you will need to edit 
	<code class="filename">tldp-html-common.xsl</code>. Look for a line that
	ressembles <code class="literal">&lt;xsl:param name="html.stylesheet"
	select="'style.css'"/&gt;</code>.</p><p>
		Replace <code class="filename">style.css</code> with the name of the
		<acronym class="acronym">CSS</acronym> file you would like to use.
	</p></div></div><div class="footnotes"><br><hr style="width:100; text-align:left;margin-left: 0"><div id="ftn.idm2174" class="footnote"><p><a href="#idm2174" class="para"><sup class="para">[2] </sup></a>In truth, "XSL" is actually comprised of three
      components: the <span class="emphasis"><em>XSLT</em></span> transformation language,
      the <span class="emphasis"><em>XPath</em></span> expression language (used by XSLT), 
      and XSL Formatting Objects (FO) that are used for describing a page.
      The style sheets are actually written in XSLT and generate either HTML
      or (for print output) FO. The FO file is then run through a FO processor
      to create the actual print (PDF or PostScript) output. See the
      <a class="ulink" href="http://www.w3.org/Style/XSL/WhatIsXSL.html" target="_top">W3C web 
      site</a> for more information.</p></div><div id="ftn.idm2195" class="footnote"><p><a href="#idm2195" class="para"><sup class="para">[3] </sup></a>In XSL
      terminology, the process of generating multiple files is referred to
      as "chunking".</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="apbs03.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="apb.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="apbs05.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">3. Validation </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 5. DocBook DTD</td></tr></table></div></body></html>
