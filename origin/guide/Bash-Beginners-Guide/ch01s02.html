<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>2. Advantages of the Bourne Again SHell</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="Linux, Scripts, linux, Bash, guide, Guide, Exercises, exercises, bash, scripting, Scripting, awk, sed, variables, functions, loops, conditionals"><link rel="home" href="index.html" title="Bash Guide for Beginners"><link rel="up" href="ch01.html" title="Chapter 1. Bash and Bash scripts"><link rel="prev" href="ch01s01.html" title="1. Common shell programs"><link rel="next" href="ch01s03.html" title="3. Executing commands"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2. Advantages of the Bourne Again SHell</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch01s01.html">Prev</a> </td><th width="60%" align="center">Chapter 1. Bash and Bash scripts</th><td width="20%" align="right"> <a accesskey="n" href="ch01s03.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sect_01_02"></a>2. Advantages of the Bourne Again SHell</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sect_01_02_01"></a>2.1. Bash is the GNU shell</h3></div></div></div><p>The GNU project (GNU's Not UNIX) provides tools for UNIX-like system administration which are free software and comply to UNIX standards.</p><p>Bash<a class="indexterm" name="idm393"></a> is an sh-compatible shell that incorporates useful features from the Korn shell (ksh) and C shell (csh). It is intended to conform to the IEEE POSIX P1003.2/ISO 9945.2 Shell and Tools standard. It offers functional improvements over sh for both programming and interactive use; these include command line editing, unlimited size command history, job control, shell functions and aliases, indexed arrays of unlimited size, and integer arithmetic in any base from two to sixty-four. Bash can run most sh scripts without modification.</p><p>Like the other GNU projects, the bash initiative was started to preserve, protect and promote the freedom to use, study, copy, modify and redistribute software.  It is generally known that such conditions stimulate creativity.  This was also the case with the bash program, which has a lot of extra features that other shells can't offer.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sect_01_02_02"></a>2.2. Features only found in bash</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_01_02_02_01"></a>2.2.1. Invocation</h4></div></div></div><p>In addition<a class="indexterm" name="idm402"></a> to the single-character shell command line options which can generally be configured using the <span class="command"><strong>set</strong></span> shell built-in command, there are several multi-character options that you can use.  We will come across a couple of the more popular options<a class="indexterm" name="idm406"></a> in this and the following chapters; the complete list can be found in the Bash info pages, <span class="guimenu">Bash features</span> &#8594; <span class="guimenuitem">Invoking Bash</span>.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_01_02_02_02"></a>2.2.2. Bash startup files</h4></div></div></div><p>Startup<a class="indexterm" name="idm415"></a> files are scripts that are read and executed by Bash when it starts.  The following subsections<a class="indexterm" name="idm418"></a> describe different ways to start the shell, and the startup files that are read consequently.</p><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="sect_01_02_02_02_01"></a>2.2.2.1. Invoked as an interactive login shell, or with `--login'</h5></div></div></div><p>Interactive<a class="indexterm" name="idm424"></a> means you can enter commands.  The shell is not running because a script has been activated.  A login shell means that you got the shell after authenticating to the system, usually by giving your user name and password.</p><p>Files read:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">/etc/profile</code></p></li><li class="listitem"><p><code class="filename">~/.bash_profile</code>, <code class="filename">~/.bash_login</code> or <code class="filename">~/.profile</code>: first existing readable file is read</p></li><li class="listitem"><p><code class="filename">~/.bash_logout</code> upon logout.</p></li></ul></div><p>Error messages are printed if configuration files exist but are not readable.  If a file does not exist, bash searches for the next.</p></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="sect_01_02_02_02_02"></a>2.2.2.2. Invoked as an interactive non-login shell</h5></div></div></div><p>A non-login<a class="indexterm" name="idm444"></a> shell means that you did not have to authenticate to the system.  For instance, when you open a terminal using an icon, or a menu item, that is a non-login shell.</p><p>Files read:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">~/.bashrc</code></p></li></ul></div><p>This file is usually referred to in <code class="filename">~/.bash_profile</code>:</p><div class="cmdsynopsis"><p><code class="command">if <code class="function">[ -f <code class="filename">~/.bashrc</code> ]</code>; then . <code class="filename">~/.bashrc</code>; fi</code> </p></div><p>See <a class="xref" href="ch07.html" title="Chapter 7. Conditional statements">Chapter 7, <i>Conditional statements</i></a> for more information on the <span class="command"><strong>if</strong></span> construct.</p></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="sect_01_02_02_02_03"></a>2.2.2.3. Invoked non-interactively</h5></div></div></div><p>All scripts use non-interactive<a class="indexterm" name="idm465"></a> shells.  They are programmed to do certain tasks and cannot be instructed to do other jobs than those for which they are programmed.</p><p>Files read:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>defined<a class="indexterm" name="idm472"></a> by <code class="varname">BASH_ENV</code></p></li></ul></div><p><code class="varname">PATH</code> is not used to search for this file, so if you want to use it, best refer to it by giving the full path and file name.</p></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="sect_01_02_02_02_04"></a>2.2.2.4. Invoked with the sh command</h5></div></div></div><p>Bash<a class="indexterm" name="idm481"></a> tries to behave as the historical Bourne <span class="command"><strong>sh</strong></span> program while conforming to the POSIX standard as well.</p><p>Files read:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">/etc/profile</code></p></li><li class="listitem"><p><code class="filename">~/.profile</code></p></li></ul></div><p>When invoked interactively, the <code class="varname">ENV</code> variable<a class="indexterm" name="idm495"></a> can point to extra startup information.</p></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="sect_01_02_02_02_05"></a>2.2.2.5. POSIX mode</h5></div></div></div><p>This option<a class="indexterm" name="idm501"></a> is enabled either using the <span class="command"><strong>set</strong></span> built-in:</p><div class="cmdsynopsis"><p><code class="command">set <code class="option">-o posix</code></code> </p></div><p>or by calling the <span class="command"><strong>bash</strong></span> program with the <code class="option">--posix</code> option.  Bash will then try to behave as compliant as possible to the POSIX standard for shells.  Setting the <code class="varname">POSIXLY_CORRECT</code> variable<a class="indexterm" name="idm512"></a> does the same.</p><p>Files read:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>defined by <code class="varname">ENV</code> variable.</p></li></ul></div></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="sect_01_02_02_02_06"></a>2.2.2.6. Invoked remotely</h5></div></div></div><p>Files read when invoked<a class="indexterm" name="idm523"></a> by <span class="command"><strong>rshd</strong></span>:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">~/.bashrc</code></p></li></ul></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Avoid use of r-tools</h3><p>Be aware of the dangers when using tools such as <span class="command"><strong>rlogin</strong></span>, <span class="command"><strong>telnet</strong></span>, <span class="command"><strong>rsh</strong></span> and <span class="command"><strong>rcp</strong></span>.  They are intrinsically insecure because confidential data is sent over the network unencrypted.  If you need tools for remote execution, file transfer and so on, use an implementation of Secure SHell, generally known as SSH, freely available from <a class="ulink" href="http://www.openssh.org" target="_top">http://www.openssh.org</a>.  Different client programs are available for non-UNIX systems as well, see your local software mirror.</p></div></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="sect_01_02_02_02_07"></a>2.2.2.7. Invoked when UID is not equal to EUID</h5></div></div></div><p>No startup<a class="indexterm" name="idm542"></a> files are read in this case.</p></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_01_02_02_03"></a>2.2.3. Interactive shells</h4></div></div></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="sect_01_02_02_03_01"></a>2.2.3.1. What is an interactive shell?</h5></div></div></div><p>An interactive<a class="indexterm" name="idm550"></a> shell generally reads from, and writes to, a user's terminal: input and output are connected to a terminal.  Bash interactive behavior<a class="indexterm" name="idm553"></a> is started when the <span class="command"><strong>bash</strong></span> command is called upon without non-option arguments, except when the option is a string to read from or when the shell is invoked to read from standard input, which allows for positional parameters to be set (see <a class="xref" href="ch03.html" title="Chapter 3. The Bash environment">Chapter 3, <i>The Bash environment</i></a> ).</p></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="sect_01_02_02_03_02"></a>2.2.3.2. Is this shell interactive?</h5></div></div></div><p>Test by looking at the content of the special parameter <code class="varname">-</code>, it contains an 'i' when the shell is interactive:</p><pre class="screen">
<code class="prompt">eddy:~&gt;</code> <span class="command"><strong>echo <code class="varname">$-</code></strong></span>
himBH
</pre><p>In non-interactive shells, the prompt, <code class="varname">PS1</code>, is unset.</p></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="sect_01_02_02_03_03"></a>2.2.3.3. Interactive shell behavior</h5></div></div></div><p>Differences in interactive<a class="indexterm" name="idm571"></a> mode:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Bash reads startup files.</p></li><li class="listitem"><p>Job control enabled by default.</p></li><li class="listitem"><p>Prompts are set, <code class="varname">PS2</code> is enabled for multi-line<a class="indexterm" name="idm582"></a> commands, it is usually set to <span class="quote">&#8220;<span class="quote">&gt;</span>&#8221;</span>.  This is also the prompt you get when the shell thinks you entered an unfinished command, for instance when you forget quotes, command structures that cannot be left out, etc.</p></li><li class="listitem"><p>Commands are by default read from the command line using <span class="command"><strong>readline</strong></span>.</p></li><li class="listitem"><p>Bash interprets the shell option <code class="option">ignoreeof<a class="indexterm" name="idm592"></a></code> instead of exiting immediately upon receiving EOF (End Of File).</p></li><li class="listitem"><p>Command history and history expansion are enabled by default.  History is saved in the file pointed to by<a class="indexterm" name="idm597"></a> <code class="varname">HISTFILE</code> when the shell exits.  By default, <code class="varname">HISTFILE</code> points to <code class="filename">~/.bash_history</code>.</p></li><li class="listitem"><p>Alias expansion is enabled.</p></li><li class="listitem"><p>In the absence of traps, the <code class="option">SIGTERM</code> signal is ignored.</p></li><li class="listitem"><p>In the absence of traps, <code class="option">SIGINT</code> is caught and handled.  Thus, typing <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>C</strong></span>, for example, will not quit your interactive shell.</p></li><li class="listitem"><p>Sending <code class="option">SIGHUP</code> signals to all jobs on exit is configured with the <code class="option">huponexit</code> option.</p></li><li class="listitem"><p>Commands are executed upon read.</p></li><li class="listitem"><p>Bash checks for mail periodically.</p></li><li class="listitem"><p>Bash can be configured to exit when it encounters unreferenced variables.  In interactive mode this behavior is disabled.</p></li><li class="listitem"><p>When shell built-in commands encounter redirection errors, this will not cause the shell to exit.</p></li><li class="listitem"><p>Special built-ins returning errors when used in POSIX mode don't cause the shell to exit.  The built-in commands are listed in <a class="xref" href="ch01s03.html#sect_01_03_02" title="3.2. Shell built-in commands">Section 3.2, &#8220;Shell built-in commands&#8221;</a>.</p></li><li class="listitem"><p>Failure of <span class="command"><strong>exec</strong></span> will not exit the shell.</p></li><li class="listitem"><p>Parser syntax errors don't cause the shell to exit.</p></li><li class="listitem"><p>Simple spell check for the arguments to the <span class="command"><strong>cd</strong></span> built-in is enabled by default.</p></li><li class="listitem"><p>Automatic exit after the length of time specified in the <code class="varname">TMOUT</code> variable has passed, is enabled.</p></li></ul></div><p>More information:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="ch03s02.html" title="2. Variables">Section 2, &#8220;Variables&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="ch03s06.html" title="6. More Bash options">Section 6, &#8220;More Bash options&#8221;</a></p></li><li class="listitem"><p>See <a class="xref" href="ch12.html" title="Chapter 12. Catching signals">Chapter 12, <i>Catching signals</i></a> for more about signals.</p></li><li class="listitem"><p><a class="xref" href="ch03s04.html" title="4. Shell expansion">Section 4, &#8220;Shell expansion&#8221;</a> discusses the various expansions performed upon entering a command.</p></li></ul></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_01_02_02_04"></a>2.2.4. Conditionals</h4></div></div></div><p>Conditional<a class="indexterm" name="idm656"></a> expressions are used by the <span class="command"><strong>[[</strong></span> compound command and by the <span class="command"><strong>test</strong></span> and <span class="command"><strong>[</strong></span> built-in commands.</p><p>Expressions may be unary or binary.  Unary expressions are often used to examine the status of a file.  You only need one object, for instance a file, to do the operation on.</p><p>There are string operators and numeric comparison operators as well; these are binary operators, requiring two objects to do the operation on.  If the <code class="option">FILE</code> argument to one of the primaries is in the form <code class="filename">/dev/fd/N</code>, then file descriptor N is checked.  If the <code class="option">FILE</code> argument to one of the primaries is one of <code class="filename">/dev/stdin</code>, <code class="filename">/dev/stdout</code> or <code class="filename">/dev/stderr</code>, then file descriptor 0, 1 or 2 respectively is checked.</p><p>Conditionals are discussed in detail in <a class="xref" href="ch07.html" title="Chapter 7. Conditional statements">Chapter 7, <i>Conditional statements</i></a>.</p><p>More information about the file descriptors in <a class="xref" href="ch08s02.html#sect_08_02_03" title="2.3. Redirection and file descriptors">Section 2.3, &#8220;Redirection and file descriptors&#8221;</a>.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_01_02_02_05"></a>2.2.5. Shell arithmetic</h4></div></div></div><p>The shell allows arithmetic<a class="indexterm" name="idm677"></a> expressions to be evaluated, as one of
the shell expansions or by the <span class="command"><strong>let</strong></span> built-in.</p><p>Evaluation is done in fixed-width integers with no check for overflow, though division by 0 is trapped and flagged as an error.  The operators and their precedence and associativity are the same as in the C language, see <a class="xref" href="ch03.html" title="Chapter 3. The Bash environment">Chapter 3, <i>The Bash environment</i></a>.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_01_02_02_06"></a>2.2.6. Aliases</h4></div></div></div><p>Aliases<a class="indexterm" name="idm686"></a> allow a string to be substituted for a word when it is used as the first word of a simple command.  The shell maintains a list of aliases that may be set and unset with the <span class="command"><strong>alias</strong></span> and <span class="command"><strong>unalias</strong></span> commands.</p><p>Bash always reads at least one complete line of input before executing any of the commands on that line.  Aliases are expanded when a command is read, not when it is executed.  Therefore, an alias definition appearing on the same line as another command does not take effect until the next line of input is read.  The commands following the alias definition on that line are not affected by the new alias.</p><p>Aliases are expanded when a function definition is read, not when the function is executed, because a function definition is itself a compound command.  As a consequence, aliases defined in a function are not available until after that function is executed.</p><p>We will discuss aliases in detail in <a class="xref" href="ch03s05.html" title="5. Aliases">Section 5, &#8220;Aliases&#8221;</a>.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_01_02_02_07"></a>2.2.7. Arrays</h4></div></div></div><p>Bash provides one-dimensional array<a class="indexterm" name="idm698"></a> variables.  Any variable may be used as an array; the <span class="command"><strong>declare</strong></span> built-in will explicitly declare an array.  There is no maximum limit on the size of an array, nor any requirement that members be indexed or assigned contiguously.  Arrays are zero-based.  See <a class="xref" href="ch10.html" title="Chapter 10. More on variables">Chapter 10, <i>More on variables</i></a>.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_01_02_02_08"></a>2.2.8. Directory stack</h4></div></div></div><p>The directory stack<a class="indexterm" name="idm706"></a> is a list of recently-visited directories.  The <span class="command"><strong>pushd</strong></span> built-in<a class="indexterm" name="idm710"></a> adds directories to the stack as it changes the current directory, and the <span class="command"><strong>popd</strong></span> built-in<a class="indexterm" name="idm714"></a> removes specified directories from the stack and changes the current directory to the directory removed.</p><p>Content can be displayed issuing the <span class="command"><strong>dirs</strong></span> command or by checking the content of the <code class="varname">DIRSTACK<a class="indexterm" name="idm720"></a></code> variable.</p><p>More information about the workings of this mechanism can be found in the Bash info pages.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_01_02_02_09"></a>2.2.9. The prompt</h4></div></div></div><p>Bash makes playing with the prompt<a class="indexterm" name="idm727"></a> even more fun.  See the section <span class="emphasis"><em>Controlling the Prompt</em></span> in the Bash info pages.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="sect_01_02_02_10"></a>2.2.10. The restricted shell</h4></div></div></div><p>When invoked as <span class="command"><strong>rbash<a class="indexterm" name="idm735"></a></strong></span> or with the <code class="option">--restricted<a class="indexterm" name="idm739"></a></code> or <code class="option">-r</code> option, the following happens<a class="indexterm" name="idm743"></a>:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The <span class="command"><strong>cd</strong></span> built-in is disabled.</p></li><li class="listitem"><p>Setting or unsetting <code class="varname">SHELL<a class="indexterm" name="idm753"></a></code>, <code class="varname">PATH<a class="indexterm" name="idm757"></a></code>, <code class="varname">ENV<a class="indexterm" name="idm761"></a></code> or <code class="varname">BASH_ENV<a class="indexterm" name="idm765"></a></code> is not possible.</p></li><li class="listitem"><p>Command names can no longer contain slashes.</p></li><li class="listitem"><p>Filenames containing a slash are not allowed with the <span class="command"><strong>.</strong></span> (<span class="command"><strong>source</strong></span>) built-in<a class="indexterm" name="idm774"></a> command.</p></li><li class="listitem"><p>The <span class="command"><strong>hash</strong></span> built-in<a class="indexterm" name="idm780"></a> does not accept slashes with the <code class="option">-p</code> option.</p></li><li class="listitem"><p>Import of functions<a class="indexterm" name="idm786"></a> at startup is disabled.</p></li><li class="listitem"><p><code class="varname">SHELLOPTS<a class="indexterm" name="idm792"></a></code> is ignored at startup.</p></li><li class="listitem"><p>Output redirection using <span class="command"><strong>&gt;</strong></span>, <span class="command"><strong>&gt;|</strong></span>, <span class="command"><strong>&gt;&lt;</strong></span>, <span class="command"><strong>&gt;&amp;</strong></span>, <span class="command"><strong>&amp;&gt;</strong></span> and <span class="command"><strong>&gt;&gt;</strong></span> is disabled.</p></li><li class="listitem"><p>The <span class="command"><strong>exec</strong></span> built-in is disabled.</p></li><li class="listitem"><p>The <code class="option">-f</code> and <code class="option">-d</code> options are disabled for the <span class="command"><strong>enable</strong></span> built-in<a class="indexterm" name="idm811"></a>.</p></li><li class="listitem"><p>A default <code class="varname">PATH</code> cannot be specified with the <span class="command"><strong>command</strong></span> built-in.</p></li><li class="listitem"><p>Turning off restricted mode is not possible.</p></li></ul></div><p>When a command that is found to be a shell script is executed, <span class="command"><strong>rbash</strong></span> turns off any restrictions in the shell spawned to execute the script.</p><p>More information:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="ch03s02.html" title="2. Variables">Section 2, &#8220;Variables&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="ch03s06.html" title="6. More Bash options">Section 6, &#8220;More Bash options&#8221;</a></p></li><li class="listitem"><p><span class="guimenu">Info Bash</span> &#8594; <span class="guisubmenu">Basic Shell Features</span> &#8594; <span class="guimenuitem">Redirections</span></p></li><li class="listitem"><p><a class="xref" href="ch08s02.html#sect_08_02_03" title="2.3. Redirection and file descriptors">Section 2.3, &#8220;Redirection and file descriptors&#8221;</a>: advanced redirection</p></li></ul></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch01s01.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch01.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch01s03.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">1. Common shell programs </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 3. Executing commands</td></tr></table></div></body></html>
