<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>5. Exercises</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="Linux, Scripts, linux, Bash, guide, Guide, Exercises, exercises, bash, scripting, Scripting, awk, sed, variables, functions, loops, conditionals"><link rel="home" href="index.html" title="Bash Guide for Beginners"><link rel="up" href="ch07.html" title="Chapter 7. Conditional statements"><link rel="prev" href="ch07s04.html" title="4. Summary"><link rel="next" href="ch08.html" title="Chapter 8. Writing interactive scripts"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5. Exercises</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch07s04.html">Prev</a> </td><th width="60%" align="center">Chapter 7. Conditional statements</th><td width="20%" align="right"> <a accesskey="n" href="ch08.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sect_07_05"></a>5. Exercises</h2></div></div></div><p>Here are some ideas to get you started using <span class="command"><strong>if</strong></span> in scripts:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Use an <span class="command"><strong>if/then/elif/else</strong></span> construct that prints information about the current month.  The script should print the number of days in this month, and give information about leap years if the current month is February.</p></li><li class="listitem"><p>Do the same, using a <span class="command"><strong>case</strong></span> statement and an alternative use of the <span class="command"><strong>date</strong></span> command.</p></li><li class="listitem"><p>Modify <code class="filename">/etc/profile</code> so that you get a special greeting message when you connect to your system as <span class="emphasis"><em>root</em></span>.</p></li><li class="listitem"><p>Edit the <code class="filename">leaptest.sh</code> script from <a class="xref" href="ch07s02.html#sect_07_02_04" title="2.4. Boolean operations">Section 2.4, &#8220;Boolean operations&#8221;</a> so that it requires one argument, the year.  Test that exactly one argument is supplied.</p></li><li class="listitem"><p>Write a script called <code class="filename">whichdaemon.sh</code> that checks if the <span class="command"><strong>httpd</strong></span> and <span class="command"><strong>init</strong></span> daemons are running on your system.  If an <span class="command"><strong>httpd</strong></span> is running, the script should print a message like, <span class="quote">&#8220;<span class="quote">This machine is running a web server.</span>&#8221;</span>  Use <span class="command"><strong>ps</strong></span> to check on processes.</p></li><li class="listitem"><p>Write a script that makes a backup of your home directory on a remote machine using <span class="command"><strong>scp</strong></span>.  The script should report in a log file, for instance <code class="filename">~/log/homebackup.log</code>.  If you don't have a second machine to copy the backup to, use <span class="command"><strong>scp</strong></span> to test copying it to the localhost.  This requires SSH keys between the two hosts, or else you have to supply a password.  The creation of SSH keys is explained in <span class="command"><strong>man <em class="parameter"><code>ssh-keygen</code></em></strong></span>.</p></li><li class="listitem"><p>Adapt the script from the first example in <a class="xref" href="ch07s03.html#sect_07_03_01" title="3.1. Simplified conditions">Section 3.1, &#8220;Simplified conditions&#8221;</a> to include the case of exactly 90% disk space usage, and lower than 10% disk space usage.</p><p>The script should use <span class="command"><strong>tar <code class="option">cf</code></strong></span> for the creation of the backup and <span class="command"><strong>gzip</strong></span> or <span class="command"><strong>bzip2</strong></span> for compressing the <code class="filename">.tar</code> file.  Put all filenames in variables.  Put the name of the remote server and the remote directory in a variable.  This will make it easier to re-use the script or to make changes to it in the future.</p><p>The script should check for the existence of a compressed archive.  If this exists, remove it first in order to prevent output generation.</p><p>The script should also check for available diskspace.  Keep in mind that at any given moment you could have the data in your home directory, the data in the <code class="filename">.tar</code> file and the data in the compressed archive all together on your disk.  If there is not enough diskspace, exit with an error message in the log file.</p><p>The script should clean up the compressed archive before it exits.</p></li></ol></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch07s04.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch07.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch08.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">4. Summary </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 8. Writing interactive scripts</td></tr></table></div></body></html>
