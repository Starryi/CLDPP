<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>4. Exercises</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="Linux, Scripts, linux, Bash, guide, Guide, Exercises, exercises, bash, scripting, Scripting, awk, sed, variables, functions, loops, conditionals"><link rel="home" href="index.html" title="Bash Guide for Beginners"><link rel="up" href="ch08.html" title="Chapter 8. Writing interactive scripts"><link rel="prev" href="ch08s03.html" title="3. Summary"><link rel="next" href="ch09.html" title="Chapter 9. Repetitive tasks"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4. Exercises</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch08s03.html">Prev</a> </td><th width="60%" align="center">Chapter 8. Writing interactive scripts</th><td width="20%" align="right"> <a accesskey="n" href="ch09.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sect_08_04"></a>4. Exercises</h2></div></div></div><p>These exercises are practical applications of the constructs discussed in this chapter.  When writing the scripts, you may test by using a test directory that does not contain too much data.  Write each step, then test that portion of code, rather than writing everything at once.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Write a script that asks for the user's age.  If it is equal to or higher than 16, print a message saying that this user is allowed to drink alcohol.  If the user's age is below 16, print a message telling the user how many years he or she has to wait before legally being allowed to drink.</p><p>As an extra, calculate how much beer an 18+ user has drunk statistically (100 liters/year) and print this information for the user.</p></li><li class="listitem"><p>Write a script that takes one file as an argument.  Use a <span class="emphasis"><em>here</em></span> document that presents the user with a couple of choices for compressing the file.  Possible choices could be <span class="command"><strong>gzip</strong></span>, <span class="command"><strong>bzip2</strong></span>, <span class="command"><strong>compress</strong></span> and <span class="command"><strong>zip</strong></span>. </p></li><li class="listitem"><p>Write a script called <code class="filename">homebackup</code> that automates <span class="command"><strong>tar</strong></span> so the person executing the script always uses the desired options (<code class="option">cvp</code>) and backup destination directory (<code class="filename">/var/backups</code>) to make a backup of his or her home directory.  Implement the following features:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Test for the number of arguments.  The script should run without arguments.  If any arguments are present, exit after printing a usage message.</p></li><li class="listitem"><p>Determine whether the <code class="filename">backups</code> directory has enough free space to hold the backup.</p></li><li class="listitem"><p>Ask the user whether a full or an incremental backup is wanted.  If the user does not have a full backup file yet, print a message that a full backup will be taken.  In case of an incremental backup, only do this if the full backup is not older than a week.</p></li><li class="listitem"><p>Compress the backup using any compression tool.  Inform the user that the script is doing this, because it might take some time, during which the user might start worrying if no output appears on the screen.</p></li><li class="listitem"><p>Print a message informing the user about the size of the compressed backup.</p></li></ul></div><p>See <span class="command"><strong>info tar</strong></span> or <a class="ulink" href="http://tille.garrels.be/training/tldp/c4540.html#sect_09_01_01" target="_top">Introduction to Linux</a>, chapter 9: <span class="quote">&#8220;<span class="quote">Preparing your data</span>&#8221;</span> for background information.</p></li><li class="listitem"><p>Write a script called <code class="filename">simple-useradd.sh</code> that adds a local user to the system.  This script should:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Take only one argument, or else exit after printing a usage message.</p></li><li class="listitem"><p>Check <code class="filename">/etc/passwd</code> and decide on the first free user ID.  Print a message containing this ID.</p></li><li class="listitem"><p>Create a private group for this user, checking the <code class="filename">/etc/group</code> file.  Print a message containing the group ID.</p></li><li class="listitem"><p>Gather information from the operator user: a comment describing this user, choice from a list of shells (test for acceptability, else exit printing a message), expiration date for this account, extra groups of which the new user should be a member.</p></li><li class="listitem"><p>With the obtained information, add a line to <code class="filename">/etc/passwd</code>, <code class="filename">/etc/group</code> and <code class="filename">/etc/shadow</code>; create the user's home directory (with correct permissions!); add the user to the desired secondary groups.</p></li><li class="listitem"><p>Set the password for this user to a default known string.</p></li></ul></div></li><li class="listitem"><p>Rewrite the script from <a class="xref" href="ch07s02.html#sect_07_02_01_04" title="2.1.4. Testing that a file exists">Section 2.1.4, &#8220;Testing that a file exists&#8221;</a> so that it reads input from the user instead of taking it from the first argument.</p></li></ol></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch08s03.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch08.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch09.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">3. Summary </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 9. Repetitive tasks</td></tr></table></div></body></html>
