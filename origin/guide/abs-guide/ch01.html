<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 1. Shell Programming!</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Advanced Bash-Scripting Guide"><link rel="up" href="pt01.html" title="Part Part 1. Introduction"><link rel="prev" href="pt01.html" title="Part Part 1. Introduction"><link rel="next" href="ch02.html" title="Chapter 2. Starting Off With a Sha-Bang"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 1. Shell Programming!</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="pt01.html">Prev</a> </td><th width="60%" align="center">Part Part 1. Introduction</th><td width="20%" align="right"> <a accesskey="n" href="ch02.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="why-shell"></a>Chapter 1. Shell Programming!</h2></div></div></div><div class="epigraph"><p>No programming language is perfect. There is not even a single
        best language; there are only languages well suited or perhaps
        poorly suited for particular purposes.</p><p>--Herbert Mayer</p></div><p>A working knowledge of shell scripting is essential to anyone
      wishing to become reasonably proficient at system administration,
      even if they do not anticipate ever having to actually write a
      script. Consider that as a Linux machine boots up, it executes the
      shell scripts in <code class="filename">/etc/rc.d</code>
      to restore the system configuration and set up services. A detailed
      understanding of these startup scripts is important for analyzing
      the behavior of a system, and possibly modifying it.</p><p>The craft of scripting is not hard to master,
      since scripts can be built in bite-sized sections and there
      is only a fairly small set of shell-specific operators and options

      <a href="#ftn.idm62" class="footnote" name="idm62"><sup class="footnote">[1]</sup></a>

      to learn. The syntax is simple -- even austere -- similar to
      that of invoking and chaining together utilities at the command
      line, and there are only a few <span class="quote">&#8220;<span class="quote">rules</span>&#8221;</span> governing
      their use. Most short scripts work right the first time, and
      debugging even the longer ones is straightforward.</p><p>
	    </p><div class="blockquote"><blockquote class="blockquote"><div class="literallayout"><p><br>
    In the early days of personal computing, the BASIC language enabled<br>
    anyone reasonably computer proficient to write programs on an early<br>
    generation of microcomputers. Decades later, the Bash scripting<br>
    language enables anyone with a rudimentary knowledge of Linux or<br>
    UNIX to do the same on modern machines.<br>
<br>
    We now have miniaturized single-board computers with amazing<br>
    capabilities, such as the <a class="ulink" href="http://www.raspberrypi.org/" target="_top">Raspberry Pi</a>.<br>
    Bash scripting provides a way to explore the capabilities of these<br>
    fascinating devices.<br>
            </p></div></blockquote></div><p>
    </p><p>A shell script is a quick-and-dirty method of prototyping
      a complex application. Getting even a limited subset of
      the functionality to work in a script is often a useful
      first stage in project development. In this way, the structure
      of the application can be tested and tinkered with, and the
      major pitfalls found before proceeding to the final coding
      in <em class="firstterm">C</em>, <em class="firstterm">C++</em>,
      <em class="firstterm">Java</em>, <a class="link" href="ch36s02.html#perlref">Perl</a>,
      or <em class="firstterm">Python</em>.</p><p>Shell scripting hearkens back to the classic UNIX philosophy
      of breaking complex projects into simpler subtasks, of chaining
      together components and utilities. Many consider this a better,
      or at least more aesthetically pleasing approach to problem solving
      than using one of the new generation of high-powered all-in-one
      languages, such as <em class="firstterm">Perl</em>, which attempt to
      be all things to all people, but at the cost of forcing you to
      alter your thinking processes to fit the tool.</p><p>According to <a class="link" href="bi01.html#mayerref" title="Advanced C Programming on the IBM PC">Herbert Mayer</a>,
      <span class="quote">&#8220;<span class="quote">a useful language needs arrays, pointers,
	and a generic mechanism for building data structures.</span>&#8221;</span>
	By these criteria, shell scripting falls somewhat short of being
	<span class="quote">&#8220;<span class="quote">useful.</span>&#8221;</span> Or, perhaps not. . . .</p><div class="sidebar"><div class="titlepage"><div><div><p class="title"><b></b></p></div></div></div><p>When not to use shell scripts

      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Resource-intensive tasks, especially where speed is
	    a factor (sorting, hashing, recursion

            <a href="#ftn.idm87" class="footnote" name="idm87"><sup class="footnote">[2]</sup></a>
	    
	    ...)</p></li><li class="listitem"><p>Procedures involving heavy-duty math operations,
	    especially floating point arithmetic, arbitrary
	    precision calculations, or complex numbers (use
	    <em class="firstterm">C++</em> or <em class="firstterm">FORTRAN</em>
	    instead)</p></li><li class="listitem"><p>Cross-platform portability required (use
	    <em class="firstterm">C</em> or <em class="firstterm">Java</em>
	    instead)</p></li><li class="listitem"><p>Complex applications, where structured programming is
	    a necessity (type-checking of variables, function
	    prototypes, etc.)</p></li><li class="listitem"><p>Mission-critical applications upon which you are betting the
	     future of the company</p></li><li class="listitem"><p>Situations where <span class="emphasis"><em>security</em></span> is
	    important, where you need to guarantee the integrity of
	    your system and protect against intrusion, cracking, and
	    vandalism</p></li><li class="listitem"><p>Project consists of subcomponents with interlocking
	    dependencies</p></li><li class="listitem"><p>Extensive file operations required
	    (<em class="firstterm">Bash</em> is limited to serial file access,
	    and that only in a particularly clumsy and inefficient
	    line-by-line fashion.)</p></li><li class="listitem"><p>Need native support for multi-dimensional arrays</p></li><li class="listitem"><p>Need data structures, such as linked lists or trees</p></li><li class="listitem"><p>Need to generate / manipulate graphics or GUIs</p></li><li class="listitem"><p>Need direct access to system hardware or
	    external peripherals</p></li><li class="listitem"><p>Need port or <a class="link" href="ch29s01.html#socketref">socket</a>
	    I/O</p></li><li class="listitem"><p>Need to use libraries or interface with legacy code</p></li><li class="listitem"><p>Proprietary, closed-source applications (Shell scripts
	    put the source code right out in the open for all the world
	    to see.)</p></li></ul></div><p>If any of the above applies, consider a more powerful scripting
      language -- perhaps <em class="firstterm">Perl</em>,
      <em class="firstterm">Tcl</em>, <em class="firstterm">Python</em>,
      <em class="firstterm">Ruby</em> -- or possibly a
      compiled language such as <em class="firstterm">C</em>,
      <em class="firstterm">C++</em>, or <em class="firstterm">Java</em>. Even
      then, prototyping the application as a shell script might still
      be a useful development step.</p></div><p><a name="bashdef"></a></p><p>We will be using <acronym class="acronym">Bash</acronym>, an acronym

        <a href="#ftn.idm139" class="footnote" name="idm139"><sup class="footnote">[3]</sup></a>

      for <span class="quote">&#8220;<span class="quote">Bourne-Again shell</span>&#8221;</span> and a pun on Stephen Bourne's
      now classic <em class="firstterm">Bourne</em> shell. Bash has become
      a <span class="foreignphrase"><em class="foreignphrase">de facto</em></span> standard for shell
      scripting on most flavors of UNIX. Most of the principles this
      book covers apply equally well to scripting with other shells,
      such as the <em class="firstterm">Korn Shell</em>, from which Bash
      derives some of its features,

       <a href="#ftn.idm147" class="footnote" name="idm147"><sup class="footnote">[4]</sup></a>

      and the <em class="firstterm">C Shell</em> and its variants. (Note that
      <em class="firstterm">C Shell</em> programming is not recommended due to
      certain inherent problems, as pointed out in an October, 1993 <a class="ulink" href="http://www.faqs.org/faqs/unix-faq/shell/csh-whynot/" target="_top">Usenet
      post</a> by Tom Christiansen.)  </p><p>What follows is a tutorial on shell scripting. It relies
      heavily on examples to illustrate various features of the shell.
      The example scripts work -- they've been tested, insofar as
      possible -- and some of them are even useful in real life. The
      reader can play with the actual working code of the examples
      in the source archive (<code class="filename">scriptname.sh</code> or
      <code class="filename">scriptname.bash</code>),

         <a href="#ftn.idm157" class="footnote" name="idm157"><sup class="footnote">[5]</sup></a>

      give them <em class="firstterm">execute</em> permission
      (<strong class="userinput"><code>chmod u+rx scriptname</code></strong>),
      then run them to see what happens. Should the <a class="ulink" href="http://bash.deta.in/abs-guide-latest.tar.bz2" target="_top">source
      archive</a> not be available, then cut-and-paste from the <a class="ulink" href="http://www.tldp.org/LDP/abs/abs-guide.html.tar.gz" target="_top">HTML</a> or
      <a class="ulink" href="http://bash.deta.in/abs-guide.pdf" target="_top">pdf</a>
      rendered versions. Be aware that some of the scripts presented here
      introduce features before they are explained, and this may require
      the reader to temporarily skip ahead for enlightenment.</p><p>Unless otherwise noted, <a class="ulink" href="mailto:thegrendel.abs@gmail.com" target="_top">the author</a> of this
       book wrote the example scripts that follow.</p><div class="epigraph"><p>His countenance was bold and bashed not.</p><p>--Edmund Spenser</p></div><div class="footnotes"><br><hr style="width:100; text-align:left;margin-left: 0"><div id="ftn.idm62" class="footnote"><p><a href="#idm62" class="para"><sup class="para">[1] </sup></a>These are referred to as <a class="link" href="ch15.html#builtinref">builtins</a>, features internal to the
        shell.</p></div><div id="ftn.idm87" class="footnote"><p><a href="#idm87" class="para"><sup class="para">[2] </sup></a>Although <a class="link" href="ch24s02.html#recursionref0">recursion
	      <span class="emphasis"><em>is</em></span> possible in a shell script</a>,
	      it tends to be slow and its implementation is often
	      an <a class="link" href="ch24s03.html#fiboref">ugly kludge</a>.
	      </p></div><div id="ftn.idm139" class="footnote"><p><a href="#idm139" class="para"><sup class="para">[3] </sup></a>An <em class="firstterm">acronym</em>
        is an <span class="emphasis"><em>ersatz</em></span> word formed by pasting
        together the initial letters of the words into a tongue-tripping
	phrase. This morally corrupt and pernicious practice
	deserves appropriately severe punishment. Public
	flogging suggests itself.</p></div><div id="ftn.idm147" class="footnote"><p><a href="#idm147" class="para"><sup class="para">[4] </sup></a>Many of the features of <em class="firstterm">ksh88</em>,
	 and even a few from the updated <em class="firstterm">ksh93</em>
	 have been merged into Bash.</p></div><div id="ftn.idm157" class="footnote"><p><a href="#idm157" class="para"><sup class="para">[5] </sup></a>By convention, user-written shell scripts
         that are Bourne shell compliant generally take a name with a
         <code class="filename">.sh</code> extension.  System scripts, such as
         those found in <code class="filename">/etc/rc.d</code>,
         do not necessarily conform to this nomenclature.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="pt01.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="pt01.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Part Part 1. Introduction </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 2. Starting Off With a Sha-Bang</td></tr></table></div></body></html>
