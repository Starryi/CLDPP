<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Appendix L. History Commands</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Advanced Bash-Scripting Guide"><link rel="up" href="index.html" title="Advanced Bash-Scripting Guide"><link rel="prev" href="apk.html" title="Appendix K. Localization"><link rel="next" href="apm.html" title="Appendix M. Sample .bashrc and .bash_profile Files"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Appendix L. History Commands</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="apk.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="apm.html">Next</a></td></tr></table><hr></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="histcommands"></a>Appendix L. History Commands</h1></div></div></div><p>The Bash shell provides command-line tools for editing and
       manipulating a user's <em class="firstterm">command history</em>. This
       is primarily a convenience, a means of saving keystrokes.</p><p>Bash history commands:
       </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><span class="command"><strong>history</strong></span></p></li><li class="listitem"><p><span class="command"><strong>fc</strong></span></p></li></ol></div><p>
     </p><p>
	      </p><pre class="screen"><code class="prompt">bash$ </code><strong class="userinput"><code>history</code></strong>
<code class="computeroutput">   1  mount /mnt/cdrom
    2  cd /mnt/cdrom
    3  ls
     ...</code>
	      </pre><p>
	    </p><p>Internal variables associated with Bash history commands:
       </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>$HISTCMD</p></li><li class="listitem"><p>$HISTCONTROL</p></li><li class="listitem"><p>$HISTIGNORE</p></li><li class="listitem"><p>$HISTFILE</p></li><li class="listitem"><p>$HISTFILESIZE</p></li><li class="listitem"><p>$HISTSIZE</p></li><li class="listitem"><p>$HISTTIMEFORMAT (Bash, ver. 3.0 or later)</p></li><li class="listitem"><p>!!</p></li><li class="listitem"><p>!$</p></li><li class="listitem"><p>!#</p></li><li class="listitem"><p>!N</p></li><li class="listitem"><p>!-N</p></li><li class="listitem"><p>!STRING</p></li><li class="listitem"><p>!?STRING?</p></li><li class="listitem"><p>^STRING^string^</p></li></ol></div><p>
     </p><p>Unfortunately, the Bash history tools find no use in
       scripting.</p><pre class="programlisting">#!/bin/bash
# history.sh
# A (vain) attempt to use the 'history' command in a script.

history                      # No output.

var=$(history); echo "$var"  # $var is empty.

#  History commands are, by default, disabled within a script.
#  However, as dhw points out,
#+ set -o history
#+ enables the history mechanism.

set -o history
var=$(history); echo "$var"   # 1  var=$(history)</pre><p>
     </p><p>
	      </p><pre class="screen"><code class="prompt">bash$ </code><strong class="userinput"><code>./history.sh</code></strong>
<code class="computeroutput">(no output)</code>	      
	      </pre><p>
	  </p><p>The <a class="ulink" href="http://samrowe.com/wordpress/advancing-in-the-bash-shell/" target="_top">Advancing
	    in the Bash Shell</a> site gives a good introduction to
	    the use of history commands in Bash.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="apk.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="apm.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Appendix K. Localization </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Appendix M. Sample <code class="filename">.bashrc</code>  and
	    <code class="filename">.bash_profile</code> Files</td></tr></table></div></body></html>
