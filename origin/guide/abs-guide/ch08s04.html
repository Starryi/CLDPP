<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>4. Operator Precedence</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Advanced Bash-Scripting Guide"><link rel="up" href="ch08.html" title="Chapter 8. Operations and Related Topics"><link rel="prev" href="ch08s03.html" title="3. The Double-Parentheses Construct"><link rel="next" href="pt03.html" title="Part Part 3. Beyond the Basics"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4. Operator Precedence</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch08s03.html">Prev</a> </td><th width="60%" align="center">Chapter 8. Operations and Related Topics</th><td width="20%" align="right"> <a accesskey="n" href="pt03.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="opprecedence"></a>4. Operator Precedence</h2></div></div></div><p><a name="opprecedence1"></a></p><p>
        In a script, operations execute in order of
        <em class="firstterm">precedence</em>: the higher precedence operations
	execute <span class="emphasis"><em>before</em></span> the lower precedence ones.
	  <a href="#ftn.idm4290" class="footnote" name="idm4290"><sup class="footnote">[40]</sup></a>
      </p><div class="table"><a name="idm4294"></a><p class="title"><b>Table 8.1. Operator Precedence</b></p><div class="table-contents"><table class="table" summary="Operator Precedence" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Operator</th><th>Meaning</th><th>Comments</th></tr></thead><tbody><tr><td><code class="option"></code></td><td> </td><td><span class="command"><strong>HIGHEST PRECEDENCE</strong></span></td></tr><tr><td><code class="option">var++ var--</code></td><td>post-increment, post-decrement</td><td><a class="link" href="ch36s07.html#cstyle">C-style</a> operators</td></tr><tr><td><code class="option">++var --var</code></td><td>pre-increment, pre-decrement</td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr><tr><td><code class="option">! ~</code></td><td><a class="link" href="ch03.html#notref">negation</a></td><td>logical / bitwise, inverts sense of following
	        operator</td></tr><tr><td> </td><td> </td><td> </td></tr><tr><td><code class="option">**</code></td><td><a class="link" href="ch08s01.html#exponentiationref">exponentiation</a></td><td><a class="link" href="ch08s01.html#arops1">arithmetic
	        operation</a></td></tr><tr><td><code class="option">* / %</code></td><td>multiplication, division, modulo</td><td>arithmetic operation</td></tr><tr><td><code class="option">+ -</code></td><td>addition, subtraction</td><td>arithmetic operation</td></tr><tr><td> </td><td> </td><td> </td></tr><tr><td><code class="option">&lt;&lt; &gt;&gt;</code></td><td>left, right shift</td><td><a class="link" href="ch08s01.html#bitwsops1">bitwise</a></td></tr><tr><td> </td><td> </td><td> </td></tr><tr><td><code class="option">-z -n</code></td><td><em class="firstterm">unary</em> comparison</td><td>string is/is-not <a class="link" href="ch07s03.html#stringnull">null</a></td></tr><tr><td><code class="option">-e -f -t -x, etc.</code></td><td><em class="firstterm">unary</em> comparison</td><td><a class="link" href="ch07s02.html" title="2. File test operators">file-test</a></td></tr><tr><td><code class="option">&lt; -lt &gt; -gt &lt;= -le &gt;= -ge</code></td><td><em class="firstterm">compound</em> comparison</td><td>string and integer</td></tr><tr><td><code class="option">-nt -ot -ef</code></td><td><em class="firstterm">compound</em> comparison</td><td>file-test</td></tr><tr><td><code class="option">== -eq <a class="link" href="ch07s03.html#notequal">!=</a>
	       -ne</code></td><td>equality / inequality</td><td>test operators, string and integer</td></tr><tr><td> </td><td> </td><td> </td></tr><tr><td><code class="option">&amp;</code></td><td>AND</td><td>bitwise</td></tr><tr><td><code class="option">^</code></td><td>XOR</td><td><em class="firstterm">exclusive</em> OR, bitwise</td></tr><tr><td><code class="option">|</code></td><td>OR</td><td>bitwise</td></tr><tr><td> </td><td> </td><td> </td></tr><tr><td><code class="option">&amp;&amp; -a</code></td><td>AND</td><td><a class="link" href="ch08s01.html#logops1">logical</a>,
	        <em class="firstterm">compound</em>
	        comparison</td></tr><tr><td><code class="option">|| -o</code></td><td>OR</td><td>logical, <em class="firstterm">compound</em>
	        comparison</td></tr><tr><td> </td><td> </td><td> </td></tr><tr><td><code class="option">?:</code></td><td><a class="link" href="ch03.html#cstrinary">trinary
	        operator</a></td><td>C-style</td></tr><tr><td><code class="option">=</code></td><td><a class="link" href="ch04s02.html#eqref">assignment</a></td><td>(do not confuse with equality
	        <em class="firstterm">test</em>)</td></tr><tr><td><code class="option">*= /= %= += -= &lt;&lt;= &gt;&gt;= &amp;=</code></td><td><a class="link" href="ch08s01.html#arithopscomb">combination
	        assignment</a></td><td>times-equal, divide-equal, mod-equal, etc.</td></tr><tr><td> </td><td> </td><td> </td></tr><tr><td><code class="option">,</code></td><td><a class="link" href="ch08s01.html#commaop">comma</a></td><td>links a sequence of operations</td></tr><tr><td><code class="option"></code></td><td> </td><td><span class="command"><strong>LOWEST PRECEDENCE</strong></span></td></tr></tbody></table></div></div><br class="table-break"><p>In practice, all you really need to remember is the
      following:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The <span class="quote">&#8220;<span class="quote">My Dear Aunt Sally</span>&#8221;</span> mantra (<span class="emphasis"><em>multiply,
	  divide, add, subtract</em></span>) for the familiar <a class="link" href="ch08s01.html#arops1">arithmetic operations</a>.</p></li><li class="listitem"><p>The <em class="firstterm">compound</em> logical operators,
	  <span class="command"><strong>&amp;&amp;</strong></span>, <span class="command"><strong>||</strong></span>, <span class="command"><strong>-a</strong></span>,
	  and <span class="command"><strong>-o</strong></span> have low precedence.</p></li><li class="listitem"><p>The order of evaluation of equal-precedence operators is
	  usually <em class="firstterm">left-to-right</em>.</p></li></ul></div><p>Now, let's utilize our knowledge of operator precedence to
	  analyze a couple of lines from the
	  <code class="filename">/etc/init.d/functions file</code>, as found in
	  the <em class="firstterm">Fedora Core</em> Linux distro.</p><pre class="programlisting">while [ -n "$remaining" -a "$retry" -gt 0 ]; do

# This looks rather daunting at first glance.


# Separate the conditions:
while [ -n "$remaining" -a "$retry" -gt 0 ]; do
#       --condition 1-- ^^ --condition 2-

#  If variable "$remaining" is not zero length
#+      AND (-a)
#+ variable "$retry" is greater-than zero
#+ then
#+ the [ expresion-within-condition-brackets ] returns success (0)
#+ and the while-loop executes an iteration.
#  ==============================================================
#  Evaluate "condition 1" and "condition 2" ***before***
#+ ANDing them. Why? Because the AND (-a) has a lower precedence
#+ than the -n and -gt operators,
#+ and therefore gets evaluated *last*.

#################################################################

if [ -f /etc/sysconfig/i18n -a -z "${NOLOCALE:-}" ] ; then


# Again, separate the conditions:
if [ -f /etc/sysconfig/i18n -a -z "${NOLOCALE:-}" ] ; then
#    --condition 1--------- ^^ --condition 2-----

#  If file "/etc/sysconfig/i18n" exists
#+      AND (-a)
#+ variable $NOLOCALE is zero length
#+ then
#+ the [ test-expresion-within-condition-brackets ] returns success (0)
#+ and the commands following execute.
#
#  As before, the AND (-a) gets evaluated *last*
#+ because it has the lowest precedence of the operators within
#+ the test brackets.
#  ==============================================================
#  Note:
#  ${NOLOCALE:-} is a parameter expansion that seems redundant.
#  But, if $NOLOCALE has not been declared, it gets set to *null*,
#+ in effect declaring it.
#  This makes a difference in some contexts.</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3><p>To avoid confusion or error in a complex sequence of test
        operators, break up the sequence into bracketed sections.
      </p><pre class="programlisting">if [ "$v1" -gt "$v2"  -o  "$v1" -lt "$v2"  -a  -e "$filename" ]
# Unclear what's going on here...

if [[ "$v1" -gt "$v2" ]] || [[ "$v1" -lt "$v2" ]] &amp;&amp; [[ -e "$filename" ]]
# Much better -- the condition tests are grouped in logical sections.</pre><p>
      </p></div><div class="footnotes"><br><hr style="width:100; text-align:left;margin-left: 0"><div id="ftn.idm4290" class="footnote"><p><a href="#idm4290" class="para"><sup class="para">[40] </sup></a><em class="firstterm">Precedence</em>, in this context,
	    has approximately the same meaning as
	    <em class="firstterm">priority</em></p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch08s03.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch08.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="pt03.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">3. The Double-Parentheses Construct </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Part Part 3. Beyond the Basics</td></tr></table></div></body></html>
