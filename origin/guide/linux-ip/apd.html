<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Appendix D. IP Route Management</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="linux, ip, iproute2, ifconfig, firewall, ARP, NAT, route, routing, route selection, routing selection, network administration"><link rel="home" href="index.html" title="Guide to IP Layer Network Administration with Linux"><link rel="up" href="pt03.html" title="Part III. Appendices and Reference"><link rel="prev" href="apcs02.html" title="2. ip address"><link rel="next" href="apds01.html" title="1. route"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Appendix D. IP Route Management</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="apcs02.html">Prev</a> </td><th width="60%" align="center">Part III. Appendices and Reference</th><td width="20%" align="right"> <a accesskey="n" href="apds01.html">Next</a></td></tr></table><hr></div><div class="appendix"><div class="titlepage"><div><div><h2 class="title"><a name="tools-ip-routing"></a>Appendix D. IP Route Management</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="apds01.html">1. <span class="command"><strong>route</strong></span></a></span></dt><dd><dl><dt><span class="section"><a href="apds01.html#tools-route-show">1.1. Displaying the routing table with <span class="command"><strong>route</strong></span></a></span></dt><dt><span class="section"><a href="apds01.html#tools-route-output">1.2. Reading <span class="command"><strong>route</strong></span>'s output</a></span></dt><dt><span class="section"><a href="apds01.html#tools-route-show-cache">1.3. Using <span class="command"><strong>route</strong></span> to display the routing cache</a></span></dt><dt><span class="section"><a href="apds01.html#tools-route-add">1.4. Creating a static route with <span class="command"><strong>route add</strong></span></a></span></dt><dt><span class="section"><a href="apds01.html#tools-route-add-default">1.5. Creating a default route with <span class="command"><strong>route add default</strong></span></a></span></dt><dt><span class="section"><a href="apds01.html#tools-route-del">1.6. Removing routes with <span class="command"><strong>route del</strong></span></a></span></dt></dl></dd><dt><span class="section"><a href="apds02.html">2. <span class="command"><strong>ip route</strong></span></a></span></dt><dd><dl><dt><span class="section"><a href="apds02.html#tools-ip-route-show">2.1. Displaying a routing table with <span class="command"><strong>ip route
          show</strong></span></a></span></dt><dt><span class="section"><a href="apds02.html#tools-ip-route-show-cache">2.2. Displaying the routing cache with <span class="command"><strong>ip route
          show cache</strong></span></a></span></dt><dt><span class="section"><a href="apds02.html#tools-ip-route-add">2.3. Using <span class="command"><strong>ip route add</strong></span> to populate a routing
          table</a></span></dt><dt><span class="section"><a href="apds02.html#tools-ip-route-add-default">2.4. Adding a default route with <span class="command"><strong>ip route add
          default</strong></span></a></span></dt><dt><span class="section"><a href="apds02.html#tools-ip-route-add-nat">2.5. Setting up NAT with <span class="command"><strong>ip route add nat</strong></span></a></span></dt><dt><span class="section"><a href="apds02.html#tools-ip-route-del">2.6. Removing routes with <span class="command"><strong>ip route del</strong></span></a></span></dt><dt><span class="section"><a href="apds02.html#tools-ip-route-change">2.7. Altering existing routes with <span class="command"><strong>ip route
          change</strong></span></a></span></dt><dt><span class="section"><a href="apds02.html#tools-ip-route-get">2.8. Programmatically fetching route information with <span class="command"><strong>ip
          route get</strong></span></a></span></dt><dt><span class="section"><a href="apds02.html#tools-ip-route-flush">2.9. Clearing routing tables with <span class="command"><strong>ip route
          flush</strong></span></a></span></dt><dt><span class="section"><a href="apds02.html#tools-ip-route-flush-cache">2.10. <span class="command"><strong>ip route flush cache</strong></span></a></span></dt><dt><span class="section"><a href="apds02.html#tools-ip-route-summary">2.11. Summary of the use of <span class="command"><strong>ip route</strong></span></a></span></dt></dl></dd><dt><span class="section"><a href="apds03.html">3. <span class="command"><strong>ip rule</strong></span></a></span></dt><dd><dl><dt><span class="section"><a href="apds03.html#tools-ip-rule-intro">3.1. <span class="command"><strong>ip rule show</strong></span></a></span></dt><dt><span class="section"><a href="apds03.html#tools-ip-rule-show">3.2. Displaying the RPDB with <span class="command"><strong>ip rule show</strong></span></a></span></dt><dt><span class="section"><a href="apds03.html#tools-ip-rule-add">3.3. Adding a rule to the RPDB with <span class="command"><strong>ip rule
          add</strong></span></a></span></dt><dt><span class="section"><a href="apds03.html#tools-ip-rule-add-nat">3.4. <span class="command"><strong>ip rule add nat</strong></span></a></span></dt><dt><span class="section"><a href="apds03.html#tools-ip-rule-del">3.5. <span class="command"><strong>ip rule del</strong></span></a></span></dt></dl></dd></dl></div><p>
      Routing and understanding routing in an IP network is one of the
      fundamentals you will need to grasp the flexibility of IP networking,
      and services which run on IP networks.  It is not enough to address the
      machines and mix yourself a dirty martini.  You'll need to verify that
      the machine has a route to any network with which it needs to exchange
      IP packets.
    </p><p>
      One key element to remember when designing networks, viewing routing
      tables, debugging networking problems, and viewing network traffic on
      the wire is that IP routing is stateless
      <a href="#ftn.idm4600" class="footnote" name="idm4600"><sup class="footnote">[46]</sup></a>.
      This means that every time a new packet hits the routing stage, the
      router makes an independent decision about where to send this
      packet.
    </p><p>
      In this section, we'll look at the tools available to manipulate and
      view the routing table(s).  We'll start with the well known <a class="link" href="apds01.html" title="1. route"><span class="command"><strong>route</strong></span></a> command, and move
      on to the increasingly used <a class="link" href="apds02.html" title="2. ip route"><span class="command"><strong>ip
      route</strong></span></a> and <a class="link" href="apds03.html" title="3. ip rule"><span class="command"><strong>ip
      rule</strong></span></a> tools which are part of the
      <span class="command"><strong>iproute2</strong></span> package.
    </p><div class="footnotes"><br><hr style="width:100; text-align:left;margin-left: 0"><div id="ftn.idm4600" class="footnote"><p><a href="#idm4600" class="para"><sup class="para">[46] </sup></a>
          For those who have some doubt, netfilter provides a connection
          tracking mechanism for packets passing through a linux router.  This
          connection tracking, however, is independent of routing.  It is
          important to not conflate the packet filtering connection tracking
          statefulness with the statelessness of IP routing.  For an example
          of a complex networking setup where netfilter's statefulness and the
          statelessness of IP routing collide, see
          <a class="xref" href="ch10s04.html" title="4. Multiple Connections to the Internet">Section 4, &#8220;Multiple Connections to the Internet&#8221;</a>.
        </p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="apcs02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="pt03.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="apds01.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">2. <span class="command"><strong>ip address</strong></span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 1. <span class="command"><strong>route</strong></span></td></tr></table></div></body></html>
