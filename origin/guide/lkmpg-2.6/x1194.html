<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Flashing keyboard LEDs</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="The Linux Kernel Module Programming Guide"
HREF="index.html"><LINK
REL="UP"
TITLE="Replacing Printks"
HREF="c1159.html"><LINK
REL="PREVIOUS"
TITLE="Replacing printk"
HREF="x1161.html"><LINK
REL="NEXT"
TITLE="Scheduling Tasks"
HREF="c1209.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>The Linux Kernel Module Programming Guide</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x1161.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 10. Replacing Printks</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="c1209.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN1194"
>10.2. Flashing keyboard LEDs</A
></H1
><P
>In certain conditions, you may desire a simpler and more direct way to communicate to the external world.
	Flashing keyboard LEDs can be such a solution: It is an immediate way to attract attention or to display a status condition.
	Keyboard LEDs are present on every hardware, they are always visible, they do not need any setup, and their use is rather simple and 
	non-intrusive,  compared to writing to a tty or a file.</P
><P
>The following source code illustrates a minimal kernel module which, when loaded, starts blinking the keyboard LEDs until it is unloaded.</P
><DIV
CLASS="EXAMPLE"
><A
NAME="AEN1201"
></A
><P
><B
>Example 10-2. kbleds.c</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>&#62;</PRE
></FONT
></TD
></TR
></TABLE
></DIV
><P
>	If none of the examples in this chapter fit your debugging needs there might yet be some other tricks to try. Ever wondered what
	CONFIG_LL_DEBUG in <B
CLASS="COMMAND"
> make menuconfig </B
> is good for? If you activate that you get low level access to the serial port.
	While this might not sound very powerful by itself, you can patch <TT
CLASS="FILENAME"
>kernel/printk.c</TT
> or any other
	essential syscall to use printascii, thus makeing it possible to trace virtually everything what your code does over a
	serial line. If you find yourself porting the kernel to some new and former unsupported architecture this is usually
	amongst the first things that should be implemented. Logging over a netconsole might also be worth a try.
	</P
><P
>	While you have seen lots of stuff that can be used to aid debugging here, there are some things to be aware of.
	Debugging is almost always intrusive. Adding debug code can change the situation enough to make the bug seem to dissappear.
	Thus you should try to keep debug code to a minimum and make sure it does not show up in production code.
	</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x1161.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="c1209.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Replacing <CODE
CLASS="FUNCTION"
>printk</CODE
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c1159.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Scheduling Tasks</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>