<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>11. mycall.c</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Implementing a System Call on Linux 2.6 for i386"><link rel="up" href="index.html" title="Implementing a System Call on Linux 2.6 for i386"><link rel="prev" href="ar01s10.html" title="10. mycall"><link rel="next" href="ar01s12.html" title="12. Makefile"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11. mycall.c</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s10.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s12.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm100"></a>11. mycall.c</h2></div></div></div><p>Full path of the file - /usr/src/linux/mycall/mycall.c</p><p></p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Create a source file named "mycall.c" in dir "mycall". mycall.c will have the code for our system call. The definition of the system call in the source file would be asmlinkage long sys_mycall(...){...} . It should include the file linux/linkage.h So, the file "mycall.c" will look like:</p></li></ol></div><p></p><p>/*---Start of mycall.c----*/</p><p>#include&lt;linux/linkage.h&gt;</p><p></p><p>asmlinkage long sys_mycall(int i)</p><p>{</p><p>return i+10;</p><p>}</p><p>/*---End of mycall.c------*/</p><p></p><p>What is asmlinkage?</p><p>Asmlinkage is used to look for the arguments on the kernel stack.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s10.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s12.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">10. mycall </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 12. Makefile</td></tr></table></div></body></html>
