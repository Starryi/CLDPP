<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>6. The DocBook toolchain</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="DocBook Demystification HOWTO"><link rel="up" href="index.html" title="DocBook Demystification HOWTO"><link rel="prev" href="ar01s05.html" title="5. Other DTDs"><link rel="next" href="ar01s07.html" title="7. asciidoc"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6. The DocBook toolchain</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s05.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s07.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm128"></a>6. The DocBook toolchain</h2></div></div></div><p>The easiest way to format and render XML-DocBook documents is to
use the <span class="application">xmlto</span> toolchain.  This ships with
Red Hat; Debian users can get it with the command <span class="command"><strong>apt-get
install xmlto</strong></span>.</p><p>Normally, what you'll do to make XHTML from your
DocBook sources will look like this:</p><pre class="screen">
bash$ xmlto xhtml foo.xml
bash$ ls *.html
ar01s02.html ar01s03.html ar01s04.html index.html
</pre><p>In this example, you converted an XML-Docbook  document named 
<code class="filename">foo.xml</code> with three top-level sections into an
index page and two parts.  Making one big page is just as easy:</p><pre class="screen">
bash$ xmlto xhtml-nochunks foo.xml
bash$ ls *.html
foo.html
</pre><p>Finally, here is how you make PDF for printing:</p><pre class="screen">
bash$ dblatex foo.xml       # To make PDF
bash$ ls *.pdf
foo.pdf
</pre><p>Some older versions of <span class="command"><strong>xmlto</strong></span> may be 
more verbose, emitting noise like "Converting to XHTML" and so forth.</p><p>To turn your documents into HTML or PDF, you need an
engine that can apply the combination of DocBook DTD and 
a suitable stylesheet to your document.  Here is how the 
open-source tools for doing this fit together:</p><div class="mediaobject"><img src="figure2.png"><div class="caption"><p>Present-day XML-DocBook toolchain</p></div></div><p>Parsing your document and applying the stylesheet transformation
will be handled by one of three programs.  The most likely one is
<span class="application">xsltproc</span><a class="indexterm" name="idm150"></a>.  The other
possibilities are two Java programs,
<span class="application">Saxon</span><a class="indexterm" name="idm153"></a>
and
<span class="application">Xalan</span><a class="indexterm" name="idm156"></a>,</p><p>It is relatively easy to generate high-quality XHTML from
DocBook; the fact that XHTML is simply another XML DTD helps a lot.
Translation to HTML is done by applying a rather simple stylesheet,
and that's the end of the story.  RTF is also simple to generate in
this way, and from XHTML or RTF it's easy to generate a flat ASCII
text approximation in a pinch.</p><p>The awkward case is print.  Generating high-quality printed
output (which means, in practice, Adobe's
PDF<a class="indexterm" name="idm160"></a> or Portable Document
Format, a packaged form of PostScript) is difficult.  Doing it right
requires algorithmically duplicating the delicate judgments of a human
typesetter moving from content to presentation level.</p><p>So, first, a stylesheet translates Docbook's structural markup
into another dialect of XML &#8212;
FO<a class="indexterm" name="idm163"></a>
(Formatting Objects).  FO markup is very much presentation-level; you
can think of it as a sort of XML functional equivalent of troff.  It
has to be translated to Postscript for packaging in a PDF.</p><p>In the toolchain shipped with most present-day Linux
distributions, this job is best handled by a program called
<span class="application">dblatex</span><a class="indexterm" name="idm167"></a>
(this obsoletes the older passivetex package that previous versions of
tis HOWTO described).</p><p><span class="command"><strong>dblatex</strong></span> translates the formatting objects
generated by <span class="command"><strong>xsltproc</strong></span> into Donald Knuth's TeX
language.  TeX was one of the earliest open-source projects, an old
but powerful presentation-level formatting language much beloved of
mathematicians (to whom it provides particulaly elaborate facilities
for describing mathematical notation).  TeX is also famously good at
basic typesetting tasks like kerning, line filling, and hyphenating.
TeX's output is then massaged into PDF.</p><p>If you think this bucket chain of XML to Tex macros to
PDF sounds like an awkward kludge, you're right.  It clanks, it
wheezes, and it has ugly warts.  Fonts are a significant problem,
since XML and TeX and PDF have very different models of how fonts
work; also, handling internationalization and localization is a
nightmare. About the only thing this code path has going for it is
that it works.</p><p>The elegant way will be <a class="ulink" href="http://xmlgraphics.apache.org/fop/" target="_top">
FOP</a><a class="indexterm" name="idm175"></a>, a direct
FO-to-Postscript translator being developed by the Apache project.
With FOP, the internationalization problem is, if not solved, at least
well confined; XML tools handle Unicode all the way through to FOP.
Glyph to font mapping is also strictly FOP's problem.  The only
trouble with this approach is that it entirely doesn't work yet.  As
of October 2010 FOP is at 1.0 and usable, but with rough edges and
missing features. I recommed dblatex for production use.</p><p>Here is what the FOP toolchain looks like:</p><div class="mediaobject"><img src="figure3.png"><div class="caption"><p>Future XML-DocBook toolchain with FOP.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s05.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s07.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">5. Other DTDs </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 7. asciidoc</td></tr></table></div></body></html>
