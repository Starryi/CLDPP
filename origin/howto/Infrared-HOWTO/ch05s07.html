<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>7. IrDA Network Neighborhood</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="laptop, notebook, pda, handheld, computer, mobile, linux, irda, remote"><link rel="home" href="index.html" title="Linux Infrared HOWTO"><link rel="up" href="ch05.html" title="Chapter 5. Advanced Topics"><link rel="prev" href="ch05s06.html" title="6. Beyond IrDA"><link rel="next" href="ch05s08.html" title="8. Linux/IrDA and APM"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">7. IrDA Network Neighborhood</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch05s06.html">Prev</a> </td><th width="60%" align="center">Chapter 5. Advanced Topics</th><td width="20%" align="right"> <a accesskey="n" href="ch05s08.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="infrared-howto-s-network-neighborhood"></a>7. IrDA Network Neighborhood</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm1490"></a>7.1. Laptop-Printer-PDA</h3></div></div></div><p>
   You can take a little peek at 
   <a class="ulink" href="http://irda.sourceforge.net" target="_top">Drag-n-drop stuff</a>
   , so you will be able to drop files to your PDA (uses IrOBEX) or
   drop files to your printer (uses IrLPT) etc.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm1494"></a>7.2. Bridging/Routing</h3></div></div></div><p>
   James wrote: " ... there is a much better way of doing the bridging
   which is routing. This is entirely user land and requires no kernel
   patches.
   But the IrLAN protocol is no longer maintained
   by the Linux/IrDA core team.
</p><p>
   It's in two parts (you may only need one your milage may vary...) the
   first called irdaipcfg does the following:
</p><p>
   1) First part is executed as irdaipcfg ifeth ifirlan daemonizes, then
   looks for ARP packets on ifirlan, checks that the arp was not
   generated by the machine on which it is running. The arp contains the
   ip address of the machine on the other end of the irlan (it was
   generated by the gratuatous arp in the irlan code). The program then
   sets up a host route to this ip address via ifirlan, adds a proxy arp
   to ifeth for it and generates a gratuatous arp on ifeth. It writes the
   ip address of the client in /var/run/host.ifirlan so you can easily
   undo all of this from a script.
</p><p>
   2) Second part is executed as gratarp ifirlan. Sometimes the
   gratuatous arp seems to get lost in the pipe work, gratarp daemonizes
   and spits out a whole stream of the things...
</p><p>
   I use them as follows: (you can use them to do whatever you like)
</p><p>
   On my host (the machine bolted to my local net) irlanx is brought up
   as 10.192.0.1 with a netmask of 255.255.255.255 and a broadcast of
   10.192.0.1 by my ifup script from /etc/irda/network by irattach.
   /etc/irda/network then runs irdaipcfg eth0 irlanx and this does the
   routing.
</p><p>
   From /etc/irda/network

</p><pre class="programlisting">
"start")
    echo 1 &gt;/proc/sys/net/ipv4/conf/all/forwarding
    ./ifup ifcfg-${device}
    /sbin/irdaipcfg ${localnet} ${device}
    ;;
"stop")
    host=`cat /var/run/host.${device}`
    if [ .$host != . ]; then
      /sbin/arp -d ${host} dev ${localnet}
      /sbin/route delete ${host} dev ${device}
    fi
    ./ifdown ifcfg-${device}
    /sbin/ifconfig ${device} down
    ;;
</pre><p>

   on the client I set up IrLAN to use an address on my normal subnet
   10.32.32.51 but with netmask 255.255.255.255 (not my usual netmask) I
   have some static routes which are host 10.192.0.1 dev irlan, and net
   default gw 10.192.0.1 dev irlan. I run gratarp from the
   /etc/irda/network, and I can wander arround my house and not lose
   telnet and ssh sessions ..."
   
   
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm1504"></a>7.3. IPv6</h3></div></div></div><p>
   As far as I know IPv6 has neighbor discovery mechanism, but I don't have
   information about Linux/IrDA used with IPv6. Please see the mailing
   list archive for a discussion of this topic under the subject
   :"patch-2.2.7-ac1-irda4".




</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm1507"></a>7.4. DHCP</h3></div></div></div><p>
   I have got reports that it is possible to use dhcpcd with IrLAN.
   Please use latest DHCP software.
   But currently the IrLAN protocol is no longer maintained
   by the Linux/IrDA core team.
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch05s06.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch05.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch05s08.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">6. Beyond IrDA </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 8. Linux/IrDA and APM</td></tr></table></div></body></html>
