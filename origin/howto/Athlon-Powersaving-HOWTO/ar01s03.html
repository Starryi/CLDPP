<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>3. What Else?</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Athlon Powersaving HOWTO"><link rel="up" href="index.html" title="Athlon Powersaving HOWTO"><link rel="prev" href="ar01s02.html" title="2. The Different Approaches"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3. What Else?</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s02.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> </td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="else"></a>3. What Else?</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="testing"></a>3.1. How to test whether it works</h3></div></div></div><p>
     Ok ... you use one of the described powersaving possibilitys and you want to verify, whether
     it works. Here are two ways to check it:
  </p><p>
     If you have temperature controlled Fan on your CPU-Heatsink, you could check for the noise level of the Fan to see whether it works or not. After a few idle minutes you give the CPU somthing to do.
  </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3><div class="procedure"><a name="idm263"></a><p class="title"><b>Procedure 2. I normaly do it like this:</b></p><ol class="procedure" type="1"><li class="step"><p>
        get superuser (root)
      </p></li><li class="step"><p>
       <span class="command"><strong>cd /usr/src/linux</strong></span>
      </p></li><li class="step"><p>
         and give the computer something to do: <span class="command"><strong>while true; do make clean; make bzImage; done</strong></span>
      </p></li></ol></div></div><p>
  After about 20 or 30 seconds you should notice that the noise of the fan is getting louder while the fan is getting faster. Don't forget to end the while-loop after some time ( a few minutes) with STRG-C.
  </p><p>
     The same procedure as above works also with a monitoring program for the cpu-temperature (like <a class="ulink" href="http://secure.netroedge.com/~lm78/" target="_top">lm-sensors</a>, <a class="ulink" href="http://www.nt.phys.kyushu-u.ac.jp/shimizu/download/download.html" target="_top">xmbmon</a> and <a class="ulink" href="http://www.tinet.org/~com.ea/rtsensors/" target="_top">rtsensors</a>).
  </p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="bugs"></a>3.2. Known Bugs/Problems</h3></div></div></div><p>There are two known bugs in the Athlon/Duron processor. This is number 
  11 and number 14 in the <em class="citetitle">AMD Athlon Processor Revision Guide</em>. It looks like the Athlon XP is significantly less often affected by these bugs. So if you have an Athlon XP you are on the lucky side (like me).</p><p>There could be following problems (caused by the bugs):
  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>skips during sound playback</p></li><li class="listitem"><p>skips and slowdown during video playback</p></li><li class="listitem"><p>slowdown of the ultra-DMA harddisk transfers</p></li><li class="listitem"><p>system hangs</p></li><li class="listitem"><p>USB problems</p></li><li class="listitem"><p>someone reported a high cheeping noise</p></li></ul></div><p>
  </p><p>Sometimes a BIOS-update will help (it exists as a workaround for 
  bug 11, which could be done by the BIOS). But as far as I know there are 
  only a few boards out there which have this workaround in the BIOS.</p><p>For the Asus A7V133-C, it is known that the BIOS-option <code class="option">PCI master read caching</code> will solve most problems when it is enabled. So look
  at your BIOS to see whether it has such functionality.</p><p>It is also known that on some boards, the BIOS option <code class="option">Delayed Transaction</code> solves some of the problems. You may want to give this option a try too.</p><p>WARNING:  On boards with KT133A, this could enable the famous VIA-Southbridge bug!</p><p>From a Newsnet post, regarding Asus A7V:
  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>without delayed transaction: sound-skips and TV-skips</p></li><li class="listitem"><p>with delayed transaction: no sound skips and only slight TV problems</p></li><li class="listitem"><p>with delayed transcation and master read caching: nearly no TV problems and no sound skips at all</p></li></ul></div><p>
  </p><p>There are other causes for problems:
  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>the PSU is not strong enough to handle the fluctuations in the power consumption of the processor/motherboard</p></li><li class="listitem"><p>some motherboard voltage-regulators could have the same problems like the PSU ;)</p></li><li class="listitem"><p>you have a K7S5A (as far as I know, this board could be really wierd when power-saving is enabled)</p></li></ul></div><p>
  </p><p>
     If you have minor problems with power-saving enabled, and nevertheless want to use 
     power-saving, you can enable the power-saving by default, and turn it off if you
     want to playback music, watch TV, ...
  </p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="fix"></a>3.3. Fix for sound skips and other problems</h3></div></div></div><p>Thank you to Michael Hamilton for submitting me the idea how it works.</p><p>The working of this Fix was confirmed by two People, so it looks like it works, but it may not work for everyone. Please feel free to submit further experiences!</p><p>Lets go: It looks like at least the sound skips are curable by maximizing the pci latency timer of the device.</p><p>First you have to find the "pci-address" of your Soundcard. This could be done with <span class="command"><strong>lspci</strong></span>. You have to look for something like "Multimedia audio controller" or "AudioPCI". Take the "pci-address" of the device (looks like something like that: 01:06.0 -&gt; it stands for: bus:slot.function) and maximize the latency timer for it. This is done by setpci:</p><p><span class="command"><strong>setpci -v -s "pci-address" latency_timer=ff</strong></span></p><p>For additional Information on the Latency Timer you could look <a class="ulink" href="http://www-106.ibm.com/developerworks/linux/library/l-hw2.html" target="_top">here.</a></p><p>Maybe this works also for other problems like USB-Problems and Harddisk-Transfer-Slowdowns, but this hasn't been tested for now. Feel free to test it (but don't blame me, if it doesn't work or makes everything worse) and report whether it works. The problem is, that i have none of this problems and so can't test this by myself.</p><p>If it works, you have to perform this setpci command at every startup/reboot of the Computer. So it would be wise to put it in one of the init-scripts (after the driver module is loaded!).</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="viafix"></a>3.4. Another Fix for sound skips and other problems (on some Via-Chipsets)</h3></div></div></div><p>Thank you to Wijatmoko Prayitno for submitting this!</p><p>The working of this Fix was confirmed for KT266, KT/KM333 and KT/KM400 Chipsets. It may also work for other Via-Chipsets. Please report if it works on other Via-Chipsets !</p><p>This is quite easy and works like the Commandline-Hack for enabling the Powersaving:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Soundfix on KT/KM333 and KT/KM400 Chipsets:</span></dt><dd><p>
              enable: <span class="command"><strong>setpci -v -H1 -s 0:0.0 70=$(printf %x $((0x$(setpci -H1 -s 0:0.0 70) | 0x08)))</strong></span>
              </p><p>
              disable: <span class="command"><strong>setpci -v -H1 -s 0:0.0 70=$(printf %x $((0x$(setpci -H1 -s 0:0.0 70) &amp; 0xf7)))</strong></span>
              </p></dd></dl></div><p>If it works, you have to perform this setpci command at every startup/reboot of the Computer. So it would be wise to put it in one of the init-scripts (after the driver module is loaded!).</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="todo"></a>3.5. ToDo</h3></div></div></div><p>Adding more chipsets and more informations to this document.</p><p>Adding some Informations on the Powersaving System of the Athlon64 and Opteron CPUs.</p><p>Adding some Informations on Notebooks and Power-Saving.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="translations"></a>3.6. Translations</h3></div></div></div><p>
     Translations into different languages also exist. At the moment, some of
     them are not up to date.
  </p><p><a class="ulink" href="http://tldp.fsf.hu/HOWTO/Athlon-Powersaving-HOWTO-hu/index.html" target="_top">
  Hungarian</a>by Zsolt Mocza</p><p><a class="ulink" href="http://perso.wanadoo.es/cmayo/docs/Athlon-Powersaving-HOWTO-es.html" target="_top">
  Spanish</a> by Carlos Mayo (very out-dated)</p><p><a class="ulink" href="http://www.gigantefotos.com.br/sl/pt_BR_Athlon_Powersaving_HOWTO.html" target="_top">
  brasilian Portuguese/Portuguese</a> by Bruno Buys</p><p><a class="ulink" href="http://www.daniel.nofftz.net/linux/Athlon-Powersaving-HOWTO-fr.html" target="_top">
  French</a> by Mathieu Pillard (very out-dated)</p><p><a class="ulink" href="http://www.daniel.nofftz.net/linux/Athlon-Powersaving-HOWTO-it.html" target="_top">
  Italian</a> by Maurizio Fantino (very out-dated)</p><p><a class="ulink" href="http://www.linuxwiki.de/AMDPowerSaving" target="_top">
  German (only parts)</a> by Fabian Mohren</p><p><a class="ulink" href="http://www.linux.or.jp/JF/JFdocs/Athlon-Powersaving-HOWTO/index.html" target="_top">Japanese</a> by Seiji Kaneko</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s02.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> </td></tr><tr><td width="40%" align="left" valign="top">2. The Different Approaches </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> </td></tr></table></div></body></html>
