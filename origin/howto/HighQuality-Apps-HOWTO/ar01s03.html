<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>3. The Four Universal Parts of Any Software</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Designing Integrated High Quality Linux Applications"><link rel="up" href="index.html" title="Designing Integrated High Quality Linux Applications"><link rel="prev" href="ar01s02.html" title="2. User Friendly: Guaranteed Success"><link rel="next" href="ar01s04.html" title="4. Linux Directory Hierarchy: Oriented to the Software Parts"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3. The Four Universal Parts of Any Software</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s02.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s04.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="software"></a>3. The Four Universal Parts of Any Software</h2></div></div></div><p>The file set of any Application Software, graphical, server-side, commercial, open/free, monolithic etc, has allways four universal parts:</p><a name="software.body"></a><h3><a name="idm181"></a>1<sup>st</sup> :: The Software on its own: the body</h3><p>The executables, libraries, static-data files, examples, manuals and documentation, etc. Regular users must have read-only access to these files. They are changed only when the system administrator makes an upgrade in this Software.</p><a name="software.soul"></a><h3><a name="idm185"></a>2<sup>nd</sup> :: Configuration Files: the soul</h3><p>These are files that define how the Software will run, how to use the <a class="link" href="ar01s03.html#software.content">Content</a>, <a class="link" href="ar01s07.html" title="7. Security: The Omnipresent Concept">security</a>, performance etc. Without them, the <a class="link" href="ar01s03.html#software.body">Software on its own</a> is usually useless.</p><p>Depending on your Software, specific privileged users may change these files, to make the Software behave as they want.</p><p>It is important to provide documentation about the configuration files.</p><a name="software.content"></a><h3><a name="idm194"></a>3<sup>rd</sup> :: Content</h3><p>Is what receives all the user attention. Is what the user delegated to be managed by your Product. Is what makes a user throw away your product and use the competitors', if it gets damaged.</p><p>Are the tables of a database system, the documents for a text editor, the images and HTML pages of a web-server, the servlets and EJBs of an Application Server, etc.</p><a name="software.logs"></a><h3><a name="idm199"></a>4<sup>th</sup> :: Logs, Dumps etc</h3><p>Server Software use to generate access logs, trace files problem determination, temporary files etc. Other types of softwares also use this files, but it is less common.</p><p>It is the last class of file, but many times they are the most problem generator for a system administrator, because their volume can surpass even the content size. Due this fact, it is important for you to think in some methodology or facility for this issue, while you are in design time.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="software.example"></a>3.1. Practical Examples</h3></div></div></div><p>Let's see how universal is this concept analyzing some types of softwares:</p><div class="table"><a name="partstable"></a><p class="title"><b>Table 1. Universality of 4 Parts</b></p><div class="table-contents"><table class="table" summary="Universality of 4 Parts" width="100%" border="1"><colgroup><col><col><col><col><col></colgroup><thead><tr><th> </th><th><a class="link" href="ar01s03.html#software.body">Software on its Own</a></th><th><a class="link" href="ar01s03.html#software.soul">Configurations</a></th><th><a class="link" href="ar01s03.html#software.content">Content</a></th><th><a class="link" href="ar01s03.html#software.logs">Logs, Dumps etc</a></th></tr></thead><tbody><tr><td><span class="strong"><strong>Data Base Server</strong></span></td><td>Binaries, libraries, documentations.</td><td>Files that define the directory of the data files. For this type of Software, the remaining configurations usually are in special tables inside the database.</td><td>Table files, index files, etc. This software use to have whole trees under the same directory. And many times they need several filesystems to guarantee performance. Their local in the system is defined by they <a class="link" href="ar01s03.html#software.soul">Configurations</a>.</td><td>For DBs, there are the backup, generated in a daily basis. And the logs are used by the <acronym class="acronym">DBA</acronym> to define indexing strategy. His local on the system is also defined by the <a class="link" href="ar01s03.html#software.soul">Configurations</a>.</td></tr><tr><td><span class="strong"><strong>Text Processor</strong></span></td><td>The same, templates, modular file format filters, etc</td><td>As a user-oriented Software, its configurations must be put in each user's <code class="envar">$HOME</code> directory, and are files that defines standard fonts and tabulation, etc.</td><td>The documents generated by the user, and they go some place in his <code class="envar">$HOME</code></td><td>They show as temporary files that can be huge. User can define their location with a user-friendly dialog (that saves it in some <a class="link" href="ar01s03.html#software.soul">Configuration</a> file)</td></tr><tr><td><span class="strong"><strong>MP3 generator</strong></span></td><td>Same, audio modular filters</td><td>Each user has a configuration file in his <code class="envar">$HOME</code>, and contains bitrate preferences etc</td><td>Similar to Text Editor</td><td>Similar to Text Editor</td></tr><tr><td><span class="strong"><strong>Web Server</strong></span></td><td>Similar to Data Base</td><td>Files that define the <a class="link" href="ar01s03.html#software.content">Content</a> directory, network and performance parameters, <a class="link" href="ar01s07.html" title="7. Security: The Omnipresent Concept">security</a>, etc</td><td>Directories where the webmaster deposits his creativity. Again defined by the <a class="link" href="ar01s03.html#software.soul">Configurations</a></td><td>Preciouses access logs, vital for Marketing Intelligence, that are generated in a location and format defined by <a class="link" href="ar01s03.html#software.soul">Configurations</a></td></tr><tr><td><span class="strong"><strong>e-Mail Server</strong></span></td><td>Similar to Database and Web-Server</td><td>Files that define how to access user database, mail routing rules, etc</td><td>The preciouses users mail boxes. Again defined by the <a class="link" href="ar01s03.html#software.soul">Configurations</a></td><td>Mail transfer log, virus detection log, etc. Again defined by the <a class="link" href="ar01s03.html#software.soul">Configurations</a></td></tr></tbody></table></div></div><br class="table-break"><p>Pay attention that the <a class="link" href="ar01s03.html#software.body">Software on its Own</a> contains all your product <span class="emphasis"><em>business logic</em></span>, which could be useless if you hadn't a <a class="link" href="ar01s03.html#software.soul">Configuration</a> to define how to work with a <a class="link" href="ar01s03.html#software.content">data bundle</a>, provided by the user. So, <a class="link" href="ar01s03.html#software.soul">Configurations</a> are what connects your product to the user.</p><p>We can use a metaphor about a Sculptor (<a class="link" href="ar01s03.html#software.body">business logic</a>), that needs Bronze (<a class="link" href="ar01s03.html#software.content">content</a>) and a Theme or Inspiration (<a class="link" href="ar01s03.html#software.soul">configuration</a>) from a Mecenas (<a class="link" href="ar01s02.html" title="2. User Friendly: Guaranteed Success">user</a>), to produce a beautiful work (<a class="link" href="ar01s03.html#software.content">content</a>). He make annotations in his Journal (<a class="link" href="ar01s03.html#software.logs">logs</a>) about his day-by-day activities, to report to his Mecenas (<a class="link" href="ar01s02.html" title="2. User Friendly: Guaranteed Success">user</a>).</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="separe"></a>3.2. The Importance of Clear Separation Between Four Parts</h3></div></div></div><p>OK, so let's be more practical. The fact is, if we correctly use the <a class="link" href="ar01s03.html" title="3. The Four Universal Parts of Any Software">universal parts concept</a>, we greatly improve the quality of our Product. We'll do that simply separating, encapsulating, each one of these parts in different system directories (having only different files for each part is not sufficient). There is a standard called <a class="ulink" href="http://www.pathname.com/fhs/" target="_top">FHS</a> that defines the Linux directories for each part, and we'll discuss it later in <a class="xref" href="ar01s04.html" title="4. Linux Directory Hierarchy: Oriented to the Software Parts">Section 4, &#8220;Linux Directory Hierarchy: Oriented to the Software Parts&#8221;</a>.</p><p>By now let's see the value of this separation to the user:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>He gains a clear vision about where is each part, specially his <a class="link" href="ar01s03.html#software.soul">Configurations</a> and <a class="link" href="ar01s03.html#software.content">Content</a>, and he feels your Product as something completely under control. The clareza brings ease of use, security and confidence in your Product. And in practice it permits him manipulate each part independently</p></li><li class="listitem"><p>It is clear now that, for instance, when backing up, user action is needed only for <a class="link" href="ar01s03.html#software.soul">Configurations</a> and <a class="link" href="ar01s03.html#software.content">Content</a> (the puritans will also backup some <a class="link" href="ar01s03.html#software.logs">logs</a>). The user don't have to care about <a class="link" href="ar01s03.html#software.body">Software on its Own</a>, because it is safe, original, on the product CD, in his shelf.</p></li><li class="listitem"><p>For upgrades, the new package will overwrite only the <a class="link" href="ar01s03.html#software.body">business logic</a>, leaving intact the user's precious <a class="link" href="ar01s03.html#software.soul">Configurations</a> and <a class="link" href="ar01s03.html#software.content">Content</a>. Here is very important to keep old content and configuration compatible, or to provide some tools help migration of data</p></li><li class="listitem"><p>The logs being kept in a separate filesystem (obviously suggested in your documentation), avoids that their exaggerated growth interfere with the <a class="link" href="ar01s03.html#software.content">Content</a>, or with the stability of the whole system</p></li><li class="listitem"><p>If your Software follows some directory standards, the user don't have to reconfigure his system or environment to use it. He will simply <span class="strong"><strong>Install-and-Use</strong></span>.</p></li></ol></div><p>Let's make some exercise with separation using as example a system called <acronym class="acronym">MySoftware</acronym>, in which the <a class="link" href="ar01s03.html#software.body">business logic</a> is in <a class="xref" href="ar01s03.html#example.body" title="Example 1. A Shell program referring an external configuration file">Example 1, &#8220;A Shell program referring an external configuration file&#8221;</a> and the configuration is in <a class="xref" href="ar01s03.html#example.soul" title="Example 2. File containing only the configurations for MySoftware">Example 2, &#8220;File containing only the configurations for <acronym class="acronym">MySoftware</acronym>&#8221;</a>.</p><div class="example"><a name="example.body"></a><p class="title"><b>Example 1. A Shell program referring an external configuration file</b></p><div class="example-contents"><pre class="programlisting">
#!/bin/sh

#############################################################################
##
## /usr/bin/MySoftware
##
## Business logic of MyProgram system.
## Do not change nothing in this file. All configuration can be
## made on /etc/MySoftware.conf
##
## We'll not support any modifications made here.
##

# Default configuration file
CONF=/etc/MySoftware.conf	<a name="ex.body.const.c1"></a><span><img src="images/callouts/1.png" alt="1" border="0"></span>

# Minimal content directories
MIN_CONTENT_PATH=/var/www:/var/MySoftware/www	<a name="ex.body.const.c2"></a><span><img src="images/callouts/2.png" alt="2" border="0"></span>

if [ -r "$CONF"]; then
        . "$CONF"	<a name="ex.body.conf"></a><span><img src="images/callouts/3.png" alt="3" border="0"></span>
fi

# All the content I'll serve are the "minimal" plus the ones provided
# by the user in the configuration file $CONF
CONTENT_PATH=$MIN_CONTENT_PATH:$CONF_CONTENT_PATH	<a name="ex.body.merge"></a><span><img src="images/callouts/4.png" alt="4" border="0"></span>

.
.
.
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#ex.body.const.c1"><span><img src="images/callouts/1.png" alt="1" border="0"></span></a> </p></td><td valign="top" align="left"><p>Definition of the configuration file name.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#ex.body.const.c2"><span><img src="images/callouts/2.png" alt="2" border="0"></span></a> </p></td><td valign="top" align="left"><p>Definition of some static parameters.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#ex.body.conf"><span><img src="images/callouts/3.png" alt="3" border="0"></span></a> </p></td><td valign="top" align="left"><p>The configuration is readed from an external file, if exists.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#ex.body.merge"><span><img src="images/callouts/4.png" alt="4" border="0"></span></a> </p></td><td valign="top" align="left"><p>After reading the configuration file, all content directories -- user's + product's -- goes together in the <code class="envar">$CONTENT_PATH</code>, that will be used from now on.</p></td></tr></table></div></div></div><br class="example-break"><div class="example"><a name="example.soul"></a><p class="title"><b>Example 2. File containing only the configurations for <acronym class="acronym">MySoftware</acronym></b></p><div class="example-contents"><pre class="programlisting">
#############################################################################
##
## /etc/MySoftware.conf
##
## Configuration parameters for MySoftware.
## Change as much as you want.
##

# Content directory.
# A ':' separated list of directories for your content.
# The directories /var/www and /var/MySofware are already there, so
# include here your special directories, if any.
CONF_CONTENT_PATH=/var/NewInstance:/var/NewInstance2	<a name="ex.soul.c1"></a><span><img src="images/callouts/1.png" alt="1" border="0"></span>

# Your e-mail address, for notifications.
EMAIL=john@mycompany.com	<a name="ex.soul.c2"></a><span><img src="images/callouts/2.png" alt="2" border="0"></span>

# Logs directory
LOG_DIR=/var/log/myInstance	<a name="ex.soul.c3"></a><span><img src="images/callouts/3.png" alt="3" border="0"></span>
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#ex.soul.c1"><span><img src="images/callouts/1.png" alt="1" border="0"></span></a> <a href="#ex.soul.c2"><span><img src="images/callouts/2.png" alt="2" border="0"></span></a> <a href="#ex.soul.c3"><span><img src="images/callouts/3.png" alt="3" border="0"></span></a> </p></td><td valign="top" align="left"><p>These are user defined parameters.</p></td></tr></table></div></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="bodysouls"></a>3.3. One Body, Many Souls</h3></div></div></div><p>When I was a system administrator for IBM e-business Hosting Services, I was fascinated by <a class="ulink" href="http://httpd.apache.org/" target="_top">Apache</a>'s flexibility letting us do things like this:</p><pre class="screen">
<code class="prompt">bash# </code><span class="command"><strong>/usr/sbin/httpd &amp;</strong></span>
<code class="prompt">bash# </code><span class="command"><strong>/usr/sbin/httpd -f /etc/httpd/dom1.com.br.conf &amp;</strong></span>
<code class="prompt">bash# </code><span class="command"><strong>/usr/sbin/httpd -f /etc/httpd/dom2.com.br.conf &amp;</strong></span>
<code class="prompt">bash# </code><span class="command"><strong>/usr/sbin/httpd -f /etc/httpd/dom3.com.br.conf &amp;</strong></span></pre><p>If we don't pass any parameter (like the first example), Apache loads its default, hardcoded configuration file from <code class="filename">/etc/httpd/conf/httpd.conf</code>. We built other configs, one for each customer, with a completely different structure, IP address, loaded modules, content directory, passwords, domains, log strategy etc.</p><p>This same concept is used by a text editor of a multiuser desktop (like Linux). When the code is loaded, it looks for a configuration file on the user's <code class="envar">$HOME</code>, and depending who invoked him (user A or B), it will appear differently because each user has its own personal configuration.</p><p>The obvious conclusion is that the Software's body (<a class="link" href="ar01s03.html#software.body">business logic</a>) is pure e completely oriented by his manipulator's spirit (<a class="link" href="ar01s03.html#software.soul">configuration</a>). But the competitive advantage lays on how easy we switch from one <a class="link" href="ar01s03.html#software.soul">spirit</a> to another, like in Apache's example. It is very healthy to promote it to your user. You'll be letting him create intimacy, reliability, confort with your Product.</p><p>We used this approach with many different Softwares in that e-business Hosting time, and it was extremely usefull for maintenance etc. In a version migration we had total control over where were <a class="link" href="ar01s03.html" title="3. The Four Universal Parts of Any Software">each of its parts</a>, and upgraded and downgraded Software with no waste of time, with obvious success.</p><p>But there were some Products that refused to work this way. They had so many hardcoded parameters, that we couldn't see what divided the <a class="link" href="ar01s03.html#software.body">body</a> from their <a class="link" href="ar01s03.html#software.soul">spirit</a> (or other parts). These Softwares were marked as <span class="emphasis"><em>bad guys</em></span> and discarded/replaced as soon as possible.</p><p>We concluded that the <span class="emphasis"><em>good guys</em></span> Softwares were intuitively blessed by their developer's <a class="link" href="ar01s03.html" title="3. The Four Universal Parts of Any Software">four parts vision</a>. And they made our life easyer. In fact, in that time we formulated this <a class="link" href="ar01s03.html" title="3. The Four Universal Parts of Any Software">theory</a>, that continues to prove itself.</p><p>Do you want to deploy <span class="emphasis"><em>bad guy</em></span> or <span class="emphasis"><em>good guy</em></span> Software?</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s02.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">2. User Friendly: Guaranteed Success </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 4. Linux Directory Hierarchy: Oriented to the Software Parts</td></tr></table></div></body></html>
