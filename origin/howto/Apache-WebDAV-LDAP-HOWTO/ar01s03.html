<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>3. Installation</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Apache based WebDAV Server with LDAP and SSL"><link rel="up" href="index.html" title="Apache based WebDAV Server with LDAP and SSL"><link rel="prev" href="ar01s02.html" title="2. Requirements"><link rel="next" href="ar01s04.html" title="4. Configuring and Setting up the WebDAV services"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3. Installation</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s02.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s04.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm153"></a>3. Installation</h2></div></div></div><p>First we hve take care of the few pre-requisites, and then we will get into the main installtion.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm156"></a>3.1. Pre-requisites</h3></div></div></div><p>The application server as we plan to install, requires the SSL libraries and LDAP libraries. SSL engine is also required for managing the SSL certs for Apache 2.x</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm159"></a>3.1.1. iPlanet LDAP SDK</h4></div></div></div><p>Become root by using the su command:</p><pre class="screen"><span class="command"><strong>$ su -</strong></span></pre><p>Create the <code class="filename">/usr/local/iplanet-ldap-sdk.5</code> directory. Copy the <code class="filename">ldapcsdk5.08-Linux2.2_x86_glibc_PTH_OPT.OBJ.tar.gz</code> form <code class="filename">/tmp/downloads</code> to <code class="filename">/usr/local/iplanet-ldap-sdk.5</code> directory.</p><pre class="screen">
<span class="command"><strong># mkdir /usr/local/iplanet-ldap-sdk.5</strong></span>
<span class="command"><strong># cp /tmp/downloads/ldapcsdk5.08-Linux2.2_x86_glibc_PTH_OPT.OBJ.tar /usr/local/iplanet-ldap-sdk.5</strong></span>
<span class="command"><strong># cd /usr/local/iplanet-ldap-sdk.5</strong></span>
<span class="command"><strong># tar -xvf ldapcsdk5.08-Linux2.2_x86_glibc_PTH_OPT.OBJ.tar</strong></span>
</pre><p>Now you should have all the required iPlanet LDAP lib files in the correct directory</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm175"></a>3.1.2. OpenSSL Engine</h4></div></div></div><p>Next we need to install the OpenSSL Engine</p><p>OpenSSL is an open source implementation of the SSL/TLS protocol. It is required to create and manage SSL certificates on the webserver. The installion is also necessary for the lib files that will be used by the SSL module for apache.</p><p>Change to the directory where you placed the OpenSSL source code files</p><pre class="screen"> <span class="command"><strong># cd /tmp/download</strong></span>
<span class="command"><strong># gzip -d openssl.x.x.tar.gz</strong></span>
<span class="command"><strong># tar -xvf openssl.x.x.tar</strong></span>
<span class="command"><strong># cd openssl.x.x</strong></span>
<span class="command"><strong># make</strong></span>
<span class="command"><strong># make test</strong></span>
<span class="command"><strong># make install</strong></span>
</pre><p>Upon successful completion of the <span class="command"><strong>make install</strong></span> the openssl binaries should reside in <code class="filename">/usr/local/ssl</code></p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm191"></a>3.2. mySQL</h3></div></div></div><p>Installaing mySQL is quite simple. The downloaded binaries have to be place in appropriate directory.</p><p>We start creating a user:group for mysql daemon, and copying the files to appropriate directories.</p><pre class="screen"> <span class="command"><strong># groupadd mysql</strong></span>
<span class="command"><strong># useradd -g mysql mysql</strong></span>
<span class="command"><strong># cd /usr/local</strong></span>
<span class="command"><strong># gunzip &lt; /path/to/mysql-VERSION-OS.tar.gz | tar xvf - </strong></span>
<span class="command"><strong># ln -s full-path-to-mysql-VERSION-OS mysql</strong></span>
</pre><p>Next run the install_db script, and change permission on the files</p><pre class="screen"> <span class="command"><strong># cd mysql</strong></span>
<span class="command"><strong># scripts/mysql_install_db</strong></span>
<span class="command"><strong># chown -R mysql .</strong></span>
</pre><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm206"></a>3.2.1. Starting mySQL</h4></div></div></div><p>Now start the mySQL server to verify the installation</p><pre class="screen"> <span class="command"><strong># bin/mysqld_safe --user=mysql &amp;</strong></span>
</pre><p>Verify mySQL daemon is running, by using the ps -ef command. You should see the following output:</p><pre class="screen"><span class="command"><strong># ps -ef | grep mysql</strong></span>
root      3237     1  0 May29 ?        00:00:00 /bin/sh bin/safe_mysqld
mysql     3256  3237  0 May29 ?        00:06:58 /usr/local/mysql/bin/mysqld --defaults-extra-file=/usr/local/mysql/data/my.cnf --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data --user=mysql --pid-file=/usr/local/mysql/data/downloa
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm214"></a>3.2.2. Stopping mySQL</h4></div></div></div><p>To stop the MySQL server, follow the instructions below</p><pre class="screen"><span class="command"><strong># cd /usr/local/mysql</strong></span>
<span class="command"><strong># ./bin/mysqladmin -u root -p shutdown</strong></span>
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm220"></a>3.2.3. Locating Data Directory</h4></div></div></div><p>mySQL deamon stores all the information in a direcory called "Data Directory". If you followed the installation instructions above, your Data Directory should be located under <code class="filename">/use/local/mysql/data</code>.</p><p>To locate where your Data Directory is located, use the <span class="command"><strong>mysqladmin</strong></span> utility as follows:</p><pre class="screen">
<span class="command"><strong># /usr/local/mysql/bin/mysqladmin variables -u root --password={your_password} | grep datadir</strong></span>
</pre></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm228"></a>3.3. Apache 2.0</h3></div></div></div><p>Start by setting some FLAGS for the compiler</p><pre class="screen"><span class="command"><strong># export LDFLAGS="-L/usr/local/iplanet-ldap-sdk.5/lib/ -R/usr/local/iplanet-ldap-sdk.5/lib/:/usr/local/lib"</strong></span>
<span class="command"><strong># export CPPFLAGS="-I/usr/local/iplanet-ldap-sdk.5/include"</strong></span>
</pre><p>Next UNTAR the apache 2.0 source files, and execute the <code class="filename">configure</code> script.</p><pre class="screen"><span class="command"><strong># cd /tmp/download</strong></span>
<span class="command"><strong># gzip -d httpd-2.0.46.tar.gz </strong></span>
<span class="command"><strong># tar -xvf httpd-2.0.46.tar</strong></span>
<span class="command"><strong># cd httpd-2.0.46</strong></span>
<span class="command"><strong>#./configure --enable-so  --with-ssl --enable-ssl  --enable-rewrite   --enable-dav</strong></span>
</pre><p>Next run the make command</p><pre class="screen"><span class="command"><strong># make</strong></span>
<span class="command"><strong># make install</strong></span>
</pre><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm246"></a>3.3.1. Starting Apache</h4></div></div></div><pre class="screen"><span class="command"><strong># /usr/local/apache2/bin/apachectl start</strong></span>
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="idm250"></a>3.3.2. Stopping Apache</h4></div></div></div><pre class="screen"><span class="command"><strong># /usr/local/apache2/bin/apachectl stop</strong></span>
</pre></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm254"></a>3.4. mod_auth_ldap</h3></div></div></div><p>Untar modauthldap_apache2.tar.gz</p><pre class="screen"><span class="command"><strong>cd /tmp/download</strong></span>
<span class="command"><strong># gzip -d modauthldap_apache2.tar.gz</strong></span>
<span class="command"><strong># tar -xvf modauthldap_apache2.tar</strong></span>
<span class="command"><strong># cd modauthldap_apache2</strong></span>
</pre><p>Now configure and install mod_auth_ldap</p><pre class="screen"><span class="command"><strong># ./configure --with-apxs=/usr/local/apache2/bin/apxs  --with-ldap-dir=/usr/local/iplanet-ldap-sdk.5/</strong></span>
<span class="command"><strong># make</strong></span>
<span class="command"><strong># make install</strong></span>
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm267"></a>3.5. CERT DB for LDAPS://</h3></div></div></div><p>You will also need to get the cert7.db and key7.db from <a class="ulink" href="http://www.xml-dev.com/xml/key3.db" target="_top">http://www.xml-dev.com/xml/key3.db</a> and <a class="ulink" href="http://www.xml-dev.com/xml/cert7.db" target="_top">http://www.xml-dev.com/xml/cert7.db</a> and place it in the <code class="filename">/usr/local/apache2/sslcert/</code>directory.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm273"></a>3.6. PHP</h3></div></div></div><p>Unzip the PHP Source Files</p><pre class="screen"><span class="command"><strong>gzip -d php-xxx.tar.gz</strong></span>
<span class="command"><strong>tar -xvf php-xxx.tar</strong></span>
</pre><p>Configure and run the make command</p><pre class="screen"><span class="command"><strong>cd php-xxx</strong></span>
<span class="command"><strong>./configure --with-mysql --with-apxs=/usr/local/apache2/bin/apxs</strong></span>
</pre><p>Compile the source code</p><pre class="screen"><span class="command"><strong># make </strong></span>
<span class="command"><strong># make install</strong></span>
</pre><p>Copy the php.ini file to the appropriate directory</p><pre class="screen"><span class="command"><strong>cp php.ini-dist /usr/local/lib/php.ini</strong></span>
</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s02.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">2. Requirements </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 4. Configuring and Setting up the
 WebDAV services</td></tr></table></div></body></html>
