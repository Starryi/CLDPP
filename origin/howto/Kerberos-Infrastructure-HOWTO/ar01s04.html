<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>4. Time Synchronization</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Kerberos Infrastructure HOWTO"><link rel="up" href="index.html" title="Kerberos Infrastructure HOWTO"><link rel="prev" href="ar01s03.html" title="3. Installing and Configuration"><link rel="next" href="ar01s05.html" title="5. Kerberos Server Replication"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4. Time Synchronization</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s03.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s05.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="time-sync"></a>4. Time Synchronization</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="time-sync-importance"></a>4.1. The Importance of Time Synchronization</h3></div></div></div><p>
Since the security of Kerberos authentication is in part based upon the time stamps of tickets, it is critical to have accurately set clocks on Kerberos servers. As we mentioned in the introduction to Kerberos, a short lifetime for tickets is used to prevent attackers from performing successful brute force attacks or replay attacks.
</p><p>
If you allow your clocks of your servers to drift, you will make your network vulnerable to such attacks.  Since clock synchronization is so important in the security of the Kerberos protocol, if clocks are not synchronized with in a reasonable window Kerberos will report fatal errors and refuse to function.  Clients attempting to authenticate from a machine with an inaccurate clock will be failed by the KDC in authentication attempts due to the time difference with the KDC's clock.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="intro-ntp"></a>4.2. Introduction to NTP</h3></div></div></div><p>
The Network Time Protocol (NTP) is available for the time synchronization of servers. A number of public NTP servers are available for synchronization.  NTP is capable of synchronizing client clocks within milliseconds on LANs, and tens of milliseconds over WANs. NTP servers are divided by stratum.  Primary NTP servers are classified as stratum 1. These public primary servers should not be used for synchronization of client machines due to the relatively small number of them. Public stratum 2 servers are available for client machine synchronization and synchronize their own clocks with the public stratum 1 servers. For our Kerberos servers, we'll set up NTP to query against three stratum two servers.  A maintained
list of public stratum two servers can be <a class="ulink" href="http://www.eecis.udel.edu/~mills/ntp/clock2b.html" target="_top">found here</a>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ntp-install"></a>4.3. NTP Installation and Configuration</h3></div></div></div><p>
In order to turn NTP on GNU/Linux, you must install the NTP package and edit the configuration filename.  By default, the NTP configuration filename is <code class="filename">/etc/ntp.conf</code>. The default values in the configuration are acceptable.  All that needs to be done is to add the servers we wish to use to synchronize our clocks.  Authentication is not necessary, but authentication can be enabled from additional security.  If you're using NTP servers on your LAN, you may wish to use authentication. Here is a sample <code class="filename"><a class="ulink" href="http://cryptnet.net/fdp/admin/kerby-infra/en/ntp.conf" target="_top">ntp.conf</a></code> filename from the Gnu University Dublin.
</p><p>
Finally we put a cron job in place to do the actual synchronization:
</p><pre class="screen">
30 * * * * /usr/sbin/ntpdate -s
</pre><p>
</p><p>
If our systems are behind a firewall we may need to provide use <span class="emphasis"><em>-su</em></span> rather than just <span class="emphasis"><em>-s</em></span>.  The <span class="emphasis"><em>-u</em></span> argument will direct ntpdate to use an unprivileged port for its outgoing connection to the stratum 2 time servers.
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s03.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s05.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">3. Installing and Configuration </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 5. Kerberos Server Replication</td></tr></table></div></body></html>
