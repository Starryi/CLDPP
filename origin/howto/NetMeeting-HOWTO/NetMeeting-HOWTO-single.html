<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Linux NETMEETING HOWTO</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"></HEAD
><BODY
CLASS="ARTICLE"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="ARTICLE"
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="TITLE"
><A
NAME="AEN2"
>Linux NETMEETING HOWTO</A
></H1
><H3
CLASS="AUTHOR"
><A
NAME="AEN4"
>Brent Baccala</A
></H3
><DIV
CLASS="AFFILIATION"
><DIV
CLASS="ADDRESS"
><P
CLASS="ADDRESS"
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:baccala@freesoft.org"
>baccala@freesoft.org</A
>&#62;</CODE
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P
></DIV
></DIV
><H3
CLASS="AUTHOR"
><A
NAME="AEN10"
>Martin Schiffers</A
></H3
><DIV
CLASS="AFFILIATION"
><DIV
CLASS="ADDRESS"
><P
CLASS="ADDRESS"
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:mschiffers@axsi.net"
>mschiffers@axsi.net</A
>&#62;</CODE
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P
></DIV
></DIV
><P
CLASS="OTHERCREDIT"
><B
>Mark F. Komarinski - </B
><SPAN
CLASS="CONTRIB"
>Conversion from HTML to DocBook 3.1</SPAN
></P
><DIV
CLASS="REVHISTORY"
><TABLE
WIDTH="100%"
BORDER="0"
><TR
><TH
ALIGN="LEFT"
VALIGN="TOP"
COLSPAN="3"
><B
>Revision History</B
></TH
></TR
><TR
><TD
ALIGN="LEFT"
>Revision v1.2</TD
><TD
ALIGN="LEFT"
>15 January 2002</TD
><TD
ALIGN="LEFT"
>Revised by: bwb</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Updated ndk-1.2; handles newer versions of openldap.
        Added pointers to mailing list</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Revision v1.1</TD
><TD
ALIGN="LEFT"
>31 March 2001</TD
><TD
ALIGN="LEFT"
>Revised by: bwb</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Updated ndk-1.1; handles accented European characters</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Revision v1.0</TD
><TD
ALIGN="LEFT"
>13 January 2001</TD
><TD
ALIGN="LEFT"
>Revised by: bwb</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Initial public release</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Revision v0.11</TD
><TD
ALIGN="LEFT"
>25 October 2000</TD
><TD
ALIGN="LEFT"
>Revised by: mfk</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Conversion to DocBook</TD
></TR
></TABLE
></DIV
><DIV
><DIV
CLASS="ABSTRACT"
><P
></P
><A
NAME="AEN42"
></A
><P
>      This document aims to describe how to make Microsoft NetMeeting
      interoperate with Linux.
    </P
><P
></P
></DIV
></DIV
><HR></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
>1. <A
HREF="#INTRODUCTION"
>Introduction</A
></DT
><DT
>2. <A
HREF="#OPENH323"
>OpenH323</A
></DT
><DD
><DL
><DT
>2.1. <A
HREF="#WHATISH323"
>What is it?</A
></DT
><DT
>2.2. <A
HREF="#WHYNEED"
>Why is it needed?</A
></DT
><DT
>2.3. <A
HREF="#WHERETOGET"
>Where to get it?</A
></DT
><DT
>2.4. <A
HREF="#INSTALL"
>Installation</A
></DT
><DT
>2.5. <A
HREF="#GATEKEEPERS"
>Gatekeepers</A
></DT
></DL
></DD
><DT
>3. <A
HREF="#NETMEETSERVER"
>NetMeeting directory kit</A
></DT
><DD
><DL
><DT
>3.1. <A
HREF="#WHATISNETMEET"
>What is it?</A
></DT
><DT
>3.2. <A
HREF="#WHYNEEDNETMEET"
>Why is it needed?</A
></DT
><DT
>3.3. <A
HREF="#HOWITWORKS"
>How it works</A
></DT
><DT
>3.4. <A
HREF="#WHERETOGETSOFTWARE"
>Where to get the software</A
></DT
><DT
>3.5. <A
HREF="#INSTALLSOFTWARE"
>Installation</A
></DT
><DT
>3.6. <A
HREF="#SECURITY"
>Server Security</A
></DT
><DT
>3.7. <A
HREF="#WINDOWS2000LDAP"
>LDAP issues with Windows 2000</A
></DT
><DT
>3.8. <A
HREF="#INTEROPERATION"
>Interoperation with other LDAP service</A
></DT
></DL
></DD
><DT
>4. <A
HREF="#USING"
>Using the Software</A
></DT
><DD
><DL
><DT
>4.1. <A
HREF="#DIRECTCONNECT"
>Direct Connection</A
></DT
><DT
>4.2. <A
HREF="#DIROPT"
>Directory Operation</A
></DT
><DT
>4.3. <A
HREF="#LNKFRMWEBPAGE"
>Linking From A Web Page</A
></DT
><DT
>4.4. <A
HREF="#PERMDIRENT"
>Permanent Directory Entries</A
></DT
><DT
>4.5. <A
HREF="#SERVMULTALIAS"
>Serving Multiple Aliases</A
></DT
><DT
>4.6. <A
HREF="#ANSWERINGMACHINE"
>Using the Answering Machine</A
></DT
><DT
>4.7. <A
HREF="#CONFERENCECALLS"
>Conference Calls</A
></DT
><DT
>4.8. <A
HREF="#NATROUTING"
>Routing Calls Through NAT</A
></DT
><DT
>4.9. <A
HREF="#CUSTOMCONFIGURATION"
>Custom Configurations</A
></DT
></DL
></DD
><DT
>5. <A
HREF="#DEBUGGING"
>Debugging</A
></DT
><DT
>A. <A
HREF="#AEN410"
>LDAP attributes used by NetMeeting</A
></DT
><DT
>B. <A
HREF="#AEN490"
>NetMeeting LDAP protocol violations</A
></DT
><DT
>C. <A
HREF="#AEN543"
>Interoperation with Cisco</A
></DT
><DT
>D. <A
HREF="#AEN563"
>Thanks</A
></DT
></DL
></DIV
><DIV
CLASS="SECTION"
><H2
CLASS="SECTION"
><A
NAME="INTRODUCTION"
>1. Introduction</A
></H2
><P
>      This is the Linux NETMEETING HOWTO; it describes
      how to configure Linux for interoperation with Microsoft NetMeeting.
      The latest copy of this document is available at
      <A
HREF="http://www.freesoft.org/software/NetMeeting/"
TARGET="_top"
>http://www.freesoft.org/software/NetMeeting</A
>
      or from the
      <A
HREF="http://www.linuxdoc.org/"
TARGET="_top"
>Linux Documentation Project</A
>.
      <CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:software/NetMeeting@freesoft.org"
>software/NetMeeting@freesoft.org</A
>&#62;</CODE
>
      is a mailing list to discuss Linux NetMeeting interoperation;
      consult its <A
HREF="http://www.freesoft.org/software/NetMeeting/mailinglist/"
TARGET="_top"
>archive</A
> if you have questions unanswered in this HOWTO.
    </P
><P
>      NetMeeting is Microsoft's client implementation of the H.323
      international standard teleconferencing protocol suite, providing
      audio and video conferencing over an IP network.
      NetMeeting also implements
      the T.120 protocol suite, providing shared whiteboard, file
      transfer and application sharing.  As an extension, LDAP is
      used for directory service.  NetMeeting is included in Windows 2000
      and is freely available for download from
      <A
HREF="http://www.microsoft.com/windows/netmeeting"
TARGET="_top"
>http://www.microsoft.com/windows/netmeeting</A
>
      for Windows 95, 98, and NT.
    </P
><P
>      Linux software is presently (October 2000) available to support H.323
      (both audio and video) and LDAP directory service, but not T.120 shared
      whiteboard, file transfer, or application sharing.
    </P
><P
>      If you don't know anything about H.323, I recommend these links:
    </P
><P
></P
><UL
><LI
><P
>          <A
HREF="http://www.openh323.org/"
TARGET="_top"
>http://www.openh323.org/</A
>
        </P
></LI
><LI
><P
>          <A
HREF="http://www.databeam.com/h323/h323primer.html"
TARGET="_top"
>http://www.databeam.com/h323/h323primer.html</A
>
        </P
></LI
><LI
><P
>          <A
HREF="http://www.hut.fi/~tttoivan/index4.html"
TARGET="_top"
>http://www.hut.fi/~tttoivan/index4.html</A
>
        </P
></LI
><LI
><P
>          <A
HREF="http://developer.intel.com/technology/itj/q21998/articles/art_4.htm"
TARGET="_top"
>http://developer.intel.com/technology/itj/q21998/articles/art_4.htm</A
>
        </P
></LI
></UL
><P
>      If you don't know anything about LDAP, I recommend these links:
    </P
><P
></P
><UL
><LI
><P
>          <A
HREF="http://www.openldap.org/"
TARGET="_top"
>http://www.openldap.org/</A
>
        </P
></LI
><LI
><P
>          <A
HREF="http://www.umich.edu/~dirsvcs/ldap/index.html"
TARGET="_top"
>http://www.umich.edu/~dirsvcs/ldap/index.html</A
>
        </P
></LI
><LI
><P
>          RFCs 2251-2256
        </P
></LI
></UL
><P
>      If you have other links to recommend, or other suggestions for
      improving this document, please email me at
      <CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:baccala@freesoft.org"
>baccala@freesoft.org</A
>&#62;</CODE
>, or even better email
      <CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:software/NetMeeting@freesoft.org"
>software/NetMeeting@freesoft.org</A
>&#62;</CODE
>
    </P
></DIV
><DIV
CLASS="SECTION"
><HR><H2
CLASS="SECTION"
><A
NAME="OPENH323"
>2. OpenH323</A
></H2
><DIV
CLASS="SECTION"
><H3
CLASS="SECTION"
><A
NAME="WHATISH323"
>2.1. What is it?</A
></H3
><P
>  OpenH323 is an open source implementation of the H.323 protocol suite.
  As such, it can directly interoperate with Microsoft NetMeeting.  At
  the time of this writing (October 2000), OpenH323 is still early
  in its development cycle; buggy and in flux, but useful.
      </P
><P
>        OpenH323 consists of several C++ libraries and some C++
        client programs.
      </P
><P
>        The most useful client programs are:
      </P
><DIV
CLASS="TABLE"
><A
NAME="AEN88"
></A
><P
><B
>Table 1.           List of client applications
        </B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><TBODY
><TR
><TD
>ohphone</TD
><TD
>                H.323 interactive client.  Linux equivalent to NetMeeting.
                Supports audio and video;
		no shared whiteboard, file transfer, or shared applications
              </TD
></TR
><TR
><TD
>openam</TD
><TD
>                H.323 answering machine.  Plays back a recorded message
                and records incoming audio.  No video support at present.
              </TD
></TR
><TR
><TD
>forwarder</TD
><TD
>                Forwards H.323 sessions from one IP address/port to
                another.  Used to serve multiple H.323 destinations
                from a single IP address.
              </TD
></TR
><TR
><TD
>openmcu</TD
><TD
>	        Multipoint Control Unit.  Connects multiple sessions together
		into a conference call.
	      </TD
></TR
><TR
><TD
>PSTN Gateway</TD
><TD
>	        Allows NetMeeting clients to make phone calls onto the
		conventional phone system - the Public Switched Telephone
		Network (PSTN).  Requires special hardware.
	      </TD
></TR
></TBODY
></TABLE
></DIV
><P
>        OpenH323 presently (October 2000) supports audio codecs G.711, G.723.1,
        LPC-10, and GSM 06.10, as well as video codec H.261.
      </P
></DIV
><DIV
CLASS="SECTION"
><HR><H3
CLASS="SECTION"
><A
NAME="WHYNEED"
>2.2. Why is it needed?</A
></H3
><P
>        OpenH323 is needed only if you want to make audio/video connections
        with NetMeeting clients directly from your Linux system.  It is not
        needed to provide LDAP directory service to NetMeeting clients.
      </P
></DIV
><DIV
CLASS="SECTION"
><HR><H3
CLASS="SECTION"
><A
NAME="WHERETOGET"
>2.3. Where to get it?</A
></H3
><P
>        The main site is <A
HREF="http://www.openh323.org/"
TARGET="_top"
>http://www.openh323.org/</A
>
        and contains links to a download page, mirror sites, mailing lists,
        and other resources.
      </P
><P
>        OhPhone, OpenAM, and PSTNgw are available as part of the standard
	distribution, in both source and executable formats.
	forwarder and openmcu are presently (December 2000) only available
	from the CVS archive, as modules named "forwarder" and "openmcu".
      </P
></DIV
><DIV
CLASS="SECTION"
><HR><H3
CLASS="SECTION"
><A
NAME="INSTALL"
>2.4. Installation</A
></H3
><P
>        For OhPhone, OpenAM, and PSTNgw, download the executables.
	If you want to build from source, perhaps because you need
	forwarder or openmcu, you'll need the source code to the programs,
	as well as to the pwlib and openh323 libraries.  Compilation
	instructions are available on the openh323 website.
      </P
></DIV
><DIV
CLASS="SECTION"
><HR><H3
CLASS="SECTION"
><A
NAME="GATEKEEPERS"
>2.5. Gatekeepers</A
></H3
><P
>        OpenH323 doesn't provide any gatekeepers itself, but several are
	under construction based on its libraries.  As of the end of 2000,
	most of them are actively under development and quite primitive.
	I haven't used any of them myself, but you want may to examine the
	following links:
      </P
><P
></P
><UL
><LI
><P
>	    <A
HREF="http://www.opengatekeeper.org/"
TARGET="_top"
>OpenGatekeeper</A
>
	  </P
></LI
><LI
><P
>	    <A
HREF="http://www.willamowius.de/openh323gk.html"
TARGET="_top"
>OpenH323 Gatekeeper</A
>
	  </P
></LI
><LI
><P
>	    <A
HREF="http://openh323proxy.sourceforge.net/"
TARGET="_top"
>OpenGatekeeper H323 Proxy</A
>
	  </P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="SECTION"
><HR><H2
CLASS="SECTION"
><A
NAME="NETMEETSERVER"
>3. NetMeeting directory kit</A
></H2
><DIV
CLASS="SECTION"
><H3
CLASS="SECTION"
><A
NAME="WHATISNETMEET"
>3.1. What is it?</A
></H3
><P
>	  Each NetMeeting client can register with an LDAP server and
	  has a directory window that lists other
	  NetMeeting clients registered with the same server.
          The NetMeeting directory kit is an extension to the OpenLDAP server
          that provides directory service to NetMeeting clients.
        </P
></DIV
><DIV
CLASS="SECTION"
><HR><H3
CLASS="SECTION"
><A
NAME="WHYNEEDNETMEET"
>3.2. Why is it needed?</A
></H3
><P
>        While NetMeeting can connect directly to another H.323 device by
        specifying an IP address or DNS name, normally you'll want to use
        an LDAP directory server.  Using an LDAP server lets users see
        a directory listing of available destinations, and is required
        if you need to resolve aliases, for example if you want to serve
        multiple H.323 destinations from a single IP address.  A directory
        server isn't required to connect directly from Linux
	to a NetMeeting client; use OpenH323 for this.
      </P
><P
>        The NetMeeting client violates the LDAP protocol in several ways,
        so you'll have problems if you try using a standard LDAP server.
	The NetMeeting directory kit corrects for these problems and allows
	an OpenLDAP server to be used for NetMeeting directory service.
      </P
></DIV
><DIV
CLASS="SECTION"
><HR><H3
CLASS="SECTION"
><A
NAME="HOWITWORKS"
>3.3. How it works</A
></H3
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>                 Block diagram of NetMeeting directory kit

___________________         _______    __________________        ______________
|    LDAP server  | request |      |   |   LDAP server  | request|            |
|                 | &#60;-------| Perl |&#60;--|                | &#60;------| NetMeeting |
| on private port |         |script|   | on public port |        |  client    |
|  (i.e, 2345)    |-------&#62; |      |--&#62;|     389        |-------&#62;|            |
|                 | reply   --------   |                |  reply --------------
|                 |                    |                |      
-------------------                    ------------------</PRE
></FONT
></TD
></TR
></TABLE
><P
>        The directory server consists of a 'master' LDAP server to
	receive requests, a Perl script to correctly interpret
        the Microsoft NetMeeting requests and, after interrogation
        of a 'hidden' LDAP server, formats the results in a way that the
        NetMeeting client can understand.
	OpenLDAP's 'shell backend' is used to call the Perl script.
        A custom schema is also required.
        The script presently handles all of the above problems, with the
        exception of timing out entries, which it doesn't do.
      </P
></DIV
><DIV
CLASS="SECTION"
><HR><H3
CLASS="SECTION"
><A
NAME="WHERETOGETSOFTWARE"
>3.4. Where to get the software</A
></H3
><P
>        First of all you need to get the OpenLDAP software.
      </P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>          Pre-built OpenLDAP software (i.e, RPMs) won't work unless
          configured with support for the shell backend.
        </P
></TD
></TR
></TABLE
></DIV
><P
>        You can download OpenLDAP from the main site located at
        <A
HREF="ftp://ftp.OpenLDAP.org/pub/OpenLDAP/openldap-release/"
TARGET="_top"
>ftp://ftp.OpenLDAP.org/pub/OpenLDAP/openldap-release/</A
>
        or any mirror.
	I've successfully used OpenLDAP 2.0.7.
      </P
><P
>        The NetMeeting directory kit is available from
        <A
HREF="http://www.freesoft.org/software/NetMeeting/download"
TARGET="_top"
>http://www.freesoft.org/software/NetMeeting/download</A
>.
      </P
><P
>        You need Perl 5, available from
	<A
HREF="http://www.perl.org/"
TARGET="_top"
>http://www.perl.org</A
>,
	but already included in all common Linux distributions.
	You will also need the Net::LDAP module from the Perl CPAN archive,
	which can be downloaded and installed directly from Perl:
      </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>[root@y2k baccala]# <KBD
CLASS="USERINPUT"
>perl -MCPAN -e shell</KBD
>

cpan shell -- CPAN exploration and modules installation (v1.58)
ReadLine support enabled

cpan&#62; <KBD
CLASS="USERINPUT"
>install Net::LDAP</KBD
>

... much output omitted ...

  /usr/bin/make install -- OK

cpan&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>        If you've never used CPAN before, you will be prompted first with
        a series of configuration questions.  Once CPAN is configured,
        the Net::LDAP module will be downloaded, compiled, and installed
        automatically.
      </P
></DIV
><DIV
CLASS="SECTION"
><HR><H3
CLASS="SECTION"
><A
NAME="INSTALLSOFTWARE"
>3.5. Installation</A
></H3
><P
>        Building OpenLDAP will require approximately 60 MB of free disk
        space.  Untar OpenLDAP and configure it.
      </P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>          Be sure to specify the shell backend function "--enable-shell"
        </P
></TD
></TR
></TABLE
></DIV
><P
>        I also recommend specifying "--disable-debug" to prevent OpenLDAP
	from exiting if an assertion fails.
      </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>bash$ <KBD
CLASS="USERINPUT"
>./configure --enable-shell --disable-debug</KBD
>
      </PRE
></FONT
></TD
></TR
></TABLE
><P
>        Now build and install it with:
      </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>bash$ <KBD
CLASS="USERINPUT"
>make</KBD
>

... much output omitted ...

bash# <KBD
CLASS="USERINPUT"
>make install</KBD
>
      </PRE
></FONT
></TD
></TR
></TABLE
><P
>        It will normally install under <TT
CLASS="FILENAME"
>/usr/local</TT
>:
      </P
><DIV
CLASS="TABLE"
><A
NAME="AEN174"
></A
><P
><B
>Table 2.           Directories used by OpenLDAP
        </B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><TBODY
><TR
><TD
>	        <TT
CLASS="FILENAME"
>/usr/local/lib</TT
>
	      </TD
><TD
>	        Shared and static libraries
	      </TD
></TR
><TR
><TD
>                  <TT
CLASS="FILENAME"
>/usr/local/bin</TT
>
              </TD
><TD
>                  Client binaries for adding, deleting,
		  and searching LDAP servers
              </TD
></TR
><TR
><TD
>	        <TT
CLASS="FILENAME"
>/usr/local/sbin</TT
>
	      </TD
><TD
>	        Utility programs for manipulating the raw database files.
		Not needed for normal operation.
	      </TD
></TR
><TR
><TD
>                  <TT
CLASS="FILENAME"
>/usr/local/libexec</TT
>
              </TD
><TD
>                  Various server programs,
		  including the <B
CLASS="COMMAND"
>slapd</B
> binary
              </TD
></TR
><TR
><TD
>                  <TT
CLASS="FILENAME"
>/usr/local/etc/openldap</TT
>
              </TD
><TD
>                  Contains the default configuration files
              </TD
></TR
><TR
><TD
>                  <TT
CLASS="FILENAME"
>/usr/local/etc/openldap/schema</TT
>
              </TD
><TD
>                  The different schemas used by the LDAP servers.
              </TD
></TR
><TR
><TD
>                  <TT
CLASS="FILENAME"
>/usr/local/var/...</TT
>
              </TD
><TD
>                  The location of the LDAP databases (in subdirectories)
              </TD
></TR
><TR
><TD
>	        <TT
CLASS="FILENAME"
>/usr/local/man/...</TT
>
	      </TD
><TD
>	        Documentation
	      </TD
></TR
></TBODY
></TABLE
></DIV
><P
>        Once OpenLDAP has been installed, next install the NetMeeting
	directory kit.
        Untar <TT
CLASS="FILENAME"
>ndk.tgz</TT
>.
	It contains these files:
      </P
><DIV
CLASS="TABLE"
><A
NAME="AEN213"
></A
><P
><B
>Table 3. 	  NetMeeting directory kit files
	</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><TBODY
><TR
><TD
><TT
CLASS="FILENAME"
>netmeeting.perl</TT
></TD
><TD
>	        Perl script used to correct NetMeeting protocol violations
	      </TD
></TR
><TR
><TD
><TT
CLASS="FILENAME"
>netmeeting.schema</TT
></TD
><TD
>	        Custom NetMeeting schema used by the LDAP server
	      </TD
></TR
><TR
><TD
><TT
CLASS="FILENAME"
>core.schema.patch</TT
></TD
><TD
>	        Patch to LDAP server's core schema
	      </TD
></TR
><TR
><TD
><TT
CLASS="FILENAME"
>slapd.conf</TT
></TD
><TD
>	        Sample config file for the master LDAP server
	      </TD
></TR
><TR
><TD
><TT
CLASS="FILENAME"
>slapd2.conf</TT
></TD
><TD
>	        Sample config file for the slave LDAP server
	      </TD
></TR
><TR
><TD
><TT
CLASS="FILENAME"
>initialize</TT
></TD
><TD
>	        Shell script used once to initialize the slave LDAP database
	      </TD
></TR
><TR
><TD
><TT
CLASS="FILENAME"
>slapd.rc</TT
></TD
><TD
>	        <TT
CLASS="FILENAME"
>/etc/rc.d/</TT
> script
	      </TD
></TR
><TR
><TD
><TT
CLASS="FILENAME"
>nmaddentry</TT
></TD
><TD
>	        Perl script to add entries to the NetMeeting directory
	      </TD
></TR
><TR
><TD
><TT
CLASS="FILENAME"
>nmdirectory</TT
></TD
><TD
>	        Perl/Tk script to query the NetMeeting directory
	      </TD
></TR
></TBODY
></TABLE
></DIV
><P
>        Copy <TT
CLASS="FILENAME"
>netmeeting.perl</TT
> to the
	<TT
CLASS="FILENAME"
>/usr/local/libexec</TT
> directory,
        <TT
CLASS="FILENAME"
>netmeeting.schema</TT
> to the
	<TT
CLASS="FILENAME"
>/usr/local/etc/openldap/schema</TT
>
	directory,
        and copy both <TT
CLASS="FILENAME"
>slapd.conf</TT
>
	and <TT
CLASS="FILENAME"
>slapd2.conf</TT
> to the
        <TT
CLASS="FILENAME"
>/usr/local/etc/openldap</TT
> directory.
      </P
><P
>        Be sure to use <TT
CLASS="FILENAME"
>core.schema.patch</TT
> to patch
	openldap's core schema in the
	<TT
CLASS="FILENAME"
>/usr/local/etc/openldap/schema</TT
>
	directory:
      </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>bash$ <KBD
CLASS="USERINPUT"
>cd /usr/local/etc/openldap/schema</KBD
>
bash$ <KBD
CLASS="USERINPUT"
>ls</KBD
>
corba.schema   inetorgperson.schema  misc.schema        nis.schema
core.schema    java.schema           nadf.schema        openldap.schema
cosine.schema  krb5-kdc.schema       netmeeting.schema
bash$ <KBD
CLASS="USERINPUT"
>cp core.schema core.schema.bak</KBD
>
bash$ <KBD
CLASS="USERINPUT"
>patch core.schema &#60; ~/core.schema.patch</KBD
>
      </PRE
></FONT
></TD
></TR
></TABLE
><P
>        Create the directory
	<TT
CLASS="FILENAME"
>/usr/local/var/openldap-netmeeting</TT
>
	to store the LDAP database, and make it world writable.
      </P
><P
>        Especially if you're using directories from the samples, edit
	<TT
CLASS="FILENAME"
>slapd.conf</TT
> and <TT
CLASS="FILENAME"
>slapd2.conf</TT
>
	and verify their configuration settings.
      </P
><P
>        You will need to run two copies of <B
CLASS="COMMAND"
>slapd</B
>.
	One uses <TT
CLASS="FILENAME"
>slapd.conf</TT
>
        and must be started as root, since it binds to port 389.
	The <CODE
CLASS="OPTION"
>-u</CODE
> option can be specified to cause
	<B
CLASS="COMMAND"
>slapd</B
> to <CODE
CLASS="FUNCTION"
>chown</CODE
>
	to an unprivileged user after binding the port (a wise precaution).
	The other <B
CLASS="COMMAND"
>slapd</B
>
	uses <TT
CLASS="FILENAME"
>slapd2.conf</TT
>, binds to an unprivileged
	port, and only needs
	sufficient privilege to write the database directory.
      </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>bash# <KBD
CLASS="USERINPUT"
>/usr/local/libexec/slapd -f /usr/local/etc/openldap/slapd.conf -u nobody</KBD
>
bash$ <KBD
CLASS="USERINPUT"
>/usr/local/libexec/slapd -h ldap://localhost:2345/ -f /usr/local/etc/openldap/slapd2.conf</KBD
>
      </PRE
></FONT
></TD
></TR
></TABLE
><P
>        You now have to initialize the slave database with a single entry.
        This is only done once, by running the <TT
CLASS="FILENAME"
>initialize</TT
>
	script
        included in the kit.  The "rootdn" and "rootpw" entries are
        in the slave config file to allow access for the initialization
        script, and must match the <CODE
CLASS="OPTION"
>-D</CODE
> and <CODE
CLASS="OPTION"
>-w</CODE
>
	options in the script.
        Once you've initialized the database with a single parent
        entry, you can comment out the "rootdn" and "rootpw" lines
	from <TT
CLASS="FILENAME"
>slapd2.conf</TT
>, though this is not critical.
      </P
><P
>        The server should now be up and running.
	For systems with <TT
CLASS="FILENAME"
>/etc/rc.d/</TT
>
	style initialization scripts (like RedHat),
	the <TT
CLASS="FILENAME"
>slapd.rc</TT
> is provided to automate the
	starting and stopping of the <B
CLASS="COMMAND"
>slapd</B
>s.
      </P
></DIV
><DIV
CLASS="SECTION"
><HR><H3
CLASS="SECTION"
><A
NAME="SECURITY"
>3.6. Server Security</A
></H3
><P
>        As shown above, I run both <B
CLASS="COMMAND"
>slapd</B
>s
	as an unprivileged user, minimizing the possibility of compromised
	security due to a bug in either the server software or the Perl
	script.  Of course, this requires the database directory
	to be world writable so that the unprivileged slave server can
	update it.  This isn't as glaring a hole as it might first appear,
	since the NetMeeting clients themselves use no authentication.
	Thus, even if the database directory were better protected,
	anyone on a local or remote host could use LDAP client
	programs to delete or modify any of the database entries.
      </P
></DIV
><DIV
CLASS="SECTION"
><HR><H3
CLASS="SECTION"
><A
NAME="WINDOWS2000LDAP"
>3.7. LDAP issues with Windows 2000</A
></H3
><P
>        Recent NetMeeting releases initially attempt to connect
	to the LDAP directory server on port 1002.  As described in a
	<A
HREF="http://www.microsoft.com/TechNet/chats/trans/iis1208.asp"
TARGET="_top"
>TechNet chat</A
>,
	<A
NAME="AEN303"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>Prior to Windows
2000, an ILS server would listen on port 389 for NetMeeting clients. When an
ILS server is set up on a Windows 2000 machine, it will default to port 1002.
	</P
></BLOCKQUOTE
>
	If a connection to port 1002 is rejected, NetMeeting will fall back
	on the standard LDAP port 389.  However, at least one user has reported
	trouble with a firewall that blocks port 1002, discards the
	connection attempts, and thus no replies are received to
	reject the connection.  In this case, NetMeeting takes about a minute
	to timeout and fall back to port 389.  Opening the firewall to
	port 1002 allowed the rejects through and triggered a rapid fallback.
      </P
></DIV
><DIV
CLASS="SECTION"
><HR><H3
CLASS="SECTION"
><A
NAME="INTEROPERATION"
>3.8. Interoperation with other LDAP service</A
></H3
><P
>        The instructions above assume that your LDAP server is only
	being used for NetMeeting directory service.  Yet what if you
	want to use a single server for both NetMeeting directory service
	and other LDAP service?  Only one server can be bound to port 389,
	but OpenLDAP allows multiple database sections to be specified
	in its configuration file, each serving different parts of the
	LDAP namespace.  NetMeeting uses only the "objectClass=RTPerson"
	subtree, so as long as you avoid this subtree, you can configure
	additional database sections to serve other subtrees with other
	databases.  The biggest problem you are likely to encounter is
	the custom NetMeeting schema, which conflicts slightly with the
	standard schema.  Since the NetMeeting schema is more liberal
	than the standard schema, I'd suggest commenting out the conflicting
	parts of the standard schema.  NetMeeting clients won't work with
	the standard schema.  See the LDAP RFCs and the OpenLDAP documentation
	for more information about configuring LDAP servers.
      </P
></DIV
></DIV
><DIV
CLASS="SECTION"
><HR><H2
CLASS="SECTION"
><A
NAME="USING"
>4. Using the Software</A
></H2
><DIV
CLASS="SECTION"
><H3
CLASS="SECTION"
><A
NAME="DIRECTCONNECT"
>4.1. Direct Connection</A
></H3
><P
>        You can use OpenH323's <B
CLASS="COMMAND"
>ohphone</B
>
	program to connect directly to a
        NetMeeting client.  Specify the <CODE
CLASS="OPTION"
>-n</CODE
>
	option to indicate that you're
        not using a gatekeeper, and either the DNS name or IP address of
	the NetMeeting client:
      </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>bash$ <KBD
CLASS="USERINPUT"
>ohphone -n 208.130.48.22</KBD
>
      </PRE
></FONT
></TD
></TR
></TABLE
><P
>        You can also start <B
CLASS="COMMAND"
>ohphone</B
> to receive incoming
	calls from NetMeeting clients:
      </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>bash$ <KBD
CLASS="USERINPUT"
>ohphone -n</KBD
>
      </PRE
></FONT
></TD
></TR
></TABLE
><P
>      See the <B
CLASS="COMMAND"
>ohphone</B
> documentation for more information
      on its additional features, including video conferencing, codec
      selection, and auto-answer.
      </P
></DIV
><DIV
CLASS="SECTION"
><HR><H3
CLASS="SECTION"
><A
NAME="DIROPT"
>4.2. Directory Operation</A
></H3
><P
>        Make sure you have an LDAP server running the NetMeeting directory kit,
        as described above.
      </P
><P
>        On the NetMeeting client, select the 
        <SPAN
CLASS="GUIMENU"
>            Tools
          </SPAN
>-&gt;<SPAN
CLASS="GUIMENUITEM"
>            Options
          </SPAN
>
        menu item to display a configuration dialog.  Under the
        "General" (NetMeeting 3) or "Calling" (NetMeeting 2) tab,
	there will be a section for "Directory Settings".
        Here you can enter the IP address or DNS name of the server.
        The client will then attach to the server and register itself
        either automatically, if the "Log on to directory server when
        NetMeeting starts" checkbox is selected.
	You can also log on to the directory server manually, by selecting
        <SPAN
CLASS="GUIMENU"
>            Call
          </SPAN
>-&gt;<SPAN
CLASS="GUIMENUITEM"
>            Log on
          </SPAN
>
        .
      </P
><P
>        If the user selects 
        <SPAN
CLASS="GUIMENU"
>            Call
          </SPAN
>-&gt;<SPAN
CLASS="GUIMENUITEM"
>            Directory
          </SPAN
>,
        a directory window will be displayed showing all users
        registered on the LDAP server.
	Double-clicking on one of the names will initiate a connection
	to that user.
      </P
><P
>        Querying the NetMeeting LDAP server from Linux can be done, but
	is tricky because the client's IP address is stored in decimal,
	and I don't mean dotted decimal.  For example, the IP address
	63.216.69.197 is stored as 3309688895.  Here's some
	Perl code to convert back and forth from the NetMeeting
	IP address format:
      </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># Convert $addr (IP address or DNS name) to a NetMeeting decimal IP address

use Socket;
$bytestring = inet_aton($addr);
if (defined $bytestring) {
    ($sipaddress) = unpack('V', $bytestring);
} else {
    die "Can't resolve $addr\n";
}

# Convert $sipaddress (from a NetMeeting LDAP server) into dotted decimal form

$packedipaddr = pack 'V', $sipaddress;
$ipaddress = join '.', unpack('C4',$packedipaddr);</PRE
></FONT
></TD
></TR
></TABLE
><P
>      Included with the NetMeeting directory kit is
      <B
CLASS="COMMAND"
>nmdirectory</B
>, a simple Perl/Tk script to query
      a NetMeeting LDAP server and display the clients registered with it.
      It's very primitive, and doesn't work well with large databases,
      but provides a rudimentary example of how to interpret search
      results from a NetMeeting LDAP server.
    </P
></DIV
><DIV
CLASS="SECTION"
><HR><H3
CLASS="SECTION"
><A
NAME="LNKFRMWEBPAGE"
>4.3. Linking From A Web Page</A
></H3
><P
>        Microsoft Internet Explorer understands URLs with a "callto:" scheme
        that specify NetMeeting destinations in one of two forms.  When a
        link with a "callto:" URL is selected, Internet Explorer runs
        NetMeeting and directs it to connect to the specified destination.
      </P
><P
>        The first URL form, "callto:destination", where 'destination' is
        either an IP address or a DNS name, causes NetMeeting to open an
        H.323 connection to port 1720 on 'destination'.  Use this form
        to connect directly to another NetMeeting or OpenH323 client.
      </P
><P
>        The second URL form, "callto:server/alias", causes a directory lookup
        on LDAP server 'server', searching for a CN attribute of 'alias'.
        Assuming a match is found, a connection is made to the IP address
        specified in the entry's sipAddress attribute.  NetMeeting clients,
        by default, register their user's E-mail addresses in the CN
        attribute.  Use this form to perform a directory lookup based
        on E-mail address.
      </P
></DIV
><DIV
CLASS="SECTION"
><HR><H3
CLASS="SECTION"
><A
NAME="PERMDIRENT"
>4.4. Permanent Directory Entries</A
></H3
><P
>        NetMeeting clients aren't the only source of LDAP directory entries.
        In particular, permanent directory entries can be manually inserted
        into the LDAP server using the OpenLDAP client tools.  Assuming the
        attributes are specified properly, these entries will then appear in
        NetMeeting directory listings and can be used as targets in "callto:"
        URLs.  This is useful when working with OpenH323 clients that don't
        register themselves by default with the LDAP server.
      </P
><P
>        To simply creating directory entries, the <B
CLASS="COMMAND"
>nmaddentry</B
>
	script is included in the NetMeeting directory kit.  Run it
	without arguments for a usage message.  For example, if you've
	started <B
CLASS="COMMAND"
>ohphone</B
> on "y2k.freesoft.org", you
	can register it with the LDAP server on "ils.freesoft.org" using
	alias "baccala@freesoft.org" like this:
      </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>bash$ <KBD
CLASS="USERINPUT"
>nmaddentry -h ils.freesoft.org baccala@freesoft.org y2k.freesoft.org</KBD
>
Successfully added cn=baccala@freesoft.org, objectclass=rtperson
bash$
      </PRE
></FONT
></TD
></TR
></TABLE
><P
>        This entry will now appear in NetMeeting directory listings and
	can be addressed as "ils.freesoft.org/baccala@freesoft.org".
	The entry will automatically timeout after 30 minutes.
        The <CODE
CLASS="OPTION"
>-p</CODE
> switch creates a permanent directory
	listing that won't time out, but this only works on
	OpenLDAP servers using the NetMeeting directory kit.
        To remove a permanent entry,
	use the <B
CLASS="COMMAND"
>ldapdelete</B
> program
	included with the OpenLDAP distribution, specifying the LDAP
	Distinguished Name returned by <B
CLASS="COMMAND"
>nmaddentry</B
>:
      </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>bash$ <KBD
CLASS="USERINPUT"
>ldapdelete -h ils.freesoft.org 'cn=baccala@freesoft.org,objectclass=rtperson'</KBD
>
bash$
      </PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECTION"
><HR><H3
CLASS="SECTION"
><A
NAME="SERVMULTALIAS"
>4.5. Serving Multiple Aliases</A
></H3
><P
>        The attributes registered by a NetMeeting client include 'sport',
        the TCP port number it listens on for incoming H.323 requests, but
        since this attribute is never retrieved in search requests, it
        isn't as useful as it first appears.  In fact, NetMeeting always
        opens H.323 connections to the default port (1720), which raises
        the question of how to serve multiple aliases from a single IP
        address.
      </P
><P
>        The key to doing this is the <B
CLASS="COMMAND"
>forwarder</B
>
        program, included in the OpenH323 CVS archive. 
        <B
CLASS="COMMAND"
>forwarder</B
> listens for connections
        on port 1720, and can be configured to redirect them based on the
        alias being called.  This allows calls for each alias to be sent to
        a unique port number, where a program like <B
CLASS="COMMAND"
>ohphone</B
>
        or <B
CLASS="COMMAND"
>openam</B
> is listening.
      </P
><P
>        To use aliases, an LDAP directory is required, with an entry for each
        alias.  Each alias entry should specify a 'cn' attribute with the
        alias name, and a 'sipAddress' attribute with the IP address of the
        host where <B
CLASS="COMMAND"
>forwarder</B
> is listening.
      </P
><P
>        I've successfully configured a single host to act as a combination
        LDAP server (on port 389), <B
CLASS="COMMAND"
>forwarder</B
>
	(on port 1720), and
        <B
CLASS="COMMAND"
>ohphone</B
> and <B
CLASS="COMMAND"
>openam</B
>
	clients on various private port numbers and remote systems.
      </P
></DIV
><DIV
CLASS="SECTION"
><HR><H3
CLASS="SECTION"
><A
NAME="ANSWERINGMACHINE"
>4.6. Using the Answering Machine</A
></H3
><P
>        The OpenH323 answering machine, <B
CLASS="COMMAND"
>openam</B
>, will
	listen for incoming H.323 connections, play a pre-recorded
	message, and then record any audio sent to it into a file.
	It can optionally be configured to run another program at the
	end of the call, to email the recorded audio, perhaps.
      </P
><P
>        It's usefulness is currently (December 2000)
	limited by the lack of a gatekeeper
	program clever enough to redirect calls to it if there's no
	answer at the main address.  Thus, it will only act as an
	answering machine if the <B
CLASS="COMMAND"
>ohphone</B
> program
	is running at the main address, and has been configured to
	redirect calls to another address, using
	the <CODE
CLASS="OPTION"
>--forward-no-answer</CODE
>
	and <CODE
CLASS="OPTION"
>--forward-busy</CODE
> options.
      </P
></DIV
><DIV
CLASS="SECTION"
><HR><H3
CLASS="SECTION"
><A
NAME="CONFERENCECALLS"
>4.7. Conference Calls</A
></H3
><P
>        The <B
CLASS="COMMAND"
>openmcu</B
> program, in the OpenH323 CVS
	archive, implements an H.323 Multipoint Control Unit (MCU).
	Multiple NetMeeting or <B
CLASS="COMMAND"
>ohphone</B
> clients
	can connect to the MCU and form a conference call.  As of
	December 2000, the quality and reliability of the connection
	is problematic, but hopefully this will improve.
      </P
></DIV
><DIV
CLASS="SECTION"
><HR><H3
CLASS="SECTION"
><A
NAME="NATROUTING"
>4.8. Routing Calls Through NAT</A
></H3
><P
>        Special support is required on a NAT (IP Masquerade)
	router to allow H.323 traffic to pass through.
	If the NAT router is running Linux, two masquerading modules
	are available:
      </P
><P
></P
><UL
><LI
><P
><A
HREF="http://www.coritel.it/coritel/ip/sofia/nat/nat2/nat2.htm"
TARGET="_top"
>http://www.coritel.it/coritel/ip/sofia/nat/nat2/nat2.htm</A
></P
></LI
><LI
><P
><A
HREF="http://netmeetingmasq.sourceforge.net/"
TARGET="_top"
>http://netmeetingmasq.sourceforge.net/</A
></P
></LI
></UL
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>          I have not tested either of these modules.
        </P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECTION"
><HR><H3
CLASS="SECTION"
><A
NAME="CUSTOMCONFIGURATION"
>4.9. Custom Configurations</A
></H3
><P
>        The server capabilities can be customized by modifying the
        'netmeeting.perl' script.  For example,
        calls for stale entries could be redirected to an
        "forwarder" configured to hand off to "openam" answering
        machines.  Thus, calls to a unavailable user would be answered
        and recorded for later playback.
      </P
><P
>        As OpenH323's development continues, it's expected that
        these techniques will become more sophisticated, for example
        by ringing the user first and only forwarding to an answering
        machine if there's no answer after a given time.
	Such functionality would most likely be placed in a gatekeeper.
      </P
></DIV
></DIV
><DIV
CLASS="SECTION"
><HR><H2
CLASS="SECTION"
><A
NAME="DEBUGGING"
>5. Debugging</A
></H2
><P
>        For debugging the NetMeeting directory kit Brent Baccala suggests using
        <B
CLASS="COMMAND"
>ethereal</B
> (<A
HREF="http://ethereal.zing.org"
TARGET="_top"
>http://ethereal.zing.org/</A
>)
        to do a packet trace.  It's LDAP support is quite good.  There
        is also a trace file option in the Perl script "netmeeting.perl"
        that can be uncommented. 
      </P
><P
> 
        You might also try running the slapds with debugging turned on
        (-d 768 is a good start), but their messages are rather confusing.
      </P
><P
>        For debugging H.323, try using the "-t" and "-o" options, supported
        by all the OpenH323 client programs.
      </P
></DIV
><DIV
CLASS="APPENDIX"
><HR><H1
CLASS="APPENDIX"
><A
NAME="AEN410"
>A. LDAP attributes used by NetMeeting</A
></H1
><P
>        Distinguished Names (DNs) used by NetMeeting must always
	end in "objectclass=rtperson".
        The following LDAP attributes are used by NetMeeting:
      </P
><DIV
CLASS="TABLE"
><A
NAME="AEN413"
></A
><P
><B
>Table A-1. NetMeeting LDAP attributes</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><TBODY
><TR
><TD
>objectClass</TD
><TD
>must be "RTPerson"</TD
></TR
><TR
><TD
>cn</TD
><TD
>alias used for directory lookups; must be present</TD
></TR
><TR
><TD
>sappid</TD
><TD
>must be "ms-netmeeting"</TD
></TR
><TR
><TD
>sprotid</TD
><TD
>must be "h323"</TD
></TR
><TR
><TD
>sprotmimetype</TD
><TD
>typically "text/h323"; unused</TD
></TR
><TR
><TD
>smimetype</TD
><TD
>typically "text/iuls"; unused</TD
></TR
><TR
><TD
>sflags</TD
><TD
>must be 1</TD
></TR
><TR
><TD
>sappguid</TD
><TD
>unknown</TD
></TR
><TR
><TD
>smodop</TD
><TD
>unknown</TD
></TR
><TR
><TD
>sipaddress</TD
><TD
>decimal IP address</TD
></TR
><TR
><TD
>sport</TD
><TD
>TCP port number; unused</TD
></TR
><TR
><TD
>ssecurity</TD
><TD
>unknown</TD
></TR
><TR
><TD
>sttl</TD
><TD
>entry timeout value in minutes</TD
></TR
><TR
><TD
>c</TD
><TD
>two digit country code</TD
></TR
><TR
><TD
>rfc822mailbox</TD
><TD
>email address</TD
></TR
><TR
><TD
>givenname</TD
><TD
>optional</TD
></TR
><TR
><TD
>surname</TD
><TD
>optional</TD
></TR
><TR
><TD
>comment</TD
><TD
>optional</TD
></TR
><TR
><TD
>location</TD
><TD
>optional</TD
></TR
><TR
><TD
>ilsa39321630</TD
><TD
>1 = personal; 2 = business; 4 = adult</TD
></TR
><TR
><TD
>ilsa32833566</TD
><TD
>0 = not audio capable; 1 = audio capable</TD
></TR
><TR
><TD
>ilsa32964638</TD
><TD
>0 = not video capable; 1 = video capable</TD
></TR
><TR
><TD
>ilsa26214430</TD
><TD
>0 = not in a call; 1 = currently in a call</TD
></TR
><TR
><TD
>ilsa26279966</TD
><TD
>unknown</TD
></TR
></TBODY
></TABLE
></DIV
><P
>        NetMeeting uses a non-standard means of refreshing dynamic entries.
        The Microsoft server maintains an "sttl" attribute, which is a
        time to live for the entry in minutes.  A search request for
        attribute "sttl" resets the timer.  If the timer goes to zero,
        the entry is supposed to disappear from the database.  Of course,
        the sttl attribute doesn't actually exist in the database, and
        the client doesn't bother to give us the whole DN it wants updated,
        only supplying the "cn" component in the search request.
      </P
></DIV
><DIV
CLASS="APPENDIX"
><HR><H1
CLASS="APPENDIX"
><A
NAME="AEN490"
>B. NetMeeting LDAP protocol violations</A
></H1
><P
>        As mentioned, NetMeeting violates the LDAP protocol in several ways.
        For the record, NetMeeting:
      </P
><P
></P
><UL
><LI
><P
>	    Doesn't structure Distinguished Names (DNs) properly
          </P
><A
NAME="AEN496"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>	  NetMeeting puts the most significant elements in the DN first,
	  instead of last, using:
            </P
></BLOCKQUOTE
><A
NAME="AEN498"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>		C=US, O=Microsoft, CN=xxx@abc.com, OBJECTCLASS=rtperson
            </PRE
></FONT
></TD
></TR
></TABLE
></BLOCKQUOTE
><A
NAME="AEN500"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>	  instead of the proper formating, which is:
            </P
></BLOCKQUOTE
><A
NAME="AEN502"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>              CN=xxx@abc.com, O=Microsoft, C=US
            </PRE
></FONT
></TD
></TR
></TABLE
></BLOCKQUOTE
></LI
><LI
><P
>            Doesn't include the required "objectclass" attribute
          </P
><A
NAME="AEN506"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>	      Instead, it tacks an "OBJECTCLASS" element to the end of the DN,
	      as shown above.
            </P
></BLOCKQUOTE
></LI
><LI
><P
>	    Doesn't insert parents into the LDAP server
          </P
><A
NAME="AEN510"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>              This is a clear violation of the LDAP standard, which requires
              parents to exist before children can be created.  I.e, to insert
              this DN:
            </P
></BLOCKQUOTE
><A
NAME="AEN512"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>              CN=xxx@abc.com, O=Microsoft, C=US
            </PRE
></FONT
></TD
></TR
></TABLE
></BLOCKQUOTE
><A
NAME="AEN514"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>	      this DN must already exist:
            </P
></BLOCKQUOTE
><A
NAME="AEN516"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>		O=Microsoft, C=US
            </PRE
></FONT
></TD
></TR
></TABLE
></BLOCKQUOTE
><A
NAME="AEN518"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>	      as must this one:
            </P
></BLOCKQUOTE
><A
NAME="AEN520"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>	      C=US
            </PRE
></FONT
></TD
></TR
></TABLE
></BLOCKQUOTE
></LI
><LI
><P
>	    Doesn't understand attribute aliases, and is therefore unable
	    to recognize that "sn" and "surname" refer to the same attribute.
          </P
></LI
><LI
><P
>	    Requires that attributes in a search request be returned in
	    exactly the same order they were requested, a requirement not
	    guaranteed by the OpenLDAP server.
          </P
></LI
><LI
><P
>	    Specifies "base" scope in search requests, when it really should
	    use "sub", since it wants a list of entries, not just one
          </P
></LI
><LI
><P
>	    Uses the "%" character as wildcard in search requests, instead
	    of the "*" character specified by the standard.
          </P
></LI
><LI
><P
>	    In name attributes ("surname", "givenname"),
	    encodes accented European characters as 8-bit ISO 8859-1,
	    instead of multi character UTF-8 sequences
	    as required by LDAP (RFCs 2252 and 2256).
	  </P
></LI
><LI
><P
>	  Uses a non-standard means of refreshing dynamic entries.
	  </P
><P
>	    The Microsoft server maintains an "sttl" attribute, which is a
	    time to live for the entry in minutes.  A search request for
	    attribute "sttl" resets the timer.  If the timer goes to zero,
	    the entry is supposed to disappear from the database.
	    NetMeeting 2 supplies an "sttl" attribute, but
	    NetMeeting 3 doesn't actually
	    create the "sttl" attribute at all.  Also,
	    the client doesn't bother to give us the whole DN it wants updated,
	    only supplying the "cn" component.
          </P
></LI
></UL
><P
>        Windows 2000 implements a modified DNS SRV
	(<A
HREF="http://www.freesoft.org/CIE/RFC/Orig/rfc2782.txt"
TARGET="_top"
>RFC 2782</A
>),
	an enhanced means of locating network servers, including LDAP.

	Basically, if your NetMeeting server
	name is "ils.freesoft.org", Microsoft Active Directory will expect
	to use a subzone called "_msdcs.ils.freesoft.org".  Within this
	subzone, the domain controller will be called
	"dc._msdcs.ils.freesoft.org" and its LDAP SRV record will be called
	"_ldap._tcp.dc._msdcs.ils.freesoft.org", as
	<A
HREF="http://support.microsoft.com/support/kb/articles/Q178/1/69.ASP"
TARGET="_top"
>described</A
>
	by Microsoft.  Got it?  To specify the default port number (389)
	on the same host, your DNS SRV entry would look something like this:
      </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ORIGIN ils.freesoft.org.

_ldap._tcp.dc._msdcs     IN     SRV     1 1 389 ils.freesoft.org.
      </PRE
></FONT
></TD
></TR
></TABLE
><P
>        I've recently (March 2001)
	tested this myself, and found that it doesn't
	really do much of anything.  The port number appears to be
	completely ignored.  UDP packets are sent to port 389 on
	the listed host, but the standards don't specify LDAP over UDP
	and OpenLDAP doesn't support it.
      </P
></DIV
><DIV
CLASS="APPENDIX"
><HR><H1
CLASS="APPENDIX"
><A
NAME="AEN543"
>C. Interoperation with Cisco</A
></H1
><P
>      Both NetMeeting and OpenH323 can interoperate with Cisco's
      voice capable routers.  To successfully initiate calls from
      a Cisco to an OpenH323 (i.e, Linux) client, the G.711 codec
      must be explicitly specified.  For example, with the following
      configuration, dialing "911" on the Cisco will place a call
      to a Linux system (10.1.1.1) running OpenH323:
    </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>dial-peer voice 911 voip
 destination-pattern 911
 session target ipv4:10.1.1.1
 codec g711ulaw
    </PRE
></FONT
></TD
></TR
></TABLE
><P
>      To call from Linux to a Cisco, use <B
CLASS="COMMAND"
>ohphone</B
>
      with a <CODE
CLASS="OPTION"
>number@host</CODE
> argument.  <CODE
CLASS="OPTION"
>number</CODE
>
      should be a phone number that's been configured on the Cisco
      using a <B
CLASS="COMMAND"
>dial-peer</B
> statement.  For example,
      this will call number "111" on a Cisco (10.1.1.10):
    </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>bash$ <KBD
CLASS="USERINPUT"
>ohphone -n 111@10.1.1.10</KBD
>
    </PRE
></FONT
></TD
></TR
></TABLE
><P
>      To call from NetMeeting to a Cisco, select the Cisco as a gateway.
      To do this from NetMeeting, select
      <SPAN
CLASS="GUIMENU"
>Tools</SPAN
>-&gt;<SPAN
CLASS="GUIMENUITEM"
>Options</SPAN
>.
      For NetMeeting 2, select
      <SPAN
CLASS="GUIBUTTON"
>Audio</SPAN
>, check the box labeled "Use H.323 gateway", and
      enter the Cisco's DNS or IP address.
      For NetMeeting 3, select
      <SPAN
CLASS="GUIBUTTON"
>General</SPAN
>+<SPAN
CLASS="GUIBUTTON"
>Advanced Calling...</SPAN
>, check the box labeled "Use a gateway..."
      (not gatekeeper) and enter the Cisco's address.
      Now, you can type a phone number directly into NetMeeting's address
      panel and it will be relayed to the Cisco and resolved there, using
      the Cisco's configured dialing rules.
      If you're using NetMeeting 2, you'll need to select
      "H.323 Gateway" from the "Call using:" list when you initiate the call.
    </P
></DIV
><DIV
CLASS="APPENDIX"
><HR><H1
CLASS="APPENDIX"
><A
NAME="AEN563"
>D. Thanks</A
></H1
><P
>      Many thanks have to go to Brent Baccala, who wrote the 
      NetMeeting directory kit, also for his 24-hour E-mail tech support, and
      encouragement. Without him I would have passed a many nights more to
      set it up at my own.
    </P
></DIV
></DIV
></BODY
></HTML
>