<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Managing Accurate Date and Time</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article"><div class="titlepage"><div><div><h2 class="title"><a name="TimePrecision-HOWTO"></a>Managing Accurate Date and Time</h2></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Avi</span> <span class="surname">Alkalay</span></h3><div class="affiliation"><span class="orgname">IBM Linux Impact Team :: <a class="ulink" href="http://ibm.com/linux" target="_top">ibm.com/linux</a><br></span> <span class="orgdiv">Linux, Open Standards consultant :: Senior IT and Software Architect<br></span></div><code class="email">&lt;<a class="email" href="mailto:avi%20unix%20sh">avi unix sh</a>&gt;</code></div><div class="othercredit"><h3 class="othercredit"><span class="firstname">Brad</span> <span class="surname">Knowles</span></h3><span class="contrib">Suggestion to use pool.ntp.org and NTP's stratum 2 public time servers</span> </div><div class="othercredit"><h3 class="othercredit"><span class="firstname">Kent</span> <span class="surname">Borg</span></h3><span class="contrib">Suggestion to use ntpq instead of ntpdc</span> </div><div class="othercredit"><h3 class="othercredit"><span class="firstname">Yura</span> <span class="surname">Moron</span></h3><span class="contrib">Good explanations on ntpq and ntpdc info</span> </div><div class="othercredit"><h3 class="othercredit"><span class="firstname">Takeo</span> <span class="surname">Nakano</span></h3><span class="contrib"><a class="ulink" href="http://www.linux.or.jp/JF/JFdocs/TimePrecision-HOWTO/" target="_top">Japanese translation</a></span> <code class="email">&lt;<a class="email" href="mailto:nakano%20at%20apm.seikei.ac.jp">nakano at apm.seikei.ac.jp</a>&gt;</code></div><div class="othercredit"><h3 class="othercredit"><span class="firstname">SHAKI</span></h3><span class="contrib"><a class="ulink" href="http://computerlib.narod.ru/html/linuxtime.htm" target="_top">Russian translation</a></span> <code class="email">&lt;<a class="email" href="mailto:sha-ki%20at%20narod.ru">sha-ki at narod.ru</a>&gt;</code></div><div class="othercredit"><h3 class="othercredit"><span class="firstname">Mihaly Gyulai</span></h3><span class="contrib"><a class="ulink" href="http://tldp.fsf.hu/HOWTO/TimePrecision-HOWTO-hu/index.html" target="_top">Hungarian translation (magyar forditas)</a>, the chorny section and the very first section</span> <code class="email">&lt;<a class="email" href="mailto:gyulai%20at%20fbi%20pont%20hu">gyulai at fbi pont hu</a>&gt;</code></div><div class="othercredit"><h3 class="othercredit"><span class="firstname">Philippe Wautelet</span></h3><span class="contrib"><a class="ulink" href="http://www.traduc.org/docs/HOWTO/lecture/TimePrecision-HOWTO.html" target="_top">French translation</a></span> <code class="email">&lt;<a class="email" href="mailto:p.wautelet%20at%20fractalzone%20be">p.wautelet at fractalzone be</a>&gt;</code></div><div class="othercredit"><h3 class="othercredit"><span class="firstname">Kemal Ökmen</span></h3><span class="contrib"><a class="ulink" href="http://www.belgeler.org/howto/time-precision-howto.html" target="_top">Turkish translation (türkçe çeviri)</a></span> <code class="email">&lt;<a class="email" href="mailto:kemal%20at%20comu%20edu%20tr">kemal at comu edu tr</a>&gt;</code></div></div></div><div><p class="copyright">Copyright © 2002,2003,2004,2005 Avi Alkalay</p></div><div><p class="pubdate">2005-11-18</p></div><div><div class="revhistory"><table style="border-style:solid; width:100%;" summary="Revision History"><tr><th align="left" valign="top" colspan="3"><b>Revision History</b></th></tr><tr><td align="left">Revision 2005-11-18</td><td align="left">18 Nov 2005</td><td align="left">Avi</td></tr><tr><td align="left" colspan="3">Included link to turkish translation</td></tr><tr><td align="left">Revision 2005-10-12</td><td align="left">12 Oct 2005</td><td align="left">Avi</td></tr><tr><td align="left" colspan="3">The Brazil zic file is now external and updated</td></tr><tr><td align="left">Revision 2005-05-03</td><td align="left">03 May 2005</td><td align="left">Avi</td></tr><tr><td align="left" colspan="3">Included link to french translation</td></tr><tr><td align="left">Revision 1.0.8</td><td align="left">2004-10-29</td><td align="left">Mihaly Gyulai</td></tr><tr><td align="left" colspan="3">Hungarian translation, the chorny section and the very first section</td></tr><tr><td align="left">Revision 1.0.7</td><td align="left">9 Jul 2004</td><td align="left">avi</td></tr><tr><td align="left" colspan="3">
                                  <em><span class="remark">Disclaimer near to license, to let people know they can translate without asking permission.</span></em>
				  <em><span class="remark">Small fixes in some phrases.</span></em>
				</td></tr><tr><td align="left">Revision 1.0.6</td><td align="left">25 Feb 2004</td><td align="left">avi</td></tr><tr><td align="left" colspan="3">Included credits and link to russian translation.</td></tr><tr><td align="left">Revision 1.0.5</td><td align="left">05 Jul 2003</td><td align="left">avi</td></tr><tr><td align="left" colspan="3">Changed public time servers list URL. Added pool.ntp.org.</td></tr><tr><td align="left">Revision 1.0.4</td><td align="left">21 Dec 2002</td><td align="left">avi</td></tr><tr><td align="left" colspan="3">Added japanese translation link and credits.</td></tr><tr><td align="left">Revision 1.0.3</td><td align="left">24 Aug 2002</td><td align="left">avi</td></tr><tr><td align="left" colspan="3">Fixed wrong screen and programlisting widths.</td></tr><tr><td align="left">Revision 1.0.2</td><td align="left">04 Aug 2002</td><td align="left">avi</td></tr><tr><td align="left" colspan="3">Link to public time servers page.</td></tr><tr><td align="left">Revision 1.0.1</td><td align="left">07 May 2002</td><td align="left">avi</td></tr><tr><td align="left" colspan="3">Final XML conversion. Files reorganization.</td></tr><tr><td align="left">Revision 1.0</td><td align="left">28 Apr 2002</td><td align="left">avi</td></tr><tr><td align="left" colspan="3">Finalized image.</td></tr><tr><td align="left">Revision 0.8</td><td align="left">27 Apr 2002</td><td align="left">avi</td></tr><tr><td align="left" colspan="3">Switched from ntpdc example to ntpq, based on contributions.</td></tr><tr><td align="left">Revision 0.8.1</td><td align="left">20 Apr 2002</td><td align="left">avi</td></tr><tr><td align="left" colspan="3">Improved graphic. Links to other doc locations.</td></tr><tr><td align="left">Revision 0.8</td><td align="left">14 Apr 2002</td><td align="left">avi</td></tr><tr><td align="left" colspan="3">Beter tunning of NTP graphic.</td></tr><tr><td align="left">Revision 0.76</td><td align="left">13 Apr 2002</td><td align="left">avi</td></tr><tr><td align="left" colspan="3">Inclusion of architecture graphic.</td></tr><tr><td align="left">Revision 0.75</td><td align="left">10 Apr 2002</td><td align="left">avi</td></tr><tr><td align="left" colspan="3">Spell checked. Using DocBook XSLT 1.50.</td></tr><tr><td align="left">Revision 0.65</td><td align="left">31 Mar 2002</td><td align="left">avi</td></tr><tr><td align="left" colspan="3">Upgraded to XML 4.1.2 DocBook format</td></tr><tr><td align="left">Revision 0.6</td><td align="left">29 Mar 2002</td><td align="left">avi</td></tr><tr><td align="left" colspan="3">Finished timezone mechanism on Linux. Created appendix. Now only drawings are needed.</td></tr><tr><td align="left">Revision 0.4</td><td align="left">24 Mar 2002</td><td align="left">avi</td></tr><tr><td align="left" colspan="3">All skeleton defined. All command examples written.</td></tr><tr><td align="left">Revision 0.2</td><td align="left">19 Mar 2002</td><td align="left">avi</td></tr><tr><td align="left" colspan="3">First DocBook version</td></tr></table></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#why">1. Why do We Need a Precise Clock?</a></span></dt><dd><dl><dt><span class="section"><a href="#why.pcclock">1.1. On What Factors Does the Hardware-Clock Depend?</a></span></dt></dl></dd><dt><span class="section"><a href="#time">2. Computer Global Date and Time Concept</a></span></dt><dt><span class="section"><a href="#tz">3. What are Time Zones?</a></span></dt><dd><dl><dt><span class="section"><a href="#tz.dst">3.1. Daylight Savings Time</a></span></dt><dt><span class="section"><a href="#tz.examples">3.2. Time Zones Examples</a></span></dt><dt><span class="section"><a href="#tz.linux">3.3. Time Zone Mechanism on Linux</a></span></dt></dl></dd><dt><span class="section"><a href="#set">4. The Correct Settings for Your Linux Box</a></span></dt><dd><dl><dt><span class="section"><a href="#set.tz">4.1. Setting Time Zone</a></span></dt><dt><span class="section"><a href="#set.hwclock">4.2. Setting the Hardware Clock</a></span></dt></dl></dd><dt><span class="section"><a href="#ntp">5. Accurate Global Time Synchronization</a></span></dt><dd><dl><dt><span class="section"><a href="#ntp.ntp">5.1. <acronym class="acronym">NTP</acronym>: The Network Time Protocol</a></span></dt><dt><span class="section"><a href="#ntp.arch">5.2. Building a Simple Time Synchronization Architecture</a></span></dt><dt><span class="section"><a href="#ntp.configs">5.3. <acronym class="acronym">NTP</acronym> Configurations</a></span></dt><dt><span class="section"><a href="#ntp.watch">5.4. Watching Your Box Synchronizing</a></span></dt><dt><span class="section"><a href="#ntp.boot">5.5. Configure to Automatically Run <acronym class="acronym">NTP</acronym> at Boot</a></span></dt></dl></dd><dt><span class="section"><a href="#ntp.chrony">6. Precise Time with the <span class="command"><strong>chrony</strong></span> Program</a></span></dt><dd><dl><dt><span class="section"><a href="#ntp.chrony.diff">6.1. How <span class="command"><strong>chrony</strong></span> Differs from the <span class="command"><strong>ntp</strong></span> Suite?</a></span></dt><dt><span class="section"><a href="#ntp.chrony.how">6.2. How to Use <span class="command"><strong>chrony</strong></span>?</a></span></dt></dl></dd><dt><span class="appendix"><a href="#about">A. About this Document</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="why"></a>1. Why do We Need a Precise Clock?</h2></div></div></div><p>If our computer never connects to other computers (or other devices that use a clock), the precision of the clock is not critical itself, it depends on the need of the user. However, programs that some way use the net are dependent on a precise date and time. Some examples, when you may need precise clock:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Softwares that deal with transactions</p></li><li class="listitem"><p>Commercial applications (e.g. eBay)</p></li><li class="listitem"><p>Mail and messaging-related client and servers</p></li><li class="listitem"><p>Websites that use cookies</p></li><li class="listitem"><p>Distributed web applications</p></li><li class="listitem"><p>Web services</p></li><li class="listitem"><p>Distributed component-based applications as <acronym class="acronym">J2EE</acronym>, <acronym class="acronym">.NET</acronym>, etc</p></li><li class="listitem"><p>Advanced modern and paralel filesystems, as AFS, DFS, GFS, GPFS, etc</p></li></ul></div><p>And of course, to use the computer to adjust our wristwatch clock.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="why.pcclock"></a>1.1. On What Factors Does the Hardware-Clock Depend?</h3></div></div></div><p>Here we talk a little about the hardware-clock precision.</p><p>In PCs we find quartz-oscillators maintaining the hardware clock. The frequency of the oscillator is divided, and at the end we get a counter stepping once in one second (in reality it is more complicated, but now it's enough for us). The clock-oscillator runs even if the computer is switched off, so after starting the computer (and starting Linux) the hardware clock can give the values of the actual time. The stability of this clock is mostly dependent on the temperature of its surroundings, but it is also dependent on the air-pressure and the stability of the power supply voltage. The hardware clock is inaccurate in short term, however in the long term it shows a certain difference from the exact time. As we continously can compare the frequency of our hardware clock and an exact clock, we can calculate the frequency of the hardware clock and so to create the exact time. If this exact clock is inside your LAN (local area network), the accuracy of your Linux machine clock is within 0.01 sec. If you use the internet for this purpose, the accuracy of your clock will be within 0.2 sec regarding to the exact time.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="time"></a>2. Computer Global Date and Time Concept</h2></div></div></div><p>To determine the current time for some planet region, a computer needs exactly this two informations:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Correct <acronym class="acronym">UTC</acronym> (universal time as in Greenwich, but not <acronym class="acronym">GMT</acronym>) time</p></li><li class="listitem"><p>Region's current Time Zone</p></li></ol></div><p>For computers, there is also the hardware clock, which is used as a base by the OS to set its time.</p><p>OS date and time (we'll use only date <span class="emphasis"><em>or</em></span> time from now on) is set on boot, by some script that reads the hardware clock, makes Time Zone calculations (there is no time zone data stored in <acronym class="acronym">BIOS</acronym>) and sets the OS. After this synchronization, <acronym class="acronym">BIOS</acronym> and OS time are independent from each other. So after a while they may have some seconds of difference. Which one is correct? If you don't make special configurations, none of them.</p><p>We'll discuss here how to make them both <span class="emphasis"><em>globally 100% accurate</em></span>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tz"></a>3. What are Time Zones?</h2></div></div></div><p>Time Zones are a geographical world globe division of 15<sup>o</sup> each, starting at Greenwich, in England, created to help people know what time is it now in another part of the world.</p><p>Nowadays it is much more a political division than geographical, because sometimes people needs to have the same time as other people in not-so-far locations. And for energy savings reasons, we have today the <a class="link" href="#tz.dst" title="3.1. Daylight Savings Time">Daylight Savings Time</a>, that are also a Time Zone variation.</p><p>Time Zones are usually defined by your country government or some astronomical institute, and is represented by 3 or 4 letters. See <a class="xref" href="#tz.examples" title="3.2. Time Zones Examples">Section 3.2, &#8220;Time Zones Examples&#8221;</a> for examples.</p><p>Use the <a class="ulink" href="http://www.timezoneconverter.com/" target="_top">timezoneconverter.com</a> to know what time is it now at any part of the globe.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="tz.dst"></a>3.1. Daylight Savings Time</h3></div></div></div><p>For energy savings reasons, governments created the Daylight Savings Time. Our clocks are forwarded one hour, and this makes our days look longer. In fact, what really happens is only a Time Zone change. The primitive time (<acronym class="acronym">UTC</acronym>) is still, and will allways be, the same.</p><p>Later we'll see how to enable and disable <acronym class="acronym">DST</acronym> automatically in Linux.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="tz.examples"></a>3.2. Time Zones Examples</h3></div></div></div><p>There is nothing better than examples:</p><div class="table"><a name="tz.ex.br"></a><p class="title"><b>Table 1. Brazilian Time Zones. Shifts relative to <acronym class="acronym">UTC</acronym></b></p><div class="table-contents"><table class="table" summary="Brazilian Time Zones. Shifts relative to UTC" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Name and Shift</th><th><a class="link" href="#tz.dst" title="3.1. Daylight Savings Time"><acronym class="acronym">DST</acronym></a> Name and Shift</th><th>Locations</th></tr></thead><tbody><tr><td>BREST -2:00</td><td>BREDT -1:00</td><td>Fernando de Noronha</td></tr><tr><td>BRST -3:00</td><td>BRDT -2:00</td><td>São Paulo, Rio, Brasilia, Minas Gerais, North East Region, South Region,etc</td></tr><tr><td>BRWST -4:00</td><td>BRWDT -3:00</td><td>West Region</td></tr><tr><td>BRAST -5:00</td><td>BRADT -4:00</td><td>Acre</td></tr></tbody></table></div></div><br class="table-break"><p>Please send me contributions like this table for US Time Zones.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="tz.linux"></a>3.3. Time Zone Mechanism on Linux</h3></div></div></div><p>Linux systems uses the GLIBC dynamic Time Zones, based on <code class="filename">/etc/localtime</code>. This file is a link to (or a copy of) a zone information file, usually located under <code class="filename">/usr/share/zoneinfo</code> directory.</p><p>From a geophysical perspective, there is only 360<sup>o</sup>/15<sup>o</sup>=24 Time Zones in the world. But to make things easy to people, and to accommodate all the political variations (like Daylight Savings Time), you'll find hundreds of zoneinfo files in <code class="filename">/usr/share/zoneinfo</code>, each for every world city, country, etc.</p><p>Some countries, like Brazil, don't have a fixed day to start Daylight Savings Time. It is defined every year, a couple of months before summer, and you may end up in a situation you'll have to change your zoneinfo file, which was compiled by <span class="command"><strong>zic</strong></span> from a text file like this.</p><div class="example"><a name="idm266"></a><p class="title"><b>Example 1. Brazilian Zone Info text file</b></p><div class="example-contents"><pre class="programlisting">
# Brazil Time Zones
#
# Brazilian Time Zones are:
# BREST: East of Brasilia. Fernando de Noronha.
# BRST:  Brasilia, São Paulo, Rio, Northeast, South etc
# BRWST: West of Brasilia. Mato Grosso, Manaus
# BRAST: Acre.
#
# In daylight saving time, letter 'S' changes to 'D'.
# All the brazilian daylight changes can be found here:
#   http://pcdsh01.on.br/
#   http://pcdsh01.on.br/verao1.html
#
# To install, make:
#
# # zic Brazil.txt
#
# Zone files will be installed in /usr/share/zoneinfo (depends on your
# distribution). Then, make a symbolic link from your zone to /etc/localtime:
#
# # cd /etc; ln -sf /usr/share/zoneinfo/Brazil/Brasilia localtime
#
#
# If you have updates and new standards to this file please send to
# Avi Alkalay (avi @ unix.sh)
# Fred Neves (fneves @ registro.br)
#
# Last update: 12 Oct 2005
#
#
# This file is available at
#
# http://avi.alkalay.net/software/zoneinfo/
#

# Rule  NAME    FROM    TO      TYPE    IN    ON      AT      SAVE    LETTER/S
Rule    Brazil  1931    1932    -       Oct    3      00:00   1:00    D
Rule    Brazil  1932    1933    -       Mar   31      00:00   0       S
Rule    Brazil  1949    only    -       Dec    1      00:00   1:00    D
Rule    Brazil  1950    only    -       Apr   30      00:00   0       S
Rule    Brazil  1950    1952    -       Dec    1      00:00   1:00    D
Rule    Brazil  1951    only    -       Apr   16      00:00   0       S
Rule    Brazil  1952    only    -       Mar   31      00:00   0       S
Rule    Brazil  1953    only    -       Feb   28      00:00   0       S
Rule    Brazil  1963    only    -       Oct   23      00:00   1:00    D
Rule    Brazil  1964    only    -       Mar    1      00:00   0       S
Rule    Brazil  1965    only    -       Jan   31      00:00   1:00    D
Rule    Brazil  1965    only    -       Mar   31      00:00   0       S
Rule    Brazil  1965    only    -       Dec    1      00:00   1:00    D
Rule    Brazil  1966    1968    -       Mar    1      00:00   0       S
Rule    Brazil  1966    1967    -       Nov    1      00:00   1:00    D
Rule    Brazil  1984    only    -       Nov    2      00:00   1:00    D
Rule    Brazil  1985    only    -       Mar   15      00:00   0       S
Rule    Brazil  1985    only    -       Nov    2      00:00   1:00    D
Rule    Brazil  1986    only    -       Mar   15      00:00   0       S
Rule    Brazil  1986    only    -       Oct   25      00:00   1:00    D
Rule    Brazil  1987    only    -       Feb   14      00:00   0       S
Rule    Brazil  1987    only    -       Oct   25      00:00   1:00    D
Rule    Brazil  1988    only    -       Feb    7      00:00   0       S
Rule    Brazil  1988    only    -       Oct   16      00:00   1:00    D
Rule    Brazil  1989    only    -       Jan   29      00:00   0       S
Rule    Brazil  1989    only    -       Oct   15      00:00   1:00    D
Rule    Brazil  1990    only    -       Feb   11      00:00   0       S
Rule    Brazil  1990    only    -       Oct   21      00:00   1:00    D
Rule    Brazil  1991    only    -       Feb   17      00:00   0       S
Rule    Brazil  1991    only    -       Oct   20      00:00   1:00    D
Rule    Brazil  1992    only    -       Feb    9      00:00   0       S
Rule    Brazil  1992    only    -       Oct   25      00:00   1:00    D
Rule    Brazil  1993    only    -       Jan   31      00:00   0       S
Rule    Brazil  1993    only    -       Oct   17      00:00   1:00    D
Rule    Brazil  1994    only    -       Feb   20      00:00   0       S
Rule    Brazil  1994    only    -       Oct   16      00:00   1:00    D
Rule    Brazil  1995    only    -       Feb   19      00:00   0       S
Rule    Brazil  1995    only    -       Oct   15      00:00   1:00    D
Rule    Brazil  1996    only    -       Feb   11      00:00   0       S
Rule    Brazil  1996    only    -       Oct   06      00:00   1:00    D
Rule    Brazil  1997    only    -       Feb   16      00:00   0       S
Rule    Brazil  1997    only    -       Oct   06      00:00   1:00    D
Rule    Brazil  1998    only    -       Mar   01      00:00   0       S
Rule    Brazil  1998    only    -       Oct   11      00:00   1:00    D
Rule    Brazil  1999    only    -       Feb   21      00:00   0       S
Rule    Brazil  1999    only    -       Oct    3      00:00   1:00    D
Rule    Brazil  2000    only    -       Feb   27      00:00   0       S
Rule    Brazil  2000    only    -       Oct    8      00:00   1:00    D
Rule    Brazil  2001    only    -       Feb   18      00:00   0       S
Rule    Brazil  2001    only    -       Oct   14      00:00   1:00    D
Rule    Brazil  2002    only    -       Feb   17      00:00   0       S
Rule    Brazil  2002    only    -       Nov    3      00:00   1:00    D
Rule    Brazil  2003    only    -       Feb   16      00:00   0       S
Rule    Brazil  2003    only    -       Oct   19      00:00   1       D
Rule    Brazil  2004    only    -       Feb   15      00:00   0       S
Rule    Brazil  2004    only    -       Nov    2      00:00   1       D
Rule    Brazil  2005    only    -       Feb   20      00:00   0       S
Rule    Brazil  2005    only    -       Oct   16      00:00   1       D
Rule    Brazil  2006    only    -       Feb   19      00:00   0       S



# Zone  NAME                           GMTOFF  RULES/SAVE    FORMAT  [UNTIL]
Zone    Brazil/DeNoronha               -2:00   Brazil        BRE%sT
Zone    posix/Brazil/DeNoronha         -2:00   Brazil        BRE%sT
Zone    right/Brazil/DeNoronha         -2:00   Brazil        BRE%sT

Zone    America/Sao_Paulo              -3:00   Brazil        BR%sT
Zone    America/Rio_de_Janeiro         -3:00   Brazil        BR%sT
Zone    America/Brasilia               -3:00   Brazil        BR%sT
Zone    posix/America/Sao_Paulo        -3:00   Brazil        BR%sT
Zone    posix/America/Rio_de_Janeiro   -3:00   Brazil        BR%sT
Zone    posix/America/Salvador         -3:00   Brazil        BR%sT
Zone    posix/America/Brasilia         -3:00   Brazil        BR%sT
Zone    posix/Brazil/Central           -3:00   Brazil        BR%sT
Zone    posix/Brazil/Brasilia          -3:00   Brazil        BR%sT
Zone    posix/Brazil/Sao_Paulo         -3:00   Brazil        BR%sT
Zone    posix/Brazil/Salvador          -3:00   Brazil        BR%sT
Zone    posix/Brazil/Rio_de_Janeiro    -3:00   Brazil        BR%sT
Zone    right/America/Sao_Paulo        -3:00   Brazil        BR%sT
Zone    right/America/Rio_de_Janeiro   -3:00   Brazil        BR%sT
Zone    right/America/Salvador         -3:00   Brazil        BR%sT
Zone    right/America/Brasilia         -3:00   Brazil        BR%sT
Zone    right/Brazil/Central           -3:00   Brazil        BR%sT
Zone    right/Brazil/Brasilia          -3:00   Brazil        BR%sT
Zone    right/Brazil/Sao_Paulo         -3:00   Brazil        BR%sT
Zone    right/Brazil/Salvador          -3:00   Brazil        BR%sT
Zone    right/Brazil/Rio_de_Janeiro    -3:00   Brazil        BR%sT
Zone    Brazil/Central                 -3:00   Brazil        BR%sT
Zone    Brazil/Brasilia                -3:00   Brazil        BR%sT
Zone    Brazil/Sao_Paulo               -3:00   Brazil        BR%sT
Zone    Brazil/Rio_de_Janeiro          -3:00   Brazil        BR%sT
Zone    Brazil/Salvador                -3:00   Brazil        BR%sT
Zone    Brazil/East                    -3:00   Brazil        BR%sT
Zone    posix/Brazil/East              -3:00   Brazil        BR%sT
Zone    right/Brazil/East              -3:00   Brazil        BR%sT

Zone    Brazil/West                    -4:00   Brazil        BRW%sT
Zone    Brazil/Manaus                  -4:00   Brazil        BRW%sT
Zone    Brazil/Rondonia                -4:00   Brazil        BRW%sT
Zone    Brazil/Roraima                 -4:00   Brazil        BRW%sT
Zone    Brazil/Mato_Grosso             -4:00   Brazil        BRW%sT
Zone    posix/Brazil/Manaus            -4:00   Brazil        BRW%sT
Zone    posix/Brazil/Mato_Grosso       -4:00   Brazil        BRW%sT
Zone    right/Brazil/Manaus            -4:00   Brazil        BRW%sT
Zone    right/Brazil/Mato_Grosso       -4:00   Brazil        BRW%sT
Zone    posix/America/Manaus           -4:00   Brazil        BRW%sT
Zone    right/America/Manaus           -4:00   Brazil        BRW%sT

Zone    Brazil/Acre                    -5:00   Brazil        BRA%sT

				</pre></div></div><br class="example-break"><p>The <span class="command"><strong>Rule</strong></span> block defines the date and time we change the Time Zone, while in the <span class="command"><strong>Zone</strong></span> block we reference the <span class="command"><strong>Rule</strong></span> will manage it. Note that the <span class="command"><strong>Zone</strong></span> name is actually the file name under <code class="filename">/usr/share/zoneinfo</code> directory, and here we defined several different names for the same Time Zone, just to be easyer for people to find their zone.</p><p>This file's comments explains how to install these time zones, using the <span class="command"><strong>zic</strong></span> zoneinfo compiler (which already installs them also). To make it effective, you only have to link (or copy) the zoneinfo file to <code class="filename">/etc/localtime</code>. In some distributions, there is a higher level (and preferred) way to set the Time Zone, described in <a class="xref" href="#set.tz" title="4.1. Setting Time Zone">Section 4.1, &#8220;Setting Time Zone&#8221;</a>.</p><p>After making <code class="filename">/etc/localtime</code> pointing to the correct zoneinfo file, you are already under that zone rules and <acronym class="acronym">DST</acronym> changes are automatic -- you don't have to change time manually.</p><p>The following command sequence shows Linux Time Zone mechanics dynamism. Note they were all issued in less than one minute:</p><pre class="screen"><code class="prompt">bash$ </code><span class="command"><strong>ls -al /etc/localtime</strong></span>
lrwxrwxrwx  1 root root 35 May 22  2001 /etc/localtime -&gt; <span class="emphasis"><em>/usr/share/zoneinfo/Brazil/Brasilia</em></span>
<code class="prompt">bash$ </code><span class="command"><strong>date</strong></span>
Fri Mar 29 20:13:38 <span class="emphasis"><em>BRST</em></span> 2002
<code class="prompt">bash# </code><span class="command"><strong>ln -sf /usr/share/zoneinfo/GMT /etc/localtime</strong></span>
<code class="prompt">bash$ </code><span class="command"><strong>date</strong></span>
Fri Mar 29 23:13:47 <span class="emphasis"><em>GMT</em></span> 2002
<code class="prompt">bash# </code><span class="command"><strong>ln -sf /usr/share/zoneinfo/Brazil/Brasilia /etc/localtime</strong></span>
<code class="prompt">bash$ </code><span class="command"><strong>date</strong></span>
Fri Mar 29 20:14:03 <span class="emphasis"><em>BRST</em></span> 2002</pre><p>At 20:13, I was in my default brazilian Time Zone (BRST), then I switched to GMT and my system time changed to 23:13! When your Time Zone enters DST, you'll see a similar effect, but the rules are all inside your Time Zone (<code class="filename">/etc/localtime</code> link doesn't change like this example).</p><p>An application running in this machine (eg. web-server generating access logs) will feel this change, so it is very important for developers to remember that the full Time Concept is the current <span class="emphasis"><em>time</em></span> plus current <span class="emphasis"><em>Time Zone</em></span>, as described in <a class="xref" href="#time" title="2. Computer Global Date and Time Concept">Section 2, &#8220;Computer Global Date and Time Concept&#8221;</a>.</p><p>In the end, I switched back to my correct Time Zone.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="set"></a>4. The Correct Settings for Your Linux Box</h2></div></div></div><p>For any OS installation, you must know your Time Zone. This is expressed in terms of a city, a state or a country. You must also decide how to set <acronym class="acronym">BIOS</acronym> time, and we may follow two strategies here:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em>Linux Only Machine</em></span></span></dt><dd><p>In this case you should set <acronym class="acronym">BIOS</acronym> time to <acronym class="acronym">UTC</acronym> time. <acronym class="acronym">DST</acronym> changes will be dynamically managed by <a class="link" href="#tz.linux" title="3.3. Time Zone Mechanism on Linux">Time Zone configurations</a>.</p></dd><dt><span class="term"><span class="emphasis"><em>Dual Boot Linux and MS Windows Machine</em></span></span></dt><dd><p>Windows handles time in a more primitive way than Linux. For Windows, <acronym class="acronym">BIOS</acronym> time is allways your local time, so <acronym class="acronym">DST</acronym> changes are more aggressive because they directly change hardware clock. And since both Linux and Windows initially get and set time from the hardware, when they are together, Linux must handle it in the same way. So set <acronym class="acronym">BIOS</acronym> time to your localtime.</p></dd></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="set.tz"></a>4.1. Setting Time Zone</h3></div></div></div><p>On Red Hat Linux and derived systems, you can set the hardware clock strategy and Time Zone using the <span class="command"><strong>timeconfig</strong></span> command, that shows a user-friendly dialog. You can also use it non-interactively:</p><div class="example"><a name="idm333"></a><p class="title"><b>Example 2. Time Configuration Tool</b></p><div class="example-contents"><pre class="screen"><code class="prompt">bash# </code><span class="command"><strong>timeconfig "Brasil/East"</strong></span>   # set HC to localtime, and TZ to "Brazil/East"
<code class="prompt">bash# </code><span class="command"><strong>timeconfig --utc "Brasil/East"</strong></span>   # set HC to UTC, and TZ to "Brazil/East"</pre></div></div><br class="example-break"><p>Anyway, it changes <code class="filename">/etc/sysconfig/clock</code> file that is read at boot time. You can edit it by hand, and that is how it looks:</p><div class="example"><a name="idm342"></a><p class="title"><b>Example 3. <code class="filename">/etc/sysconfig/clock</code> file</b></p><div class="example-contents"><pre class="programlisting">
ZONE="Brazil/East"
UTC=true
ARC=false</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="set.hwclock"></a>4.2. Setting the Hardware Clock</h3></div></div></div><p>I encourage you to set your hardware clock only after understanding how to get accurate time, described on <a class="xref" href="#ntp" title="5. Accurate Global Time Synchronization">Section 5, &#8220;Accurate Global Time Synchronization&#8221;</a>.</p><p>The <span class="command"><strong>hwclock</strong></span> command reads and sets the hardware clock, based on several options you give to it, documented in its man page. But you don't have to use it if you have a modern Linux distribution. After defining your hardware clock strategy and Time Zone, you can use the high level <span class="command"><strong>setclock</strong></span> command to correctly set your hardware clock. You don't need to pass any parameters because <span class="command"><strong>setclock</strong></span> intelligently calls <span class="command"><strong>hwclock</strong></span> to set the <acronym class="acronym">BIOS</acronym> based on your OS current date and time. <span class="emphasis"><em>So you should always use the <span class="command"><strong>setclock</strong></span> command.</em></span></p><p>But if you are a minimalist and prefer hard work, here are some <span class="command"><strong>hwclock</strong></span> examples:</p><div class="example"><a name="idm360"></a><p class="title"><b>Example 4. <span class="command">setclock</span> and <span class="command">hwclock</span> usage</b></p><div class="example-contents"><pre class="screen"><code class="prompt">bash# </code><span class="command"><strong>setclock</strong></span>					# The easy way to set HC
<code class="prompt">bash# </code><span class="command"><strong>hwclock</strong></span>					# reads HC
<code class="prompt">bash# </code><span class="command"><strong>hwclock --systohc --utc</strong></span>			# set HC with UTC time based on OS current time
<code class="prompt">bash# </code><span class="command"><strong>hwclock --systohc</strong></span>				# set HC with local time based on OS current time
<code class="prompt">bash# </code><span class="command"><strong>hwclock --set --date "21 Oct 2004 21:17"</strong></span>	# set HC with time specified on string</pre></div></div><br class="example-break"><p>Since the OS time is independent from the hardware clock, any <acronym class="acronym">BIOS</acronym> change we make will take place in the next boot.</p><p>Another option to change HC is rebooting and accessing your computer <acronym class="acronym">BIOS</acronym> screens. On <a class="ulink" href="http://ibm.com/servers/eserver/zseries/os/linux/" target="_top">IBM e-server zSeries</a> platforms you'll have to do it on z/VM level, because Linux here runs on virtual machines created by z/VM.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ntp"></a>5. Accurate Global Time Synchronization</h2></div></div></div><p>To have accurate time in all your systems is as important as having a solid network security strategy (achieved by much more than simple firewall boxes). It is one of the primary components of a system administration based on good practices, which leads to organization and security. Specially when administering distributed applications, web-services, or even a distributed security monitoring tool, accurate time is a must.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ntp.ntp"></a>5.1. <acronym class="acronym">NTP</acronym>: The Network Time Protocol</h3></div></div></div><p>We won't discuss here the protocol, but how this wonderful invention, added to the pervasivenes of the Internet, can be useful for us. You can find more about it at <a class="ulink" href="http://www.ntp.org/" target="_top">www.ntp.org</a>.</p><p>Once your system is properly setup, <acronym class="acronym">NTP</acronym> will manage to keep its time accurate, making very small adjustments to not impact the running applications.</p><p>People can get exact time using hardware based on atom's electrons frequency. There is also a method based on <acronym class="acronym">GPS</acronym> (Global Positioning System). The first is more accurate, but the second is pretty good also. Atomic clocks require very special and expensive equipment, but their maintainers (usually universities and research labs) connect them to computers, that run an <acronym class="acronym">NTP</acronym> daemon, and some of them are connected to the Internet, that finally let us access them for free. And this is how we'll synchronize our systems.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ntp.arch"></a>5.2. Building a Simple Time Synchronization Architecture</h3></div></div></div><p>You will need:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>A direct or indirect (through a firewall) connection to the Internet.</p></li><li class="listitem"><p>Choose some <acronym class="acronym">NTP</acronym> servers. You can use the public server <a class="ulink" href="http://www.fortytwo.ch/time/" target="_top">pool.ntp.org</a>, or choose some from the <a class="ulink" href="http://www.eecis.udel.edu/~mills/ntp/clock2a.html" target="_top">stratum 2 public time servers</a> on <acronym class="acronym">NTP</acronym> website. If you don't have an Internet access, your <acronym class="acronym">WAN</acronym> administrator (must be a clever guy) can provide you some internal addresses.</p></li><li class="listitem"><p>Have the <acronym class="acronym">NTP</acronym> package installed in all systems you want to synchronize. You can find RPMs in your favorite Linux distribution CD, or <a class="ulink" href="http://rpmfind.net/linux/rpm2html/search.php?query=ntp" target="_top">make a search</a> on <a class="ulink" href="http://rpmfind.net/" target="_top">rpmfind.net</a>.</p></li></ol></div><p>Here is an example of good architecture:</p><div class="figure"><a name="idm412"></a><p class="title"><b>Figure 1. Local Relay Servers for NTP</b></p><div class="figure-contents"><div align="center"><img src="ntp.png" align="middle" alt="Local Relay Servers for NTP"></div></div></div><br class="figure-break"><p>If you have several machines to synchronize, <span class="emphasis"><em>do not</em></span> make them all access the remote <acronym class="acronym">NTP</acronym> servers you chose. Only 2 of your server farm's machines must access remote <acronym class="acronym">NTP</acronym> servers, and the other machines will sync with these 2. We will call them the <span class="emphasis"><em>Relay Servers</em></span>.</p><p>Your Relay Servers can be any machine already available in your network. <acronym class="acronym">NTP</acronym> consumes low memory and CPU. You don't need a dedicated machine for it.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3><p>It is a good idea to create hostname aliases for your local Relay Servers like ntp1.my.com and ntp2.my.com, and use only these names when configuring the client machines. This way you can move the <acronym class="acronym">NTP</acronym> functionality to a new Relay Server (with a different IP and hostname), without having to reconfigure the clients. Ask your <acronym class="acronym">DNS</acronym> administrator to create such aliases.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ntp.configs"></a>5.3. <acronym class="acronym">NTP</acronym> Configurations</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em>For Your Relay Servers</em></span></span></dt><dd><p>Edit <code class="filename">/etc/ntp.conf</code> and add the remote servers you chose:</p><div class="example"><a name="idm436"></a><p class="title"><b>Example 5. Relay machines' <code class="filename">/etc/ntp.conf</code></b></p><div class="example-contents"><pre class="programlisting">
.
.
server  otherntp.server.org	# A stratum 1 server at server.org
server  ntp.research.gov	# A stratum 2 server at research.gov
.
.</pre></div></div><br class="example-break"><p>Again, you can use the public server <a class="ulink" href="http://www.fortytwo.ch/time/" target="_top">pool.ntp.org</a>, or get a list of <a class="ulink" href="http://www.eecis.udel.edu/~mills/ntp/clock2a.html" target="_top">public stratum 2 time servers</a> from <acronym class="acronym">NTP</acronym> website.</p></dd><dt><span class="term"><span class="emphasis"><em>For Your Clients</em></span></span></dt><dd><p>Edit <code class="filename">/etc/ntp.conf</code> and add your Relay Servers with a standard name:</p><div class="example"><a name="idm450"></a><p class="title"><b>Example 6. Client machines' <code class="filename">/etc/ntp.conf</code></b></p><div class="example-contents"><pre class="programlisting">
.
.
server  ntp1.my.com		# My first local relay
server  ntp2.my.com		# My second local relay
.
.</pre></div></div><br class="example-break"></dd></dl></div><p>If your machine has a UTC time difference bigger than some minutes comparing to the <acronym class="acronym">NTP</acronym> servers, <acronym class="acronym">NTP</acronym> will not work. So you must do a first full sync, and I recommend you to do it in a non-production hour. You need to do it only when you are making the initial <acronym class="acronym">NTP</acronym> setup. Never more:</p><div class="example"><a name="idm458"></a><p class="title"><b>Example 7. First sync</b></p><div class="example-contents"><pre class="screen"><code class="prompt">bash# </code><span class="command"><strong>ntpdate otherntp.research.gov</strong></span>	<a name="sync1"></a><span><img src="images/callouts/1.png" alt="1" border="0"></span>
24 Mar 18:16:36 ntpdate[10254]: step time server 200.100.20.10 offset -15.266188 sec
<code class="prompt">bash# </code><span class="command"><strong>ntpdate otherntp.research.gov</strong></span>	<a name="sync2"></a><span><img src="images/callouts/2.png" alt="2" border="0"></span>
24 Mar 18:16:43 ntpdate[10255]: adjust time server 200.100.20.10 offset -0.000267 sec</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#sync1"><span><img src="images/callouts/1.png" alt="1" border="0"></span></a> </p></td><td valign="top" align="left"><p>First full sync. We were 15 seconds late.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#sync2"><span><img src="images/callouts/2.png" alt="2" border="0"></span></a> </p></td><td valign="top" align="left"><p>Second full sync, just to be sure. Now we are virtually 0 seconds late, which is good.</p></td></tr></table></div></div></div><br class="example-break"><p>The last step is to start or restart the <acronym class="acronym">NTP</acronym> daemons in each machine:</p><pre class="screen">
<code class="prompt">bash# </code><span class="command"><strong>service ntpd restart</strong></span>
			</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ntp.watch"></a>5.4. Watching Your Box Synchronizing</h3></div></div></div><p>Now you have everything setup. <acronym class="acronym">NTP</acronym> will softly keep your machine time synchronized. You can watch this process using the NTP Query (<span class="command"><strong>ntpq</strong></span> command):</p><div class="example"><a name="idm482"></a><p class="title"><b>Example 8. A time synchronization status</b></p><div class="example-contents"><pre class="screen"><code class="prompt">bash# </code><span class="command"><strong>ntpq -p</strong></span>
     remote           refid      st t when poll reach   delay   offset  jitter
==============================================================================
-jj.cs.umb.edu   gandalf.sigmaso  3 u   95 1024  377   31.681  -18.549   1.572
 milo.mcs.anl.go ntp0.mcs.anl.go  2 u  818 1024  125   41.993  -15.264   1.392
-mailer1.psc.edu ntp1.usno.navy.  2 u  972 1024  377   38.206   19.589  28.028
-dr-zaius.cs.wis ben.cs.wisc.edu  2 u  502 1024  357   55.098    3.979   0.333
+taylor.cs.wisc. ben.cs.wisc.edu  2 u  454 1024  347   54.127    3.379   0.047
-ntp0.cis.strath harris.cc.strat  3 u  507 1024  377  115.274   -5.025   1.642
*clock.via.net   .GPS.            1 u  426 1024  377  107.424   -3.018   2.534
 ntp1.conectiv.c 0.0.0.0         16 u    - 1024    0    0.000    0.000 4000.00
+bonehed.lcs.mit .GPS.            1 u  984 1024  377   25.126    0.131  30.939
-world.std.com   204.34.198.40    2 u  119 1024  377   24.229   -6.884   0.421</pre></div></div><br class="example-break"><div class="variablelist"><p class="title"><b>The meaning of each column</b></p><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em>remote</em></span></span></dt><dd><p>Is the name of the remote <acronym class="acronym">NTP</acronym> server. If you use the <code class="option">-n</code> switch, you will see the IP addresses of these servers instead of their hostnames.</p></dd><dt><span class="term"><span class="emphasis"><em>refid</em></span></span></dt><dd><p>Indicates where each server is getting its time right now. It can be a server hostname or something like <acronym class="acronym">.GPS.</acronym>, indicating a Global Positioning System source.</p></dd><dt><span class="term"><span class="emphasis"><em>st</em></span></span></dt><dd><p><span class="emphasis"><em>Stratum</em></span> is a number from 1 to 16, to indicate the remote server precision. 1 is the most accurate, 16 means 'server unreachable'. Your Stratum will be equal to the accurate remote server plus 1. Never connect to a Stratum 1 server, use Stratum 2 servers! Stratum 2 servers are also good for our purposes, and this policy is good for reducing the traffic to the Stratum 1 servers.</p></dd><dt><span class="term"><span class="emphasis"><em>poll</em></span></span></dt><dd><p>The polling interval (in seconds) between time requests. The value will range between the minimum and maximum allowed polling values. Initially the value will be smaller to allow synchronization to occur quickly. After the clocks are 'in sync' the polling value will increase to reduce network traffic and load on popular time servers.</p></dd><dt><span class="term"><span class="emphasis"><em>reach</em></span></span></dt><dd><p>This is an octal representation of an array of 8 bits, representing the last 8 times the local machine tried to reach the server. The bit is set if the remote server was reached.</p></dd><dt><span class="term"><span class="emphasis"><em>delay</em></span></span></dt><dd><p>The amount of time (seconds) needed to receive a response for a "what time is it" request.</p></dd><dt><span class="term"><span class="emphasis"><em>offset</em></span></span></dt><dd><p>The most important value. The difference of time between the local and remote server. In the course of synchronization, the offset time lowers down, indicating that the local machine time is getting more accurate.</p></dd><dt><span class="term"><span class="emphasis"><em>jitter</em></span></span></dt><dd><p>Dispersion, also called Jitter, is a measure of the statistical variance of the offset across several successive request/response pairs. Lower dispersion values are preferred over higher dispersion values. Lower dispersions allow more accurate time synchronization.</p></dd></dl></div><div class="variablelist"><p class="title"><b>The meaning of the signs before server hostname</b></p><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em>-</em></span></span></dt><dd><p>Means the local NTP service doesn't like this server very much</p></dd><dt><span class="term"><span class="emphasis"><em>+</em></span></span></dt><dd><p>Means the local NTP service likes this server</p></dd><dt><span class="term"><span class="emphasis"><em>x</em></span></span></dt><dd><p>Marks a bad host</p></dd><dt><span class="term"><span class="emphasis"><em>*</em></span></span></dt><dd><p>Indicates the current favorite</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ntp.boot"></a>5.5. Configure to Automatically Run <acronym class="acronym">NTP</acronym> at Boot</h3></div></div></div><p>You may want to have <acronym class="acronym">NTP</acronym> running all the time even if you reboot your machine. On each machine, do the following:</p><pre class="screen">
<code class="prompt">bash# </code><span class="command"><strong>chkconfig --level 2345 ntpd on</strong></span>
			</pre><p>This will ensure autostart.</p><p>If your machine is up and running for a long time (months, years) without rebooting, you'll find a big discrepancy between the inaccurate hardware clock and the (now very accurate) system time. Modern Linux distributions copy OS time to the HC everytime the system is shutdown, using a <a class="link" href="#set.hwclock" title="4.2. Setting the Hardware Clock">mechanism similar to the <span class="command"><strong>setclock</strong></span> command</a>. This way, in the next OS boot, you'll get date and time almost as accurate as it was when you shutdown the machine.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ntp.chrony"></a>6. Precise Time with the <span class="command"><strong>chrony</strong></span> Program</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ntp.chrony.diff"></a>6.1. How <span class="command"><strong>chrony</strong></span> Differs from the <span class="command"><strong>ntp</strong></span> Suite?</h3></div></div></div><p><span class="command"><strong>chrony</strong></span> also uses the <acronym class="acronym">NTP</acronym> protocol, and is also designed to make Linux clock more accurate. It is also suitable for systems that do not have an Internet connection. Then the source of the exact time can be any accurate clock, from which we can read the time and type it to the program. In addition, it is also capable of calculating the inaccuracy of the hardware clock, and based on that, adjust the hardware clock at boot time.</p><p><span class="command"><strong>chrony</strong></span> 1.20 does not support built-in hardware clocks like GPS and DCF receivers, but the structure of the program makes such development possible.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ntp.chrony.how"></a>6.2. How to Use <span class="command"><strong>chrony</strong></span>?</h3></div></div></div><p><span class="command"><strong>chrony</strong></span> consists of two parts: <span class="command"><strong>chronyd</strong></span> daemon and a user interface <span class="command"><strong>chronyc</strong></span>.</p><p>You can find <span class="command"><strong>chrony</strong></span> at <a class="ulink" href="http://chrony.sunsite.dk/index.php/" target="_top">chrony.sunsite.dk/index.php</a></p></div></div><div class="appendix"><h2 class="title" style="clear: both"><a name="about"></a>A. About this Document</h2><p>Copyright 2002, Avi Alkalay.</p><p>This document must be distributed under the terms of <a class="ulink" href="http://www.gnu.org/copyleft/fdl.html" target="_top">GNU Free Documentation License</a>. Please translate, adapt, improve, redistribute using the original XML DocBook source right bellow. Let me know if you want me to put a link to your translation/adaptation/improvement here.</p><p>This document is published in the following locations:
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://avi.alkalay.net/linux/docs/TimePrecision/" target="_top">Official site</a> [<a class="ulink" href="http://avi.alkalay.net/linux/docs/TimePrecision/timeprecision-20051118.tar.gz" target="_top">XML (DocBook) Source</a>]</p></li><li class="listitem"><p><a class="ulink" href="http://en.tldp.org/HOWTO/TimePrecision-HOWTO/" target="_top">TLDP, as a HOWTO</a> [<a class="ulink" href="http://www.ibiblio.org/pub/Linux/docs/HOWTO/other-formats/html_single/TimePrecision-HOWTO.html" target="_top">single page</a>] [<a class="ulink" href="http://www.ibiblio.org/pub/Linux/docs/HOWTO/other-formats/pdf/TimePrecision-HOWTO.pdf" target="_top">PDF</a>]</p></li><li class="listitem"><p>Philippe Wautelet &lt;p.wautelet fractalzone.be&gt; <a class="ulink" href="http://www.traduc.org/docs/HOWTO/lecture/TimePrecision-HOWTO.html" target="_top">french translation</a> [<a class="ulink" href="http://www.traduc.org/cgi-bin/viewcvs.cgi/guides_pratiques/TimePrecision-HOWTO.xml" target="_top">XML (DocBook) Source</a>]</p></li><li class="listitem"><p>Takeo Nakano &lt;nakano at apm.seikei.ac.jp&gt; <a class="ulink" href="http://www.linux.or.jp/JF/JFdocs/TimePrecision-HOWTO/" target="_top">japanese translation</a> [<a class="ulink" href="http://www.linux.or.jp/JF/JFdocs/TimePrecision-HOWTO.txt" target="_top">txt version</a>]</p></li><li class="listitem"><p>SHAKI &lt;sha-ki at narod.ru&gt; <a class="ulink" href="http://computerlib.narod.ru/html/linuxtime.htm" target="_top">russian translation</a></p></li><li class="listitem"><p>Mihaly Gyulai &lt;gyulai kukac fbi pont hu&gt; <a class="ulink" href="http://tldp.fsf.hu/HOWTO/TimePrecision-HOWTO-hu/index.html" target="_top">Hungarian translation - magyar forditas</a></p></li><li class="listitem"><p>Kemal Ökmen &lt;kemal AT comu edu tr&gt; <a class="ulink" href="http://www.belgeler.org/howto/time-precision-howto.html" target="_top">Turkish translation - Türkçe çeviri</a></p></li></ul></div><p>
		</p><p>When translating, feel free to change all brazilian-related configuration examples to your country's. And please send me an e-mail containing the translator's name, e-mail address, the language that this doc was translated to, the phrase "[YOUR LANGUAGE] translation" in your language, all UTF-8 encoded. This way I can put, in the original document, in your language, a link to your translation. Also, please let the <a class="ulink" href="http://tldp.org" target="_top">TLDP</a> folks be aware of your translation, so they can add it to the collection of HOWTOs in your language.</p></div></div></body></html>
