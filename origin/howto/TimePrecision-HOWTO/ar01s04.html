<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>4. The Correct Settings for Your Linux Box</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Managing Accurate Date and Time"><link rel="up" href="index.html" title="Managing Accurate Date and Time"><link rel="prev" href="ar01s03.html" title="3. What are Time Zones?"><link rel="next" href="ar01s05.html" title="5. Accurate Global Time Synchronization"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4. The Correct Settings for Your Linux Box</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s03.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s05.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="set"></a>4. The Correct Settings for Your Linux Box</h2></div></div></div><p>For any OS installation, you must know your Time Zone. This is expressed in terms of a city, a state or a country. You must also decide how to set <acronym class="acronym">BIOS</acronym> time, and we may follow two strategies here:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em>Linux Only Machine</em></span></span></dt><dd><p>In this case you should set <acronym class="acronym">BIOS</acronym> time to <acronym class="acronym">UTC</acronym> time. <acronym class="acronym">DST</acronym> changes will be dynamically managed by <a class="link" href="ar01s03.html#tz.linux" title="3.3. Time Zone Mechanism on Linux">Time Zone configurations</a>.</p></dd><dt><span class="term"><span class="emphasis"><em>Dual Boot Linux and MS Windows Machine</em></span></span></dt><dd><p>Windows handles time in a more primitive way than Linux. For Windows, <acronym class="acronym">BIOS</acronym> time is allways your local time, so <acronym class="acronym">DST</acronym> changes are more aggressive because they directly change hardware clock. And since both Linux and Windows initially get and set time from the hardware, when they are together, Linux must handle it in the same way. So set <acronym class="acronym">BIOS</acronym> time to your localtime.</p></dd></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="set.tz"></a>4.1. Setting Time Zone</h3></div></div></div><p>On Red Hat Linux and derived systems, you can set the hardware clock strategy and Time Zone using the <span class="command"><strong>timeconfig</strong></span> command, that shows a user-friendly dialog. You can also use it non-interactively:</p><div class="example"><a name="idm333"></a><p class="title"><b>Example 2. Time Configuration Tool</b></p><div class="example-contents"><pre class="screen"><code class="prompt">bash# </code><span class="command"><strong>timeconfig "Brasil/East"</strong></span>   # set HC to localtime, and TZ to "Brazil/East"
<code class="prompt">bash# </code><span class="command"><strong>timeconfig --utc "Brasil/East"</strong></span>   # set HC to UTC, and TZ to "Brazil/East"</pre></div></div><br class="example-break"><p>Anyway, it changes <code class="filename">/etc/sysconfig/clock</code> file that is read at boot time. You can edit it by hand, and that is how it looks:</p><div class="example"><a name="idm342"></a><p class="title"><b>Example 3. <code class="filename">/etc/sysconfig/clock</code> file</b></p><div class="example-contents"><pre class="programlisting">
ZONE="Brazil/East"
UTC=true
ARC=false</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="set.hwclock"></a>4.2. Setting the Hardware Clock</h3></div></div></div><p>I encourage you to set your hardware clock only after understanding how to get accurate time, described on <a class="xref" href="ar01s05.html" title="5. Accurate Global Time Synchronization">Section 5, &#8220;Accurate Global Time Synchronization&#8221;</a>.</p><p>The <span class="command"><strong>hwclock</strong></span> command reads and sets the hardware clock, based on several options you give to it, documented in its man page. But you don't have to use it if you have a modern Linux distribution. After defining your hardware clock strategy and Time Zone, you can use the high level <span class="command"><strong>setclock</strong></span> command to correctly set your hardware clock. You don't need to pass any parameters because <span class="command"><strong>setclock</strong></span> intelligently calls <span class="command"><strong>hwclock</strong></span> to set the <acronym class="acronym">BIOS</acronym> based on your OS current date and time. <span class="emphasis"><em>So you should always use the <span class="command"><strong>setclock</strong></span> command.</em></span></p><p>But if you are a minimalist and prefer hard work, here are some <span class="command"><strong>hwclock</strong></span> examples:</p><div class="example"><a name="idm360"></a><p class="title"><b>Example 4. <span class="command">setclock</span> and <span class="command">hwclock</span> usage</b></p><div class="example-contents"><pre class="screen"><code class="prompt">bash# </code><span class="command"><strong>setclock</strong></span>					# The easy way to set HC
<code class="prompt">bash# </code><span class="command"><strong>hwclock</strong></span>					# reads HC
<code class="prompt">bash# </code><span class="command"><strong>hwclock --systohc --utc</strong></span>			# set HC with UTC time based on OS current time
<code class="prompt">bash# </code><span class="command"><strong>hwclock --systohc</strong></span>				# set HC with local time based on OS current time
<code class="prompt">bash# </code><span class="command"><strong>hwclock --set --date "21 Oct 2004 21:17"</strong></span>	# set HC with time specified on string</pre></div></div><br class="example-break"><p>Since the OS time is independent from the hardware clock, any <acronym class="acronym">BIOS</acronym> change we make will take place in the next boot.</p><p>Another option to change HC is rebooting and accessing your computer <acronym class="acronym">BIOS</acronym> screens. On <a class="ulink" href="http://ibm.com/servers/eserver/zseries/os/linux/" target="_top">IBM e-server zSeries</a> platforms you'll have to do it on z/VM level, because Linux here runs on virtual machines created by z/VM.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s03.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s05.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">3. What are Time Zones? </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 5. Accurate Global Time Synchronization</td></tr></table></div></body></html>
