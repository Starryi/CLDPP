<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>3. Technical info</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Partition-Rescue"><link rel="up" href="index.html" title="Partition-Rescue"><link rel="prev" href="ar01s02.html" title="2. Beginning"><link rel="next" href="ar01s04.html" title="4. Solving the problem"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3. Technical info</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s02.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s04.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm88"></a>3. Technical info</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm90"></a>3.1. Disks</h3></div></div></div><p>A hard disk is made of sectors numbered from 0 to the max. </p><p>dmesg gives, for example: </p><pre class="screen">hdb: ST34321A, 4103MB w/128kB Cache, CHS=523/255/63</pre><p>CHS means Cylinders, Heads, Sectors. </p><p>523*255*63=8401995 sectors of 512 bytes, thus the 4103 MB. This is only a logical map; it's not necessarily what is written on the disk cover (except for the total size). </p><p>The true size of the sectors is of no interest for us, given that we don't want to modify anything, but merely wish to restore a previous state. For us, the default size given by fdisk is all right. </p><p>The size seen by the system is directly dependent on the work of the BIOS (Basic Input/Output System - the PC's ROM). The mode of the hard disk indicated in the BIOS is essential. On a new disk, it's better to use BIOS automatic hard disk recognition and say "yes". Anyway, any modification at this level may destroy all the data of the disk, so don't play with this without essential reason. </p><p>This is probably what your disk already uses, so don't be afraid. </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm100"></a>3.2. Partitions</h3></div></div></div><p>Disk are now huge -- 500 GB drives are not rare -- so it's not really handy to have all this stuff packed in only one part. Only MS Windows does so, and, if you use Linux, maybe it's because you are aware of how inefficient the other is. </p><p>So a hard disk is usually cut in some pieces called "partitions" (see the <a class="ulink" href="http://tldp.org/HOWTO/Partition/index.html" target="_top">Partition HOWTO</a> for details, also read <span class="emphasis"><em>README.fdisk</em></span> on the web or on your disk - location vary). </p><p>Let's get a look at (part of) my own print of <span class="command"><strong>fdisk -l</strong></span> : </p><pre class="screen">Disk /dev/hdb: 255 heads, 63 sectors, 523 cylinders
Units = cylinders of 16065 * 512 bytes
Device Boot Start End Blocks Id System
/dev/hdb1 1 153 1228941 83 Linux
/dev/hdb2 154 166 104422+ 82 Linux swap
/dev/hdb3 * 167 291 1004062+ 83 Linux
/dev/hdb4 295 523 1839442+ 5 Extended
/dev/hdb5 295 422 1028128+ 83 Linux
/dev/hdb6 423 523 811251 6 FAT16</pre><p>This is my second hard disk, tied to guesses and tries. (The first is too simple to be interesting.) </p><p>/dev/hdb is my second ide disk (slave on the primary interface), </p><p>/dev/hdb1 is the first primary partition, running from the first (1) block to the block 153. </p><p>There can be four such primary partitions. If one wants more than 4, one of them must be repurposed as an "extended" partition (not necessarily the fourth), and all other partitions are "logical" and are located <span class="emphasis"><em>inside</em></span> the extended one. Notice that partition number 5 and partition number 4 have the same beginning. Number five is logical, number 4 extended. Logical partitions' numbering always begins at 5, even if there are only 2 primary partitions. </p><p>Here's the <span class="command"><strong>fdisk -u -l</strong></span> listing of an other disk: </p><pre class="screen">Disque /dev/hda : 240 têtes, 63 secteurs, 2584
cylindres Unités = secteurs sur 1 * 512 octets
Périphérique Amorce Début Fin Blocs Id Système
/dev/hda1 * 63 10357199 5178568+ c Win95 FAT32 (LBA)
/dev/hda2 15452640 39070079 11808720 83 Linux
/dev/hda3 10357200 15150239 2396520 f Win95 Etdue (LBA)
/dev/hda4 15150240 15452639 151200 84 Lecteur C: caché OS/2
/dev/hda5 10357263 10463039 52888+ 83 Linux
/dev/hda6 10463103 10780559 158728+ 82 Echange Linux
/dev/hda7 10780623 15150239 2184808+ 6 FAT16
Les entrées de la table de partitions ne suivent pas l'ordre du disque.</pre><p>Don't worry about the French part, I'm French ... look at your own disk listing. Of course, numbers are bigger. </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm118"></a>3.3. Why is there a problem?</h3></div></div></div><p>The problem is that all installed operating systems must share the disks, and, since at start, the BIOS only scans the first one, there must be a so called "partition table" at the very beginning of this disk. This partition table is located in the Master Boot Record (MBR), side by side with the boot loader. </p><p>Any misuse of the MBR by any of the OS's leads to problems. When trying to install any system, a "yes" answer at a question like "automatic partitioning?" is likely to give problems... This is specially true with MS Windows, and especially with custom MS Windows installations made by special makes' PCs (when no true "Windows" CD is included, as with many laptops). But it's also true with some "smart" (not so smart!) Linux installation programs included with some distributions (hopefully this is not more the case in 2008). </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s02.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">2. Beginning </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 4. Solving the problem</td></tr></table></div></body></html>
