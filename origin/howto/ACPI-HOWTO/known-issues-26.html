<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>2. 2.6 series kernels</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="ACPI: Advanced Configuration and Power Interface"><link rel="up" href="known-issues.html" title="C. Known Issues"><link rel="prev" href="known-issues-24.html" title="1. 2.4 series kernels"><link rel="next" href="apd.html" title="D. GNU Free Documentation License"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2. 2.6 series kernels</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="known-issues-24.html">Prev</a> </td><th width="60%" align="center">C. Known Issues</th><td width="20%" align="right"> <a accesskey="n" href="apd.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="known-issues-26"></a>2. 2.6 series kernels</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="acpi_power_off-hangs"></a>2.1. acpi_power_off hangs in 2.6</h3></div></div></div><p>There are a couple of solutions to this problem, depending on your laptop.</p><p>The easiest option to try is to remove the <a class="xref" href="glossary.html#APIC" title="APIC">APIC</a> options at boot time. This has been reported to work on a Sony TR2. In the <code class="filename">/etc/lilo.conf</code> file look for a line that has <em class="parameter"><code>append=""</code></em>. Inside the quotes add the words <code class="option">nolapic</code> and <code class="option">noapic</code>.</p><div class="example"><a name="ex-appendlilo"></a><p class="title"><b>Example C.1. Updating the append directive in LILO</b></p><div class="example-contents"><p>Open and edit the <code class="filename">/etc/lilo.conf</code> configuration file as root. Add the appropriate instructions to the existing append statement. If there is not an append statement you can add one right before the list of boot disk images. In my <code class="filename">/etc/lilo.conf</code> it would look like this:</p><pre class="screen">

<em class="parameter"><code>append="<code class="option">nolapic</code> <code class="option">noapic</code>"</code></em>

default="<em class="replaceable"><code>&lt;a_unique_and_clever_name&gt;</code></em>"
image=/vmlinuz
label=<em class="replaceable"><code>&lt;a_unique_and_clever_name&gt;</code></em>
read-only

</pre><p>After editing the configuration file, load the new information by running the command <span class="command"><strong>lilo</strong></span> as root.</p><pre class="screen"><strong class="userinput"><code><code class="prompt">#</code> <span class="command"><strong>lilo</strong></span></code></strong></pre></div></div><br class="example-break"><p>You can also remove these two modules from the kernel completely by removing the following kernel options: <code class="option">CONFIG_X86_UP_APIC</code>, <code class="option">CONFIG_X86_UP_IOAPIC</code>. This is what I have done with my Acer TravelMate.</p><p>Acer TravelMates should also disable the <a class="xref" href="glossary.html#RTC" title="RTC">RTC</a>-related modules. They are not needed for <span class="quote">&#8220;<span class="quote">normal</span>&#8221;</span> operation.</p><p>The following kernel modules should be unselected to allow the notebook to power off correctly:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="option">CONFIG_HPET_EMULATE_RTC</code></p></li><li class="listitem"><p><code class="option">CONFIG_RTC</code></p></li><li class="listitem"><p><code class="option">CONFIG_SND_RTCTIMER</code></p></li></ul></div><p>Thank you to mizu for discovering this solution!</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="touchpad-freezes"></a>2.2. Touchpad/Mouse or Keyboard Freezes</h3></div></div></div><p>Karl Hegbloom emailed me to say that <span class="quote">&#8220;<span class="quote">keyboard
keys sticking, touch pad pointer jumping suddenly across the screen,
lockups under heavy network I/O [was] caused by
polling the battery state via ACPI and the proc file system.</span>&#8221;</span> This
problem is caused by a delay between the initial request for
information about the battery's status and the response. In that delay
communication with the keyboard or touch pad may be temporarily interrupted causing the device to become out of sync (jumpy) or the communication lost (freeze).
<span class="quote">&#8220;<span class="quote">The overnight solution is to either turn off
the battery applet, or reduce its polling frequency.</span>&#8221;</span> Karl also
notes that a BIOS update was also able to solve the problem. Thanks Karl!</p><p>
	I did not find this to be a problem for me in the 2.4.x kernels,
	however, it was a problem when I upgraded to 2.6.5. I use
	<span class="application">wmacpi</span> to monitor my battery status. By
	setting the polling frequency to 1 (the lowest possible number), I seem
	to have eliminated the touch pad lockups. In my
	<code class="filename">.xinitrc</code> file I use:
</p><p>
<strong class="userinput"><code>
<span class="command"><strong>/usr/bin/wmacpi</strong></span> <em class="parameter"><code>-s 1</code></em>
</code></strong>
</p><p>
	The <em class="parameter"><code>-s 1</code></em> represents the polling frequency
	(sample rate) of <span class="quote">&#8220;<span class="quote">once per minute.</span>&#8221;</span> The default is 20.
</p><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>If you recently upgraded to the 2.6 series kernel, make sure your touch pad drivers are correctly installed as well. You may find the following KernelTrap article useful if you are not sure where to start: <a class="ulink" href="http://kerneltrap.org/node/view/2199" target="_top">http://kerneltrap.org/node/view/2199</a>.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="known-issues-24.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="known-issues.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="apd.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">1. 2.4 series kernels </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> D. GNU Free Documentation License</td></tr></table></div></body></html>
