<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>6. Differences between Autodir and Autofs</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Autodir HOWTO"><link rel="up" href="index.html" title="Autodir HOWTO"><link rel="prev" href="ar01s05.html" title="5. What Autodir is not"><link rel="next" href="ar01s07.html" title="7. How it works"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6. Differences between Autodir and Autofs</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s05.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s07.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm134"></a>6. Differences between Autodir and Autofs</h2></div></div></div><p>Issue arises when you are already using the <span class="application">Autofs</span> package, handling the mounts of (home) directories.  Let's look at the differences between the two packages:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The main purpose of autofs is to deal with network mounts on demand instead of mounting all at the same time, which results in preserving system resources. Though there is some support in the autofs package to mount home directories on demand, the requirement is that <span class="emphasis"><em>these home directories must exist already</em></span>.</p><p>On the other hand, <span class="bold"><strong>Autodir</strong></span> specializes <span class="emphasis"><em>only</em></span> in local directory creation and mounting them on demand.</p><p><span class="bold"><strong>Autodir</strong></span> can also create real directories in disk file systems, which do not reside in one single flat base directory. This is how utilities like <span class="command"><strong>useradd</strong></span> create by default. In a standard file system setup, all home directories reside in the base <code class="filename">/home</code> directory. For file systems like ext2 and ext3 performance will degrade if a large number of home directories exist in one single base directory.</p><p> For applications accessing these directories, <span class="bold"><strong>Autodir</strong></span> presents all directories for them in a <span class="emphasis"><em>single</em></span> autofs mounted virtual base directory <span class="emphasis"><em>on demand</em></span>; actual directories are created in subdirectories of some other directory in hierarchical style.</p><p> For example, the real home for a user with username <code class="literal">user1</code> will be created as <code class="filename">/autohome/u/us/user1</code> if configured that way, but mounted in <code class="filename">/home</code> on demand for applications accessing the home directory in <code class="filename">/home/user1</code>.</p><p>Permissions for the real base directory, where the actual home directories are kept (<code class="filename">/autohome</code> in the above example), are kept in such a way that <code class="filename">/autohome</code> can not be accessed by anyone except by root.</p><p>This mounting of directories on demand and unmounting when not in use presents an interesting opportunity: the ability to tell whether a directory is in use or not.  If a directory is not in use, a program like a backup application can be safely started when a directory is unmounted.</p><p><span class="bold"><strong>Autodir</strong></span> exploits this capability by starting the command-line mentioned backup whenever a directory becomes unused.</p></li><li class="listitem"><p>There is one more important issue to be presented if you are an administrator reading this document. <span class="bold"><strong>Autodir</strong></span> does not call the external programs <span class="command"><strong>mount</strong></span> and <span class="command"><strong>umount</strong></span>, as is the case with the autofs package; rather, it uses system calls directly. As a side effect, it is faster and more reliable, but the <code class="filename">mtab</code> file is not updated. I felt this was not necessary as all mounts and unmounts are local directories.</p></li><li class="listitem"><p>Another minor difference is that <span class="bold"><strong>Autodir</strong></span> is completely <span class="emphasis"><em>multi-threaded</em></span>. Autofs is also expected to be multi-threaded in future versions.</p></li></ul></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s05.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s07.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">5. What Autodir is not </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 7. How it works</td></tr></table></div></body></html>
