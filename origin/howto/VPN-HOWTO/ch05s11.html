<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>11. Adding users</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="VPN HOWTO"><link rel="up" href="ch05.html" title="Chapter 5. Implementation"><link rel="prev" href="ch05s10.html" title="10. The .ssh directory"><link rel="next" href="ch05s12.html" title="12. Server: Administration"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11. Adding users</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch05s10.html">Prev</a> </td><th width="60%" align="center">Chapter 5. Implementation</th><td width="20%" align="right"> <a accesskey="n" href="ch05s12.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm523"></a>11. Adding users</h2></div></div></div><p>
Now comes the fun part.  We're going to edit the <code class="filename">/etc/passwd</code> file
by hand.  Normally you let the system handle this file, but for an unusual
setup like this, it is easier to do it yourself.  To start, open the
<code class="filename">/etc/passwd</code> file and see what's in there.  Here's an example of what
you might find:
</p><pre class="screen">
...
nobody:x:65534:100:nobody:/dev/null:
mwilson:x:1000:100:Matthew Wilson,,,:/home/mwilson:/bin/bash
joe:*:1020:101:Joe Mode (home),,,:/home/vpn-users:/usr/sbin/pppd
bill:*:1020:101:Bill Smith (home),,,:/home/vpn-users:/usr/sbin/pppd
frank:*:1020:101:Frank Jones (home),,,:/home/vpn-users:/usr/sbin/pppd
...
</pre><p>
You'll find the first user on most any system.  The second one is me. 
After that are a few made up vpn-users. The first field is the username,
and the second is the password field. The third is user ID (UID) and the
fourth is the group ID (GID).  After that comes some info on who the
people are in the fifth field. The sixth field is the user's home
directory, and the last is their shell.  As you can see, each field is
separated by a colon.  Look at the last three lines. The only difference
between them is the username in the first field, and the user info in
the fifth field.  What we want to do is create lines like this for each
user.  Don't just use one user for all of the connections, you'll never
be able to tell them apart if you do.  So copy the last line of this
file and edit it so that it looks something like the above.  Make sure
that the second field has an asterisk (*).  The second field should be
unique to all the other IDs in the file.  I used 1020.  You should use a
number above 1000, since those below are typically reserved for system
use.  The fourth field should be the group ID for vpn-users.  I told you
to write it down, now is the time that you need it. So put the group ID
in there.  Lastly, change the home directory to
<code class="filename">/home/vpn-users</code>, and the shell to <code class="filename">/usr/sbin/pppd</code>. 
Now copy that line to make more users.  Just edit the first
the fifth fields and you're set.
</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch05s10.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch05.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch05s12.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">10. The <code class="filename">.ssh</code> directory </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 12. Server: Administration</td></tr></table></div></body></html>
