<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>1. Pitfalls</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="VPN HOWTO"><link rel="up" href="ch06.html" title="Chapter 6. Addenda"><link rel="prev" href="ch06.html" title="Chapter 6. Addenda"><link rel="next" href="ch06s02.html" title="2. Hardware and Software Requirements"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1. Pitfalls</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch06.html">Prev</a> </td><th width="60%" align="center">Chapter 6. Addenda</th><td width="20%" align="right"> <a accesskey="n" href="ch06s02.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="pitfalls"></a>1. Pitfalls</h2></div></div></div><p>
Here are just a few of the snags that I've run into while using this
system. I put them here so that you can hopefully avoid them.  If you
run into any new ones, please <a class="ulink" href="mailto:matthew@shinythings.com" target="_top">
email them to me</a> so that I can keep track, and help others avoid
them.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm677"></a>1.1. read: I/O error</h3></div></div></div><p>
This error is associated with mis-matched
versions off pppd.  If you get it, try upgrading both ends of the
connection to the latest version of pppd.  I've found that pppd version
2.2 has this problem, so use version 2.3.7 or 2.3.8 instead.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm680"></a>1.2. SIOCADDRT: Network is unreachable</h3></div></div></div><p>
This error is generated by <span class="command"><strong>route</strong></span>.  I've seen it happen when the
sleep time between <span class="command"><strong>ssh</strong></span> and <span class="command"><strong>ppd</strong></span> is not long enough. If
you get this error, run <span class="command"><strong>ifconfig</strong></span>, and you may see that there is no
pppX interface.  This means that <span class="command"><strong>ssh</strong></span> was not done
authenticating before <span class="command"><strong>pppd</strong></span> was launched, and therefore
<span class="command"><strong>pppd</strong></span> did not make the connection.  just increase the delay, and
your problems will be solved.
</p><p>
I wonder however if there might be some pppd option that will fix this
problem.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ipv4forwarding"></a>1.3. IPv4 Forwarding and 2.2 kernels</h3></div></div></div><p>
In the new 2.2 kernel, you must specifically enable IP forwarding in the
kernel at boot up.  This with the following command:
</p><pre class="screen">
# echo 1 &gt; /proc/sys/net/ipv4/ip_forward
</pre><p>
Without this, the kernel will not forward any packets, and hence the
server will not work, nor will any of the gatewaying clients.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm696"></a>1.4. Routing</h3></div></div></div><p>
It should go without saying, but be careful when you are routing real numbers
that you don't route traffic destined for the VPN server's external address
through the tunnel.  It won't make it.  (yes, this <span class="emphasis"><em>is</em></span> from personal
experience.)
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch06.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch06.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch06s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 6. Addenda </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 2. Hardware and Software Requirements</td></tr></table></div></body></html>
