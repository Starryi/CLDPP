<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>12. Server: Administration</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="VPN HOWTO"><link rel="up" href="ch05.html" title="Chapter 5. Implementation"><link rel="prev" href="ch05s11.html" title="11. Adding users"><link rel="next" href="ch05s13.html" title="13. Client: Build the kernel"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">12. Server: Administration</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch05s11.html">Prev</a> </td><th width="60%" align="center">Chapter 5. Implementation</th><td width="20%" align="right"> <a accesskey="n" href="ch05s13.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm532"></a>12. Server: Administration</h2></div></div></div><p>
One of the advantages to using this system for user accounts is that you
can take advantage of the UNIX user administration commands.  Since each client
is logged in as a user, you can use standard methods to get user statistics.
The following are a few commands that I like to use to see what all is going on.
</p><p>
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">who</span></dt><dd><p>
Prints the users currently logged in, as well as when they logged in,
from where (name or IP), and on which port.
</p></dd><dt><span class="term">w</span></dt><dd><p>
This command prints a more extensive listing of who is currently logged
in.  It also tells you uptime and load averages for the system.  It also lists
the user's current process (which should be -pppd for VPN clients) as well
as idle time, and current CPU usage for all processes as well as the current
process.  Read the <code class="literal">w</code> man page for more info.
</p></dd><dt><span class="term">last [username]</span></dt><dd><p>
This lists the login history for the specified user, or for all users if
a username is not provided.  It's most useful for finding out how well
the tunnels are running as it prints the length of time that the user
was logged in, or states that the user is still logged in. I should warn
you that on a system that has been up a long time, this list can grow
extremely long.  Pipe is through <code class="literal">grep</code> or <code class="literal">head</code> to find
out exactly what you want to know.
</p></dd></dl></div><p>
</p><p>
You can also control which users are allowed to connect by modifying the
<code class="filename">/home/vpn-users/.ssh/authorized_keys</code> file.  If you remove the user's
public key line from this file, they won't be able to log in.
</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch05s11.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch05.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch05s13.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">11. Adding users </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 13. Client: Build the kernel</td></tr></table></div></body></html>
