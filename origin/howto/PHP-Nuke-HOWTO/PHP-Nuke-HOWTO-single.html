<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>PHP-Nuke: Management and Programming</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><META
NAME="KEYWORD"
CONTENT="PHP-Nuke"><META
NAME="KEYWORD"
CONTENT="programming"><META
NAME="KEYWORD"
CONTENT="management"><META
NAME="KEYWORD"
CONTENT="tutorial"><META
NAME="KEYWORD"
CONTENT="PHP"><META
NAME="KEYWORD"
CONTENT="MySQL"><META
NAME="KEYWORD"
CONTENT="Linux"><META
NAME="KEYWORD"
CONTENT="structure"><META
NAME="KEYWORD"
CONTENT="news"><META
NAME="KEYWORD"
CONTENT="content management system"><META
NAME="KEYWORD"
CONTENT="CMS"><META
NAME="KEYWORD"
CONTENT="UNIX"><META
NAME="KEYWORD"
CONTENT="nuke"><META
NAME="KEYWORD"
CONTENT="modules"><META
NAME="KEYWORD"
CONTENT="blocks"><META
NAME="KEYWORD"
CONTENT="topics"><META
NAME="KEYWORD"
CONTENT="themes"><META
NAME="KEYWORD"
CONTENT="architecture"><META
NAME="KEYWORD"
CONTENT="howto"><META
NAME="KEYWORD"
CONTENT="guide"><META
NAME="KEYWORD"
CONTENT="content"><META
NAME="KEYWORD"
CONTENT="download"><META
NAME="KEYWORD"
CONTENT="book"><META
NAME="KEYWORD"
CONTENT="installation"><META
NAME="KEYWORD"
CONTENT="permissions"><META
NAME="KEYWORD"
CONTENT="error"><META
NAME="KEYWORD"
CONTENT="sessions"><META
NAME="KEYWORD"
CONTENT="security"><META
NAME="KEYWORD"
CONTENT="caching"><META
NAME="KEYWORD"
CONTENT="optimization"><META
NAME="KEYWORD"
CONTENT="javascript"><META
NAME="KEYWORD"
CONTENT="googletap"><META
NAME="KEYWORD"
CONTENT="backup"><META
NAME="KEYWORD"
CONTENT="flash"></HEAD
><BODY
CLASS="BOOK"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="BOOK"
><A
NAME="AEN1"
></A
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="TITLE"
><A
NAME="AEN2"
>PHP-Nuke: Management and Programming</A
></H1
><H3
CLASS="AUTHOR"
><A
NAME="AEN5"
></A
>Chris Karakas</H3
><DIV
CLASS="AFFILIATION"
><SPAN
CLASS="ORGNAME"
>www.karakas&#8212;online.de<BR></SPAN
></DIV
><H3
CLASS="AUTHOR"
><A
NAME="AEN10"
></A
>Claudio Erba</H3
><DIV
CLASS="AFFILIATION"
><SPAN
CLASS="ORGNAME"
>www.spaghettibrain.com<BR></SPAN
></DIV
><P
CLASS="OTHERCREDIT"
><B
>Chris Karakas - </B
><SPAN
CLASS="CONTRIB"
>Conversion from LyX to DocBook SGML, Index, document generation, PHP-Nuke module, see Credits</SPAN
></P
><P
CLASS="OTHERCREDIT"
><B
>Andre Purfield - </B
><SPAN
CLASS="CONTRIB"
>Translation from italian (v.1.0) and translation project coordination, see Credits</SPAN
></P
><P
CLASS="OTHERCREDIT"
><B
>Fortunato Matarazzo - </B
><SPAN
CLASS="CONTRIB"
>Translation from italian (v.1.0), see Credits</SPAN
></P
><P
CLASS="OTHERCREDIT"
><B
>Chris Karakas - </B
><SPAN
CLASS="CONTRIB"
>Translation from italian (v.1.0), see Credits</SPAN
></P
><DIV
CLASS="REVHISTORY"
><TABLE
WIDTH="100%"
BORDER="0"
><TR
><TH
ALIGN="LEFT"
VALIGN="TOP"
COLSPAN="3"
><B
>Revision History</B
></TH
></TR
><TR
><TD
ALIGN="LEFT"
>Revision 2.1</TD
><TD
ALIGN="LEFT"
>04.08.2005</TD
><TD
ALIGN="LEFT"
>Revised by: CK</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Security bugfix and maintainance release. Fixed typos, made some improvements, closed a security hole in the section on How to include a HTML file and its links (thanks to waraxe for this, see http://www.waraxe.us), closed the same security hole in the PHP-Nuke module version of this document, added code for keycaps, applications, acronyms and product names in the CSS and some enhancements in jadetex.cfg.</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Revision 2.0</TD
><TD
ALIGN="LEFT"
>16.02.2004</TD
><TD
ALIGN="LEFT"
>Revised by: CK</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Added more than 400 pages of additional material. See Credits section for the exact details.</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Revision 1.2.1</TD
><TD
ALIGN="LEFT"
>22.08.2003</TD
><TD
ALIGN="LEFT"
>Revised by: CK</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Now available as PHP-Nuke module too. Link to the module source in the Formats section. Smaller logo.</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Revision 1.2</TD
><TD
ALIGN="LEFT"
>29.05.2003</TD
><TD
ALIGN="LEFT"
>Revised by: CK</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>New logo, CSS stylesheet, HTML validation, footer icons. Incorporated LDP reviewer's comments. Created Aknowledgements and Availability of sources sections.</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Revision 1.1</TD
><TD
ALIGN="LEFT"
>13.02.2003</TD
><TD
ALIGN="LEFT"
>Revised by: AP</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Cleaned up the wording and a few typos.</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Revision 1.0</TD
><TD
ALIGN="LEFT"
>09.01.2003</TD
><TD
ALIGN="LEFT"
>Revised by: CK</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>First complete version.</TD
></TR
></TABLE
></DIV
><DIV
><DIV
CLASS="ABSTRACT"
><P
></P
><A
NAME="AEN72"
></A
><P
>   <DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/logo1.png"></P
></DIV
></P
><P
>   <DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/logo2.png"></P
></DIV
></P
><P
>There has always been the necessity to have a definitive guide on <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. This guide describes the installation and structure of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> and the details of customizing the front end to suit the users' needs. The architecture of PHP-Nuke, with its modules, blocks, topics and themes is presented in detail, as well as the interplay of <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and MySQL for the creation of a mighty content management system (CMS).It also delves into more advanced issues, like the programming of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks and modules, security, acceleration, and optimization. Day-to-day operations and miscellaneous topics are also covered.</P
><P
></P
></DIV
></DIV
><HR></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
>1. <A
HREF="#TERMS"
>Terms of distribution</A
></DT
><DD
><DL
><DT
>1.1. <A
HREF="#DISCLAIMER"
>Disclaimer</A
></DT
><DT
>1.2. <A
HREF="#FORMATS"
>Formats</A
></DT
><DT
>1.3. <A
HREF="#LICENCE"
>Licence</A
></DT
><DT
>1.4. <A
HREF="#AVAILABILITY-OF-SOURCES"
>Availability of sources</A
></DT
><DT
>1.5. <A
HREF="#CREDITS"
>Credits</A
></DT
><DT
>1.6. <A
HREF="#AKNOWLEDGEMENTS"
>Aknowledgements</A
></DT
><DT
>1.7. <A
HREF="#CONVENTIONS"
>Conventions</A
></DT
><DT
>1.8. <A
HREF="#BOOK-BEHIND-BOOK"
>The book behind the book</A
></DT
><DT
>1.9. <A
HREF="#TRANSLATE-PHP-NUKE-HOWTO"
>How to translate this HOWTO</A
></DT
></DL
></DD
><DT
>2. <A
HREF="#INTRODUCTION"
>Introduction to PHP-Nuke</A
></DT
><DD
><DL
><DT
>2.1. <A
HREF="#PURPOSE"
>Purpose</A
></DT
><DT
>2.2. <A
HREF="#WHATIS-PHPNUKE"
>What Is PHP-Nuke</A
></DT
><DT
>2.3. <A
HREF="#HISTORY"
>Short history of PHP-Nuke</A
></DT
><DT
>2.4. <A
HREF="#COMMUNITIES"
>The <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Communities</A
></DT
><DT
>2.5. <A
HREF="#WHYPHPNUKE"
>Why use <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> and not static HTML pages</A
></DT
><DT
>2.6. <A
HREF="#PHP-NUKE-FORKS"
>The <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> forks</A
></DT
></DL
></DD
><DT
>3. <A
HREF="#INSTALLATION"
>How to install PHP-Nuke</A
></DT
><DD
><DL
><DT
>3.1. <A
HREF="#PREREQUISITES"
>Prerequisites</A
></DT
><DT
>3.2. <A
HREF="#INSTALLATION-PROCESS"
>Installation process</A
></DT
><DT
>3.3. <A
HREF="#PHPMYADMIN"
>How to install <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> through phpMyAdmin</A
></DT
><DT
>3.4. <A
HREF="#PHPMYADMIN2"
>phpMyAdmin: How to administer MySQL via Web</A
></DT
><DT
>3.5. <A
HREF="#INSTALL-PHP-NUKE-NUKESQL"
>How to install <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> using nukesql.php</A
></DT
><DT
>3.6. <A
HREF="#INSTALL-PHP-NUKE-LOCALLY"
>How to install <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> locally</A
></DT
><DT
>3.7. <A
HREF="#CONFIG-PHP-FILE"
>The config.php file</A
></DT
><DT
>3.8. <A
HREF="#RESOURCES"
>Resources</A
></DT
><DT
>3.9. <A
HREF="#COMMON-INSTALLATION-PROBLEMS"
>Common installation problems</A
></DT
><DT
>3.10. <A
HREF="#COMMON-MISCELLANEOUS-ERRORS"
>Common miscellaneous errors</A
></DT
></DL
></DD
><DT
>4. <A
HREF="#UPGRADE-PHP-NUKE"
>How to upgrade PHP-Nuke</A
></DT
><DD
><DL
><DT
>4.1. <A
HREF="#UPGRADE-PHP-NUKE-60-65"
>From 6.0 to 6.5</A
></DT
><DT
>4.2. <A
HREF="#UPGRADE-PHPBB-PHP-NUKE"
>From phpBB to PHP-Nuke</A
></DT
><DT
>4.3. <A
HREF="#PHP-NUKE-UPGRADE-SCRIPTS"
>PHP-Nuke upgrade scripts</A
></DT
></DL
></DD
><DT
>5. <A
HREF="#MOVE-PHP-NUKE"
>How to move PHP-Nuke</A
></DT
><DD
><DL
><DT
>5.1. <A
HREF="#TRANSFERRING-LOCAL-INSTALLATION-TO-WEB"
>Transferring a local installation to the Web</A
></DT
><DT
>5.2. <A
HREF="#CHANGING-WEB-HOSTER"
>Changing Web hoster</A
></DT
></DL
></DD
><DT
>6. <A
HREF="#FRONTEND"
>Front end structure: user view</A
></DT
><DD
><DL
><DT
>6.1. <A
HREF="#PREINSTALLED-MODULES"
>The preinstalled modules</A
></DT
><DT
>6.2. <A
HREF="#NON-INSTALLED-MODULES"
>Non-installed modules</A
></DT
><DT
>6.3. <A
HREF="#PREINSTALLED-BLOCKS"
>The preinstalled blocks</A
></DT
></DL
></DD
><DT
>7. <A
HREF="#BACKEND"
>Back end structure: administrator view</A
></DT
><DD
><DL
><DT
>7.1. <A
HREF="#ADMINISTRATION-FUNCTIONS"
>The administration functions</A
></DT
><DT
>7.2. <A
HREF="#PREFERENCES"
>The Preferences Page</A
></DT
></DL
></DD
><DT
>8. <A
HREF="#PHP-NUKE-ADD-ONS"
>PHP-Nuke add-ons</A
></DT
><DD
><DL
><DT
>8.1. <A
HREF="#PHP-NUKE-ADD-ON-THEMES"
>Add-on themes</A
></DT
><DT
>8.2. <A
HREF="#PHP-NUKE-ADD-ON-BLOCKS"
>Add-on blocks</A
></DT
><DT
>8.3. <A
HREF="#PHP-NUKE-ADD-ON-MODULES"
>Add-on modules</A
></DT
></DL
></DD
><DT
>9. <A
HREF="#ARCHITECTURE"
>Architecture and structure</A
></DT
><DD
><DL
><DT
>9.1. <A
HREF="#DIRECTORY-STRUCTURE"
>Directory structure</A
></DT
><DT
>9.2. <A
HREF="#MAIN-PAGE-MANAGEMENT"
>Main page management</A
></DT
><DT
>9.3. <A
HREF="#MODULE-MANAGEMENT"
>Module management</A
></DT
><DT
>9.4. <A
HREF="#ADMIN-MANAGEMENT"
>Administration management</A
></DT
></DL
></DD
><DT
>10. <A
HREF="#SESSION-MANAGEMENT"
>Session management</A
></DT
><DD
><DL
><DT
>10.1. <A
HREF="#HOW-SESSIONS-WORK"
>How sessions work in the forums</A
></DT
><DT
>10.2. <A
HREF="#ELIMINATE-SESSION-CHECKS"
>How to eliminate session checks</A
></DT
></DL
></DD
><DT
>11. <A
HREF="#EDITING-PHP-NUKE-FILES"
>Editing <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> (-Nuke) files</A
></DT
><DD
><DL
><DT
>11.1. <A
HREF="#VI"
>vi</A
></DT
><DT
>11.2. <A
HREF="#EMACS"
>Emacs</A
></DT
><DT
>11.3. <A
HREF="#BLUEFISH"
>Bluefish</A
></DT
><DT
>11.4. <A
HREF="#ULTRAEDIT"
>UltraEdit</A
></DT
><DT
>11.5. <A
HREF="#WINSYNTAX"
>WinSyntax</A
></DT
><DT
>11.6. <A
HREF="#HTMLKIT"
>HTMLKit</A
></DT
><DT
>11.7. <A
HREF="#CRIMSON-EDITOR"
>Crimson Editor</A
></DT
><DT
>11.8. <A
HREF="#PHPED"
>PHPEd</A
></DT
></DL
></DD
><DT
>12. <A
HREF="#MODIFYING-PHP-NUKE-DATABASE"
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> database</A
></DT
><DD
><DL
><DT
>12.1. <A
HREF="#USER-EXTRA-INFORMATION"
>More than 255 characters of user extra information</A
></DT
></DL
></DD
><DT
>13. <A
HREF="#MODIFYING-PHP-NUKE-TEXTS"
>Modifying <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> texts</A
></DT
><DD
><DL
><DT
>13.1. <A
HREF="#GENERAL-PHP-NUKE-TEXTS"
>General <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> texts</A
></DT
><DT
>13.2. <A
HREF="#PHP-NUKE-MODULE-TEXTS"
>PHP-Nuke module texts</A
></DT
><DT
>13.3. <A
HREF="#PHP-NUKE-MODULE-AND-BLOCK-TITLES"
>PHP-Nuke module and block titles</A
></DT
></DL
></DD
><DT
>14. <A
HREF="#CUSTOMIZATION"
>Customising <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> themes</A
></DT
><DD
><DL
><DT
>14.1. <A
HREF="#TOPIC-STRUCTURE"
>Structure of a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme</A
></DT
><DT
>14.2. <A
HREF="#TEMPLATE"
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme HTML template</A
></DT
><DT
>14.3. <A
HREF="#PHP-NUKE-THEME-MODIFYING-HEADER"
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme header</A
></DT
><DT
>14.4. <A
HREF="#PHP-NUKE-THEME-MODIFYING-BODY"
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme body</A
></DT
><DT
>14.5. <A
HREF="#PHP-NUKE-THEME-MODIFYING-INDEX"
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme index</A
></DT
><DT
>14.6. <A
HREF="#PHP-NUKE-THEME-MODIFYING-FOOTER"
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme footer</A
></DT
><DT
>14.7. <A
HREF="#PHP-NUKE-THEME-MODIFYING-ICONS"
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme icons</A
></DT
><DT
>14.8. <A
HREF="#THEME-RULES"
>Theme construction: the rules to follow</A
></DT
><DT
>14.9. <A
HREF="#CHANGE-BUGGY-PHP-NUKE-THEME"
>How to change a buggy <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme</A
></DT
><DT
>14.10. <A
HREF="#PREVENT-USERS-FROM-CHANGING-PHP-NUKE-THEME"
>How to prevent users from changing the theme in PHP-Nuke</A
></DT
><DT
>14.11. <A
HREF="#CHANGE-PHP-NUKE-THEME-DEPENDING-ON-MODULE"
>How to change the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme depending on the module</A
></DT
><DT
>14.12. <A
HREF="#CHANGE-FONT-SIZE-PHP-NUKE"
>How to change the font size in PHP-Nuke</A
></DT
></DL
></DD
><DT
>15. <A
HREF="#MODIFYING-PHP-NUKE-HTML-HEADER"
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> HTML header</A
></DT
><DD
><DL
><DT
>15.1. <A
HREF="#FAVOURITES-ICON-FAVICON-ICO"
>How to implement a favourites icon (favicon.ico)</A
></DT
><DT
>15.2. <A
HREF="#PREVENT-STATISTICS-MODULE-GATHERING-HITS"
>How to prevent the statistics module from gathering hits from certain hosts</A
></DT
></DL
></DD
><DT
>16. <A
HREF="#MODIFYING-MAINFILE-PHP"
>Modifying mainfile.php</A
></DT
><DD
><DL
><DT
>16.1. <A
HREF="#ALLOW-SPECIAL-HTML-TAGS"
>How to allow special HTML tags</A
></DT
><DT
>16.2. <A
HREF="#CHANGE-ORDER-OF-MESSAGES"
>How to change the order of messages</A
></DT
><DT
>16.3. <A
HREF="#CHANGE-DURATION-OF-PUBLIC-BROADCAST-MESSAGE"
>How to change the duration of a public broadcast message</A
></DT
></DL
></DD
><DT
>17. <A
HREF="#MODIFYING-PHP-NUKE-BLOCKS"
>Modifying <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks</A
></DT
><DD
><DL
><DT
>17.1. <A
HREF="#CHANGE-BUGGY-BLOCK"
>How to change a buggy block</A
></DT
><DT
>17.2. <A
HREF="#BUILD-CUSTOM-MODULE-BLOCKS"
>How to build custom module blocks</A
></DT
><DT
>17.3. <A
HREF="#BUILD-RSS-BLOCKS-WITH-VARIABLE-NEWS-NUMBER"
>How to build RSS blocks with variable number of news items</A
></DT
><DT
>17.4. <A
HREF="#SCROLLING-HEADLINES-IN-BLOCKS"
>How to get scrolling headlines in blocks</A
></DT
></DL
></DD
><DT
>18. <A
HREF="#MODIFYING-PHP-NUKE-MODULES"
>Modifying <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules</A
></DT
><DD
><DL
><DT
>18.1. <A
HREF="#MODIFYING-ANY-PHP-NUKE-MODULE"
>Modifying any <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module</A
></DT
><DT
>18.2. <A
HREF="#MODIFYING-PHP-NUKE-HOMEPAGE"
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Homepage</A
></DT
><DT
>18.3. <A
HREF="#MODIFYING-PHP-NUKE-MODULE-FAQ"
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> FAQ module</A
></DT
><DT
>18.4. <A
HREF="#MODIFYING-PHP-NUKE-MODULE-REVIEWS"
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Reviews module</A
></DT
><DT
>18.5. <A
HREF="#MODIFYING-PHP-NUKE-MODULE-WEB-LINKS"
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Web_Links module</A
></DT
><DT
>18.6. <A
HREF="#MODIFYING-PHP-NUKE-MODUKE-YOUR-ACCOUNT"
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Your_Account module</A
></DT
><DT
>18.7. <A
HREF="#MODIFYING-PHP-NUKE-NEWS-MODULE"
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> News module</A
></DT
><DT
>18.8. <A
HREF="#MODIFYING-PHP-NUKE-SUBMIT-NEWS-MODULE"
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Submit News module</A
></DT
><DT
>18.9. <A
HREF="#MODIFYING-PHP-NUKE-SECTIONS-MODULE"
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Sections module</A
></DT
><DT
>18.10. <A
HREF="#MODIFYING-PHP-NUKE-DOWNLOADS-MODULE"
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Downloads module</A
></DT
><DT
>18.11. <A
HREF="#MODIFYING-PHP-NUKE-STORIES-ARCHIVE"
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Stories Archive module</A
></DT
></DL
></DD
><DT
>19. <A
HREF="#MODIFYING-PHP-NUKE-ADMIN-PANEL"
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> administration panel</A
></DT
><DD
><DL
><DT
>19.1. <A
HREF="#SET-ARBITRARY-STORIES-NUMBER-IN-HOME"
>How to set an arbitrary "Stories Number in Home"</A
></DT
><DT
>19.2. <A
HREF="#ALLOW-HTML-NEWSLETTER"
>How to allow HTML in the Newsletter</A
></DT
></DL
></DD
><DT
>20. <A
HREF="#BLOCKS"
>Creating <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks</A
></DT
><DD
><DL
><DT
>20.1. <A
HREF="#BLOCK-TYPES"
>The characteristics of the various types of blocks</A
></DT
><DT
>20.2. <A
HREF="#BLOCK-CREATION"
>How to create a new block</A
></DT
><DT
>20.3. <A
HREF="#SIMPLE-CONTENT-BLOCK"
>Simple Content block</A
></DT
><DT
>20.4. <A
HREF="#HOW-TO-INCLUDE-FILES"
>How to include PHP/HTML files in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block</A
></DT
><DT
>20.5. <A
HREF="#JAVASCRIPT-IN-PHP-NUKE-BLOCKS"
>How to use Javascript in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks</A
></DT
><DT
>20.6. <A
HREF="#FLASH-PHP-NUKE-BLOCKS"
>How to display Flash in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks</A
></DT
><DT
>20.7. <A
HREF="#ADVERTISEMENTS-IN-PHP-NUKE-BLOCKS"
>How to show advertisements in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks</A
></DT
><DT
>20.8. <A
HREF="#DISPLAY-IMAGES-PHP-NUKE-BLOCKS"
>How to display images in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks</A
></DT
><DT
>20.9. <A
HREF="#PAYPAL-BLOCK-FOR-PHP-NUKE"
>How to display HTML forms in a block: Paypal</A
></DT
></DL
></DD
><DT
>21. <A
HREF="#CREATING-MODULES"
>Creating modules</A
></DT
><DD
><DL
><DT
>21.1. <A
HREF="#MODULE-STRUCTURE"
>Module structure</A
></DT
><DT
>21.2. <A
HREF="#MODULE-RULES"
>Creating fully compatible modules: the rules to follow</A
></DT
><DT
>21.3. <A
HREF="#MODULE-PUBLIC"
>Module creation, the public part</A
></DT
><DT
>21.4. <A
HREF="#MODULE-ADMIN"
>Module creation, administrator part</A
></DT
><DT
>21.5. <A
HREF="#INCLUDE-HTML-FILE-IN-MODULE"
>How to include a HTML file in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module</A
></DT
><DT
>21.6. <A
HREF="#INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE"
>How to include a HTML file and its links in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module</A
></DT
><DT
>21.7. <A
HREF="#INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE-IFRAME"
>How to include a HTML file and its links using an iframe in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module</A
></DT
><DT
>21.8. <A
HREF="#INCLUDE-PLAIN-TEXT-FILE-IN-MODULE"
>How to include a plain text file in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module</A
></DT
><DT
>21.9. <A
HREF="#JAVASCRIPT-IN-PHP-NUKE-MODULES"
>How to use Javascript in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules</A
></DT
><DT
>21.10. <A
HREF="#CREATE-LOGOUT-MODULE"
>How to create a Logout module</A
></DT
><DT
>21.11. <A
HREF="#ADVERTISEMENTS-IN-PHP-NUKE-MODULES"
>How to show advertisements in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules</A
></DT
><DT
>21.12. <A
HREF="#HTML-FORMS-IN-MODULE"
>How to display HTML forms in a module</A
></DT
></DL
></DD
><DT
>22. <A
HREF="#DUPLICATING-PHP-NUKE-MODULES"
>Duplicating <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules</A
></DT
><DD
><DL
><DT
>22.1. <A
HREF="#DUPLICATING-PHP-NUKE-FAQ-MODULE"
>Duplicating the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> FAQ module</A
></DT
></DL
></DD
><DT
>23. <A
HREF="#SECURITY"
>Security</A
></DT
><DD
><DL
><DT
>23.1. <A
HREF="#HOW-SECURE-IS-PHP-NUKE"
>How secure is PHP-Nuke?</A
></DT
><DT
>23.2. <A
HREF="#SECURITY-RECORD-SOFTWARE-POPULARITY"
>The impact of bad security record on software popularity</A
></DT
><DT
>23.3. <A
HREF="#COMMON-PHP-NUKE-SECURITY-VULNERABILITIES"
>Common <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> security vulnerabilities</A
></DT
><DT
>23.4. <A
HREF="#GUARD-SECURITY-VULNERABILITIES-IN-PHP-NUKE"
>How to guard against security vulnerabilities in PHP-Nuke</A
></DT
><DT
>23.5. <A
HREF="#BAN-IP-ADDRESSES"
>How to ban IP addresses</A
></DT
><DT
>23.6. <A
HREF="#HACKED-NOW-WHAT"
>Hacked - now what?</A
></DT
></DL
></DD
><DT
>24. <A
HREF="#ACCELERATING-PHP-NUKE"
>Accelerating PHP-Nuke</A
></DT
><DD
><DL
><DT
>24.1. <A
HREF="#CACHING-PHP-NUKE"
>Caching PHP-Nuke</A
></DT
></DL
></DD
><DT
>25. <A
HREF="#OPTIMIZING-PHP-NUKE"
>Optimizing <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
></A
></DT
><DD
><DL
><DT
>25.1. <A
HREF="#SEARCH-ENGINES-AND-DYNAMIC-URLS"
>Search engines and dynamic URLs</A
></DT
><DT
>25.2. <A
HREF="#MOD-REWRITE"
>mod_rewrite</A
></DT
><DT
>25.3. <A
HREF="#REGULAR-EXPRESSIONS"
>Regular expressions</A
></DT
><DT
>25.4. <A
HREF="#HTACCESS-FILE"
>The .htaccess file</A
></DT
><DT
>25.5. <A
HREF="#MAKE-PHP-NUKE-SEARCH-ENGINE-FRIENDLY"
>How to make <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> search engine friendly</A
></DT
><DT
>25.6. <A
HREF="#MAKE-PHP-NUKE-HOT-LINK-STEALTH"
>How to make <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> hot link stealth</A
></DT
><DT
>25.7. <A
HREF="#MAKE-DYNAMIC-CSS"
>How to make a dynamic CSS</A
></DT
><DT
>25.8. <A
HREF="#PROCEED-WHEN-MYSQL-SLOW"
>How to proceed when MySQL is slow</A
></DT
></DL
></DD
><DT
>26. <A
HREF="#SOLVE-COMMON-PROBLEMS-PHP-NUKE"
>How to solve common probems with PHP-Nuke</A
></DT
><DD
><DL
><DT
>26.1. <A
HREF="#REPAIR-CORRUPT-TABLE"
>How to repair a corrupt table</A
></DT
><DT
>26.2. <A
HREF="#RESTORE-PHP-NUKE-FROM-BACKUP"
>How to restore <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> from backup</A
></DT
><DT
>26.3. <A
HREF="#INSTALL-NEW-MODULES"
>How to install new modules</A
></DT
><DT
>26.4. <A
HREF="#INSTALL-PATCHES-CORRECT-ERRORS"
>How to install patches and correct errors</A
></DT
><DT
>26.5. <A
HREF="#FIND-ALL-REGISTRATION-LINKS"
>How to find all registration links</A
></DT
><DT
>26.6. <A
HREF="#ALLOW-ANONYMOUS-WEB-LINK-SUBMISSIONS"
>How to allow anonymous web link submissions</A
></DT
><DT
>26.7. <A
HREF="#DISABLE-DEBUG-MODE"
>How to disable DEBUG mode</A
></DT
></DL
></DD
><DT
>27. <A
HREF="#MISCELLANEOUS"
>Miscellaneous</A
></DT
><DD
><DL
><DT
>27.1. <A
HREF="#CHANGE-HOME-MODULE"
>How to change the Home module</A
></DT
><DT
>27.2. <A
HREF="#PHP-NUKE-UNDER-SSL"
>How to use <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> under SSL</A
></DT
><DT
>27.3. <A
HREF="#CHANGE-PHP-PARAMETERS"
>How to change <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> parameters when you don't have access to php.ini</A
></DT
><DT
>27.4. <A
HREF="#DISPLAY-HTML-CODE-IN-FAQ"
>How to display HTML code in a FAQ</A
></DT
><DT
>27.5. <A
HREF="#ENTER-THOUSANDS-OF-WEB-LINKS"
>How to enter thousands of web links</A
></DT
><DT
>27.6. <A
HREF="#ENTER-THOUSANDS-OF-DOWNLOAD-LINKS"
>How to enter thousands of download links</A
></DT
><DT
>27.7. <A
HREF="#CHECK-VALIDITY-OF-WEB-LINKS"
>How to check the validity of thousands of web links</A
></DT
><DT
>27.8. <A
HREF="#ENTER-THOUSANDS-OF-EPHEMERIDS"
>How to enter thousands of ephemerids</A
></DT
><DT
>27.9. <A
HREF="#MAKE-ENCYCLOPEDIA-INTERNATIONAL"
>How to make the Encyclopedia international</A
></DT
><DT
>27.10. <A
HREF="#FIND-USER-NAME"
>How to find the user name in a module</A
></DT
><DT
>27.11. <A
HREF="#CORRECT-THOUSANDS-OF-USERS-FIELDS"
>How to correct thousands of users fields</A
></DT
><DT
>27.12. <A
HREF="#SIZE-SELECT-BOXES"
>How to size the select boxes in a module</A
></DT
><DT
>27.13. <A
HREF="#DATE-TIME"
>How to deal with date and time</A
></DT
><DT
>27.14. <A
HREF="#DEAL-WITH-QUOTES-IN-SITENAME"
>How to deal with quotes in the site's name</A
></DT
><DT
>27.15. <A
HREF="#FLASH-PHP-NUKE-NEWS"
>How to embed a Flash object in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> News</A
></DT
><DT
>27.16. <A
HREF="#BACKUP-MYSQL-USING-BROWSER"
>How to backup your MySQL database using only the browser</A
></DT
></DL
></DD
><DT
>28. <A
HREF="#TOOLS"
>Programmer's tools</A
></DT
><DD
><DL
><DT
>28.1. <A
HREF="#DATABASE-TABLES"
>The database tables</A
></DT
><DT
>28.2. <A
HREF="#HTML-SYNTAX"
>The syntax of HTML code</A
></DT
><DT
>28.3. <A
HREF="#CSS-SYNTAX"
>The syntax of CSS</A
></DT
><DT
>28.4. <A
HREF="#PHP-SYNTAX"
>The syntax of <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code</A
></DT
><DT
>28.5. <A
HREF="#SQL-SYNTAX"
>The syntax of SQL code</A
></DT
><DT
>28.6. <A
HREF="#MYSQL-FRONTEND"
>MySQL Front, how to administer a MySQL DB from <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
></A
></DT
><DT
>28.7. <A
HREF="#FOXSERV"
>Foxserv, making <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> work on <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> Systems</A
></DT
></DL
></DD
><DT
>A. <A
HREF="#AEN21797"
>Appendix</A
></DT
><DD
><DL
><DT
>A.1. <A
HREF="#GNU-FREE-DOCUMENATION-LICENCE"
>The <ACRONYM
CLASS="ACRONYM"
>GNU</ACRONYM
> Free Documentation Licence</A
></DT
></DL
></DD
><DT
><A
HREF="#AEN21918"
>Index</A
></DT
></DL
></DIV
><DIV
CLASS="LOT"
><DL
CLASS="LOT"
><DT
><B
>List of Tables</B
></DT
><DT
>6-1. <A
HREF="#TAB-SECTIONS"
>Classification with topics and sections</A
></DT
><DT
>14-1. <A
HREF="#TAB-BODY-TAGS"
>&#60;body&#62; tags in theme.php of various themes</A
></DT
><DT
>16-1. <A
HREF="#TAB-FILTER-TEXT"
>Calls to filter_text from <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules (v.6.8)</A
></DT
><DT
>16-2. <A
HREF="#TAB-CHECK-HTML"
>Calls to check_html from <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules (v.6.8)</A
></DT
><DT
>20-1. <A
HREF="#TAB-HELP-CENTER-LIVE-SETCOOKIE"
>Help Center Live: setcookie() calls</A
></DT
><DT
>21-1. <A
HREF="#TAB-CHANGING-HTML-LINKS"
>Changing HTML links for use in a custom <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module</A
></DT
><DT
>21-2. <A
HREF="#TAB-CHANGING-HTML-LINKS-2"
>Alternative way of changing HTML links for use in a custom <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module</A
></DT
><DT
>23-1. <A
HREF="#TAB-SECURITY-VULNERABILITIES"
>List of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> security vulnerabilities</A
></DT
><DT
>25-1. <A
HREF="#TAB-URLIN-URLOUT"
>URL replacement with replace_for_mod_rewrite(): dynamic to static.</A
></DT
></DL
></DIV
><DIV
CLASS="LOT"
><DL
CLASS="LOT"
><DT
><B
>List of Figures</B
></DT
><DT
>2-1. <A
HREF="#FIG-PHP-NUKE"
>phpnuke.org, the official <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site.</A
></DT
><DT
>3-1. <A
HREF="#FIG-WS-FTP-GENERAL"
>WS_FTP: General connection parameters.</A
></DT
><DT
>3-2. <A
HREF="#FIG-WS-FTP-LOCAL-REMOTE"
>WS_FTP: Main screen with local and remote windows.</A
></DT
><DT
>3-3. <A
HREF="#FIG-FILE-STRUCTURE"
><SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.0 file structure</A
></DT
><DT
>3-4. <A
HREF="#FIG-WS-FTP-CHMOD-1"
>WS_FTP context menu on right mouse click: chmod (UNIX)</A
></DT
><DT
>3-5. <A
HREF="#FIG-WS-FTP-CHMOD-2"
>WS_FTP Remote file permissions window</A
></DT
><DT
>3-6. <A
HREF="#FIG-PHPMYADMIN-START"
>PHPMyAdmin start screen.</A
></DT
><DT
>3-7. <A
HREF="#FIG-PHPMYADMIN-SELECT-DATABASE"
>phpMyAdmin: Select database.</A
></DT
><DT
>3-8. <A
HREF="#FIG-PHPMYADMIN-NAVIGATION-BAR"
>phpMyAdmin: Navigation bar.</A
></DT
><DT
>3-9. <A
HREF="#FIG-PHPMYADMIN-FIELD-FUNCTIONS"
>phpMyAdmin: field functions.</A
></DT
><DT
>3-10. <A
HREF="#FIG-PHPMYADMIN-SQL"
>phpMyAdmin: SQL function.</A
></DT
><DT
>3-11. <A
HREF="#FIG-PHPMYADMIN-DATABASE-DUMP"
>phpMyAdmin: database dump.</A
></DT
><DT
>3-12. <A
HREF="#FIG-FORUM-TOPICS"
>phpMyAdmin: table forum_topics.</A
></DT
><DT
>3-13. <A
HREF="#FIG-PHPMYADMIN-CREATE-DATABASE"
>phpMyAdmin: Create database.</A
></DT
><DT
>3-14. <A
HREF="#FIG-PHPMYADMIN-TABLE-STRUCTURE"
>phpMyAdmin: table structure and selection.</A
></DT
><DT
>3-15. <A
HREF="#FIG-PHPMYADMIN-SQL-QUERY"
>phpMyAdmin: SQL query.</A
></DT
><DT
>3-16. <A
HREF="#FIG-PHPMYADMIN-TABLE-DATA"
>phpMyAdmin: table data.</A
></DT
><DT
>3-17. <A
HREF="#FIG-EASYPHP"
>easyPHP: Installation screen.</A
></DT
><DT
>3-18. <A
HREF="#FIG-EASYPHP2"
>easyPHP icon in the bottom bar.</A
></DT
><DT
>3-19. <A
HREF="#FIG-PHPINFO-PHP-WINDOWS"
>phpinfo: <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> screen for a <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> system.</A
></DT
><DT
>3-20. <A
HREF="#FIG-APACHE-PACKAGE"
>RPMdrake: selecting the Apache package(s) for installation.</A
></DT
><DT
>3-21. <A
HREF="#FIG-MANDRAKE-CONTROL-CENTER"
><SPAN
CLASS="PRODUCTNAME"
>Mandrake</SPAN
> Control Center.</A
></DT
><DT
>3-22. <A
HREF="#FIG-RED-HAT-MENU-PACKAGES"
>Red Hat Menu: Packages.</A
></DT
><DT
>3-23. <A
HREF="#FIG-RED-HAT-PACKAGE-SECTIONS"
>Red Hat: Package Sections.</A
></DT
><DT
>3-24. <A
HREF="#FIG-RED-HAT-SERVICE-CONFIGURATION"
>Red Hat: Service Configuration Panel.</A
></DT
><DT
>3-25. <A
HREF="#FIG-ANALYZE-MYSQL-CONNECTION"
>analyze.php: MySQL connection transcript.</A
></DT
><DT
>3-26. <A
HREF="#FIG-ANALYZE-WARNING-MYSQL"
>analyze.php: MySQL security warning.</A
></DT
><DT
>3-27. <A
HREF="#FIG-MODULES-ADMIN-2"
>Modules administration panel.</A
></DT
><DT
>3-28. <A
HREF="#FIG-SECURITY-CODE"
>Security code in the User Login screen.</A
></DT
><DT
>3-29. <A
HREF="#FIG-PHPINFO-GD"
>phpinfo(): GD library information.</A
></DT
><DT
>3-30. <A
HREF="#FIG-ANALYZE-GD"
>analyze.php: GD library information.</A
></DT
><DT
>3-31. <A
HREF="#FIG-LOGIN-SCREEN"
>User Login screen.</A
></DT
><DT
>3-32. <A
HREF="#FIG-FORUM-3"
>Administration panel: Forums.</A
></DT
><DT
>3-33. <A
HREF="#FIG-FORUM-4"
>Administration panel: Forums.</A
></DT
><DT
>3-34. <A
HREF="#FIG-EDIT-ADMINS-2"
>Administration panel: Edit Admins.</A
></DT
><DT
>3-35. <A
HREF="#FIG-EDIT-ADMINS-3"
>Administration panel: Edit Admins.</A
></DT
><DT
>3-36. <A
HREF="#FIG-PHPMYADMIN-FIELD-FUNCTIONS-2"
>phpMyAdmin: field functions.</A
></DT
><DT
>3-37. <A
HREF="#FIG-FORUM-GZIP-COMPRESSION"
>Gzip compression in the Admin Panel of the Forums module.</A
></DT
><DT
>3-38. <A
HREF="#FIG-MODULES-4"
>Administration panel: Modules.</A
></DT
><DT
>3-39. <A
HREF="#FIG-MISSING-BLOCKS"
>Missing blocks.</A
></DT
><DT
>6-1. <A
HREF="#FIG-HOMEPAGE"
><SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Homepage</A
></DT
><DT
>6-2. <A
HREF="#FIG-CATEGORY"
>Classifying articles</A
></DT
><DT
>6-3. <A
HREF="#FIG-DOWNLOADS-ADMIN"
>Downloads module</A
></DT
><DT
>6-4. <A
HREF="#FIG-PRIVATE-MESSAGES"
>Private messages</A
></DT
><DT
>6-5. <A
HREF="#FIG-SEARCH"
>Search module</A
></DT
><DT
>6-6. <A
HREF="#FIG-STATS"
>Statistics module</A
></DT
><DT
>6-7. <A
HREF="#FIG-YOUR-ACCOUNT"
>Your account</A
></DT
><DT
>6-8. <A
HREF="#FIG-SPLATT-FORUM"
>Splatt Forum.</A
></DT
><DT
>6-9. <A
HREF="#FIG-PHPBB-FORUM"
>phpBB Forum.</A
></DT
><DT
>6-10. <A
HREF="#FIG-MODULES-BLOCK-3"
>The standard Modules block</A
></DT
><DT
>6-11. <A
HREF="#FIG-WAITING-CONTENT-BLOCK-2"
>Waiting Content block.</A
></DT
><DT
>6-12. <A
HREF="#FIG-WHO-IS-ONLINE"
>Who Is Online block.</A
></DT
><DT
>6-13. <A
HREF="#FIG-LANGUAGES"
>Languages block.</A
></DT
><DT
>6-14. <A
HREF="#FIG-SURVEYS-BLOCK"
>Surveys block.</A
></DT
><DT
>6-15. <A
HREF="#FIG-LOGIN"
>Login block.</A
></DT
><DT
>7-1. <A
HREF="#FIG-ADMIN-PANEL"
>Administration panel.</A
></DT
><DT
>7-2. <A
HREF="#FIG-STORIES"
>Administration panel: Add story.</A
></DT
><DT
>7-3. <A
HREF="#FIG-ARTICLE-POLL"
>Attaching a poll to an article awaiting admission.</A
></DT
><DT
>7-4. <A
HREF="#FIG-ARTICLE-POLL-BLOCK"
>Article Poll block.</A
></DT
><DT
>7-5. <A
HREF="#FIG-BACKUP"
>Administration panel: Backup DB.</A
></DT
><DT
>7-6. <A
HREF="#FIG-BANNERS"
>Administration panel: Banners.</A
></DT
><DT
>7-7. <A
HREF="#FIG-BLOCKS"
>Administration panel: Blocks.</A
></DT
><DT
>7-8. <A
HREF="#FIG-CONTENT"
>Administration panel: Content.</A
></DT
><DT
>7-9. <A
HREF="#FIG-DOWNLOADS"
>Administration panel: Downloads.</A
></DT
><DT
>7-10. <A
HREF="#FIG-EDIT-ADMINS"
>Administration panel: Edit Admins.</A
></DT
><DT
>7-11. <A
HREF="#FIG-EDIT-USERS"
>Administration panel: Edit Users.</A
></DT
><DT
>7-12. <A
HREF="#FIG-ENCYCLOPEDIA"
>Administration panel: Encyclopedia.</A
></DT
><DT
>7-13. <A
HREF="#FIG-EPHEMERIDS"
>Administration panel: Ephemerids.</A
></DT
><DT
>7-14. <A
HREF="#FIG-FAQ"
>Administration panel: FAQ.</A
></DT
><DT
>7-15. <A
HREF="#FIG-FORUM"
>Administration panel: Forums.</A
></DT
><DT
>7-16. <A
HREF="#FIG-REFERERS"
>Administration panel: HTTP Referers.</A
></DT
><DT
>7-17. <A
HREF="#FIG-MESSAGES"
>Administration panel: Messages.</A
></DT
><DT
>7-18. <A
HREF="#FIG-MODULES"
>Administration panel: Modules.</A
></DT
><DT
>7-19. <A
HREF="#FIG-MODULES-ADMIN"
>Modules administration panel.</A
></DT
><DT
>7-20. <A
HREF="#FIG-NEWSLETTER"
>Administration panel: Newsletter.</A
></DT
><DT
>7-21. <A
HREF="#FIG-OPTIMIZE"
>Administration panel: Optimize DB.</A
></DT
><DT
>7-22. <A
HREF="#FIG-PREFERENCES"
>Administration panel: Preferences.</A
></DT
><DT
>7-23. <A
HREF="#FIG-REVIEWS"
>Administration panel: Reviews.</A
></DT
><DT
>7-24. <A
HREF="#FIG-SECTIONS"
>Administration panel: Sections.</A
></DT
><DT
>7-25. <A
HREF="#FIG-SUBMISSIONS"
>Administration panel: Submissions.</A
></DT
><DT
>7-26. <A
HREF="#FIG-SURVEYS"
>Administration panel: Surveys.</A
></DT
><DT
>7-27. <A
HREF="#FIG-TOPICS"
>Administration panel: Topics.</A
></DT
><DT
>7-28. <A
HREF="#FIG-ADD-TOPIC"
>Administration panel: Add a new topic.</A
></DT
><DT
>7-29. <A
HREF="#FIG-WEBLINKS"
>Administration panel: Web Links.</A
></DT
><DT
>7-30. <A
HREF="#FIG-LOGOUT"
>Administration panel: Logout.</A
></DT
><DT
>7-31. <A
HREF="#FIG-FORUM-2"
>Administration panel: Forums.</A
></DT
><DT
>7-32. <A
HREF="#FIG-PREFERENCES-2"
>Administration panel: Preferences.</A
></DT
><DT
>7-33. <A
HREF="#FIG-GENERAL-SITE-INFO"
>General site info in the Preferences page.</A
></DT
><DT
>7-34. <A
HREF="#FIG-FOOTER"
>Icons in the footer.</A
></DT
><DT
>7-35. <A
HREF="#FIG-WEBMAIL-OPTIONS"
>WebMail service options in the Preferences page.</A
></DT
><DT
>8-1. <A
HREF="#FIG-MOON-MOONSUN-SUN"
>Moon, Moon &#38; Sun and Sun blocks.</A
></DT
><DT
>8-2. <A
HREF="#FIG-METEOSAT"
>Meteosat block.</A
></DT
><DT
>8-3. <A
HREF="#FIG-MY-MENU"
>Menu block with Menu Builder.</A
></DT
><DT
>8-4. <A
HREF="#FIG-TREEMENU3-2"
>Treemenu block with <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
>.</A
></DT
><DT
>8-5. <A
HREF="#FIG-TREEMENU-JS"
>Treemenu block with Javascript.</A
></DT
><DT
>8-6. <A
HREF="#FIG-SOMMAIRE-PARAMETRABLE"
>Modules block. created with Sommaire Paramétrable.</A
></DT
><DT
>8-7. <A
HREF="#FIG-RANDOM-QUOTES"
>Random Quotes block.</A
></DT
><DT
>8-8. <A
HREF="#FIG-EVENTCAL"
>Event Calendar</A
></DT
><DT
>8-9. <A
HREF="#FIG-EVENTCAL1"
>Calendar1 Block</A
></DT
><DT
>8-10. <A
HREF="#FIG-EVENTCAL2"
>Calendar2 Block</A
></DT
><DT
>8-11. <A
HREF="#FIG-EVENTCAL3"
>Calendar3 Block</A
></DT
><DT
>8-12. <A
HREF="#FIG-EVENTCAL4"
>Calendar4 Block</A
></DT
><DT
>8-13. <A
HREF="#FIG-EVENTCAL5"
>Calendar5 Block</A
></DT
><DT
>8-14. <A
HREF="#FIG-YOUR-ACCOUNT-TWEAK"
>Extra options for user management in the NSN Your Account Tweak module.</A
></DT
><DT
>8-15. <A
HREF="#FIG-APPROVE-MEMBERSHIP-PENDING-APPLICATIONS"
>Pending applications in the Approve Membership module.</A
></DT
><DT
>8-16. <A
HREF="#FIG-APPROVE-MEMBERSHIP-APPROVAL-MESSAGE"
>Approval message in the Approve Membership module.</A
></DT
><DT
>8-17. <A
HREF="#FIG-APPROVE-MEMBERSHIP-EMAIL-MANAGEMENT-1"
>E-mail management in the Approve Membership module, part I.</A
></DT
><DT
>8-18. <A
HREF="#FIG-APPROVE-MEMBERSHIP-EMAIL-MANAGEMENT-2"
>E-mail management in the Approve Membership module, part II.</A
></DT
><DT
>8-19. <A
HREF="#FIG-GALLERY"
>Gallery module.</A
></DT
><DT
>8-20. <A
HREF="#FIG-GALLERY-RELATED-FILES"
>Gallery related files at nukedgallery.</A
></DT
><DT
>8-21. <A
HREF="#FIG-IP-TRACKING"
>IP Tracking module: IP Tracking Info.</A
></DT
><DT
>8-22. <A
HREF="#FIG-IP-TRACKING-PAGE-VIEW-INFO"
>IP Tracking module: Page View Info.</A
></DT
><DT
>8-23. <A
HREF="#FIG-CAMPORTAL-BLOCK"
>camPortal block.</A
></DT
><DT
>8-24. <A
HREF="#FIG-CAMPORTAL"
>camPortal module.</A
></DT
><DT
>8-25. <A
HREF="#FIG-CONQUERCAM"
>ConquerCam: main window with the Options dialog opened up.</A
></DT
><DT
>8-26. <A
HREF="#FIG-MYHEADLINES-BOX"
>MyHeadlines Box containing syndicated content.</A
></DT
><DT
>8-27. <A
HREF="#FIG-MYHEADLINES-SUBSCRIBE"
>MyHeadlines: Subscribing to News sources.</A
></DT
><DT
>8-28. <A
HREF="#FIG-PHP-NUKE-TOOLS-BLOCK"
><SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Tools block</A
></DT
><DT
>8-29. <A
HREF="#FIG-PHP-NUKE-TOOLS-MODULE-CREATOR"
><SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Tools module: Module Creator.</A
></DT
><DT
>8-30. <A
HREF="#FIG-UPLOAD"
>Upload module.</A
></DT
><DT
>8-31. <A
HREF="#FIG-ODP"
>ODP module.</A
></DT
><DT
>8-32. <A
HREF="#FIG-CALLOWAYS-CART-ADD-PRODUCT"
>Calloways Cart module: Add Product screen.</A
></DT
><DT
>8-33. <A
HREF="#FIG-WORKBOARD"
>Administration panel: WorkBoard.</A
></DT
><DT
>8-34. <A
HREF="#FIG-WORKBOARD-ADMIN"
>WorkBoard module: Administration panel.</A
></DT
><DT
>9-1. <A
HREF="#FIG-PHP-NUKE-HTML-FOLDER"
><SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> directory structure.</A
></DT
><DT
>12-1. <A
HREF="#FIG-EXTRA-INFO"
>Extra Info field of User Personal Information (Your Info)</A
></DT
><DT
>14-1. <A
HREF="#FIG-THEME-STRUCTURE-NUKENEWS"
>Structure of the NukeNews theme.</A
></DT
><DT
>14-2. <A
HREF="#FIG-THEME-STRUCTURE-OTHER"
>Structure of other themes, without HTML templates.</A
></DT
><DT
>14-3. <A
HREF="#FIG-TOP-NAV-BAR"
>Top navigation bar in the NukeNews theme.</A
></DT
><DT
>14-4. <A
HREF="#FIG-POSTED-BY"
>News article: &#8220;posted by&#8221; does not mean &#8220;submitted by&#8221;.</A
></DT
><DT
>16-1. <A
HREF="#FIG-MESSAGES-2"
>Administration panel: Messages.</A
></DT
><DT
>17-1. <A
HREF="#FIG-MODULES-BLOCK"
>The standard Modules block</A
></DT
><DT
>17-2. <A
HREF="#FIG-MODULES-BLOCK-2"
>The standard Modules block.</A
></DT
><DT
>17-3. <A
HREF="#FIG-TREEMENU"
>Treemenu Block.</A
></DT
><DT
>17-4. <A
HREF="#FIG-TREEMENU1"
>Treemenu Block with &#8220;Links&#8221; expanded.</A
></DT
><DT
>17-5. <A
HREF="#FIG-TREEMENU2"
>Treemenu Block with &#8220;My work&#8221; expanded.</A
></DT
><DT
>17-6. <A
HREF="#FIG-TREEMENU3"
>Treemenu Block with &#8220;Linux&#8221; expanded.</A
></DT
><DT
>18-1. <A
HREF="#FIG-MODULES-5"
>Administration panel: Modules.</A
></DT
><DT
>18-2. <A
HREF="#FIG-FAQ-3"
>Administration panel: FAQ.</A
></DT
><DT
>18-3. <A
HREF="#FIG-REVIEWS-2"
>Administration panel: Reviews.</A
></DT
><DT
>18-4. <A
HREF="#FIG-WEBLINKS-4"
>Administration panel: Web Links.</A
></DT
><DT
>18-5. <A
HREF="#FIG-YOUR-INFO-PROFILE-LINK"
>Your Info link in the User Preferences panel.</A
></DT
><DT
>18-6. <A
HREF="#FIG-FORUM-PROFILE-LINK"
>Forum Profile link in the Forums module.</A
></DT
><DT
>18-7. <A
HREF="#FIG-YOUR-INFO-PROFILE"
>User profile in Your Info.</A
></DT
><DT
>18-8. <A
HREF="#FIG-FORUM-PROFILE"
>User profile in the Forums.</A
></DT
><DT
>18-9. <A
HREF="#FIG-STORIES-2"
>Administration panel: Add story.</A
></DT
><DT
>18-10. <A
HREF="#FIG-SUBMISSIONS-2"
>Administration panel: Submissions.</A
></DT
><DT
>18-11. <A
HREF="#FIG-WAITING-CONTENT-BLOCK"
>Waiting Content block.</A
></DT
><DT
>18-12. <A
HREF="#FIG-SECTIONS-2"
>Administration panel: Sections.</A
></DT
><DT
>18-13. <A
HREF="#FIG-DOWNLOADS-4"
>Administration panel: Downloads.</A
></DT
><DT
>18-14. <A
HREF="#FIG-STORIES-3"
>Administration panel: Add story.</A
></DT
><DT
>19-1. <A
HREF="#FIG-ADMIN-PANEL-2"
>Administration panel.</A
></DT
><DT
>19-2. <A
HREF="#FIG-PREFERENCES-3"
>Administration panel: Preferences.</A
></DT
><DT
>19-3. <A
HREF="#FIG-NEWSLETTER-2"
>Administration panel: Newsletter.</A
></DT
><DT
>20-1. <A
HREF="#FIG-BLOCKS-2"
>Administration panel: Blocks.</A
></DT
><DT
>20-2. <A
HREF="#FIG-BLOCK-EXAMPLE"
>Block example</A
></DT
><DT
>20-3. <A
HREF="#FIG-CONTENT-2"
>Administration panel: Content.</A
></DT
><DT
>20-4. <A
HREF="#FIG-HELLO-WORLD-JAVASCRIPT"
>Hello World block with Javascript.</A
></DT
><DT
>20-5. <A
HREF="#FIG-HELP-CENTER-LIVE-MAIN"
>Help Center Live: Main screen.</A
></DT
><DT
>20-6. <A
HREF="#FIG-HELP-CENTER-LIVE-BLOCK-OFFLINE"
>Help Center Live block: Live Support is Offline.</A
></DT
><DT
>20-7. <A
HREF="#FIG-HELP-CENTER-LIVE-BLOCK-TROUBLE-TICKET"
>Help Center Live block: Creating a trouble ticket.</A
></DT
><DT
>20-8. <A
HREF="#FIG-HELP-CENTER-LIVE-BLOCK-ONLINE"
>Help Center Live block: Live Support is Online.</A
></DT
><DT
>20-9. <A
HREF="#FIG-HELP-CENTER-LIVE-BLOCK-REQUEST-MONITOR"
>Help Center Live block: Request monitor for the operator.</A
></DT
><DT
>20-10. <A
HREF="#FIG-HELP-CENTER-LIVE-BLOCK-USER-NOTIFY"
>Help Center Live block: User notification of the operator's chat request.</A
></DT
><DT
>20-11. <A
HREF="#FIG-HELP-CENTER-LIVE-BLOCK-USER-REQUEST"
>Help Center Live block: User chat request.</A
></DT
><DT
>20-12. <A
HREF="#FIG-PAYPAL1"
>PayPal donation button</A
></DT
><DT
>20-13. <A
HREF="#FIG-PAYPAL2"
>PayPal donation block.</A
></DT
><DT
>21-1. <A
HREF="#FIG-INSERTING-VALUES"
>PHPMyAdmin: inserting values</A
></DT
><DT
>21-2. <A
HREF="#FIG-EXAMPLE-MODULE"
>Example module.</A
></DT
><DT
>21-3. <A
HREF="#FIG-IFRAMES"
><SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> HOWTO included in a module with the help of an iframe.</A
></DT
><DT
>21-4. <A
HREF="#FIG-LOGOUT-MODULE"
>Logout link in the Modules block.</A
></DT
><DT
>23-1. <A
HREF="#FIG-ANALYZE-WARNING-PHP"
><ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> security warning from analyze.php.</A
></DT
><DT
>23-2. <A
HREF="#FIG-ANALYZE-WARNING-SITEKEY"
>Site key security warning from analyze.php.</A
></DT
><DT
>23-3. <A
HREF="#FIG-ANALYZE-WARNING-WEBMAIL"
>WebMail security warning from analyze.php.</A
></DT
><DT
>24-1. <A
HREF="#FIG-OPTIMIZE-2"
>Accelerating <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>.</A
></DT
><DT
>24-2. <A
HREF="#FIG-OPTIMIZE-PHP"
>Optimizing <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code execution.</A
></DT
><DT
>24-3. <A
HREF="#FIG-JPCACHE"
>Powered by jpcache.</A
></DT
><DT
>24-4. <A
HREF="#FIG-PEAR"
>Cache-Lite is powered by PEAR.</A
></DT
><DT
>24-5. <A
HREF="#FIG-MMCACHE"
>Turck MMCache.</A
></DT
><DT
>25-1. <A
HREF="#FIG-MOD-REWRITE-PHPINFO"
>Apache section of the phpinfo() output: mod_rewrite is loaded.</A
></DT
><DT
>25-2. <A
HREF="#FIG-MOD-REWRITE-CONTROL-FLOW"
>mod_rewrite: The control flow through the rewriting ruleset</A
></DT
><DT
>25-3. <A
HREF="#FIG-MOD-REWRITE-BACK-REFERENCE"
>mod_rewrite: The back-reference flow through a rule.</A
></DT
><DT
>25-4. <A
HREF="#FIG-REGULAR-EXPRESSIONS"
>Pattern matching with a regular expression.</A
></DT
><DT
>26-1. <A
HREF="#FIG-BACKUP-2"
>Administration panel: Backup DB.</A
></DT
><DT
>26-2. <A
HREF="#FIG-BACKUP-DB"
>Administration panel: Backup DB.</A
></DT
><DT
>26-3. <A
HREF="#FIG-PHPMYADMIN-SQL-QUERY-2"
>phpMyAdmin: SQL query.</A
></DT
><DT
>26-4. <A
HREF="#FIG-MODULES-3"
>Administration panel: Modules.</A
></DT
><DT
>26-5. <A
HREF="#FIG-WEBLINKS-5"
>Administration panel: Web Links.</A
></DT
><DT
>27-1. <A
HREF="#FIG-MODULES-2"
>Administration panel: Modules.</A
></DT
><DT
>27-2. <A
HREF="#FIG-MODULES-ADMIN-3"
>Modules administration panel.</A
></DT
><DT
>27-3. <A
HREF="#FIG-FAQ-2"
>Administration panel: FAQ.</A
></DT
><DT
>27-4. <A
HREF="#FIG-WEBLINKS-2"
>Administration panel: Web Links.</A
></DT
><DT
>27-5. <A
HREF="#FIG-DOWNLOADS-2"
>Administration panel: Downloads.</A
></DT
><DT
>27-6. <A
HREF="#FIG-WEBLINKS-3"
>Administration panel: Web Links.</A
></DT
><DT
>27-7. <A
HREF="#FIG-EPHEMERIDS-2"
>Administration panel: Ephemerids.</A
></DT
><DT
>27-8. <A
HREF="#FIG-ENCYCLOPEDIA-2"
>Administration panel: Encyclopedia.</A
></DT
><DT
>27-9. <A
HREF="#FIG-DOWNLOADS-3"
>Administration panel: Downloads.</A
></DT
><DT
>27-10. <A
HREF="#FIG-DOWNLOADS-ADD-DOWNLOAD"
>Downloads: Add download.</A
></DT
><DT
>27-11. <A
HREF="#FIG-DOWNLOADS-ADD-DOWNLOAD-2"
>Downloads: Add download.</A
></DT
><DT
>27-12. <A
HREF="#FIG-DOWNLOADS-MAIN-CATEGORIES-MAXDATE"
>Downloads: Main categories with last download date.</A
></DT
><DT
>27-13. <A
HREF="#FIG-YOUR-INFO-PROFILE-TIMEZONE"
>Your Info profile: Timezone and Date settings.</A
></DT
><DT
>28-1. <A
HREF="#FIG-PAGE-AREA-MODEL"
>CSS page area model.</A
></DT
><DT
>28-2. <A
HREF="#FIG-MYSQLFRONT-CONNECTION"
>MySQL Front: Connection</A
></DT
><DT
>28-3. <A
HREF="#FIG-MYSQLFRONT-EXPORT-TABLES"
>MySQL Front: export tables</A
></DT
><DT
>28-4. <A
HREF="#FIG-MYSQLFRONT-SQL-QUERY"
>MySQL Front: SQL Query</A
></DT
></DL
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="TERMS"
></A
>Chapter 1. Terms of distribution</H1
><DIV
CLASS="SECT1"
><H2
CLASS="SECT1"
><A
NAME="DISCLAIMER"
>1.1. Disclaimer</A
></H2
><P
>No liability for the contents of this documents can be accepted. Use the concepts, examples and other content at your own risk. As this is a new edition of this document, there may be errors and inaccuracies, that may of course be damaging to your system. Proceed with caution, and although this is highly unlikely, the author does not take any responsibility for that.</P
><P
>All copyrights are held by their respective owners, unless specifically noted otherwise. Use of a term in this document should not be regarded as affecting the validity of any trademark or service mark.</P
><P
>Naming of particular products or brands should not be seen as endorsements.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="FORMATS"
>1.2. Formats</A
></H2
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Include the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> HOWTO as a module in your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>You can include the <A
HREF="http://www.karakas-online.de/EN-Book/"
TARGET="_top"
>PHP-Nuke HOWTO</A
> in your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site as a module using either the method of <A
HREF="#INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE"
>Section 21.6</A
> or the method of <A
HREF="#INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE-IFRAME"
>Section 21.7</A
>!</P
><P
>To use the method of <A
HREF="#INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE"
>Section 21.6</A
>, download the <A
HREF="http://www.karakas-online.de/EN-Book/EN-Book-Nuke.tar.gz"
TARGET="_top"
>PHP-Nuke module version of the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> HOWTO</A
> and install it according to the instruction in the accompanying INSTALL file.</P
><P
>To use the method of <A
HREF="#INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE-IFRAME"
>Section 21.7</A
>, just make a module with an index.php file exactly as in the example shown there. It will show the starting page of the PHP-HOWTO in an iframe (<A
HREF="#FIG-IFRAMES"
>Figure 21-3</A
>) and you will be able to navigate its pages without installing anything locally. You have Chris' explicit permission for this.
<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_smile.png"></SPAN
> </P
></TD
></TR
></TABLE
></DIV
><P
>This document is available in the following formats:</P
><P
></P
><UL
><LI
><P
><A
HREF="./book1.html"
TARGET="_top"
>HTML (HyperText Markup Language)</A
>, many HTML files (one for every section), for viewing with <A
HREF="http://www.anybrowser.org/campaign/"
TARGET="_top"
>any browser</A
></P
></LI
><LI
><P
><A
HREF="./EN-Book.html"
TARGET="_top"
>HTML (HyperText Markup Language)</A
>, one big HTML file</P
></LI
><LI
><P
><A
HREF="http://www.karakas-online.de/EN-Book/EN-Book-Nuke.tar.gz"
TARGET="_top"
>PHP-Nuke Module</A
></P
></LI
><LI
><P
><A
HREF="./EN-Book.txt"
TARGET="_top"
>TXT (ASCII Text)</A
></P
></LI
><LI
><P
><A
HREF="./EN-Book.rtf"
TARGET="_top"
>RTF (Rich Text Format)</A
></P
></LI
><LI
><P
><A
HREF="./EN-Book.pdf"
TARGET="_top"
>PDF (Portable Document Format)</A
></P
></LI
><LI
><P
><A
HREF="./EN-Book.ps.gz"
TARGET="_top"
>PS.GZ (Compressed Postscript)</A
></P
></LI
><LI
><P
><A
HREF="./EN-Book.sgml"
TARGET="_top"
>SGML (Standard Generalized Markup Language)</A
>, (with the <A
HREF="appendix.sgml"
TARGET="_top"
>Appendix</A
>)</P
></LI
><LI
><P
><A
HREF="./EN-Book.lyx"
TARGET="_top"
>LYX (LaTeX frontend LyX)</A
>, (with the <A
HREF="appendix.lyx"
TARGET="_top"
>Appendix</A
>)</P
></LI
></UL
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>RTF: Page numbers</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>In order to get correct page numbers in Microsoft Word, type the following after opening the document:</P
><DIV
CLASS="PROCEDURE"
><OL
TYPE="1"
><LI
CLASS="STEP"
><P
><B
CLASS="KEYCAP"
>CTRL</B
>-<B
CLASS="KEYCAP"
>END</B
></P
></LI
><LI
CLASS="STEP"
><P
><B
CLASS="KEYCAP"
>CTRL</B
>-<B
CLASS="KEYCAP"
>A</B
></P
></LI
><LI
CLASS="STEP"
><P
><B
CLASS="KEYCAP"
>F9</B
></P
></LI
></OL
></DIV
><P
>In Word Viewer 97, you must instead do:</P
><DIV
CLASS="PROCEDURE"
><OL
TYPE="1"
><LI
CLASS="STEP"
><P
><B
CLASS="KEYCAP"
>CTRL</B
>-<B
CLASS="KEYCAP"
>END</B
></P
></LI
><LI
CLASS="STEP"
><P
><B
CLASS="KEYCAP"
>ALT</B
></P
></LI
><LI
CLASS="STEP"
><P
><B
CLASS="KEYCAP"
>V</B
></P
></LI
><LI
CLASS="STEP"
><P
><B
CLASS="KEYCAP"
>N</B
></P
></LI
><LI
CLASS="STEP"
><P
><B
CLASS="KEYCAP"
>ALT</B
></P
></LI
><LI
CLASS="STEP"
><P
><B
CLASS="KEYCAP"
>V</B
></P
></LI
><LI
CLASS="STEP"
><P
><B
CLASS="KEYCAP"
>P</B
></P
></LI
></OL
></DIV
><P
>See <A
HREF="http://openjade.sourceforge.net/jadedoc-1.3/rtf.htm"
TARGET="_top"
>The OpenJade RTF backend</A
> for more details.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="IMPORTANT"
><P
></P
><TABLE
CLASS="IMPORTANT"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.png"
HSPACE="5"
ALT="Important"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>IMPORTANT: Downloads for offline reading!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you want to download the HTML or RTF formats for offline reading, you will need to download the images as well - PNG for HTML and BMP for RTF, including the callouts! To save you the hassle, I have compiled the following zipped tar archives for offline reading:</P
></TD
></TR
></TABLE
></DIV
><P
></P
><UL
><LI
><P
><A
HREF="http://www.karakas-online.de/EN-Book/EN-Book-html.tar.gz"
TARGET="_top"
> TAR.GZ (Compressed TAR Archive), many HTML files with images</A
></P
></LI
><LI
><P
><A
HREF="http://www.karakas-online.de/EN-Book/EN-Book-onehtml.tar.gz"
TARGET="_top"
> TAR.GZ (Compressed TAR Archive), one big  HTML file with images</A
></P
></LI
><LI
><P
><A
HREF="http://www.karakas-online.de/EN-Book/EN-Book-sgml.tar.gz"
TARGET="_top"
> TAR.GZ (Compressed TAR Archive), SGML file with images</A
></P
></LI
><LI
><P
><A
HREF="http://www.karakas-online.de/EN-Book/EN-Book-rtf.tar.gz"
TARGET="_top"
> TAR.GZ (Compressed TAR Archive), RTF file with images</A
></P
></LI
></UL
><P
>A tarball containing all the above formats, including images, is also available:</P
><P
></P
><UL
><LI
><P
><A
HREF="http://www.karakas-online.de/EN-Book/EN-Book.tar.gz"
TARGET="_top"
> TAR.GZ (Compressed TAR Archive), All files</A
></P
></LI
></UL
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="LICENCE"
>1.3. Licence</A
></H2
><P
>Copyright © version 1.0 2002 by <A
HREF="http://www.spaghettibrain.com"
TARGET="_top"
>Claudio Erba</A
>. Copyright © version 2.0 2004 by <A
HREF="http://www.karakas-online.de"
TARGET="_top"
>Chris Karakas</A
> and <A
HREF="http://www.spaghettibrain.com"
TARGET="_top"
>Claudio Erba</A
>. Copyright © version 2.1 2005 by <A
HREF="http://www.karakas-online.de"
TARGET="_top"
>Chris Karakas</A
> and <A
HREF="http://www.spaghettibrain.com"
TARGET="_top"
>Claudio Erba</A
>. Permission is granted to copy, distribute and/or modify this document under the terms of the <ACRONYM
CLASS="ACRONYM"
>GNU</ACRONYM
> Free Documentation License, Version 1.2 or any later version published by the Free Software Foundation; with no Invariant Sections, with no Front-Cover Texts, and with no Back-Cover Texts. A copy of the license can be found in <A
HREF="#GNU-FREE-DOCUMENATION-LICENCE"
>Section A.1</A
>, as well as at the <A
HREF="http://www.gnu.org/copyleft/fdl.html"
TARGET="_top"
>GNU Free Documentation License</A
>.</P
><P
>Original version 1.0 by <A
HREF="http://www.spaghettibrain.com"
TARGET="_top"
>Claudio Erba</A
>, webmaster of <A
HREF="www.spaghettibrain.com "
TARGET="_top"
>spaghettibrain</A
>, <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> italian Mirror, 2002. Second, revised and expanded, version 2.0 2004 by <A
HREF="http://www.karakas-online.de"
TARGET="_top"
>Chris Karakas</A
> and <A
HREF="http://www.spaghettibrain.com"
TARGET="_top"
>Claudio Erba</A
> (see <A
HREF="#CREDITS"
>Section 1.5</A
> for details). Corrected 2.1 version 2005 by <A
HREF="http://www.karakas-online.de"
TARGET="_top"
>Chris Karakas</A
> and <A
HREF="http://www.spaghettibrain.com"
TARGET="_top"
>Claudio Erba</A
> (see Revision History for details).</P
><P
>This book, in all its versions (also those modified from third parties in italian, english or whichever other language), for will of the authors, may be reproduced also integrally without violating any law in asmuch as this book is released under the <A
HREF="http://www.gnu.org/copyleft/fdl.html"
TARGET="_top"
>GNU Free Documentation License</A
>, see <A
HREF="#GNU-FREE-DOCUMENATION-LICENCE"
>Section A.1</A
>.</P
><P
>This book:</P
><P
></P
><UL
><LI
><P
>May be modified partially or integrally creating manuals for companies, agencies or persons who deal with formatting, changing either the diagram or the contents or the pagination.</P
></LI
><LI
><P
>May be distributed either in its original or in modified form, or either in electronic or in paper format from either field periodicals or not, Internet sites and whichever other medium.</P
></LI
><LI
><P
>May be used as internal manual by companies, public or private agencies, or universities .</P
></LI
><LI
><P
>May be used distributed by universities as a hand-out.</P
></LI
><LI
><P
>May even be resold without having to recognize any type of royalty to the authors on the condition that the purchasers be granted the freedom of making even integral copies, redistribute or resell them.</P
></LI
></UL
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="AVAILABILITY-OF-SOURCES"
>1.4. Availability of sources</A
></H2
><P
>See <A
HREF="#FORMATS"
>Section 1.2</A
> for the modifiable sources of this document. These are the official versions. We (the authors, translators and current maintainers) plan to continue work on this document and add new chapters and enhancements. If you want to see the version we are currently working on (the &#8220;bleeding edge&#8221; version), check <A
HREF="http://www.karakas-online.de/EN-Book/"
TARGET="_top"
>PHP-Nuke: Management and Programming</A
> from time to time.</P
><P
>The modifiable sources of Claudio's text (in italian), the images and example files are available in sxi format (OpenOffice Impress)<A
NAME="AEN330"
HREF="#FTN.AEN330"
><SPAN
CLASS="footnote"
>[1]</SPAN
></A
> on <A
HREF="http://www.spaghettibrain.com/modules.php?name=Archives&#38;dcategory=PHPNuke+BOOK+-+LIBRO"
TARGET="_top"
>Downloads Area PHPNuke BOOK - LIBRO on spaghettibrain</A
>. </P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CREDITS"
>1.5. Credits</A
></H2
><P
>This section documents the efforts that have been invested into this document by its authors, contributors and the community. We tried hard to give credit where credit is due. However, this does not mean that we used only the sources mentioned explicitly here, in this section. Numerous other sources of information have been used, mainly Forums, such as:</P
><P
></P
><UL
><LI
><P
><A
HREF="http://www.karakas-online.de/forum/phpnuke.html"
TARGET="_top"
>PHP-Nuke Forum</A
> of <A
HREF="http://www.karakas-online.de"
TARGET="_top"
>Chris Karakas</A
>.</P
></LI
><LI
><P
><A
HREF="http://www.spaghettibrain.com"
TARGET="_top"
>spaghettibrain</A
> of <A
HREF="http://www.spaghettibrain.com"
TARGET="_top"
>Claudio Erba</A
>.</P
></LI
><LI
><P
><A
HREF="http://www.nukeforums.com"
TARGET="_top"
>nukeforums</A
></P
></LI
><LI
><P
><A
HREF="http://www.nukecops.com"
TARGET="_top"
>nukecops</A
></P
></LI
></UL
><P
>Whenever a source has been used, we have included a link to it. Thus, depending on the context, you should interpret the links in this document not only as a source of further information on a subject, but also as Credit and a &#8220;Thank you&#8221; for the idea, the explanation, the discussion or the piece of code it offers. If you feel we have ovelooked something, please feel free to contact us.</P
><P
>We do not offer a Bibliography, as strict academic criteria would require, but this may change in the future, as Chris is working on a <A
HREF="http://www.karakas-online.de/mySGML/lyx-bibliography.html"
TARGET="_top"
>solution to the Bibliography problem</A
> in the context of <A
HREF="http://www.karakas-online.de/mySGML/"
TARGET="_top"
>LyX and SGML</A
>. </P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>How to enter hundreds of references in LyX</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
> 
If you look in the following <A
HREF="#CREDITS-VERSION-1.0"
>Section 1.5.1</A
>, <A
HREF="#CREDITS-VERSIONS-1.X"
>Section 1.5.2</A
> and especially <A
HREF="#CREDITS-VERSION-2.0"
>Section 1.5.3</A
>, you will notice the exceptionally large number of cross-references that had to be entered. Although a single cross-reference is inserted very easily in LyX (just choose Insert-&#62;Cross-reference from the menu, then choose the label of the reference you want), it becomes a real pain if you have to enter hundreds of them, as in our case.</P
><P
>Chris' solution  to this was to write a script that reads a LyX file and outputs another LyX file that contains references to all labels of the first one. It was easier to copy the references from the file thus created, paste them in <A
HREF="#CREDITS-VERSION-2.0"
>Section 1.5.3</A
>(which deals with version 2.0), then delete references to parts that already existed in version 1.0, than try to insert references to all new parts of version 2.0 by using the menu.</P
><P
>You can read about Chris' script in <A
HREF="http://www.karakas-online.de/myLinuxTips/mass-insertion-of-cross-references-in-lyx.html"
TARGET="_top"
>Mass insertion of cross-references in LyX</A
>.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CREDITS-VERSION-1.0"
>1.5.1. Version 1.0</A
></H3
><P
>This book started in version 1.0 as a document in italian language, written by <A
HREF="http://www.spaghettibrain.com"
TARGET="_top"
>Claudio Erba</A
>. It contained: </P
><P
></P
><UL
><LI
><P
><A
HREF="#TERMS"
>Chapter 1</A
>, consisting of <A
HREF="#DISCLAIMER"
>Section 1.1</A
>, <A
HREF="#FORMATS"
>Section 1.2</A
>, <A
HREF="#LICENCE"
>Section 1.3</A
>, <A
HREF="#AVAILABILITY-OF-SOURCES"
>Section 1.4</A
> and <A
HREF="#AKNOWLEDGEMENTS"
>Section 1.6</A
>. This was Chapter 1 of version 1.0.</P
></LI
><LI
><P
><A
HREF="#INTRODUCTION"
>Chapter 2</A
>, consisting of <A
HREF="#PURPOSE"
>Section 2.1</A
>, <A
HREF="#WHATIS-PHPNUKE"
>Section 2.2</A
>, <A
HREF="#HISTORY"
>Section 2.3</A
>, <A
HREF="#COMMUNITIES"
>Section 2.4</A
>, and <A
HREF="#WHYPHPNUKE"
>Section 2.5</A
>. This was Chapter 2 of version 1.0.</P
></LI
><LI
><P
><A
HREF="#FRONTEND"
>Chapter 6</A
>, consisting of <A
HREF="#PREINSTALLED-MODULES"
>Section 6.1</A
>, a section on AvantGO, now removed, <A
HREF="#NON-INSTALLED-MODULES"
>Section 6.2</A
> and <A
HREF="#PREINSTALLED-BLOCKS"
>Section 6.3</A
>. This was Chapter 3 of version 1.0.</P
></LI
><LI
><P
><A
HREF="#BACKEND"
>Chapter 7</A
>, consisting of <A
HREF="#ADMINISTRATION-FUNCTIONS"
>Section 7.1</A
> and <A
HREF="#PREFERENCES"
>Section 7.2</A
>. This was Chapter 4 of version 1.0.</P
></LI
><LI
><P
><A
HREF="#INSTALLATION"
>Chapter 3</A
> consisting of <A
HREF="#INSTALLATION-PROCESS"
>Section 3.2</A
>, <A
HREF="#DOWNLOAD"
>Section 3.2.1</A
>, <A
HREF="#UPLOAD"
>Section 3.2.2</A
>, <A
HREF="#PERMISSIONS"
>Section 3.2.3</A
>, <A
HREF="#PHPMYADMIN"
>Section 3.3</A
>, <A
HREF="#WHATIS-PHPMYADMIN"
>Section 3.3.1</A
>, <A
HREF="#INSTALL-DB"
>Section 3.4.5</A
>, <A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
> and <A
HREF="#RESOURCES"
>Section 3.8</A
>. This was Chapter 5 of version 1.0.</P
></LI
><LI
><P
><A
HREF="#ARCHITECTURE"
>Chapter 9</A
>, consisting of <A
HREF="#DIRECTORY-STRUCTURE"
>Section 9.1</A
>, <A
HREF="#MAIN-PAGE-MANAGEMENT"
>Section 9.2</A
>, <A
HREF="#MODULE-MANAGEMENT"
>Section 9.3</A
>, and <A
HREF="#ADMIN-MANAGEMENT"
>Section 9.4</A
>. This was Chapter 6 of version 1.0.</P
></LI
><LI
><P
><A
HREF="#CUSTOMIZATION"
>Chapter 14</A
>, consisting of <A
HREF="#TOPIC-STRUCTURE"
>Section 14.1</A
>, <A
HREF="#TEMPLATE"
>Section 14.2</A
>, <A
HREF="#EXAMPLE-CREATION-HTML-TEMPLATE"
>Section 14.2.1</A
> and <A
HREF="#THEME-RULES"
>Section 14.8</A
>. This was Chapter 7 of version 1.0.</P
></LI
><LI
><P
><A
HREF="#BLOCKS"
>Chapter 20</A
>, consisting of <A
HREF="#BLOCK-TYPES"
>Section 20.1</A
>, <A
HREF="#BLOCK-CREATION"
>Section 20.2</A
>, <A
HREF="#BLOCK-THEORY"
>Section 20.2.1</A
>, <A
HREF="#BLOCK-PRACTICE"
>Section 20.2.2</A
>. This was Chapter 8 of version 1.0.</P
></LI
><LI
><P
><A
HREF="#CREATING-MODULES"
>Chapter 21</A
>, consisting of <A
HREF="#CREATING-MODULES"
>Chapter 21</A
>, <A
HREF="#MODULE-STRUCTURE"
>Section 21.1</A
>, <A
HREF="#MODULE-RULES"
>Section 21.2</A
>, <A
HREF="#MODULE-PUBLIC"
>Section 21.3</A
> and <A
HREF="#MODULE-ADMIN"
>Section 21.4</A
>. This was Chapter 9 of version 1.0.</P
></LI
><LI
><P
><A
HREF="#SECURITY"
>Chapter 23</A
>, consisting of <A
HREF="#PERMISSIONS2"
>Section 23.4.4</A
>, <A
HREF="#COOKIES"
>Section 23.4.5</A
> and <A
HREF="#COOKIE-HIJACK"
>Section 23.4.5.1</A
>. This was Chapter 10 of version 1.0.</P
></LI
><LI
><P
><A
HREF="#TOOLS"
>Chapter 28</A
>, consisting of <A
HREF="#DATABASE-TABLES"
>Section 28.1</A
>, <A
HREF="#SQL-SYNTAX"
>Section 28.5</A
>, <A
HREF="#PHPMYADMIN2"
>Section 3.4</A
>, <A
HREF="#WHATIS-PHPMYADMIN"
>Section 3.3.1</A
>, <A
HREF="#INSTALL-PHPMYADMIN"
>Section 3.3.2</A
>, <A
HREF="#MYSQL-FRONTEND"
>Section 28.6</A
> and <A
HREF="#FOXSERV"
>Section 28.7</A
>. This was Chapter 11 of version 1.0.</P
></LI
></UL
><P
>Version 1.0 came with the following figures:</P
><P
></P
><UL
><LI
><P
><A
HREF="#FIG-HOMEPAGE"
>Figure 6-1</A
>, <A
HREF="#FIG-CATEGORY"
>Figure 6-2</A
>, <A
HREF="#FIG-DOWNLOADS-ADMIN"
>Figure 6-3</A
>, <A
HREF="#FIG-PRIVATE-MESSAGES"
>Figure 6-4</A
>, <A
HREF="#FIG-SEARCH"
>Figure 6-5</A
>, <A
HREF="#FIG-STATS"
>Figure 6-6</A
>, <A
HREF="#FIG-YOUR-ACCOUNT"
>Figure 6-7</A
>, <A
HREF="#FIG-SPLATT-FORUM"
>Figure 6-8</A
>, <A
HREF="#FIG-ADMIN-PANEL"
>Figure 7-1</A
>, a screenshot of the News articles that has been removed, <A
HREF="#FIG-FILE-STRUCTURE"
>Figure 3-3</A
>, <A
HREF="#FIG-PHPMYADMIN-START"
>Figure 3-6</A
>, <A
HREF="#FIG-PHPMYADMIN-TABLE-STRUCTURE"
>Figure 3-14</A
>, <A
HREF="#FIG-PHPMYADMIN-SQL-QUERY"
>Figure 3-15</A
>, <A
HREF="#FIG-PHPMYADMIN-TABLE-DATA"
>Figure 3-16</A
>, <A
HREF="#FIG-PHPMYADMIN-DATABASE-DUMP"
>Figure 3-11</A
>, <A
HREF="#FIG-BLOCK-EXAMPLE"
>Figure 20-2</A
>, <A
HREF="#FIG-INSERTING-VALUES"
>Figure 21-1</A
>, <A
HREF="#FIG-EXAMPLE-MODULE"
>Figure 21-2</A
>, <A
HREF="#FIG-FORUM-TOPICS"
>Figure 3-12</A
>, <A
HREF="#FIG-MYSQLFRONT-CONNECTION"
>Figure 28-2</A
>, <A
HREF="#FIG-MYSQLFRONT-EXPORT-TABLES"
>Figure 28-3</A
>, <A
HREF="#FIG-MYSQLFRONT-SQL-QUERY"
>Figure 28-4</A
>.</P
></LI
></UL
><P
>Version 1.0 contained no tables.</P
><P
>Andre Purfield of <A
HREF="http://www.os-solutions.net"
TARGET="_top"
>Open Source Solutions</A
> started the translation project (see the <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?topic=11210&#38;forum=23"
TARGET="_top"
>PHP-Nuke book translation thread</A
> at nukeforums) and coordinated the work of the translators. Fortunato Matarazzo made the transaltion of the version 1.0 Chapters 7, 8 and 9 (see above). <A
HREF="http://www.karakas-online.de"
TARGET="_top"
>Chris Karakas</A
> translated the rest. Andre imported Fortunato's part into LyX, remade many of the screenshots and also made corrections to the english text of the whole document. Chris imported his part in LyX, formatted the whole document, created the Index and processed the LyX file through his scripts (see <A
HREF="#BOOK-BEHIND-BOOK"
>Section 1.8</A
>, for details) to render all the versions and files available from <A
HREF="#FORMATS"
>Section 1.2</A
>.</P
><P
>Chris also made PNG, PDF (encapsulated PDF), EPS (encapsulated Postscript) and BMP versions of all figures. The PDF and EPS versions are included in the PDF and PS versions of the document respectively. The PNG and BMP versions are used by the HTML and RTF versions of the document respectively and are supplied separately in the images folder.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CREDITS-VERSIONS-1.X"
>1.5.2. Versions 1.x</A
></H3
><P
>In the 1.x versions, various improvements have been made on the document, as can be seen in the Revision History in the front page:</P
><P
></P
><UL
><LI
><P
>Version 1.1: Andre Purfield of <A
HREF="http://www.os-solutions.net"
TARGET="_top"
>Open Source Solutions</A
> cleaned up the wording and a few typos.</P
></LI
><LI
><P
>Version 1.2: <A
HREF="http://www.karakas-online.de"
TARGET="_top"
>Chris Karakas</A
> made various improvements:</P
><P
></P
><UL
><LI
><P
>Added a new logo.</P
></LI
><LI
><P
>Added a <A
HREF="http://www.karakas-online.de/myLinuxTips/css-for-docbook.html"
TARGET="_top"
>CSS stylesheet for DocBook</A
>.</P
></LI
><LI
><P
>Took care of HTML validation (all HTML pages now are validated as conforming to the HTML 4.01 Transitional standard<A
NAME="AEN531"
HREF="#FTN.AEN531"
><SPAN
CLASS="footnote"
>[2]</SPAN
></A
>).</P
></LI
><LI
><P
>Added footer icons that have the following property: if you click on them, they validate, depending on the icon, either the HTML code or the CSS code of the page being currently viewed.</P
></LI
><LI
><P
>Added translation links in the header and footer: in the header of each page, you will find links to Google's automatic translation of that page into 5 languages - french, german, italian, portuguese and spanish. In the footer of each page, on the other hand, you will find links to Alta Vista's automatic &#8220;Babelfish&#8221; translation of that page into 8 languages: chinese, german, japanese, korean, french, italian, portuguese and spanish.</P
></LI
><LI
><P
>Incorporated <ACRONYM
CLASS="ACRONYM"
>LDP</ACRONYM
> reviewer's comments. </P
></LI
><LI
><P
>Created <A
HREF="#AVAILABILITY-OF-SOURCES"
>Section 1.4</A
> and <A
HREF="#AKNOWLEDGEMENTS"
>Section 1.6</A
>.</P
></LI
></UL
></LI
><LI
><P
>Version 1.2.1: Chris created the <A
HREF="http://www.karakas-online.de/EN-Book/EN-Book-Nuke.tar.gz"
TARGET="_top"
>PHP-Nuke HOWTO module for PHP-Nuke</A
>, a module that integrates this HOWTO into your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site (you could install this module too, tip, tip!). Chris added a link to it in the Formats section (<A
HREF="#FORMATS"
>Section 1.2</A
>) and made a smaller logo.</P
></LI
></UL
><P
>Due to Chris' efforts, starting from version 1.2 this document is an official HOWTO of the <A
HREF="http://www.tldp.org"
TARGET="_top"
>Linux Documentation Project</A
>. </P
><P
>Also, starting from <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> version 6.7 FINAL, this document is included in the docs folder of the standard <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> package, as the official <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> guide.</P
><P
>In all 1.x versions after 1.0, the original italian text has undergone no changes other than those related to translation. But behind the scenes, Chris and Claudio were working fervently for the next version 2.0, which was going to bring dramatic improvements, as you can read in <A
HREF="#CREDITS-VERSION-2.0"
>Section 1.5.3</A
>. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_cool.png"></SPAN
></P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CREDITS-VERSION-2.0"
>1.5.3. Version 2.0</A
></H3
><P
>In version 2.0, <A
HREF="http://www.karakas-online.de"
TARGET="_top"
>Chris Karakas</A
> added the following Chapters and Sections:</P
><P
></P
><UL
><LI
><P
>In <A
HREF="#TERMS"
>Chapter 1</A
>: <A
HREF="#CREDITS"
>Section 1.5</A
>, <A
HREF="#CREDITS-VERSION-1.0"
>Section 1.5.1</A
>, <A
HREF="#CREDITS-VERSIONS-1.X"
>Section 1.5.2</A
>, <A
HREF="#CREDITS-VERSION-2.0"
>Section 1.5.3</A
>, <A
HREF="#CREDITS-GENERAL"
>Section 1.5.5</A
>, <A
HREF="#CONVENTIONS"
>Section 1.7</A
>, <A
HREF="#BOOK-BEHIND-BOOK"
>Section 1.8</A
>, <A
HREF="#GENERAL-IDEA"
>Section 17.2.2.1</A
>, <A
HREF="#BOOK-BEHIND-BOOK-LINE-OF-ATTACK"
>Section 1.8.2</A
> and <A
HREF="#TRANSLATE-PHP-NUKE-HOWTO"
>Section 1.9</A
>.</P
></LI
><LI
><P
>In <A
HREF="#INTRODUCTION"
>Chapter 2</A
>: <A
HREF="#PHP-NUKE-FORKS"
>Section 2.6</A
>, <A
HREF="#PHP-NUKE-VS-POST-NUKE"
>Section 2.6.1</A
>, <A
HREF="#PHP-NUKE-VS-XOOPS"
>Section 2.6.2</A
> and <A
HREF="#XOOPS-VS-POST-NUKE"
>Section 2.6.3</A
>.</P
></LI
><LI
><P
>In <A
HREF="#INSTALLATION"
>Chapter 3</A
>: <A
HREF="#PREREQUISITES"
>Section 3.1</A
>, <A
HREF="#DATABASE-CREATION"
>Section 3.2.4</A
>, <A
HREF="#INSTALL-PHP-NUKE-LOCALLY"
>Section 3.6</A
>, <A
HREF="#XAMPP"
>Section 3.6.2</A
>, <A
HREF="#APACHE2TRIAD"
>Section 3.6.3</A
>, <A
HREF="#MORE-THAN-ONE-PHP-NUKE-SITES"
>Section 3.7.1</A
>, <A
HREF="#COMMON-DATABASE"
>Section 3.7.1.1</A
>, <A
HREF="#COMMON-USER-BASE"
>Section 3.7.1.2</A
>, <A
HREF="#COMMON-INSTALLATION-PROBLEMS"
>Section 3.9</A
>, <A
HREF="#TEST-SCRIPTS"
>Section 3.9.1</A
>, <A
HREF="#TEST-PHP"
>Section 3.9.1.1</A
>, <A
HREF="#CONNECTTEST-PHP"
>Section 3.9.1.2</A
>, <A
HREF="#ANALYZE-PHP"
>Section 3.9.1.3</A
>, <A
HREF="#WARNING-MYSQL-FETCH-ROW-SUPPLIED-ARGUMENT"
>Section 3.9.2</A
>, <A
HREF="#CALL-TO-UNDEFINED-FUNCTION"
>Section 3.9.3</A
>, <A
HREF="#FAILED-OPENING-LANG-PHP"
>Section 3.9.4</A
>, <A
HREF="#FAILED-OPENING-SQL-LAYER-PHP"
>Section 3.9.5</A
>, <A
HREF="#SORRY-SUCH-FILE-DOESNT-EXIST"
>Section 3.9.6</A
>, <A
HREF="#WARNING-SETLOCALE"
>Section 3.9.7</A
>, <A
HREF="#SECURITY-CODE"
>Section 3.9.8</A
>, <A
HREF="#BYPASS-SECURITY-CODE"
>Section 3.9.8.1</A
>, <A
HREF="#WARNING-INVALID-ARGUMENT-SUPPLIED"
>Section 3.9.9</A
>, <A
HREF="#INCLUDE-PATH"
>Section 3.9.10</A
>, <A
HREF="#MAIL-PROBLEMS"
>Section 3.9.11</A
>, <A
HREF="#LOGIN-LOOP"
>Section 3.9.12</A
>, <A
HREF="#SQL-SYNTAX-ERROR"
>Section 3.9.13</A
>, <A
HREF="#ERROR-UPDATE-PRIVATE-FORUM-PERMISSIONS"
>Section 3.9.14</A
>, <A
HREF="#INVALID-SESSION-IN-FORUMS"
>Section 3.9.15</A
>, <A
HREF="#CANNOT-CREATE-ADMINISTRATOR-ACCOUNT"
>Section 3.9.16</A
>, <A
HREF="#ADMINISTRATOR-PASSWORD-LOST"
>Section 3.9.17</A
>, <A
HREF="#GARBAGE-ON-PAGE"
>Section 3.9.18</A
>, <A
HREF="#COMPRESSED-OUTPUT-IN-FORUMS"
>Section 3.9.19</A
>, <A
HREF="#CANNOT-ADD-HEADER-INFORMATION-IN-FORUMS"
>Section 3.9.20</A
>, <A
HREF="#EMPTY-PAGE-IN-WINDOWS"
>Section 3.9.21</A
>, <A
HREF="#LOTS-OF-NOTICE-LINES"
>Section 3.9.22</A
>, <A
HREF="#DESCRIPTIVE-ERROR-MESSAGE"
>Section 3.9.23</A
>, <A
HREF="#COMMON-MISCELLANEOUS-ERRORS"
>Section 3.10</A
>, <A
HREF="#RSS-BLOCK-ERROR"
>Section 3.10.1</A
> and <A
HREF="#MYSQL-ERRNO-145"
>Section 3.10.2</A
>, <A
HREF="#MODULES-DISAPPEAR"
>Section 3.10.3</A
>, <A
HREF="#FORUMS-CANT-CREATE-CATEGORY-WITHOUT-NAME"
>Section 3.10.4</A
> and <A
HREF="#MISSING-BLOCKS"
>Section 3.10.5</A
>.</P
></LI
><LI
><P
>In <A
HREF="#UPGRADE-PHP-NUKE"
>Chapter 4</A
>: <A
HREF="#UPGRADE-PHP-NUKE-60-65"
>Section 4.1</A
>, <A
HREF="#UPGRADE-INSTRUCTIONS-60-WITHOUT-BBTONUKE"
>Section 4.1.1</A
>, <A
HREF="#UPGRADE-INSTRUCTIONS-60-WITH-BBTONUKE"
>Section 4.1.2</A
>, <A
HREF="#UPGRADE-PHPBB-PHP-NUKE"
>Section 4.2</A
>.</P
></LI
><LI
><P
>In <A
HREF="#MOVE-PHP-NUKE"
>Chapter 5</A
>: <A
HREF="#TRANSFERRING-LOCAL-INSTALLATION-TO-WEB"
>Section 5.1</A
> and <A
HREF="#CHANGING-WEB-HOSTER"
>Section 5.2</A
>.</P
></LI
><LI
><P
>The whole <A
HREF="#PHP-NUKE-ADD-ONS"
>Chapter 8</A
>: <A
HREF="#PHP-NUKE-ADD-ON-THEMES"
>Section 8.1</A
>, <A
HREF="#PHP-NUKE-AUTOTHEME"
>Section 8.1.1</A
>, <A
HREF="#PHP-NUKE-ADD-ON-BLOCKS"
>Section 8.2</A
>, <A
HREF="#PHP-NUKE-MOON-SUN-BLOCK"
>Section 8.2.1</A
>, <A
HREF="#PHP-NUKE-METEOSAT-BLOCK"
>Section 8.2.2</A
>, <A
HREF="#PHP-NUKE-COMIC-BLOCK"
>Section 8.2.3</A
>, <A
HREF="#PHP-NUKE-MENU-BUILDER"
>Section 8.2.4</A
>, <A
HREF="#PHP-NUKE-TREEMENU-WITH-PHP"
>Section 8.2.5</A
>, <A
HREF="#PHP-NUKE-TREEMENU-WITH-JAVASCRIPT"
>Section 8.2.6</A
>, <A
HREF="#PHP-NUKE-GOOGLE-ADSENSE-BLOCK"
>Section 8.2.7</A
>, <A
HREF="#PHP-NUKE-RANDOM-QUOTES-BLOCK"
>Section 8.2.8</A
>, <A
HREF="#PHP-NUKE-ADD-ON-MODULES"
>Section 8.3</A
>, <A
HREF="#PHP-NUKE-DAILY-COMIC-MODULE"
>Section 8.3.1</A
>, <A
HREF="#PHP-NUKE-EVENT-CALENDAR-MODULE"
>Section 8.3.2</A
>, <A
HREF="#NSN-YOUR-ACCOUNT-TWEAK-MODULE"
>Section 8.3.3</A
>, <A
HREF="#PHP-NUKE-APPROVE-MEMBERSHIP-MODULE"
>Section 8.3.4</A
>, <A
HREF="#PHP-NUKE-GALLERY-MODULE"
>Section 8.3.5</A
>, <A
HREF="#PHP-NUKE-IP-TRACKING-MODULE"
>Section 8.3.6</A
>, <A
HREF="#PHP-NUKE-PROTECTOR-MODULE"
>Section 8.3.7</A
>, <A
HREF="#PHP-NUKE-WEBCAM-MODULE"
>Section 8.3.8</A
>, <A
HREF="#PHP-NUKE-MY-HEADLINES-MODULE"
>Section 8.3.9</A
>, <A
HREF="#PHP-NUKE-TOOLS-MODULE"
>Section 8.3.10</A
>, <A
HREF="#PHP-NUKE-UPLOAD-MODULE"
>Section 8.3.11</A
>, <A
HREF="#UPLOAD-ADD-ON-FOR-PHPBB"
>Section 8.3.12</A
>, <A
HREF="#PHP-NUKE-ODP-MODULE"
>Section 8.3.13</A
>, <A
HREF="#PHP-NUKE-ECOMMERCE-MODULE"
>Section 8.3.14</A
> and <A
HREF="#PHP-NUKE-WORKBOARD-MODULE"
>Section 8.3.15</A
>.</P
></LI
><LI
><P
>The whole <A
HREF="#SESSION-MANAGEMENT"
>Chapter 10</A
>: <A
HREF="#HOW-SESSIONS-WORK"
>Section 10.1</A
> and <A
HREF="#ELIMINATE-SESSION-CHECKS"
>Section 10.2</A
>.</P
></LI
><LI
><P
>The whole <A
HREF="#EDITING-PHP-NUKE-FILES"
>Chapter 11</A
>: <A
HREF="#VI"
>Section 11.1</A
>, <A
HREF="#EMACS"
>Section 11.2</A
>, <A
HREF="#BLUEFISH"
>Section 11.3</A
>, <A
HREF="#ULTRAEDIT"
>Section 11.4</A
>, <A
HREF="#WINSYNTAX"
>Section 11.5</A
>, <A
HREF="#HTMLKIT"
>Section 11.6</A
>, <A
HREF="#CRIMSON-EDITOR"
>Section 11.7</A
>, <A
HREF="#PHPED"
>Section 11.8</A
> (FIXME: Well, this may not be finished by the time version 2.0 is released, but the will to write it was certainly there! :-) ).</P
></LI
><LI
><P
>The whole <A
HREF="#MODIFYING-PHP-NUKE-DATABASE"
>Chapter 12</A
>: <A
HREF="#USER-EXTRA-INFORMATION"
>Section 12.1</A
>.</P
></LI
><LI
><P
>The whole <A
HREF="#MODIFYING-PHP-NUKE-TEXTS"
>Chapter 13</A
>: <A
HREF="#GENERAL-PHP-NUKE-TEXTS"
>Section 13.1</A
>, <A
HREF="#PHP-NUKE-MODULE-TEXTS"
>Section 13.2</A
>, and <A
HREF="#PHP-NUKE-MODULE-AND-BLOCK-TITLES"
>Section 13.3</A
>.</P
></LI
><LI
><P
>In <A
HREF="#CUSTOMIZATION"
>Chapter 14</A
>: <A
HREF="#PHP-NUKE-THEME-MODIFYING-HEADER"
>Section 14.3</A
>, <A
HREF="#PHP-NUKE-HEADER-CREATE-TOP-NAVIGATION-BAR"
>Section 14.3.1</A
>, <A
HREF="#PHP-NUKE-HEADER-INSERT-SLASHOCEAN-SEARCH-BOX"
>Section 14.3.2</A
>, <A
HREF="#PHP-NUKE-HEADER-CHANGE"
>Section 14.3.3</A
>, <A
HREF="#PHP-NUKE-HEADER-CHANGE-LOGO"
>Section 14.3.4</A
>, <A
HREF="#PHP-NUKE-HEADER-CHANGE-LOGO-DYNAMIC"
>Section 14.3.5</A
>, <A
HREF="#PHP-NUKE-HEADER-CHANGE-BANNER-PLACEMENT"
>Section 14.3.6</A
>, <A
HREF="#PHP-NUKE-HEADER-WATERMARK-BACKGROUND-IMAGE"
>Section 14.3.7</A
>, <A
HREF="#TAB-BODY-TAGS"
>Table 14-1</A
>, <A
HREF="#PHP-NUKE-HEADER-DISPLAY-FLASH-OBJECT"
>Section 14.3.8</A
>, <A
HREF="#HIDE-LEFT-BLOCKS"
>Section 14.3.9</A
>, <A
HREF="#PHP-NUKE-THEME-MODIFYING-BODY"
>Section 14.4</A
>, <A
HREF="#MULTIPAGE-NEWS-ARTICLES"
>Section 14.4.1</A
>, <A
HREF="#CHANGE-BACKGROUND-COLOUR"
>Section 14.4.2</A
>, <A
HREF="#PHP-NUKE-THEME-MODIFYING-INDEX"
>Section 14.5</A
>, <A
HREF="#PHP-NUKE-THEME-MODIFYING-FOOTER"
>Section 14.6</A
>, <A
HREF="#INSERT-RIGHT-EXTRA-TABLE"
>Section 14.6.1</A
>, <A
HREF="#PHP-NUKE-COPYRIGHT-NOTICE"
>Section 14.6.2</A
>, <A
HREF="#PHP-NUKE-THEME-MODIFYING-ICONS"
>Section 14.7</A
>, <A
HREF="#CHANGE-BUGGY-PHP-NUKE-THEME"
>Section 14.9</A
>, <A
HREF="#PREVENT-USERS-FROM-CHANGING-PHP-NUKE-THEME"
>Section 14.10</A
>, <A
HREF="#CHANGE-PHP-NUKE-THEME-DEPENDING-ON-MODULE"
>Section 14.11</A
> and <A
HREF="#CHANGE-FONT-SIZE-PHP-NUKE"
>Section 14.12</A
>.</P
></LI
><LI
><P
>The whole <A
HREF="#MODIFYING-PHP-NUKE-HTML-HEADER"
>Chapter 15</A
>: <A
HREF="#FAVOURITES-ICON-FAVICON-ICO"
>Section 15.1</A
> and <A
HREF="#PREVENT-STATISTICS-MODULE-GATHERING-HITS"
>Section 15.2</A
>.</P
></LI
><LI
><P
>The whole <A
HREF="#MODIFYING-MAINFILE-PHP"
>Chapter 16</A
>: <A
HREF="#ALLOW-SPECIAL-HTML-TAGS"
>Section 16.1</A
>, <A
HREF="#CHANGE-ORDER-OF-MESSAGES"
>Section 16.2</A
> and <A
HREF="#CHANGE-DURATION-OF-PUBLIC-BROADCAST-MESSAGE"
>Section 16.3</A
>.</P
></LI
><LI
><P
>The whole <A
HREF="#MODIFYING-PHP-NUKE-BLOCKS"
>Chapter 17</A
>: <A
HREF="#CHANGE-BUGGY-BLOCK"
>Section 17.1</A
>, <A
HREF="#BUILD-CUSTOM-MODULE-BLOCKS"
>Section 17.2</A
>, <A
HREF="#FIG-MODULES-BLOCK"
>Figure 17-1</A
>, <A
HREF="#SIMPLE-MODULE-BLOCK"
>Section 17.2.1</A
>, <A
HREF="#TREEMENU-BLOCK"
>Section 17.2.2</A
>, <A
HREF="#FIG-MODULES-BLOCK-2"
>Figure 17-2</A
>, <A
HREF="#GENERAL-IDEA"
>Section 17.2.2.1</A
>, <A
HREF="#FIG-TREEMENU"
>Figure 17-3</A
>, <A
HREF="#FIG-TREEMENU1"
>Figure 17-4</A
>, <A
HREF="#FIG-TREEMENU2"
>Figure 17-5</A
>, <A
HREF="#FIG-TREEMENU3"
>Figure 17-6</A
>, <A
HREF="#WHAT-IS-TREEMENU"
>Section 17.2.2.2</A
>, <A
HREF="#BUILD-RSS-BLOCKS-WITH-VARIABLE-NEWS-NUMBER"
>Section 17.3</A
> and <A
HREF="#SCROLLING-HEADLINES-IN-BLOCKS"
>Section 17.4</A
>.</P
></LI
><LI
><P
>The whole <A
HREF="#MODIFYING-PHP-NUKE-MODULES"
>Chapter 18</A
>: <A
HREF="#MODIFYING-ANY-PHP-NUKE-MODULE"
>Section 18.1</A
>, <A
HREF="#HIDE-RIGHT-BLOCKS"
>Section 18.1.1</A
>, <A
HREF="#CHANGE-BUGGY-MODULE"
>Section 18.1.2</A
>, <A
HREF="#MODIFYING-PHP-NUKE-HOMEPAGE"
>Section 18.2</A
>, <A
HREF="#REDIRECT-USERS-TO-LOGIN-PAGE"
>Section 18.2.1</A
>, <A
HREF="#RESTRICT-HOMEPAGE-TO-REGISTERED-USERS"
>Section 18.2.2</A
>, <A
HREF="#MODIFYING-PHP-NUKE-MODULE-FAQ"
>Section 18.3</A
>, <A
HREF="#MORE-THAN-127-FAQ-ANSWERS"
>Section 18.3.1</A
>, <A
HREF="#MODIFYING-PHP-NUKE-MODULE-REVIEWS"
>Section 18.4</A
>, <A
HREF="#ALLOW-ONLY-REGISTERED-USERS-TO-REVIEW"
>Section 18.4.1</A
>, <A
HREF="#CHOOSE-IMAGES-FROM-DROPDOWN-LIST"
>Section 18.4.2</A
>, <A
HREF="#MODIFYING-PHP-NUKE-MODULE-WEB-LINKS"
>Section 18.5</A
>, <A
HREF="#DISPLAY-WEB-LINKS-IN-THE-SAME-WINDOW"
>Section 18.5.1</A
>, <A
HREF="#CHANGE-NUMBER-OF-WEB-LINKS-PER-PAGE"
>Section 18.5.2</A
>, <A
HREF="#MODIFYING-PHP-NUKE-MODUKE-YOUR-ACCOUNT"
>Section 18.6</A
>, <A
HREF="#REDIRECT-USERS-TO-HOMEPAGE"
>Section 18.6.1</A
>, <A
HREF="#REDIRECT-YOUR-INFO-TO-FORUMS-USER-PROFILE"
>Section 18.6.2</A
>, <A
HREF="#REDIRECT-USERS-TO-LOGIN-AND-BACK"
>Section 18.6.3</A
>, <A
HREF="#DISABLE-REGISTRATION"
>Section 18.6.4</A
>, <A
HREF="#REGISTER-USERS-IMMEDIATELY"
>Section 18.6.5</A
>, <A
HREF="#APPROVE-USERS"
>Section 18.6.6</A
>, <A
HREF="#REGISTER-USERS-THROUGH-IBILL"
>Section 18.6.7</A
>, <A
HREF="#CHANGE-MAXIMUM-USERNAME-LENGTH"
>Section 18.6.8</A
>, <A
HREF="#MODIFYING-PHP-NUKE-NEWS-MODULE"
>Section 18.7</A
>, <A
HREF="#GET-RID-OF-BR-IN-NEWS"
>Section 18.7.1</A
>, <A
HREF="#MODIFYING-PHP-NUKE-SUBMIT-NEWS-MODULE"
>Section 18.8</A
>, <A
HREF="#BYPASS-ARTICLE-APPROVAL"
>Section 18.8.1</A
>, <A
HREF="#FORMATAIDHEADER-FUNCTION"
>Section 18.8.1.1</A
>, <A
HREF="#MODIFYING-PHP-NUKE-SECTIONS-MODULE"
>Section 18.9</A
>, <A
HREF="#ORDER-ARTICLES-IN-SECTIONS"
>Section 18.9.1</A
>, <A
HREF="#MODIFYING-PHP-NUKE-DOWNLOADS-MODULE"
>Section 18.10</A
>, <A
HREF="#URLS-LONGER-THAN-100-CHARACTERS"
>Section 18.10.1</A
>, <A
HREF="#MODIFYING-PHP-NUKE-STORIES-ARCHIVE"
>Section 18.11</A
> and <A
HREF="#ORDER-ARTICLES-IN-STORIES-ARCHIVE"
>Section 18.11.1</A
>.</P
></LI
><LI
><P
>The whole <A
HREF="#MODIFYING-PHP-NUKE-ADMIN-PANEL"
>Chapter 19</A
>: <A
HREF="#SET-ARBITRARY-STORIES-NUMBER-IN-HOME"
>Section 19.1</A
> and <A
HREF="#ALLOW-HTML-NEWSLETTER"
>Section 19.2</A
>.</P
></LI
><LI
><P
>In <A
HREF="#BLOCKS"
>Chapter 20</A
>: <A
HREF="#SIMPLE-CONTENT-BLOCK"
>Section 20.3</A
>, <A
HREF="#HOW-TO-INCLUDE-FILES"
>Section 20.4</A
>, <A
HREF="#JAVASCRIPT-IN-PHP-NUKE-BLOCKS"
>Section 20.5</A
>, <A
HREF="#CREATE-HELLO-WORLD-BLOCK"
>Section 20.5.1</A
>, <A
HREF="#CREATE-FADE-BLOCK"
>Section 20.5.2</A
>, <A
HREF="#CREATE-HELP-CENTER-LIVE-BLOCK"
>Section 20.5.3</A
>, <A
HREF="#TAB-HELP-CENTER-LIVE-SETCOOKIE"
>Table 20-1</A
>, <A
HREF="#ADVERTISEMENTS-IN-PHP-NUKE-BLOCKS"
>Section 20.7</A
>, <A
HREF="#DISPLAY-IMAGES-PHP-NUKE-BLOCKS"
>Section 20.8</A
>, <A
HREF="#DISPLAY-RANDOM-IMAGES-PHP-NUKE-BLOCKS"
>Section 20.8.1</A
>, <A
HREF="#PAYPAL-BLOCK-FOR-PHP-NUKE"
>Section 20.9</A
>.</P
></LI
><LI
><P
>In <A
HREF="#CREATING-MODULES"
>Chapter 21</A
>: <A
HREF="#INCLUDE-HTML-FILE-IN-MODULE"
>Section 21.5</A
>, <A
HREF="#INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE"
>Section 21.6</A
>, <A
HREF="#TAB-CHANGING-HTML-LINKS"
>Table 21-1</A
>, <A
HREF="#TAB-CHANGING-HTML-LINKS-2"
>Table 21-2</A
>, <A
HREF="#INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE-IFRAME"
>Section 21.7</A
>, <A
HREF="#INCLUDE-PLAIN-TEXT-FILE-IN-MODULE"
>Section 21.8</A
>, <A
HREF="#JAVASCRIPT-IN-PHP-NUKE-MODULES"
>Section 21.9</A
>, <A
HREF="#JAVASCRIPT-PHP"
>Section 21.9.1</A
>, <A
HREF="#JAVASCRIPT-IN-PHP-NUKE-MODULES-COMPLETE"
>Section 21.9.2</A
>, <A
HREF="#CREATE-LOGOUT-MODULE"
>Section 21.10</A
>, <A
HREF="#ADVERTISEMENTS-IN-PHP-NUKE-MODULES"
>Section 21.11</A
>, <A
HREF="#GOOGLE-ADSENSE-IN-NEWS-MODULE"
>Section 21.11.1</A
>, <A
HREF="#GOOGLE-ADSENSE-ON-TOP-OF-PHP-NUKE-MODULE"
>Section 21.11.2</A
>, <A
HREF="#HTML-FORMS-IN-MODULE"
>Section 21.12</A
>, </P
></LI
><LI
><P
>The whole <A
HREF="#DUPLICATING-PHP-NUKE-MODULES"
>Chapter 22</A
>: <A
HREF="#DUPLICATING-PHP-NUKE-FAQ-MODULE"
>Section 22.1</A
>.</P
></LI
><LI
><P
>In <A
HREF="#SECURITY"
>Chapter 23</A
>: <A
HREF="#HOW-SECURE-IS-PHP-NUKE"
>Section 23.1</A
>, <A
HREF="#SECURITY-RECORD-SOFTWARE-POPULARITY"
>Section 23.2</A
>, <A
HREF="#COMMON-PHP-NUKE-SECURITY-VULNERABILITIES"
>Section 23.3</A
>, <A
HREF="#CROSS-SITE-SCRIPTING-WITH-PHP-NUKE"
>Section 23.3.1</A
>, <A
HREF="#SQL-INJECTION-WITH-PHP-NUKE"
>Section 23.3.2</A
>, <A
HREF="#PATH-DISCLOSURE-WITH-PHP-NUKE"
>Section 23.3.3</A
>, <A
HREF="#CROSS-SITE-TRACING-WITH-PHP-NUKE"
>Section 23.3.4</A
>, <A
HREF="#GUARD-SECURITY-VULNERABILITIES-IN-PHP-NUKE"
>Section 23.4</A
>, <A
HREF="#SECURITY-FIXES"
>Section 23.4.1</A
>, <A
HREF="#SECURITY-MEASURES"
>Section 23.4.2</A
>, <A
HREF="#SECURITY-AUDIT"
>Section 23.4.3</A
>, <A
HREF="#PERMISSIONS2"
>Section 23.4.4</A
> (some changes), <A
HREF="#USER-COOKIE-CHANGE-DURATION"
>Section 23.4.5.2</A
>, <A
HREF="#BAN-IP-ADDRESSES"
>Section 23.5</A
> and <A
HREF="#HACKED-NOW-WHAT"
>Section 23.6</A
>.</P
></LI
><LI
><P
>The whole <A
HREF="#ACCELERATING-PHP-NUKE"
>Chapter 24</A
>: <A
HREF="#CACHING-PHP-NUKE"
>Section 24.1</A
>, <A
HREF="#JPCACHE"
>Section 24.1.1</A
>, <A
HREF="#JPCACHE-INSTALLATION"
>Section 24.1.1.1</A
>, <A
HREF="#JPCACHE-CONFIGURATION"
>Section 24.1.1.2</A
>, <A
HREF="#JPCACHE-USE"
>Section 24.1.1.3</A
>, <A
HREF="#CACHE-LITE"
>Section 24.1.2</A
>, <A
HREF="#CACHE-LITE-INSTALLATION"
>Section 24.1.2.1</A
>, <A
HREF="#CACHE-LITE-USE"
>Section 24.1.2.2</A
>, <A
HREF="#TURCK-MMCACHE"
>Section 24.1.3</A
>, <A
HREF="#TURCK-MMCACHE-INSTALLATION"
>Section 24.1.3.1</A
>, <A
HREF="#TURCK-MMCACHE-INSTALLATION"
>Section 24.1.3.1</A
>, <A
HREF="#TURCK-MMCACHE-USE"
>Section 24.1.3.3</A
> and <A
HREF="#CACHING-PHP-NUKE-CONCLUSION"
>Section 24.1.4</A
>.</P
></LI
><LI
><P
>The whole <A
HREF="#OPTIMIZING-PHP-NUKE"
>Chapter 25</A
>: <A
HREF="#SEARCH-ENGINES-AND-DYNAMIC-URLS"
>Section 25.1</A
>, <A
HREF="#SEARCH-ENGINES-AND-GET-METHOD"
>Section 25.1.1</A
>, <A
HREF="#MOD-REWRITE"
>Section 25.2</A
>, <A
HREF="#MOD-REWRITE-API-PHASES"
>Section 25.2.1</A
>, <A
HREF="#MOD-REWRITE-RULESET-PROCESSING"
>Section 25.2.2</A
>, <A
HREF="#MOD-REWRITE-QUOTING-SPECIAL-CHARACTERS"
>Section 25.2.3</A
>, <A
HREF="#MOD-REWRITE-REGEX-BACKREFERENCES"
>Section 25.2.4</A
>, <A
HREF="#REGULAR-EXPRESSIONS"
>Section 25.3</A
>, <A
HREF="#HTACCESS-FILE"
>Section 25.4</A
>, <A
HREF="#MAKE-PHP-NUKE-SEARCH-ENGINE-FRIENDLY"
>Section 25.5</A
>, <A
HREF="#GOOGLETAP"
>Section 25.5.1</A
>, <A
HREF="#GOOGLETAP-REQUIREMENTS"
>Section 25.5.1.1</A
>, <A
HREF="#GOOGLETAP-INSTALLATION"
>Section 25.5.1.2</A
>, <A
HREF="#GOOGLETAP-HOW-IT-WORKS"
>Section 25.5.1.3</A
>, <A
HREF="#TAB-URLIN-URLOUT"
>Table 25-1</A
>, <A
HREF="#MAKE-PHP-NUKE-HOT-LINK-STEALTH"
>Section 25.6</A
> and <A
HREF="#MAKE-DYNAMIC-CSS"
>Section 25.7</A
>.</P
></LI
><LI
><P
>In <A
HREF="#SOLVE-COMMON-PROBLEMS-PHP-NUKE"
>Chapter 26</A
>: <A
HREF="#PROCEED-WHEN-MYSQL-SLOW"
>Section 25.8</A
>, <A
HREF="#REPAIR-CORRUPT-TABLE"
>Section 26.1</A
>, <A
HREF="#FIND-ALL-REGISTRATION-LINKS"
>Section 26.5</A
>, <A
HREF="#ALLOW-ANONYMOUS-WEB-LINK-SUBMISSIONS"
>Section 26.6</A
> and <A
HREF="#DISABLE-DEBUG-MODE"
>Section 26.7</A
>.</P
></LI
><LI
><P
>The whole <A
HREF="#MISCELLANEOUS"
>Chapter 27</A
>: <A
HREF="#CHANGE-HOME-MODULE"
>Section 27.1</A
>, <A
HREF="#PHP-NUKE-UNDER-SSL"
>Section 27.2</A
>, <A
HREF="#CHANGE-PHP-PARAMETERS"
>Section 27.3</A
>, <A
HREF="#DISPLAY-HTML-CODE-IN-FAQ"
>Section 27.4</A
>, <A
HREF="#ENTER-THOUSANDS-OF-WEB-LINKS"
>Section 27.5</A
>, <A
HREF="#ENTER-THOUSANDS-OF-DOWNLOAD-LINKS"
>Section 27.6</A
>, <A
HREF="#CHECK-VALIDITY-OF-WEB-LINKS"
>Section 27.7</A
>, <A
HREF="#ENTER-THOUSANDS-OF-EPHEMERIDS"
>Section 27.8</A
>, <A
HREF="#MAKE-ENCYCLOPEDIA-INTERNATIONAL"
>Section 27.9</A
>, <A
HREF="#FIND-USER-NAME"
>Section 27.10</A
>, <A
HREF="#CORRECT-THOUSANDS-OF-USERS-FIELDS"
>Section 27.11</A
>, <A
HREF="#DATE-TIME"
>Section 27.13</A
>, <A
HREF="#FIND-LAST-DATE"
>Section 27.13.1</A
>, <A
HREF="#ADJUST-SERVER-TIME"
>Section 27.13.2</A
>, <A
HREF="#DISCORDIAN-CALENDAR"
>Section 27.13.3</A
>, <A
HREF="#DEAL-WITH-QUOTES-IN-SITENAME"
>Section 27.14</A
>, <A
HREF="#FLASH-PHP-NUKE-NEWS"
>Section 27.15</A
> and <A
HREF="#BACKUP-MYSQL-USING-BROWSER"
>Section 27.16</A
>.</P
></LI
></UL
><P
>In version 2.0, <A
HREF="http://www.spaghettibrain.com"
TARGET="_top"
>Claudio Erba</A
> added the following Chapters and Sections:</P
><P
></P
><UL
><LI
><P
>In <A
HREF="#INSTALLATION"
>Chapter 3</A
>: <A
HREF="#PHPMYADMIN2"
>Section 3.4</A
>, <A
HREF="#PHPMYADMIN-NAVIGATION-BAR-STRUCTURE"
>Section 3.4.1</A
>, <A
HREF="#PHPMYADMIN-NAVIGATION-BAR-SQL"
>Section 3.4.2</A
>, <A
HREF="#PHPMYADMIN-NAVIGATION-BAR-EXPORT"
>Section 3.4.3</A
>, <A
HREF="#PHPMYADMIN-OTHER-COMMANDS"
>Section 3.4.4</A
>, <A
HREF="#INSTALL-PHP-NUKE-NUKESQL"
>Section 3.5</A
>, <A
HREF="#EASYPHP"
>Section 3.6.1</A
>, <A
HREF="#EASYPHP-CHECK-SUCCESSFUL-INSTALLATION"
>Section 3.6.1.1</A
>, <A
HREF="#MANDRAKE-LINUX-APACHE-PHP-MYSQL"
>Section 3.6.4</A
> and <A
HREF="#RED-HAT-LINUX-APACHE-PHP-MYSQL"
>Section 3.6.5</A
>.</P
></LI
><LI
><P
>In <A
HREF="#UPGRADE-PHP-NUKE"
>Chapter 4</A
>: The introductory text (<A
HREF="#UPGRADE-PHP-NUKE"
>Chapter 4</A
>) and <A
HREF="#PHP-NUKE-UPGRADE-SCRIPTS"
>Section 4.3</A
>.</P
></LI
><LI
><P
>In <A
HREF="#FRONTEND"
>Chapter 6</A
>: A lot of additions and improvements in the whole chapter: <A
HREF="#PREINSTALLED-MODULES"
>Section 6.1</A
>, <A
HREF="#NON-INSTALLED-MODULES"
>Section 6.2</A
>, <A
HREF="#PREINSTALLED-BLOCKS"
>Section 6.3</A
>.</P
></LI
><LI
><P
>In <A
HREF="#BACKEND"
>Chapter 7</A
>: A lot of additions and improvements in the whole chapter: <A
HREF="#ADMINISTRATION-FUNCTIONS"
>Section 7.1</A
>, <A
HREF="#PHPBB-FORUM-ADMINISTRATION"
>Section 7.1.1</A
> (which was added in this version) and <A
HREF="#PREFERENCES"
>Section 7.2</A
>.</P
></LI
><LI
><P
>In <A
HREF="#ARCHITECTURE"
>Chapter 9</A
>: Some changes in <A
HREF="#DIRECTORY-STRUCTURE"
>Section 9.1</A
> and <A
HREF="#MAIN-PAGE-MANAGEMENT"
>Section 9.2</A
>.</P
></LI
><LI
><P
>In <A
HREF="#SOLVE-COMMON-PROBLEMS-PHP-NUKE"
>Chapter 26</A
>: <A
HREF="#RESTORE-PHP-NUKE-FROM-BACKUP"
>Section 26.2</A
>, <A
HREF="#RESTORE-SINGLE-TABLE"
>Section 26.2.1</A
>, <A
HREF="#RESTORE-LARGE-BACKUP"
>Section 26.2.2</A
>, <A
HREF="#INSTALL-NEW-MODULES"
>Section 26.3</A
>, <A
HREF="#INSTALL-MODULES-WITH-NO-DATABASE-CHANGE"
>Section 26.3.1</A
>, <A
HREF="#INSTALL-MODULES-WITH-DATABASE-CHANGE"
>Section 26.3.2</A
>, <A
HREF="#INSTALL-MODULES-WITH-DATABASE-FILES-CHANGE"
>Section 26.3.3</A
> and <A
HREF="#INSTALL-PATCHES-CORRECT-ERRORS"
>Section 26.4</A
>.</P
></LI
><LI
><P
>In <A
HREF="#TOOLS"
>Chapter 28</A
>: <A
HREF="#HTML-SYNTAX"
>Section 28.2</A
>, <A
HREF="#HTML-FORMAT-TEXT"
>Section 28.2.1</A
>, <A
HREF="#HTML-CREATE-LINK"
>Section 28.2.2</A
>, <A
HREF="#HTML-INSERT-IMAGE"
>Section 28.2.3</A
>, <A
HREF="#HTML-CREATE-TABLE"
>Section 28.2.4</A
>, <A
HREF="#CSS-SYNTAX"
>Section 28.3</A
>, <A
HREF="#PHP-SYNTAX"
>Section 28.4</A
>, <A
HREF="#PHP-VARIABLES"
>Section 28.4.1</A
>, <A
HREF="#PHP-FUNCTIONS"
>Section 28.4.2</A
> and <A
HREF="#PHP-SWITCHES"
>Section 28.4.3</A
>.</P
></LI
></UL
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Note</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
> 
As you can see, almost all labels of version 1.0 have been preserved in version 2.0 too. More specifically, all labels that  give rise to HTML files have been preserved in the LyX file. That's no coincidence: <A
HREF="http://www.karakas-online.de/mySGML/cool-labels-dont-change.html"
TARGET="_top"
>Cool labels don't change!</A
></P
></TD
></TR
></TABLE
></DIV
><P
>Chris translated Claudio's additions from italian and inserted some additions and many cross-references. On the other hand, some of Claudio's information has found its way in the sections added by Chris. </P
><P
>We have added the <ACRONYM
CLASS="ACRONYM"
>GNU</ACRONYM
> Free Documentation Licence in the <A
HREF="#GNU-FREE-DOCUMENATION-LICENCE"
>Section A.1</A
>.</P
><P
>The following figures have been added in version 2.0:</P
><P
></P
><UL
><LI
><P
>Chris added: <A
HREF="#FIG-WS-FTP-CHMOD-1"
>Figure 3-4</A
>, <A
HREF="#FIG-WS-FTP-CHMOD-2"
>Figure 3-5</A
>, <A
HREF="#FIG-ANALYZE-MYSQL-CONNECTION"
>Figure 3-25</A
>, <A
HREF="#FIG-ANALYZE-WARNING-MYSQL"
>Figure 3-26</A
>, <A
HREF="#FIG-MODULES-ADMIN-2"
>Figure 3-27</A
>, <A
HREF="#FIG-SECURITY-CODE"
>Figure 3-28</A
>, <A
HREF="#FIG-PHPINFO-GD"
>Figure 3-29</A
>, <A
HREF="#FIG-ANALYZE-GD"
>Figure 3-30</A
>, <A
HREF="#FIG-LOGIN-SCREEN"
>Figure 3-31</A
>, <A
HREF="#FIG-FORUM-3"
>Figure 3-32</A
>, <A
HREF="#FIG-FORUM-4"
>Figure 3-33</A
>, <A
HREF="#FIG-EDIT-ADMINS-2"
>Figure 3-34</A
>, <A
HREF="#FIG-EDIT-ADMINS-3"
>Figure 3-35</A
>, <A
HREF="#FIG-FORUM-GZIP-COMPRESSION"
>Figure 3-37</A
>, <A
HREF="#FIG-MODULES-4"
>Figure 3-38</A
>, <A
HREF="#FIG-MISSING-BLOCKS"
>Figure 3-39</A
>, <A
HREF="#FIG-PHPBB-FORUM"
>Figure 6-9</A
>, <A
HREF="#FIG-MODULES-BLOCK-3"
>Figure 6-10</A
>, <A
HREF="#FIG-WAITING-CONTENT-BLOCK-2"
>Figure 6-11</A
>, <A
HREF="#FIG-LANGUAGES"
>Figure 6-13</A
>, <A
HREF="#FIG-STORIES"
>Figure 7-2</A
>, <A
HREF="#FIG-ARTICLE-POLL"
>Figure 7-3</A
>, <A
HREF="#FIG-ARTICLE-POLL-BLOCK"
>Figure 7-4</A
>, <A
HREF="#FIG-BACKUP"
>Figure 7-5</A
>, <A
HREF="#FIG-BANNERS"
>Figure 7-6</A
>, <A
HREF="#FIG-BLOCKS"
>Figure 7-7</A
>, <A
HREF="#FIG-CONTENT"
>Figure 7-8</A
>, <A
HREF="#FIG-DOWNLOADS"
>Figure 7-9</A
>, <A
HREF="#FIG-EDIT-ADMINS"
>Figure 7-10</A
>, <A
HREF="#FIG-EDIT-USERS"
>Figure 7-11</A
>, <A
HREF="#FIG-ENCYCLOPEDIA"
>Figure 7-12</A
>, <A
HREF="#FIG-EPHEMERIDS"
>Figure 7-13</A
>, <A
HREF="#FIG-FAQ"
>Figure 7-14</A
>, <A
HREF="#FIG-FORUM"
>Figure 7-15</A
>, <A
HREF="#FIG-REFERERS"
>Figure 7-16</A
>, <A
HREF="#FIG-MESSAGES"
>Figure 7-17</A
>, <A
HREF="#FIG-MODULES"
>Figure 7-18</A
>, <A
HREF="#FIG-MODULES-ADMIN"
>Figure 7-19</A
>, <A
HREF="#FIG-NEWSLETTER"
>Figure 7-20</A
>, <A
HREF="#FIG-OPTIMIZE"
>Figure 7-21</A
>, <A
HREF="#FIG-PREFERENCES"
>Figure 7-22</A
>, <A
HREF="#FIG-REVIEWS"
>Figure 7-23</A
>, <A
HREF="#FIG-SECTIONS"
>Figure 7-24</A
>, <A
HREF="#FIG-SUBMISSIONS"
>Figure 7-25</A
>, <A
HREF="#FIG-SURVEYS"
>Figure 7-26</A
>, <A
HREF="#FIG-TOPICS"
>Figure 7-27</A
>, <A
HREF="#FIG-WEBLINKS"
>Figure 7-29</A
>, <A
HREF="#FIG-LOGOUT"
>Figure 7-30</A
>, <A
HREF="#FIG-FORUM-2"
>Figure 7-31</A
>, <A
HREF="#FIG-PREFERENCES-2"
>Figure 7-32</A
>, <A
HREF="#FIG-GENERAL-SITE-INFO"
>Figure 7-33</A
>, <A
HREF="#FIG-FOOTER"
>Figure 7-34</A
>, <A
HREF="#FIG-WEBMAIL-OPTIONS"
>Figure 7-35</A
>, <A
HREF="#FIG-MOON-MOONSUN-SUN"
>Figure 8-1</A
>, <A
HREF="#FIG-METEOSAT"
>Figure 8-2</A
>, <A
HREF="#FIG-MY-MENU"
>Figure 8-3</A
>, <A
HREF="#FIG-TREEMENU3-2"
>Figure 8-4</A
>, <A
HREF="#FIG-TREEMENU-JS"
>Figure 8-5</A
>, <A
HREF="#FIG-SOMMAIRE-PARAMETRABLE"
>Figure 8-6</A
>, <A
HREF="#FIG-RANDOM-QUOTES"
>Figure 8-7</A
>, <A
HREF="#FIG-EVENTCAL"
>Figure 8-8</A
>, <A
HREF="#FIG-EVENTCAL1"
>Figure 8-9</A
>, <A
HREF="#FIG-EVENTCAL2"
>Figure 8-10</A
>, <A
HREF="#FIG-EVENTCAL3"
>Figure 8-11</A
>, <A
HREF="#FIG-EVENTCAL4"
>Figure 8-12</A
>, <A
HREF="#FIG-EVENTCAL5"
>Figure 8-13</A
>, <A
HREF="#FIG-YOUR-ACCOUNT-TWEAK"
>Figure 8-14</A
>, <A
HREF="#FIG-APPROVE-MEMBERSHIP-PENDING-APPLICATIONS"
>Figure 8-15</A
>, <A
HREF="#FIG-APPROVE-MEMBERSHIP-APPROVAL-MESSAGE"
>Figure 8-16</A
>, <A
HREF="#FIG-APPROVE-MEMBERSHIP-EMAIL-MANAGEMENT-1"
>Figure 8-17</A
>, <A
HREF="#FIG-APPROVE-MEMBERSHIP-EMAIL-MANAGEMENT-2"
>Figure 8-18</A
>, <A
HREF="#FIG-GALLERY"
>Figure 8-19</A
>, <A
HREF="#FIG-GALLERY-RELATED-FILES"
>Figure 8-20</A
>, <A
HREF="#FIG-IP-TRACKING"
>Figure 8-21</A
>, <A
HREF="#FIG-IP-TRACKING-PAGE-VIEW-INFO"
>Figure 8-22</A
>, <A
HREF="#FIG-CAMPORTAL-BLOCK"
>Figure 8-23</A
>, <A
HREF="#FIG-CAMPORTAL"
>Figure 8-24</A
>, <A
HREF="#FIG-CONQUERCAM"
>Figure 8-25</A
>, <A
HREF="#FIG-MYHEADLINES-BOX"
>Figure 8-26</A
>, <A
HREF="#FIG-MYHEADLINES-SUBSCRIBE"
>Figure 8-27</A
>, <A
HREF="#FIG-PHP-NUKE-TOOLS-BLOCK"
>Figure 8-28</A
>, <A
HREF="#FIG-PHP-NUKE-TOOLS-MODULE-CREATOR"
>Figure 8-29</A
>, <A
HREF="#FIG-UPLOAD"
>Figure 8-30</A
>, <A
HREF="#FIG-ODP"
>Figure 8-31</A
>, <A
HREF="#FIG-CALLOWAYS-CART-ADD-PRODUCT"
>Figure 8-32</A
>, <A
HREF="#FIG-WORKBOARD"
>Figure 8-33</A
>, <A
HREF="#FIG-WORKBOARD-ADMIN"
>Figure 8-34</A
>, <A
HREF="#FIG-EXTRA-INFO"
>Figure 12-1</A
>, <A
HREF="#FIG-TOP-NAV-BAR"
>Figure 14-3</A
>, <A
HREF="#FIG-POSTED-BY"
>Figure 14-4</A
>, <A
HREF="#FIG-MESSAGES-2"
>Figure 16-1</A
>, <A
HREF="#FIG-MODULES-BLOCK"
>Figure 17-1</A
>, <A
HREF="#FIG-MODULES-BLOCK-2"
>Figure 17-2</A
>, <A
HREF="#FIG-TREEMENU"
>Figure 17-3</A
>, <A
HREF="#FIG-TREEMENU1"
>Figure 17-4</A
>, <A
HREF="#FIG-TREEMENU2"
>Figure 17-5</A
>, <A
HREF="#FIG-TREEMENU3"
>Figure 17-6</A
>, <A
HREF="#FIG-FAQ-3"
>Figure 18-2</A
>, <A
HREF="#FIG-REVIEWS-2"
>Figure 18-3</A
>, <A
HREF="#FIG-WEBLINKS-4"
>Figure 18-4</A
>, <A
HREF="#FIG-YOUR-INFO-PROFILE-LINK"
>Figure 18-5</A
>, <A
HREF="#FIG-FORUM-PROFILE-LINK"
>Figure 18-6</A
>, <A
HREF="#FIG-YOUR-INFO-PROFILE"
>Figure 18-7</A
>, <A
HREF="#FIG-FORUM-PROFILE"
>Figure 18-8</A
>, <A
HREF="#FIG-STORIES-2"
>Figure 18-9</A
>, <A
HREF="#FIG-SUBMISSIONS-2"
>Figure 18-10</A
>, <A
HREF="#FIG-WAITING-CONTENT-BLOCK"
>Figure 18-11</A
>, <A
HREF="#FIG-SECTIONS-2"
>Figure 18-12</A
>, <A
HREF="#FIG-DOWNLOADS-4"
>Figure 18-13</A
>, <A
HREF="#FIG-STORIES-3"
>Figure 18-14</A
>, <A
HREF="#FIG-ADMIN-PANEL-2"
>Figure 19-1</A
>, <A
HREF="#FIG-PREFERENCES-3"
>Figure 19-2</A
>, <A
HREF="#FIG-NEWSLETTER-2"
>Figure 19-3</A
>, <A
HREF="#FIG-BLOCKS-2"
>Figure 20-1</A
>, <A
HREF="#FIG-CONTENT-2"
>Figure 20-3</A
>, <A
HREF="#FIG-HELLO-WORLD-JAVASCRIPT"
>Figure 20-4</A
>, <A
HREF="#FIG-HELP-CENTER-LIVE-MAIN"
>Figure 20-5</A
>, <A
HREF="#FIG-HELP-CENTER-LIVE-BLOCK-OFFLINE"
>Figure 20-6</A
>, <A
HREF="#FIG-HELP-CENTER-LIVE-BLOCK-TROUBLE-TICKET"
>Figure 20-7</A
>, <A
HREF="#FIG-HELP-CENTER-LIVE-BLOCK-ONLINE"
>Figure 20-8</A
>, <A
HREF="#FIG-HELP-CENTER-LIVE-BLOCK-REQUEST-MONITOR"
>Figure 20-9</A
>, <A
HREF="#FIG-HELP-CENTER-LIVE-BLOCK-USER-NOTIFY"
>Figure 20-10</A
>, <A
HREF="#FIG-HELP-CENTER-LIVE-BLOCK-USER-REQUEST"
>Figure 20-11</A
>, <A
HREF="#FIG-PAYPAL1"
>Figure 20-12</A
>, <A
HREF="#FIG-PAYPAL2"
>Figure 20-13</A
>, <A
HREF="#FIG-IFRAMES"
>Figure 21-3</A
>, <A
HREF="#FIG-LOGOUT-MODULE"
>Figure 21-4</A
>, <A
HREF="#FIG-ANALYZE-WARNING-PHP"
>Figure 23-1</A
>, <A
HREF="#FIG-ANALYZE-WARNING-SITEKEY"
>Figure 23-2</A
>, <A
HREF="#FIG-ANALYZE-WARNING-WEBMAIL"
>Figure 23-3</A
>, <A
HREF="#FIG-OPTIMIZE-2"
>Figure 24-1</A
>, <A
HREF="#FIG-OPTIMIZE-PHP"
>Figure 24-2</A
>, <A
HREF="#FIG-JPCACHE"
>Figure 24-3</A
>, <A
HREF="#FIG-PEAR"
>Figure 24-4</A
>, <A
HREF="#FIG-MMCACHE"
>Figure 24-5</A
>, <A
HREF="#FIG-MOD-REWRITE-PHPINFO"
>Figure 25-1</A
>, <A
HREF="#FIG-MOD-REWRITE-CONTROL-FLOW"
>Figure 25-2</A
>, <A
HREF="#FIG-MOD-REWRITE-BACK-REFERENCE"
>Figure 25-3</A
>, <A
HREF="#FIG-REGULAR-EXPRESSIONS"
>Figure 25-4</A
>, <A
HREF="#FIG-BACKUP-2"
>Figure 26-1</A
>, <A
HREF="#FIG-PHPMYADMIN-SQL-QUERY-2"
>Figure 26-3</A
>, <A
HREF="#FIG-MODULES-3"
>Figure 26-4</A
>, <A
HREF="#FIG-WEBLINKS-5"
>Figure 26-5</A
>, <A
HREF="#FIG-MODULES-2"
>Figure 27-1</A
>, <A
HREF="#FIG-MODULES-ADMIN-3"
>Figure 27-2</A
>, <A
HREF="#FIG-FAQ-2"
>Figure 27-3</A
>, <A
HREF="#FIG-WEBLINKS-2"
>Figure 27-4</A
>, <A
HREF="#FIG-DOWNLOADS-2"
>Figure 27-5</A
>, <A
HREF="#FIG-WEBLINKS-3"
>Figure 27-6</A
>, <A
HREF="#FIG-EPHEMERIDS-2"
>Figure 27-7</A
>, <A
HREF="#FIG-ENCYCLOPEDIA-2"
>Figure 27-8</A
>, <A
HREF="#FIG-DOWNLOADS-3"
>Figure 27-9</A
>, <A
HREF="#FIG-DOWNLOADS-ADD-DOWNLOAD"
>Figure 27-10</A
>, <A
HREF="#FIG-DOWNLOADS-ADD-DOWNLOAD-2"
>Figure 27-11</A
>, <A
HREF="#FIG-DOWNLOADS-MAIN-CATEGORIES-MAXDATE"
>Figure 27-12</A
>, <A
HREF="#FIG-YOUR-INFO-PROFILE-TIMEZONE"
>Figure 27-13</A
> and <A
HREF="#FIG-PAGE-AREA-MODEL"
>Figure 28-1</A
>.</P
></LI
><LI
><P
>Claudio added: <A
HREF="#FIG-PHP-NUKE"
>Figure 2-1</A
>, <A
HREF="#FIG-WS-FTP-GENERAL"
>Figure 3-1</A
>, <A
HREF="#FIG-WS-FTP-LOCAL-REMOTE"
>Figure 3-2</A
>, <A
HREF="#FIG-PHPMYADMIN-SELECT-DATABASE"
>Figure 3-7</A
>, <A
HREF="#FIG-PHPMYADMIN-NAVIGATION-BAR"
>Figure 3-8</A
>, <A
HREF="#FIG-PHPMYADMIN-FIELD-FUNCTIONS"
>Figure 3-9</A
>, <A
HREF="#FIG-PHPMYADMIN-SQL"
>Figure 3-10</A
>, <A
HREF="#FIG-PHPMYADMIN-CREATE-DATABASE"
>Figure 3-13</A
>, <A
HREF="#FIG-EASYPHP"
>Figure 3-17</A
>, <A
HREF="#FIG-EASYPHP2"
>Figure 3-18</A
>, <A
HREF="#FIG-PHPINFO-PHP-WINDOWS"
>Figure 3-19</A
>, <A
HREF="#FIG-APACHE-PACKAGE"
>Figure 3-20</A
>, <A
HREF="#FIG-MANDRAKE-CONTROL-CENTER"
>Figure 3-21</A
>, <A
HREF="#FIG-RED-HAT-MENU-PACKAGES"
>Figure 3-22</A
>, <A
HREF="#FIG-RED-HAT-PACKAGE-SECTIONS"
>Figure 3-23</A
>, <A
HREF="#FIG-RED-HAT-SERVICE-CONFIGURATION"
>Figure 3-24</A
>, <A
HREF="#FIG-PHPMYADMIN-FIELD-FUNCTIONS-2"
>Figure 3-36</A
>, <A
HREF="#FIG-WHO-IS-ONLINE"
>Figure 6-12</A
>, <A
HREF="#FIG-SURVEYS-BLOCK"
>Figure 6-14</A
>, <A
HREF="#FIG-LOGIN"
>Figure 6-15</A
>, <A
HREF="#FIG-ADD-TOPIC"
>Figure 7-28</A
>, <A
HREF="#FIG-PHP-NUKE-HTML-FOLDER"
>Figure 9-1</A
>, <A
HREF="#FIG-THEME-STRUCTURE-NUKENEWS"
>Figure 14-1</A
>, <A
HREF="#FIG-THEME-STRUCTURE-OTHER"
>Figure 14-2</A
>, <A
HREF="#FIG-BACKUP-DB"
>Figure 26-2</A
> and <A
HREF="#FIG-MODULES-ADMIN-3"
>Figure 27-2</A
>.</P
></LI
></UL
><P
>Again, as in version 1.0, Chris made PNG, PDF (encapsulated PDF), EPS (encapsulated Postscript) and BMP versions of <EM
>all</EM
> figures to be used in the various formats of the document. </P
><P
>The following tables have been added in version 2.0:</P
><P
></P
><UL
><LI
><P
>Chris added: <A
HREF="#TAB-SECTIONS"
>Table 6-1</A
>, <A
HREF="#TAB-BODY-TAGS"
>Table 14-1</A
>, <A
HREF="#TAB-FILTER-TEXT"
>Table 16-1</A
>, <A
HREF="#TAB-CHECK-HTML"
>Table 16-2</A
>, <A
HREF="#TAB-HELP-CENTER-LIVE-SETCOOKIE"
>Table 20-1</A
>, <A
HREF="#TAB-CHANGING-HTML-LINKS"
>Table 21-1</A
>, <A
HREF="#TAB-CHANGING-HTML-LINKS-2"
>Table 21-2</A
>, <A
HREF="#TAB-SECURITY-VULNERABILITIES"
>Table 23-1</A
> and <A
HREF="#TAB-URLIN-URLOUT"
>Table 25-1</A
>.</P
></LI
></UL
><P
>Chris wrote all new material of version 2.0 in LyX, formatted the whole document, created the Index (semi-automatically this time, through some of his sed and awk scripts, as described in <A
HREF="http://www.karakas-online.de/mySGML/"
TARGET="_top"
>Document processing with LyX and SGML</A
>) and processed the LyX file through his scripts (see <A
HREF="#BOOK-BEHIND-BOOK"
>Section 1.8</A
>, for details) to render all the versions and files available from <A
HREF="#FORMATS"
>Section 1.2</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CREDITS-VERSION-2.1"
>1.5.4. Version 2.1</A
></H3
><P
>In version 2.1, <A
HREF="http://www.karakas-online.de"
TARGET="_top"
>Chris Karakas</A
> added the following Chapters and Sections:</P
><P
></P
><UL
><LI
><P
>In <A
HREF="#INCLUDE-HTML-FILE-IN-MODULE"
>Section 21.5</A
>: how to include two files side-by-side in a module.</P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CREDITS-GENERAL"
>1.5.5. General</A
></H3
><P
>Some quotes have been taken from the installation files of <A
HREF="http://phpnuke.oeg"
TARGET="_top"
>phpnuke.org</A
>, as well as from the <A
HREF="http://www.mysql.com/documentation/"
TARGET="_top"
>MySQL manual</A
>.</P
><P
>In <A
HREF="#REGULAR-EXPRESSIONS"
>Section 25.3</A
> we use material taken from <A
HREF="http://www.tldp.org/LDP/abs/html/x12265.html"
TARGET="_top"
>A Brief Introduction to Regular Expressions</A
>.</P
><P
>The sections on mod_rewrite: <A
HREF="#MOD-REWRITE-API-PHASES"
>Section 25.2.1</A
>, <A
HREF="#MOD-REWRITE-RULESET-PROCESSING"
>Section 25.2.2</A
>, <A
HREF="#FIG-MOD-REWRITE-CONTROL-FLOW"
>Figure 25-2</A
>, <A
HREF="#MOD-REWRITE-QUOTING-SPECIAL-CHARACTERS"
>Section 25.2.3</A
> and <A
HREF="#MOD-REWRITE-REGEX-BACKREFERENCES"
>Section 25.2.4</A
> have been taken from the <A
HREF="http://httpd.apache.org/docs/mod/mod_rewrite.html"
TARGET="_top"
>Apache Documentation of mod_rewrite</A
>.</P
><P
><A
HREF="#HOW-SESSIONS-WORK"
>Section 10.1</A
> and part of <A
HREF="#ELIMINATE-SESSION-CHECKS"
>Section 10.2</A
> were taken from a post of Paul S. Owen, Development Team Leader of <A
HREF="http://www.phpbb.com"
TARGET="_top"
>phpBB</A
>, in <A
HREF="http://www.phpbb.com/phpBB/viewtopic.php?t=69493"
TARGET="_top"
>http://www.phpbb.com/phpBB/viewtopic.php?t=69493</A
>, as well as in <A
HREF="http://www.phpbb.com/kb/article.php?article_id=54"
TARGET="_top"
>http://www.phpbb.com/kb/article.php?article_id=54</A
> and are included here with permission.</P
><P
><A
HREF="#FIG-PAGE-AREA-MODEL"
>Figure 28-1</A
> is taken from W3C's working draft <A
HREF="http://www.w3.org/TR/2003/WD-css3-page-20031218/"
TARGET="_top"
>CSS3 Paged Media Module</A
>, version of Dec. 18th 2003 and is Copyright © 2003 <A
HREF="http://www.w3.org"
TARGET="_top"
>W3C</A
> (<A
HREF="http://www.lcs.mit.edu"
TARGET="_top"
>MIT</A
>, <A
HREF="http://www.ercim.org"
TARGET="_top"
>ERCIM</A
>, <A
HREF="http://www.keio.ac.jp"
TARGET="_top"
>Keio</A
>), All Rights Reserved. Used with permission according to <A
HREF="http://www.w3.org/Consortium/Legal/copyright-documents"
TARGET="_top"
>W3C document licence</A
>.</P
><P
>The examples for admonition in the Conventions Section (<A
HREF="#CONVENTIONS"
>Section 1.7</A
>) were taken from the <A
HREF="http://newbiedoc.sourceforge.net/tutorials/docbook-guide/admon-docbook-guide.html.en"
TARGET="_top"
>Section on admonitions of the DocBook Guide</A
> of the <A
HREF="http://newbiedoc.sourceforge.net"
TARGET="_top"
>Debian Newbiedoc Project</A
>.</P
><P
>The <A
HREF="http://www.karakas-online.de/myLinuxTips/css-for-docbook.html"
TARGET="_top"
>CSS file for DocBook</A
> that is used in this document , <A
HREF="ck-style.css"
TARGET="_top"
>ck-style.css</A
>, uses <A
HREF="http://www.matterform.com/qbullets/index.php"
TARGET="_top"
>QBullets</A
> in links. See <A
HREF="http://www.karakas-online.de/mySGML/explain-css.html"
TARGET="_top"
>Explain CSS</A
> on how to do this. Thanks to Matterform Media for providing QBullets for free. If you plan to use them on your website, please observe the <A
HREF="http://www.matterform.com/qbullets/usage.html"
TARGET="_top"
>QBullets usage terms</A
>. </P
><P
>The CSS also got important elements from the <A
HREF="http://newbiedoc.sourceforge.net/nd-style.css"
TARGET="_top"
>Newbiedoc CSS file for DocBook</A
> and Mark Pilgrim's influential <A
HREF="http://diveintoaccessibility.org"
TARGET="_top"
>dive into Accessibility</A
>. The CSS font size controlling code and its explanation are taken from <A
HREF="http://diveintoaccessibility.org/day_26_using_relative_font_sizes.html"
TARGET="_top"
>Using relative font sizes</A
>.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="AKNOWLEDGEMENTS"
>1.6. Aknowledgements</A
></H2
><P
>Claudio said in the first version (1.x) of this document: </P
><P
>The following people contribute, directly or indirectly to this project and their help is hereby kindly aknowledged:</P
><P
></P
><UL
><LI
><P
><A
HREF="http://phpnuke.org"
TARGET="_top"
>Francisco Burzi</A
> with all the introductory scripts, found in the files of installation of PHP-Nuke</P
></LI
><LI
><P
>Vasco Clergy and his daughter Valentina of Lug Rieti for the translations of the modules of the handbook</P
></LI
><LI
><P
>Micaela Bechini, for the daily translations of <A
HREF="http://phpnuke.oeg"
TARGET="_top"
>phpnuke.org</A
> from English.</P
></LI
><LI
><P
>The communities of <A
HREF="http://www.splatt.it"
TARGET="_top"
>Splatt.it</A
>, <A
HREF="http://www.nukeitalia.com"
TARGET="_top"
>Nukeitalia.com</A
>, <A
HREF="http://www.phpnuke.it"
TARGET="_top"
>PHPnuke.it</A
> (and its Mailing List), <A
HREF="http://www.postnuke.it"
TARGET="_top"
>Postnuke.it</A
>, <A
HREF="http://www.envolution.it"
TARGET="_top"
>envolution.it</A
>, <A
HREF="http://www.xoops.it"
TARGET="_top"
>xoops.it</A
> and obviously the 1500 registered users of <A
HREF="www.spaghettibrain.com"
TARGET="_top"
>spaghettibrain</A
>.</P
></LI
><LI
><P
>Aemmenet, in the person of Mark Atzori that has granted us free use of the server on which <A
HREF="www.spaghettibrain.com"
TARGET="_top"
>spaghettibrain</A
> is accommodated.</P
></LI
><LI
><P
>Roberto Scano of IWA Italy and Patrizia Bertini of <A
HREF="http://www.webaccessibile.org"
TARGET="_top"
>Webaccessibile.org</A
> for the contributions on usability, accessibility and <A
HREF="http://www.w3c.org"
TARGET="_top"
>W3C</A
> validation.</P
></LI
><LI
><P
>Marcello Tansini of <A
HREF="http://www.webmasterpoint.org"
TARGET="_top"
>webmasterpoint.org</A
> for the support given to the project in terms of visibility.</P
></LI
><LI
><P
>Andrea Birgahi, the best <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Theme Maker of the world for the diagram of <A
HREF="www.spaghettibrain.com"
TARGET="_top"
>spaghettibrain</A
>, for the logo of the book and a lot more.</P
></LI
><LI
><P
>My girl Sara for all...</P
></LI
><LI
><P
>My mother Lella, my sister Cora, my dog Grey and the newly arrived baby dog Maya.</P
></LI
></UL
><A
NAME="AEN1353"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>This book I dedicate it to my Papà Antonio. Hello Pà.</P
></BLOCKQUOTE
><P
>For this second version (2.x), Claudio wishes to thank:</P
><P
></P
><UL
><LI
><P
>Francisco Burzi, the daddy of PHPNuke, who has chosen this book as the official <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> handbook!</P
></LI
><LI
><P
>The translator and the manager team of the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> HOWTO: <A
HREF="http://www.karakas-online.de"
TARGET="_top"
>Chris Karakas</A
>, <A
HREF="http://www.os-solutions.net"
TARGET="_top"
>Andre Purfield</A
>, Fortunato Matarrazzo.</P
></LI
><LI
><P
>Umberto Zaccarini of <A
HREF="http://www.wmgitalia.it"
TARGET="_top"
>WMG Italia</A
>.</P
></LI
><LI
><P
>Euro Gala of <A
HREF="http://www.eticoweb.it"
TARGET="_top"
>Eticoweb</A
>, for the operative and ethical support.</P
></LI
><LI
><P
>Florence University, because after reading my book they called me to give a course of CMS at <A
HREF="http://www.mastermultimedia.unifi.it"
TARGET="_top"
>Multimedia Master</A
>; in particular D.ssa Barbara Iraci, Dott. Diego Mencarelli and Dott. Del Bimbo. Thanks to every master student, too.</P
></LI
><LI
><P
>My team, the Crew Spaghetti, Andrea Biraghi, Federico Campoli, Fabio Pirovano, Claudio Demarinis and the casual externals Alex Zollia, Micaela Bechini, VirtualDarkness.</P
></LI
><LI
><P
><A
HREF="http://www.ziobudda.net"
TARGET="_top"
>Michel "Ziobudda" Morelli</A
>, Fabio Farnesi (<A
HREF="http://www.programmiamo.net"
TARGET="_top"
>programmiamo.net</A
>), Giovanni Tummarello (<A
HREF="http://www.wup.it"
TARGET="_top"
>wup.it</A
>), Roberto Scano (IWA Italia), Anna Bruno (<A
HREF="http://www.fullpress.it"
TARGET="_top"
>fullpress.it</A
>), Alessandro Del Rosso and the De Andreis brothers (<A
HREF="http://www.punto-informatico.it"
TARGET="_top"
>punto-informatico.it</A
>), for the mediatic space they give me every time.</P
></LI
><LI
><P
>My mother Lella, my sister Cora, my dogs Maia and Grey.</P
></LI
><LI
><P
>My Sara for everything.</P
></LI
></UL
><P
>Chris wishes to thank:</P
><P
></P
><UL
><LI
><P
><A
HREF="http://phpnuke.org"
TARGET="_top"
>Francisco Burzi</A
>, for writing <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> and publishing it under the <A
HREF="http://www.gnu.org/copyleft/gpl.html"
TARGET="_top"
>GNU General Public License</A
>.</P
></LI
><LI
><P
><A
HREF="http://www.spaghettibrain.com"
TARGET="_top"
>Claudio Erba</A
> for bringing the ball in rolling.</P
></LI
><LI
><P
><A
HREF="http://www.os-solutions.net"
TARGET="_top"
>Andre Purfield</A
> for starting this wonderful project in the <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?topic=11210&#38;forum=23"
TARGET="_top"
>PHP-Nuke book translation thread</A
> at nukeforums.com.</P
></LI
><LI
><P
>All software developers, whose software is used in the preparation of this document (see <A
HREF="#BOOK-BEHIND-BOOK"
>Section 1.8</A
>): </P
><P
></P
><UL
><LI
><P
><A
HREF="http://www.lyx.org"
TARGET="_top"
>LyX</A
>,</P
></LI
><LI
><P
><A
HREF="http://www.ctan.org"
TARGET="_top"
>TeX</A
>,</P
></LI
><LI
><P
><A
HREF="http://www.latex-project.org"
TARGET="_top"
>LaTeX</A
>,</P
></LI
><LI
><P
><A
HREF="http://www.tug.org/applications/pdftex/"
TARGET="_top"
>pdfTeX</A
>,</P
></LI
><LI
><P
><A
HREF="http://www.tug.org/applications/hyperref/"
TARGET="_top"
>hyperref</A
>,</P
></LI
><LI
><P
><A
HREF="http://openjade.sourceforge.net"
TARGET="_top"
>openjade</A
>,</P
></LI
><LI
><P
><A
HREF="http://www.fifi.org/cgi-bin/man2html/usr/share/man/man1/pdfjadetex.1.gz"
TARGET="_top"
>pdfjadetex</A
>,</P
></LI
><LI
><P
><A
HREF="http://www.ctan.org/tex-archive/help/Catalogue/entries/thumbpdf.html"
TARGET="_top"
>thumbpdf</A
>,</P
></LI
><LI
><P
><A
HREF="http://docbook.sourceforge.net/projects/dsssl/"
TARGET="_top"
>DocBook DSSSL stylesheets</A
>,</P
></LI
><LI
><P
><A
HREF="http://docbook.sourceforge.net/release/dsssl/current/doc/indexing.html"
TARGET="_top"
>collateindex</A
>,</P
></LI
><LI
><P
><A
HREF="http://www.sgmltools.org"
TARGET="_top"
>sgmltools</A
>,</P
></LI
><LI
><P
><A
HREF="http://tidy.sourceforge.net"
TARGET="_top"
>HTML tidy</A
>,</P
></LI
><LI
><P
><A
HREF="http://hvdkooij.xs4all.nl/docs-docbook.en.cms"
TARGET="_top"
>HTML split</A
>,</P
></LI
><LI
><P
><A
HREF="http://www.gnu.org/software/sed/manual/sed.html"
TARGET="_top"
>sed</A
>,</P
></LI
><LI
><P
><A
HREF="runsed"
TARGET="_top"
>runsed</A
>,</P
></LI
><LI
><P
><A
HREF="http://www.gnu.org/software/gawk/manual/gawk.html"
TARGET="_top"
>awk</A
>,</P
></LI
><LI
><P
><A
HREF="http://www.radicaleye.com/dvips.html"
TARGET="_top"
>dvips</A
>,</P
></LI
><LI
><P
>and all the standard software used in a <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU/Linux</A
> system.</P
></LI
></UL
></LI
><LI
><P
><A
HREF="http://www.nukeforums.com"
TARGET="_top"
>nukeforums</A
> for providing a Forum for the initial stages of this project (see the <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?topic=11210&#38;forum=23"
TARGET="_top"
>PHP-Nuke book translation thread</A
>), as well as all its numerous readers for their questions and answers - who have influenced many solutions presented in this document. Special thanks go to its most active members</P
><P
></P
><UL
><LI
><P
><A
HREF="http://www.humpa.com"
TARGET="_top"
>Humpa</A
>, </P
></LI
><LI
><P
><A
HREF="http://www.nukeresources.com"
TARGET="_top"
>Chatserv</A
>, </P
></LI
><LI
><P
><A
HREF="http://www.sengers-au.com"
TARGET="_top"
>Chris-au</A
>, </P
></LI
></UL
><P
>for all the useful advice. I've learned a lot from you!</P
></LI
><LI
><P
>Paul S. Owen for his contribution in <A
HREF="#SESSION-MANAGEMENT"
>Chapter 10</A
> on session management.</P
></LI
><LI
><P
>Mark Pilgrim for writing <A
HREF="http://diveintoaccessibility.org/table_of_contents.html"
TARGET="_top"
>Dive into Accessibility</A
> and publishing it under the <A
HREF="http://www.gnu.org/copyleft/fdl.html"
TARGET="_top"
>GNU Free Documentation License</A
>.</P
></LI
><LI
><P
>All authors of documentation used in various places (see <A
HREF="#CREDITS"
>Section 1.5</A
>):</P
><P
></P
><UL
><LI
><P
><A
HREF="http://phpnuke.oeg"
TARGET="_top"
>PHP-Nuke</A
>,</P
></LI
><LI
><P
><A
HREF="http://www.php.net/manual/en/"
TARGET="_top"
>PHP manual</A
>,</P
></LI
><LI
><P
><A
HREF="http://www.mysql.com/documentation/"
TARGET="_top"
>MySQL manual</A
>,</P
></LI
><LI
><P
><A
HREF="http://www.tldp.org/LDP/abs/html/x12265.html"
TARGET="_top"
>A Brief Introduction to Regular Expressions</A
>,</P
></LI
><LI
><P
><A
HREF="http://httpd.apache.org/docs/mod/mod_rewrite.html"
TARGET="_top"
>Apache Documentation of mod_rewrite</A
>,</P
></LI
><LI
><P
><A
HREF="http://www.w3.org/TR/2003/WD-css3-page-20031218/"
TARGET="_top"
>CSS3 Paged Media Module</A
>,</P
></LI
><LI
><P
><A
HREF="http://newbiedoc.sourceforge.net"
TARGET="_top"
>Debian Newbiedoc Project</A
>.</P
></LI
></UL
></LI
><LI
><P
>Matterform Media for providing <A
HREF="http://www.matterform.com/qbullets/index.php"
TARGET="_top"
>QBullets</A
> for free.</P
></LI
><LI
><P
>Didi for <A
HREF="#FIG-OPTIMIZE-PHP"
>Figure 24-2</A
>.</P
></LI
><LI
><P
>Martin Kaspar for inspirating discussions on <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> documentation.</P
></LI
><LI
><P
>All visitors of the <A
HREF="http://www.karakas-online.de/phpnuke.html"
TARGET="_top"
>Karakas Online <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Forum</A
> for their kind remarks and suggestions for the improvement of the document, especially: nikits72, </P
></LI
><LI
><P
>Last, but not least, Gloomy for all the moral support during the hard times.</P
></LI
></UL
><P
>The translators would like to thank the <A
HREF="http://www.tldp.org"
TARGET="_top"
>Linux Documentation Project (TLDP)</A
> and its reviewers, especially Tabatha Marshall and Greg Ferguson for their comments and efforts to make this document available from TLDP's plattform to a wider audience.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CONVENTIONS"
>1.7. Conventions</A
></H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>admonitions</DT
><DD
><P
>Admonitions are little pictures used to emphasize something of importance to the reader. The four types used are:</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="90%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Note</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
> 
Using a hammer to put together your computer is bad.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="90%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Tip</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
> 
Do not hit your thumb with the hammer, it hurts!</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="IMPORTANT"
><P
></P
><TABLE
CLASS="IMPORTANT"
WIDTH="90%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.png"
HSPACE="5"
ALT="Important"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Important</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Watch where you're swinging that hammer!</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="90%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Caution</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
> 
Hitting your thumb with a hammer may lead to an unwanted trip to the hospital!</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="WARNING"
><P
></P
><TABLE
CLASS="WARNING"
WIDTH="90%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/warning.png"
HSPACE="5"
ALT="Warning"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Warning</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
> 
Do not, under any circumstances, admit that you hit your own thumb with a hammer. The ridicule you will face is astounding!</P
></TD
></TR
></TABLE
></DIV
></DD
><DT
>Access keys</DT
><DD
><P
>Access keys enable navigation through the document, without relying on a mouse. The following keys have been given special meaning in this document:</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>P</DT
><DD
><P
>Previous page.</P
></DD
><DT
>N</DT
><DD
><P
>Next page.</P
></DD
><DT
>H</DT
><DD
><P
>Home of the document (Table of Contents).</P
></DD
><DT
>U</DT
><DD
><P
>Up (takes you one level up the section hierarchy).</P
></DD
></DL
></DIV
><P
>If you also happen to be reading the document from its original location, then the following access keys can also be used:</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>S</DT
><DD
><P
>Start (takes you to the author's start page).</P
></DD
><DT
>T</DT
><DD
><P
>The current (&#8220;This&#8221;) page, without the Sitemenu on the left.</P
></DD
><DT
>M</DT
><DD
><P
>The current page in a frameset, where the left frame contains a Menu.</P
></DD
></DL
></DIV
></DD
></DL
></DIV
><P
>To use the access keys, you have to simultaneously press a modifier key, which may vary from browser to browser. For example in NN6+/Mozilla, the modifier key is <B
CLASS="KEYCAP"
>ALT</B
>, so you have to use 
<B
CLASS="KEYCAP"
>ALT</B
>-<B
CLASS="KEYCAP"
>N</B
>
to go to the next page, and 
<B
CLASS="KEYCAP"
>ALT</B
>-<B
CLASS="KEYCAP"
>P</B
>
to come back. In other browsers such as IE6, the access keys just give focus to the associated link, so the sequence becomes 
<B
CLASS="KEYCAP"
>ALT</B
>-<B
CLASS="KEYCAP"
>N</B
> <B
CLASS="KEYCAP"
>Enter</B
>
. Try it, you'll like it! <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_smile.png"></SPAN
></P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="BOOK-BEHIND-BOOK"
>1.8. The book behind the book</A
></H2
><P
>Do you want to create professionally formatted documents? Tired of always having to change the font settings, to insert or delete pagebreaks, to format your text for printing, monitor, or web view? Do you find yourself spending hours of your life into formatting issues that you wish you never had to be conftonted with? Did you, during your editing efforts, ever get the uncomforting feeling that you are inventing the wheel for th 39th time? </P
><P
>Well, in fact you are! You can use the power of Open Source tools like <A
HREF="http://www.lyx.org"
TARGET="_top"
>LyX</A
> and <A
HREF="http://www.sgmltools.org"
TARGET="_top"
>sgmltools</A
> to create the documents you've dreamed of, while, as a nice side effect, concentrating on what deserves most of your attention: Content, not Formatting! In <A
HREF="http://www.karakas-online.de/mySGML/"
TARGET="_top"
>Document processing with LyX and SGML</A
>, <A
HREF="http://www.karakas-online.de"
TARGET="_top"
>Chris Karakas</A
> describes a method by which all you have to do is to write your document in LyX, then run the .lyx file through a script that will produce the SGML source and, from it, the HTML, TXT, RTF, PDF and PS formatted documents (as in <A
HREF="#FORMATS"
>Section 1.2</A
>), complete with table of contents, embedded pictures, fonts, thumbnails (for PDF) and other goodies - just as in the document you are reading right now!</P
><P
>That is, to learn how to produce a book like this one, you have to read <A
HREF="http://www.karakas-online.de/mySGML/"
TARGET="_top"
>the book behind the book</A
>. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="BOOK-BEHIND-BOOK-GENERAL-IDEA"
>1.8.1. The general idea</A
></H3
><P
>When writing LyX documents, formatting should be the last thing on your mind. Concentrate on writing a clear and c oncise document. The sgml parser will take care of the formatting.We've all heard of WYSIWYG. <A
HREF="http://www.lyx.org"
TARGET="_top"
>LyX</A
> is WYGIWYM. WYGIWYM stands for "What You Get Is What You Mean". This means if you mean for text to represent source code you assign it a source code environment (Lyxese for style), and it formats the way you meant it to. You needn't worry about formatting during the writing of your document. If you don't like the way it looks upon finishing and printing it out, you can change the way styles map to formatting, and those styles will consistently change throughout the document.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="BOOK-BEHIND-BOOK-LINE-OF-ATTACK"
>1.8.2. Line of attack</A
></H3
><P
>The method described in <A
HREF="http://www.karakas-online.de/mySGML/"
TARGET="_top"
>Document processing with LyX and SGML</A
> follows a line of attack defined by the following:</P
><P
></P
><UL
><LI
><P
>We put everything in a shell script. We don't want to bother about anything else. We want to ponder comfortably upon the meaning of life while drinking some coffee or tea, watching our computer do the work for us - personally, a very rewarding experience :-)</P
></LI
><LI
><P
>We use <A
HREF="http://www.gnu.org/software/sed/manual/sed.html"
TARGET="_top"
>sed</A
> to correct LyX' SGML output. The more we are able to correct, the more SGML features we get out of our plain vanilla LyX.</P
></LI
><LI
><P
>We use the <A
HREF="http://www.sgmltools.org"
TARGET="_top"
>sgmltools</A
> package which hides a lot of details from the end user, giving nonetheless all the power of the involved tools.<A
NAME="AEN1681"
HREF="#FTN.AEN1681"
><SPAN
CLASS="footnote"
>[3]</SPAN
></A
></P
></LI
><LI
><P
>We will adapt the <A
HREF="http://docbook.sourceforge.net/projects/dsssl/"
TARGET="_top"
>DocBook DSSSL stylesheets</A
> to our personal needs and taste..</P
></LI
><LI
><P
>The end product shall be a directory ready to upload to our web server with all files, links, images and formats necessary.</P
></LI
></UL
><P
>So you got appetite and want to delve into the gory details? Read the book behind this book: <A
HREF="http://www.karakas-online.de/mySGML/"
TARGET="_top"
>Document processing with LyX and SGML</A
>! <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_cool.png"></SPAN
></P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="TRANSLATE-PHP-NUKE-HOWTO"
>1.9. How to translate this HOWTO</A
></H2
><P
>The <A
HREF="http://www.karakas-online.de/EN-Book/"
TARGET="_top"
>PHP-Nuke HOWTO</A
> started also as a translation. You can read how it all started in <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?topic=11210&#38;forum=23"
TARGET="_top"
>PHP-Nuke book translation thread</A
> at nukeforums.com.</P
><P
>The best way to do the translation would be to install the <A
HREF="http://www.lyx.org"
TARGET="_top"
>LyX</A
>. Chris still uses an old version (1.2.0) of it, but you could try the newest one and we will see if his <A
HREF="http://www.karakas-online.de/mySGML/"
TARGET="_top"
>document processing scripts</A
> still work. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
></P
><P
>The process is the following (see, for example, <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=180"
TARGET="_top"
>Greek Translation of Php-Nuke HOWTO</A
> and <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=151"
TARGET="_top"
>New language translation howto</A
>): </P
><P
></P
><OL
TYPE="1"
><LI
><P
>You take the LyX version of the book from the Formats section (<A
HREF="#FORMATS"
>Section 1.2</A
>), you do the translation in LyX, then send it to <A
HREF="http://www.karakas-online.de"
TARGET="_top"
>Chris Karakas</A
> (chris at karakas-online dot de). </P
></LI
><LI
><P
>Chris will use his scripts (<A
HREF="#BOOK-BEHIND-BOOK"
>Section 1.8</A
>) to export the LyX document to SGML, correct the SGML that comes out of LyX, then produce all other formats, as in <A
HREF="#FORMATS"
>Section 1.2</A
>).</P
></LI
></OL
><P
>The advantage of this method is that you only need to translate the words, leaving everything else (like "environments", SGML tags etc.) untouched. This way paragraphs, admonitions (see <A
HREF="#CONVENTIONS"
>Section 1.7</A
>), callouts (those small numbers in circles that you see in some code examples, as in <A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>), code environments etc., all remain intact - and you don't need to recreate them.</P
><P
>We are in search of available volunteers to translate this book in as many languages as possible. In the case you are interested in translating this book, write to chris at karakas-online dot de, or <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=144"
TARGET="_top"
>PHP-Nuke HOWTO</A
>. Be prepared for months of hard work, as this is 500 pages of printed material!</P
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="INTRODUCTION"
></A
>Chapter 2. Introduction to PHP-Nuke</H1
><DIV
CLASS="SECT1"
><H2
CLASS="SECT1"
><A
NAME="PURPOSE"
>2.1. Purpose</A
></H2
><P
>There has always been the necessity to have a definitive guide on <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. Due to time constraints, nobody has ever had the will to carry out this operation.</P
><P
>Not any more! With this book, <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> now posesses the most comprehensive guide on the subject, suitable for newbies and advanced users alike!</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="WHATIS-PHPNUKE"
>2.2. What Is PHP-Nuke</A
></H2
><P
>PHP-Nuke is free software, released under the <A
HREF="http://www.gnu.org/licenses/licenses.html"
TARGET="_top"
>GNU  License</A
>.</P
><P
>It is a CMS (Content Managment System) that integrates in its inside all the instruments that are used to create, in a broad sense, an information portal (<A
HREF="#FIG-PHP-NUKE"
>Figure 2-1</A
>). Given the immense number of present functions in the installation and in an even greater quantity of modules developed from third parties, the system is also adept to the management of</P
><P
></P
><UL
><LI
><P
>Intranet business, </P
></LI
><LI
><P
>e-commerce systems, </P
></LI
><LI
><P
>corporate portals , </P
></LI
><LI
><P
>public agencies, </P
></LI
><LI
><P
>news agencies, </P
></LI
><LI
><P
>online companies, </P
></LI
><LI
><P
>information sites,</P
></LI
><LI
><P
>e-learning systems </P
></LI
><LI
><P
>and so on...</P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHP-NUKE"
></A
><P
><B
>Figure 2-1.    phpnuke.org, the official <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/php-nuke.png"><DIV
CLASS="CAPTION"
><P
>phpnuke.org, the official <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site.</P
></DIV
></P
></DIV
></DIV
></P
><P
>PHP-Nuke utilizes as hinge of its own structure the duo <A
HREF="http://www.php.net"
TARGET="_top"
>PHP</A
>+ <A
HREF="http://www.mysql.org"
TARGET="_top"
>MySQL</A
>, very often being accompanied by the <A
HREF="http://www.apache.org"
TARGET="_top"
>Apache</A
> web server. Many modules have integrated many other languages, such as Javascript, Java, Flash and also even systems that serve, through the portal, sounds and films in streaming mode (Online Radio, TV Online, Images, Files...). From version 6.x onwards, the compatibility has been extended to include other databases as well, in order to extend the user base even more vastly. </P
><P
>PHP-Nuke is developed with a particular eye to the suggestions of the <A
HREF="http://www.w3c.org"
TARGET="_top"
>W3C</A
>, in its origin, the code is in fact W3C compliant and one has validated both the code and the style sheets. It is then up to the user who intends to create a portal to adhere to these standards during the modification of the graphics or the intrinsic characteristics of the system.</P
><P
>The personalisation either of the graphical, or of the programming part has only a single limit, the fantasy and capability of the programmer and web designer.The presence of many <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> sites similar to each other is due mainly to the lack of time of those who created them or the fear that the phase of personalisation is too difficult on a technical level. In fact, it suffices to let oneself be inspired by the available themes, in order to realize how easy it is to sew a new dress to one's portal.</P
><P
>Francisco Burzi, father and mother of PHP-Nuke, describes his creation as follows:</P
><A
NAME="AEN1839"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>PHP-Nuke is a Web Portal System, storytelling software, News system, online community or whatever you want to call it. The goal of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> is to have an automated web site to distribute news and articles with users system. Each user can submit comments to discuss the articles, just similar to Slashdot and many others. </P
><P
>Main features include: web based admin, surveys, top page, access stats page with counter, user customizable box, themes manager for registered users, friendly administration <ACRONYM
CLASS="ACRONYM"
>GUI</ACRONYM
> with graphic topic manager, option to edit or delete stories, option to delete comments, moderation system, Referers page to know who link us, sections manager, customizable HTML blocks, user and authors edit, an integrated Banners Ads system, search engine, backend/headlines generation (RSS/RDF format), and many, many more friendly functions.</P
><P
>PHP-Nuke is written 100% in <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and requires Apache Web server, <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and a SQL (MySQL, mSQL, PostgreSQL, ODBC, ODBC_Adabas, Sybase or Interbase). Support for 25 languages, Yahoo like search engine, Comments option in Polls, lot of themes, Ephemerids manager, File Manager, Headlines, download manager, faq manager, advanced blocks systems, reviews system, newsletter, categorized articles, multilanguage content management and a lot more.</P
></BLOCKQUOTE
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="HISTORY"
>2.3. Short history of PHP-Nuke</A
></H2
><P
>Francisco Burzi, describes the history of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> as follows:</P
><A
NAME="AEN1881"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>PHP-Nuke is a free software, released under the <A
HREF="http://www.gnu.org/licenses/licenses.html"
TARGET="_top"
>GNU  GPL License</A
>, version 2.0. <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> is the result of many years administrating a news site called <A
HREF="http://linuxpreview.org"
TARGET="_top"
>Linux Preview</A
>. First, around August 1998, I wrote my own code in <SPAN
CLASS="APPLICATION"
>Perl</SPAN
> called NUKE and used it for about 1 year, then my site grew big, so I needed a more powerfull system and decided to use Slash, the same used in the <A
HREF="http://www.slashdot.org"
TARGET="_top"
>Slashdot</A
> site. It's good, but you realy need to know <SPAN
CLASS="APPLICATION"
>Perl</SPAN
> to modify it, need too many modules, need to load a damn daemon that sucks all your <ACRONYM
CLASS="ACRONYM"
>CPU</ACRONYM
> power. My Pentium III just appeared to be a 386 each minute the daemon made its work.</P
><P
>Well, then I discovered Thatware, a good project to have a news site under <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
>. I learned <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> in less than a week and began modifying it. There are too many mods to mention, it was practicaly a rewrite. I added some cool stuff, deleted some others and after more than 380 hours of hard work in 3 weeks! <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> was born.</P
><P
>On August 17, 2000 I sold LinuxPreview.org to LinuxAlianza.com and now I have all the time to dedicate to the development of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>.</P
><P
>From January 2001 to January 2002, <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> has been financially supported by MandrakeSoft, the folks that made <SPAN
CLASS="PRODUCTNAME"
>Mandrake</SPAN
> <SPAN
CLASS="PRODUCTNAME"
>Linux</SPAN
>. This gave me and <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> a lot of oxygen and made possible a lot of stuff.</P
><P
>Now, I'm alone with this killer project. There is a lot of help from the people that use and develop modules and themes. Now, <A
HREF="http://phpnuke.oeg"
TARGET="_top"
>phpnuke.org</A
> is a big site with a lot of users and helpful information for any user around the world. There are also strong users community sites in almost any language you can imagine. Just go to <A
HREF="http://phpnuke.oeg"
TARGET="_top"
>phpnuke.org</A
> and enjoy this great community! </P
></BLOCKQUOTE
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="COMMUNITIES"
>2.4. The <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Communities</A
></H2
><P
>A careful look is due to the true value of PHP-Nuke, that is the communities that you will find all around. Thanks to the voluntary job of these persons, of these sites, <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> has become a well-known system and it is always thanks to them that <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> is a multilanguage system that supports more than 25 languages. </P
><P
>Even the modules have been created mostly from developers in external communities and have, in second round, been included in new distributions of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. </P
><P
>There are communities out there who are solely devoted to the creation of new graphical themes of PHP-Nuke, to technical support, file mirroring as well as a real lot of multilingual communities that take care of their members informing them in their local language, thus creating new personal ties and more focused projects. </P
><P
></P
><UL
><LI
><P
><A
HREF="http://www.nukeforums.com"
TARGET="_top"
>Nukeforums.com</A
>: Technical support to <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>.</P
></LI
><LI
><P
><A
HREF="http://www.nukecops.com"
TARGET="_top"
>Nukecops</A
>: Official <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> development team.</P
></LI
><LI
><P
><A
HREF="http://www.karakas-online.de/forum/phpnuke.html"
TARGET="_top"
>Karakas-Online <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Forum</A
>: Chris' <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Forum.</P
></LI
><LI
><P
><A
HREF="http://www.nukedownloads.com"
TARGET="_top"
>Nukedownloads.com</A
>: File mirror for downloads.</P
></LI
><LI
><P
><A
HREF="http://www.nukeresources.com"
TARGET="_top"
>nukeresources.com</A
>: Downloads</P
></LI
><LI
><P
><A
HREF="http://www.nukefixes.com"
TARGET="_top"
>nukefixes.com</A
>: Fixes for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> bugs.</P
></LI
><LI
><P
><A
HREF="http://www.nukesecurity.com"
TARGET="_top"
>nukesecurity.com</A
>: <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> security.</P
></LI
><LI
><P
><A
HREF="http://www.somara.com"
TARGET="_top"
>Somara.com</A
>: Themes and graphics.</P
></LI
><LI
><P
><A
HREF="http://www.nukethemes.com"
TARGET="_top"
>Nukethemes.com</A
>: Themes and graphics.</P
></LI
><LI
><P
><A
HREF="http://www.ecomjunk.com"
TARGET="_top"
>Ecomjunk.com</A
>: Addons and modules.</P
></LI
><LI
><P
><A
HREF="http://www.nukeaddn.com"
TARGET="_top"
>Nukeaddn.com</A
>: Addons and modules.</P
></LI
></UL
><P
>Communities in Italian language: </P
><P
></P
><UL
><LI
><P
><A
HREF="http://www.spaghettibrain.com"
TARGET="_top"
>Spaghettibrain.com</A
></P
></LI
><LI
><P
><A
HREF="http://www.claudiodemarinis.it"
TARGET="_top"
>Claudiodemarinis.it</A
></P
></LI
><LI
><P
><A
HREF="http://www.phpnuke.it"
TARGET="_top"
>PHPnuke.it</A
></P
></LI
><LI
><P
><A
HREF="http://www.splatt.it"
TARGET="_top"
>Splatt.it</A
></P
></LI
><LI
><P
><A
HREF="http://www.nukeitalia.com"
TARGET="_top"
>Nukeitalia.com</A
></P
></LI
></UL
><P
>Thanks to the work of these portals and single persons we have more than 500 different modules and blocks that may be used to personalize our portal, in areas varying from the weather (<A
HREF="#PHP-NUKE-METEOSAT-BLOCK"
>Section 8.2.2</A
>) to e-commerce (<A
HREF="#PHP-NUKE-ECOMMERCE-MODULE"
>Section 8.3.14</A
>), from gallery (<A
HREF="#PHP-NUKE-GALLERY-MODULE"
>Section 8.3.5</A
>) to chat realized in flash and videogames in Java, all included in the layout of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. </P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="WHYPHPNUKE"
>2.5. Why use <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> and not static HTML pages</A
></H2
><P
></P
><UL
><LI
><P
>Because managing large sites with only static HTML pages is dangerous for your health.</P
></LI
><LI
><P
>Because through the dynamic pages, users can interact (Forum, chat)</P
></LI
><LI
><P
>Because through the dynamic pages we can offer value added services (restricted areas, various services based on user classification...) </P
></LI
><LI
><P
>Because the information is more easily catalogued.</P
></LI
><LI
><P
>Because with a few <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> pages we recall a lot of information.</P
></LI
><LI
><P
>Because keeping the contents up-to-date does not demand particular technical expertise and can be managed by anyone (by Davis Batistes).</P
></LI
><LI
><P
>It is the simplest way to pull over a complete portal, thanks to its open source engine, it allows anyone to implement new modules or to modify and to personalize existing modules. (by Micione, <A
HREF="http://www.vizzani.net"
TARGET="_top"
>www.vizzani.net</A
>)</P
></LI
><LI
><P
>It is very intuitive and easy to learn (by Anonymous)</P
></LI
><LI
><P
>It is  easy to modify by those who intend to personalize the program (By Arus)</P
></LI
><LI
><P
>It is  easy to use by the lesser experts among us.</P
></LI
></UL
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PHP-NUKE-FORKS"
>2.6. The <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> forks</A
></H2
><P
>There are several CMS systems, which are PHPNuke forks; among the most famous, we can mention <A
HREF="http://www.postnuke.com"
TARGET="_top"
>Post-Nuke</A
>, <A
HREF="http://sourceforge.net/projects/envolution"
TARGET="_top"
>Envolution</A
>, <A
HREF="http://sourceforge.net/projects/myphpnuke"
TARGET="_top"
>MyPHPNuke</A
> and <A
HREF="http://www.xoops.org"
TARGET="_top"
>Xoops</A
>.</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-VS-POST-NUKE"
>2.6.1. PHP-Nuke vs. Post-Nuke</A
></H3
><P
>Post-Nuke is another Content Management System (CMS) similar to <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. Whilst PostNuke is a fork of PHP-Nuke, the entire core of the product has been replaced, with the aim of making it more secure and stable, and able to work in high-volume environments with ease.</P
><P
>Some of the highlights of PostNuke are, according to its developers (in <A
HREF="http://developing.postnukemodules.com"
TARGET="_top"
>Post-Nuke Modules</A
>):</P
><P
></P
><UL
><LI
><P
>Customisation of all aspects of the website's appearance through themes, including CSS support.</P
></LI
><LI
><P
>The ability to specify items as being suitable for either a single or all languages.</P
></LI
><LI
><P
>The best guarantee of displaying your webpages on all browsers due to HTML 4.01 transitional compliance.</P
></LI
><LI
><P
>A standard API and extensive documentation to allow for easy creation of extended functionality through modules and blocks.</P
></LI
></UL
><P
>The merits of Post-Nuke, as compared to those of PHP-Nuke, have been subject of controversial discussion among fans of both CMSs. We cannot give an objective opinion, since we are biased towards <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> However, we will try to give you an idea:</P
><P
>Even its critics will agree that, for a portal whose purpose is to make information publicly accessible, <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> is a very good solution. In comparison to Post-Nuke, most people will also find that <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> has many more modules available. However, some will argue that most of them seem geared toward the average end user and not a business or corporate environment.</P
><P
>On the plus side, PostNuke has a very detailed strict user permissions system allowing you to limit access to every module and area of your site to a general group or a specific user. The permissions system allows you to create groups and users with special permissions. You can add a user to one or many of these groups to give a variety of complex permissions easily. This is handy if you need moderators, sub admins, and other people helping manage a commercial site and wish to limit admin access. This may make PostNuke more appealing to a professional site - but see the Your Account Tweak module (<A
HREF="#NSN-YOUR-ACCOUNT-TWEAK-MODULE"
>Section 8.3.3</A
>), the Approve Membership module  ( <A
HREF="#PHP-NUKE-APPROVE-MEMBERSHIP-MODULE"
>Section 8.3.4</A
>), the eCommerce modules (<A
HREF="#PHP-NUKE-ECOMMERCE-MODULE"
>Section 8.3.14</A
>) or the Project Management WorkBoard module (<A
HREF="#PHP-NUKE-WORKBOARD-MODULE"
>Section 8.3.15</A
>)  before you draw premature conclusions. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
><P
>Here are some PostNuke modules that are popular among business end users:</P
><P
></P
><UL
><LI
><P
><A
HREF="http://pnapi.com"
TARGET="_top"
>Xanthia Theme Engine</A
></P
></LI
><LI
><P
><A
HREF="http://pn.arising.net/ce"
TARGET="_top"
>ContentExpess Content management</A
></P
></LI
><LI
><P
><A
HREF="http://postnuke.wunderlin.net"
TARGET="_top"
>Static Content Management</A
></P
></LI
><LI
><P
><A
HREF="http://postcalendar.tv"
TARGET="_top"
>PostCalendar</A
></P
></LI
><LI
><P
><A
HREF="http://www.stutchbury.net"
TARGET="_top"
>FormExpress Forms Generator</A
></P
></LI
><LI
><P
><A
HREF="http://smiatek.com"
TARGET="_top"
>pnAddressBook (Palm Style)</A
></P
></LI
><LI
><P
><A
HREF="http://www.olos.nl"
TARGET="_top"
>LDAP</A
></P
></LI
><LI
><P
><A
HREF="http://www.sitescandinavia.net"
TARGET="_top"
>NukeOWL</A
></P
></LI
><LI
><P
><A
HREF="http://www.itsallbutstraw.com"
TARGET="_top"
>PNphpBB2</A
></P
></LI
></UL
><P
>However, PostNuke seems to be caught prisoner of its own development impetus: it changed so fast, so often, and made code break backward compatibility in newer versions so often, that it became difficult even for seasoned webmasters to follow it. Lack of compatibility even between adjacent versions and rumours on its development being suspended, has robbed the nerve of quite a few people, who then turned back to <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> for its great community, support, continuing, smooth development and vast collection of modules. The following quote, taken from <A
HREF="http://www.nukecops.com/article65.html"
TARGET="_top"
>History of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> and Post-Nuke</A
>, reflects this situation:</P
><A
NAME="AEN2161"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>I spent a month trying to customize Post-Nuke for a client, and then I gave up. It was too hard and the support was non-existent. Although you'll find many people in the community who want to help you, you'll find no one who has experience with the particular version you've got.</P
></BLOCKQUOTE
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Is Post-Nuke more secure than PHP-Nuke?</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The security argument is often heard in favour of Post-Nuke. However, a commited cracker  will probably not encounter considerably more  difficulties in cracking Post-Nuke, than PHP-Nuke, as the following testimonial, taken from the discussion in <A
HREF="http://www.nukecops.com/article65.html"
TARGET="_top"
>History of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> and Post-Nuke</A
>, illustrates:</P
><A
NAME="AEN2168"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>I have a fair few associates who are still hackers, and they can crack into any Post-Nuke site in 20 seconds flat - I've timed them - and they've had full - note: FULL access to the administration section when they have. The fastest I've seen them hack the least secure <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> over the past year, is 30 seconds approx. (32 seconds to be precise). That doesn't sound like <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> is less secure to me.</P
><P
>The latest version of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> (6.5) prior to it's RC1 with the new security procedures in it, it took them 5 minutes to hack into it.</P
></BLOCKQUOTE
></TD
></TR
></TABLE
></DIV
><P
>Of course, 5 minutes will not make you sleep any more quiet than with Post-Nuke, but the Web is a dangerous place by construction and and the point is of relative, not absolute nature. <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> has improved its security even more since then. For more details on <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> security, we refer you to <A
HREF="#HOW-SECURE-IS-PHP-NUKE"
>Section 23.1</A
>, where we will talk about PHP-Nuke's past security vulnerabilities, its new security procedures and what you can do to enhance its security even further.</P
><P
>We cannot go into more details on PostNuke, since they would easily fill another book. Perhaps the best test is to visit the homepages of both projects, <A
HREF="http://phpnuke.org"
TARGET="_top"
>PHP-Nuke</A
> and <A
HREF="http://www.postnuke.com"
TARGET="_top"
>PostNuke</A
> - and decide for yourself which one you like best. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_smile.png"></SPAN
> </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-VS-XOOPS"
>2.6.2. PHP-Nuke vs. XOOPS</A
></H3
><P
><A
HREF="http://www.xoops.org"
TARGET="_top"
>XOOPS</A
> is a dynamic OO (Object Oriented) based open source portal script written in <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
>. According to its developers, XOOPS is the &#8220;ideal tool for developing small to large dynamic community websites, intra-company portals, corporate portals, weblogs and much more&#8221; (see <A
HREF="http://www.xoops.org/general/index.php"
TARGET="_top"
>About XOOPS</A
>). The developers also tell the following about their goals:</P
><A
NAME="AEN2208"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>The goal of the XOOPS team is to create a Content Management System (CMS) for users and developers that installs out of the box offering unparalleled ease of use, support and management. The XOOPS CMS will be extendable by the use of modules installable through a unified admin interface. The ultimate goal of the XOOPS team is to take the best features of current CMS's and roll them into an Open Source CMS that's easy to use, extendable and unparalleled in the Free/Open Source Community.</P
></BLOCKQUOTE
><P
>XOOPS is (see <A
HREF="http://www.xoops.org/general/features.php"
TARGET="_top"
>XOOPS Features List</A
>):</P
><P
></P
><UL
><LI
><P
>Database-driven: XOOPS uses relational databases (currently MySQL) to store data required for running a web-based content management system (compare with <A
HREF="#WHATIS-PHPNUKE"
>Section 2.2</A
>).</P
></LI
><LI
><P
>Fully Modularized: Modules can be installed/uninstalled/ativated/deactivated with a click using the XOOPS module administration system (compare with <A
HREF="#MODULE-MANAGEMENT"
>Section 9.3</A
>).</P
></LI
><LI
><P
>Personalization: Registered users can edit their profiles, select site themes, upload custom avatars, and much more (compare with <A
HREF="#FRONTEND"
>Chapter 6</A
>)!</P
></LI
><LI
><P
>User Management: The ability to search for users by various criteria, send email and private messages to users through a template-based messaging system (compare with <A
HREF="#FIG-PRIVATE-MESSAGES"
>Figure 6-4</A
>).</P
></LI
><LI
><P
>Supported World-wide: The XOOPS community has more than dozen official support sites around the world for support of non-English speaking users (compare with <A
HREF="#COMMUNITIES"
>Section 2.4</A
>).</P
></LI
><LI
><P
>Multi-byte Language Support: Fully supports multi-byte languages, including Japanese, Simplified and Traditional Chinese, Korean, etc (compare with <A
HREF="#MODIFYING-PHP-NUKE-TEXTS"
>Chapter 13</A
>).</P
></LI
><LI
><P
>Versatile Group Permissions System: Powerful and user-friendly permissions system which enables administrators to set permissions by group (compare with <A
HREF="#NSN-YOUR-ACCOUNT-TWEAK-MODULE"
>Section 8.3.3</A
>).</P
></LI
><LI
><P
>Theme-based skinnable interface: XOOPS is driven by a powerful theme system. Both admins and users can change the look of the entire web site with just a click of a mouse. There are also over 60 themes available for download (compare with <A
HREF="#CUSTOMIZATION"
>Chapter 14</A
>)!</P
></LI
></UL
><P
>The OO (Object Oriented) approach of XOOPS to Web Content Management is innovative, but also controversial. Franzisco Burzi writes in <A
HREF="http://www.nukecops.com/article65.html"
TARGET="_top"
>History of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> and Post-Nuke</A
>:</P
><A
NAME="AEN2260"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>About saying that OOP (Object Oriented Programming) is a good stuff and makes stuff more stable, modular, or whatever else you want... False. OOP is good for very big projects, which is not the case of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> (I mean VERY BIG projects) with a lot of reusable code. BUT... any good <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> programmer knows that the use (or worse, the intense use) of objects/classes in a <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> script isn't good. <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> is not efficient managing objects/classes. At least it's less efficient than managing custom user created functions. Any decent <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> 4 book will say this to you: If you can manage to have your software working without using OOP, there isn't any reason to use objects, because of performance issues.</P
></BLOCKQUOTE
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="XOOPS-VS-POST-NUKE"
>2.6.3. XOOPS vs. Post-Nuke</A
></H3
><P
>We cannot go into the details of a comparison between XOOPS and Post-Nuke, as this would be rather off-topic here. For a discussion of XOOPS vs. Post-Nuke, see <A
HREF="http://www.xoops.org/modules/newbb/viewtopic.php?topic_id=14536&#38;forum=3"
TARGET="_top"
>XOOPS vs. Post-Nuke</A
>. There, among lists of pros and contras, you will read this:</P
><A
NAME="AEN2277"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>I'm an architect. My teacher always told me that there are no "bad tools". There are only "bad craftsmen".</P
><P
>Find your own way to work - it's not a race, not a competition, you don't need to have the better machine to win. The best sites won't flash with decorations, tons of blocks and gifs. They are made with the same basic tools, CLEAR AND WISE IDEA, and lots of custom made details.</P
><P
>Innovate - not imitate. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_smile.png"></SPAN
> </P
></BLOCKQUOTE
></DIV
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="INSTALLATION"
></A
>Chapter 3. How to install PHP-Nuke</H1
><P
>The screenshots regarding the installation procedure, contrary to those of the other chapters, refer to the <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> platform. This is so in an effort to reduce the number of misunderstandings and ulterior help requests from the <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> community. (Judging from the feedback we receive, the <SPAN
CLASS="PRODUCTNAME"
>Linux</SPAN
> and FreeBSD community seem to be more able to deal with installation problems in this respect). </P
><P
>For the installation of <A
HREF="http://www.php.net"
TARGET="_top"
>PHP</A
>+ <A
HREF="http://www.mysql.org"
TARGET="_top"
>MySQL</A
>+ <A
HREF="http://www.apache.org"
TARGET="_top"
>Apache</A
>, <A
HREF="http://www.phpmyadmin.net/"
TARGET="_top"
>PHPMyAdmin</A
> etc. refer to <A
HREF="#TOOLS"
>Chapter 28</A
> where you will find notes and links to useful tools in order to emulate <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> on your client.</P
><P
>These instructions are valid for all <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> versions from 6.0 onwards.</P
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PREREQUISITES"
>3.1. Prerequisites</A
></H2
><P
>In the INSTALL file of PHP-Nuke, we read the following about its requirements:</P
><A
NAME="AEN2318"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>In order to setup <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> the folowing prerequisits are necessary.</P
><P
></P
><UL
><LI
><P
><A
HREF="http://www.linux.com"
TARGET="_top"
>Linux</A
>, installed and working properly.</P
></LI
><LI
><P
><A
HREF="http://www.apache.org"
TARGET="_top"
>Apache Web Server</A
>.</P
></LI
><LI
><P
><A
HREF="http://www.php.net"
TARGET="_top"
>PHP</A
> version 4.1.x or better (mod_php) Apache module.</P
></LI
><LI
><P
><A
HREF="http://www.mysql.com"
TARGET="_top"
>MySQL database server</A
></P
></LI
></UL
><P
>...The above doesn't mean it will not work with other configurations, OS's, DB's, etc, but we only provide INSTALL instructions for the above configuration. In fact <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> works under <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> (all), FreeBSD, OS/2, MacOS, etc.</P
></BLOCKQUOTE
><DIV
CLASS="IMPORTANT"
><P
></P
><TABLE
CLASS="IMPORTANT"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.png"
HSPACE="5"
ALT="Important"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>PHP 4.1.0 or later needed!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>From the INSTALL file, we see that you must have at least <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> 4.1.0 to use <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.5 and later. This is an important piece of information that you should ckeck before proceeding. See <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=36"
TARGET="_top"
>Warning: Invalid argument supplied for foreach()</A
>.</P
></TD
></TR
></TABLE
></DIV
><P
>You see, it is always a good idea to read the INSTALL file that comes with a software package.<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
><P
>To see the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> version you are running and do also a small test on your configuration, you can run the test.php file as described in <A
HREF="#TEST-PHP"
>Section 3.9.1.1</A
>.</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>PHP-Nuke and databases other than MySQL</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>From <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> version 5.3,  Francisco added a new SQL abstraction layer. It enables <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> to support databases other than MySQL, like mSQL, PostgreSQL, PostgreSQL_local, ODBC, ODBC_Adabas, Sybase and Interbase.</P
></TD
></TR
></TABLE
></DIV
><P
>For the Microsoft Internet Informaion Server (IIS), some tests we have done were positive, some others indicated that a special configuration was needed.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="INSTALLATION-PROCESS"
>3.2. Installation process</A
></H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="DOWNLOAD"
>3.2.1. Download</A
></H3
><P
>Well... there is little to say here, it suffices to go to a site that holds the files and download them. There is only a small remark to make: if you use <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> and download a version comprised of a file with the ending tar.gz, do not worry, your <A
HREF="http://www.winzip.com"
TARGET="_top"
>Winzip</A
> supports it without problems. Once downloaded, extract it and &#8220;throw&#8221; all its contents in a folder you created for this purpose and you call &#8220;Nuke6&#8221; or whatever ( sites from which you can download <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> are: <A
HREF="http://phpnuke.org"
TARGET="_top"
>phpnuke.org</A
>, <A
HREF="http://www.spaghettibrain.com"
TARGET="_top"
>www.spaghettibrain.com</A
> etc.).</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="UPLOAD"
>3.2.2. Upload through FTP</A
></H3
><P
>Well, now what remains is just to upload the files to the interior of our main server directory that resides on our provider. </P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Attention!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>It is highly recommended, prior to any installation steps, to verify that your provider supports <A
HREF="http://www.php.net"
TARGET="_top"
>PHP</A
> and  <A
HREF="http://www.mysql.org"
TARGET="_top"
>MySQL</A
>.</P
></TD
></TR
></TABLE
></DIV
><P
>Your ISP has already given you:</P
><P
></P
><UL
><LI
><P
>An FTP user and password: you need these for the file transfers.</P
></LI
><LI
><P
>A database user and password, as well as the name of the database server to connect to: you need them to connect your applications (like PHP-Nuke) to the database and to be able to access the administration panel of phpMyAdmin (<A
HREF="#PHPMYADMIN"
>Section 3.3</A
>).</P
></LI
></UL
><P
>For FTP in the <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> plattform, we recommend using the <A
HREF="http://www.ftpplanet.com/ftpresources/ftpmain.htm"
TARGET="_top"
>WS_FTP</A
> application. It is free for personal use and you can download it from download.com by entering the search key &#8220;ws_ftp&#8221;. For the <SPAN
CLASS="PRODUCTNAME"
>Linux</SPAN
> plattform instead, we recommend GFTP (free for all and preinstalled in all distributions), which can be run from the command line by simply typing &#8220;gftp&#8221;.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-WS-FTP-GENERAL"
></A
><P
><B
>Figure 3-1.    WS_FTP: General connection parameters.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/ws-ftp-general.png"><DIV
CLASS="CAPTION"
><P
>WS_FTP: General connection parameters.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The use of an FTP program is very simple - we will follow the procedure through 4 screens that enable us to:</P
><P
></P
><UL
><LI
><P
>Connect (<A
HREF="#FIG-WS-FTP-GENERAL"
>Figure 3-1</A
>)</P
></LI
><LI
><P
>Transfer files (<A
HREF="#FIG-WS-FTP-LOCAL-REMOTE"
>Figure 3-2</A
>)</P
></LI
><LI
><P
>Set up the permissions (see also <A
HREF="#PERMISSIONS"
>Section 3.2.3</A
>)</P
></LI
><LI
><P
>(Eventually) edit the uploaded files</P
></LI
></UL
><P
><A
HREF="#FIG-WS-FTP-GENERAL"
>Figure 3-1</A
> shows the WS_FTP General Connection Parameters screen. Entering the right values in the fields of that screen will enable you to conncet to the server where you want to upload the files.</P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Attention!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you are installing <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> locally, it is not necessary to use FTP! In this case, it suffices to copy the files into the right directory. In case you are working under Linux, it may be necessary to set the right file permissions. See <A
HREF="#PERMISSIONS"
>Section 3.2.3</A
> on how to do this.</P
></TD
></TR
></TABLE
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-WS-FTP-LOCAL-REMOTE"
></A
><P
><B
>Figure 3-2.    WS_FTP: Main screen with local and remote windows.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/ws-ftp-local-remote.png"><DIV
CLASS="CAPTION"
><P
>WS_FTP: Main screen with local and remote windows.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Once connected, the next operation is to upload the files on the remote server. With WS_FTP, as well as woth the majority of the other FTP clients, the window that contains the local files is located to the left, while the remote files are displayed in a window to the right (<A
HREF="#FIG-WS-FTP-LOCAL-REMOTE"
>Figure 3-2</A
>). You have to position your cursor on the directory that contains the files to be uploaded to the left and the directory tha has to receive them on the remote host to the right. You can do this through the graphical interface of WS_FTP.</P
><P
>As you can see in <A
HREF="#FIG-WS-FTP-LOCAL-REMOTE"
>Figure 3-2</A
>, there are also some function buttons there: the two arrows are used to upload / download files to / from the server, the other two buttons that are functionally important are &#8220;MkDir&#8221;, which creates a new directory, and &#8220;Refresh&#8221;, which updates the view of data contained in a window.</P
><P
>Don't upload all extracted  files. After extraction, you will find a structure similar to the one depicted in <A
HREF="#FIG-FILE-STRUCTURE"
>Figure 3-3</A
>.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-FILE-STRUCTURE"
></A
><P
><B
>Figure 3-3.    <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.0 file structure
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/snapshot12.png"><DIV
CLASS="CAPTION"
><P
>PHP-Nuke 6.0 file structure</P
></DIV
></P
></DIV
></DIV
></P
><P
>You don't need to upload all the files from the folder, in the main directory of your web presence you will only need to upload the contents of the html folder (so just do a doubleclick on the html folder and upload everything that is inside it). But in order to populate the database with the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> tables, you will also need to upload the sql folder too. After the database creation (see <A
HREF="#DATABASE-CREATION"
>Section 3.2.4</A
>),  you should delete this folder though - for security reasons.</P
><P
>An operation that may be useful in cases of emergency is &#8220;Edit&#8221;, which is accessible from the context menu after a right click with the mouse on the desired file. &#8220;Edit&#8221; will allow a direct modification of the file, without the intermediate step of downloading it to your computer.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PERMISSIONS"
>3.2.3. File permissions</A
></H3
><DIV
CLASS="IMPORTANT"
><P
></P
><TABLE
CLASS="IMPORTANT"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.png"
HSPACE="5"
ALT="Important"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Important</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>This process only really applies if your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> will be installed on a Linux/Unix server, if instead you will install it on <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> operating systems you don't have to do anything.</P
></TD
></TR
></TABLE
></DIV
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Permissions:</DT
><DD
><P
>Each file or directory<A
NAME="AEN2522"
HREF="#FTN.AEN2522"
><SPAN
CLASS="footnote"
>[4]</SPAN
></A
> has 3 groups of permissions associated with it: one set of Read, Write or Execute permissions for the owner (also called &#8220;user&#8221; in this context), a group and "others" respectively. The owner in our case should be the user name of your web server. The group is a user group the web server is a member of. And &#8220;others&#8221; are just &#8220;the rest&#8221;. </P
></DD
></DL
></DIV
><P
>File permissions are usually grouped together in groups of three, like this: (rwx)(rwx)(rwx). The first group are the user permissions, the second one the group permissions and the third one the permissions for &#8220;others&#8221;. A good mnemonic for this grouping is UGO (User, Group, Others). Inside each permissions group, a certain permission may or may not be present. Thus, the user (owner) of the file will usually have read and write permissions (and execute permission too, if the file is executable), but the group permissions may only allow read access and &#8220;others&#8221; may not be allowed to access the file at all, neither for reading, nor for writing or execution.</P
><P
>If you imagine that the existence of a permission is denoted by a 1, while its absence by a 0, then you end up with a representation like (111)(111)(111), where all permissions are present for all, or (000)(000)(000), where they are absent for all. Of course, any other combination is possible, for example (111)(110)100), which denotes read, write and execute permissions for the user (all 1s are present in the first grouping: (111)), read and write permissions for the group (only the first and second 1s are there in the second grouping (110)) and read permission for others (since only the first 1 is there, while the rest are 0s in the third grouping (100)).</P
><P
>Writing down a sequence of nine 0s and 1s is not very practical, so one came with the idea to interprete each one of the three groupings as a binary number. A (111) would thus mean a 7, a (110) a 6, a (100) a 4. Taken together, the sequence (111)(110)100) of the example above would be represented by the number 764. That's compact and widely used.</P
><P
>Unfortunately, it is also very cryptic, since most people didn't have much exposure to the binary number system at school, not to mention everyday life. How is one going to understand instructions like &#8220;set file permissions to 644&#8221; then?</P
><P
>Luckily, there exists an easy mnemonic for this: &#8220;4,2,1&#8221;, that is the first 1 counts as a 4, the second as a 2 and the third one as 1 - a 0 is always a 0, by the way, even in the binary system. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
><P
>Whenever you see a 1 in the first position of a permissions triple, you add a 4, whenever you see one in the second, you add a 2 and if you see it in the third, you add 1. You do this for UGO, that is for User, Group and Others and you end up with a three digit number that represents the permissions of the file.</P
><P
>Most of the time, however, you will be busy deciphering permissions, rather than formulating them yourself in this cryptic manner. So how do you go about interpreting a permissions representation like 764 that was given to you in a document like the <A
HREF="http://www.karakas-online.de/EN-Book/"
TARGET="_top"
>PHP-Nuke HOWTO</A
>? </P
><P
>For this, you will need to develop a &#8220;feeling&#8221; of how each of the three numbers (7, 6 and 4 in this example) can be written as a unique sum of 4s, 2s and 1s. For example 7 is 4+2+1, 6 is 4+2 and 4 is just 4. A 4 in the sum represents a 1 in the leftmost position. If a 4 is not present in the sum, the leftmost position is a 0. A 2 in the sum reperesents a 1 in the middle position - if there is no 2 in the sum, you just write a 0 there. Finally, a 1 in the sum represents a 1 in the rightmost position, while if there is no 1 in the sum, you write a 0 there.</P
><P
>Now if you remember that the leftmost 1 or 0 in a pattern like (111) denotes a read permission or the absence or it, a 1 or a 0 in the middle position denotes a write permission or its absence and a 1 or 0 in the leftmost position denotes an execute permission or its absence, then you can take a permissions represenation like 764 above, see that 7=4+2+1 and realize that it means (111), see that 6=4+2 (or 4+2+0, if you like) and realize that it means (110), finally see that 4=4 (or 4+0+0) and realize that it stands for (100), and you can see that 764 is equivalent to (111)(110)(100), meaning read, write and execute permissions for the user (owner), read and write permissions for the group and only read permissions for others.</P
><P
>Easy after all, isn't it? <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
><P
>For more information on permissions, see:</P
><P
></P
><UL
><LI
><P
><A
HREF="http://www.washington.edu/computing/web/publishing/permissions.html"
TARGET="_top"
>Setting Unix Permissions For Web Pages</A
></P
></LI
><LI
><P
><A
HREF="http://www.onlamp.com/pub/a/bsd/2000/09/06/FreeBSD_Basics.html"
TARGET="_top"
>An Introduction to Unix Permissions</A
></P
></LI
><LI
><P
><A
HREF="http://www.perlfect.com/articles/chmod.shtml"
TARGET="_top"
>Understanding <SPAN
CLASS="PRODUCTNAME"
>UNIX</SPAN
> permissions and chmod</A
></P
></LI
><LI
><P
><A
HREF="http://www.nyu.edu/webguide/permissions.html"
TARGET="_top"
>Tutorial: <SPAN
CLASS="PRODUCTNAME"
>UNIX</SPAN
> Permissions</A
></P
></LI
></UL
><P
>Setting up permissions on files serves the purpose of having them execute only certain operations (write, execute etc.) when called. Setting them up correctly is important for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> to operate in its full functionality. </P
><P
>The right permissions for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> are the following (for the base permissions, see <A
HREF="#PERMISSIONS2"
>Section 23.4.4</A
> in the context of security): </P
><P
></P
><UL
><LI
><P
>Files: 644</P
></LI
><LI
><P
>Directories: 755</P
></LI
></UL
><P
>Only directories that require upload access (like the forum's avatar folder, if you allow avatar upload) should be set to 777 and files that get data written to them by the program should be set to 666. </P
><P
>With <A
HREF="http://www.ftpplanet.com/ftpresources/ftpmain.htm"
TARGET="_top"
>WS_FTP</A
> you must select the files or folders on which you want to impose the permissions and, with the right mouse key, to select the option &#8220;chmod (UNIX)&#8221; (see <A
HREF="#FIG-WS-FTP-CHMOD-1"
>Figure 3-4</A
>).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-WS-FTP-CHMOD-1"
></A
><P
><B
>Figure 3-4.    WS_FTP context menu on right mouse click: chmod (UNIX)
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/ws-ftp-chmod-1.png"><DIV
CLASS="CAPTION"
><P
>WS_FTP context menu on right mouse click: chmod (UNIX)</P
></DIV
></P
></DIV
></DIV
></P
><P
>The window &#8220;Remote file permissions&#8221; will appear (see <A
HREF="#FIG-WS-FTP-CHMOD-2"
>Figure 3-5</A
>). To change the permissions on a directory as required to 755, for example, check the boxes as shown in <A
HREF="#FIG-WS-FTP-CHMOD-2"
>Figure 3-5</A
> and press &#8220;OK&#8221;.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-WS-FTP-CHMOD-2"
></A
><P
><B
>Figure 3-5.    WS_FTP Remote file permissions window
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/ws-ftp-chmod-2.png"><DIV
CLASS="CAPTION"
><P
>WS_FTP Remote file permissions window</P
></DIV
></P
></DIV
></DIV
></P
><P
>This procedure will cost you some time, but it is very important to carry out. Moreover, you will have to do it every time you insert a new file or module to your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="DATABASE-CREATION"
>3.2.4. Database creation</A
></H3
><P
>Create a database that will contain the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> tables. The name of the database should be the same name as the one you entered in config.php (see <A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysqladmin create nuke</PRE
></FONT
></TD
></TR
></TABLE
><P
>To populate the database, you have to run the nuke.sql file &#8220;through&#8221; mysql. Change to the sql directory and do from the command line:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysql -h dbhost -u dbuname -p dbname &#60; nuke.sql</PRE
></FONT
></TD
></TR
></TABLE
><P
>where dbhost, dbuname and dbname are the database host, database username and database name, exactly as entered in config.php. Just as you import nuke.sql, you can import any other MySQL dump file (see also <A
HREF="#PHPMYADMIN-NAVIGATION-BAR-SQL"
>Section 3.4.2</A
>).</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PHPMYADMIN"
>3.3. How to install <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> through phpMyAdmin</A
></H2
><P
>To be able to create a database, you must be able to administer it. A perfect instrument for doing this via a browser is phpMyAdmin.</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="WHATIS-PHPMYADMIN"
>3.3.1. What Is PHPMyadmin</A
></H3
><P
><A
HREF="http://www.phpmyadmin.net/"
TARGET="_top"
>PHPMyAdmin</A
> is a visual system for the management of a <A
HREF="http://www.mysql.org"
TARGET="_top"
>MySQL</A
> database (see <A
HREF="#FIG-PHPMYADMIN-START"
>Figure 3-6</A
>). It is written in <A
HREF="http://www.php.net"
TARGET="_top"
>PHP</A
> and serves to display the contents of the databases on the server (or client) on which MySQL is installed. Through this interface you can create new databases, modify existing ones and modify the contents of single fields.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALL-PHPMYADMIN"
>3.3.2. How to install phpMyAdmin</A
></H3
><P
>Local installation under <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> is very simple: you only need to extract the files from the archive you downloaded from the <A
HREF="http://www.phpbb.com"
TARGET="_top"
>official phpBB site</A
> and point your browser to the address <A
HREF="http://localhost/phpmyadmin"
TARGET="_top"
>http://localhost/phpmyadmin</A
>. You will then see a screen as in <A
HREF="#FIG-PHPMYADMIN-START"
>Figure 3-6</A
>.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHPMYADMIN-START"
></A
><P
><B
>Figure 3-6.    PHPMyAdmin start screen.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/phpmyadmin-start.png"><DIV
CLASS="CAPTION"
><P
>PHPMyAdmin start screen.</P
></DIV
></P
></DIV
></DIV
></P
><P
>If you are working locally, don't worry about any warnings you might get. In case you have to install phpMyAdmin on your server, e.g. when your ISP does not offer a preinstalled administration panel for the database, you must configure the config.inc.php file that comes with it:</P
><P
>Supposing that your data are:</P
><P
></P
><UL
><LI
><P
>IP of the database server: 156.123.22.34</P
></LI
><LI
><P
>User: Pippo</P
></LI
><LI
><P
>Password: Topolino</P
></LI
><LI
><P
>Database name: Minnie</P
></LI
></UL
><P
>then the necessary entries in config.inc.php look like this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$cfgServers[1]["host"] = "156.123.22.34"; // MySQL hostname
$cfgServers[1]["port"] = ""; // MySQL port - leave blank for default port
$cfgServers[1]["adv_auth"] = false; // Use advanced authentication?
$cfgServers[1]["stduser"] = ""; // MySQL standard user (only needed with advanced auth)
$cfgServers[1]["stdpass"] = ""; // MySQL standard password (only needed with advanced auth)
$cfgServers[1]["user"] = "Pippo"; // MySQL user (only needed with basic auth)
$cfgServers[1]["password"] = "Topolino"; // MySQL password (only needed with basic auth)
$cfgServers[1]["only_db"] = "Minnie"; // If set to a db-name, only this db is accessible
$cfgServers[1]["verbose"] = ""; // Verbose name for this host - leave blank to show the hostname
$cfgServers[1]["bookmarkdb"] = ""; // Bookmark db - leave blank for no bookmark support
$cfgServers[1]["bookmarktable"] = ""; // Bookmark table - leave blank for no bookmark support</PRE
></FONT
></TD
></TR
></TABLE
><P
>In the config.inc.php you will find more configuration parameters that are repeated. They serve to manage DBs in various hosts with the same interface.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PHPMYADMIN2"
>3.4. phpMyAdmin: How to administer MySQL via Web</A
></H2
><P
>Once you have opened your phpMyAdmin (to do this, if you are working locally, you would have to open <A
HREF="http://localhost/phpmyadmin"
TARGET="_top"
>http://localhost/phpmyadmin</A
> with your browser), you will get a screen that offers you the possibilities of </P
><P
></P
><UL
><LI
><P
>Select a database through a drop-down list.</P
></LI
><LI
><P
>Create a new database</P
></LI
></UL
><P
>as in <A
HREF="#FIG-PHPMYADMIN-SELECT-DATABASE"
>Figure 3-7</A
>.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHPMYADMIN-SELECT-DATABASE"
></A
><P
><B
>Figure 3-7.    phpMyAdmin: Select database.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/phpmyadmin-select-database.png"><DIV
CLASS="CAPTION"
><P
>phpMyAdmin: Select database.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Once you have chosen the desired operation, you arrive at the administration interface of your phpMyAdmin. Newer versions contain a navigation bar, located at the top (<A
HREF="#FIG-PHPMYADMIN-NAVIGATION-BAR"
>Figure 3-8</A
>), offering the following options: </P
><P
></P
><UL
><LI
><P
>Structure: See the database structure.</P
></LI
><LI
><P
>SQL: Execute SQL operations (e.g. load an existing database).</P
></LI
><LI
><P
>Export: Make a backup of the database.</P
></LI
><LI
><P
>Search: Search for data.</P
></LI
><LI
><P
>Query: Display the structure of an SQL query (useful for programmers).</P
></LI
><LI
><P
>Drop: Delete a database (be careful!).</P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHPMYADMIN-NAVIGATION-BAR"
></A
><P
><B
>Figure 3-8.    phpMyAdmin: Navigation bar.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/phpmyadmin-navigation-bar.png"><DIV
CLASS="CAPTION"
><P
>phpMyAdmin: Navigation bar.</P
></DIV
></P
></DIV
></DIV
></P
><P
>As far as we are concerned here, we only need to explain the first 3 items:</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHPMYADMIN-NAVIGATION-BAR-STRUCTURE"
>3.4.1. phpMyAdmin navigation bar: Structure</A
></H3
><P
>&#8220;Structure&#8221; presents a list of the available tables in the database, with the follwing accompanying options:</P
><P
></P
><UL
><LI
><P
>Browse: shows the content of the table.</P
></LI
><LI
><P
>Select: is used to make SQL queries to the table.</P
></LI
><LI
><P
>Insert: is used to insert new data into the table.</P
></LI
><LI
><P
>Properties: displays the structure of the table, ie. its fields, their type, length etc.</P
></LI
><LI
><P
>Drop: deletes the table (be careful!).</P
></LI
><LI
><P
>Empty: empties the content of the table, but does not delete the table itself, it leaves it empty (be careful again!).</P
></LI
></UL
><P
>The most frequently asked questions in this context are:</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>How do I delete a single record of the table?</DT
><DD
><P
>Select the table, click on &#8220;Browse&#8221; and select &#8220;Delete&#8221; for the record in question.</P
></DD
><DT
>If the password is stored encrypted with MD5, how do I change it?</DT
><DD
><P
>Select the table, click on &#8220;Browse&#8221;, then on &#8220;Edit&#8221; and enter, in clear text, the desired password. Select from the drop-down &#8220;Function&#8221; menu besides the field the desired function, in our case &#8220;MD5&#8221; (see <A
HREF="#FIG-PHPMYADMIN-FIELD-FUNCTIONS"
>Figure 3-9</A
>). See also <A
HREF="#ADMINISTRATOR-PASSWORD-LOST"
>Section 3.9.17</A
>.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHPMYADMIN-FIELD-FUNCTIONS"
></A
><P
><B
>Figure 3-9.    phpMyAdmin: field functions.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/phpmyadmin-field-functions.png"><DIV
CLASS="CAPTION"
><P
>phpMyAdmin: field functions.</P
></DIV
></P
></DIV
></DIV
></P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHPMYADMIN-NAVIGATION-BAR-SQL"
>3.4.2. phpMyAdmin navigation bar: SQL</A
></H3
><P
>&#8220;SQL&#8221; serves the purpose of &#8220;loading&#8221; whole datasets or already existing databases with one action. The datasets (or the database) are presumed to be already available in a MySQL &#8220;dump file&#8221;. This is a text file containing all the necessary SQL queries that must be sent to the database server, in order for the datasets or database to be created. An example of such a dump file is the nuke.sql file that comes with <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> and contains all the database instructions for the tables to be created during installation (see <A
HREF="#INSTALL-DB"
>Section 3.4.5</A
>).</P
><P
>The use of this function is very simple: just search your system for the dump file you want to load, by hitting the &#8220;Browse&#8221; button (<A
HREF="#FIG-PHPMYADMIN-SQL"
>Figure 3-10</A
>). MySQL dump files usually come with the &#8220;.sql&#8221; ending, but &#8220;.sql.php&#8221;, &#8220;.txt&#8221; or even &#8220;.php&#8221; are also in use. Whether the file is a MySQL dump file or not, can only be told by inspection: open it with a <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=122"
TARGET="_top"
>decent text editor</A
> (see <A
HREF="#EDITING-PHP-NUKE-FILES"
>Chapter 11</A
>) and if the first lines look like </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># MySQL dump 6.6
#
...
#
# Table structure for table 'xxxxx'
#
CREATE TABLE xxxxx ...
...
#
# Dumping data for table 'xxxxx'
#
INSERT INTO xxxxx ...</PRE
></FONT
></TD
></TR
></TABLE
><P
>i.e. if it contains CREATE and/or INSERT SQL statements, then it is a dump file (see also <A
HREF="#PHPMYADMIN-NAVIGATION-BAR-EXPORT"
>Section 3.4.3</A
>).</P
><P
>This function is useful when you want to create whole databases and fill them with data in one step, but it is also very useful when you want to add data to an existing database. However, this does not mean that it will always succeed: especially if the dump files are very large, this operation my exceed the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> <ACRONYM
CLASS="ACRONYM"
>CPU</ACRONYM
> limit (usually set to 30 sec. by the ISPs). (see, for example, <A
HREF="#BACKUP-MYSQL-USING-BROWSER"
>Section 27.16</A
>)</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHPMYADMIN-SQL"
></A
><P
><B
>Figure 3-10.    phpMyAdmin: SQL function.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/phpmyadmin-SQL.png"><DIV
CLASS="CAPTION"
><P
>phpMyAdmin: SQL function.</P
></DIV
></P
></DIV
></DIV
></P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Beware of long .sql files!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>You can of course use phpMyAdmin to comfortably import any MySQL dump file, i.e. from a previous backup of an existing installation with thousands of forums posts. In this case, the import may take longer than the limit on the execution time of <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> scripts that most ISPs set (usually 30 sec.). You will end up with a half-filled database! </P
><P
>In this case, either cut the file up into smaller chucks and use phpMyAdmin to load the smaller files, or insert the text piecewise for execution in the text area field of phpMyAdmin that is there for this purpose, or, as a last resort, do it from the command line, as shown in <A
HREF="#DATABASE-CREATION"
>Section 3.2.4</A
>. </P
><P
>See also <A
HREF="http://forums.devshed.com/archive/4/2001/07/2/17971"
TARGET="_top"
>how to import a '.sql' (&#62;3M) file to mysql database with phpmyadmin?</A
>, <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=16590"
TARGET="_top"
>Importing .sql files into an existing database in phpmyadmin</A
>.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHPMYADMIN-NAVIGATION-BAR-EXPORT"
>3.4.3. phpMyAdmin navigation bar: Export</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHPMYADMIN-DATABASE-DUMP"
></A
><P
><B
>Figure 3-11.    phpMyAdmin: database dump.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/phpmyadmin-database-dump.png"><DIV
CLASS="CAPTION"
><P
>phpMyAdmin: database dump.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The &#8220;Export&#8221; function is useful for obtaining backups of our database (we recall that this is also possible to do from the administration panel of PHP-Nuke, see <A
HREF="#ADMINISTRATION-FUNCTIONS"
>Section 7.1</A
>). The management console we get for this function is quite detailed (<A
HREF="#FIG-PHPMYADMIN-DATABASE-DUMP"
>Figure 3-11</A
>):</P
><P
>In the central area, we have a list of the database tables, while to the right we have the backup options:</P
><P
></P
><UL
><LI
><P
>Structure only: backs up the structure of the database (tables, their fields and their properties), but not the data it contains (i.e. the tables are left empty).</P
></LI
><LI
><P
>Structure and data: will save not only the structure, as above, but the data in the tables as well.</P
></LI
><LI
><P
>Data only: will save only the data, but not the structure.</P
></LI
><LI
><P
>XML: saves the database in an XML format.</P
></LI
></UL
><P
>The options that appear in the lower part of the screen have to do with the extra features the created backup file should have:</P
><P
></P
><UL
><LI
><P
>Add 'Drop Table': Prepends an instruction to destroy any existing table with that name to the instructions that create that table. For example, if we already have a table &#8220;nuke_authors&#8221; in our database, this option will take care of removing it, before it loads the structure and/or data for a table with the same name. Otherwise, attempting to import a file that contains structure and/or data for nuke_authors will result in an error, since the table will already exist. You should check this option if you are reinstalling <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> over a previous unsuccessful instalation and you think you might already have some tables there.</P
></LI
><LI
><P
>Save as file: will save the backup as a file (which will be compressed accordingly, with either ZIP or GZIP, if the &#8220;zipped&#8221; or &#8220;gzipped&#8221; boxes are checked - other versions of phpMyAdmin may only offer a &#8220;bzip&#8221; compression).</P
></LI
></UL
><P
>If we don't select any table from the table list, phpMyAdmin will deduce that we want to save all tables. In case you want to select only some of them, just click on the ones you want with the left mouse button, keeping the CTRL button pressed.</P
><P
>To export a database from the command-line, without the use of the graphical tool of phpMyAdmin, you just do:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysqldump -u dbuser -h dbhost -p dbname &#62; dbdump.sql</PRE
></FONT
></TD
></TR
></TABLE
><P
>where dbuser, dbhost and dbname are the database user, host and name respectively, exactly as entered in config.php (<A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>).</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHPMYADMIN-OTHER-COMMANDS"
>3.4.4. phpMyAdmin: other commands</A
></H3
><P
>Yet another couple of instructions: In order to see the structure of a table, you only need to click on the one that is marked in the left bar and you will see all its fields and modification options appear in the central part (<A
HREF="#FIG-FORUM-TOPICS"
>Figure 3-12</A
>).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-FORUM-TOPICS"
></A
><P
><B
>Figure 3-12.    phpMyAdmin: table forum_topics.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/snapshot19.png"><DIV
CLASS="CAPTION"
><P
>phpMyAdmin: table forum_topics.</P
></DIV
></P
></DIV
></DIV
></P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>ATTENTION!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The DROP command eliminates all the contents of the DB, the table or the single field, use it  with caution.</P
></TD
></TR
></TABLE
></DIV
><P
>To learn more about the possibilities that phpMyAdmin offers you in administering your databases, see <A
HREF="http://www.devshed.com/Server_Side/PHP/Doing_More_phpMyAdmin/page1.html"
TARGET="_top"
>Doing More With phpMyAdmin (Part 1)</A
> and <A
HREF="http://www.devshed.com/Server_Side/PHP/Doing_More_phpMyAdmin_part2/page1.html"
TARGET="_top"
>Doing More With phpMyAdmin (Part 2)</A
>. The first part explains how to obtain the software, install and configure it for secure access, and use it for tasks such as managing multiple servers, manipulating user privileges, viewing reports on server activity, and exporting MySQL records into different formats. The second part explains the more advanced aspects of the application, including using it for transformations, maintaining a history of all the SQL queries executed in the phpMyAdmin session, defining relations between tables to create JOINs automatically, creating E-R diagrams in PDF format, and bookmarking important queries for future reference.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALL-DB"
>3.4.5. How to install the DB of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> with PHPMyadmin</A
></H3
><P
>Create a database that will contain the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> tables (see <A
HREF="#FIG-PHPMYADMIN-CREATE-DATABASE"
>Figure 3-13</A
>). The name of the database should be the same name as the one you entered in config.php (see <A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>). </P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHPMYADMIN-CREATE-DATABASE"
></A
><P
><B
>Figure 3-13.    phpMyAdmin: Create database.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/phpmyadmin-create-database.png"><DIV
CLASS="CAPTION"
><P
>phpMyAdmin: Create database.</P
></DIV
></P
></DIV
></DIV
></P
><P
>To populate the database, you have to import the nuke.sql file, exactly as we showed in <A
HREF="#PHPMYADMIN-NAVIGATION-BAR-SQL"
>Section 3.4.2</A
> for general database dump files. Clicking on the left bar, depending on the database you selected, you will see a list menu coming up, showing the structure of the database (and, on the same time, the central page will show the enlarged structure of the database), with a series of options, all of them in the bottom of the page (see <A
HREF="#FIG-PHPMYADMIN-TABLE-STRUCTURE"
>Figure 3-14</A
>). It is these options we are interested in when installing <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHPMYADMIN-TABLE-STRUCTURE"
></A
><P
><B
>Figure 3-14.    phpMyAdmin: table structure and selection.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/phpmyadmin-table-structure.png"><DIV
CLASS="CAPTION"
><P
>phpMyAdmin: table structure and selection.</P
></DIV
></P
></DIV
></DIV
></P
><P
>What you have to do now, is to click on &#8220;browse&#8221; and go search for the .sql file that contains the instructions that build the structure of the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> database (see <A
HREF="#FIG-PHPMYADMIN-SQL-QUERY"
>Figure 3-15</A
>). Once found, it suffices to click on &#8220;Go&#8221; and the database will be installed. Of course, if there are errors, they will be reported at the end of the installation procedure. And of course, the same holds for the message &#8220;operation succeeded&#8221;.</P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Don't delete the whole database on the ISP!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you have bought some hosting space on your ISP's servers, you may not be able to create databases at your will, but be constrained to use only the one that your ISP created for you. In this case, you can create, delete and modify its tables and their contents, but not the database itself! Don't drop the whole database, as you may not be allowed to recreate it!</P
></TD
></TR
></TABLE
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHPMYADMIN-SQL-QUERY"
></A
><P
><B
>Figure 3-15.    phpMyAdmin: SQL query.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/phpmyadmin-sql-query.png"><DIV
CLASS="CAPTION"
><P
>phpMyAdmin: SQL query.</P
></DIV
></P
></DIV
></DIV
></P
><P
>You can verify that the tables were populated with data by browsing their contents (<A
HREF="#FIG-PHPMYADMIN-TABLE-DATA"
>Figure 3-16</A
>) - click on the small icons besides their names in the left frame for this (if you click on their names, you will only see their structure). </P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHPMYADMIN-TABLE-DATA"
></A
><P
><B
>Figure 3-16.    phpMyAdmin: table data.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/phpmyadmin-table-data.png"><DIV
CLASS="CAPTION"
><P
>phpMyAdmin: table data.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Other options of PHPMyAdmin  that are not relative  to the  installation of PHP-Nuke, but still useful for the administration of the database, can be found in  <A
HREF="#PHPMYADMIN"
>Section 3.3</A
>.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="INSTALL-PHP-NUKE-NUKESQL"
>3.5. How to install <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> using nukesql.php</A
></H2
><P
>If fiddling with the database from the MySQL command line does not make you feel comfortable, you can use one of the <A
HREF="http://www.nukeresources.com/modules.php?name=Downloads&#38;d_op=search&#38;query=nukesql"
TARGET="_top"
>Web Installers for PHP-Nuke</A
> available for your version, in the form of the nukesql.php script. This file will install all required database tables for a fresh installation of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. It works a follows:</P
><P
>Simply enter your database login information in config.php (see <A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>), upload all <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> files (<A
HREF="#UPLOAD"
>Section 3.2.2</A
>), then upload this file to PHP-Nuke's root directory and point your browser to it (e.g. http://yoursite.com/nukesql.php).</P
><P
>nukesql.php proceeds in an interactive way to populate the database tables and test your settings in config.php.</P
><P
>Some of its features:</P
><P
></P
><UL
><LI
><P
>Checks that you are not using the default $sitekey (<A
HREF="#FIG-ANALYZE-WARNING-SITEKEY"
>Figure 23-2</A
>).</P
></LI
><LI
><P
>Lists existing database tables if any.</P
></LI
><LI
><P
>Installs tables on a empty database.</P
></LI
><LI
><P
>Replaces existing tables with new ones.</P
></LI
><LI
><P
>Creates duplicate tables for a second nuke site using one database by using a different prefix in config.php (see also <A
HREF="#MORE-THAN-ONE-PHP-NUKE-SITES"
>Section 3.7.1</A
>).</P
></LI
><LI
><P
>Will help you troubleshoot installation by testing connection to the MySQL server and selection of database (see also <A
HREF="#TEST-SCRIPTS"
>Section 3.9.1</A
>).</P
></LI
></UL
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="INSTALL-PHP-NUKE-LOCALLY"
>3.6. How to install <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> locally</A
></H2
><P
>A <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> installation on your own computer will give you the opportunity to test the whole spectrum of functionalities offered, as if you were online and your system were hosted in your ISP. But in order to start working on <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> locally, you must have a web server installed on your box. In this section we will cover the necessary steps towards a working <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> environment (Apache + <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> + MySQL ) under <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> and <SPAN
CLASS="PRODUCTNAME"
>Linux</SPAN
>.</P
><P
>For Windows, there are various packages you can choose from - they will install Apache, <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and even MySQL for you and will provide a ready-to-use environment for the installation of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. Among them, there are easyPHP (<A
HREF="#EASYPHP"
>Section 3.6.1</A
>), XAMPP (<A
HREF="#XAMPP"
>Section 3.6.2</A
>) and Apache2Triad (<A
HREF="#APACHE2TRIAD"
>Section 3.6.3</A
>).</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="EASYPHP"
>3.6.1. easyPHP</A
></H3
><P
>After the <A
HREF="http://www.easyphp.org/telechargements.php3"
TARGET="_top"
>download of easyPHP</A
> (version 1.6 or later), istallation is really easy: just click the setup icon to start it. You will be asked a few questions in the processes and that's all. The first screen is a welcome message and you only have to click on &#8220;next&#8221; (&#8220;suivant&#8221;). You will then be presented with screens like licence etc. and you can continue clicking on &#8220;next&#8221; (&#8220;suivant&#8221;), until you reach the screen that asks you where you want to install easyPHP (<A
HREF="#FIG-EASYPHP"
>Figure 3-17</A
>), in which case you just choose the right path (if you have doubts about the right path, you can leave it to the default just as well).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-EASYPHP"
></A
><P
><B
>Figure 3-17.    easyPHP: Installation screen.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/easyphp.png"><DIV
CLASS="CAPTION"
><P
>easyPHP: Installation screen.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Continue clicking on &#8220;suivant&#8221; until the end of the installation, when you have to click on &#8220;terminer&#8221; to end it. easyPHP is now installed.</P
><P
>But where should you install <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> in a system with easyPHP installed? Suppose you installed easyPHP in a folder like c:\easyphp. Open that folder and you will find various subdirectories. The one that is important is www. It is under the www folder that the local copy of Apache will expect the files to process - and it is exactly there where you should install PHP-NukeI in the c:\easyphp\www folder.</P
><P
>We must still explain a couple of elements of easyPHP's functioning. Once you start the easyPHP application, you will find an icon in the bottom bar, to the right of your screen, that resembles an &#8220;e&#8221; with a small red point (<A
HREF="#FIG-EASYPHP2"
>Figure 3-18</A
>). If the red point is lighting, the server is active, if it is dimmed out, the server is shut down.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-EASYPHP2"
></A
><P
><B
>Figure 3-18.    easyPHP icon in the bottom bar.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/easyphp2.png"><DIV
CLASS="CAPTION"
><P
>easyPHP icon in the bottom bar.</P
></DIV
></P
></DIV
></DIV
></P
><P
>To administrate easyPHP, you only have to click on that black &#8220;e&#8221;. A right click with the mouse will offer a menu with all commands available for the server administration, a double click with the left mouse button will instead offer an information screen.</P
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="EASYPHP-CHECK-SUCCESSFUL-INSTALLATION"
>3.6.1.1. How to check a successful installation</A
></H4
><P
>To make sure that Apache and <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> have been installed correctly on our system, we will use the phpinfo() function of PHP, which asks the server to give information about the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> configuration. If we get a screen like the one of <A
HREF="#FIG-PHPINFO-PHP-WINDOWS"
>Figure 3-19</A
>, then everything is working correctly.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHPINFO-PHP-WINDOWS"
></A
><P
><B
>Figure 3-19.    phpinfo: <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> screen for a <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> system.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/phpinfo-php.png"><DIV
CLASS="CAPTION"
><P
>phpinfo: <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> screen for a <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> system.</P
></DIV
></P
></DIV
></DIV
></P
><P
>To construct a file that uses the phpinfo() function, you can either use the text.php script of <A
HREF="#TEST-PHP"
>Section 3.9.1.1</A
>, or, even more simply, create a text file (with a <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=122"
TARGET="_top"
>decent text editor</A
>, see also <A
HREF="#EDITING-PHP-NUKE-FILES"
>Chapter 11</A
>) that contains only the line</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;? phpinfo(); ?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Save the file under the name, say, info.php and move it to the www folder of the easyPHP directory (we talked about it above). Then enter the URL</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>http://localhost/info.php</PRE
></FONT
></TD
></TR
></TABLE
><P
>in the address bar of your browser and you should get (among other information) the screen of <A
HREF="#FIG-PHPINFO-PHP-WINDOWS"
>Figure 3-19</A
>.</P
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="XAMPP"
>3.6.2. XAMPP</A
></H3
><P
><A
HREF="http://www.apachefriends.org/xampp-en.html"
TARGET="_top"
>XAMPP</A
> is an easy to install Apache distribution containing MySQL, <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and <SPAN
CLASS="APPLICATION"
>Perl</SPAN
>. XAMPP is really very easy to install and to use - just download, extract and start.</P
><P
>The distribution for <SPAN
CLASS="PRODUCTNAME"
>Linux</SPAN
> system (tested for SuSE, RedHat, <SPAN
CLASS="PRODUCTNAME"
>Mandrake</SPAN
> and Debian) contains: Apache, MySQL, <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> &#38; PEAR, Perl, ProFTPD, phpMyAdmin, OpenSSL, GD, Freetype2, libjpeg, libpng, gdbm, zlib, expat, Sablotron, libxml, Ming, Webalizer, pdf class, ncurses, mod_perl, FreeTDS, gettext, mcrypt, mhash, Turck MMCache, SQLite and IMAP C-Client.</P
><P
>The distribution for <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> 98, NT, 2000 and XP contains: Apache, MySQL, <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> + PEAR, Perl, mod_php, mod_perl, mod_ssl, OpenSSL, phpMyAdmin, Webalizer, Mercury Mail Transport System for Win32 and NetWare Systems v3.32, JpGraph, FileZilla FTP Server, mcrypt, Turck MMCache, SQLite, and WEB-DAV + mod_auth_mysql. The versions of the programs included in the latest version for Windows are:</P
><P
></P
><UL
><LI
><P
>Apache 2.0.48 </P
></LI
><LI
><P
>MySQL 4.0.16</P
></LI
><LI
><P
>PHP 4.3.4 </P
></LI
><LI
><P
>Openssl 0.9.7c</P
></LI
><LI
><P
>SQLite 2.8.6 </P
></LI
><LI
><P
>mod_php 4.3.4 + mod_perl 1.99_10 + mod_ssl 2.0.48</P
></LI
></UL
><P
>To install XAMPP you only need to download and extract XAMPP, that's all. There are no changes to the <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> registry and it's not necessary to edit any configuration files. It couldn't be easier!</P
><P
>To check that XAMPP is working some sample programs are included, there is a small CD collection program (written in <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> using MySQL) and a small guest book software (written in Perl) and several other utilities.</P
><P
>If you decide that XAMPP isn't needed any more just delete the XAMPP directory and it's completely removed from your system. </P
><DIV
CLASS="IMPORTANT"
><P
></P
><TABLE
CLASS="IMPORTANT"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.png"
HSPACE="5"
ALT="Important"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>On the press: Call for donations</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>On December 19, 2003, someone applied to the German Patent and Trademark Office for the rights to the "XAMPP" name. This person was not one of the XAMPP developers, but someone totally unknown to them.</P
><P
>The trademark application is a danger for the project's future, since the applicant could - if no legal measures are taken - forbid that the XAMPP developers use that name for their software or do business taking advantage of the name's popularity.</P
><P
>The XAMPP developers call on the project's website for donations to help counter this threat with legal means. Whether you are a new XAMPP user, a friend of Apache Friends, or  just someone who would like to help, please take the time and <A
HREF="http://www.apachefriends.org/genugistgenug.html"
TARGET="_top"
>make a donation  to the XAMPP project</A
>.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="APACHE2TRIAD"
>3.6.3. Apache2Triad</A
></H3
><P
><A
HREF="http://www.hotscripts.com/Detailed/23555.html"
TARGET="_top"
>Apache2Triad</A
> offers the following goodies, according to the Description:</P
><A
NAME="AEN3355"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>Apache 2.0.47 , MySQL 4.0.13 , OpenSSL 0.9.7b <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> 4.3.3 , <SPAN
CLASS="APPLICATION"
>Perl</SPAN
> 5.8.0 , Tcl 8.4.2 , Python 2.2.2 plus <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.8 , PHPmyadmin 2.5.2 , AWStats 5.7 plus Stunnel 4.04 , SSLCert 1.0 plus Xmail 1.1.6 and SlimFTPd 3.13 plus UebiMiau 2.7.2 and PHPXmail 0.33 all configured and easy to install and easy to customize as it has the cleanest layout and structure there is and is updated for every new release of the software it contains plus The Apache2triad Control Pannel suite of tools plus Full documentations plus Unparalelled Installer.</P
></BLOCKQUOTE
><P
>The homepage of the program is <A
HREF="http://apache2triad.org/"
TARGET="_top"
>Apache2Triad</A
>. Apache2Triad is not free for commercial usage: if your company wants to use Apache2Triad you must purchase it for 15$, which is certainly worth the money if you only think at the frustration it saves you by installing all the above packages for you.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="MANDRAKE-LINUX-APACHE-PHP-MYSQL"
>3.6.4. Apache, <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and MySQL on <SPAN
CLASS="PRODUCTNAME"
>Mandrake</SPAN
> Linux</A
></H3
><P
>We will describe how to get a functioning, local installation of the Apache-PHP-MySQL trio on a <SPAN
CLASS="PRODUCTNAME"
>Linux</SPAN
> system - we chose <SPAN
CLASS="PRODUCTNAME"
>Mandrake</SPAN
> <SPAN
CLASS="PRODUCTNAME"
>Linux</SPAN
> for this purpose, but the process is similar with other distributions. We will use visual tools for our purposes, making the assumption that, whoever is capable of compiling the binaries from the source code himself, will not need our guidance.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-APACHE-PACKAGE"
></A
><P
><B
>Figure 3-20.    RPMdrake: selecting the Apache package(s) for installation.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/apache-package.png"><DIV
CLASS="CAPTION"
><P
>RPMdrake: selecting the Apache package(s) for installation.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The most simple thing to do to get Apache, <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and MySQL installed under Linux, is to install the appropriate packages from the CD. For this, we will use the software application tool called RPMdrake; upon execution, it will ask for the root password; after we enter it, we will be presented a screen that asks us what we want to install. We enter &#8220;Apache&#8221; in the aproppriate field and in the sequence we choose the main Apache package (<A
HREF="#FIG-APACHE-PACKAGE"
>Figure 3-20</A
>). RPMdrake will ask us if we also want to install the packages of the &#8220;dependencies&#8221; (i.e. packages which the main package we selected depends on). It is important to answer with &#8220;yes&#8221; here.</P
><P
>We then click on &#8220;install&#8221; and we are asked to insert the CD (or the CDs) containing the <ACRONYM
CLASS="ACRONYM"
>RPM</ACRONYM
> packages. Once Apache has been installed, we open the <SPAN
CLASS="PRODUCTNAME"
>Mandrake</SPAN
> Control Center and click on &#8220;Start&#8221; for the httpd service (<A
HREF="#FIG-MANDRAKE-CONTROL-CENTER"
>Figure 3-21</A
>).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MANDRAKE-CONTROL-CENTER"
></A
><P
><B
>Figure 3-21.    <SPAN
CLASS="PRODUCTNAME"
>Mandrake</SPAN
> Control Center.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/mandrake-control-center.png"><DIV
CLASS="CAPTION"
><P
>Mandrake Control Center.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The last control step is to open our browser and instruct it to open http://localhost/. If the browser's response is Apache's Welcome Page, we are done.</P
><P
>We have to repeat the above operations in the same identical way for the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and MySQL packages. In order to make the MySQL database service available, we have again to go to <SPAN
CLASS="PRODUCTNAME"
>Mandrake</SPAN
> Control Center and click on &#8220;Start&#8221; for the mysql service - <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> does not need this step, it is available immediately after installation.</P
><P
>But where is the folder for the HTML files and our PHP-Nuke? It turns out that this is under /var/www/html and we should use phpMyAdmin (<A
HREF="#PHPMYADMIN"
>Section 3.3</A
>) to give this folder the permissions of 777 (for more on file permissions, see <A
HREF="#PERMISSIONS"
>Section 3.2.3</A
>). This way all users will be able to add, modify and delete files there, not only root.</P
><P
>To verify that everything has gone well, we use the info.php file of <A
HREF="#EASYPHP-CHECK-SUCCESSFUL-INSTALLATION"
>Section 3.6.1.1</A
>. If we get a screen similar to that of <A
HREF="#FIG-PHPINFO-PHP-WINDOWS"
>Figure 3-19</A
>, then everything is fine.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="RED-HAT-LINUX-APACHE-PHP-MYSQL"
>3.6.5. Apache, <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and MySQL on Red Hat Linux</A
></H3
><P
>For some obscure reason, Red Hat 8.0 does not connect the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> package to that of MySQL and we have to resort to some tricks to make them work together. Thus, for Red Hat, you have to proceed as follows:</P
><P
>If Apache, <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and MySQL are not already installed, install the appropriate packages. For Red Hat 8.0, choose the &#8220;Packages&#8221; menu entry as shown in <A
HREF="#FIG-RED-HAT-MENU-PACKAGES"
>Figure 3-22</A
>.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-RED-HAT-MENU-PACKAGES"
></A
><P
><B
>Figure 3-22.    Red Hat Menu: Packages.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/red-hat-menu-packages.png"><DIV
CLASS="CAPTION"
><P
>Red Hat Menu: Packages.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Once you have entered the system (as root), you can choose the three necessary pieces (Apache, <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and MySQL):</P
><P
></P
><UL
><LI
><P
>Apache is found under &#8220;Web Server&#8221;.</P
></LI
><LI
><P
>PHP is found under &#8220;Web Server&#8221;.</P
></LI
><LI
><P
>MySQL is found under &#8220;SQL database Server&#8221;.</P
></LI
></UL
><P
>To see what is contained in each section, click on the &#8220;Details&#8221; link (<A
HREF="#FIG-RED-HAT-PACKAGE-SECTIONS"
>Figure 3-23</A
>).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-RED-HAT-PACKAGE-SECTIONS"
></A
><P
><B
>Figure 3-23.    Red Hat: Package Sections.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/red-hat-package-sections.png"><DIV
CLASS="CAPTION"
><P
>Red Hat: Package Sections.</P
></DIV
></P
></DIV
></DIV
></P
><P
>After the selection of packages, you must click on &#8220;Update&#8221; and Red Hat will go on to install them, after it has checked their dependencies. </P
><P
>Now, Apache, <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and MySQL are installed, but unfortunately, we are not yet done: we must ensure that <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> will talk to MySQL. To this end, we must do 2 things:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>Edit the php.ini file, so that <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> supports also files that start with &#8220;&#60;?&#8221; - and not only those that start with &#8220;&#60;?php&#8221;.</P
></LI
><LI
><P
>Install the mysql.so file.</P
></LI
></OL
><P
>We recall that, in order to edit a system file, we must be root. We can nevertheless do our edits without logging out first, if we do the following:</P
><P
></P
><UL
><LI
><P
>Open a terminal window (System -&#62; Terminal)</P
></LI
><LI
><P
>Login as root (command &#8220;su&#8221;, then enter the password)</P
></LI
><LI
><P
>Start our preferred text editor (see <A
HREF="#EDITING-PHP-NUKE-FILES"
>Chapter 11</A
>). The editor will start with root privileges, so you can edit the php.ini file, usually located under /etc, and set the short_open_tag parameter to ON:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>; Allow the &#60;? tag. Otherwise, only &#60;?php and &#60;script&#62; tags are recognized.
short_open_tag = On</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>For your local experiments, it is comfortable to also set safe_mode to OFF and register_globals to ON (but see <A
HREF="#SECURITY-MEASURES"
>Section 23.4.2</A
> for the security related point of view on this).</P
></LI
><LI
><P
>Save everything and you are done with operation 1 above.</P
></LI
><LI
><P
>Operation 2 is simple: just copy the mysql.so file brutally into /usr/lib/php4/. You should do this with root permissions.</P
></LI
></UL
><P
>The only thing that remains now, is to restart the services. We can do this from the command-line of a terminal window and also through a graphical tool. For the novice user, we will describe the graphical way - again, an advanced user will know how to do this from the command-line (see <A
HREF="http://www.karakas-online.de/gnu-linux-tools-summary/"
TARGET="_top"
>GNU/Linux  Command-Line Tools Summary</A
> for a compact summary of command-line tools in Linux).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-RED-HAT-SERVICE-CONFIGURATION"
></A
><P
><B
>Figure 3-24.    Red Hat: Service Configuration Panel.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/red-hat-service-configuration.png"><DIV
CLASS="CAPTION"
><P
>Red Hat: Service Configuration Panel.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The activation or restart of the service we are interested in takes place by selecting the appropriate entry for that service in the Service Configuration Panel (httpd is the service for Apache, while mysqld is the service for MySQL), then click on &#8220;activate&#8221; or &#8220;restart&#8221; respectively (<A
HREF="#FIG-RED-HAT-SERVICE-CONFIGURATION"
>Figure 3-24</A
>).</P
><P
>Note that in order for our changes in <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> to take effect, we will have to restart Apache.</P
><P
>Now you can connect to your server by pointing your browser to http://localhost or to http://127.0.0.1. </P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Apache and the hosts file</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If the Apache service does not start, it may be because it cannot resolve "localhost" correctly. This name for the local computer is given the IP address 127.0.0.1 in the hosts file (usually under /etc). You can try to change </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>127.0.0.1 localhost.localdomain localhost</PRE
></FONT
></TD
></TR
></TABLE
><P
>in /etc/hosts to:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>127.0.0.1 dhcppc0 localhost.localdomain localhost</PRE
></FONT
></TD
></TR
></TABLE
></TD
></TR
></TABLE
></DIV
><P
>The folder that is expected to hold the HTML files is again /var/www/html. Note that, again, in order for the normal user to be able to modify the HTML files, you will have to change the permissions of that folder to 777 (see <A
HREF="#PERMISSIONS"
>Section 3.2.3</A
>). </P
><P
>It is also comfortable to create a link to that folder on the client's desktop, so that he does not have to click his way through the path each time.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CONFIG-PHP-FILE"
>3.7. The config.php file</A
></H2
><P
>The last thing that remains to do before starting with the management of your site, is to configure the file config.php This is important because it sets up a connection between the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> files of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> and the MySQL database that manages it.</P
><DIV
CLASS="IMPORTANT"
><P
></P
><TABLE
CLASS="IMPORTANT"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.png"
HSPACE="5"
ALT="Important"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Important: Use a decent text editor!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Do NOT use Notepad or Wordpad to edit the config.php file! These "text" editors don't deserve this name - they introduce extra invisible characters in the file, causing spurious errors with the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> interpreter. Everything will look O.K., but you will spend many hours trying to find out why your <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> tells you there is an error there.</P
><P
>Recommended text editors are <A
HREF="http://www.ultraedit.com"
TARGET="_top"
>UltraEdit</A
> (excellent, but not freeware), <A
HREF="http://download.com.com/3000-2352-10140098.html?tag=lst-0-2"
TARGET="_top"
>Crimson Editor</A
> , <A
HREF="http://download.com.com/3000-2048-10143719.html"
TARGET="_top"
>WinSyntax</A
> (both good for <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and Freeware, Crimson Editor has some feature more than WinSyntax) and <A
HREF="http://www.chami.com/html-kit"
TARGET="_top"
>HTMLkit</A
> (free for personal use).</P
><P
>Various text editors and their functionalities for <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> are discussed in this <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=122"
TARGET="_top"
>decent text editor</A
> thread.</P
></TD
></TR
></TABLE
></DIV
><P
>You need to enter a database username and a password in the config.php file. This user must have administration rights on the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> MySQL database (whose name you also entered in the config.php file). You configure this user to have administration rights on the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> database by either phpMyAdmin, or from the command line:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>grant all privileges on db.* to dbuser@localhost identified by 'dbpasswd';</PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Please note</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>This is the database user account, on whose behalf everything is done from the database point of view. That is, no matter which user is doing something in PHP-Nuke, when he presses [Enter], the command will be forwarded to the database client, who will connect to the database server with that username and password you entered in the config.php. If that username and password were wrong, or that user did not have "all privileges" on the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> database (the database whose name you entered in the config.php), then the client will not be able to connect and you will get an error (one of these exactly-speaking but nothing-communicating "...was not a valid resource" errors ).</P
></TD
></TR
></TABLE
></DIV
><P
>Let's have a closer look at the configuration process. Compared to the 5.6 version, the config.php file has undergone a radical diet, leaving it with only a few lines. The rest has been moved to the nuke_config table (<A
HREF="#DATABASE-TABLES"
>Section 28.1</A
>). This has created problems with the Splatt Forum (<A
HREF="#ADMINISTRATION-FUNCTIONS"
>Section 7.1</A
>), which also used a table with that name. When you open the file &#8220;config.php&#8221; you will see the following near the top:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$dbhost = "localhost"; <A
NAME="DBHOST"
><IMG
SRC="images/callouts/1.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
>
$dbuname = "root"; <A
NAME="DBUNAME"
><IMG
SRC="images/callouts/2.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"></A
>
$dbpass = ""; <A
NAME="DBPASS"
><IMG
SRC="images/callouts/3.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"></A
>
$dbname = "nuke"; <A
NAME="DBNAME"
><IMG
SRC="images/callouts/4.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"></A
>
$prefix = "nuke"; <A
NAME="PREFIX"
><IMG
SRC="images/callouts/5.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(5)"></A
>
$user_prefix = "nuke"; <A
NAME="USERPREFIX"
><IMG
SRC="images/callouts/6.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(6)"></A
>
$dbtype = "MySQL"; <A
NAME="MYSQL"
><IMG
SRC="images/callouts/7.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(7)"></A
>
$sitekey = "SdFk*fa28367-dm56w69.3a2fDS+e9"; <A
NAME="SITEKEY"
><IMG
SRC="images/callouts/8.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(8)"></A
></PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="CALLOUTLIST"
><DL
COMPACT="COMPACT"
><DT
><A
HREF="#DBHOST"
><IMG
SRC="images/callouts/1.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
></DT
><DD
>       In place of  "localhost" you will have to put  the host/server that the database is installed on. If this is your own computer, the "localhost" is O.K., otherwise you will have to ask your ISP.
      </DD
><DT
><A
HREF="#DBUNAME"
><IMG
SRC="images/callouts/2.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"></A
></DT
><DD
>       In place of  "root"  you must put  the username of the database user that <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> will have to use in order to connect to the database and execute the necessary database operations. This user must have been grented all privileges to the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> database as discussed above.
       </DD
><DT
><A
HREF="#DBPASS"
><IMG
SRC="images/callouts/3.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"></A
></DT
><DD
>       You will have  to insert the password of the database user here.
       </DD
><DT
><A
HREF="#DBNAME"
><IMG
SRC="images/callouts/4.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"></A
></DT
><DD
>       In place of "nuke" you will have  to insert the name of your database here.
       </DD
><DT
><A
HREF="#PREFIX"
><IMG
SRC="images/callouts/5.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(5)"></A
></DT
><DD
>       I recommend this to be left to its default value, "nuke", is the prefix that goes in front of the name of every database table.
       </DD
><DT
><A
HREF="#USERPREFIX"
><IMG
SRC="images/callouts/6.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(6)"></A
></DT
><DD
>      This is the prefix that goes in front of the name of every database user table. The idea here is that you can have one prefix, i.e. one <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> database, but many user prefixes, i.e. different user tables for different sites. The user tables will have a different user_prefix in their names, but the rest of the tables will still use prefix, thus sharing the same nuke database among different user bases from different sites.
       </DD
><DT
><A
HREF="#MYSQL"
><IMG
SRC="images/callouts/7.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(7)"></A
></DT
><DD
>       Leave this to "MySQL", if you have a MySQL database (which will be true in most situations). This is case sensitive, so "mysql" or "Mysql" will not do, it has to be exactly "MySQL".
       </DD
><DT
><A
HREF="#SITEKEY"
><IMG
SRC="images/callouts/8.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(8)"></A
></DT
><DD
>       You should change this key to be a unique key that identifies your site. Ideally, no two sites should have the same key.The site key is used to create the random number for the security image (<A
HREF="#FIG-SECURITY-CODE"
>Figure 3-28</A
>) in the Your  Account module and the administration section and is an important but  often overlooked security feature of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. See also <A
HREF="#SECURITY-MEASURES"
>Section 23.4.2</A
> for  software that can help you create a truly random site key.
       </DD
></DL
></DIV
><P
>Let's do an example:</P
><P
></P
><UL
><LI
><P
>Host DB: 212.110.12.297 </P
></LI
><LI
><P
>User DB: Pippo </P
></LI
><LI
><P
>Password DB: Topolino </P
></LI
><LI
><P
>Database Name: Orazio </P
></LI
><LI
><P
>Operating System Used: <SPAN
CLASS="PRODUCTNAME"
>Linux</SPAN
> (what else!!! :-) )</P
></LI
></UL
><P
>The file config.php should then look like:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$dbhost = "212.110.12.297";
$dbuname = "Pippo";
$dbpass = "Topolino";
$dbname = "Orazio";
$system = 0;
$prefix = "nuke"; 
$sitekey = "SdFk*jkjbkuuz-dm98769.4b67DS+e4";</PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Attention!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>This is case sensitive! Remember to use The Capital Letters!!! On <SPAN
CLASS="PRODUCTNAME"
>Linux</SPAN
> systems, if you write a user name or a password without  taking care of letter case, the system will not allow you to log in.</P
></TD
></TR
></TABLE
></DIV
><P
>You must distinguish between the database user (and password), which you enter in the config.php file, and the administrator "God" account. The database user is only known to the database. The administrator "God" account (there are also other administrator levels), on the other side, is created by <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> automatically for you. This account, as well as the users accounts, exist only in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> database, not in the MySQL server's configuration. </P
><P
>How is this <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> administrator created? If you go to the "Home" link of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>., you will then see a message telling you the following - just do what it tells you:</P
><A
NAME="AEN3698"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>Welcome to PHP-Nuke!</P
><P
>Congratulations! You have now a web portal installed!. You can edit or change this message from the Administration page. </P
><P
>For security reasons the best idea is to create the Super User right NOW by clicking HERE </P
></BLOCKQUOTE
><P
>Click on that link and it will create the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> administrator account for you.</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>A superuser is NOT a registered User</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>A superuser is an administrator with all admin powers. One should call it superadmin, because everyone gets confused at first.  It is fine (and normal) to have a superuser admin and a registered user that have the same name. Be careful with side effects when you are logged in as both, see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=14784"
TARGET="_top"
>Login Block on Left doesn't go away</A
>.</P
></TD
></TR
></TABLE
></DIV
><P
>We are done, the only thing that remains to do is to enter the administration section (www.yoursite.com/admin.php). The very first time you will log in using &#8220;God&#8221; as username and &#8220;Password&#8221; as password. I recommend you to change these as soon as possible. Immediately after that, you should take some security measures, see <A
HREF="#SECURITY-MEASURES"
>Section 23.4.2</A
>.</P
><P
>The config.php file also defines two arrays, the $AllowableHTML and $CensorList array. As its name says, $AllowableHTML is an associative array containing entries for all HTML tags that are to be allowed on your site:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$AllowableHTML = array("b"=&#62;1,
                    "i"=&#62;1,
                    "a"=&#62;2,
                    "em"=&#62;1,
                    "br"=&#62;1,
                    "strong"=&#62;1,
                    "blockquote"=&#62;1,
                    "tt"=&#62;1,
                    "li"=&#62;1,
                    "ol"=&#62;1,
                    "H1"=&#62;1,
                    "H2"=&#62;1,
                    "H3"=&#62;1,
                    "H4"=&#62;1,
                    "center"=&#62;1,
                    "img"=&#62;2,
                    "alt"=&#62;1,
                    "table"=&#62;2,
                    "tr"=&#62;2,
                    "td"=&#62;2,
                    "p"=&#62;2,
                    "div"=&#62;2,
                    "font"=&#62;2,
                    "p"=&#62;1,
                    "p"=&#62;1,
                    "ul"=&#62;1);</PRE
></FONT
></TD
></TR
></TABLE
><P
>The meaning of "1" and "2" is whether the tag accepts attributes or not. For example, if you want the &#60;p&#62; tag to NOT accept attributes (i.e. you accept &#60;p&#62; but you don't accept &#60;p align="center"&#62;) the you put "1", otherwise (i.e., if attributes like "align" etc. are accepted) you put "2". That this is indeed so, can be seen from the check_html() function of mainfile.php (see also <A
HREF="#ALLOW-SPECIAL-HTML-TAGS"
>Section 16.1</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>                if ($a = $AllowableHTML[$tag])
                        if ($reg[1][0] == "/") $tag = "&#60;/$tag&#62;";
                        elseif (($a == 1) || ($reg[2] == "")) $tag = "&#60;$tag&#62;";
                        else {
                          # Place here the double quote fix function.
                          $attrb_list=delQuotes($reg[2]);
                          // A VER
                          $attrb_list = ereg_replace("&#38;","&#38;amp;",$attrb_list);
                          $tag = "&#60;$tag" . $attrb_list . "&#62;";
                        } # Attribs in tag allowed
                else $tag = "";</PRE
></FONT
></TD
></TR
></TABLE
><P
>The code checks if the associated value to the given tag ($tag) in the $AllowableHTML array is &#8220;1&#8221; or empty. If this is the case, the value of $tag is only &#8220;&#60;$tag&#62;&#8221;. Otherwise a set of replacements takes place on the attribute list:</P
><P
></P
><UL
><LI
><P
>The delQuotes() function deletes duplicate space and adds escaped quotes around each attribute value.</P
></LI
><LI
><P
>The ereg_replace() function replaces the ampersand (&#38;) with its HTML entity &#8220;&#38;amp;&#8221;.</P
></LI
></UL
><P
>If the tag is not in the $AllowableHTML array, the line in the code above shows that it is replaced by the empty string, i.e. it is not echoed at all. Thus, if there is an HTML tag that you are missing, you should enter it in the $AllowableHTML array and take care to enter correctly a &#8220;1&#8221; or a &#8220;2&#8221; according to your needs. See for example <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=94"
TARGET="_top"
>Smilies in news</A
>.</P
><P
>The $CensorList array contains a list of words that you don't want to see in texts of articles on your site. </P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="MORE-THAN-ONE-PHP-NUKE-SITES"
>3.7.1. More than one <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> sites</A
></H3
><P
>The variables in the config.php file allow for quite some flexibility when it comes to installing more than one <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> sites that have to be related in one or the other way:</P
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="COMMON-DATABASE"
>3.7.1.1. Different <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> sites from the same database</A
></H4
><P
>If you have two (or more) <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> sites, located in different Web URLs (or different local directories), that you want to operate from the same database, you have some handwork to do, but it is not difficult. From the point of view of the database server, what differentiates one <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site from another, is the name of the table(s) used. In PHP-Nuke, all tables come with a prefix: the users table uses the $user_prefix prefix from the config.php file(<A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>), while all other tables use $prefix. </P
><P
>Thus, you don't need a second database to operate a second <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site. A different database helps keep the installations separate by providing a kind of &#8220;container&#8221; to put each installation's tables in, but apart from this, there is nothing special to it. To use only one database for two <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> installations, proceed as follows:</P
><P
></P
><UL
><LI
><P
>Use separate $prefix and $user_prefix values in each site's config.php, e.g. </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$prefix = "nuke1";
$user_prefix = "nuke1";</PRE
></FONT
></TD
></TR
></TABLE
><P
>in config.php for site 1 and </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$prefix = "nuke2";
$user_prefix = "nuke2";</PRE
></FONT
></TD
></TR
></TABLE
><P
>in config.php for site 2. All other values should stay identical in the config.php files of both sites.</P
></LI
><LI
><P
>Edit the nuke.sql file (located under the sql directory of the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> package) for each site. Change every occurence of &#8220;nuke_&#8221; to &#8220;nuke1_&#8221; for site 1 and to &#8220;nuke2_&#8221; for site 2, then proceed with the installation as described in <A
HREF="#DATABASE-CREATION"
>Section 3.2.4</A
>. If you use nukesql.php (<A
HREF="#INSTALL-PHP-NUKE-NUKESQL"
>Section 3.5</A
>) for the installation, see the tip at the end of this section.</P
></LI
></UL
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="COMMON-USER-BASE"
>3.7.1.2. Different <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> sites with the same user base</A
></H4
><P
>There are situations that you might want to share users among your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> sites. For example, if you have a site about cars and another one about car insurance, your users will probably be interested in both. But requiring them to enter two different logins and passwords is not going to make them happy - that's where $user_prefix comes into play.</P
><P
>The idea behind a separate prefix for the users table in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> is to enable you to keep all other tables separate, but use the same users table across different <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> installations. By using a different $prefix for each site, but the same $user_prefix for both, your users will require only one login and password - and will be recognized by the second site, while logged into the first one and vice versa.</P
><P
>To use the same user base in two separate <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> sites, proceed as follows:</P
><P
></P
><UL
><LI
><P
>Use the same database as descibed in <A
HREF="#COMMON-DATABASE"
>Section 3.7.1.1</A
>.</P
></LI
><LI
><P
>Use separate $prefix values, but the same $user_prefix for both config.php files, e.g. </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$prefix = "nuke1";
$user_prefix = "nuke-common";</PRE
></FONT
></TD
></TR
></TABLE
><P
>in config.php for site 1 and </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$prefix = "nuke2";
$user_prefix = "nuke-common";</PRE
></FONT
></TD
></TR
></TABLE
><P
>in config.php for site 2. All other values should stay identical in the config.php files of both sites.</P
></LI
><LI
><P
>Edit the nuke.sql file (located under the sql directory of the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> package) for each site. Change every occurence of &#8220;nuke_&#8221; to &#8220;nuke1_&#8221; for site 1 and to &#8220;nuke2_&#8221; for site 2, <EM
>except the ones for the nuke_users table</EM
>, which you should change to &#8220;nuke-common&#8221;. The full name of the users table should thus be &#8220;nuke-common_users&#8221; in both nuke.sql files. Then proceed with the installation as described in <A
HREF="#DATABASE-CREATION"
>Section 3.2.4</A
>. </P
></LI
></UL
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Using nukesql.php</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you use nukesql.php (<A
HREF="#INSTALL-PHP-NUKE-NUKESQL"
>Section 3.5</A
>) for the installation, you should change the prefixes as above and point your browser to each instance of nukesql.php (one for each installation, located in the respective <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> root directory). It will then create the tables with the right prefixes for you.</P
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="RESOURCES"
>3.8. Resources</A
></H2
><P
>Claudio says: if you are looking for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> hosting, <A
HREF="http://www.spaghettibrain.com"
TARGET="_top"
>Spaghettibrain.com</A
> has custom offers for you... give us a visit! <A
HREF="http://www.spaghettibrain.com"
TARGET="_top"
>Spaghettibrain.com</A
> is the italian support site for PHP-Nuke, there you will find modules, security patches, support forums and a lot more. Come for a tour soon.</P
><P
>Other specialized <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> hosters:</P
><P
></P
><UL
><LI
><P
><A
HREF="http://www.nukezone.com"
TARGET="_top"
>Nukezone</A
></P
></LI
><LI
><P
><A
HREF="http://ravenphpscripts.ravenwebhosting.com/index.php"
TARGET="_top"
>Raven Web Hosting</A
></P
></LI
></UL
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="COMMON-INSTALLATION-PROBLEMS"
>3.9. Common installation problems</A
></H2
><P
>Some of the most common installation problems of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> are discussed in the following subsections. In identifying the most common sources of problems and frustration, we hope to eliminate a good portion of the Help! posts in the various forums of the community. Feel free to post your own favourite to Chris' <A
HREF="http://www.karakas-online.de/forum/phpnuke.html"
TARGET="_top"
>PHP-Nuke Forum</A
>for inclusion in the next version of this HOWTO.</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="TEST-SCRIPTS"
>3.9.1. Test scripts</A
></H3
><P
>Before you start the ambitious undertaking of debugging your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> installation, you should download and run some tools that may shorten the search path and save you some headaches:</P
><P
></P
><UL
><LI
><P
>test.php</P
></LI
><LI
><P
>ConnectTest.php and</P
></LI
><LI
><P
>analyze.php</P
></LI
></UL
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="TEST-PHP"
>3.9.1.1. test.php</A
></H4
><P
>test.php is a &#8220;quick'n dirty&#8221; script to help you find out if you could connect to the database and how your <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> configuration looks like. Put the following lines in a file, name it test.php, upload it in the same directory where you have your config.php and tell your browser to open it (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=36"
TARGET="_top"
>Warning: Invalid argument supplied for foreach()</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php 
include("config.php"); 
mysql_connect("$dbhost", "$dbuname", "$dbpass"); 
mysql_select_db("$dbname"); 
echo mysql_error(); 
phpinfo(); 
?&#62; </PRE
></FONT
></TD
></TR
></TABLE
><P
>If everything is right, you will only see the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> info. Otherwise, you will see a descriptive message of the error first (in the first line) and also the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> info. You can use the output to determine various parameters of your <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> configuration, like version numbers, libraries, paths and variables. Whenever you ask yourself if you have feature X enabled, remember to run this small script and search its output for a string that describes the feature. You will most probably find the answer there. Conversely, if you don't find the answer in the output of test.php (i.e. the output of the phpinfo() function), you will probably not find it easily.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="CONNECTTEST-PHP"
>3.9.1.2. ConnectTest.php</A
></H4
><P
>The <A
HREF="http://humpa.com/news/ConnectTest.txt"
TARGET="_top"
>ConnectTest.php</A
> script from <A
HREF="http://www.humpa.com"
TARGET="_top"
>Humpa</A
> is a more elaborate test script that you can help with database connection problems. Download and save it with a .php ending (it comes with a .txt ending to prevent the web server from interpreting the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code in it). You should put the ConnectTest.php file in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> root directory, i.e. in the same directory where also config.php is located. Then you just tell your browser to open it.</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if($phpinfo=="phpinfo") {
        phpinfo();
        die();
}
require_once("config.php");
$dbcheck = mysql_connect("$dbhost", "$dbuname", "$dbpass");
if (!$dbcheck) {
        echo mysql_error();
        echo "&#60;br&#62;&#60;b&#62;The Connection Test Script was unable to connect 
to the MySQL server!&#60;br&#62;One or more of these variables are wrong in 
your config.php:&#60;/b&#62; &#60;font color=purple&#62;&#60;b&#62;\$dbhost=\"&#60;i&#62;$dbhost&#60;/i&#62;\",
\$dbuname=\"&#60;i&#62;$dbuname&#60;/i&#62;\", and/or \$dbpass=\"*&#60;i&#62;hidden&#60;/i&#62;*\"
&#60;/b&#62;&#60;/font&#62;&#60;br&#62;";
        echo "&#60;br&#62;Now, please don't say that you &#60;u&#62;are&#60;/u&#62; using the 
correct values - say it to your mysql server, because that is who(what?) 
is stopping you. : )&#60;br&#62;";
        echo "Email your web host and ask them what to use for a mysql 
username and password.&#60;br&#62;";
        echo "PHP Manual, function: 
&#60;a href=\"http://www.php.net/manual/en/function.mysql-connect.php\"
target=\"_blank\"&#62;mysql_connect&#60;/a&#62;&#60;br&#62;";
        echo "If you are the server, perhaps you just need to create 
a mysql user instead of using your root user.&#60;br&#62;";
        die("&#60;br&#62;&#60;a href=\"$_SERVER[PHP_SELF]?phpinfo=phpinfo\"&#62;
phpinfo&#60;/a&#62;");
}else{
        echo "&#60;a href=\"$_SERVER[PHP_SELF]?phpinfo=phpinfo\"&#62;
phpinfo&#60;/a&#62;&#60;br&#62;&#60;br&#62;";
        echo "&#60;font color=red&#62;&#60;b&#62;If everything looks good, but you 
still have problems, get the ";
        echo "&#60;a href=\"http://nukecops.com/downloads-cat-7.htm\"&#62;
analyzer from NukeCops&#60;/a&#62;&#60;/b&#62;&#60;/font&#62;&#60;br&#62;&#60;br&#62;";
        echo "&#60;b&#62;Connection Test Script connected to your MySQL server 
successfully!&#60;br&#62;";
        echo "&#60;br&#62;\$dbuname = \"$dbuname\";&#60;br&#62;\$dbtype = \"$dbtype\";
&#60;br&#62;\$prefix = \"$prefix\";&#60;br&#62;\$user_prefix = \"$user_prefix\";&#60;br&#62;";
        if (mysql_select_db($dbname)) {
                echo "&#60;br&#62;Connection to your database \"
&#60;font color=purple&#62;$dbname&#60;/font&#62;\" was also successful.&#60;br&#62;";
                $result = mysql_list_tables($dbname);
        if (!$result) {
                print "DB Error, could not list tables\n";
                print 'MySQL Error: ' . mysql_error();
                die();
        }
        $i=0;
        $stufftoprint = "";
        while ($row = mysql_fetch_row($result)) {
                $tablename = $row[0];
                if($tablename == "".$prefix."_authors") {
                        $result4 = mysql_query("select aid from $tablename");
                        while(list($admin_name) = mysql_fetch_row($result4)) {
                                $admin_names .= "$admin_name, &#38;nbsp;";
                        }
                }
                $result3 = mysql_query("select * from $tablename");
                        $numFields = mysql_num_fields($result3);
                        $numRows = mysql_num_rows($result3);
                        $rows = "rows";
                        $fields = "fields";
                        if($numFields == 1) {$fields = "field";}
                        if($numRows == 1) {$rows = "row";}
                $stufftoprint .= "Table: &#60;font color=purple&#62;$tablename
&#60;/font&#62; &#38;nbsp;($numFields $fields / $numRows $rows)\n&#60;br&#62;";
                $i++;
        }
        if($dbtype != "MySQL" AND eregi("mysql",$dbtype)) {
                echo "&#60;br&#62;&#60;font color=red&#62;&#60;b&#62;But, you need to set &#60;/b&#62;
&#60;/font&#62;&#60;font color=purple&#62;&#60;b&#62; \$dbtype = \"MySQL\"; &#60;/b&#62;&#60;/font&#62;";
                echo "&#60;font color=red&#62;&#60;b&#62; &#38;nbsp;&#38;nbsp; in your config.php!!!!!!!!&#60;/b&#62;&#60;/font&#62;&#60;br&#62;";
        }
        echo "&#60;br&#62;There are &#60;font color=purple&#62;$i tables&#60;/font&#62; in your \"
&#60;font color=purple&#62;$dbname&#60;/font&#62;\" database&#60;br&#62;";
        echo "(by default, there are 89 fields in phpnuke 6.5 and 76 fields 
in phpnuke 6.0)&#60;br&#62;";
        if($i&#60;66) {
                echo "&#60;br&#62;&#60;font color=red&#62;&#60;b&#62;You don't seem to have all the 
tables installed.&#60;br&#62;Get the ";
                echo "&#60;a href=\"http://www.nukeresources.com/modules.php?name=Downloads
&#38;d_op=viewdownload&#38;cid=79\"&#62;Web Installer&#60;/a&#62; for your version of 
phpnuke&#60;/b&#62;&#60;/font&#62;&#60;br&#62;";
        }
        echo "&#60;br&#62;These are the admin names (aid) in your nuke_authors 
table: &#38;nbsp;&#60;font color=purple&#62;$admin_names&#60;/font&#62;&#60;br&#62;";
        echo "&#60;br&#62;Now check this list of tables with your nuke.sql file:&#60;br&#62;&#60;br&#62;$stufftoprint&#60;/b&#62;";
        }else {
                if(mysql_query("CREATE DATABASE $dbname")) {
                        echo "&#60;br&#62;Your database \"$dbname\" did not exist, 
but this script just created it sucessfully&#60;br&#62;";
                        echo "Now, you need to get the appropriate 
&#60;a href=\"http://www.nukeresources.com/modules.php?name=Downloads
&#38;d_op=viewdownload&#38;cid=79\"&#62;";
                        echo "Web Installer from nukeresources.com&#60;/a&#62;";
                        die();
                }
                echo "&#60;br&#62;However, the \"$dbname\" database does not exist. 
If that is not the correct name, then put in the correct ";
                echo "name for&#60;br&#62;&#60;font color=purple&#62;
\$dbname =\"$dbname\";&#60;/font&#62;&#38;nbsp;&#38;nbsp; (in your config.php)
&#60;br&#62;If you have not created the database yet, then ";
                echo "create it. If you are not the server, then ask your 
web host to create it for you.&#60;br&#62;";
                echo "&#60;br&#62;Then, get the appropriate 
&#60;a href=\"http://www.nukeresources.com/modules.php?name=Downloads
&#38;d_op=viewdownload&#38;cid=79\"&#62;";
                echo "Web Installer from nukeresources.com&#60;/a&#62;";
        }
}
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="ANALYZE-PHP"
>3.9.1.3. analyze.php</A
></H4
><P
>The <A
HREF="http://nukecops.com/downloads-file-13-details-Analyzer.html"
TARGET="_top"
>analyze.php</A
> script from Paul Laudanski (a.k.a. <A
HREF="http://zhen-xjell.com"
TARGET="_top"
>Zhen-Xjell</A
>) is the most elaborate from all the three script presented here. Rename the file to "analyze.php", transfer it to the same place that your config.php file is found and call it from your browser. For a preview of what it reports, <A
HREF="http://nukecops.com/analyze.php"
TARGET="_top"
>run analyze.php for the nukecops site</A
>. The code has been successfully tested for Nuke versions 6.5B6, 6.5B5, 6.0, 5.6.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-ANALYZE-MYSQL-CONNECTION"
></A
><P
><B
>Figure 3-25.    analyze.php: MySQL connection transcript.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/analyze-mysql-connection.png"><DIV
CLASS="CAPTION"
><P
>analyze.php: MySQL connection transcript.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The script not only tests your MySQL database connection (see <A
HREF="#FIG-ANALYZE-MYSQL-CONNECTION"
>Figure 3-25</A
>), but also displays information on:</P
><P
></P
><UL
><LI
><P
>config.php settings</P
></LI
><LI
><P
>SMTP (mail server) settings</P
></LI
><LI
><P
>GD (graphics) library settings</P
></LI
><LI
><P
>Databases</P
></LI
><LI
><P
>Modules</P
></LI
><LI
><P
>Blocks</P
></LI
><LI
><P
>Notices</P
></LI
><LI
><P
>Ranks</P
></LI
><LI
><P
>Administrators and Moderators</P
></LI
><LI
><P
>php,ini settings</P
></LI
><LI
><P
>Security code</P
></LI
><LI
><P
>Recursive file listing along with resource permissions</P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-ANALYZE-WARNING-MYSQL"
></A
><P
><B
>Figure 3-26.    analyze.php: MySQL security warning.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/analyze-warning-mysql.png"><DIV
CLASS="CAPTION"
><P
>analyze.php: MySQL security warning.</P
></DIV
></P
></DIV
></DIV
></P
><P
>It also checks for MySQL (see <A
HREF="#FIG-ANALYZE-WARNING-MYSQL"
>Figure 3-26</A
>) and <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> (see <A
HREF="#FIG-ANALYZE-WARNING-PHP"
>Figure 23-1</A
>) vulnerabilities and reports them to you if they need to be patched.</P
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="WARNING-MYSQL-FETCH-ROW-SUPPLIED-ARGUMENT"
>3.9.2. Warning: mysql_fetch_row(): supplied argument is not a valid MySQL result resource</A
></H3
><P
>You get this</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Warning: mysql_fetch_row(): supplied argument is not a valid MySQL result 
resource in html/includes/sql_layer.php on line 286</PRE
></FONT
></TD
></TR
></TABLE
><P
>This is a very general error. Most of the time it just means that you could not connect to the database (for whatever reason) and thus the result set you tried to fetch was not a &#8220;valid MySQL result resource&#8221;. You should try first to get a more descriptive error message. For this purpose, you must edit the "case" lines in the sql_layer.php file.</P
><P
>Example:This is the "case" that starts at line 286 in the nuke 6.5 sql_layer.php (for the line 286 error), at line 300 in the nuke 6.0 sql_layer.php (for the line 301 error message) - or line 285 in nuke 5.6 (for the line 286 error message):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    case "MySQL":
        $row = mysql_fetch_row($res);
        return $row;
    break;;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Edit it like this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    case "MySQL":
        if ($row = mysql_fetch_row($res)) {
           return $row;
        } else {
           print (mysql_error());
        }
    break;;</PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Please note:</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>This will NOT fix your problem. But it will give a more descriptive message as to what the error cause is.</P
></TD
></TR
></TABLE
></DIV
><P
>See <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=37"
TARGET="_top"
>Warning: mysql fetch row: supplied argument is not a valid MySQL result resource</A
> and <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=14121"
TARGET="_top"
>submit news problem</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CALL-TO-UNDEFINED-FUNCTION"
>3.9.3. Call to undefined function: message_die() in db.php line 88</A
></H3
><P
>This is the most &#8220;popular&#8221; error. It basically means that it couldn't connect to the database. You may get this error even if you did everything right, depending on the version you are using. The reasons are multiple:</P
><P
></P
><UL
><LI
><P
>Are you sure you downloaded *all* the files? Maybe some file is missing. Perhaps you wanted to save some bandwidth and omitted some crucial file or directory, or subdirectory.</P
></LI
><LI
><P
>You didn't enter "MySQL" as the dbtype in config.php (see <A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>). It must be exactly with a Capital M, a small y, and capital S, Q and L.</P
></LI
><LI
><P
>The code tries to select the database, but the database is not there. Create the database and populate it with tables (see <A
HREF="#DATABASE-CREATION"
>Section 3.2.4</A
>).</P
></LI
><LI
><P
>You have some error in the config.php file (see <A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>). Double check that the username and password are correct. Don't forget, the " and ; <EM
>are</EM
> important. And DON'T remove the $ in front of the variables! If you used an editor like Notepad, Wordpad, or some editor that you are not 100% sure that works correctly, delete the config.php file, get a fresh copy and edit it with a <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=122"
TARGET="_top"
>decent text editor</A
> (see <A
HREF="#EDITING-PHP-NUKE-FILES"
>Chapter 11</A
>).</P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="FAILED-OPENING-LANG-PHP"
>3.9.4. Error: Failed opening 'language/lang-.php' for inclusion</A
></H3
><P
>You either </P
><P
></P
><UL
><LI
><P
>didn't install the language files lang-xxx.php (like language/lang-english.php), or </P
></LI
><LI
><P
>you cannot connect to the database, so that the value of the default language could not be set and is empty (and that's why you get an error about lang-.php, instead of lang-english.php, or lang-french.php etc.). Try the small test script (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?p=72"
TARGET="_top"
>Call to undefined function: message die in db.php line 88</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
include("config.php");
mysql_connect("$dbhost", "$dbuname", "$dbpass");
mysql_select_db("$dbname");
echo mysql_error();
phpinfo();
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>(see also <A
HREF="#TEST-SCRIPTS"
>Section 3.9.1</A
>), or</P
></LI
><LI
><P
>your include path information is missing some paths (like ".", the current directory), see <A
HREF="#INCLUDE-PATH"
>Section 3.9.10</A
>.</P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="FAILED-OPENING-SQL-LAYER-PHP"
>3.9.5. Fatal error: Failed opening required 'includes/sql_layer.php'</A
></H3
><P
>Your web server could not open includes/sql_layer.php. There are many reasons for this (<A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=17"
TARGET="_top"
>Fatal error: Failed opening required includes/sql layer.php</A
>): </P
><P
></P
><UL
><LI
><P
>The file is really not there, something went wrong with the installation - reinstall (see <A
HREF="#INSTALLATION"
>Chapter 3</A
>).</P
></LI
><LI
><P
>The file is there but the web server does not have the right to open it - check permissions (see <A
HREF="#PERMISSIONS"
>Section 3.2.3</A
>).</P
></LI
><LI
><P
>There is a .htaccess file somewhere in the directory hierarchy that denies access to you. </P
></LI
><LI
><P
>There is something wrong with the include path of the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> interpreter (see <A
HREF="#INCLUDE-PATH"
>Section 3.9.10</A
>).</P
></LI
></UL
><P
>You might see more information on the cause of your problem if you have access to the web server access and error logs.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="SORRY-SUCH-FILE-DOESNT-EXIST"
>3.9.6. Sorry, such file doesn't exist...</A
></H3
><P
>Whenever you try to access a module (or simply your site), you ge the error (see, for example: <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=143"
TARGET="_top"
>Humpa Chess Install</A
> and <A
HREF="Fehler: Sorry, such file doesn't exist"
TARGET="_top"
>http://www.karakas-online.de/forum/viewtopic.php?t=348</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Sorry, such file doesn't exist...</PRE
></FONT
></TD
></TR
></TABLE
><P
>Of course, following a classic attitude to error handling, it doesn't tell you which file does not exist...<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
>  We thus have to search the code to see what is happening:</P
><P
>The error</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Sorry, such file doesn't exist...</PRE
></FONT
></TD
></TR
></TABLE
><P
>comes from mainfile.php. There are exactly three occurences of it in the code. In all three the pattern is the same (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=353"
TARGET="_top"
>Sorry, such file doesn't exist...</A
>):</P
><P
></P
><OL
TYPE="1"
><LI
><P
>First it is tested if you are a normal user, an administrator, if the module is active etc., depending on the circumstances.</P
></LI
><LI
><P
>Then, a test is made on the existence of $modpath. Upon its failure, you get the error above:</P
></LI
></OL
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$modpath .= "modules/$name/$file.php";
if (file_exists($modpath)) {
    include($modpath);
} else {
    die ("Sorry, such file doesn't exist...");
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>$modpath, in turn, is the path to the module in question. As you can see in the code snippet yourself, it depends on the value of $name, which is the name of the module, and $file, which is...well, for this you have to scroll up to the start of mainfile.php. There, we read</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if (!isset($file)) { $file="index"; }</PRE
></FONT
></TD
></TR
></TABLE
><P
>which in plain english says "if the variable $file is NOT set, set it to 'index'".</P
><P
>Putting all the puzzle pieces together, we arrive to the conclusion that the file</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>modules/YourModule/index.php</PRE
></FONT
></TD
></TR
></TABLE
><P
>is not there.</P
><P
>There are various things you should check and all have to do with trying to find out why your web server cannot find the index file of the module you are trying to access:</P
><P
></P
><UL
><LI
><P
>Is the index.php file really there in the modules/YourModule folder?</P
></LI
><LI
><P
>Did you set up the permissions (<A
HREF="#PERMISSIONS"
>Section 3.2.3</A
>, <A
HREF="#PERMISSIONS2"
>Section 23.4.4</A
>) correctly? Does your web server have read access to that folder and file?</P
></LI
><LI
><P
>Is there a (hidden) .htaccess file (<A
HREF="#HTACCESS-FILE"
>Section 25.4</A
>) somewhere in your document tree that prevents the web browser from accessing that file?</P
></LI
><LI
><P
>Did you install all files? You have to dive in the docs of that module to see if you are missing anything.</P
></LI
><LI
><P
>Check if</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>http://www.yoursite.com/modules/YourModule/index.php</PRE
></FONT
></TD
></TR
></TABLE
><P
>returns an error. Substitute YourModule with the name of the module that is giving you the headaches.</P
></LI
><LI
><P
>If this is a module you downloaded and installed yourself (as opposed to a preinstalled one, see <A
HREF="#PREINSTALLED-MODULES"
>Section 6.1</A
>): Did you really follow the instructions? Did you download the right file? Did you extract it in the modules folder?</P
></LI
><LI
><P
>Did you see the module in the list of modules and did you activate it (<A
HREF="#ADMINISTRATION-FUNCTIONS"
>Section 7.1</A
> and <A
HREF="#FIG-MODULES-ADMIN-2"
>Figure 3-27</A
>)?</P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MODULES-ADMIN-2"
></A
><P
><B
>Figure 3-27.    Modules administration panel.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/modules-admin.png"><DIV
CLASS="CAPTION"
><P
>Modules administration panel.</P
></DIV
></P
></DIV
></DIV
></P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="WARNING-SETLOCALE"
>3.9.7. Warning: setlocale(): Passing locale category name as string is deprecated</A
></H3
><P
>All of a sudden, you get tons of warnings like this one:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Warning: setlocale(): Passing locale category name as string is deprecated. 
Use the LC_* -constants instead. 
in /home/chris/public_html/nuke/mainfile.php on line 565</PRE
></FONT
></TD
></TR
></TABLE
><P
>The problem comes suddenly after your ISP has upgraded to a newer version of <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> (without telling you, of course! <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
> </P
><P
>To fix this, remove the quotes that are around "LC_TIME" in the line/file mentioned in the error message displayed (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=21"
TARGET="_top"
>Warning: setlocale(): Passing locale category name as string is deprecated</A
> and <A
HREF=""
TARGET="_top"
>News article: Warning: setlocale(): Passing locale category name as string is deprecated.</A
>).</P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Attention: repetitious error!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>You may get this error again and again. You will have to do the above change in *all* occurences of the LC_something constants! I once counted 17 of them, scattered all around the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> files...</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="SECURITY-CODE"
>3.9.8. Security code is not showing up</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-SECURITY-CODE"
></A
><P
><B
>Figure 3-28.    Security code in the User Login screen.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/security-code.png"><DIV
CLASS="CAPTION"
><P
>Security code in the User Login screen.</P
></DIV
></P
></DIV
></DIV
></P
><P
>You just installed <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> for the first time, created a super user, and you can't log in because the security code graphic (see <A
HREF="#FIG-SECURITY-CODE"
>Figure 3-28</A
>) is coming up as a dead image.<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
> </P
><P
>This is a frequent error, but it seems that the reasons (and cures) may be multiple (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=22"
TARGET="_top"
>Security code graphic not showing up</A
>, <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=14758"
TARGET="_top"
>security image stopped working</A
>):</P
><P
></P
><UL
><LI
><P
>You changed something in the language files and put comments - remove the comments.</P
></LI
><LI
><P
>You (or your ISP) don't have the GD library loaded. To find out if you have the GD library loaded, run a test script like test.php (see <A
HREF="#TEST-PHP"
>Section 3.9.1.1</A
>), ConnectTest.php (see <A
HREF="#CONNECTTEST-PHP"
>Section 3.9.1.2</A
>) or analyze.php (see <A
HREF="#ANALYZE-PHP"
>Section 3.9.1.3</A
>). The first two display the output of the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> phpinfo() function directly ( <A
HREF="#FIG-PHPINFO-GD"
>Figure 3-29</A
>), analyze.php will display an only slightly different information box on GD (<A
HREF="#FIG-ANALYZE-GD"
>Figure 3-30</A
>). If you are on <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> 2000, read <A
HREF="http://forums.devshed.com/archive/5/2002/08/3/41595"
TARGET="_top"
>how to install GD on a Win2K box</A
>.</P
></LI
><LI
><P
>The gfx function in admin.php is not always working fine. You could try to put it in a separate file and change the call from admin.php to the new file. See Humpa's posting in <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=14550"
TARGET="_top"
>Admin Security login jpeg not showing</A
> for an example.</P
></LI
><LI
><P
>Activate (or reactivate) the Your Account module. If your Admin's security code works, but the others don't (showing an read X mark for others), then you may want to set the Your Account module as viewable by <EM
>all</EM
> visitors (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=299"
TARGET="_top"
>PhpNuke 6.5 Security Code Problem</A
>). </P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHPINFO-GD"
></A
><P
><B
>Figure 3-29.    phpinfo(): GD library information.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/phpinfo-gd.png"><DIV
CLASS="CAPTION"
><P
>phpinfo(): GD library information.</P
></DIV
></P
></DIV
></DIV
></P
><P
>For more thoughts on this problem, read <A
HREF="http://www.humpa.com/HelpMeHumpa/index.php?humpa_id=3#h3"
TARGET="_top"
>Humpa's <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> FAQ on the security code</A
>. </P
><P
>If you want to use a PNG or GIF image for the security code, consult the solution in <A
HREF="http://www.nukefixes.com/postlite44-0.html"
TARGET="_top"
>Using a png or gif for security code image</A
>. If you want to display the security code as text, rather than an image, see <A
HREF="http://www.nukefixes.com/postlite76-0.html"
TARGET="_top"
>security code in plain text format</A
> - but then there is no point to it (the idea is to display an image that makes automatic number recognition difficult to robots), then you can disable it just as well.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-ANALYZE-GD"
></A
><P
><B
>Figure 3-30.    analyze.php: GD library information.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/analyze-gd.png"><DIV
CLASS="CAPTION"
><P
>analyze.php: GD library information.</P
></DIV
></P
></DIV
></DIV
></P
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="BYPASS-SECURITY-CODE"
>3.9.8.1. How to bypass the security code</A
></H4
><P
>Another approach could be to bypass the security code altogether. This is probably the only option you have (unless you are willing to display it as plain text - see the links at the end of this section for this), if your ISP refuses to load the GD library: without GD, no security code image - without security code image, you cannot enter anything in the security code field, and you get an &#8220;Access denied&#8221; error. </P
><P
>Here is how you disable the security code:</P
><P
>Find the 7 occurences of:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>extension_loaded("gd")</PRE
></FONT
></TD
></TR
></TABLE
><P
>For the Admin login, there is one in the admin.php, and one in the auth.php. For Users, there will be five in the modules/Your_Account/index.php (and there might be one in the block-Login.php, and/or one in the block-User_Info.php, if they are modified). Replace all of the occurances with this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$user == "whatever"</PRE
></FONT
></TD
></TR
></TABLE
><P
>Follow the above instruction exactly. </P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Be careful not to introduce syntax errors!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Changes like the last one (bypassing the security code) require extreme caution on your part. All too big is the risk of introducing new errors, while trying to correct old ones! If you get an error, it does't mean the solution ceased to work for you. Check for syntax errors that you might have introduced with your editing. Most probably, you will find something.
<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> 
See <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=18076"
TARGET="_top"
>syntax error, security images removed</A
> for a real world example.</P
></TD
></TR
></TABLE
></DIV
><P
>If you have one of the later versions of PHP-Nuke, you can try a trick: edit the config.php file and if you find a line there, like this one:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$gfx_chk = 7;</PRE
></FONT
></TD
></TR
></TABLE
><P
>and change it to (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=266"
TARGET="_top"
>How to disable the security code</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$gfx_chk = 0;</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="WARNING-INVALID-ARGUMENT-SUPPLIED"
>3.9.9. Warning: Invalid argument supplied for foreach() in mainfile.php</A
></H3
><P
>You get errors and warnings like:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Warning: Invalid argument supplied for foreach() in ...mainfile.php on line 42
Warning: Invalid argument supplied for foreach() in ...mainfile.php on line 57
Warning: Cannot add header information - headers already sent by 
(output started at ...mainfile.php:42) in ...mainfile.php on line 165</PRE
></FONT
></TD
></TR
></TABLE
><P
>You must have at least <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> v. 4.1.0 to run <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.5 and later. See <A
HREF="#PREREQUISITES"
>Section 3.1</A
> and <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=36"
TARGET="_top"
>Warning: Invalid argument supplied for foreach()</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INCLUDE-PATH"
>3.9.10. Include path is wrong</A
></H3
><P
>If the include path happens to be wrong (you can see your include path in the output of test.php, see <A
HREF="#TEST-SCRIPTS"
>Section 3.9.1</A
>), you could try the following: </P
><P
>Suppose your nuke files are in /usr/local/httpd/htdocs/nuke/html (just an example ). Suppose that this is the directory that contains</P
><P
>the includes directory beneath it. Then create a .htaccess file (<A
HREF="#HTACCESS-FILE"
>Section 25.4</A
>) that contains the line </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>php_value include_path .:/usr/local/httpd/htdocs/nuke/html/includes</PRE
></FONT
></TD
></TR
></TABLE
><P
>(no equal signs, just copy it in the .htaccess file). In most cases the include path will be correctly configured. In the few ones that it's not, the most probable cause of errors will be a missing &#8220;current directory&#8221; (a missing dot in the include path).</P
><P
>If you have access to the php.ini file, you can do the same there. Find the line where include_path is defined and add the dot in the list, e.g.:</P
><P
>include_path = &#8220;.:/usr/local/httpd/htdocs/nuke/html/includes&#8221;</P
><P
>See also <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=381"
TARGET="_top"
>Warning: main(/db/db.php): failed to open stream</A
> and <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=17"
TARGET="_top"
>Fatal error: Failed opening required 'includes/sql_layer.php"</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="MAIL-PROBLEMS"
>3.9.11. Users don't receive any confirmation mails</A
></H3
><P
>This is not a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> error. <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> uses PHP's mail() function and this, in turn, uses the mail server that is found on the web server. If that mail server is configured incorrectly, you will get problems with mail. The best way to solve them is to talk to your ISP and try to find out which configuration is used for your case. We have seen cases of ISPs that would configure the mail server to deliver mail only to local domains, thus making communication between <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> and users of other domains impossible (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=137"
TARGET="_top"
>E-mail problems</A
>, <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?p=56082"
TARGET="_top"
>my nuke only sends mail to my domain</A
>).</P
><P
>Now, what do you do after you have fixed your mail server? Those e-mails with the activation links have already been sent once, and since they never reached their destinations... You are losing users because you cannot resend them! </P
><P
>If you ever needed to resend an activation email, or just wanted to delete one that was awaiting activation, then you will appreciate the <A
HREF="http://ravenphpscripts.com/download-file-59.html"
TARGET="_top"
>Resend module</A
>. It will help you manage the temp_users table.</P
><P
>If you want users to be registered directly, without confirmation mails, see <A
HREF="#REGISTER-USERS-IMMEDIATELY"
>Section 18.6.5</A
>. If you want to disable registration, see <A
HREF="#DISABLE-REGISTRATION"
>Section 18.6.4</A
>. If you want to approve every user who applied for registration, you can use the Approve Membership module (see <A
HREF="#PHP-NUKE-APPROVE-MEMBERSHIP-MODULE"
>Section 8.3.4</A
> and <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=83"
TARGET="_top"
>Authorize accounts</A
>).</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="LOGIN-LOOP"
>3.9.12. Login loop</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-LOGIN-SCREEN"
></A
><P
><B
>Figure 3-31.    User Login screen.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/security-code.png"><DIV
CLASS="CAPTION"
><P
>User Login screen.</P
></DIV
></P
></DIV
></DIV
></P
><P
>You login without problems, but whenever you try to access a function or links of the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site, you are returned to the login screen and are asked to enter your user name and password again - a very annoying procedure!</P
><P
>The first thing you should check, is if you have cookies enabled in your browser. <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> uses cookies to store authentication information on your computer (in the cookies file, see also <A
HREF="#COOKIES"
>Section 23.4.5</A
>), in order to be able to recognize you on your next page request (remember, HTTP is a stateless protocol, meaning that, whenever the web server serves you a page you requested, it forgets about it, so the next page request is seen as being completely unrelated to the previous one). Thus, you must have cookies enabled to use <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>.</P
><P
>If enabling cookies does not make the problem disappear, it might be a permissions problem (see <A
HREF="#PERMISSIONS"
>Section 3.2.3</A
>), in which case you should contact the administrator of the site.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>3rd party cookies</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you are experimenting with frames, you will find out that the cookie will be set fine, as long as the  frame and the parent page are on the same site. If the frame is a different site than the parent, then you will have to allow 3rd party cookies (a lower security setting), see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=13433"
TARGET="_top"
>Why do users have to put security to "low" to be able to log</A
>.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="SQL-SYNTAX-ERROR"
>3.9.13. You have an error in your SQL syntax near '-------------</A
></H3
><P
>When you try to create the database tables with the nuke.sql file (see <A
HREF="#DATABASE-CREATION"
>Section 3.2.4</A
>), you get an error:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>--
---------------------------------------------------------
-- 
-- 
CREATE TABLE confirm (
  confirm_id char(32) NOT NULL default ",
  session_id char(32) NOT NULL default ",
  code char(6) NOT NULL default ",
  PRIMARY KEY  (session_id,confirm_id)
) TYPE=MyISAM
MySQL said:
You have an error in your SQL syntax near '---------------------------------------------------------
-- 
-- 
CREATE TABLE co' at line 2</PRE
></FONT
></TD
></TR
></TABLE
><P
>This is because your nuke.sql file came with nice, useless long lines containing dashes, like these ones:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>---------------------------------------------------------</PRE
></FONT
></TD
></TR
></TABLE
><P
>Just use a <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=122"
TARGET="_top"
>decent text editor</A
> (see <A
HREF="#EDITING-PHP-NUKE-FILES"
>Chapter 11</A
>) and delete that long line, or put a # in front of it. If that doesn't help, put a # in front of every line that starts with a dash, making it a comment. SQL accepts &#8220;--&#8221; as the string that starts a comment, but it seems that MySQL does not like the rest of the dashes (after the first two ones) as a comment.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="ERROR-UPDATE-PRIVATE-FORUM-PERMISSIONS"
>3.9.14. Error: Couldn't update private forum permissions</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-FORUM-3"
></A
><P
><B
>Figure 3-32.    Administration panel: Forums.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/forum.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Forums.</P
></DIV
></P
></DIV
></DIV
></P
><P
>You get the following error everytime you try to make a particular user (or a site administrator) a moderator in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.5-7.0:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Couldn't update private forum permissions
DEBUG MODE
SQL Error : 1064 You have an error in your SQL syntax near ' 1)' at line 2
INSERT INTO nuke_bbauth_access (forum_id, group_id, auth_mod) VALUES (3, , 1)
Line : 385
FIle: xxxx/modules/Forums/admin/admin_ug_auth.php</PRE
></FONT
></TD
></TR
></TABLE
><P
>This is a bug modules/Forums/admin/admin_ug_auth.php - the INSERT statement is missing a string value in the VALUES clause. Try this <A
HREF="http://www.nukeresources.com/files/admin_ug_auth.zip"
TARGET="_top"
>admin_ug_auth.php</A
> instead. See <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=16633"
TARGET="_top"
>Couldn't update private forum permissions</A
> and <A
HREF="http://www.nukecops.com/postp77425.html"
TARGET="_top"
>Site Admin &#38; Moderator</A
> for more details.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INVALID-SESSION-IN-FORUMS"
>3.9.15. Invalid session in forums</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-FORUM-4"
></A
><P
><B
>Figure 3-33.    Administration panel: Forums.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/forum.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Forums.</P
></DIV
></P
></DIV
></DIV
></P
><P
>You installed the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Forum (which is the phpBB forum starting v.6.5 of PHP-Nuke, see <A
HREF="#PHPBB-FORUM-ADMINISTRATION"
>Section 7.1.1</A
>), but now, when you try to access it you get the error: </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Invalid session.</PRE
></FONT
></TD
></TR
></TABLE
><P
>Solution: In the forum configuration, go to the Cookies section and change the name of the cookie file from "phpbb2mysql " to something more original or unique, like "phpbb2mysql2" . You also need to have the right cookie domain, i.e. if you have installed the forum under http://yoursite.com/nuke/html, the cookie domain should be http://yoursite.com/nuke/html too. </P
><P
>&#8220;What is this session id anyway?&#8221;, you may ask. This is quite a technical matter and is covered in detail in <A
HREF="#SESSION-MANAGEMENT"
>Chapter 10</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CANNOT-CREATE-ADMINISTRATOR-ACCOUNT"
>3.9.16. You cannot create the administrator account</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-EDIT-ADMINS-2"
></A
><P
><B
>Figure 3-34.    Administration panel: Edit Admins.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/authors.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Edit Admins.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Everything looks fine with your newly created <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site, then you are told by the system that there is no administrator yet and you should create one:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>There are no Administrators Accounts yet, proceeed to create the Super User:</PRE
></FONT
></TD
></TR
></TABLE
><P
>You do what you are told and create that Super User, but the next time you get the same message. It seems that you cannot create the administrator account!</P
><P
>The message that asks you to create the Super User is the _NOADMINYET message whose translation you can find in the various language files (see <A
HREF="#GENERAL-PHP-NUKE-TEXTS"
>Section 13.1</A
>) in the admin/language folder. For example, in admin/language/lang-english.php, we read:</P
><P
>define("_NOADMINYET","There are no Administrators Accounts yet, proceeed to create the Super User:");</P
><P
>The _NOADMINYET message is output in admin.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$the_first = $db-&#62;sql_numrows($db-&#62;sql_query("SELECT * FROM ".$prefix."_authors"));
if ($the_first == 0) {
    if (!$name) {
    include("header.php");
    title("$sitename: "._ADMINISTRATION."");
    OpenTable();
    echo "&#60;center&#62;&#60;b&#62;"._NOADMINYET."&#60;/b&#62;&#60;/center&#62;&#60;br&#62;&#60;br&#62;"</PRE
></FONT
></TD
></TR
></TABLE
><P
>From the code we see that it is echoed only if $the_first is 0, meaning no entries in the $prefix_authors table. Thus, for some reason, the nuke_authors table (assuming your $prefix is "nuke" in config.php), is not filled. You can do the following (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=289"
TARGET="_top"
>I cant make my Admin acount work</A
>):</P
><P
>You should check the entries in nuke_authors. You can do this either from the MySQL prompt with</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>select aid, name, email, pwd from nuke_authors;</PRE
></FONT
></TD
></TR
></TABLE
><P
>or with the "browse" function of phpMyAdmin (<A
HREF="#PHPMYADMIN2"
>Section 3.4</A
>).</P
><P
>If your Super Admin is there, then it is weird...<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
> </P
><P
>If the Super Admin is not there, then you can't write to the database. To check this possibility, find the function create_first() in admin.php. There, you will see two lines with a call to sql_query. They are both identical:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$db-&#62;sql_query($sql);</PRE
></FONT
></TD
></TR
></TABLE
><P
>Insert the line:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>echo mysql_error();</PRE
></FONT
></TD
></TR
></TABLE
><P
>after each one. This will echo a more descriptive error message (see <A
HREF="#DESCRIPTIVE-ERROR-MESSAGE"
>Section 3.9.23</A
>) and may lead you to the solution. But, as experience shows (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=289"
TARGET="_top"
>I cant make my Admin acount work</A
>), you most probably have set the wrong values in your config.php (<A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>).<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
>This is a known issue and a solution is presented in <A
HREF="#RSS-BLOCK-ERROR"
>Section 3.10.1</A
>.</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
></PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="ADMINISTRATOR-PASSWORD-LOST"
>3.9.17. You lost the administrator password, or deleted the admin account</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-EDIT-ADMINS-3"
></A
><P
><B
>Figure 3-35.    Administration panel: Edit Admins.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/authors.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Edit Admins.</P
></DIV
></P
></DIV
></DIV
></P
><P
>You did a Very Big Mistake - you erased your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Super Admin! Now you cannot do anything on your website! Your powers are those of a normal member... <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
>How do you get your Admin back? </P
><P
>You can try one of the following two solutions (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=11"
TARGET="_top"
>I deleted my Super Admin. How do I get him back?</A
>):</P
><P
></P
><OL
TYPE="1"
><LI
><P
>You can use phpMyAdmin (or a similar DB administration package, see <A
HREF="#PHPMYADMIN"
>Section 3.3</A
>) and look in (the technical term on the link is &#8220;browse&#8221;) the nuke_authors table. You can take two approaches:</P
><P
></P
><OL
TYPE="a"
><LI
><P
>See if your admin is still there, and you can set a new password (you'll have to choose &#8220;MD5&#8221; from the dropdown menu on the pass field, see <A
HREF="#FIG-PHPMYADMIN-FIELD-FUNCTIONS-2"
>Figure 3-36</A
>). If your admin is not there, then just add a new row to the table and put in the missing info. </P
></LI
><LI
><P
>Or you can just delete the line with the administrator name and point your browser to the admin.php file - you will then be prompted to enter a new admin name and password. You may enter whatever new values you like there, but you should not create a user with the same name, even if prompted to.</P
></LI
></OL
></LI
><LI
><P
>Using phpMyAdmin (or directly in MySQL), go to the nuke_authors table and make your password dc647eb65e6711e155375218212b3964 - that will make it Password, then just login and change it. Here we make use of the fact that the MD5 hash of the word &#8220;Password&#8221; is dc647eb65e6711e155375218212b3964.</P
></LI
></OL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHPMYADMIN-FIELD-FUNCTIONS-2"
></A
><P
><B
>Figure 3-36.    phpMyAdmin: field functions.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/phpmyadmin-field-functions.png"><DIV
CLASS="CAPTION"
><P
>phpMyAdmin: field functions.</P
></DIV
></P
></DIV
></DIV
></P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>How to compute the MD5 hash of an arbitrary password using only <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and your browser</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you are curious about the MD5 hash of a certain password, but do not have easy access to a function that computes it, you can make use of the fact that the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> interpreter of your web server can compute is for you.  Substitute XXXX for the password whose MD5 hash you want to compute in the following script:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
$pass="XXXX";
$new_password = md5($pass);
print("MD5 hash of $pass = $new_password");
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>and upload it somewhere on your web server. Then point your browser to it and you should see the answer. You can use it to change the password field of the nuke_authors table directly in MySQL.</P
></TD
></TR
></TABLE
></DIV
><P
>See <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=11383"
TARGET="_top"
>Admin Password - i've lost it</A
>, <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=18212"
TARGET="_top"
>Password help</A
> for discussions.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="GARBAGE-ON-PAGE"
>3.9.18. You get garbage in some parts of the page</A
></H3
><P
>If some parts of your page looks like containing garbage, it may be due to a compressed output from the server. You could try to disable compression by just commenting the line (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=289"
TARGET="_top"
>I cant make my Admin acount work</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>ob_start('ob_gzhandler');</PRE
></FONT
></TD
></TR
></TABLE
><P
>or setting $do_gzip_compress to FALSE:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$do_gzip_compress = FALSE;</PRE
></FONT
></TD
></TR
></TABLE
><P
>in mainfile.php. The part that controls compression in mainfile.php is:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$phpver = phpversion();
if ($phpver &#62;= '4.0.4pl1' &#38;&#38; strstr($HTTP_USER_AGENT,'compatible')) {
    if (extension_loaded('zlib')) {
        ob_end_clean();
        ob_start('ob_gzhandler');
    }
} else if ($phpver &#62; '4.0') {
    if (strstr($HTTP_SERVER_VARS['HTTP_ACCEPT_ENCODING'], 'gzip')) {
        if (extension_loaded('zlib')) {
            $do_gzip_compress = TRUE;
            ob_start();
            ob_implicit_flush(0);
            //header('Content-Encoding: gzip');
        }
    }
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>You might even have to comment it completely (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=16439"
TARGET="_top"
>PhpNuke wont show in IE or Opera</A
>).</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="COMPRESSED-OUTPUT-IN-FORUMS"
>3.9.19. Compressed output in forums</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-FORUM-GZIP-COMPRESSION"
></A
><P
><B
>Figure 3-37.    Gzip compression in the Admin Panel of the Forums module.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/forum-gzip-compression.png"><DIV
CLASS="CAPTION"
><P
>Gzip compression in the Admin Panel of the Forums module.</P
></DIV
></P
></DIV
></DIV
></P
><P
>You seem to be getting a compressed output in the forums. You are either seeing garbage, or you can see it in IE, but not in Mozilla. When you press &#8220;Refresh&#8221;, Mozilla reacts like you want to download something that is &#8220;encrypted&#8221; or compressed.</P
><P
>All this is a sign that you may be compressing the page twice. If, for example, your Apache has been already configured to send compressed output (with <A
HREF="http://www.schroepl.net/projekte/mod_gzip/index.htm"
TARGET="_top"
>mod_gzip</A
>, or some other technique for <A
HREF="http://perl.apache.org/docs/tutorials/client/compression/compression.html"
TARGET="_top"
>Web Content Compression</A
>), then you should disable gzip compression in the forums administration panel (from &#8220;General Admin, Configuration&#8221;, as in <A
HREF="#FIG-FORUM-GZIP-COMPRESSION"
>Figure 3-37</A
>).</P
><P
>See also <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?p=58655"
TARGET="_top"
>Cannot see forum in Mozilla and see in IE</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CANNOT-ADD-HEADER-INFORMATION-IN-FORUMS"
>3.9.20. Warning: Cannot add header information...in forums</A
></H3
><P
>You get errors of the form:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Warning: Cannot modify header information  headers already sent</PRE
></FONT
></TD
></TR
></TABLE
><P
>when vieweing the forums. There are two solutions (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=291"
TARGET="_top"
>Warning: Cannot add header information...in forums</A
>):</P
><P
></P
><OL
TYPE="1"
><LI
><P
>Near the start of mainfile.php find:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>42 = phpversion();
if (42 &#62;= '4.0.4pl1' &#38;&#38; strstr(Mozilla/4.0 (compatible; MSIE 6.0; &#60;productname&#62;Windows&#60;/productname&#62; NT 5.1),'compatible')) {
    if (extension_loaded('zlib')) {
        ob_end_clean();
        ob_start('ob_gzhandler');
    }
} else if (42 &#62; '4.0') {</PRE
></FONT
></TD
></TR
></TABLE
><P
>and change it to:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>42 = phpversion();
if (42 &#62;= '4.0.4pl1')
{
    ob_start('ob_gzhandler');
}else if (42 &#62; '4.0') {</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Add the following line to a .htaccess file (see <A
HREF="#HTACCESS-FILE"
>Section 25.4</A
>) placed in your root <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> directory:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>PHP_FLAG output_buffering on</PRE
></FONT
></TD
></TR
></TABLE
><P
>or if you have access to php.ini, set:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>output_buffering=on;</PRE
></FONT
></TD
></TR
></TABLE
></LI
></OL
><P
>See also <A
HREF="http://www.nukefixes.com/postt36.html"
TARGET="_top"
>Warning: Cannot modify header information on Forums</A
> and <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?p=56538"
TARGET="_top"
>Cannot modify header information</A
>. To learn more about <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> output buffering, see <A
HREF="http://www.devshed.com/Server_Side/PHP/OutputBuffering/"
TARGET="_top"
>Output Buffering with PHP</A
> and <A
HREF="http://jinxidoru.com/tutorials/buffering.html"
TARGET="_top"
>PHP Output Buffering tutorial</A
>.</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
></PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="EMPTY-PAGE-IN-WINDOWS"
>3.9.21. In Windows, you get an empty page</A
></H3
><P
>You installed Apache, <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and MySQL in <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
>. It seems to work, but when you try to run PHP-Nuke's index page, the browser starts  searching the page without showing anytihg. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
>How do you get your Admin back? </P
><P
>This is too vague an error to trace down to anything specific with certainty, but there are indications (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=257"
TARGET="_top"
>Problems with header function</A
>) that it is related to the header() function of <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and <A
HREF="http://bugs.php.net/bug.php?id=16842"
TARGET="_top"
>PHP's Bug #16842: header() function doesn`t work</A
>. The bug seems to have been fixed in newer versions of PHP, but it might still appear, if you had a previous version that you did not uninstall cleanly (the old problem with DLLs not being correctly managed under Windows, with old versions still lying around even after an uninstall). If you suspect this might be the case with you, uninstall <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> cleanly and reinstall.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="LOTS-OF-NOTICE-LINES"
>3.9.22. You get a lot of Notice lines in the output of PHP-Nuke</A
></H3
><P
>If you get lots of Notice lines in your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> output like this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Notice: No prefix specified in import_request_variables() 
- possible security hazard in 
c:\program files\apache group\apache\htdocs\html\mainfile.php on line 23
Notice: Constant _ youhave already defined in 
c:\program files\apache group\apache\htdocs\html\language\lang-english.php on line 158
Notice: Use of undefined constant admin - assumed 'admin' 
in c:\program files\apache group\apache\htdocs\html\admin.php on line 16
Notice: Use of undefined constant admin - assumed 'admin' 
in c:\program files\apache group\apache\htdocs\html\mainfile.php on line 88
Notice: Constant _yes already defined in 
c:\program files\apache group\apache\htdocs\html\admin\language\lang-english.php on line 24
Notice: Constant _no already defined in 
c:\program files\apache group\apache\htdocs\html\admin\language\lang-english.php on line 25</PRE
></FONT
></TD
></TR
></TABLE
><P
>then the error level for the reporting is too high (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=221"
TARGET="_top"
>A lot of Notice lines in the output of PHP-Nuke</A
>). Set display_errors so that <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> will display all errors, except notices, in your php.ini. Edit php.ini with a <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=122"
TARGET="_top"
>decent text editor</A
> (see also <A
HREF="#EDITING-PHP-NUKE-FILES"
>Chapter 11</A
>) as follows - the important line is the last one, which is the only uncommented one:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Error handling and logging ;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; error_reporting is a bit-field.  Or each number up to get desired error
; reporting level
; E_ALL             - All errors and warnings
; E_ERROR           - fatal run-time errors
; E_WARNING         - run-time warnings (non-fatal errors)
; E_PARSE           - compile-time parse errors
; E_NOTICE          - run-time notices (these are warnings which often result
;                     from a bug in your code, but it's possible that it was
;                     intentional (e.g., using an uninitialized variable and
;                     relying on the fact it's automatically initialized to an
;                     empty string)
; E_CORE_ERROR      - fatal errors that occur during PHP's initial startup
; E_CORE_WARNING    - warnings (non-fatal errors) that occur during PHP's
;                     initial startup
; E_COMPILE_ERROR   - fatal compile-time errors
; E_COMPILE_WARNING - compile-time warnings (non-fatal errors)
; E_USER_ERROR      - user-generated error message
; E_USER_WARNING    - user-generated warning message
; E_USER_NOTICE     - user-generated notice message
;
; Examples:
;
;   - Show all errors, except for notices
;
;error_reporting = E_ALL &#38; ~E_NOTICE
;
;   - Show only errors
;
;error_reporting = E_COMPILE_ERROR|E_ERROR|E_CORE_ERROR
;
;   - Show all errors except for notices
;
error_reporting  =  E_ALL &#38; ~E_NOTICE</PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="DESCRIPTIVE-ERROR-MESSAGE"
>3.9.23. How to get a more descriptive error message</A
></H3
><P
>If you get an error, but you have no idea what is happening, you could try to narrow it down in the code, if you feel comfortable with <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
>. Then, after you found the offending line, you should insert the line</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>print (mysql_error());</PRE
></FONT
></TD
></TR
></TABLE
><P
>immediately after it. This will give a more descriptive message of the error and hopefully lead you to a solution. We already used this trick in <A
HREF="#WARNING-MYSQL-FETCH-ROW-SUPPLIED-ARGUMENT"
>Section 3.9.2</A
>. See also <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=37"
TARGET="_top"
>Warning: mysql fetch row: supplied argument is not a valid MySQL result resource</A
> and <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=14121"
TARGET="_top"
>submit news problem</A
>.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="COMMON-MISCELLANEOUS-ERRORS"
>3.10. Common miscellaneous errors</A
></H2
><P
>Some miscellaneous errors are discussed here.</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="RSS-BLOCK-ERROR"
>3.10.1. RSS block Error: There is a current problem with the headlines from this site</A
></H3
><P
>If you encounter the error</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>There is a current problem with the headlines from this site</PRE
></FONT
></TD
></TR
></TABLE
><P
>after some innocent changes in an RSS block, you are not alone. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
>This is a known issue and a solution is presented in <A
HREF="#RSS-BLOCK-ERROR"
>Section 3.10.1</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="MYSQL-ERRNO-145"
>3.10.2. MySQL errno: 145: Can't open file nuke_XXXX.MYI</A
></H3
><P
>If suddenly you get an error like:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Could not insert new word matches
DEBUG MODE
SQL Error : 1016 Can't open file: 'nuke_bbsearch_wordmatch.MYI'. (errno: 145)
INSERT INTO nuke_bbsearch_wordmatch (post_id, word_id, title_match) 
SELECT 4467, word_id, 0 FROM nuke_bbsearch_wordlist WHERE word_text IN ('testing')
Line : 282
File : /xxxx/xxxx/public_html/nuke/includes/functions_search.php</PRE
></FONT
></TD
></TR
></TABLE
><P
>then you will know that your MySQL database has been corrupted. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
>In the above example, the nuke_bbsearch_wordmatch table is damaged (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=332"
TARGET="_top"
>MySQL errno: 145 Can't open file nuke bbsearch wordmatch.MYI</A
>).</P
><P
>Solution: Enter the MySQL prompt from the shell:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysql -u dbuname -h dbhost -p dbname;</PRE
></FONT
></TD
></TR
></TABLE
><P
>where dbuname, dbhost and dbname are exactly the same as in your config.php (<A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>) - you will also be prompted for your password, which must also be the same as in config.php - and try the REPAIR TABLE command:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>repair table nuke_bbsearch_wordmatch;</PRE
></FONT
></TD
></TR
></TABLE
><P
>You can also try from the shell command-line the myisamchl utility:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>myisamchk -r nuke_bbsearch_wordmatch</PRE
></FONT
></TD
></TR
></TABLE
><P
>See <A
HREF="#REPAIR-CORRUPT-TABLE"
>Section 26.1</A
> on how to repair corrupt tables.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="MODULES-DISAPPEAR"
>3.10.3. Modules do not show up and/or disappear</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MODULES-4"
></A
><P
><B
>Figure 3-38.    Administration panel: Modules.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/modules.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Modules.</P
></DIV
></P
></DIV
></DIV
></P
><P
>In <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> version 7 alpha, when adding a module to the modules folder it won't show in admin/modules. When renaming a module, with FTP or similar, the module also disappears (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=306"
TARGET="_top"
>Modules do not show and/or disappear</A
>).</P
><P
>The problem is that in admin/modules/modules.php, of that version, on the line that inserts the modules in the folder modules, the number of fields is incorrect. In admin/modules/modules.php, the lines with:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>       if ($mid == "") {
      sql_query("insert into ".$prefix."_modules 
values (NULL, '$modlist[$i]', '$modlist[$i]', '0', '0', '1')", $dbi);
       }</PRE
></FONT
></TD
></TR
></TABLE
><P
>should have been:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>       if ($mid == "") {
           sql_query("insert into ".$prefix."_modules 
values (NULL, '$modlist[$i]', '$modlist[$i]', '0', '0', '1', '0')", $dbi);
       }</PRE
></FONT
></TD
></TR
></TABLE
><P
>Notice the <EM
>extra</EM
> </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>,'0' </PRE
></FONT
></TD
></TR
></TABLE
><P
>before the </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>)",$dbi);</PRE
></FONT
></TD
></TR
></TABLE
><P
>This error seems to affect v. 7 alpha and some of the 7.0 FINAL downloads. </P
><P
>You should also be aware that there are some third party modules which alter the nuke_modules table. All you have to do to determine if this might be a problem for you, is to view your nuke_modules table through phpMyAdmin (<A
HREF="#PHPMYADMIN"
>Section 3.3</A
>) or a similar tool, count the number of fields and then compare this number with the code in admin/modules.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($mid == "") {
      sql_query("insert into ".$prefix."_modules 
values (NULL, '$modlist[$i]', '$modlist[$i]', '0', '0', '1', '0')", $dbi);
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>The above gives us 7 fields.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="FORUMS-CANT-CREATE-CATEGORY-WITHOUT-NAME"
>3.10.4. Forums Error: Can't create a category without a name</A
></H3
><P
>You want to create a category in the Forum (see <A
HREF="#PHPBB-FORUM-ADMINISTRATION"
>Section 7.1.1</A
>), but you get the error:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>General Error 
Can't create a category without a name</PRE
></FONT
></TD
></TR
></TABLE
><P
>Your strategy in coping with error messages, in case your error is not obvious or not well explained by the message, is to search the whole code tree for the error text (just as you would search for a link text in <A
HREF="#FIND-ALL-REGISTRATION-LINKS"
>Section 26.5</A
>). In this case, it turns out that there is only one occurence, in modules/Forums/admin/admin_forums.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>case 'addcat':
        // Create a category in the DB
        if( trim($HTTP_POST_VARS['categoryname']) == '')
        {
                message_die(GENERAL_ERROR, "Can't create a category without a name");
        }</PRE
></FONT
></TD
></TR
></TABLE
><P
>As you can easily see, the error is issued if the category name contains only "white space"<A
NAME="AEN4884"
HREF="#FTN.AEN4884"
><SPAN
CLASS="footnote"
>[5]</SPAN
></A
> (which is what the <A
HREF="http://www.php.net/manual/en/function.trim.php"
TARGET="_top"
>PHP trim function</A
> strips from the beginning and end of a string), in simple words: if you did not enter any name for the category. Logical, isn't it?</P
><P
>But what happens if you swear that you <EM
>did</EM
> enter a name there? Isn't this error going to drive you nuts then? </P
><P
>In such situations, you should keep your calmness and try to think further than the obvious: what could be happenning behind the scenes in PHP-Nuke? Here are some possibilities (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=357"
TARGET="_top"
>Can't create a category without a name</A
>):</P
><P
></P
><OL
TYPE="1"
><LI
><P
>You entered an empty name - O.K., you already checked that, but let's include it, just for the sake of completeness. This means that $HTTP_POST_VARS['categoryname'], the value of the POST variable that holds the category name, is empty, or contains at most some white space.</P
></LI
><LI
><P
>Your browser does not send POST variables back to the server, e.g. it does not support forms. Also quite unlikely.</P
></LI
><LI
><P
>$HTTP_POST_VARS['categoryname'] was not empty when it arrived at PHP-Nuke, but <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> changed it. In fact, <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> subjects the POST and GET variables to some sanity checks (see <A
HREF="#SECURITY-AUDIT"
>Section 23.4.3</A
> for details), to see if they contain malicious code. If your category name contained any &#8220;forbidden&#8221; characters, it may be that some check routine in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> deleted it. Try a name that will not raise suspicions of SQL injection (<A
HREF="#SQL-INJECTION-WITH-PHP-NUKE"
>Section 23.3.2</A
>) and similar attacks.</P
></LI
><LI
><P
>You are logged in as the administrator <EM
>and</EM
> as a user. In this case, you browser has stored two cookies (<A
HREF="#COOKIES"
>Section 23.4.5</A
>) on your computer and it is not clear under what <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
> your action has been evaluated by <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. Try to avoid such situations. If you must me logged in as both a user and an administrator at all costs, you might try to use two different browsers for each <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
> (not two instances of the same browser, but two different products). They will store the cookies in different locations and will (hopefully) not mess them up.</P
></LI
></OL
><P
>Of course, YMMV. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="MISSING-BLOCKS"
>3.10.5. Left and right blocks are missing</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MISSING-BLOCKS"
></A
><P
><B
>Figure 3-39.    Missing blocks.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/missing-blocks.png"><DIV
CLASS="CAPTION"
><P
>Missing blocks.</P
></DIV
></P
></DIV
></DIV
></P
><P
>If your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site looks like the one in <A
HREF="#FIG-MISSING-BLOCKS"
>Figure 3-39</A
>, i.e. lacking totally the left and right columns with all the blocks in them, then maybe your nuke_blocks table is corrupt (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=416"
TARGET="_top"
>Missing blocks and modules</A
>, as well as <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=17061"
TARGET="_top"
>My blocks are gone</A
> and <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=18204"
TARGET="_top"
>Blocks have disappeared</A
>). See <A
HREF="#REPAIR-CORRUPT-TABLE"
>Section 26.1</A
> on how to repair a corrupt table.</P
></DIV
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="UPGRADE-PHP-NUKE"
></A
>Chapter 4. How to upgrade PHP-Nuke</H1
><P
>The upgrade of your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> system to a new version is done in the following steps:</P
><P
></P
><UL
><LI
><P
>Make a database backup. (See <A
HREF="#FIG-BACKUP-DB"
>Figure 26-2</A
> and <A
HREF="#ADMINISTRATION-FUNCTIONS"
>Section 7.1</A
>, for PHP-Nuke's own backup function, <A
HREF="#PHPMYADMIN"
>Section 3.3</A
> for phpMyAdmin's functionality, which also includes a very good web interface to database backups and <A
HREF="#BACKUP-MYSQL-USING-BROWSER"
>Section 27.16</A
>, for home-made scripts that automate the backup work for you.)</P
></LI
><LI
><P
>Verify that your current <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> version has not been modified (excluding the theme, that does not needs an update). In case it has been modified through the addition of modules that required a change in the original <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> files, or the database, proceed manually as outlined in <A
HREF="#INSTALL-MODULES-WITH-DATABASE-FILES-CHANGE"
>Section 26.3.3</A
>.</P
></LI
><LI
><P
>Test the upgrade locally first and not directly on the production site.</P
></LI
><LI
><P
>If all looks well, transfer the files and the database to the production site.</P
></LI
></UL
><P
>The update to a new version itself, is an operation that consists of two parts, the update of the database and the overwriting of the old files with the new ones. The update of the database is done automatically through appropriate scripts that can be found in the upgrades folder of the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> package. You have to upload the right upgrade script to your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> root directory on the server (where also config.php is located), then point your browser to it - this will update the database. See also <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=240"
TARGET="_top"
>How to upgrade PHP-Nuke</A
> and <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=258"
TARGET="_top"
>PHP-Nuke upgrade</A
>.</P
><P
>If you are upgrading from a version that is more than one version apart from the version you are aiming at, then you have to apply all patches sequencially, from the old one, through any intermediate versions, up to the newest one. Thus, for the passage of 6.6 to 6.8, you must apply both upgrade66-67.php and upgrade67-68.php.</P
><P
>If you are upgrading from 5.6 to 6.0, you must also overwrite the config.php file with the new one, then edit it again with the right values (see <A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>).</P
><P
>The following sections cover some examples in detail.</P
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="UPGRADE-PHP-NUKE-60-65"
>4.1. From 6.0 to 6.5</A
></H2
><P
>See <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=15248"
TARGET="_top"
>phpNuke Upgrade from 6.0 to 6.5</A
>.</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="UPGRADE-INSTRUCTIONS-60-WITHOUT-BBTONUKE"
>4.1.1. Upgrade instructions for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.0 without Tom's bbtonuke port</A
></H3
><P
></P
><OL
TYPE="1"
><LI
><P
>Make a backup of the database tables and all files.</P
></LI
><LI
><P
>Using your current config.php as a guide configure the new config.php's settings, <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.5's config.php has a new variable: $sitekey, it is recommended that you change at least some of the letters/numbers in it to make it unique.</P
></LI
><LI
><P
>Upload all files and folders included in Nuke's html folder so that they replace your current files.</P
></LI
><LI
><P
>Upload upgrade60-65.php to Nuke's main directory (where config.php is) and point your browser to it. Delete it once done.</P
></LI
><LI
><P
>If you were using Splatt forum with Nuke 6.0 and wish to transfer its data into the new bbtonuke forum, use NSN_Move</P
></LI
></OL
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="UPGRADE-INSTRUCTIONS-60-WITH-BBTONUKE"
>4.1.2. Upgrade instructions for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.0 with Tom's 2.0.6 bbtonuke port</A
></H3
><P
></P
><OL
TYPE="1"
><LI
><P
>Make a backup of the database tables and all files.</P
></LI
><LI
><P
>Using your current config.php as a guide configure the new config.php's settings, <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.5's config.php has a new variable: $sitekey, it is recommended that you change at least some of the letters/numbers in it to make it unique.</P
></LI
><LI
><P
>Upload all files and folders included in Nuke's html folder so that they replace your current files.</P
></LI
><LI
><P
>Upload nukebbsql.php to Nuke's main directory (where config.php is) and point your browser to it. Delete it once done.</P
></LI
></OL
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="UPGRADE-PHPBB-PHP-NUKE"
>4.2. From phpBB to PHP-Nuke</A
></H2
><P
>If you have an existing phpBB Forum and would like to integrate it into one of the newer <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> versions that come with phpBB Forums, you should use the <A
HREF="http://www.ruleit.co.uk/nuke/forums/viewtopic.php?t=524"
TARGET="_top"
>phpBB to <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Script</A
> from the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> UK Forums. To install it, put the code into a file, edit the variables at the top and save it as transfer.php, for example. Upload the file to the same directory as your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> config.php and point your browser to it. See also <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=419"
TARGET="_top"
>How to integrate new <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> with existing phpBB Forum</A
>.</P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Always backup!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Backup both your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> database and your phpBB database before running this script.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PHP-NUKE-UPGRADE-SCRIPTS"
>4.3. PHP-Nuke upgrade scripts</A
></H2
><P
>What's in an upgrade script? Let's take a few representative examples of code and explain what they do, so that you get an idea of what is going on in such a script<A
NAME="AEN5081"
HREF="#FTN.AEN5081"
><SPAN
CLASS="footnote"
>[6]</SPAN
></A
>:</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>UPDATE (Version number):</DT
><DD
><P
>the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> version is updated in the nuke_config table through the UPDATE command:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>// &#60;application&#62;PHP-Nuke&#60;/application&#62; Version Number Update
$db-&#62;sql_query("UPDATE ".$prefix."_config SET Version_Num='6.7'");</PRE
></FONT
></TD
></TR
></TABLE
></DD
><DT
>UPDATE (Forums):</DT
><DD
><P
>some forum parameters are modified through the UPDATE command.</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>// &#60;application&#62;PHP-Nuke&#60;/application&#62; Forums Update
$db-&#62;sql_query("UPDATE ".$prefix."_bbconfig SET config_value='.0.4' where
config_name='version'");
$db-&#62;sql_query("UPDATE ".$prefix."_bbconfig SET config_value='3600' where
config_name='session_length'");</PRE
></FONT
></TD
></TR
></TABLE
></DD
><DT
>INSERT:</DT
><DD
><P
>some values are inserted into the nuke_bbconfig table through the INSERT command:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$db-&#62;sql_query("INSERT INTO ".$prefix."_bbconfig VALUES ('config_id','1')");</PRE
></FONT
></TD
></TR
></TABLE
></DD
><DT
>DELETE:</DT
><DD
><P
>a recorde is deleted from the nuke_headlines table through the DELETE command</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$db-&#62;sql_query("DELETE FROM ".$prefix."_headlines WHERE
sitename='Linux.com'");</PRE
></FONT
></TD
></TR
></TABLE
></DD
><DT
>DROP TABLE:</DT
><DD
><P
>the whole table nuke_priv_msgs is deleted from the database through the DROP TABLE command.</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$db-&#62;sql_query("DROP TABLE ".$prefix."_priv_msgs");</PRE
></FONT
></TD
></TR
></TABLE
></DD
><DT
>ALTER TABLE:</DT
><DD
><P
>the structure of the nuke_users table is modified through the ALTER TABLE command:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$db-&#62;sql_query("ALTER TABLE ".$user_prefix."_users CHANGE uname username
VARCHAR(25) NOT NULL");</PRE
></FONT
></TD
></TR
></TABLE
></DD
><DT
>CREATE TABLE:</DT
><DD
><P
>a new table (nuke_bbforum_prune) is created through the CREATE TABLE command:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$db-&#62;sql_query("CREATE TABLE ".$prefix."_bbforum_prune (prune_id mediumint
(8) unsigned NOT NULL auto_increment, forum_id smallint(5) unsigned NOT NULL
default '0', prune_days tinyint(4) unsigned NOT NULL default '0', prune_freq tinyint
(4) unsigned NOT NULL default '0', PRIMARY KEY (prune_id), KEY forum_id
(forum_id))");</PRE
></FONT
></TD
></TR
></TABLE
></DD
></DL
></DIV
><P
>See <A
HREF="#SQL-SYNTAX"
>Section 28.5</A
> for the syntax of SQL code.</P
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="MOVE-PHP-NUKE"
></A
>Chapter 5. How to move PHP-Nuke</H1
><P
>We discuss how to move <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> from your computer to your ISP (<A
HREF="#TRANSFERRING-LOCAL-INSTALLATION-TO-WEB"
>Section 5.1</A
>), or from one ISP to another (<A
HREF="#CHANGING-WEB-HOSTER"
>Section 5.2</A
>). This is something that you should plan carefully. The following sections will show you how.</P
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="TRANSFERRING-LOCAL-INSTALLATION-TO-WEB"
>5.1. Transferring a local installation to the Web</A
></H2
><P
>You may prefer to test <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> on your local box and acquaint with its features at your own pace, without the need to be constantly online. In this case, when you are done with your evaluation, you will face the problem of transferring your local installation to your webspace. A fresh installation on the Web may not be very attractive an option to you, if you did some more or less heavy customization of the code or preferences.</P
><P
>For the files, simply upload the content of the html folder to your document root, or wherever you want it to appear under that. For the database, use mysqldump or phpMyAdmin (see <A
HREF="#PHPMYADMIN2"
>Section 3.4</A
>) to do a backup of the database and import the data into the MySQL of your web presence. </P
><P
>To do a backup from the command line using mysqldump, do:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysqldump -h dbhost -u dbuname -p dbname &#62; dbbackup.sql</PRE
></FONT
></TD
></TR
></TABLE
><P
>where dbhost, dbuname and dbname are exactly what you entered in config.php (see <A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>) for these variables. To import the data using mysql from the command line, do:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysql -h dbhost -u dbuname -p dbname &#60; dbbackup.sql</PRE
></FONT
></TD
></TR
></TABLE
><P
>If you change your local files and/or tables regularly, you may choose to transfer only the files/tables that changed. In this case, you should drop the affected tables before you reimport them. phpMyAdmin offers a convenient interface for this (see <A
HREF="#PHPMYADMIN-NAVIGATION-BAR-SQL"
>Section 3.4.2</A
> and <A
HREF="#RESTORE-SINGLE-TABLE"
>Section 26.2.1</A
>). </P
><P
>It is a good idea to announce these measures to your community, to avoid frustration among your users.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CHANGING-WEB-HOSTER"
>5.2. Changing Web hoster</A
></H2
><P
>Sooner or later in the life of any webmaster, the time comes for a project that most of us wished would never happen: change the hosting company! In this chapter we will take the dread out of moving your nuked site by simply outlining all the necessary steps for this operation to succeed. You will see that, although it may take some planning and foresight, it is a straightforward procedure after all. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_smile.png"></SPAN
> </P
><P
>During the whole procedure, it is important to remember that in this case, unlike the one in <A
HREF="#TRANSFERRING-LOCAL-INSTALLATION-TO-WEB"
>Section 5.1</A
>, you have your users to take care of. Treat them with kindness and inform them of the coming changes, so they are prepared if something does not work as expected.</P
><P
>Here is the step-by-step plan to change web hoster for your PHP-Nuke:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>Your current hoster X doesn't fit your needs anymore. You have found a better one, Y, with better conditions. But does the new hoster Y support all the functionality you need? How about</P
><P
></P
><UL
><LI
><P
>Apache (version?) and modules (mod_gzip, GD library, mod_auth, mod_rewrite and all the other modules you may be using at hoster X)</P
></LI
><LI
><P
>PHP (version? how about <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> extensions?)</P
></LI
><LI
><P
>MySQL (version? how many databases?)</P
></LI
></UL
></LI
><LI
><P
>You obtained the new server or webspace at hoster Y. Set the time frame for your move. A small, amateur site may need only a few days, whereas for a big, commercial one two weeks may be more appropriate.</P
></LI
><LI
><P
>Ask hoster X to lower the TTL (time to live) of your domain's zone files to 900 seconds or a similar value. Normally, TTL is set to a much higher value, since DNS information does not change very often. The new, lower TTL value will force DNS servers around the world to update their records about your domain in a much more frequent pace than usually. This way, changes in your domain's DNS information will propagate much faster through the Internet.</P
></LI
><LI
><P
>Make sure the basic &#8220;software infrastructure&#8221; is there on your new server (or webspace) and is working:</P
><P
></P
><UL
><LI
><P
>Firewall with your custom settings (if any).</P
></LI
><LI
><P
>E-Mail functionality up and running</P
></LI
><LI
><P
>Web server configuration correct and adapted to your needs</P
></LI
><LI
><P
>phpMyAdmin installed and working</P
></LI
></UL
></LI
><LI
><P
>Lock your filesystem on X and move all files from X to Y. You don't move your database on X yet, but you do move all files, even files that control access to your site, like .htaccess, hosts.allow, hosts.deny etc . files.</P
></LI
><LI
><P
>Do a first check using the file</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
phpinfo();
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Put it somewhere on your new webspace, name it test.php and just point your browser to it. Check that the output (file locations, configuration etc.) is what you expected.</P
></LI
><LI
><P
>Now it's time to move your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> database. Do an announcement (see <A
HREF="#ADMINISTRATION-FUNCTIONS"
>Section 7.1</A
>) that you will be dumping the database, then use mysqldump to dump it: </P
><P
>From the command line, do:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysqldump -h dbhost -u dbuname -p dbname &#62; dbbackup.sql</PRE
></FONT
></TD
></TR
></TABLE
><P
>where dbhost, dbuname and dbname are exactly what you entered in config.php (see <A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>) for these variables.</P
><P
>If your database is small, say smaller than 10MB, you could try to use phpMyAdmin for the backup. But since phpMyAdmin is a <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> script like all the others, it is also subject to the same <ACRONYM
CLASS="ACRONYM"
>CPU</ACRONYM
> time constraints (which you can see in the output of the test.php file above, if you run it on hoster X). The limit is usually set to 30 seconds, which is not enough for backups of large databases. You may end up with no backup or, worse, with corrupted data. But for a small site, one with a small database that is, doing the backup with phpMyAdmin is certainly an option. See <A
HREF="#BACKUP-MYSQL-USING-BROWSER"
>Section 27.16</A
> for backups through the web and <A
HREF="#REPAIR-CORRUPT-TABLE"
>Section 26.1</A
> for instructions on how to repair a corrupted table or database.</P
></LI
><LI
><P
>Transfer the dbbackup.sql file to your webspace on hoster Y (you may want to compress it before you do this - compression will reduce file size and transfer time dramatically). Import the data into MySQL on Y with the command </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysql -h dbhost -u dbuname -p dbname &#60; dbbackup.sql</PRE
></FONT
></TD
></TR
></TABLE
><P
>or using phpMyAdmin.</P
></LI
><LI
><P
>Test <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> on Y to ensure it is working properly. Since your domain still points (through the DNS records on hoster X) to the old webspace on X, you will have to use the IP address in the URL and in the preferences (see <A
HREF="#PREFERENCES"
>Section 7.2</A
>) for the tests of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> on Y.</P
></LI
><LI
><P
>If all looks good on Y, put a .htaccess file (see <A
HREF="#HTACCESS-FILE"
>Section 25.4</A
>) in the document root on your server at X to redirect any requests to the new server at Y. That is, any requests to your domain will be re-routed to the IP of the server at Y. The following line in your .htaccess file will do this for you:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>redirectPermanent /oldlocation.html http://www.mynewdomain/folder/newlocation.html</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Update your domain's DNS records to point to the webspace at host Y. The lower TTL setting above will take care for a rapid propagation of the new DNS information throughout the world's name servers. Changes should propagate in a few hours.</P
></LI
><LI
><P
>Keep your server at X for a couple of days to ensure that all DNS servers got the updated records, then cancel your services at X at your own leisure. Once you do so, you will no longer need to access Y with the IP address.</P
></LI
></OL
><P
>In case you don't have direct control over the DNS record updates, you will have to monitor your Y site closely, especially after receipt of the confirmation mail announcing to you that your application has been approved by both hosters. You may want to write a small cron job that accesses Y by name every 5 minutes and sends you an e-mail on success. As soon as your webspace on Y is accessible by your domain name, you will know that step 11 will be completed in a few hours or, in case you couldn't change TTL, a day.</P
><P
>The key idea to the above process is that you put a .htaccess file on X, redirecting from X (still accessed by domain name) to Y (accessed by IP address), as soon as you transfer the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> database to Y. See also <A
HREF="http://www.nukecops.com/article-357--0-0.html"
TARGET="_top"
>How to move a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site</A
>.</P
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="FRONTEND"
></A
>Chapter 6. Front end structure: user view</H1
><P
>In this chapter we will occupy ourselves, in detail, with all the functionalities implemented in PHP-Nuke, that is what our portal system can do and how. We will do this from the part of the visitor, imagining that we are the one who visits our site and uses its functionality. </P
><P
>We will analyze all the preinstalled modules in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>  distribution and will give a look also at some very interesting modules that still have not been included in the official distribution. We will differentiate between the 6.0 version and its successors, since there have been important changes starting from version 6.5 - the <A
HREF="http://www.splatt.it"
TARGET="_top"
>Splatt forum</A
>, for example, has been replaced by the <A
HREF="http://www.phpbb.com"
TARGET="_top"
>phpBB f.orum</A
>, this has created changes in other modules, like Your_Account or Private_Messages, that are now interoperating with phpBB.</P
><P
>Before starting, we should spend two words on how <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> is structured; this system is structured as a 3 column portal, the two lateral ones including the blocks, the central one displaying the function modules. This does not mean to say that the structure of our site cannot be modified completely. The initial skeleton is, favorably, the one to start from in order to create a super personalized portal. Beyond the 3 columns mentioned we have also a header (top of page) and a footer (bottom of page). </P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Blocks:</DT
><DD
><P
>they are present in the left/right columns of our portal<A
NAME="AEN5347"
HREF="#FTN.AEN5347"
><SPAN
CLASS="footnote"
>[7]</SPAN
></A
> and deliver functions that are repeated in all pages of the site (e.g. the menu, banner and login blocks).</P
></DD
><DT
>Modules:</DT
><DD
><P
>They are the heart of the page, they appear in the center column and each one has its own function. For example the news module delivers the articles, the search module makes an internal search of our site - they should be imagined as independent pages. They are the "heart" of the page that we visit (see <A
HREF="#FIG-HOMEPAGE"
>Figure 6-1</A
>).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-HOMEPAGE"
></A
><P
><B
>Figure 6-1.    <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Homepage
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/homepage.png"><DIV
CLASS="CAPTION"
><P
>PHP-Nuke Homepage</P
></DIV
></P
></DIV
></DIV
></P
></DD
></DL
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PREINSTALLED-MODULES"
>6.1. The preinstalled modules</A
></H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>news:</DT
><DD
><P
>Born  as the heart of PHP-Nuke, it was the obligatory Home Page in previous versions. In the last versions it is instead possible to define which modules should appear as the default page.</P
><P
>The News module expands its branches on more pages. The first one we see is a collection of the latest News published (it is possible , from the configuration panel [admin-&#62;preferences] to choose the number of latest news to be displayed, say 5, 10, 15, 20, 25, 30). In the main page only a small initial text of the news article is published. If the text is too large, it will be possible to read it whole by pressing the link &#8220;Read more&#8221;.</P
><P
>The article module has many elements that distinguish it from other ones. In the first place, the title, the topic, that is the main category and is usually characterized by an image that, if clicked, brings up a selection of the articles that belong to this topic (starting from version 6.6, it is possible to assign more than one topics to one article). We have a second way to classify the articles, which is to assign them a category they are supposed to belong (see <A
HREF="#FIG-CATEGORY"
>Figure 6-2</A
>).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-CATEGORY"
></A
><P
><B
>Figure 6-2.    Classifying articles
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/category.png"><DIV
CLASS="CAPTION"
><P
>Classifying articles</P
></DIV
></P
></DIV
></DIV
></P
><DIV
CLASS="IMPORTANT"
><P
></P
><TABLE
CLASS="IMPORTANT"
WIDTH="90%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.png"
HSPACE="5"
ALT="Important"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>IMPORTANT</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>This category is NOT a subcategory of topics, but rather a cross-sectional category that is completely independent from topics. Probably its most important function is to distinguish between "articles" and other admin-defined classes of news for which it will be possible to NOT be automatically published on the start page. "Articles" will always appear on the start news page.</P
></TD
></TR
></TABLE
></DIV
><P
>For example, imagine a portal that talks about soccer and it has 3 topics: </P
><P
></P
><UL
><LI
><P
>League A</P
></LI
><LI
><P
>League B</P
></LI
><LI
><P
>League C</P
></LI
></UL
><P
>We could think of cross-sectional categories like: </P
><P
></P
><UL
><LI
><P
>Championship</P
></LI
><LI
><P
>Champions League</P
></LI
><LI
><P
>Soccer player market </P
></LI
></UL
><P
>We can have an article that talks about League A/Championship, or of the Soccer player market League B. Clicking o topic, say League A, we will have a selection of all the articles that talk about League A, clicking on the category, Soccer player market, will have a selection of the articles that independently talk about soccer market that independently of the League being A, B or C. </P
><P
>At the bottom of the article we find more information about the article: who inserted it, when &#38; how many times it has been read etc.</P
><DIV
CLASS="IMPORTANT"
><P
></P
><TABLE
CLASS="IMPORTANT"
WIDTH="90%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.png"
HSPACE="5"
ALT="Important"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The counter is incremented only if the "Read more" link has been clicked. The counter does not increment unless the user clicks "Read more".</P
></TD
></TR
></TABLE
></DIV
><P
>It displays how many more bytes are still to be read, if there have been any comments on the article and what score has been given to the article by the readers. It is also possible to print the article in a printer-friendly format or you can send the link via e-mail to a friend.</P
><P
>Clicking on " Read all " brings us to the page that contains the entire article and the comments pertaining to it. In this page the user can read the entire article and interact with it through a multitude of operations.</P
><P
>He/She can cast a vote for the article, thus expressing a judgement on its validity, can comment on the article or answer to comments inserted from other users, can follow the links associated with this article, display it in a printer-friendly format and send the link via e-mail to a friend. You can also attach a survey to the article.</P
><P
>In <A
HREF="#MODIFYING-PHP-NUKE-NEWS-MODULE"
>Section 18.7</A
> we show how to modify the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> News module.</P
></DD
><DT
>AvantGO:</DT
><DD
><P
>It is  a very simplified version of the news archive, cretated mainly from the need to visit the page via a Palm Pilot. AvantGO is a system for archiving and visualizing the pages on palmtop screens due to the fact the Palm Pilot has a very small screen and has a low resolution (and even a low bandwidth connection) so they require simplified pages.</P
></DD
><DT
>Downloads Module:</DT
><DD
><P
>This module is deeply branched and is used to manage a file archive (present on our own or a third party site). It offers various modes of interaction the user (see <A
HREF="#FIG-DOWNLOADS-ADMIN"
>Figure 6-3</A
>). </P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-DOWNLOADS-ADMIN"
></A
><P
><B
>Figure 6-3.    Downloads module
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/downloads-admin.png"><DIV
CLASS="CAPTION"
><P
>Downloads module</P
></DIV
></P
></DIV
></DIV
></P
><P
>In the main page it is possible to use an internal search engine that searches for keywords among all the files cataloged. There is also the possibility to add external links to a file (these files will not be added immediately, but put in a waiting list until an administrator will approve them and they become visible). We can also base our selection on which files were downloaded most, or which ones obtained the highest score. On this page we can have a list of categories that accompany the files (there may exist subcategories but in <A
HREF="#FIG-DOWNLOADS-ADMIN"
>Figure 6-3</A
> there is only 1 category, &#8220;Linux Downloads&#8221;), the user is recognized when he/she views the downloads section after their first visit so if new downloads have been added since the last visit, the corresponding category will be have a "new" icon beside it.</P
><P
>Once we have entered the desired section, we can download the files that interest us, cast a judgment vote, report a nonexistent link to the administrator or see more information regarding the author of the file.</P
><P
>The file list may be ordered by insertion date, judgment or popularityy (files downloaded most).</P
><P
>Read <A
HREF="#ENTER-THOUSANDS-OF-DOWNLOAD-LINKS"
>Section 27.6</A
> if you are looking for a quick way to enter thousands of Downloads links. Further, in <A
HREF="#MODIFYING-PHP-NUKE-DOWNLOADS-MODULE"
>Section 18.10</A
> we show how to modify the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Downloads module.</P
></DD
><DT
>Feedback:</DT
><DD
><P
>Allows the user to send feedback and contact the webmaster of the site. The user just fills in the appropriate fields which are &#8220;Name&#8221;, &#8220;E-Mail&#8221; and then the &#8220;Message Text&#8221;. The system will then format an e-mail message that will arrive to the webmaster of the site.</P
></DD
><DT
>Member List:</DT
><DD
><P
>It displays all the users registered on the site. It is  possible to select the users on the basis of their basic information fields (name, nickname, personal homepage and e-mail address). It is  also possible to obtain a complete list of all the users and to order it by real name, e-mail address or homepage.</P
></DD
><DT
>Private messages:</DT
><DD
><P
>All the registered users have access to an internal messaging system, thus being able to exchange messages with each other. In the login box of each user the number of messages that are archived for this user will be displayed, and there is a management functionality allowing for replies or deletions (see <A
HREF="#FIG-PRIVATE-MESSAGES"
>Figure 6-4</A
>).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PRIVATE-MESSAGES"
></A
><P
><B
>Figure 6-4.    Private messages
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/private_messages.png"><DIV
CLASS="CAPTION"
><P
>Private messages</P
></DIV
></P
></DIV
></DIV
></P
><P
>The message that we compose has various parts:</P
><P
></P
><UL
><LI
><P
>The Recipient</P
></LI
><LI
><P
>The Subject </P
></LI
><LI
><P
>The animated icon that will accompany the subject of the message</P
></LI
><LI
><P
>The text that can be equipped with emoticons (emotional icons) and an aid for formatting the message in HTML adding Hyperlinks, emphasized words, bullet lists etc...</P
></LI
></UL
><P
>In case there are private messages waiting for a user, this will be indicated in the login block.</P
><P
>Starting from version 6.5, the Private Messages module has been changed: it has been integrated to the private messaging functionality of the phpBB forum. Sending functionality has not been changed, but there have been additions in other areas like:</P
><P
></P
><UL
><LI
><P
>The list of sent messages.</P
></LI
><LI
><P
>The list of drafts (messages that were written, but not have not yet been sent).</P
></LI
><LI
><P
>The remaining space in the box containing the list of messages.</P
></LI
></UL
><P
>The module has been integrated in a very strict fashion into the phpBB forum.</P
></DD
><DT
>Recommend Us:</DT
><DD
><P
>This module is so you can send an e-mail to a friend recommending visiting our <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site. The message that will be sent to the friend must be configured by the administrator.</P
></DD
><DT
>Book Reviews:</DT
><DD
><P
>This module serves as an archive of product/services/site reviews. The book review must be inserted by the administrator but also from a user (a book review will need , in this case, be accepted by the administrator) who, after inserting a short description of the product then may express his judgment assigning a score to it. It is also possible to insert a descriptive image. The book reviews are catalogued in alphabetical order and the selection can be made based on starting letter. </P
><P
>We discuss how to modify the Reviews module in <A
HREF="#MODIFYING-PHP-NUKE-MODULE-REVIEWS"
>Section 18.4</A
>.</P
></DD
><DT
>Search:</DT
><DD
><P
>It is the main search engine for PHP-Nuke, it does full text searches on articles, comments, sections, users and book reviews (see <A
HREF="#FIG-SEARCH"
>Figure 6-5</A
>). It is  possible to make multiple searches (e.g.. an article of a certain category written by a certain author).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-SEARCH"
></A
><P
><B
>Figure 6-5.    Search module
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/search.png"><DIV
CLASS="CAPTION"
><P
>Search module</P
></DIV
></P
></DIV
></DIV
></P
></DD
><DT
>Sections:</DT
><DD
><P
>This module is a classification system parallel to the one of the topics. The classification of articles in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> does not follow a tree-like scheme, as in the following example:</P
><P
></P
><UL
><LI
><P
>Series A</P
><P
></P
><UL
><LI
><P
>Amateur football</P
></LI
><LI
><P
>Professional football</P
></LI
><LI
><P
>Gossip</P
></LI
></UL
></LI
><LI
><P
>Series B</P
><P
></P
><UL
><LI
><P
>Amateur football</P
></LI
><LI
><P
>Professional football</P
></LI
><LI
><P
>Gossip</P
></LI
></UL
></LI
></UL
><P
>Instead, classification is achieved through the use of two transversal criteria, of which one is the &#8220;Section&#8221; and the other one the &#8220;Topic&#8221;, as is better captured by a table, whose two dimensions (rows and columns) cover the two criteria (see <A
HREF="#TAB-SECTIONS"
>Table 6-1</A
>).</P
><P
><DIV
CLASS="TABLE"
><A
NAME="TAB-SECTIONS"
></A
><P
><B
>Table 6-1. Classification with topics and sections</B
></P
><TABLE
BORDER="1"
RULES="all"
CLASS="CALSTABLE"
><COL
WIDTH="1*"
ALIGN="LEFT"
TITLE="COL0"><COL
WIDTH="1*"
ALIGN="CENTER"
TITLE="COL1"><COL
WIDTH="1*"
ALIGN="CENTER"
TITLE="COL2"><COL
WIDTH="1*"
ALIGN="CENTER"
TITLE="COL3"><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
></P
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
><P
>Series A</P
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
><P
>Series B</P
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
><P
>Series C</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Amateur football</P
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
><P
>x</P
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
><P
>x</P
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
><P
></P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Professional football</P
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
><P
></P
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
><P
>x</P
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
><P
></P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Gossip</P
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
><P
></P
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
><P
>x</P
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
><P
>x</P
></TD
></TR
></TBODY
></TABLE
></DIV
></P
><P
>We discuss how to modify the Sections module in <A
HREF="#MODIFYING-PHP-NUKE-SECTIONS-MODULE"
>Section 18.9</A
>.</P
></DD
><DT
>Statistics:</DT
><DD
><P
>The statistics module provides basic statistical information regarding use of the site. The information varies from the total number of displayed pages , to the type of browser and operating system used, up to the number of users that are registered, the version of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> used etc.(see <A
HREF="#FIG-STATS"
>Figure 6-6</A
>).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-STATS"
></A
><P
><B
>Figure 6-6.    Statistics module
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/stats.png"><DIV
CLASS="CAPTION"
><P
>Statistics module</P
></DIV
></P
></DIV
></DIV
></P
></DD
><DT
>Stories archive:</DT
><DD
><P
>Archives all the articles by month enabling a chronological consultation. After having chosen the month, the corresponding articles are displayed with small flags besides them, visualizing the language they were written. Also in this plane it is possible to see the article in printable format and to send it to a friend. An inner search engine is  also comprised as well as the display of details regarding the article, such as:</P
><P
></P
><UL
><LI
><P
>number of comments </P
></LI
><LI
><P
>number of readings </P
></LI
><LI
><P
>score</P
></LI
></UL
><P
>We discuss how to modify the Stories Archive module in <A
HREF="#MODIFYING-PHP-NUKE-STORIES-ARCHIVE"
>Section 18.11</A
>.</P
></DD
><DT
>Submit news:</DT
><DD
><P
>The users or the simple visitors of the site can propose to the administrator an article that will then be examined and, if approved, published. The users do not have all the possibility of classification that the administrator does, in fact they can only decide the article's title, the topic, the language and the text. They cannot classify it or choose if it should appear in the Home Page or not. And they can neither decide to publish it on a temporary basis. </P
><P
>We discuss how to modify the News module in <A
HREF="#MODIFYING-PHP-NUKE-NEWS-MODULE"
>Section 18.7</A
>.</P
></DD
><DT
>Surveys:</DT
><DD
><P
>Enables the administrator to create a survey that will later appear in a block (<A
HREF="#FIG-SURVEYS-BLOCK"
>Figure 6-14</A
>) or in the survey list. The users can vote on this survey (not more than once in 24 hours), and possibly leave a comment. Moreover it is possible to display the list of the previous surveys and to consult their final results.</P
></DD
><DT
>Top10:</DT
><DD
><P
>It lists the top 10 active elements of our portal:</P
><P
></P
><UL
><LI
><P
>10 most read articles</P
></LI
><LI
><P
>10 most commented articles</P
></LI
><LI
><P
>10 most active categories</P
></LI
><LI
><P
>10 most read articles in the special sections</P
></LI
><LI
><P
>10 most voted surveys</P
></LI
><LI
><P
>10 most active authors</P
></LI
><LI
><P
>10 most read book reviews</P
></LI
><LI
><P
>10most downloaded files</P
></LI
><LI
><P
>10 most read pages</P
></LI
></UL
></DD
><DT
>Topics:</DT
><DD
><P
>Lists the main categories of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. Once we have entered this module, we will be able, by clicking on the corresponding icon of the topic we are interested in, to carry out a selection of articles and in automatic mode, to see all the articles corresponding to this topic. We are also presented with a small search interface to finish our search in the chosen context.</P
></DD
><DT
>WebLinks:</DT
><DD
><P
>It is  a collection of web links. This module has the exact same functionality as the Download module so there is no need to explain it any more. </P
><P
>Read <A
HREF="#ENTER-THOUSANDS-OF-WEB-LINKS"
>Section 27.5</A
> if you are looking for a quick way to enter thousands of Web links. Further, in <A
HREF="#MODIFYING-PHP-NUKE-MODULE-WEB-LINKS"
>Section 18.5</A
> we show how to modify the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Web Links module.</P
></DD
><DT
>Your Account:</DT
><DD
><P
>It's the administration console for your &#8220;User Profile&#8221; (It only works for registered users), the implemented functions are (see <A
HREF="#FIG-YOUR-ACCOUNT"
>Figure 6-7</A
>):</P
><P
></P
><UL
><LI
><P
>Change your info: enables management of your profile by changing your E-mail, Where you're from, AIM, ICQ, Avatar &#38; Fake E-mail etc...</P
></LI
><LI
><P
>Change your Home: creates a personalized menu (as a block) for navigation, the user can put in there whatever he wants (tests, links, images).</P
></LI
><LI
><P
>Setup comments: Configures the display of comments, assigning display criteria.</P
></LI
><LI
><P
>Theme selection: Changes the theme of the site, allowing you to choose between all available themes.</P
></LI
><LI
><P
>Journal: enables you to write your own diary to be published on the portal. Something like a Weblog in a Weblog, so to say. ;-)</P
></LI
><LI
><P
>Webmail: once configured correctly, this mail application allows you to read all your e-mails from all your e-mail accounts, without the need for any other mail client.</P
></LI
><LI
><P
>Logout/Exit: It lets us exit from our current user profile, cancelling the cookie.</P
></LI
><LI
><P
>My Headlines: Imports into the user's private area those news in RDF/RSS format that are published by preselected news sources. The user can thus set up together his own personalized newspaper. An even broader news functionality is offered by the My Headlines module (<A
HREF="#PHP-NUKE-MY-HEADLINES-MODULE"
>Section 8.3.9</A
>), whose functionality you can see in action at Chris' <A
HREF="http://www.karakas-online.de/myHeadlines/"
TARGET="_top"
>News-o-matic</A
> page.</P
></LI
><LI
><P
>Broadcast Message: If the subject is aproppriate and the administrator has allowed it in the Preferences of the administration panel (<A
HREF="#BACKEND"
>Chapter 7</A
>), we can send messages that will be visible to all users on the home page of the site. It is also possible to disable the function, so that we don't see messages broadcast by other users.</P
></LI
><LI
><P
>Your private messages: This box displays the user's private messages.</P
></LI
><LI
><P
>Last 10 articles: Offers a list of the last 10 articles posted by that user.</P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-YOUR-ACCOUNT"
></A
><P
><B
>Figure 6-7.    Your account
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/your_account.png"><DIV
CLASS="CAPTION"
><P
>Your account</P
></DIV
></P
></DIV
></DIV
></P
><P
>We then have a main menu that informs us of how many and which comments we have inserted and how many stories we have published.</P
><P
>In <A
HREF="#MODIFYING-PHP-NUKE-MODUKE-YOUR-ACCOUNT"
>Section 18.6</A
> we show how to modify the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Your Account module. If you are looking for a module that extends the possibilities of the standard Your Account module, have a look at the Your Account Tweak module in <A
HREF="#NSN-YOUR-ACCOUNT-TWEAK-MODULE"
>Section 8.3.3</A
> and the Approve Membership module in <A
HREF="#PHP-NUKE-APPROVE-MEMBERSHIP-MODULE"
>Section 8.3.4</A
>.</P
></DD
><DT
>Content:</DT
><DD
><P
>This is a module that allows you to create your pages just as you prefer: you can insert HTML code (even one created by those very ugly visual editors) and it will be incorporated into the look and feel of your theme when the article is displayed. </P
><P
>The Content module posesses a series of fields. Some are displayed only in the first page, some others only in the last one. The &#8220;Page Header&#8221; field is the principal one, it is possible to separate the content into subpages, inserting at the aproppriate places in the text the &#60;!--pagebreak&#62; tag. For example, if you write</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>My Homepage is the best website
&#60;!--pagebreak&#62;
I visit it every day</PRE
></FONT
></TD
></TR
></TABLE
><P
>then the text &#8220;I visit it every day&#8221; will be on the second page. See also <A
HREF="#INCLUDE-HTML-FILE-IN-MODULE"
>Section 21.5</A
>, <A
HREF="#INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE"
>Section 21.6</A
> and <A
HREF="#INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE-IFRAME"
>Section 21.7</A
> for other techniques to incorporate HTML content in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>.</P
></DD
><DT
>Encyclopedia:</DT
><DD
><P
>It is  a system for creating one or more word dictionaries. In the first selection scheme it requires you to enter the dictionary (displaying even a small flag that indicates the language), after the click we are invited to choose the letter that corresponds to the searched word or to use the inner search engine of the encyclopedia, once found it's enough to click on the word to discover its meaning.</P
><P
>In <A
HREF="#MAKE-ENCYCLOPEDIA-INTERNATIONAL"
>Section 27.9</A
>, you can read how to internationalize the Encyclopedia module. You can also use the Random Quotes block (<A
HREF="#PHP-NUKE-RANDOM-QUOTES-BLOCK"
>Section 8.2.8</A
>) to create a random encyclopedia.</P
></DD
><DT
>FAQ:</DT
><DD
><P
>It is  an archive of Questions/Answers divided by category that can be consulted by the user as a first solution to his problems. He can divide the Questions/Answers by category in order to facilitate the consultation.</P
><P
>If you want to display HTML code in a FAQ, have a look at <A
HREF="#DISPLAY-HTML-CODE-IN-FAQ"
>Section 27.4</A
>. See also <A
HREF="#DUPLICATING-PHP-NUKE-FAQ-MODULE"
>Section 22.1</A
> if you want to duplicate the FAQ module.</P
></DD
><DT
>Splatt Forum:</DT
><DD
><P
>(note: the Splatt forum is included in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> version 6.0, but not in the successive ones, where it was replaced by the phpBB Forum, to be described subsequently). </P
><P
>The functionalities implemented in this forum (on the user side) are many (see <A
HREF="#FIG-SPLATT-FORUM"
>Figure 6-8</A
>), the forums are divided by category, have a dedicated inner search engine, users can associate to every post (participation in the forum) icons relating to the argument, cast a vote on a discussion, see various icons according to the degree of attention degree that a specific discussion has generated, see how many questions and answers a certain thread has received, see the profile of that user and many other functions.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-SPLATT-FORUM"
></A
><P
><B
>Figure 6-8.    Splatt Forum.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/splatt-forum.png"><DIV
CLASS="CAPTION"
><P
>Splatt Forum.</P
></DIV
></P
></DIV
></DIV
></P
></DD
><DT
>phpBB Forum:</DT
><DD
><P
>This Forum module is installed in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> starting from version 6.5, replacing the Splatt Forum (<A
HREF="#FIG-PHPBB-FORUM"
>Figure 6-9</A
>). It offers a series of additional features, like an optimal search functionality for threads or an optimal user profile management, where it is now possible to insert alerts to inform a user via e-mail of the arrival of a response to a posting or private message of his.</P
><P
>Among the novelties in the forum interface is a list of the users currently online, an interface for the formatting of the inserted text, the possibility to attach a survey to every thread etc. </P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHPBB-FORUM"
></A
><P
><B
>Figure 6-9.    phpBB Forum.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/phpbb-forum.png"><DIV
CLASS="CAPTION"
><P
>phpBB Forum.</P
></DIV
></P
></DIV
></DIV
></P
></DD
><DT
>XDMP:</DT
><DD
><P
>Starting from version 6.8 of PHP-Nuke, it is possible to acquire News from the <A
HREF="http://xdmp.com"
TARGET="_top"
>XDMP site</A
>. The News are available in many categories and will be automatically published on your site, once you acquire the service. For this to take place, you will only need to edit the modules/News/xdmp.php file, inserting the login and password you were assigned on acquisition. You can set up the news categories and the refresh intervalls from the interface offered by modules/News/xdmp.php. An even broader news functionality is offered by the My Headlines module (<A
HREF="#PHP-NUKE-MY-HEADLINES-MODULE"
>Section 8.3.9</A
>), whose functionality you can see in action at Chris' <A
HREF="http://www.karakas-online.de/myHeadlines/index.html"
TARGET="_top"
>News-o-matic</A
> page.</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="NON-INSTALLED-MODULES"
>6.2. Non-installed modules</A
></H2
><P
>See <A
HREF="#PHP-NUKE-ADD-ON-MODULES"
>Section 8.3</A
> for some interesting add-on modules for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PREINSTALLED-BLOCKS"
>6.3. The preinstalled blocks</A
></H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Modules:</DT
><DD
><P
>Lists all active modules. In case you are the Administrator, it displays also the inactive modules, as wel as those that are hidden. The Modules block is very often used for navigation purposes, see for example <A
HREF="#PHP-NUKE-MENU-BUILDER"
>Section 8.2.4</A
>, <A
HREF="#PHP-NUKE-TREEMENU-WITH-PHP"
>Section 8.2.5</A
>, <A
HREF="#PHP-NUKE-TREEMENU-WITH-JAVASCRIPT"
>Section 8.2.6</A
> and <A
HREF="#BUILD-CUSTOM-MODULE-BLOCKS"
>Section 17.2</A
>. But it is also possible to use the Content block (see below) to obtain a similar result.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MODULES-BLOCK-3"
></A
><P
><B
>Figure 6-10.     The standard Modules block
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/modules-block.png"><DIV
CLASS="CAPTION"
><P
> The standard Modules block</P
></DIV
></P
></DIV
></DIV
></P
></DD
><DT
>Administration:</DT
><DD
><P
>Lists the links that lead to the administration area. It is divided into two blocks, one that lists shortcuts to some administration functions, and another that lists links to content awaiting approval (<A
HREF="#FIG-WAITING-CONTENT-BLOCK-2"
>Figure 6-11</A
>, or to reports of problems like broken links, broken downloads etc.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-WAITING-CONTENT-BLOCK-2"
></A
><P
><B
>Figure 6-11.    Waiting Content block.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/waiting-content-block.png"><DIV
CLASS="CAPTION"
><P
>Waiting Content block.</P
></DIV
></P
></DIV
></DIV
></P
></DD
><DT
>Who is online:</DT
><DD
><P
>Lists the number of users that are online at the moment (<A
HREF="#FIG-WHO-IS-ONLINE"
>Figure 6-12</A
>).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-WHO-IS-ONLINE"
></A
><P
><B
>Figure 6-12.    Who Is Online block.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/who-is-online.png"><DIV
CLASS="CAPTION"
><P
>Who Is Online block.</P
></DIV
></P
></DIV
></DIV
></P
></DD
><DT
>Search:</DT
><DD
><P
>Search block for the contents of the site.</P
></DD
><DT
>Languages:</DT
><DD
><P
>Allows you to change the language of the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> interface. In the Preferences of the administration panel (<A
HREF="#BACKEND"
>Chapter 7</A
>), you can select whether the block shall display flag icons (<A
HREF="#FIG-LANGUAGES"
>Figure 6-13</A
>) or a drop-down list for the language selection.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-LANGUAGES"
></A
><P
><B
>Figure 6-13.    Languages block.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/languages.png"><DIV
CLASS="CAPTION"
><P
>Languages block.</P
></DIV
></P
></DIV
></DIV
></P
></DD
><DT
>Random Headlines:</DT
><DD
><P
>Displays random phrases in a block. See also the Random Quotes block in <A
HREF="#PHP-NUKE-RANDOM-QUOTES-BLOCK"
>Section 8.2.8</A
>.</P
></DD
><DT
>User's custom box:</DT
><DD
><P
>A block where the user can have whatever he likes. The contents of the block will solely be visible to the user who created it.</P
></DD
><DT
>Categories Menu:</DT
><DD
><P
>Displays the available categories as links.</P
></DD
><DT
>Survey:</DT
><DD
><P
>Displays the current survey in the block (<A
HREF="#FIG-SURVEYS-BLOCK"
>Figure 6-14</A
>).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-SURVEYS-BLOCK"
></A
><P
><B
>Figure 6-14.    Surveys block.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/surveys-block.png"><DIV
CLASS="CAPTION"
><P
>Surveys block.</P
></DIV
></P
></DIV
></DIV
></P
></DD
><DT
>Login:</DT
><DD
><P
>A block where the registered user can enter his nickname and password in order to be recognized as such and be granted access to the services of the site that are restricted to registered users only (<A
HREF="#FIG-LOGIN"
>Figure 6-15</A
>). See <A
HREF="#CREATE-LOGOUT-MODULE"
>Section 21.10</A
> for a logout module.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-LOGIN"
></A
><P
><B
>Figure 6-15.    Login block.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/login.png"><DIV
CLASS="CAPTION"
><P
>Login block.</P
></DIV
></P
></DIV
></DIV
></P
></DD
><DT
>Big Story of Today:</DT
><DD
><P
>Displays the most read story of today in the block.</P
></DD
><DT
>Old Articles:</DT
><DD
><P
>Lists old articles that are not shown in the central News column anymore.</P
></DD
><DT
>Advertising Block:</DT
><DD
><P
>From this release on we have the possibility to insert our banners also in the blocks (buttons various of dimensions) being managed as if it were our own circuiting banner, counting clicks, impressions etc. See <A
HREF="#ADVERTISEMENTS-IN-PHP-NUKE-BLOCKS"
>Section 20.7</A
>, for advertisements in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks and <A
HREF="#ADVERTISEMENTS-IN-PHP-NUKE-MODULES"
>Section 21.11</A
>, for advertisements in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules. For Google ads, you can also use the Google AdSense block of <A
HREF="#PHP-NUKE-GOOGLE-ADSENSE-BLOCK"
>Section 8.2.7</A
>.</P
></DD
><DT
>Content:</DT
><DD
><P
>Displays the most active content. See <A
HREF="#SIMPLE-CONTENT-BLOCK"
>Section 20.3</A
> for instructions on how to make a simple Content block yourself.</P
></DD
><DT
>Encyclopedia:</DT
><DD
><P
>lists all active encyclopedias, clicking the link will bring us directly inside the list of terms of the chosen encyclopedia.</P
><P
>In <A
HREF="#MAKE-ENCYCLOPEDIA-INTERNATIONAL"
>Section 27.9</A
>, you can read how to internationalize the Encyclopedia module. You can also use the Random Quotes block (<A
HREF="#PHP-NUKE-RANDOM-QUOTES-BLOCK"
>Section 8.2.8</A
>) to create a random encyclopedia.</P
></DD
><DT
>Forums:</DT
><DD
><P
>The forums block lists the last 10 posted messages and a search engine that executes a query on all the posts of the forum.</P
></DD
><DT
>Last 5 articles:</DT
><DD
><P
>It lists the last 5 published articles offering information on how many readings and how many comments have been made.</P
></DD
><DT
>Last 10 referers:</DT
><DD
><P
>It lists the sites from which the last 10 visits have arrived.</P
></DD
><DT
>Ephemerids:</DT
><DD
><P
>It is  a block that manages the recurrent events. It lists the events happened on the same date but in the previous years. Read <A
HREF="#ENTER-THOUSANDS-OF-EPHEMERIDS"
>Section 27.8</A
> if you are looking for a quick way to enter thousands of ephemerids.</P
></DD
><DT
>Reviews:</DT
><DD
><P
>It lists in a block the book reviews of the day. We discuss how to modify the Reviews module in <A
HREF="#MODIFYING-PHP-NUKE-MODULE-REVIEWS"
>Section 18.4</A
>.</P
></DD
><DT
>Sections Articles:</DT
><DD
><P
>lists the active sections. Clicking one we will get to the corresponding article list. We discuss how to modify the Sections module in <A
HREF="#MODIFYING-PHP-NUKE-SECTIONS-MODULE"
>Section 18.9</A
>.</P
></DD
><DT
>Top 10 Downloads:</DT
><DD
><P
>It lists the 10 most downloaded files. Read <A
HREF="#ENTER-THOUSANDS-OF-DOWNLOAD-LINKS"
>Section 27.6</A
> if you are looking for a quick way to enter thousands of Downloads links. Further, in <A
HREF="#MODIFYING-PHP-NUKE-DOWNLOADS-MODULE"
>Section 18.10</A
> we show how to modify the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Downloads module.</P
></DD
><DT
>Top 10 Links:</DT
><DD
><P
>It lists the 10 most clicked links in the archives.</P
></DD
></DL
></DIV
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="BACKEND"
></A
>Chapter 7. Back end structure: administrator view</H1
><P
>The administration page is reached by calling the page admin.php (www.yoursite.com/admin.php) and carrying out the login procedure inserting your user and password. (Remember that the normal users should not login from the page admin.php but from the appropriate module). Starting from version 6.5, one has also to type a security code in an extra field. The security code is chosen randomly each time and must be the same as the one displayed in a graphic and is &#8220;poisoned&#8221; with &#8220;noise&#8221; to make automatic number recognition by login scripts impossible (see the <A
HREF="http://mil-sim.net/modules.php?name=Downloads&#38;op=getit&#38;lid=21"
TARGET="_top"
>Electric Dice</A
> site for more information on the difficulties of creating truly random numbers and poisoned images).</P
><P
>Once logged in, the administrator finds an interface that lists all the areas which can be acted upon (see <A
HREF="#FIG-ADMIN-PANEL"
>Figure 7-1</A
>). If the administrator is a superadmin, he may work on all the areas of the site, if instead he is an administrator with limited powers he will see the links relative to the areas on which he is allowed to work. Through the preferences configuration we will be able to decide whether to display icons or just a textual interface. Depending on our choice, either a textual or an icon administration interface will appear. <A
HREF="#FIG-ADMIN-PANEL"
>Figure 7-1</A
> shows the icon interface. Note that the icons of the admin panel are theme dependent.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-ADMIN-PANEL"
></A
><P
><B
>Figure 7-1.    Administration panel.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/admin-panel.png"><DIV
CLASS="CAPTION"
><P
>Administration panel.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Remember that when you write new administration modules you must also create the corresponding icon, otherwise, when in visual administration mode, only the textual link corresponding to your module will appear and you won't be able to click it.</P
><P
>In order to set up the graphical administration mode you must go to the preferences section and set up in "graphical options" the &#8220;graphical menu in administration&#8221; option to &#8220;yes&#8221;.</P
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="ADMINISTRATION-FUNCTIONS"
>7.1. The administration functions</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-STORIES"
></A
><P
><B
>Figure 7-2.    Administration panel: Add story.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/stories.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Add story.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Add Story:</DT
><DD
><P
>It is  the function that adds a new article to the News module. (We discuss how to modify the News module in <A
HREF="#MODIFYING-PHP-NUKE-NEWS-MODULE"
>Section 18.7</A
>.) The options offered are many and will be analyzed here one by one <A
NAME="AEN6351"
HREF="#FTN.AEN6351"
><SPAN
CLASS="footnote"
>[8]</SPAN
></A
>:</P
><P
></P
><UL
><LI
><P
>Title: inserts the news title.</P
></LI
><LI
><P
>Topic: Determines which Topic will be associated with the article.</P
></LI
><LI
><P
>Category:Determines which Category will be associated with the article.</P
></LI
><LI
><P
>Publish in the Homepage: if this option is not selected, then the article will be displayed only in the topics or the relative categories and not in the main page of the news module .</P
></LI
><LI
><P
>Activate comments: If it's not activated the users cannot comment on the article.</P
></LI
><LI
><P
>Language: If in the preferences we have activated the multilingual option, we will be asked in which language we will publish the article. (e.g. if I publish an article in english, I will see it displayed only if I click on the small english flag in the languages block and so on...).</P
></LI
><LI
><P
>Story Text: It is  the text that appears in the preview.</P
></LI
><LI
><P
>Extended Text: It is  the text that appears when we click on "read all".</P
></LI
><LI
><P
>Programmed article: The administrator is given the ability to choose when the article should be published, deciding on the publishing date and hour. It is not a neccesary function but it is very useful.</P
></LI
><LI
><P
>Preview or send: Depending on the choice made here determines whether the article will be displayed in preview mode or directly published.</P
></LI
><LI
><P
>Survey: It is possible to attach a survey to a specific article (<A
HREF="#FIG-ARTICLE-POLL"
>Figure 7-3</A
>).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-ARTICLE-POLL"
></A
><P
><B
>Figure 7-3.    Attaching a poll to an article awaiting admission.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/article-poll.png"><DIV
CLASS="CAPTION"
><P
>Attaching a poll to an article awaiting admission.</P
></DIV
></P
></DIV
></DIV
></P
><P
>In the case that this option is activated, when the reader clicks on "read all", a survey block will appear that is different from the survey block on the home page. We thus have two survey blocks active:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>The survey block on the home page (<A
HREF="#FIG-SURVEYS-BLOCK"
>Figure 6-14</A
>).</P
></LI
><LI
><P
>The survey block attached to the specific article (<A
HREF="#FIG-ARTICLE-POLL-BLOCK"
>Figure 7-4</A
>).</P
></LI
></OL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-ARTICLE-POLL-BLOCK"
></A
><P
><B
>Figure 7-4.    Article Poll block.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/article-poll-block.png"><DIV
CLASS="CAPTION"
><P
>Article Poll block.</P
></DIV
></P
></DIV
></DIV
></P
></LI
></UL
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-BACKUP"
></A
><P
><B
>Figure 7-5.    Administration panel: Backup DB.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/backup.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Backup DB.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Backup DB:</DT
><DD
><P
>It is  the function that allows us to create a backup file that contains both structure and content of the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> database. This is very useful in case our data gets lost. </P
><P
>Once we click on &#8220;Backup DB&#8221;, we will have to wait for the server to create the file. Waiting time varies from a few seconds to some minutes in the case of a large database. Once created, we will be asked to download the file. Remember to keep your backup in a safe place! See <A
HREF="#BACKUP-MYSQL-USING-BROWSER"
>Section 27.16</A
> for other backup solutions.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-BANNERS"
></A
><P
><B
>Figure 7-6.    Administration panel: Banners.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/banners.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Banners.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Banners:</DT
><DD
><P
>You can manage your advertising strategy with this function: you can add clients, then add banners images for each client. The banners will be displayed at the top of the page, before the header (if you want to change banner placement, see <A
HREF="#PHP-NUKE-HEADER-CHANGE-BANNER-PLACEMENT"
>Section 14.3.6</A
>). You can control the number of impressions per banner and you can also gather statistics on the achieved views and clicks.</P
><P
>See also <A
HREF="#ADVERTISEMENTS-IN-PHP-NUKE-BLOCKS"
>Section 20.7</A
>, for advertisements in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks and <A
HREF="#ADVERTISEMENTS-IN-PHP-NUKE-MODULES"
>Section 21.11</A
>, for advertisements in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules. For Google ads, you can also use the Google AdSense block of <A
HREF="#PHP-NUKE-GOOGLE-ADSENSE-BLOCK"
>Section 8.2.7</A
>.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-BLOCKS"
></A
><P
><B
>Figure 7-7.    Administration panel: Blocks.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/blocks.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Blocks.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Blocks:</DT
><DD
><P
>It's a very important function because it allows us to control the left and right columns of our portal. The scheme is presented with a list of the blocks that we have created, we can then activate, deactivate or edit them changing their position and order and assigning them permissions. We can in fact decide if a block should be visible by all, only by the registered users, or only the administrator. We can also make the block visible only in a specific language.</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="90%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Please note</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>This info is also  present  in <A
HREF="#BLOCKS"
>Chapter 20</A
> </P
></TD
></TR
></TABLE
></DIV
><P
>The <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks can be of 3 different types:</P
><P
></P
><UL
><LI
><P
>RSS/RDF: These are blocks that capture news put at our disposal from other sites. The files are in a standard format, suitable for reading the text contained in them (for example, the site <A
HREF="http://www.spaghettibrain.com"
TARGET="_top"
>Spaghettibrain.com</A
> is a site that feeds news to other sites).</P
><P
>RSS is a protocol, an application of XML, that provides an open method of syndicating and aggregating Web content. Using RSS files, you can create a data feed that supplies headlines, links, and article summaries from your Web site. This function is done automatically by the backend.php file of your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> system, so that other sites that wish to display (we say &#8220;syndicate&#8221; in this context) news from your site, only have to enter the address &#8220;http://www.yoursite.com/backend.php&#8221; . For more information on RSS, see this <A
HREF="http://gils.utah.gov/rss/"
TARGET="_top"
>RSS Workshop</A
>.</P
></LI
><LI
><P
>Blocks of content: They are blocks which we insert simple HTML or text that will be displayed inside the block (see the following example)</P
></LI
><LI
><P
>Blocks of files: They are <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> scripts that execute predetermined commands (see the following paragraph)</P
></LI
></UL
><P
>In order to create a new block that will be added to the list of available blocks, we must scroll down the page and position ourselves on "add block". </P
><P
>The title field is a common element for all and will be compiled in.</P
><P
></P
><UL
><LI
><P
>If we want to create a RSS/RDF block we must choose the news source from the available list or add one by clicking on &#8220;setup&#8221;. In this case we will supply the address of the file to read (this info generally will be supplied by the webmaster of the site from which we capture the news, or, if it is a site created with PHP-Nuke, simply by asking for the file backend.php of that site). The other fields will all be compiled in with the exception of &#8220;filename&#8221; and &#8220;Content&#8221;. There is a bug that will display a message, saying &#8220;There is a current problem with the headlines from this site.&#8221;, although everything will be set up right, see <A
HREF="#BUILD-RSS-BLOCKS-WITH-VARIABLE-NEWS-NUMBER"
>Section 17.3</A
>. </P
></LI
><LI
><P
>If we want to create a block of simple text instead, we will omit the field &#8220;RSS/RDF file URL&#8221; and will complete &#8220;Content&#8221; instead (Omitting &#8221;filename&#8221;).</P
></LI
><LI
><P
>If instead we want to include the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> files that interface with a database or perform particular functions, then we will omit &#8220;Content&#8221; and &#8220;RSS/RDF&#8221; and will choose between the available files the one that will create our block. (If you want more info on how to create blocks, see <A
HREF="#BLOCKS"
>Chapter 20</A
>). Just choose the block from the drop-down list of available blocks and set a title for it (or leave the title untouched).</P
></LI
></UL
><P
>Remember that before publishing a block, we will be shown a preview of it.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="90%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Use custom blocks for building navigation menus</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Many users think that the Modules block (<A
HREF="#FIG-MODULES-BLOCK"
>Figure 17-1</A
>) is the obligatory way of building a navigation menu. However, it is just as possible to create custom blocks containing our HTML code and images or links - see <A
HREF="#BUILD-CUSTOM-MODULE-BLOCKS"
>Section 17.2</A
> for various approaches in this direction. </P
></TD
></TR
></TABLE
></DIV
><P
>Finally, the block can be positioned</P
><P
></P
><UL
><LI
><P
>in the left/right column, or</P
></LI
><LI
><P
>in the central column, either at the top or at the bottom.</P
></LI
></UL
><P
>You can change the relative positioning of all the blocks inside a column by clicking on the up and down arrows in the table that lists all blocks in the blocks administration panel.</P
><P
>See <A
HREF="#PHP-NUKE-ADD-ON-BLOCKS"
>Section 8.2</A
> for interesting add-on blocks.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-CONTENT"
></A
><P
><B
>Figure 7-8.    Administration panel: Content.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/content.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Content.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Content Manager:</DT
><DD
><P
>This function allows us to add new categories and new content inside the content section. Think of it as a container for creating empty pages. A noteworthy feature is the possibility to add the tag</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;! -- pagebreak -- &#62; </PRE
></FONT
></TD
></TR
></TABLE
><P
>in order to create a multipage article. The elements that comprise the Content module are:</P
><P
></P
><UL
><LI
><P
>title,</P
></LI
><LI
><P
>subtitle,</P
></LI
><LI
><P
>page header text,</P
></LI
><LI
><P
>page main text,</P
></LI
><LI
><P
>page footer text,</P
></LI
><LI
><P
>signature.</P
></LI
></UL
><P
>The </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;! -- pagebreak -- &#62; </PRE
></FONT
></TD
></TR
></TABLE
><P
>function is only active in the page main text field.</P
><P
>After you have created the desired categories you can then go to http://yoursite.com/admin.php?op=content and start adding pages to the categories. </P
><P
>You can create links that point directly to the pages created by the Content module and use them in menus or buttons. The links could look as follows:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>modules.php?name=Content&#38;pa=showpage&#38;pid=1</PRE
></FONT
></TD
></TR
></TABLE
><P
>where pid=1 is the page <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
> that uniquely identifies the Content page.</P
><P
>An easy way to find out the correct URL to use in links to Content pages, is to click on the Content link in the modules block, view each page and copy its URL from the browser's address window. You can then just add these URLs to a HTML block, maybe like this: </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#38;nbsp;&#38;nbsp;&#60;b&#62;&#60;big&#62;&#38;middot;&#60;/big&#62;&#60;/b&#62;
&#60;img src=images/blocks/icon_dot.gif&#62;&#38;nbsp;
&#60;a href="modules.php?name=Content&#38;pa=showpage&#38;pid=1"&#62;
Page Title 1&#60;/a&#62;&#60;BR&#62;
&#38;nbsp;&#38;nbsp;&#60;b&#62;&#60;big&#62;&#38;middot;&#60;/big&#62;&#60;/b&#62;
&#60;img src=images/blocks/icon_dot.gif&#62;&#38;nbsp;
&#60;a href="modules.php?name=Content&#38;pa=showpage&#38;pid=2"&#62;
Page Title 2&#60;/a&#62;&#60;BR&#62;
&#38;nbsp;&#38;nbsp;&#60;b&#62;&#60;big&#62;&#38;middot;&#60;/big&#62;&#60;/b&#62;
&#60;img src=images/blocks/icon_dot.gif&#62;&#38;nbsp;
&#60;a href="modules.php?name=Content&#38;pa=showpage&#38;pid=3"&#62;
Page Title 3&#60;/a&#62;&#60;BR&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>and so on. See also <A
HREF="#INCLUDE-HTML-FILE-IN-MODULE"
>Section 21.5</A
>, <A
HREF="#INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE"
>Section 21.6</A
> and <A
HREF="#INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE-IFRAME"
>Section 21.7</A
> for other techniques to incorporate HTML content in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-DOWNLOADS"
></A
><P
><B
>Figure 7-9.    Administration panel: Downloads.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/downloads.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Downloads.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Downloads:</DT
><DD
><P
>It creates categories, subcategories and adds files to the download area. For security reasons, the system does not allow file uploads via HTTP, only their linking through their HTTP address. If for example the file <EM
>files.zip</EM
> is found in the directory <EM
>files</EM
> of our site, we would have to link it as <EM
>www.oursite.com/files/file.zip</EM
>. This allows us to link external resources also. If you have thousands of download links to enter, consult <A
HREF="#ENTER-THOUSANDS-OF-DOWNLOAD-LINKS"
>Section 27.6</A
> for an automated procedure. Further, in <A
HREF="#MODIFYING-PHP-NUKE-DOWNLOADS-MODULE"
>Section 18.10</A
> we show how to modify the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Downloads module.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-EDIT-ADMINS"
></A
><P
><B
>Figure 7-10.    Administration panel: Edit Admins.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/authors.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Edit Admins.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Edit Admins:</DT
><DD
><P
>Enables us to add new administrators, defining their access levels. Besides having a super administrator it is in fact possible to activate only partial functions for the various administrators. For example, for an editorial activity, you can create sub-administrators and enable only the News administration functions for them.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-EDIT-USERS"
></A
><P
><B
>Figure 7-11.    Administration panel: Edit Users.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/users.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Edit Users.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Edit Users:</DT
><DD
><P
>From here it is possible to manually add new users and to modify existing ones, choosing their profile by typing the nickname in the appropriate form. Through the same form it is also possible to delete a user, by simply changing the drop-down menu selection from &#8220;modify&#8221; to &#8220;delete&#8221;.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-ENCYCLOPEDIA"
></A
><P
><B
>Figure 7-12.    Administration panel: Encyclopedia.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/encyclopedia.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Encyclopedia.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Encyclopedia:</DT
><DD
><P
>Allows the creation of multiple word lists (choosing also the language), after having created an encyclopedia we can proceed to the insertion of terms.</P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="90%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Attention!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>You can only insert terms in an encyclopedia after you have already entered the encyclopedia's title! </P
></TD
></TR
></TABLE
></DIV
><P
>The whole interface is contained in one single screen, so that for entering the encyclopedia terms you will have to scroll down, then insert the term, its description and also choose the encyclopedia you want to have it in. If you have thousands of terms, such an approach is not practical. You may want to have a look at the techniques presented in <A
HREF="#ENTER-THOUSANDS-OF-WEB-LINKS"
>Section 27.5</A
> (for web links) and <A
HREF="#ENTER-THOUSANDS-OF-DOWNLOAD-LINKS"
>Section 27.6</A
> (for download links) and adapt them to the Encyclopedia module.</P
><P
>For internationalization (i18n) issues regarding the Encyclopedia module, see <A
HREF="#MAKE-ENCYCLOPEDIA-INTERNATIONAL"
>Section 27.9</A
>. You can also use the Random Quotes block (<A
HREF="#PHP-NUKE-RANDOM-QUOTES-BLOCK"
>Section 8.2.8</A
>) to create a random encyclopedia.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-EPHEMERIDS"
></A
><P
><B
>Figure 7-13.    Administration panel: Ephemerids.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/ephemerids.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Ephemerids.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Ephemerids:</DT
><DD
><P
>Allows the insertion of recurrent events choosing the date and inserting a description. Given such an event in the Ephemerids table, the Ephemerids block will display its description on the day that it occured. More than one events on a given day are possible, of course. To modify such an event, you have to scroll up to the bottom of the screen, choose the desired date and then proceed as usual. For a more speedy alternative, see <A
HREF="#ENTER-THOUSANDS-OF-EPHEMERIDS"
>Section 27.8</A
>.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-FAQ"
></A
><P
><B
>Figure 7-14.    Administration panel: FAQ.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/faq.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: FAQ.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>FAQ:</DT
><DD
><P
>Allows the creation of the main FAQ categories and all related questions/answers. After a category has been entered, you must click on its content to be able to enter, delete or modify a FAQ.</P
><P
>If you want to display HTML code in a FAQ, have a look at <A
HREF="#DISPLAY-HTML-CODE-IN-FAQ"
>Section 27.4</A
>. See also <A
HREF="#DUPLICATING-PHP-NUKE-FAQ-MODULE"
>Section 22.1</A
> if you want to duplicate the FAQ module.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-FORUM"
></A
><P
><B
>Figure 7-15.    Administration panel: Forums.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/forum.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Forums.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Splatt Forum:</DT
><DD
><P
>The management of the forum is divided in 4 areas<A
NAME="AEN6874"
HREF="#FTN.AEN6874"
><SPAN
CLASS="footnote"
>[9]</SPAN
></A
>: </P
><P
></P
><UL
><LI
><P
>Preferences: It manages the characteristics of the forum (For security reasons it's advisable to deactivate the option to mail in HTML).</P
></LI
><LI
><P
>Categories and forum: defines the categories, the forums included in them, the moderators of every forum, levels of access etc... For a forum to be visible, you MUST activate at least one moderator otherwise the forum won't show up!</P
></LI
><LI
><P
>Ranks: defines the attention thresholds for the forum. Upon reception of the nth post, aproppriate images will be attached to attract proper attention of the visitors.</P
></LI
><LI
><P
>Users: moderator management through a complete list of the registered users.</P
></LI
></UL
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-REFERERS"
></A
><P
><B
>Figure 7-16.    Administration panel: HTTP Referers.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/referers.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: HTTP Referers.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>HTTP Referers:</DT
><DD
><P
>It displays the URL of the site the visitor was on, before coming to our site. See also the IP Tracking module in <A
HREF="#PHP-NUKE-IP-TRACKING-MODULE"
>Section 8.3.6</A
> and the Protector module in <A
HREF="#PHP-NUKE-PROTECTOR-MODULE"
>Section 8.3.7</A
> for a similar, but extended, functionality.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MESSAGES"
></A
><P
><B
>Figure 7-17.    Administration panel: Messages.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/messages.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Messages.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Messages:</DT
><DD
><P
>It creates a central block in the Home Page in order to send selective messages to the users. The messages can be sent to only registered users, to non-registered users, to the administrator or one may carry out a selection by language. They also may carry a expiration date, making it possible to say, for example, &#8220;show this message for 1, 2, 5, 15, 30 days, or for unlimited time&#8221;.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MODULES"
></A
><P
><B
>Figure 7-18.    Administration panel: Modules.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/modules.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Modules.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Modules:</DT
><DD
><P
>Allows for the management of the modules installed. The modules can be activated, deactivated or be assigned read permissions. A module can be world-readable, readable only by the registered users, or only the administrator (<A
HREF="#FIG-MODULES-ADMIN"
>Figure 7-19</A
>). Further, you can define the module that will be &#8220;put in Home&#8221;, i.e. appear in the index.php page (the &#8220;Homepage&#8221; of PHP-Nuke), but see <A
HREF="#CHANGE-HOME-MODULE"
>Section 27.1</A
> if this seems to be not working.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MODULES-ADMIN"
></A
><P
><B
>Figure 7-19.    Modules administration panel.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/modules-admin.png"><DIV
CLASS="CAPTION"
><P
>Modules administration panel.</P
></DIV
></P
></DIV
></DIV
></P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-NEWSLETTER"
></A
><P
><B
>Figure 7-20.    Administration panel: Newsletter.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/newsletter.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Newsletter.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Newsletter:</DT
><DD
><P
>the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> administrator can send a newsletter to the registered users who have consented to receive them or send them to all the registered users. Attention to spam!</P
><P
>See <A
HREF="#ALLOW-HTML-NEWSLETTER"
>Section 19.2</A
> if you want to allow HTML in your newsletter.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-OPTIMIZE"
></A
><P
><B
>Figure 7-21.    Administration panel: Optimize DB.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/optimize.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Optimize DB.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Optimize DB:</DT
><DD
><P
>Optimizes the data in the database, increasing database speed. Use with caution. Backup your database before! See <A
HREF="#BACKUP-MYSQL-USING-BROWSER"
>Section 27.16</A
> for automated backups through the browser - and <A
HREF="#RESTORE-PHP-NUKE-FROM-BACKUP"
>Section 26.2</A
> in case something goes wrong and you have to restore your database from a backup.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PREFERENCES"
></A
><P
><B
>Figure 7-22.    Administration panel: Preferences.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/preferences.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Preferences.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Preferences:</DT
><DD
><P
>This subject will be treated in <A
HREF="#PREFERENCES"
>Section 7.2</A
>.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-REVIEWS"
></A
><P
><B
>Figure 7-23.    Administration panel: Reviews.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/reviews.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Reviews.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Reviews:</DT
><DD
><P
>It allows us to insert book reviews. In every book review it is possible to cast a vote, a link relative to the subject and finally an image that represents the content. To insert an image, you must save it in the images/reviews folder, then enter its filename (without the path, e.g. pippo.png) in the aproppriate field.</P
><P
>Further, you can set up a title and a description for the reviews main page.</P
><P
>We discuss how to modify the Reviews module in <A
HREF="#MODIFYING-PHP-NUKE-MODULE-REVIEWS"
>Section 18.4</A
>.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-SECTIONS"
></A
><P
><B
>Figure 7-24.    Administration panel: Sections.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/sections.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Sections.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Sections:</DT
><DD
><P
>here you can manage the sections and their contents. It is possible to associate an image to the section subject, just as it is in the topics. It is  possible to add articles to the sections selecting the aproppriate category through a radio button, to divide long texts using the &#60;! -- pagebreak -- &#62; tag and to edit or cancel already added sections.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-SUBMISSIONS"
></A
><P
><B
>Figure 7-25.    Administration panel: Submissions.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/submissions.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Submissions.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Submissions:</DT
><DD
><P
>Here you can manage articles inserted by others. It is the moderation area of the News module that we have already analyzed in this section. You can publish, modify or delete submitted articles - there is even a field for &#8220;notes&#8221; that allows the webmaster to enter a comment to the article that will be visually distinguished from the main text by a cursive font.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-SURVEYS"
></A
><P
><B
>Figure 7-26.    Administration panel: Surveys.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/surveys.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Surveys.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Surveys/Polls:</DT
><DD
><P
>Creates a new survey for the site, edits or cancels old ones. It is possible to insert up to 10 different answers to every survey. In the context of the creation of the survey it is possible, on the same page, to publish a news article that announces its creation.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-TOPICS"
></A
><P
><B
>Figure 7-27.    Administration panel: Topics.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/topics.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Topics.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Topics:</DT
><DD
><P
>Allows you to create new topics and the association, through a pop-up menu, of corresponding images (<A
HREF="#FIG-ADD-TOPIC"
>Figure 7-28</A
>). The images must have been copied to the images/topics folder previously.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-ADD-TOPIC"
></A
><P
><B
>Figure 7-28.    Administration panel: Add a new topic.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/add-topic.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Add a new topic.</P
></DIV
></P
></DIV
></DIV
></P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-WEBLINKS"
></A
><P
><B
>Figure 7-29.    Administration panel: Web Links.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/weblinks.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Web Links.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Web Links:</DT
><DD
><P
>Allows us to edit links published by others, create categories for archiving the links, eliminate links, see user messages informing us of any broken links through an interface very similar to the downloads section and add new links. </P
><P
>If you have many links to enter, an automatic procedure based on scripting, as discussed in <A
HREF="#ENTER-THOUSANDS-OF-WEB-LINKS"
>Section 27.5</A
>, may be of interest to you. Further, in <A
HREF="#MODIFYING-PHP-NUKE-MODULE-WEB-LINKS"
>Section 18.5</A
> we show how to modify the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Web Links module.</P
></DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-LOGOUT"
></A
><P
><B
>Figure 7-30.    Administration panel: Logout.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/logout.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Logout.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Logout/Exit:</DT
><DD
><P
>Exits from the administration area rendering the cookie invalid. It is  good practice to login logout after having finished working with <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. For security reasons (see <A
HREF="#COOKIES"
>Section 23.4.5</A
>).</P
></DD
></DL
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHPBB-FORUM-ADMINISTRATION"
>7.1.1. phpBB Forum administration</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-FORUM-2"
></A
><P
><B
>Figure 7-31.    Administration panel: Forums.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/forum.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Forums.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Given the length of the administration interface of the phpBB Forum, we will traverse its functions following the order of the menu in the left frame.</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Admin Index:</DT
><DD
><P
>Leads back to the administration panel of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> (<A
HREF="#ADMINISTRATION-FUNCTIONS"
>Section 7.1</A
>).</P
></DD
><DT
>Forum Index:</DT
><DD
><P
>Leads back to the main Forum page.</P
></DD
><DT
>Preview Forum:</DT
><DD
><P
>Offers a preview of the forum, keeping the left frame with the administration functions in place.</P
></DD
><DT
>Management:</DT
><DD
><P
>Here you can create the categories that will form the criteria for grouping the forums, old and new ones. It is also possible to change their order inside a category, lock and unlock a forum, and configure the pruning function for every forum. Pruning is the self-cleaning action that deletes all threads that did not receive a posting in the last N days, N being individually set by the administrator.</P
></DD
><DT
>Pruning:</DT
><DD
><P
>Another way to reach the pruning function (instead of the Management link above).</P
></DD
><DT
>Avatar management:</DT
><DD
><P
>Deletes unwanted avatars.</P
></DD
><DT
>Backup database:</DT
><DD
><P
>Makes a backup copy of the database. Since <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> also posesses the same function, it is recommended to use that one from PHP-Nuke's administration panel (<A
HREF="#ADMINISTRATION-FUNCTIONS"
>Section 7.1</A
>). For a do-it-yourself solution, see <A
HREF="#BACKUP-MYSQL-USING-BROWSER"
>Section 27.16</A
>, but bear in mind that all these methods will fail, if your database has become so large that <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> is exhausting its <ACRONYM
CLASS="ACRONYM"
>CPU</ACRONYM
> time limit and breaks execution. In such a case, only the MySQL mysqldump command-line utility can backup your DB.</P
></DD
><DT
>Configuration:</DT
><DD
><P
>This is the forum configuration panel. From all the functions present, we would like to bring the following ones to your attention:</P
><P
></P
><UL
><LI
><P
>Flood interval: Minimum number of seconds that must pass between a post and the next one (by the same person).</P
></LI
><LI
><P
>Topics per page: Number of threads per page.</P
></LI
><LI
><P
>Posts per page: Number of posts per page.</P
></LI
><LI
><P
>Posts for popular threshold: Number of posts required to render a thread as &#8220;popular&#8221;.</P
></LI
><LI
><P
>Allowed HTML tags: The HTML tags that the users are allowed to use in their text (e.g. links, tables etc.). See <A
HREF="#ALLOW-SPECIAL-HTML-TAGS"
>Section 16.1</A
> for the same subject regarding <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> in general.</P
></LI
><LI
><P
>Allow username changes: Enables changing one's nickname (don't set this to &#8220;yes&#8221;).</P
></LI
><LI
><P
>Enable remote avatars: Enables linking one's avatar to an image from a remote site (e.g. one's photo).</P
></LI
><LI
><P
>E-mail settings: management of e-mail operations (be it mailing actions or mail notifications).</P
></LI
></UL
></DD
><DT
>Mass e-mails:</DT
><DD
><P
>Allows for mass e-mailing of users or groups through a newsletter. <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> posseses this functionality too.</P
></DD
><DT
>Restore database:</DT
><DD
><P
>Reloads a backup file of the database (don't play too much with this).</P
></DD
><DT
>Smilies:</DT
><DD
><P
>Allows a personalization of the character sequences that will be mapped to smiley icons.</P
></DD
><DT
>Word censor:</DT
><DD
><P
>Enables censorship of bad words (the ones you enter in the list). <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> posesses a similar bad word list in the config.php file (<A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>).</P
></DD
><DT
>Group/admin management:</DT
><DD
><P
>Here you can create groups, which can be &#8220;open&#8221;, &#8220;closed&#8221; or &#8220;hidden&#8221;. In an open group, anyone can choose to join. A closed group is viewable, but only administrators can add members to them. A hidden groups is only viewable by an administrator.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="90%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>How to add a user to a group</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>To add members you don't even need to be in the forum's admin section: in any normal forum page click on usergroups,  you will see all available groups depending on your access level, if you have admin access you will be able to add/remove/approve users from this page. </P
></TD
></TR
></TABLE
></DIV
></DD
><DT
>Permissions:</DT
><DD
><P
>You can assign permissions to a group here.</P
></DD
><DT
>Styles admin:</DT
><DD
><P
>In the standalone phpBB forum, you can manage the forum themes from here. However, this function does not have any effect on PHP-Nuke, whose themes are still managed from the administration panel (<A
HREF="#ADMINISTRATION-FUNCTIONS"
>Section 7.1</A
>). If a theme does not work with the phpBB forum in PHP-Nuke, you should not try to activate it through this function, it wil still not work. Try to contact the designer instead, and ask for a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> conforming theme.</P
></DD
><DT
>Ban control:</DT
><DD
><P
>Allows you to ban a username, an e-mail address, or an IP address (or a group of IP addresses). See <A
HREF="#PHP-NUKE-IP-TRACKING-MODULE"
>Section 8.3.6</A
> and <A
HREF="#PHP-NUKE-PROTECTOR-MODULE"
>Section 8.3.7</A
> for add-on modules that pursue the same subject.</P
></DD
><DT
>Disallow name:</DT
><DD
><P
>You can enter the usernames you wish to make unavailable to users.</P
></DD
><DT
>User admin/management:</DT
><DD
><P
>Allows the administrator to manage user data.</P
></DD
><DT
>Permissions:</DT
><DD
><P
>Allows the adminstrator to set user permissions.</P
></DD
><DT
>Ranks:</DT
><DD
><P
>You can define user &#8220;categories&#8221; here, the so-called ranks. A user will attain a certain rank, after having posted a threshold number X of forum posts - the rank name, icon and threshold being freely configurable.</P
></DD
></DL
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PREFERENCES"
>7.2. The Preferences Page</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PREFERENCES-2"
></A
><P
><B
>Figure 7-32.    Administration panel: Preferences.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/preferences.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Preferences.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Here are the parameters needed for the configuration of the config.php file (<A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>) through the admin/preferences area:</P
><P
></P
><UL
><LI
><P
>General Site Info (<A
HREF="#FIG-GENERAL-SITE-INFO"
>Figure 7-33</A
>):</P
><P
></P
><UL
><LI
><P
>Site name: It corresponds to the <A
HREF="http://www.w3.org/TR/html4/struct/global.html#adef-title"
TARGET="_top"
>title</A
> tag, it is what appears up in the right bar of the browser. It is  very important for the <A
HREF="http://www.w3.org/TR/html4/appendix/notes.html#h-B.4"
TARGET="_top"
>search engines</A
>.</P
></LI
><LI
><P
>Site URL: It is  the internet address of your site.</P
></LI
><LI
><P
>Logo: It is the logo of your site. In standard themes and themes not modified much it is the Logo that appears up on the left.</P
></LI
><LI
><P
>Slogan: It is equivalent to the <A
HREF="http://www.w3.org/TR/html4/struct/global.html#edef-META"
TARGET="_top"
>description</A
> tag, it's also very important for the <A
HREF="http://www.w3.org/TR/html4/appendix/notes.html#h-B.4"
TARGET="_top"
>search engines</A
>.</P
></LI
><LI
><P
>Beginning date of the site: It's the date that appears in the statistics module.</P
></LI
><LI
><P
>Administrator e-mail : it is the e-mail which will receive the notifications for article insertions by third parties and the mails from the &#8220;contact us&#8221; module.</P
></LI
><LI
><P
>Articles in Top Page: Specifies the number of news articles that can be displayed in the main page of the news module.</P
></LI
><LI
><P
>Articles in Home: Specifies the number of news articles that can be displayed in the home page of the site (if the news module is the main one).</P
></LI
><LI
><P
>Stories in old articles box: Specifies the number of news articles that can be displayed in the old articles box. Note, however, that articles never get moved anywhere. An archived article, is any article except for the first 10 articles (or whatever number you have in Preferences for "number of stories in Home"). The Old Articles block starts with the 11th newest article, and goes back from there (again, it depends on "stories in Home").</P
></LI
><LI
><P
>Activate ultramode: specifies if other sites can take news titles from our site.</P
></LI
><LI
><P
>Allow anonymous to post : Specifies whether anonymous users can write comments.</P
></LI
><LI
><P
>Default theme: defines the default theme of the site.</P
></LI
><LI
><P
>Select language: defines the default language of the site.</P
></LI
><LI
><P
>local time format: defines the format of the local time (depends on the server, if it is running linux, this is controlled in <EM
><A
HREF="http://www.debian.org/doc/manuals/intro-i18n/ch-locale.en.html"
TARGET="_top"
>/usr/share/locale</A
></EM
>). See also <A
HREF="#DATE-TIME"
>Section 27.13</A
>.</P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-GENERAL-SITE-INFO"
></A
><P
><B
>Figure 7-33.    General site info in the Preferences page.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/general-site-info.png"><DIV
CLASS="CAPTION"
><P
>General site info in the Preferences page.</P
></DIV
></P
></DIV
></DIV
></P
></LI
><LI
><P
>Multilingual options:</P
><P
></P
><UL
><LI
><P
>activate the multilanguage characteristics: choose whether the site should support a multilingual functionality or not</P
></LI
><LI
><P
>display the small flags in place of the list: if the multilingual option is activated then this decides whether the block should display the small state flags in place of a list of language names (see <A
HREF="#FIG-LANGUAGES"
>Figure 6-13</A
>).</P
></LI
></UL
></LI
><LI
><P
>Banners options:</P
><P
></P
><UL
><LI
><P
>activate banners : sets up the option to use banner rotation on the site. The banners will be positioned in the header. See <A
HREF="#PHP-NUKE-HEADER-CHANGE-BANNER-PLACEMENT"
>Section 14.3.6</A
> on how to change the banner's position in the header. If you are interested in other ways of ad placement in PHP-Nuke, see <A
HREF="#ADVERTISEMENTS-IN-PHP-NUKE-BLOCKS"
>Section 20.7</A
> on how to display ad banners in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks and <A
HREF="#ADVERTISEMENTS-IN-PHP-NUKE-MODULES"
>Section 21.11</A
> on how to display advertisements in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules.</P
></LI
></UL
></LI
><LI
><P
>Footer messages:</P
><P
></P
><UL
><LI
><P
>For the footer of the page, imagine we have to insert 3 texts in a table that is 100% wide and positioned centrally:</P
><P
></P
><UL
><LI
><P
>Page Footer Line 1: first text to insert</P
></LI
><LI
><P
>Page Footer Line 2: second text to insert</P
></LI
><LI
><P
>Page Footer Line 3: third text to insert</P
></LI
></UL
><P
>Example: Suppose you have some "powered by" icons in the images/powered directory, like powered_by_linux.png, powered_by_apache.png, powered_by_mysql.png etc. Then you can insert the following HTML code in one of the above footer lines and the icons will appear in the aproppriate footer line (<A
HREF="#FIG-FOOTER"
>Figure 7-34</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;p align=center&#62;
&#60;a href='http://www.linux.org' target='blank'&#62;
&#60;img src='images/powered/powered_by_linux.png' border='0'
Alt='Linux Operating System' hspace='10'&#62;&#60;/a&#62;
&#60;a href='http://www.apache.org' target='blank'&#62;
&#60;img src='images/powered/powered_by_apache.png' border='0'
Alt='Apache Web Server' hspace='10'&#62;&#60;/a&#62;
&#60;a href='http://www.mysql.org' target='blank'&#62;
&#60;img src='images/powered/powered_by_mysql.png' border='0'
Alt='mySQL Database' hspace='10'&#62;&#60;/a&#62;
&#60;a href='http://www.php.net' target='blank'&#62;
&#60;img src='images/powered/powered_by_php.png' border='0'
Alt='PHP Homepage Preprocessor' hspace='10'&#62;&#60;/a&#62;
&#60;a href='http://phpnuke.org' target='blank'&#62;
&#60;img src='images/powered/powered_by_nuke.png' border='0'
Alt='PHP-Nuke Content Management System' hspace='10'&#62;&#60;/a&#62;
&#60;/p&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-FOOTER"
></A
><P
><B
>Figure 7-34.    Icons in the footer.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/footer.png"><DIV
CLASS="CAPTION"
><P
>Icons in the footer.</P
></DIV
></P
></DIV
></DIV
></P
></LI
></UL
></LI
><LI
><P
>Backend configuration:</P
><P
></P
><UL
><LI
><P
>Backend title: The title that will appear in the file from which other sites get our newsfeed.</P
></LI
><LI
><P
>Backend language: language for the newsfeed file.</P
></LI
></UL
></LI
><LI
><P
>Mail New Stories to Admin:</P
><P
></P
><UL
><LI
><P
>Notify new submissions by e-mail: It defines whether the administrator gets an e-mail when a user inserts a news article.</P
></LI
><LI
><P
>E-mail to send the message: e-mail to which the notification message will be sent.</P
></LI
><LI
><P
>E-mail subject: the text that will be inserted in the subject line of the message (e.g. &#8220;NEWS for my site&#8221;)</P
></LI
><LI
><P
>E-mail message: notification text (e.g. &#8220;Hey! You got a new submission for your site.&#8221;).</P
></LI
><LI
><P
>E-mail account (From): who has sent the message (typically something like &#8220;Webmaster&#8221;).</P
></LI
></UL
></LI
><LI
><P
>Comments moderation:</P
><P
></P
><UL
><LI
><P
>Type of Moderation: chooses whether a moderation should be set up for the comments or not. The options available are: </P
><P
></P
><UL
><LI
><P
>No moderation</P
></LI
><LI
><P
>Moderation by Admin</P
></LI
><LI
><P
>Moderation by Users</P
></LI
></UL
></LI
></UL
></LI
><LI
><P
>Comments option:</P
><P
></P
><UL
><LI
><P
>Comment limit in Bytes: sets up the maximum size for the comments.</P
></LI
><LI
><P
>Anonymous default name: assigns a name to the persons who chose to remain unregistered.</P
></LI
></UL
></LI
><LI
><P
>Graphics options:</P
><P
></P
><UL
><LI
><P
>Graphical administration menu: sets up whether to have icons or text in the administration area.</P
></LI
></UL
></LI
><LI
><P
>Miscelaneous options:</P
><P
></P
><UL
><LI
><P
>Activate HTTP referers: whether statistics regarding the origin of the visits should be gathered.</P
></LI
><LI
><P
>How many referrers you want as maximum: the maximum number of statistics pertaining to the origin of the visits (max 2000).</P
></LI
><LI
><P
>Activate comments in polls: Whether comments are allowed in the surveys or not.</P
></LI
><LI
><P
>Activate comments in articles: Whether comments are allowed in the articles or not.</P
></LI
></UL
></LI
><LI
><P
>Users options:</P
><P
></P
><UL
><LI
><P
>Minimum users password length: for security reasons it is advisable to set up a rather long password.</P
></LI
></UL
></LI
><LI
><P
>Censure options:</P
><P
></P
><UL
><LI
><P
>Here you can choose to censor some words and also set up the criteria for word matching. The words to be censored have to be included in the $CensorList array in config.php (<A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>).</P
></LI
></UL
></LI
><LI
><P
>WebMail service ptions (<A
HREF="#FIG-WEBMAIL-OPTIONS"
>Figure 7-35</A
>): Here you can</P
><P
></P
><UL
><LI
><P
>set up a message to appear in the footer of every e-mail sent by any user of the site,</P
></LI
><LI
><P
>set up the permissions for the e-mail and its attachments. In case you allow attachments, you can specify the directory that will temporarily hold them (however, this is not a good idea from the security point of view, see <A
HREF="#SECURITY-MEASURES"
>Section 23.4.2</A
>),</P
></LI
><LI
><P
>allow for direct viewing of the attachments' content via web,</P
></LI
><LI
><P
>specify the directory that will hold the attachments of the received e-mails,</P
></LI
><LI
><P
>specify the maximum number of e-mail accounts that your users will be allowed to set up with WebMail,</P
></LI
><LI
><P
>specify the default POP3 server (i.e. server that will be used for querying for <EM
>incoming</EM
> e-mails),</P
></LI
><LI
><P
>specify if the header of the e-mail is going to be visible (recommended).</P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-WEBMAIL-OPTIONS"
></A
><P
><B
>Figure 7-35.    WebMail service options in the Preferences page.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/webmail-options.png"><DIV
CLASS="CAPTION"
><P
>WebMail service options in the Preferences page.</P
></DIV
></P
></DIV
></DIV
></P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="PHP-NUKE-ADD-ONS"
></A
>Chapter 8. PHP-Nuke add-ons</H1
><P
>We present some interesting add-on themes (<A
HREF="#PHP-NUKE-ADD-ON-THEMES"
>Section 8.1</A
>), blocks (<A
HREF="#PHP-NUKE-ADD-ON-BLOCKS"
>Section 8.2</A
>) and modules (<A
HREF="#PHP-NUKE-ADD-ON-MODULES"
>Section 8.3</A
>) for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>.</P
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PHP-NUKE-ADD-ON-THEMES"
>8.1. Add-on themes</A
></H2
><P
>In this section we present some interesting add-on themes for PHP-Nuke:</P
><P
></P
><UL
><LI
><P
>AutoTheme (<A
HREF="#PHP-NUKE-AUTOTHEME"
>Section 8.1.1</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-AUTOTHEME"
>8.1.1. AutoTheme</A
></H3
><P
><A
HREF="http://spidean.mckenzies.net"
TARGET="_top"
>AutoTheme</A
> is an HTML Theme System for PostNuke and <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. The current theme system usually requires you to be somewhat familiar with <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and the PostNuke or <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> architecture. AutoTheme removes this complexity.</P
><P
>AutoTheme's primary benefit is providing users the ability to create <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> themes in HTML using their favorite editor , with no use of <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
>. In addition, AutoTheme provides easy customization of every part of your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site; including block display, custom templates for the Home Page, User Pages and Admin Pages and individual modules. The addition of AutoBlocks provides unlimited locations for your blocks. All AutoTheme settings are easily configured from a graphical administration interface that is integrated into <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. </P
><P
>You can get a better idea of AutoTheme's possibilities, if you compare the <A
HREF="theme.html"
TARGET="_top"
>standard layout of a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme</A
> with the <A
HREF="autotheme.html"
TARGET="_top"
>layout offered by AutoTheme</A
>.</P
><P
>See also <A
HREF="http://spidean.mckenzies.net/PostWrap+index-page-at1nukedocs.phtml"
TARGET="_top"
>AutoTheme for PHP-Nuke</A
>, for more details on AutoTheme and <A
HREF="#TOPIC-STRUCTURE"
>Section 14.1</A
>, for more details on PHP-Nuke's theme structure.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PHP-NUKE-ADD-ON-BLOCKS"
>8.2. Add-on blocks</A
></H2
><P
>In this section we present some interesting add-on blocks for PHP-Nuke: </P
><P
></P
><UL
><LI
><P
>Moon &#38; Sun (<A
HREF="#PHP-NUKE-MOON-SUN-BLOCK"
>Section 8.2.1</A
>), </P
></LI
><LI
><P
>Meteosat (<A
HREF="#PHP-NUKE-METEOSAT-BLOCK"
>Section 8.2.2</A
>), </P
></LI
><LI
><P
>Comic (<A
HREF="#PHP-NUKE-COMIC-BLOCK"
>Section 8.2.3</A
>), </P
></LI
><LI
><P
>Menu Builder (<A
HREF="#PHP-NUKE-MENU-BUILDER"
>Section 8.2.4</A
>), </P
></LI
><LI
><P
>Treemenu (PHP) (<A
HREF="#PHP-NUKE-TREEMENU-WITH-PHP"
>Section 8.2.5</A
>), </P
></LI
><LI
><P
>Treemenu (JS) (<A
HREF="#PHP-NUKE-TREEMENU-WITH-JAVASCRIPT"
>Section 8.2.6</A
>), </P
></LI
><LI
><P
>AdSense (<A
HREF="#PHP-NUKE-GOOGLE-ADSENSE-BLOCK"
>Section 8.2.7</A
>),</P
></LI
><LI
><P
>Random Quotes (<A
HREF="#PHP-NUKE-RANDOM-QUOTES-BLOCK"
>Section 8.2.8</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-MOON-SUN-BLOCK"
>8.2.1. Moon &#38; Sun block</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MOON-MOONSUN-SUN"
></A
><P
><B
>Figure 8-1.    Moon, Moon &#38; Sun and Sun blocks.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/moon-moonsun-sun.png"><DIV
CLASS="CAPTION"
><P
>Moon, Moon &#38; Sun and Sun blocks.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The Moon and Sun blocks are very simple blocks: they show the current Moon or Sun image, but technically they contain no dynamic components. The blocks incorporate an image with a fixed URL. It is left to the provider of the image (the U.S. Naval Observatory and the NASA Goddard Space Flight Center) to put whatever image is &#8220;current&#8221; into the that fixed URL. This simplifies the programming of the blocks substancially.</P
><P
>The <A
HREF="http://www.complex-berlin.de/download.php?op=getit&#38;lid=659"
TARGET="_top"
>Moon block</A
> shows the daily Lunar Phase. It also shows the Julian Date, and some Moon info and uses a simple cache to wait x minutes before grabbing the image again remotely. Stores image in temp cache folder on your site.</P
><P
>The <A
HREF="http://www.complex-berlin.de/download.php?op=getit&#38;lid=658"
TARGET="_top"
>Sun block</A
> grabs an image of the sun that is taken daily, and places it on your web page. Nice colored Solar Image, includes Sunrise and Sunset info, that can be customized. Also caches image on your site, and fetches the new image every x minutes.</P
><P
>The <A
HREF="http://www.karakas-online.de/phpnuke/block-Moon_&#38;_Sun.tar"
TARGET="_top"
>Moon &#38; Sun block</A
> combines the two images in a single <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block, but omits the information and the caching functionality.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Caching</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Even if your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block does not come with a caching mechanism (which is especially useful in cases where the block's content does not change on literally every page request), this does not mean you are excluded from reaping its benefits! In <A
HREF="#ACCELERATING-PHP-NUKE"
>Chapter 24</A
> we discuss all the caching options you have in detail. You may want to use one of the standard solutions presented there, rather than implement a slightly different caching mechanism with each and every block you install on your site.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-METEOSAT-BLOCK"
>8.2.2. Meteosat block</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-METEOSAT"
></A
><P
><B
>Figure 8-2.    Meteosat block.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/meteosat.png"><DIV
CLASS="CAPTION"
><P
>Meteosat block.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The <A
HREF="http://www.karakas-online.de/phpnuke/block-Meteosat.tar"
TARGET="_top"
>Meteosat block</A
> will display the most recent Meteosat images of the World and Europe. It is a good example of a block that contains dynamic images whose filenames vary according to some date schema (see <A
HREF="http://www.karakas-online.de/myServices/showfile.php?highlight=meteosat"
TARGET="_top"
>source code of the Meteosat <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block</A
><A
NAME="AEN7869"
HREF="#FTN.AEN7869"
><SPAN
CLASS="footnote"
>[10]</SPAN
></A
>):</P
><P
>The images are taken from </P
><P
></P
><UL
><LI
><P
><A
HREF="http://www.wetter.com/home/img/sat/METEOSAT_vis_c/xl/"
TARGET="_top"
>http://www.wetter.com/home/img/sat/METEOSAT_vis_c/xl/</A
></P
></LI
><LI
><P
><A
HREF="http://www.wetter.com/home/img/sat/METEOSAT-FULL_ir_c/xl/"
TARGET="_top"
>http://www.wetter.com/home/img/sat/METEOSAT-FULL_ir_c/xl/</A
></P
></LI
></UL
><P
>and are named YYYYMMDDHHMM.jpg, in GMT, so the script has to compute the year, month, day, hour and minutes in GMT, then round down the minutes to either 00 or 30. Thus, although the date and time variables ($year, $month, $day) are dynamic, the schema itself is fixed: the filename is always of the form $year$month$day$hour$minutes.jpg.</P
><P
>Due to delays, the script doesn't try to get the exact latest image, it rather subtracts a safety intervall of 3600 sec from the current time, before it starts the calculations. This way it makes sure an image will always be there.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-COMIC-BLOCK"
>8.2.3. Comic block</A
></H3
><P
>This <A
HREF="http://www.karakas-online.de/phpnuke/block-User_Friendly.tar"
TARGET="_top"
>UserFriendly block</A
> will display the daily comic from the well-known <A
HREF="http://www.userfriendly.org"
TARGET="_top"
>User Friendly site</A
>. It reads the <A
HREF="http://www.userfriendly.org/static/"
TARGET="_top"
>User Friendly daily cartoon page</A
> line by line, searches for the pattern</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>whatever&#60;IMG ALT="Latest Strip"whateverSRC="imagefile"&#62;whatever, </PRE
></FONT
></TD
></TR
></TABLE
><P
>extracts the location of the image file (imagefile) from it and displays it in the block. The <A
HREF="http://www.karakas-online.de/myServices/showfile.php?highlight=userfriendly"
TARGET="_top"
>PHP code of the User Friendly block </A
> is a classic example of how you can do this &#8220;scrapping&#8221; in <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> (-Nuke) and is discussed in <A
HREF="#DISPLAY-IMAGES-PHP-NUKE-BLOCKS"
>Section 20.8</A
>.</P
><DIV
CLASS="IMPORTANT"
><P
></P
><TABLE
CLASS="IMPORTANT"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.png"
HSPACE="5"
ALT="Important"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>You must respect copyright law!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Some people argue that, by using <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> to find out the right image filename and then send HTML code that instructs the client's browser to request that image from the original site and display it, you don't copy anything yourself, only the client's browser copies the file in the client's video memory, which would be necessary anyway. Thus, the argument goes, no copyright is infringed, since no copies are made by you.</P
><P
>However, even if you don't copy the daily comic directly, you use the original author's work to produce a page that can be seen as a &#8220;derivative work&#8221;. Even if you argue that what you do is just the same as what any proxy would do, if it where instructed to strip all other content (like advertisements, for example) from the requested page and serve only the image, it is not sure that the court will follow you in this interpretation.</P
><P
>To avoid even the remote possibility of breaking copyright law, you are well advised to ask the authors' permission, before you use any comics blocks on your site. Some may not agree, in which case you should respect their wish, but some may do give you permission, perhaps under some easy to accept conditions. For example, to obtain permission to show the UserFriendly cartoon on his site, Chris wrote the author, Illiad, who kindly agreed under the condition to reproduce the ads that come with it on the original UserFriendly page. This way, everybody's happy!
<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_smile.png"></SPAN
></P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Leges sine moribus vanae<A
NAME="AEN7924"
HREF="#FTN.AEN7924"
><SPAN
CLASS="footnote"
>[11]</SPAN
></A
></B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Actually, we shouldn't have to resort to legal arguments for this - moral alone should suffice to convince you. Please take a moment to think about it.</P
></TD
></TR
></TABLE
></DIV
><P
>See <A
HREF="#PHP-NUKE-DAILY-COMIC-MODULE"
>Section 8.3.1</A
> for a module which displays more than one daily comics.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-MENU-BUILDER"
>8.2.4. Menu Builder</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MY-MENU"
></A
><P
><B
>Figure 8-3.    Menu block with Menu Builder.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/my-menu.png"><DIV
CLASS="CAPTION"
><P
>Menu block with Menu Builder.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The <A
HREF="http://www.sengers-au.com/Portal/main/modules.php?name=Downloads&#38;d_op=viewdownload&#38;cid=5"
TARGET="_top"
>Language Menu Builder</A
> generates a block with a menu on-the-fly from the administration panel. You can write the menu in your own language, choose your own images for the menu items and have certain options hidden for 'visitors'. The Menu Builder does not use or change any database items. Thus it wil not become obsolete when tables change in the database (this is true for the Treemenu <A
HREF="#PHP-NUKE-TREEMENU-WITH-PHP"
>Section 8.2.5</A
> too). See it in action at <A
HREF="http://www.sengers-au.com"
TARGET="_top"
>http://www.sengers-au.com</A
>, where you will find other interesting downloads around blocks and modules too.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-TREEMENU-WITH-PHP"
>8.2.5. Treemenu with PHP</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-TREEMENU3-2"
></A
><P
><B
>Figure 8-4.     Treemenu block with <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
>.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/treemenu3.png"><DIV
CLASS="CAPTION"
><P
> Treemenu block with <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
>.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The <A
HREF="http://www.karakas-online.de/phpnuke/block-Treemenu.tgz"
TARGET="_top"
>Treemenu for PHP-Nuke</A
> will read a simple, plain text file that contains the &#8220;nodes&#8221; and &#8220;leaves&#8221; of a menu and will create a block with a Treemenu, as shown in <A
HREF="#FIG-TREEMENU3-2"
>Figure 8-4</A
>. Features include:</P
><P
></P
><UL
><LI
><P
>No database changes. You only change a text file.</P
></LI
><LI
><P
>Grouping of menu items (&#8220;leaves&#8221; of the Treemenu) under &#8220;nodes&#8221;.</P
></LI
><LI
><P
>Expansion and collapse of the nodes based on the value of an URL parameter. You can thus let a submenu stay &#8220;open&#8221; , even after you cliked on a leaf link.</P
></LI
><LI
><P
>Custom images for nodes (open or closed) and leaves. You can make it look like a window of a file manager.</P
></LI
><LI
><P
>More complicated logic possible (e.g. depending on categories etc.), see <A
HREF="http://www.karakas-online.de/myTreemenu/refinements.html"
TARGET="_top"
>Treemenu block for PHPNuke: Refinements</A
>.</P
></LI
></UL
><P
>This Treemenu is based on a <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> class and therefore does not require any client scripting (like Javascript). Thus it will still work on clients with Javascript disabled. On the other side, for every change of the menu, like expansion or collapse , a new HTTP page request is made to the server. Like <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> itself, the Treemenu is a server-side technology.</P
><P
>A detailed description of the Treemenu can be found in <A
HREF="http://www.karakas-online.de/myTreemenu/"
TARGET="_top"
>Treemenu block for PHPNuke</A
>. We also discuss it in <A
HREF="#TREEMENU-BLOCK"
>Section 17.2.2</A
>, in the context of modifying blocks, specifically the Modules block.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-TREEMENU-WITH-JAVASCRIPT"
>8.2.6. Treemenu with Javascript</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-TREEMENU-JS"
></A
><P
><B
>Figure 8-5.    Treemenu block with Javascript.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/treemenu-js.png"><DIV
CLASS="CAPTION"
><P
>Treemenu block with Javascript.</P
></DIV
></P
></DIV
></DIV
></P
><P
>If you are looking for a Treemenu based on Javascript, you can see one in action at <A
HREF="http://www.nuketurk.com"
TARGET="_top"
>Nuke Turk</A
> and download from the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> downloads section there. Since Javascript is a client-based technology, the menu will be downloaded in whole once and no further page requests will be necessary to display its nodes and leaves. This may result in slower downloads for the first time, but faster response times from the menu in expansions and collapses. But it will not work for clients with Javascript disabled.</P
><P
>An alternative Menu Block is &#8220;Sommaire Paramétrable&#8221; <A
NAME="AEN8035"
HREF="#FTN.AEN8035"
><SPAN
CLASS="footnote"
>[12]</SPAN
></A
>(see also <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=390"
TARGET="_top"
>Neue Bloecke</A
>). You can download it from <A
HREF="http://www.nukecops.com/downloads-cat-2.html"
TARGET="_top"
>Customize Menu</A
>. This add-on allows the admin to set up his own menu for Nuke web sites (replaces the Modules block that lists all the active &#38; visible modules). </P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-SOMMAIRE-PARAMETRABLE"
></A
><P
><B
>Figure 8-6.    Modules block. created with Sommaire Paramétrable.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/sommaire-parametrable.png"><DIV
CLASS="CAPTION"
><P
>Modules block. created with Sommaire Paramétrable.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Features of version 2.0 :</P
><P
></P
><UL
><LI
><P
>Modules are grouped into categories (sub-menu).</P
></LI
><LI
><P
>You can choose the display order of each module and category.</P
></LI
><LI
><P
>You can set up a background color for each category.</P
></LI
><LI
><P
>You can now add external links in your menu ! (You were restricted to modules only in v.1.0).</P
></LI
><LI
><P
>Multilingual support.</P
></LI
><LI
><P
>Categories' names can be centered.</P
></LI
><LI
><P
>You can display a FLASH file instead of the category's name.</P
></LI
><LI
><P
>You can set images for each module/link.</P
></LI
><LI
><P
>You can separate categories with horizontal bars.</P
></LI
><LI
><P
>You can hide to visitors the modules for members only.</P
></LI
><LI
><P
>You can choose the class (stylesheet css) for the categories' names.</P
></LI
><LI
><P
>A 'new mail' icon appears before "Private Messages" if the member has unread Private Messages.</P
></LI
><LI
><P
>The administration console has been improved and is now completely part of the nuke administration panel. (2 languages included : French and English)</P
></LI
></UL
><P
>However, it seems that it does not allow subcategories (FIXME: Is this correct?). The name of the file to download is sommaire_parametrable_v2.zip.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-GOOGLE-ADSENSE-BLOCK"
>8.2.7. Google AdSense block</A
></H3
><P
>If you would like to add Google AdSense ads to your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> based portal with ease and customization, then this block is for you! Features of v.1.0:</P
><P
></P
><UL
><LI
><P
>Choice of showing 1 to 4 ads (no huge skyscrapers unless you want them!)</P
></LI
><LI
><P
>Full color customizations</P
></LI
></UL
><P
>To see it in action and to download (registration not required), visit the <A
HREF="http://designs.vie4life.com/modules.php?name=Downloads&#38;d_op=viewdownload&#38;cid=9"
TARGET="_top"
>Downloads section of VieDesigns</A
>. If you want to do it yourself, or just acquire the knowhow behind advertisements in PHP-Nuke, read <A
HREF="#ADVERTISEMENTS-IN-PHP-NUKE-MODULES"
>Section 21.11</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-RANDOM-QUOTES-BLOCK"
>8.2.8. Random Quotes block</A
></H3
><P
>The <A
HREF="http://www.skrodahl.net/modules.php?name=Downloads&#38;d_op=viewdownload&#38;cid=4"
TARGET="_top"
>Random Quotes block</A
> is an unintrusive block for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.0 that takes its quotes from a "fortune" file of your choice ("fortune" is a humourous quotes program commonly available on most UNIX/Linux/BSD distributions). It snaps easily in place and does not break your layout.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-RANDOM-QUOTES"
></A
><P
><B
>Figure 8-7.    Random Quotes block.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/random-quotes.png"><DIV
CLASS="CAPTION"
><P
>Random Quotes block.</P
></DIV
></P
></DIV
></DIV
></P
><P
>It is easy to construct a fortune file with the content of your choice, then let block-Random_Quotes display it. The file type is just like the one for 'fortunes': enter quotes in plain text, separated by a per cent sign (%), see the fortunes file that comes with the block. There also various ready-to-use fortune files available on the Net. </P
><P
>There is no restriction on the file's content, so it does not have to be humourous - it could just as well be religious, political, philosophical, or just plain marketese. You could for example use it to display random Encyclopedia terms, see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=18315"
TARGET="_top"
>Random Encyclopedia</A
>.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PHP-NUKE-ADD-ON-MODULES"
>8.3. Add-on modules</A
></H2
><P
>In this section we present some interesting add-on modules for PHP-Nuke: </P
><P
></P
><UL
><LI
><P
>Daily Comic (<A
HREF="#PHP-NUKE-DAILY-COMIC-MODULE"
>Section 8.3.1</A
>), </P
></LI
><LI
><P
>Event Calendar (<A
HREF="#PHP-NUKE-EVENT-CALENDAR-MODULE"
>Section 8.3.2</A
>), </P
></LI
><LI
><P
>Your Account Tweak (<A
HREF="#NSN-YOUR-ACCOUNT-TWEAK-MODULE"
>Section 8.3.3</A
>), </P
></LI
><LI
><P
>Approve Membership (<A
HREF="#PHP-NUKE-APPROVE-MEMBERSHIP-MODULE"
>Section 8.3.4</A
>), </P
></LI
><LI
><P
>Gallery (<A
HREF="#PHP-NUKE-GALLERY-MODULE"
>Section 8.3.5</A
>), </P
></LI
><LI
><P
>IP Tracking (<A
HREF="#PHP-NUKE-IP-TRACKING-MODULE"
>Section 8.3.6</A
>), </P
></LI
><LI
><P
>Protector (<A
HREF="#PHP-NUKE-PROTECTOR-MODULE"
>Section 8.3.7</A
>), </P
></LI
><LI
><P
>Web Cam (<A
HREF="#PHP-NUKE-WEBCAM-MODULE"
>Section 8.3.8</A
>), </P
></LI
><LI
><P
>My Headlines (<A
HREF="#PHP-NUKE-MY-HEADLINES-MODULE"
>Section 8.3.9</A
>), </P
></LI
><LI
><P
>PHP-Nuke Tools (<A
HREF="#PHP-NUKE-TOOLS-MODULE"
>Section 8.3.10</A
>), </P
></LI
><LI
><P
>Upload (<A
HREF="#PHP-NUKE-UPLOAD-MODULE"
>Section 8.3.11</A
>), </P
></LI
><LI
><P
>Upload add-on for phpBB (<A
HREF="#UPLOAD-ADD-ON-FOR-PHPBB"
>Section 8.3.12</A
>), </P
></LI
><LI
><P
>ODP (<A
HREF="#PHP-NUKE-ODP-MODULE"
>Section 8.3.13</A
>), </P
></LI
><LI
><P
>eCommerce (<A
HREF="#PHP-NUKE-ECOMMERCE-MODULE"
>Section 8.3.14</A
>), </P
></LI
><LI
><P
>WorkBoard (<A
HREF="#PHP-NUKE-WORKBOARD-MODULE"
>Section 8.3.15</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-DAILY-COMIC-MODULE"
>8.3.1. Daily Comic module</A
></H3
><P
>In contrast to the UserFriendly block (<A
HREF="#PHP-NUKE-COMIC-BLOCK"
>Section 8.2.3</A
>), which shows only one cartoon, the <A
HREF="http://www.coding-network.net/modules.php?name=Downloads&#38;d_op=viewdownloaddetails&#38;lid=17"
TARGET="_top"
>Daily Comic module</A
> will show a whole series of different daily comics from various authors. However, instead of getting the images from the original web pages, it requests them from some third party web page. This way, the mechanics of achieving this result remain hidden to you - which is not very good from the educational point of view, even though the result is very pleasing. See it in action in <A
HREF="http://www.coding-network.net/modules.php?name=comics"
TARGET="_top"
>Coding Network: Daily Comic module</A
>. Please read the admonition on copyright in <A
HREF="#PHP-NUKE-COMIC-BLOCK"
>Section 8.2.3</A
>, before you decide to use this module!</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-EVENT-CALENDAR-MODULE"
>8.3.2. Event calendar</A
></H3
><P
>Based on version 1.5 by Rob Sutton, the Event Calendar (<A
HREF="#FIG-EVENTCAL"
>Figure 8-8</A
>) found in <A
HREF="http://phpnuke.holbrookau.net"
TARGET="_top"
>http://phpnuke.holbrookau.net</A
> is much updated and features many improvements and add- ons. For example, the adminstration area features configuration via a graphical interface, posting of events can be mode rated and users even have the option of adding comments to any event.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-EVENTCAL"
></A
><P
><B
>Figure 8-8.    Event Calendar
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/eventcal.png"><DIV
CLASS="CAPTION"
><P
>Event Calendar</P
></DIV
></P
></DIV
></DIV
></P
><P
>For the installation, it is assumed that the user has some knowledge of MySQL and is comfortable with running simple queries before starting. It is highly recommended that you have phpMyAdmin (see <A
HREF="#PHPMYADMIN2"
>Section 3.4</A
>) installed on your server - it will simplify installation and help with error tracking.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-EVENTCAL1"
></A
><P
><B
>Figure 8-9.    Calendar1 Block
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/eventcal1.png"><DIV
CLASS="CAPTION"
><P
>Calendar1 Block</P
></DIV
></P
></DIV
></DIV
></P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-EVENTCAL2"
></A
><P
><B
>Figure 8-10.    Calendar2 Block
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/eventcal2.png"><DIV
CLASS="CAPTION"
><P
>Calendar2 Block</P
></DIV
></P
></DIV
></DIV
></P
><P
>Add new Block(s) using one or more of the 5 available calendar block types:</P
><P
></P
><UL
><LI
><P
>Calendar1 (<A
HREF="#FIG-EVENTCAL1"
>Figure 8-9</A
>) shows only events for that day. </P
></LI
><LI
><P
>Calendar2 (<A
HREF="#FIG-EVENTCAL2"
>Figure 8-10</A
>) is a month calendar with a daily events list. </P
></LI
><LI
><P
>Calendar3 (<A
HREF="#FIG-EVENTCAL3"
>Figure 8-11</A
>) scrolls a list of coming events. </P
></LI
><LI
><P
>Calendar4 (<A
HREF="#FIG-EVENTCAL4"
>Figure 8-12</A
>) is the monthly calendar with links and day/month view selection. </P
></LI
><LI
><P
>Calendar5 (<A
HREF="#FIG-EVENTCAL5"
>Figure 8-13</A
>) is an enhanced ( next 10 events) version of the scrolling calendar block.</P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-EVENTCAL3"
></A
><P
><B
>Figure 8-11.    Calendar3 Block
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/eventcal3.png"><DIV
CLASS="CAPTION"
><P
>Calendar3 Block</P
></DIV
></P
></DIV
></DIV
>

<DIV
CLASS="FIGURE"
><A
NAME="FIG-EVENTCAL4"
></A
><P
><B
>Figure 8-12.    Calendar4 Block
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/eventcal4.png"><DIV
CLASS="CAPTION"
><P
>Calendar4 Block</P
></DIV
></P
></DIV
></DIV
>

<DIV
CLASS="FIGURE"
><A
NAME="FIG-EVENTCAL5"
></A
><P
><B
>Figure 8-13.    Calendar5 Block
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/eventcal5.png"><DIV
CLASS="CAPTION"
><P
>Calendar5 Block</P
></DIV
></P
></DIV
></DIV
></P
><P
>For installation instructions, read the readme.txt file that comes in the docs folder of the unzipped eventcal-xxx.zip file.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="NSN-YOUR-ACCOUNT-TWEAK-MODULE"
>8.3.3. NSN Your Account Tweak module</A
></H3
><P
>A module that allows the administrator to apply a fine-grained control over user management is <A
HREF="http://www.nukefixes.com/article6.html"
TARGET="_top"
>NSN Your Account Tweak 650 3.0.2</A
>. According to the description, it offers the following features (<A
HREF="#FIG-YOUR-ACCOUNT-TWEAK"
>Figure 8-14</A
>):</P
><P
></P
><UL
><LI
><P
>Provides for servers without mail support.</P
></LI
><LI
><P
>Optionally send the admin an email when someone unregisters.</P
></LI
><LI
><P
>Optionally send the admin an email when someone registers.</P
></LI
><LI
><P
>Admins can allow user self deletion.</P
></LI
><LI
><P
>Admins can block user theme changes.</P
></LI
><LI
><P
>Admins can block user email changes.</P
></LI
><LI
><P
>Blocks usernames with preset strings in them.</P
></LI
><LI
><P
>Allows for Required User approval by Admin.</P
></LI
><LI
><P
>Admins can suspend users.</P
></LI
><LI
><P
>Users can be promoted to Admins by SuperUser ONLY.</P
></LI
><LI
><P
>Admins can resend Activation Email.</P
></LI
><LI
><P
>Admins can choose to bypass email activation.</P
></LI
><LI
><P
>Admins can now view pending user details.</P
></LI
><LI
><P
>Admins can now modify pending user details.</P
></LI
><LI
><P
>Improved NavBar scripting. </P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-YOUR-ACCOUNT-TWEAK"
></A
><P
><B
>Figure 8-14.    Extra options for user management in the NSN Your Account Tweak module.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/your-account-tweak.png"><DIV
CLASS="CAPTION"
><P
>Extra options for user management in the NSN Your Account Tweak module.</P
></DIV
></P
></DIV
></DIV
></P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Download the right NSN Your Account Tweak version!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Be careful with the version you download from this module! The number 650, for example, indicates that it is only for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.5. Use only the version that is in accordance with your installed <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> version, otherwise you are guaranteed to mess up your installation completely.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-APPROVE-MEMBERSHIP-MODULE"
>8.3.4. Approve Membership module</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-APPROVE-MEMBERSHIP-PENDING-APPLICATIONS"
></A
><P
><B
>Figure 8-15.    Pending applications in the Approve Membership module.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/approve-membership-pending-applications.png"><DIV
CLASS="CAPTION"
><P
>Pending applications in the Approve Membership module.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The <A
HREF="http://www.ulsoft.scarbridge.co.uk"
TARGET="_top"
>Approve Membership module</A
> allows an administrator to approve membership applications. The applicant's details are sent to a pending users table and a notification email is sent to the administrator. A list of pending applicants is displayed to the administrator, who can delete or approve as he thinks fit (see <A
HREF="#FIG-APPROVE-MEMBERSHIP-PENDING-APPLICATIONS"
>Figure 8-15</A
>). On approval, the normal email is sent to the applicant with the activation link. The following options are available: </P
><P
></P
><UL
><LI
><P
>Add a customisable message to this email (see <A
HREF="#FIG-APPROVE-MEMBERSHIP-APPROVAL-MESSAGE"
>Figure 8-16</A
>).</P
></LI
><LI
><P
>Send a follow up email to an applicant.</P
></LI
><LI
><P
>Send an email to a rejected applicant.</P
></LI
><LI
><P
>All emails are customizable.</P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-APPROVE-MEMBERSHIP-APPROVAL-MESSAGE"
></A
><P
><B
>Figure 8-16.    Approval message in the Approve Membership module.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/approve-membership-update-approval-message.png"><DIV
CLASS="CAPTION"
><P
>Approval message in the Approve Membership module.</P
></DIV
></P
></DIV
></DIV
></P
><P
>See also <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=83"
TARGET="_top"
>Authorize accounts</A
> for an in-depth discussion. </P
><P
>The new <A
HREF="http://www.karakas-online.de/downloads/Approve_Membership3.0-6.9.zip"
TARGET="_top"
>version 3.0 of the Approve Membership module for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.9</A
> offers even more facilities, such as:</P
><P
></P
><UL
><LI
><P
>The option to include the activation link or not.</P
></LI
><LI
><P
>The option to semi-automate the approval process. With this option, the admin can pre-approve known email addresses (from student lists, club members, family and friends etc), see <A
HREF="#FIG-APPROVE-MEMBERSHIP-EMAIL-MANAGEMENT-1"
>Figure 8-17</A
>, <A
HREF="#FIG-APPROVE-MEMBERSHIP-EMAIL-MANAGEMENT-2"
>Figure 8-18</A
>.</P
></LI
><LI
><P
>If an applicant is on the pre-approved list, his application is automatically approved without the intervention of admin</P
></LI
><LI
><P
>If an applicant is not on the approved list, there are various configurations for dealing with the application.</P
></LI
><LI
><P
>The automated process is configurable from the administration panel (<A
HREF="#BACKEND"
>Chapter 7</A
>).</P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-APPROVE-MEMBERSHIP-EMAIL-MANAGEMENT-1"
></A
><P
><B
>Figure 8-17.    E-mail management in the Approve Membership module, part I.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/approve-membership-email-management-1.png"><DIV
CLASS="CAPTION"
><P
>E-mail management in the Approve Membership module, part I.</P
></DIV
></P
></DIV
></DIV
></P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-APPROVE-MEMBERSHIP-EMAIL-MANAGEMENT-2"
></A
><P
><B
>Figure 8-18.    E-mail management in the Approve Membership module, part II.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/approve-membership-email-management-2.png"><DIV
CLASS="CAPTION"
><P
>E-mail management in the Approve Membership module, part II.</P
></DIV
></P
></DIV
></DIV
></P
><P
>If you want users to be registered directly, without confirmation mails, see <A
HREF="#REGISTER-USERS-IMMEDIATELY"
>Section 18.6.5</A
> or the <A
HREF="http://ravenphpscripts.com/download-file-58.html"
TARGET="_top"
>New User Auto Activation Hack</A
> and the <A
HREF="http://ravenphpscripts.com/download-file-83.html"
TARGET="_top"
>Auto Registration Activation For Nuke v7.0</A
>. If you want to disable registration, see <A
HREF="#DISABLE-REGISTRATION"
>Section 18.6.4</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-GALLERY-MODULE"
>8.3.5. Gallery module</A
></H3
><P
>The Gallery module from <A
HREF="http://www.nukedgallery.net"
TARGET="_top"
>Nuked Gallery</A
> is the &#8220;nuked&#8221; version of the standalone <A
HREF="http://gallery.menalto.com"
TARGET="_top"
>Gallery</A
> package. Gallery comes with a handy web based configuration wizard. This wizard helps to make sure that your web server and operating system are set up correctly. It allows you to configure many of Gallery's options while determining as much as it can from your environment. The wizard will create an administrator account for you. This is a special account that allows you to create other user accounts, create albums, and set album permissions.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-GALLERY"
></A
><P
><B
>Figure 8-19.    Gallery module.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/gallery.png"><DIV
CLASS="CAPTION"
><P
>Gallery module.</P
></DIV
></P
></DIV
></DIV
></P
><P
>A photo or movie is the basic unit of Gallery. Photos and movies are grouped together into albums (<A
HREF="#FIG-GALLERY"
>Figure 8-19</A
>). Once you have the photos in your album, the fun begins. Typically an intermediate resized version and a thumbnail of the image are created for you. You can:</P
><P
></P
><UL
><LI
><P
>Add captions</P
></LI
><LI
><P
>Edit the thumbnail. Gallery comes with a small <SPAN
CLASS="APPLICATION"
>Java</SPAN
> applet that lets you select a part of the image as the source for your thumbnail.</P
></LI
><LI
><P
>Rotate your photo (in 90 degree increments)</P
></LI
><LI
><P
>Highlight a photo (pick a photo to represent the album in the main Gallery)</P
></LI
><LI
><P
>Reorder the photos in the album </P
></LI
><LI
><P
>Hide photos (so that they're only visible to the owner)</P
></LI
><LI
><P
>Delete photos</P
></LI
><LI
><P
>Sort your album based on popularity, title, number of comments, and photo capture date. </P
></LI
><LI
><P
>Edit multiple captions at once </P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-GALLERY-RELATED-FILES"
></A
><P
><B
>Figure 8-20.    Gallery related files at nukedgallery.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/gallery-related-files.png"><DIV
CLASS="CAPTION"
><P
>Gallery related files at nukedgallery.</P
></DIV
></P
></DIV
></DIV
></P
><P
>To download the Gallery module, go to <A
HREF="http://www.nukedgallery.net"
TARGET="_top"
>Nuked Gallery</A
>, find the &#8220;Related files&#8221; block (<A
HREF="#FIG-GALLERY-RELATED-FILES"
>Figure 8-20</A
>) and click on the link with the most recent stable version. Other Gallery related resources are</P
><P
></P
><UL
><LI
><P
><A
HREF="http://phpnuke.nukedgallery.net"
TARGET="_top"
>The Nuked Gallery Demo Site</A
></P
></LI
><LI
><P
><A
HREF="http://gallery.menalto.com/modules.php?op=modload&#38;name=GalleryDocs&#38;file=index&#38;page=gallery1-install.faq.php"
TARGET="_top"
>The Gallery FAQ</A
></P
></LI
><LI
><P
><A
HREF="http://gallery.menalto.com/modules.php?op=modload&#38;name=GalleryDocs&#38;file=index"
TARGET="_top"
>Gallery Documentation</A
></P
></LI
><LI
><P
><A
HREF="http://gallery.menalto.com/modules.php?op=modload&#38;name=phpWiki&#38;file=index"
TARGET="_top"
>The Gallery Wiki Docs</A
></P
></LI
><LI
><P
><A
HREF="http://gallery.menalto.com/modules.php?op=modload&#38;name=PNphpBB2&#38;file=index"
TARGET="_top"
>The Gallery Forums</A
></P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-IP-TRACKING-MODULE"
>8.3.6. IP Tracking module</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-IP-TRACKING"
></A
><P
><B
>Figure 8-21.    IP Tracking module: IP Tracking Info.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/ip-tracking.png"><DIV
CLASS="CAPTION"
><P
>IP Tracking module: IP Tracking Info.</P
></DIV
></P
></DIV
></DIV
></P
><P
>To track your visitors' IP address, you can use the IP tracking module. Get it at the <A
HREF="http://www.ierealtor.com/modules.php?name=Downloads&#38;d_op=viewdownload&#38;cid=2"
TARGET="_top"
>Downloads section of ierealtor</A
>. After installation and activation of the module, a click on the &#8220;IP Tracking&#8221; link in the Modules block will display the &#8220;IP Tracking Info&#8221;, a list of IP addresses that accessed the site (<A
HREF="#FIG-IP-TRACKING"
>Figure 8-21</A
>). You can order the list by ascending or descending order of its column fields, by clicking on the respective up- and down-arrows.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Lazy man's Logfile Inspection</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Nothing beats regular inspection of the real web server logfiles - but if you are lazy, you want a quick info of what is going on, or you cannot do otherwise, the IP Tracking module will give you a quick solution to your logfile inspection problem. In the Page View Info (<A
HREF="#FIG-IP-TRACKING-PAGE-VIEW-INFO"
>Figure 8-22</A
>), be attentive to URL parameters that pass Javascript code or SQL queries to the database - they are a clear indication of cross-scripting (<A
HREF="#CROSS-SITE-SCRIPTING-WITH-PHP-NUKE"
>Section 23.3.1</A
>) and SQL injection (<A
HREF="#SQL-INJECTION-WITH-PHP-NUKE"
>Section 23.3.2</A
>) attempts at your site respectively.</P
></TD
></TR
></TABLE
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-IP-TRACKING-PAGE-VIEW-INFO"
></A
><P
><B
>Figure 8-22.    IP Tracking module: Page View Info.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/ip-tracking-page-view-info.png"><DIV
CLASS="CAPTION"
><P
>IP Tracking module: Page View Info.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The IP addresses themeselves are links to a detailed view, the &#8220;Page View Info&#8221; (<A
HREF="#FIG-IP-TRACKING-PAGE-VIEW-INFO"
>Figure 8-22</A
>). It lists the pages that were requested by that IP address. Again, you can order the list by name or date using the arrows on the table header. Note: administrators won't appear online since they are not entered in the nuke_session table.</P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Code corrections necessary for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> v. 6.0 and/or old <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> versions!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you get the error:</P
><A
NAME="AEN8627"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>You can't access this file directly...</P
></BLOCKQUOTE
><P
>then you are using an old <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> version that does not understand the <A
HREF="http://de2.php.net/manual/en/reserved.variables.php"
TARGET="_top"
>_SERVER superglobal</A
>. Edit the index.php file of the module and change:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if (!eregi("modules.php", $_SERVER['PHP_SELF'])) {</PRE
></FONT
></TD
></TR
></TABLE
><P
>to:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if (!eregi("modules.php", $PHP_SELF)) {</PRE
></FONT
></TD
></TR
></TABLE
><P
>You also have to edit iptracking.php. Change:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ip = $_SERVER["REMOTE_ADDR"] ;</PRE
></FONT
></TD
></TR
></TABLE
><P
>to:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ip = $HTTP_SERVER_VARS["REMOTE_ADDR"] ;</PRE
></FONT
></TD
></TR
></TABLE
><P
>and</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$pg = $_SERVER["SCRIPT_NAME"];</PRE
></FONT
></TD
></TR
></TABLE
><P
>to:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$pg = $HTTP_SERVER_VARS["SCRIPT_NAME"];</PRE
></FONT
></TD
></TR
></TABLE
><P
>and</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if (($_SERVER["QUERY_STRING"]) != "") 
{ $pg = $pg . "?" . $_SERVER["QUERY_STRING"] ; }</PRE
></FONT
></TD
></TR
></TABLE
><P
>to:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if (($HTTP_SERVER_VARS["QUERY_STRING"]) != "") 
{ $pg = $pg . "?" . $HTTP_SERVER_VARS["QUERY_STRING"] ; }</PRE
></FONT
></TD
></TR
></TABLE
><P
>If you are getting MySQL errors like the one of <A
HREF="#WARNING-MYSQL-FETCH-ROW-SUPPLIED-ARGUMENT"
>Section 3.9.2</A
>, complaining about non-valid MySQL result resources, then you are probably using an old <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> version (like 6.0, for example) that uses the field &#8220;username&#8221;, instead of &#8220;uname&#8221; in the nuke_session table. In this case you have to change &#8220;uname&#8221; to &#8220;username&#8221; in the two WHERE clauses of the index.php file of the module. Change:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$res = sql_query("select * from ".$prefix."_session 
where uname='$username' and host_addr='$ip'", $dbi);</PRE
></FONT
></TD
></TR
></TABLE
><P
>to:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$res = sql_query("select * from ".$prefix."_session 
where username='$username' and host_addr='$ip'", $dbi);</PRE
></FONT
></TD
></TR
></TABLE
><P
>and</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$res2 = sql_query("select * from ".$prefix."_session 
where host_addr='$ip' and host_addr=uname", $dbi);</PRE
></FONT
></TD
></TR
></TABLE
><P
>to:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$res2 = sql_query("select * from ".$prefix."_session 
where host_addr='$ip' and host_addr=username", $dbi);</PRE
></FONT
></TD
></TR
></TABLE
></TD
></TR
></TABLE
></DIV
><P
>If your main motivation for using the IP tracking module is to be able to ban certain annoying visitors from certain IPs, check also the Protector module (<A
HREF="#PHP-NUKE-PROTECTOR-MODULE"
>Section 8.3.7</A
>) for a ready-made, full-featured solution to IP banning, as well as <A
HREF="#BAN-IP-ADDRESSES"
>Section 23.5</A
> for a quick, do-it-yourself hack.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-PROTECTOR-MODULE"
>8.3.7. Protector module</A
></H3
><P
>The <A
HREF="http://protector.warcenter.se/index.php"
TARGET="_top"
>Protector System</A
> gives you "high level" logs of session activity on your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site. But not only this - it can be effectively used to ban IP addresses and users:</P
><P
></P
><UL
><LI
><P
>Possibility to add a single IP or a whole range.</P
></LI
><LI
><P
>Logging of ALL IP(s) that hit your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site.</P
></LI
><LI
><P
>If a member joins the site the logger fetches the username and stores it with their IP. (Otherwise the IP gets the username Anonymous)</P
></LI
><LI
><P
>If a member IP changes the new IP will be stored with their username</P
></LI
><LI
><P
>Logging of the real IP not just the proxy IP if that is the case.</P
></LI
><LI
><P
>Search function (with wildcards *) after the logged IP and user name. And sort order.</P
></LI
><LI
><P
>Protection of your IP is done when you first install this system. That means that no one can ban that IP.</P
></LI
><LI
><P
>As head admin (GOD) you can add several protected IP(s) in the Admin Panel. All other admins just see personal settings where they can change total amount of row they want to display in the banned &#38; locate IP panels.</P
></LI
><LI
><P
>Automaticallyupdate the date of a logged IP so that you can see when a particular IP or user was on your site.</P
></LI
><LI
><P
>You can dns/trace/ping and more after you query the IP with the query tool that I have implemented.</P
></LI
><LI
><P
>It is totally themes integrated system.</P
></LI
><LI
><P
>Security check so that you can't ban yourself (the IP you currently use when your in the admin panel) or protected IP.</P
></LI
><LI
><P
>Double check so that there is no banning or logging of the same information twice.</P
></LI
><LI
><P
>If a banned member is banned and they change their IP. The system will check the banned database and compare if the username(s) match. If it does a new row with the new IP and same username is added in the ban list. So they are banned again automatically with the new IP.</P
></LI
><LI
><P
>Counts on how many times a banned user is trying to reach the site.</P
></LI
><LI
><P
>Possibility to instantly ban people from your list with logged IP.</P
></LI
><LI
><P
>You can of course un-ban IP numbers.</P
></LI
><LI
><P
>Very simple to install, The Ban System will create all needed tables for the MySQL Database on the first run.</P
></LI
><LI
><P
>As Forum admin can you reach the Edit User Function from the "Locate Panel". Also, a direct link to the public user information is there.</P
></LI
><LI
><P
>In the Locate panel there are 4 different images close to the IP number.</P
><P
></P
><OL
TYPE="1"
><LI
><P
>A Green dot indicates that the IP is just logged.</P
></LI
><LI
><P
>A Red dot indicates that IP is banned.</P
></LI
><LI
><P
>A Star indicates that this IP number is the IP you are currently using.</P
></LI
><LI
><P
>A blinking computer gif indicates if that logged user/IP is online.</P
></LI
></OL
></LI
><LI
><P
>A small stat page where you can see some stats on the Ban Protector System.</P
></LI
><LI
><P
>Anti hammering protection system.</P
></LI
><LI
><P
>Special Notes to each logged IP is possible.</P
></LI
><LI
><P
>Close the site function. Only admins are able to be on the site when active.</P
></LI
><LI
><P
>When a user attempts to access the admin page a note is added to their IP to warn you of potential hackers.</P
></LI
><LI
><P
>An auto pruning system to prune logged IP addresses set from the maintenance panel.</P
></LI
><LI
><P
>Grant access to the Ban System for your (admin) users who are not a "super user".</P
></LI
><LI
><P
>Auto Protect your IP if you logon using another pc with your user name and the old IP will be replaced with the new one until you logon again then your IP will be replaced again.</P
></LI
><LI
><P
>Optimize and repair the tables in the Protector System to reclaim the unused space and to de-fragment the data file or if you get errors.</P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-WEBCAM-MODULE"
>8.3.8. WebCam module</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-CAMPORTAL-BLOCK"
></A
><P
><B
>Figure 8-23.    camPortal block.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/camPortal-block.png"><DIV
CLASS="CAPTION"
><P
>camPortal block.</P
></DIV
></P
></DIV
></DIV
></P
><P
>If you are looking for a webcam module, have a look at the <A
HREF="http://www.skepticshour.com/portal.php?load=Descargas&#38;file=view_downloads&#38;func=view_downloads&#38;cid=5"
TARGET="_top"
>camPortal</A
>. See it in action at <A
HREF="http://www.skepticshour.com/portal.php?load=camPortal"
TARGET="_top"
>The Sceptics Hour</A
>. camPortal's highlights include:</P
><P
></P
><UL
><LI
><P
>Advanced Admin panel</P
></LI
><LI
><P
>Static or Dynamic webcam image in block (optional, see <A
HREF="#FIG-CAMPORTAL-BLOCK"
>Figure 8-23</A
>)</P
></LI
><LI
><P
>Categories</P
></LI
><LI
><P
>Vote system (<A
HREF="#FIG-CAMPORTAL"
>Figure 8-24</A
>)</P
></LI
><LI
><P
>Comment system</P
></LI
><LI
><P
>Hit counter</P
></LI
><LI
><P
>Users can report broken cams</P
></LI
><LI
><P
>Users can submit their cams</P
></LI
><LI
><P
>Languages included: English, Spanish, Dutch, German.</P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-CAMPORTAL"
></A
><P
><B
>Figure 8-24.    camPortal module.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/camPortal.png"><DIV
CLASS="CAPTION"
><P
>camPortal module.</P
></DIV
></P
></DIV
></DIV
></P
><P
>You must have at least <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.5 and a newer <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> version (one that understands the <A
HREF="http://de2.php.net/manual/en/reserved.variables.php"
TARGET="_top"
>_SERVER superglobal</A
>, for example) to use this module. The installation instructions are a bit outdated. In some parts, for example, they talk about &#8220;webcam&#8221;, when atually it should say &#8220;camPortal&#8221; - but with knowledge of the structure of a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module (see <A
HREF="#MODULE-STRUCTURE"
>Section 21.1</A
>) you will figure it out. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
><P
>To grab the images from your webcam, you can use <A
HREF="http://www.theill.com/conquercam/default.asp"
TARGET="_top"
>ConquerCam</A
>. ConquerCam is a low-priced (only $10 USD), easy to use webcam manager for grabbing images from your web cam under Windows, preparing them with various effects and uploading them to your web site (where you can use camPortal to display them in PHP-Nuke). Using ConquerCam you are able to setup your computer as a security system as well, using the advanced motion detection and mail-notification system included.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-CONQUERCAM"
></A
><P
><B
>Figure 8-25.    ConquerCam: main window with the Options dialog opened up.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/conquercam.png"><DIV
CLASS="CAPTION"
><P
>ConquerCam: main window with the Options dialog opened up.</P
></DIV
></P
></DIV
></DIV
></P
><P
>ConquerCam can be customized in a variety of ways, e.g. by selecting how often you want to grab and upload images, which overlay effects you want to use (many of the well-known Adobe PhotoShop effects are available, such as Multiply or Darken) and unlimited numbers of textual captions to put on your grabbed image using a bunch of tags. Tags are replaced by dynamic data such as current date/time, WinAMP title currently playing or the Swatch Internet Time.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-MY-HEADLINES-MODULE"
>8.3.9. My Headlines module</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MYHEADLINES-BOX"
></A
><P
><B
>Figure 8-26.    MyHeadlines Box containing syndicated content.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/myheadlines-box.png"><DIV
CLASS="CAPTION"
><P
>MyHeadlines Box containing syndicated content.</P
></DIV
></P
></DIV
></DIV
></P
><P
>MyHeadlines is a personalized syndicated content module. As a user you may subscribe to many news/content sources from the MyHeadlines database. For each of your subscriptions this site will gather the latest headlines/stories/content from the source and present a consolidated view of all of your interests in one location. The MyHeadlines engine allows you to configure the layout of this page to suit your needs; It will allow you to place the "Boxes" containing the syndicated content (<A
HREF="#FIG-MYHEADLINES-BOX"
>Figure 8-26</A
>) in any one of three possible places (Left, Right or Middle) on two rows (Top and Bottom) of the module's space on the front page.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MYHEADLINES-SUBSCRIBE"
></A
><P
><B
>Figure 8-27.    MyHeadlines: Subscribing to News sources.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/myheadlines-subscribe.png"><DIV
CLASS="CAPTION"
><P
>MyHeadlines: Subscribing to News sources.</P
></DIV
></P
></DIV
></DIV
></P
><P
>There are over 1000 sources in the MyHeadlines database: from special interest groups, to regional news, to technology sites, to company/corporation specific news, and more. You can subscribe to the content you want. As an added bonus, MyHeadlines now sports a Stock Ticker "Box" that will allow you to watch your favourite Index, Stock, Bond, etc.</P
><P
>Download it from the <A
HREF="http://www.jmagar.com/modules.php?op=modload&#38;name=Downloads&#38;file=index&#38;req=viewdownload&#38;cid=5"
TARGET="_top"
>Downloads section of jmagar.com</A
>. See also the <A
HREF="http://www.jmagar.com/modules.php?op=modload&#38;name=FAQ&#38;file=index&#38;myfaq=yes&#38;id_cat=6&#38;categories=About&#38;parent_id=1"
TARGET="_top"
>MyHeadlines FAQ</A
>. See it in action at <A
HREF="http://www.jmagar.com"
TARGET="_top"
>jmagar</A
> and <A
HREF="http://www.weenor.com/index.php?module=MyHeadlines&#38;func=view"
TARGET="_top"
>weenor</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-TOOLS-MODULE"
>8.3.10. PHP-Nuke-Tools module</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHP-NUKE-TOOLS-BLOCK"
></A
><P
><B
>Figure 8-28.    <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Tools block
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/php-nuke-tools-block.png"><DIV
CLASS="CAPTION"
><P
>PHP-Nuke Tools block</P
></DIV
></P
></DIV
></DIV
></P
><P
>The <A
HREF="http://www.disipal.net/modules.php?name=Downloads&#38;d_op=viewdownloaddetails&#38;lid=119&#38;title=PHP-Nuke%20Tools%20v3.00"
TARGET="_top"
>PHP-Nuke Tools module</A
> is one of the most helpful modules. Whether you are developing for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> or want to write a module or block really quickly, or even if you just want to learn how modules, blocks and the rest works in PHP-Nuke, you will appreciate its help.. It offers features such as:</P
><P
></P
><UL
><LI
><P
>Module Creator (see <A
HREF="#FIG-PHP-NUKE-TOOLS-MODULE-CREATOR"
>Figure 8-29</A
>), </P
></LI
><LI
><P
>Block Creator, </P
></LI
><LI
><P
>Help for Module Creator, </P
></LI
><LI
><P
>Help for Block Creator, </P
></LI
><LI
><P
>HTML to PHP, </P
></LI
><LI
><P
>HTML to ASP, </P
></LI
><LI
><P
>HTML to JSP, </P
></LI
><LI
><P
>HTML to Perl, </P
></LI
><LI
><P
>HTML to JavaScript, </P
></LI
><LI
><P
>Online HTML Editor, </P
></LI
><LI
><P
>Meta Tag Creator, </P
></LI
><LI
><P
>Scrollbar Creator, </P
></LI
><LI
><P
>Popup Creator, </P
></LI
><LI
><P
>Hex Colors</P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHP-NUKE-TOOLS-MODULE-CREATOR"
></A
><P
><B
>Figure 8-29.    <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Tools module: Module Creator.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/php-nuke-tools-module-creator.png"><DIV
CLASS="CAPTION"
><P
>PHP-Nuke Tools module: Module Creator.</P
></DIV
></P
></DIV
></DIV
></P
><P
>and many others. It comes with an extra block containing links to all functions (<A
HREF="#FIG-PHP-NUKE-TOOLS-BLOCK"
>Figure 8-28</A
>). See it in action at <A
HREF="http://www.disipal.net"
TARGET="_top"
>disipal.net</A
>.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Especially recommended for beginners (but not only)!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>You are a beginner in PHP(-Nuke), have just started your very first module or block, but you get errors and don't understand why?  Give it a try with the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Tools Module or Block Creator! It will help you see what you were missing and will also give you a feeling of how code looks before and after it is "nuked". 
<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_cool.png"></SPAN
></P
></TD
></TR
></TABLE
></DIV
><P
>For a much more ambitious project on automatic building of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks and modules (towards a web-based integrated programming environment, IDE, for PHP-Nuke) ckeck <A
HREF="http://ravenphpscripts.ravenwebhosting.com/BlockBuilder"
TARGET="_top"
>Raven's Block Builder</A
>. It is currently under development, but very promising.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-UPLOAD-MODULE"
>8.3.11. Upload module</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-UPLOAD"
></A
><P
><B
>Figure 8-30.    Upload module.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/upload.png"><DIV
CLASS="CAPTION"
><P
>Upload module.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The <A
HREF="http://trainsim.condor-edv.com/nuke-upload"
TARGET="_top"
>PHP-Nuke Upload module</A
> facilitates upload functionality for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> and has the following features:</P
><P
></P
><UL
><LI
><P
>Upload to virtual folders</P
></LI
><LI
><P
>Download the files from these folders</P
></LI
><LI
><P
>List files in these folders</P
></LI
><LI
><P
>Possibly add a comment to each file</P
></LI
><LI
><P
>Use the same filename several times in one folder</P
></LI
><LI
><P
>Each file is owned by one registered user. </P
></LI
><LI
><P
>Each directory is owned by one registered user. </P
></LI
><LI
><P
>Only the adminstrator can create new folders and assign them to a registered user</P
></LI
><LI
><P
>The adminstrator can change the ownership a existing file or folder</P
></LI
><LI
><P
>The owner of a file can change the permissions on the file</P
></LI
><LI
><P
>When uploading to a folder, the uploader (only registered users are allowed to upload files) may choose the initial permissions on the new file. </P
></LI
><LI
><P
>The following permissions exist for owner and registered users: no permission, read permission, read/write permission. Also a flag is available, that allows direct download access for anonymous users (but nothing more) </P
></LI
><LI
><P
>Full group membership access: Each registered user can be a member of multiple groups, and each file can belong to one group, which allows no/read/read+write access (configurable for each file) </P
></LI
><LI
><P
>Multiple Language support</P
></LI
><LI
><P
>Most links may also include images, to give the module a pretty layout.</P
></LI
><LI
><P
>Size display for each file</P
></LI
><LI
><P
>Download counter for each file</P
></LI
><LI
><P
>Quota support based on group, user and folder quotas.</P
></LI
><LI
><P
>Optional thumbnail support for .jpg and .gif files based on the original files (so this is only a pseudo thumbnail at the moment). </P
></LI
></UL
><DIV
CLASS="IMPORTANT"
><P
></P
><TABLE
CLASS="IMPORTANT"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.png"
HSPACE="5"
ALT="Important"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>PHP-Nuke versions greater than 6.5 and the Upload module</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you are using a version of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> greater than 6.5, you must do a minimal, but crucial, change in the index.php file of the Upload file. Otherwise, the SQL queries will use the wrong field (uid, instead of user_id) for the user in the nuke_users table, leading to errors. Find the line</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($Version_Num == "6.5") {</PRE
></FONT
></TD
></TR
></TABLE
><P
>and change it to:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($Version_Num &#62;= "6.5") {</PRE
></FONT
></TD
></TR
></TABLE
><P
>This will make sure that the right field names are used for all versions greater or equal to 6.5, not only for the 6.5 version.
<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="UPLOAD-ADD-ON-FOR-PHPBB"
>8.3.12. Upload add-on for phpBB</A
></H3
><P
>If you are interested in an Upload add-on for your phpBB Forums, then you can check <A
HREF="http://smartor.is-root.com/viewtopic.php?t=3021"
TARGET="_top"
>Photo Album Addon</A
>. This is a phpBB-based photo album/gallery management system. It is really powerful, stable, efficient, rich in features and highly customizable. The version 2 was written from the scratch for more security, performance, etc. It is not really a modification or hack, it is rather a phpBB-based system. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_smile.png"></SPAN
> </P
><P
>Features:</P
><P
></P
><UL
><LI
><P
>Fully integrated with phpBB2 backend (DB, session, template, multi languages, etc.)</P
></LI
><LI
><P
>Powerful and handy Admin Control Panel</P
></LI
><LI
><P
>Auto-generated thumbnail s(requires GD)</P
></LI
><LI
><P
>Manual-uploaded thumbnails (for those who don't have the GD library<A
NAME="AEN9148"
HREF="#FTN.AEN9148"
><SPAN
CLASS="footnote"
>[13]</SPAN
></A
>)</P
></LI
><LI
><P
>Thumbnail cache (for better performance)</P
></LI
><LI
><P
>Multi-categories</P
></LI
><LI
><P
>Powerful and phpBB-like permissions system</P
></LI
><LI
><P
>Moderator Control Panel</P
></LI
><LI
><P
>Upload Quotas</P
></LI
><LI
><P
>Pictures Description</P
></LI
><LI
><P
>Recent pics</P
></LI
><LI
><P
>Personal galleries (for member-oriented boards)</P
></LI
><LI
><P
>Rate system</P
></LI
><LI
><P
>Comment system</P
></LI
><LI
><P
>Hot link prevention (can set allowed domains<A
NAME="AEN9187"
HREF="#FTN.AEN9187"
><SPAN
CLASS="footnote"
>[14]</SPAN
></A
>)</P
></LI
><LI
><P
>Auto-optimization for different GD versions</P
></LI
><LI
><P
>Pic view counter</P
></LI
><LI
><P
>Admin/Moderator pic approval</P
></LI
><LI
><P
>Probably uploadable in <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> Safe Mode</P
></LI
></UL
><DIV
CLASS="WARNING"
><P
></P
><TABLE
CLASS="WARNING"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/warning.png"
HSPACE="5"
ALT="Warning"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>May not work with every <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> version!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The Photo Album is an add-on for the standalone phpBB Forums. It has been ported to <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> with the Album module (see the  <A
HREF="http://www.portedmods.com/modules.php?name=Downloads&#38;d_op=viewdownload&#38;cid=42"
TARGET="_top"
>Admin Panel Downloads Category of portedmods</A
>). This module was only tested with <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.5RC2 with phpbb module 2.1 and does not work on a site with the 2.0.6b version of the phpBB module!</P
></TD
></TR
></TABLE
></DIV
><P
>For yet another file attachment add-on to the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> phpBB Forums, see the &#8220;Attachment Mod&#8221; from the <A
HREF="http://www.portedmods.com/modules.php?name=Downloads&#38;d_op=viewdownload&#38;cid=43"
TARGET="_top"
>PHP-Nuke 6.5 / Ported Mods / Extra</A
> Downloads section of portedmods. See <A
HREF="http://www.portedmods.com/modules.php?name=Forums&#38;file=viewtopic&#38;t=241"
TARGET="_top"
>File Attachment Mod v2.3.6 for phpnuke6 with 2.06</A
> for a complete list of its features. For a discussion thread on Upload modules, see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=290"
TARGET="_top"
>I cant find this Upload module</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-ODP-MODULE"
>8.3.13. ODP module</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-ODP"
></A
><P
><B
>Figure 8-31.    ODP module.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/odp.png"><DIV
CLASS="CAPTION"
><P
>ODP module.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The <A
HREF="http://www.complex-berlin.de/download.php?op=getit&#38;lid=391"
TARGET="_top"
>ODP module</A
> displays the popular <A
HREF="http://dmoz.org"
TARGET="_top"
>Open Directory</A
> inside your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site (<A
HREF="#FIG-ODP"
>Figure 8-31</A
>). It is based on the <A
HREF="http://www.bie.no/products/phpodp"
TARGET="_top"
>phpodp class</A
>. The whole functionality is encapsulated in the phpodp class in odp.php. The <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module practically only calls the odp.php script.</P
><P
>If you would like to import all links of an ODP category into your Web Links or Downloads module, have a look in <A
HREF="#ENTER-THOUSANDS-OF-WEB-LINKS"
>Section 27.5</A
> and <A
HREF="#ENTER-THOUSANDS-OF-DOWNLOAD-LINKS"
>Section 27.6</A
> respectively for some interesting procedures.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-ECOMMERCE-MODULE"
>8.3.14. eCommerce module</A
></H3
><P
>There is certainly a lot going on currently in the area of eCommerce and <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. However, a ready-to-use <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> port of the well-known <A
HREF="http://www.oscommerce.com"
TARGET="_top"
>osCommerce</A
> has yet to hit the streets. Keep an eye on the following promising links:</P
><P
></P
><UL
><LI
><P
><A
HREF="http://www.osc2nuke.org"
TARGET="_top"
>osc2Nuke</A
>: The international project of merging osCommerce and <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. With links to national projects worldwide.</P
></LI
><LI
><P
><A
HREF="http://sourceforge.net/projects/multishop"
TARGET="_top"
>Multishop</A
>: &#8220;We depart from the CMS PhpNuke and osCommerce to realize a virtual mall, a central portal where different shop, with all the funcionalities of a traditional eCommerce site (customer accounts,address book for different shipping,Order history,..),converge&#8221;, the developers say.</P
></LI
><LI
><P
><A
HREF="http://www.splatt.it/article1087.html"
TARGET="_top"
>OSCommerce gets a Nuke-Module: a new SourceForge-Projects starts now!</A
></P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-CALLOWAYS-CART-ADD-PRODUCT"
></A
><P
><B
>Figure 8-32.    Calloways Cart module: Add Product screen.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/calloways-cart-add-product.png"><DIV
CLASS="CAPTION"
><P
>Calloways Cart module: Add Product screen.</P
></DIV
></P
></DIV
></DIV
></P
><P
>For the moment, you could try <A
HREF="http://www.theguitarfiles.com/CC/CallowaysCart"
TARGET="_top"
>CallowaysCart</A
>, a shopping cart recently released under the GPL and especially designed for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> (all versions) and <A
HREF="http://www.paypal.com"
TARGET="_top"
>Paypal</A
>'s payment service (<A
HREF="#FIG-CALLOWAYS-CART-ADD-PRODUCT"
>Figure 8-32</A
>).</P
><P
>A commercial (but with $35 USD certainly not expensive) eCommerce solution for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> is <A
HREF="http://www.burnwave.com"
TARGET="_top"
>Emporium</A
>. The following is an incomplete list of its features, but bear in mind that, since Emporium is under active and rapid development, it will be outdated by the time you read this:</P
><P
></P
><UL
><LI
><P
>Unlimited Products.</P
></LI
><LI
><P
>Unlimited Categories.</P
></LI
><LI
><P
>Unlimited Brands to associate Products with Modularized Payment/Shipping methods.</P
></LI
><LI
><P
>Unlimited currencies.</P
></LI
><LI
><P
>Automated currency conversions (using Yahoo, XE, Oanda services).</P
></LI
><LI
><P
>Unlimited Product Options for Products (radio, dropdown, multidropdown, checkbox, textfield, textarea, inclusive [hidden], etc).</P
></LI
><LI
><P
>Unlimited Product Media for Products.</P
></LI
><LI
><P
>Tax classing (unlimited class types, associated with particular products... assign certain locations [states, countries] to tax classing with different tax structures).</P
></LI
></UL
><P
>Instead of relying on a feature list, a better idea might be to test Emporium: you can go to the <A
HREF="http://demo.burnwave.com"
TARGET="_top"
>Emporium demo site</A
> ([admin: demo, pass: demo]), and have full access to Emporium and all of its features. </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-WORKBOARD-MODULE"
>8.3.15. WorkBoard Module</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-WORKBOARD"
></A
><P
><B
>Figure 8-33.    Administration panel: WorkBoard.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/workboard.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: WorkBoard.</P
></DIV
></P
></DIV
></DIV
></P
><P
><A
HREF="http://www.burnwave.com/modules.php?name=Archives"
TARGET="_top"
>WorkBoard</A
> is a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module for Project Management, distributed under the GNU General Public Licence.</P
><P
>To install WorkBoard, </P
><P
></P
><UL
><LI
><P
>Extract the archive and upload all files from directory 'html' to your root <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> directory.</P
></LI
><LI
><P
>Insert sql/workboard.sql into your database, or</P
></LI
><LI
><P
>Copy 'wb_install.php' from directory 'installation' into your root <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> directory, and then run script from your browser. Follow the instructions presented to you.</P
></LI
></UL
><P
>Once installed, a click on the WorkBoard icon in the administration panel (<A
HREF="#FIG-WORKBOARD"
>Figure 8-33</A
>) leads to the WorkBoard administration panel (<A
HREF="#FIG-WORKBOARD-ADMIN"
>Figure 8-34</A
>). There, you can set up </P
><P
></P
><UL
><LI
><P
>Projects and project positions.</P
></LI
><LI
><P
>Tasks and task statuses and priorities.</P
></LI
><LI
><P
>Project members</P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-WORKBOARD-ADMIN"
></A
><P
><B
>Figure 8-34.    WorkBoard module: Administration panel.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/workboard-admin.png"><DIV
CLASS="CAPTION"
><P
>WorkBoard module: Administration panel.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The WorkBoard module is still under rapid development.</P
></DIV
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="ARCHITECTURE"
></A
>Chapter 9. Architecture and structure </H1
><P
>The structure of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> is organized into modules, all the files are managed by other files that are located in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> root directory and include, according to the parameters passed to them, the intended module.</P
><P
>These tasks are carried out from only 3 pages:</P
><P
></P
><UL
><LI
><P
>index.php : In order to display the main page</P
></LI
><LI
><P
>modules.php : In order to include the internal modules.</P
></LI
><LI
><P
>admin.php : In order to include the administration interface.</P
></LI
></UL
><P
>It's not possible to call a module by calling a direct path to it. This is so in order to make installation easier, render the graphics management more independent (otherwise we would have to change the path of the images each time we position ourselves in an internal directory), have only a few files in the root directory and render the system more secure. </P
><P
>Everything is being called, as we said, through URL parameters (strings) passed to the &#8220;modules.php&#8221; file which specify which files are to be included. If for example we want to call the Topics module, the string to be passed should be:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>http://www.yoursite.com/modules.php?name=Topics</PRE
></FONT
></TD
></TR
></TABLE
><P
>The command that is sent this way is "includes in the page created by modules.php the output of the file index.php that is found in the folder modules/Topics/".</P
><P
>The other files present in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> root directory are:</P
><P
></P
><UL
><LI
><P
>auth.php: Manages authentication through the cookies.</P
></LI
><LI
><P
>mainfile.php: Contains all the necessary functions for the management of PHP-Nuke</P
></LI
><LI
><P
>header.php: manages the variables that are related to the header (inclusion of metatags, Javascript...)</P
></LI
><LI
><P
>footer.php: variables related to the footer.</P
></LI
><LI
><P
>backend.php: manages the output of the news that can be captured from other sites</P
></LI
><LI
><P
>ultramode.txt: ditto</P
></LI
><LI
><P
>robots.txt: contains instructions for the search engines informing them which folders not to index</P
></LI
></UL
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="DIRECTORY-STRUCTURE"
>9.1. Directory structure</A
></H2
><P
>The html folder of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> contains the following directories and files (<A
HREF="#FIG-PHP-NUKE-HTML-FOLDER"
>Figure 9-1</A
>):</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHP-NUKE-HTML-FOLDER"
></A
><P
><B
>Figure 9-1.    <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> directory structure.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/php-nuke-html-folder.png"><DIV
CLASS="CAPTION"
><P
>PHP-Nuke directory structure.</P
></DIV
></P
></DIV
></DIV
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>admin:</DT
><DD
><P
>Contains 4 subdirectories (links, language, case, modules) that manage the various administration modules. The folder that accommodates the operating files is modules/admin/.</P
></DD
><DT
>robots.txt:</DT
><DD
><P
>Contains instructions for search engines. PHP-Nuke's default robots.txt file contains the following:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>User-agent: *
Disallow: admin.php
Disallow: /admin/
Disallow: /images/
Disallow: /includes/
Disallow: /themes/
Disallow: /blocks/
Disallow: /modules/
Disallow: /language/</PRE
></FONT
></TD
></TR
></TABLE
><P
>This means that if a search engine visits the site, it should not index the folders mentioned. You can also insert other instructions in the robots.txt file, for example disallow a certain search engine:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>User-agent: ArchitextSpider
Disallow: /</PRE
></FONT
></TD
></TR
></TABLE
><P
>In this example, we forbid Excite's spider from indexing the site. However, our instructions will have no effect on a spider that does not honour the robots.txt file. Some aggressive spiders are known for being notorious and not obeying to our instructions in robots.txt. You could try to redirect them to an error page through a test on their IP address, User-agent string or some other criterium using mod_rewrite (see <A
HREF="#MOD-REWRITE"
>Section 25.2</A
>). Please note that the User-agent string can be easily faked.</P
></DD
><DT
>blocks:</DT
><DD
><P
>Contains all the block files for all of our available blocks. </P
></DD
><DT
>images:</DT
><DD
><P
>Contains all the images relating to PHP-Nuke, for example in the folder &#8220;topics&#8221; we will find archived the images of the topics that will appear in the news, in &#8220;banners&#8221; all banners in rotation etc...</P
></DD
><DT
>includes:</DT
><DD
><P
>Here are all the files that are necessary to particular management situations, these files do not work independently but are included in other files, mainly in mainfile.php and header.php. The files are:</P
><P
></P
><UL
><LI
><P
>counter.php : serves to identify the users based on the operating system used, the browser, the page of origin, date of the visit...</P
></LI
><LI
><P
>javascript.php : includes all necessary Javascript (if you need particular Javascript code, include it in this file, see also <A
HREF="#JAVASCRIPT-PHP"
>Section 21.9.1</A
>).</P
></LI
><LI
><P
>meta.php : contains the keywords to pass to the search engines and other parameters of the header. It is  an optimal system for learning how to create keywords and position the site with a good ranking in the search engines.</P
></LI
><LI
><P
>my_header.php : manages the disclaimer message in the homepage.</P
></LI
><LI
><P
>sql_layer.php : serves to manage the database abstraction layer. Transforms SQL instructions to the language of the chosen database. Remember that <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> can manage various databases.</P
></LI
></UL
></DD
><DT
>db:</DT
><DD
><P
>Starting from version 6.5, <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> uses a new SQL abstraction layer, that of the phpBB forum (see the section &#8220;Using the SQL Abstraction Layer&#8221; in the ADDONS-MODULES file that comes with the standard <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> package). The layer functions are the same as the ones of sql_layer.php, but more extended. Now you can program your modules (<A
HREF="#CREATING-MODULES"
>Chapter 21</A
>) using either the &#8220;old&#8221; sql_layer.php (which will continue to be supported in the future for backward compatibility), or the functions found in the files of the DB folder.</P
></DD
><DT
>docs:</DT
><DD
><P
>Contains this book. Right, this is not only an official HOWTO of the <SPAN
CLASS="PRODUCTNAME"
>Linux</SPAN
> Documentation Project, but also the official <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> guide!</P
></DD
><DT
>language:</DT
><DD
><P
>Contains translation files for the basic <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module. The language file naming convention is lang-english.php. </P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="90%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Attention!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The translation of the modules must be inserted in the appropriate folders (modules/language) and not appended   to these files, as it was done till now. </P
></TD
></TR
></TABLE
></DIV
></DD
><DT
>Modules:</DT
><DD
><P
>The modules of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> comprise all the functionality that one can add to it. In the Modules folder we insert the folders of every new module.</P
></DD
><DT
>Themes:</DT
><DD
><P
>Here we add the graphical interfaces known as &#8220;Themes&#8221;, every folder has the name of the corresponding theme and contains a main file called theme.php and all other support files.</P
></DD
><DT
>Upgrades:</DT
><DD
><P
>contains only the files that serve to upgrade the system from a previous version to a newer one (see <A
HREF="#UPGRADE-PHP-NUKE"
>Chapter 4</A
>).</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MAIN-PAGE-MANAGEMENT"
>9.2. Main page management</A
></H2
><P
>The file &#8220;index.php&#8221; is very simple one, it has the task to load the main <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> page the module that was chosen as the default one to appear in the main page of our site.</P
><P
>Here in detail is what happens when a client requests the page &#8220;index.php&#8221; :</P
><P
></P
><UL
><LI
><P
>the mainfile.php is included,</P
></LI
><LI
><P
>a database query is made in order to see which module was set up as the default one,</P
></LI
><LI
><P
>the origin of the visitor is checked (if he comes from a site that links us, this fact will be inserted in a table in the database).</P
></LI
></UL
><P
>Various checks are also made and error messages are defined in case the connection to the database fails. This avoids (in part) the error messages from the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> preprocessor. Even if problems come up, the page will be presented in a standard design and the error message will be definable from the inside.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MODULE-MANAGEMENT"
>9.3. Module management</A
></H2
><P
>For reasons of order, the modules are managed through the files present in the subdirectories that contain them, every module has its own folder in the interior of the folder &#8220;modules&#8221;.</P
><P
>In order to be loaded, the module files get included in the modules.php file by passing it the aproppriate parameters. The main page of each module must be called index.php, the other possibly pages possibly present in the module will have an additional variable in the inside of parameter strings by which they are called..</P
><P
>For example in the AvantGo module (see <A
HREF="#FRONTEND"
>Chapter 6</A
>) in order to load the index.php file, it is enough to pass the module name to the parameter string (by default, the file that will be searched for is index.php):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>modules.php?name=AvantGo</PRE
></FONT
></TD
></TR
></TABLE
><P
>If we instead wanted to call a page other than the default index.php (say, print.php), the string we will have to pass is :</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>modules.php?name=AvantGo&#38;file=print</PRE
></FONT
></TD
></TR
></TABLE
><P
>that is the file variable with a value (print) that corresponds to the name of the file we want to load without the .php extension.</P
><P
>Inside the folder modules/nameofmodule there is also a subfolder called &#8220;language&#8221;. In this fashion we manage in a simple and immediate way the multilanguage functionality inside the modules.</P
><P
>The modules.php file works this way:</P
><P
></P
><UL
><LI
><P
>Includes mainfile.php</P
></LI
><LI
><P
>Verifies whether the module is active or not</P
></LI
><LI
><P
>Verifies whether the string passes a file name different from index.php</P
></LI
><LI
><P
>Verifies the permissions of the module (whether everybody can see it, or only registered users, or only the administrator).</P
></LI
></UL
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="ADMIN-MANAGEMENT"
>9.4. Administration management</A
></H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Admin:</DT
><DD
><P
>contains 4 subfolders (links, language, case, modules) that manage the various administration modules. The folder that contains the operating files is admin/modules, here we have the files that execute the different admin operations.</P
></DD
></DL
></DIV
><P
>The folder admin/links instead says which admin module has to be called and puts a link in the admin area for that module.</P
><P
>Example (administration module for the FAQ):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if (($radminsuper==1) OR ($radminfaq==1)) {
adminmenu("admin.php?op=FaqAdmin ", "" _FAQ." ", "faq.gif");
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>This module:</P
><P
></P
><UL
><LI
><P
>Verifies that administration rights are present (this module may be managed by either the superadmin or an administrator that has been qualified to do so on the FAQ level),</P
></LI
><LI
><P
>passes a case (op=FaqAdmin) that says to the admin.php file (that includes all the admin modules) which module to load, associates a value in order to translate the term &#8220;faq&#8221; and associates an icon for the visual administration (faq.gif).</P
></LI
></UL
><P
>The folder admin/case instead serves to define which module to use in certain cases. This is important when, using the same admin file, one needs to carry out different operations according to the case passed:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Case1 = insert
Case2 = cancel
etc...</PRE
></FONT
></TD
></TR
></TABLE
><P
>In fact it says which module to load on verification of a case. For example, in the module faq the cases are many, let's consider only the last 2:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>case "FaqAdmin":
case "FaqCatGo":
include ("admin/modules/adminfaq.php");
break;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Both cases load the file adminfaq.php but they make it carry out different operations. The first one loads the file in the default scheme, the second one instead gives the O.K. for the insertion of a new category. This happens through a string like</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>admin.php?op=FaqAdmin </PRE
></FONT
></TD
></TR
></TABLE
><P
>in the first case and </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>admin.php?op=FaqCatGo </PRE
></FONT
></TD
></TR
></TABLE
><P
>in the second.</P
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="SESSION-MANAGEMENT"
></A
>Chapter 10. Session management</H1
><P
>I am indepted to Paul S. Owen, Development Team Leader of <A
HREF="http://www.phpbb.com"
TARGET="_top"
>phpBB</A
>, the standard forum for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> starting from the later 6.x versions, for giving permission to include the following explanation, which can be found in <A
HREF="http://www.phpbb.com/phpBB/viewtopic.php?t=69493"
TARGET="_top"
>http://www.phpbb.com/phpBB/viewtopic.php?t=69493</A
>, as well as in <A
HREF="http://www.phpbb.com/kb/article.php?article_id=54"
TARGET="_top"
>http://www.phpbb.com/kb/article.php?article_id=54</A
>:</P
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="HOW-SESSIONS-WORK"
>10.1. How sessions work in the forums</A
></H2
><P
>phpBB uses sessions to "track" users as they move between pages, forums, topics, etc. A session is made up of a unique 32 character session_id which identifies the current users. This value is stored in the sessions table and either a temporary (i.e. it's deleted when the browser window is closed) cookie on the users machine or if that doesn't seem to be working it's appended to all URLs.</P
><P
>The problem with using just a session_id is that it becomes very easy to hijack (takeover) a session. All a user need do is obtain the session_id and add it to the url as they browse the board. If the id they grab happens to be a logged in admin or moderator ... well you get the picture.</P
><P
>What we do to help complicate the situation is also tie the session to the users IP. Using this method someone would need to spoof an IP and obtain the session_id in order to hijack a session, not incredibly difficult but certainly harder ... and with this sort of software it's really a case of making everything harder to do, thus disuading all but the most ardent "hackers" from bothering to attempt anything.</P
><P
>How do we obtain this IP? We check the availability of two variables, REMOTE_ADDR and HTTP_X_FORWARDED_FOR. Firstly we check for HTTP_X_ ..., this is typically set by "nice" proxies, caches, etc. and contains "an" IP which may be the users "real" IP or some other IP. If that does not exist or it contains a private or restricted IP range (several blocks of IPs are reserved by the international bodies responsible for IP allocation) we instead use the value contained in REMOTE_ADDR. This variable typically contains the users real IP.</P
><P
>However, problems arise with how some ISPs operate their systems. Instead of forwarding the users real IP or indeed a different but static IP they simply make available only the IP of the proxy being browsed. The larger ISPs do not use a single proxy or cache, the load upon it and data passing through it would be far too great. Instead they use several systems in a "proxy farm" (I tend to refer to it as something containing most of those letters ... ). A user browsing the web may be switched between these machines from one page to another (to help distribute load), with the IP changing as they go.</P
><P
>Obviously a problem then exists in that phpBB's ability to tie a users session to a unique id and an IP fails ... because the IP is constantly changing. There are some "nice" ISPs out there that run these farms within a single "class" or block of IPs, e.g. 1.2.3.4, 1.2.3.5, 1.2.3.6, etc.</P
><P
>This is why in a previous release of phpBB we introduced a slightly reduced IP checking system which now checks only the first three "quads" of an IP, i.e. 1.2.3.4 is checked only for 1.2.3 the 4 is discarded. Remember, that an IPv4 address is 32bits wide, this is generally presented in the form of four 8 bit numbers. By checking just the first three numbers (24bits) we neglect 8 bits or 255 (253 in practice) possible IPs ... that's 253 seperate potential proxies ... IOW enough machines for practically any ISP on the planet. However we can go further and reduce that checking to just the first "two quads", that ignores 255 * 253 IPs!</P
><P
>The problem is some ISPs don't arrange their IP allocation particularly well, either for historical or other reasons ... AOL is one significant culprit. So what happens is that users can jump between completely different Class A (this is a full 32bit block of IPs) networks, e.g. 100.100.100.100 to 200.100.40.40, etc. This renders IP validation completely useless for such situations</P
><P
>So you ask, "Okay, but why did 2.0.3 not cause all these Invalid_session errors?!". The answer is fairly simple. When you first visit phpBB (assuming you have autologin enabled) it looks to see if you have a session_id (either in a cookie or the URL). On a new visit you won't have such a session_id and so phpBB creates a new one. If you have autologin set it checks the relevant data and if that matches you are logged in with the appropriate user_id. You can then immediately browse the board, post messages, do admin tasks (if applicable), etc.</P
><P
>Now let's take a situation where a naughty person creates a bogus form on their site. You are (for some reason) browsing this form. However, unknown to you this form contains all the necessary data to delete a pile of topics in a given forum (you having moderator rights on a certain board). When you submit that form it will be transmitted to the appropriate website. No session exists so phpBB, as noted above creates a new one and immediately processes the form data ... all the relevant topics are deleted from the database and you only find out when the boards "The selected topics have been deleted" message appears ...</P
><P
>To help negate the effectiveness of this we backported some code from phpBB 2.2 and introduced additional code. The admin control panel now appends your session_id to every url. When you browse within that panel it checks the session_id in the url with that stored in the sessions table. If they match, great, if they don't it redirects you back to the ACP index. This will help prevent users accidently, without their knowledge suffering issues as noted above.</P
><P
>Similarly the Moderator control panel has the session_id appended to urls and carries out a check. The difference here is that it throws up an Invalid session if the ids do not match, note that redirection like the admin panel wouldn't alter the result here ... if you tried submitting data via the MCP with an invalid session you'd just be returned to MCP front page ... losing any data entered previously. Other issues with voting and posting were also addressed thanks to a concerned user notifying us. Thus similar checks were put in place there.</P
><P
>The problem is that for users whose session is forever being renewed due to their IP changing this extra level of checking can cause issues. For many ISPs the noted changing of 6 to 4 in the IP validation check will be sufficient ... however AOL crops up (as per usual in nearly all similar situations with all software ...) as the sore thumb.</P
><P
>"What can you do about it?" you may ask, very little is the response. We could remove the extra validation but that leaves a gap that frankly I'm not prepared to leave ... if hadn't addressed this I would make a handsome bet that at some near future point we would've had users shouting and screaming about how damage was done to their boards and why didn't we (phpBB) fix it if we knew about it</P
><P
>What else can we do? As I said, very little that won't impact users completely unaffected by this issue (of which I'm betting there are a great many) ... in phpBB 2.2 we are introducing a feature to set the level of IP validation by the ACP, including disabling it completely. However disabling IP validation will, as noted leave your users open to simplified hijacking. For many people this may not be a problem and thus could be a solution. To do this in phpBB 2.0 you need to either remove the validation code from sessions.php or change the 6 to a 0 (the relevant lines are as noted in this topic). Be aware of what you are doing though and keep quiet about it ... if people don't know IP validation isn't operational they may believe it still is. If you have security issues you can trace to users sessions being hijacked we don't want to know about it</P
><P
>We could introduce a change to sessions whereby what happens when a new session is created is "weakened". What do I mean by weakened? Well, at present we generate a new session whenever we cannot validate an existing one. Instead what we could do is compare the users current session_id (if they have one) with that in the database. If a match is found and the time differential is some "small" number we instead continue that session. The problem here is that it's just as open to hijacking as removing IP validation. Why? Because that check will ignore the users IP and care only about the session_id ... and thus isn't something I'm keen on without direct admin control.</P
><P
>We could, as per a new Mod listed elsewhere on the board, ignore IP validation whenever the users IP is within a given list. While this isn't as bad as removing validation completely it's not terribly far off. Why? Because instead of having to go to some trouble to obtain a users current IP you can instead (given you know a user connects via a given ISP or proxy) just look it up ... you still need to spoof it but a step has been removed ... and as noted previously all we can do is make these peoples lives harder. There are additional issues with the extra processing required (which may or may not be significant depending on the number of IPs, users browsing, etc.) and of keeping the list up to date.</P
><P
>We could append a random set of alphanumerics to every single page, changing the value of it with every page view and storing the new data in the sessions table. This would add protection because a hijacker would need not only the session_id but also the current unique identifier. Of all the ideas this is probably my favourite and may make it into a future release (unless I've missed something obvious which renders it useless or bad for performance!).</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="ELIMINATE-SESSION-CHECKS"
>10.2. How to eliminate session checks</A
></H2
><P
>"Okay, fine but what can we do about it now?!" I hear you say. Well, you can remove or reduce validation as noted above (being aware of what you are doing), you could add the Mod noted above (you'll find it presently in another Invalid session topic ... no doubt it will be moved to one of the Mod forums in time) or finally you could remove the piece of code (from all affected pages) that looks like or similar to this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>// session id check
if ($sid == " || $sid != $userdata['session_id'])
{
   message_die(GENERAL_ERROR, 'Invalid_session');
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>This removes the added security of validation so if you do this we aren't interested in any security related problems that may arise. I highly recommend that you do not remove the added security from the admin control panel. Let's clarify a little the modifications that are needed:</P
><P
>You can either edit line 294 in the includes/session.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ip_check_s = substr($userdata['session_ip'], 0, 6);
$ip_check_u = substr($user_ip, 0, 6);</PRE
></FONT
></TD
></TR
></TABLE
><P
>and change the 6 to a 4, or, as a last resort (not endorsed by the phpBB staff and quite unsafe for the above reasons), you can delete all occurences of the code</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>// session id check
if ($sid == " || $sid != $userdata['session_id'])
{
message_die(GENERAL_ERROR, 'Invalid_session');
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>in all files. There are 9 occurences in 6 files:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>includes/usercp_email.php
includes/usercp_sendpasswd.php
modules/Forums/groupcp.php
modules/Forums/login.php
modules/Forums/modcp.php
modules/Forums/posting.php on line 188</PRE
></FONT
></TD
></TR
></TABLE
><P
>But most of the time, just changing the cookie, as described in <A
HREF="#INVALID-SESSION-IN-FORUMS"
>Section 3.9.15</A
>, will solve the "invalid session" problem.</P
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="EDITING-PHP-NUKE-FILES"
></A
>Chapter 11. Editing <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> (-Nuke) files</H1
><P
>PHP-Nuke files are <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> files. <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> files contain plain <ACRONYM
CLASS="ACRONYM"
>ASCII</ACRONYM
> text and as such they can be edited with any decent text editor. By &#8220;decent&#8221; we do not only mean an editor that offers a minimum of comfort in editing texts - most of them do. By &#8220;decent&#8221; we mean an editor that will not introduce extra (most of the time invisible) characters in your file, that will destroy the rest of your day with PHP (amd PHP-Nuke).</P
><P
>We wouldn't stress this point if we hadn't seen enough cases of people getting errors from the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> interpreter complaining that their config.php file, for example, contained an error - were no error was visible. For this reason, a warning is in place:</P
><DIV
CLASS="WARNING"
><P
></P
><TABLE
CLASS="WARNING"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/warning.png"
HSPACE="5"
ALT="Warning"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>O quantum est in rebus inane!<A
NAME="AEN9902"
HREF="#FTN.AEN9902"
><SPAN
CLASS="footnote"
>[15]</SPAN
></A
></B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Don't even think about editing a <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> (-Nuke) file with Notepad or Wordpad! You run the risk to introduce invisible characters in your text files, causing spurious errors that will be very hard to find and correct! What may seem to be just blanks or empty space, is going to drive you insane!</P
></TD
></TR
></TABLE
></DIV
><P
>So, if you are not supposed to use Notepad or Wordpad, what are the alternatives? What decent text editors are out there for editing our <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> files? In the following sections, we will present a few of them. See also <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=122"
TARGET="_top"
>Decent Text Editor</A
>.</P
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="VI"
>11.1. vi</A
></H2
><P
>FIXME</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="EMACS"
>11.2. Emacs</A
></H2
><P
>FIXME</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="BLUEFISH"
>11.3. Bluefish</A
></H2
><P
>FIXME</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="ULTRAEDIT"
>11.4. UltraEdit</A
></H2
><P
>FIXME</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="WINSYNTAX"
>11.5. WinSyntax</A
></H2
><P
>FIXME</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="HTMLKIT"
>11.6. HTMLKit</A
></H2
><P
>FIXME</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CRIMSON-EDITOR"
>11.7. Crimson Editor</A
></H2
><P
>FIXME</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PHPED"
>11.8. PHPEd</A
></H2
><P
>FIXME</P
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="MODIFYING-PHP-NUKE-DATABASE"
></A
>Chapter 12. Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> database</H1
><DIV
CLASS="SECT1"
><H2
CLASS="SECT1"
><A
NAME="USER-EXTRA-INFORMATION"
>12.1. More than 255 characters of user extra information</A
></H2
><P
>By clicking on the icon with the title &#8220;Your Info&#8221; in the user account menu (see <A
HREF="#FRONTEND"
>Chapter 6</A
>), you arrive at a HTML form where you can enter various pieces of information about yourself, in addition to your personal preferences. One of the fields, the &#8220;Extra Info&#8221; field, gives you the opportunity to tell something about yourself that other visitors can read when they click on your profile. However, you will not be able to enter more than 255 characters of extra information. That's a bit too few, even for moderately turbulent biographies. To change that, you must find out where that information is stored in the database.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-EXTRA-INFO"
></A
><P
><B
>Figure 12-1.    Extra Info field of User Personal Information (Your Info)
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/extra-info.png"><DIV
CLASS="CAPTION"
><P
>Extra Info field of User Personal Information (Your Info)</P
></DIV
></P
></DIV
></DIV
></P
><P
>That extra information is stored in the field "bio" of the nuke_users table (assuming the table prefix, $prefix, is "nuke" for you, see <A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>). Thus, what you have to do is log in your database and change the length of the bio field. Currently, it is defined as "tinytext" which gives the limitation of 255 characters (see <A
HREF="http://www.mysql.com/doc/en/String_types.html"
TARGET="_top"
>MySQL String Types</A
>).</P
><P
>Once logged in the MySQL database, do on the MySQL prompt<A
NAME="AEN9993"
HREF="#FTN.AEN9993"
><SPAN
CLASS="footnote"
>[16]</SPAN
></A
>:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>alter table nuke_users modify bio text;</PRE
></FONT
></TD
></TR
></TABLE
><P
>This will give you the next possible (see <A
HREF="http://www.mysql.com/doc/en/Storage_requirements.html"
TARGET="_top"
>MySQL Column Type Storage Requirements</A
>) maximum length of 2^16-2. That's a little less than 65KB of text. That should be enough text for your visitors to write a small story of their life. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="MODIFYING-PHP-NUKE-TEXTS"
></A
>Chapter 13. Modifying <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> texts</H1
><P
>All texts that appear in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> are strings defined in so-called language files - and are thus fully customizable to your needs:</P
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="GENERAL-PHP-NUKE-TEXTS"
>13.1. General <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> texts</A
></H2
><P
>General texts are stored in the files under the language folder. The naming of those language files follows the convention &#8220;lang-languagename.php&#8221;. Thus, english texts are held in language/lang-english.php, chinese ones in language/lang-chinese.php etc. All you have to do to change a text, is edit the aproppriate file for your language with a <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=122"
TARGET="_top"
>decent text editor</A
> (see also <A
HREF="#EDITING-PHP-NUKE-FILES"
>Chapter 11</A
>). </P
><P
>For example, to change the text that is displayed besides the Search button (&#8220;Search&#8221; for the english language), open language/lang-english.php with a <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=122"
TARGET="_top"
>decent text editor</A
> and find the line that contains the text:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>define("_SEARCH","Search");</PRE
></FONT
></TD
></TR
></TABLE
><P
>This is a <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> instruction that tells the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> interpreter to define the constant _SEARCH as the text string &#8220;Search&#8221;. Thus, whatever you put in the text string will be the content of the _SEARCH constant. The developers (at least in an ideal world) will only use constants (and database-driven, dynamic information) for their texts, so that you only need to do your changes at one place to be valid everywhere. To change the search text to &#8220;Search my homepage&#8221;, you thus need to change the above line to</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>define("_SEARCH","Search my homepage");</PRE
></FONT
></TD
></TR
></TABLE
><P
>It is in this manner that internationalization of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> takes place, by the way. People who want to translate <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> to their language, get a fresh copy of language/lang-english.php and start translating the text strings in the &#8220;define&#8221; directives, then send the lang-newlanguage.php file to <A
HREF="http://phpnuke.org"
TARGET="_top"
>phpnuke.org</A
> for inclusion in the next release.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>HTML code in text constants</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>You are not confined to text, when you change the texts in PHP-Nuke's language files. This may sound paradoxical, but if you think that the language files are just usual <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> files that define some constants, then you will see that nothing really prevents you from &#8220;abusing&#8221; their purpose and mixing them with...HTML code, for example. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_eek.png"></SPAN
></P
><P
>Thus it is perfectly legal to change:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>define("_WRITES","writes"); </PRE
></FONT
></TD
></TR
></TABLE
><P
>to:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>define("_WRITES","&#38;nbsp;writes"); </PRE
></FONT
></TD
></TR
></TABLE
><P
>In this case, we entered a non-breaking space before the translation of the _WRITES constant. This is because we noticed that a space was missing before the "writes" in the &#8220;user writes&#8221; string that is printed next to an article in the news. Instead of correcting the code in the News module, we opted for the quick'n dirty way. It's not recommended, because it mangles user-supplied data with code - but it is nonetheless possible, see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=17878"
TARGET="_top"
>Posting Articles or Story</A
>.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PHP-NUKE-MODULE-TEXTS"
>13.2. PHP-Nuke module texts</A
></H2
><P
>PHP-Nuke module texts are also customizable, but are stored in separate folders: each module comes with a language folder containing a lang-xxx.php file with the translation strings for the text constants that are relevant to only that module. For example, the Forums module contains a language folder, stored as modules/Forums/language, the Your_Account module (which handles user logins, registration, authentication and management of the users' info, mail, messages and personal settings) comes with a language folder stored as modules/Your_Account/language etc.</P
><P
>To change a module specific text, edit the appropriate language file lang-xxx.php, exactly as described in <A
HREF="#GENERAL-PHP-NUKE-TEXTS"
>Section 13.1</A
> for general <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> texts. For example, to customize the email text sent to a new user after registration, open the file /modules/Your_Account/language/lang-english.php in a <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=122"
TARGET="_top"
>decent text editor</A
>, find the lines</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>define("_YOUUSEDEMAIL","You or someone else has used your email account");
define("_TOREGISTER","to register an account at");</PRE
></FONT
></TD
></TR
></TABLE
><P
>and change them to something more sophisticated, like</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>define("_YOUUSEDEMAIL","Nil sine magno vita labore dedit mortalibus!<A
NAME="AEN10087"
HREF="#FTN.AEN10087"
><SPAN
CLASS="footnote"
>[17]</SPAN
></A
>");
define("_TOREGISTER","Please register your account at");</PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PHP-NUKE-MODULE-AND-BLOCK-TITLES"
>13.3. PHP-Nuke module and block titles</A
></H2
><P
>You can change a module's or block's title from the module or block administration panel respectively: for a module or active block, click on the Edit link on the line for that module/block, change and save. The text you enter in the &#8220;Title&#8221; field will be the new title to be displayed.</P
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="CUSTOMIZATION"
></A
>Chapter 14. Customising <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> themes </H1
><P
>In this chapter we will talk about themes in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. We will discuss the following topics:</P
><P
></P
><UL
><LI
><P
>Structure of a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme (<A
HREF="#TOPIC-STRUCTURE"
>Section 14.1</A
>),</P
></LI
><LI
><P
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme HTML template (<A
HREF="#TEMPLATE"
>Section 14.2</A
>),</P
></LI
><LI
><P
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme header (<A
HREF="#PHP-NUKE-THEME-MODIFYING-HEADER"
>Section 14.3</A
>),</P
></LI
><LI
><P
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme body (<A
HREF="#PHP-NUKE-THEME-MODIFYING-BODY"
>Section 14.4</A
>),</P
></LI
><LI
><P
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme index (<A
HREF="#PHP-NUKE-THEME-MODIFYING-INDEX"
>Section 14.5</A
>),</P
></LI
><LI
><P
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme footer (<A
HREF="#PHP-NUKE-THEME-MODIFYING-FOOTER"
>Section 14.6</A
>),</P
></LI
><LI
><P
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme icons (<A
HREF="#PHP-NUKE-THEME-MODIFYING-ICONS"
>Section 14.7</A
>),</P
></LI
><LI
><P
>PHP-Nuke theme rules (<A
HREF="#THEME-RULES"
>Section 14.8</A
>),</P
></LI
><LI
><P
>How to change a buggy <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme (<A
HREF="#CHANGE-BUGGY-PHP-NUKE-THEME"
>Section 14.9</A
>),</P
></LI
><LI
><P
>How to prevent users from changing the theme in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> (<A
HREF="#PREVENT-USERS-FROM-CHANGING-PHP-NUKE-THEME"
>Section 14.10</A
>),</P
></LI
><LI
><P
>How to change the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme depending on module (<A
HREF="#CHANGE-PHP-NUKE-THEME-DEPENDING-ON-MODULE"
>Section 14.11</A
>),</P
></LI
><LI
><P
>How to change font size in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> (<A
HREF="#CHANGE-FONT-SIZE-PHP-NUKE"
>Section 14.12</A
>).</P
></LI
></UL
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="TOPIC-STRUCTURE"
>14.1. Structure of a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme</A
></H2
><P
>Making your own personal graphical theme for your site is very important so that you don't have another <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> clone, if your site looks the same as other sites it dosn't make you, the Webmaster look very professional. Personalising the portal starts from the graphical side of things. Knowing how to put your hands on a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme means being able to play with all of the graphical elements that we can use. The example theme we will use in this chapter is the NukeNews theme, made by Francisco Burzi for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. It's a theme composed of a lot of HTML files, all included in theme.php. This is a very good solution that permits you to manage the graphical part of the theme through an editor like DreamWeaver using the least amount of <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code.</P
><P
>For a graphical anatomy of a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme, please have a look at the <A
HREF="theme.html"
TARGET="_top"
>theme.html</A
> file. As you can see, each <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> page follows the classic 3-column table layout: in the left and right columns you can position small blocks, while in the center, wider column, you should position the larger blocks. It is also the center column where the currently viewed module is shown.</P
><P
>The NukeNews theme, for example, is structured in the following way (<A
HREF="#FIG-THEME-STRUCTURE-NUKENEWS"
>Figure 14-1</A
>):</P
><P
></P
><UL
><LI
><P
>theme.php: controls the main functions of the variables for the background colors.</P
></LI
><LI
><P
>tables.php: controls the functions opentable() and closetable().</P
></LI
><LI
><P
>header.html: controls the header for your site.</P
></LI
><LI
><P
>footer.html: controls the footer for your site.</P
></LI
><LI
><P
>blocks.html: controls the blocks.</P
></LI
><LI
><P
>center_right.html: controls the layout of the page.</P
></LI
><LI
><P
>center_left.html: controls the layout of the page.</P
></LI
><LI
><P
>story_home.html: controls the layout of the page.</P
></LI
><LI
><P
>story_page.html: controls the layout of the page.</P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-THEME-STRUCTURE-NUKENEWS"
></A
><P
><B
>Figure 14-1.    Structure of the NukeNews theme.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/theme-structure-nukenews.png"><DIV
CLASS="CAPTION"
><P
>Structure of the NukeNews theme.</P
></DIV
></P
></DIV
></DIV
></P
><P
>These files are included in the functions specified in theme.php We then have a style sheet (<A
HREF="#CSS-SYNTAX"
>Section 28.3</A
>), called style.css (style/style.css), included in the header.html file in our theme folder. For convention, the style sheet must always be called style.css and must always be contained in one folder called "style" inside of our theme folder. The images generally are grouped in a folder called "images" that is always found in our themes folder. </P
><P
>The folder structure of the NukeNews theme will be : </P
><P
></P
><UL
><LI
><P
>themes/NukeNews</P
></LI
><LI
><P
>themes/NukeNews/style/</P
></LI
><LI
><P
>themes/NukeNews/images/</P
></LI
></UL
><P
>Always remember that case is important, you must respect the difference between UPPERCASE and lowercase for compatibility with any Unix systems. </P
><P
>The theme.php file is the heart of all PHP-Nuke's graphical management. The theme.php is the file that creates the managing functions of all of PHP-Nuke's components (header, footer, central parts, block...).</P
><P
>The technique of putting HTML code in separate files, that are then included in theme.php, is not used in all themes (see <A
HREF="#FIG-THEME-STRUCTURE-OTHER"
>Figure 14-2</A
>). Some programmers include all the HTML in the theme.php file. However, including it separately solves many problems such as HTML formatting, that would otherwise be included in the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code. It also gives us the possibility of editing all with a visual editor (WYSIWYG). </P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-THEME-STRUCTURE-OTHER"
></A
><P
><B
>Figure 14-2.    Structure of other themes, without HTML templates.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/theme-structure-other.png"><DIV
CLASS="CAPTION"
><P
>Structure of other themes, without HTML templates.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The themeheader() function manages the site header. It is composed of various tables that form the heading, and sometimes also defines some elements of the body tag that are not included in the style sheet and the variables that are placed inside the included html files. </P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Example:</DT
><DD
><P
>The variable $theuser is defined inside of the themeheader() function and is then shown in the header.html file in a table: </P
></DD
></DL
></DIV
><P
>Code in theme.php (that defines the $theuser variable)</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($username == "Anonymous") {
  $theuser = "&#38;nbsp;&#38;nbsp; &#60;a href=\"modules.php
  ?name=Your_Account &#38;op=new_user\"&#62;Create an account";
} else {
  $theuser = "&#38;nbsp;&#38;nbsp;Welcome $username!";
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>Code in header.html (that displays the $theuser variable)</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;td width="15% "nowrap &#62;&#60; font class="content" color="#363636 " &#62;
&#60;b&#62; $theuser &#60;/b&#62;&#60;/font&#62;&#60;/td&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>It is also in the themeheader() function that the position of the advertisement banners is hardcoded. If you are not satisfied with the placement of your banners, look for the lines</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($banners == 1) {
  include("banners.php");
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>These lines are responsible for the output of the banner. By changing their place in the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code, you can achieve a different banner placement.</P
><P
>The themefooter(); function is responsible for the footer of our site.</P
><P
>It has some interesting elements we have to analyse:</P
><P
>First of all, it identifies if the displayed page has got the $index variable set equal to 1, in this case we will also insert the right blocks on our page, but if instead $index==0 then the right blocks will not appear on our page. </P
><P
>It then defines the footer messages (which are captured from config.php) and inserts all them in a variable that is recalled from the footer.html file. </P
><P
>The function themeindex() manages the news in Home Page and formats them adding elements according to various cases using the function "if". It also includes the story_home.htm file.</P
><P
>The function themearticle() instead manages the internal news page (that we can see by pushing on "Read more..."; remember that the layout part in this case is achieved by including the story_page.htm file, but the blocks that must be included (i.e. the article's survey, correlated links etc.) are defined by the news module. </P
><P
>The function themesidebox() instead manages the layout of the box that we create or that we find already made (see <A
HREF="#BLOCKS"
>Chapter 20</A
>), it too includes a file called blocks.htm that defines the style and the layout. </P
><P
>We have ignored an element of the file theme.php. These are the variables that format the text, some of them are inserted in css (the style sheet) but others are instead defined at the beginning of the theme.php file. </P
><P
>Let's see the variables from the NukeNews theme: </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$bgcolor1 = "# efefef";
$bgcolor2 = "# cfcfbb";
$bgcolor3 = "# efefef";
$bgcolor4 = "# cfcfbb";
$textcolor1 = "# 000000";
$textcolor2 = "# 000000";</PRE
></FONT
></TD
></TR
></TABLE
><P
>As you see the expression values of these variables are in decimal format. </P
><P
>Define your site colours - $bgcolor2 is generally used for table edges as you can see in the function opentable(), $bgcolor1 is used for table background. The others two background variables use the same criteria. $textcolor1 and $textcolor2 are used to format the text colour. </P
><P
>Now we have to examine what is included in the tables.php file. This file creates 4 functions (opentable(); closetable(); opentable2(); closetable2();) that include HTML tags that open and close tables in a predefined way.</P
><P
>It is very easy to use when creating modules (see <A
HREF="#CREATING-MODULES"
>Chapter 21</A
>) , you don't have to rewrite the HTML every time you want to create a table but it's enough with the following syntax:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>opentable();
echo "Content of the table";
closetable();</PRE
></FONT
></TD
></TR
></TABLE
><P
>In this way you've created a table in a fast and effective way. But how is this function structured? We will examine first opentable(); then closetable();</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Please note</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>These are php functions so you have to respect the HTML syntax inside php adding  \ before every " (ie align="left" must be written as align=\"left\") </P
></TD
></TR
></TABLE
></DIV
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>function OpenTable() {
global $bgcolor1, $bgcolor2;
echo "&#60;table width=\"100% \" border=\"0 \ "cellspacing=\"1 \" cellpadding=\"0 \ "bgcolor=\"$bgcolor2 \" &#62;&#60; tr &#62;&#60; td &#62; \n ";
echo "&#60; table width=\"100% \" border=\"0 \ "cellspacing=\"1 \" cellpadding=\"8 \ "bgcolor=\"$bgcolor1 \" &#62;&#60; tr &#62;&#60; td &#62; \n ";
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>The syntax is very simple, isn't it? </P
><P
></P
><UL
><LI
><P
>The function is opened</P
></LI
><LI
><P
>Necessary variables are called ($bgcolor1, $bgcolor2) </P
></LI
><LI
><P
>We open a table 100% wide and we define the background colours for it</P
></LI
><LI
><P
>Open Line, Open Column</P
></LI
><LI
><P
>We insert a new table 100% wide (for the edges) </P
></LI
><LI
><P
>The width and height characteristics are defined.</P
></LI
><LI
><P
>line column</P
></LI
></UL
><P
>We stop on the column because it's here we will insert the table content (In fact opentable is where we start from to close this table!)</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>function CloseTable() {
echo "&#60;/td &#62;&#60;/tr &#62;&#60;/table &#62;&#60;/td &#62;&#60;/tr &#62;&#60;/table &#62; \n";
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>In fact...</P
><P
></P
><UL
><LI
><P
>The function is opened</P
></LI
><LI
><P
>You close the Column; You close the Line</P
></LI
><LI
><P
>You close the Inner Table</P
></LI
><LI
><P
>You close the Column; You close the Line</P
></LI
><LI
><P
>You close the Outer Table</P
></LI
></UL
><P
>Its easy to construct HTML functions with PHP, isnt it?</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="TEMPLATE"
>14.2. Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme HTML template</A
></H2
><P
>In this section we will see how to modify the HTML template that is used by the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> themes to display our page. Topics covered are:</P
><P
></P
><UL
><LI
><P
>Example creation of HTML file to include in the theme (<A
HREF="#EXAMPLE-CREATION-HTML-TEMPLATE"
>Section 14.2.1</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="EXAMPLE-CREATION-HTML-TEMPLATE"
>14.2.1. Example creation of HTML file to include in the theme</A
></H3
><P
>We will not analyse the HTML syntax of all the files, we think it's better that you understand the principles that are used and that you learn a few tricks that allow you to use a visual editor such as DreamWeaver. </P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Example:</DT
><DD
><P
>The block is created in this way: </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;table border="0 "cellpadding="1" cellspacing="0 
"bgcolor="#000000" width="150 "&#62;&#60;tr&#62;&#60;td&#62;
&#60;table border="0 "cellpadding="3" cellspacing="0 
"bgcolor="#dedebb" width="100% "&#62;&#60;tr&#62;&#60; td align="left" &#62;
&#60;font class="content "color="#363636" &#62;&#60;b&#62; $$title &#60;/b &#62;&#60;/font&#62;
&#60;/td&#62;&#60;/tr&#62;&#60;/table&#62;&#60;/td&#62;&#60;/tr&#62;&#60;/table&#62;
&#60;table border="0 "cellpadding="0" cellspacing="0 
"bgcolor="#ffffff" width="150 " &#62;
&#60;tr valign="top "&#62;&#60;td bgcolor="#ffffff"&#62;
$content
&#60;/td&#62;&#60;/tr&#62;&#60;/table&#62;
&#60; br &#62;</PRE
></FONT
></TD
></TR
></TABLE
></DD
></DL
></DIV
><P
>As you see, we create a table of fixed width (in our case 150) and we assign it some colours (for the background etc...). We also assign two variables ($title and $content) that will, once included in theme.php, load the title and the content of the block. It would have been useful, for a code clarity reasons, to define background values in the CSS tables instead.</P
><P
>To have all the necessary cases to get the conclusions of this chapter and to write a pair of rules, we have to analyse a very simple module that includes a case we have still not mentioned, the images management:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;/td&#62;&#60;td&#62;&#60;img src="themes/NukeNews/images/pixel.gif 
"width="15" height="1 "border="0" stop = ""&#62;
&#60;/td&#62;&#60;td valign="top" width="100%"&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>The image is a spacer that adds a space of 15 pixels, but where do we load the image from? Which path do we have to assign it? Remember that the theme.php file is included in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> root directory , so the image path must start from root to the indicated theme. The path to the image "pixel.gif" is "themes/NukeNews/images/pixel.gif" </P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Attention!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>When you add images in an automatic way by using a visual editor,  the path will be only images/image.gif, and you will have to correct it by hand, adding the correct path. </P
></TD
></TR
></TABLE
></DIV
><P
>Another trick is to assign, in theme.php, a variable to the name of the theme, to make it independent from possible changes of the folder name. So for the variable $nameoftheme = " NukeNews ", the syntax of the image path will be: </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;img src="themes/$nameoftheme/images/pixel.gif"&#62;</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PHP-NUKE-THEME-MODIFYING-HEADER"
>14.3. Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme header</A
></H2
><P
>The theme header is constructed in the function themeheader() of the theme in question. You will find this function in the file theme.php, in the folder themes/YourTheme (where YourTheme is the name of your theme, e.g. themes/NukeNews). </P
><P
></P
><UL
><LI
><P
><A
HREF="#PHP-NUKE-HEADER-CREATE-TOP-NAVIGATION-BAR"
>Section 14.3.1</A
></P
></LI
><LI
><P
><A
HREF="#PHP-NUKE-HEADER-INSERT-SLASHOCEAN-SEARCH-BOX"
>Section 14.3.2</A
></P
></LI
><LI
><P
><A
HREF="#PHP-NUKE-HEADER-CHANGE"
>Section 14.3.3</A
></P
></LI
><LI
><P
><A
HREF="#PHP-NUKE-HEADER-CHANGE-LOGO"
>Section 14.3.4</A
></P
></LI
><LI
><P
><A
HREF="#PHP-NUKE-HEADER-CHANGE-LOGO-DYNAMIC"
>Section 14.3.5</A
></P
></LI
><LI
><P
><A
HREF="#PHP-NUKE-HEADER-CHANGE-BANNER-PLACEMENT"
>Section 14.3.6</A
></P
></LI
><LI
><P
><A
HREF="#PHP-NUKE-HEADER-WATERMARK-BACKGROUND-IMAGE"
>Section 14.3.7</A
></P
></LI
><LI
><P
><A
HREF="#PHP-NUKE-HEADER-DISPLAY-FLASH-OBJECT"
>Section 14.3.8</A
></P
></LI
><LI
><P
><A
HREF="#HIDE-LEFT-BLOCKS"
>Section 14.3.9</A
></P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-HEADER-CREATE-TOP-NAVIGATION-BAR"
>14.3.1. How to create a top navigation bar as in NukeNews theme</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-TOP-NAV-BAR"
></A
><P
><B
>Figure 14-3.    Top navigation bar in the NukeNews theme.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/top-nav-bar.png"><DIV
CLASS="CAPTION"
><P
>Top navigation bar in the NukeNews theme.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Sometimes, like in the case of the NukeNews theme, the themeheader() function will include the contents of a separate file, written in pure HTML:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    $tmpl_file = "themes/NukeNews/header.html";
    $thefile = implode("", file($tmpl_file));
    $thefile = addslashes($thefile);
    $thefile = "\$r_file=\"".$thefile."\";";
    eval($thefile);
    print $r_file;</PRE
></FONT
></TD
></TR
></TABLE
><P
>The header.html file, which is "evaluated" here, contains HTML code that creates the "top navigation bar", the one with the "Home", "Topics", "Downloads", "Your Account" etc. links (<A
HREF="#FIG-TOP-NAV-BAR"
>Figure 14-3</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;tr valign="middle" bgcolor="#dedebb"&#62; 
&#60;td width="15%" nowrap&#62;&#60;font class="content" color="#363636"&#62; 
&#60;b&#62;$theuser&#60;/b&#62;&#60;/font&#62;&#60;/td&#62; 
&#60;td align="center" height="20" width="70%"&#62;&#60;font class="content"&#62;&#60;B&#62; 
&#60;A href="index.php"&#62;Home&#60;/a&#62; 
·
&#60;A href="modules.php?name=Topics"&#62;Topics&#60;/a&#62; 
·
&#60;A href="modules.php?name=Downloads"&#62;Downloads&#60;/a&#62; 
·
&#60;A href="modules.php?name=Your_Account"&#62;Your Account&#60;/a&#62; 
·
&#60;A href="modules.php?name=Submit_News"&#62;Submit News&#60;/a&#62; 
·
&#60;A href="modules.php?name=Top"&#62;Top 10&#60;/a&#62; 
&#60;/B&#62;&#60;/font&#62;
&#60;/td&#62;
&#60;td align="right" width="15%"&#62;&#60;font class="content"&#62;&#60;b&#62; 
&#60;script type="text/javascript"&#62; 
&#60;!--   // Array ofmonth Names 
var monthNames = new Array(
"January","February","March","April","May","June","July","August","September",
"October","November","December"); 
var now = new Date();
thisYear = now.getYear(); 
if(thisYear &#60; 1900) {thisYear += 1900}; // corrections if Y2K display problem 
document.write(monthNames[now.getMonth()] + " " + now.getDate() + ", " + thisYear); 
// --&#62;
&#60;/script&#62;&#60;/b&#62;&#60;/font&#62;&#60;/td&#62; 
&#60;td&#62; &#60;/td&#62;
&#60;/tr&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Thus, if you want to delete or change this top navigation bar, you will have to delete or change the above code to reflect your needs (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=72"
TARGET="_top"
>How to change the top menu (top navigation bar) of PHP-Nuke</A
> and <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=268"
TARGET="_top"
>how to remove the search box from the top menu of PHP-Nuke</A
>). A similar technique is used in the Odyssey theme, where one uses the contents of themes/Odyssey/left_center.html, additionally to themes/Odyssey/header.html.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-HEADER-INSERT-SLASHOCEAN-SEARCH-BOX"
>14.3.2. How to insert a Search Box as in SlashOcean theme</A
></H3
><P
>The SlashOcean theme contains a Welcome message and a Search box in its header, as a close inspection of the code in the themeheader() function of themes/SlashOcean/theme.php reveals:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>echo "&#60;br&#62;
&#60;center&#62;
&#60;table cellpadding=0 cellspacing=0 border=0 width=99% align=center&#62;&#60;tr&#62;&#60;td align=left&#62;
&#60;a href=$nukeurl&#62;&#60;img src=themes/SlashOcean/images/logo.gif Alt=\"Welcome to $sitename\"
border=0&#62;&#60;/a&#62;
&#60;/td&#62;&#60;td align=right width=100%&#62;
        &#60;form action=modules.php?name=Search&#38;amp;method=post&#62;
        &#60;font class=content&#62;&#60;input type=text name=query width=20 size=20 length=20&#62;
        &#60;/td&#62;
        &#60;td align=right&#62;&#38;nbsp;&#38;nbsp;&#60;input type=submit value=\""._SEARCH."\"&#62;&#60;/td&#62;
        &#60;/form&#62;";
    echo "&#60;/td&#62;&#60;/tr&#62;&#60;/table&#62;&#60;br&#62;";</PRE
></FONT
></TD
></TR
></TABLE
><P
>You can use this code if you wish to have a search box besides your logo, as in SlashOcean. You will find similar constructs in the other themes, e.g. Kaput or Slash. </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-HEADER-CHANGE"
>14.3.3. How to change the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> header depending on some global feature</A
></H3
><P
>In some cases you may need to change the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> header according to some globally available information about the current user. For example, you may want to display a menu that is differently structured if the user's language is, say, french, leaving the standard menu structure untouched otherwise.</P
><P
>The key to such changes is always to declare the globally available feature as being &#8220;global&#8221; in the themeheader() function in theme.php. Then you can use its value for a simple check that will echo the right HTML incantations if the check succeeds. Let's take for example the above case, where the globally available feature is nothing else but the current language setting:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>global $currentlang;
if ($currentlang == "french") {
  echo "&#60;a href=\"/special/link/to/my/services/for/french/users\"&#62;&#60;b&#62;"
  ._MESSERVICES."&#60;/b&#62;&#60;/A&#62;\n";
}
else if ($currentlang == "english") {
  echo "&#60;a href=\"/some/default/link/for/other/users\"&#62;"
  ._DEFAULTLINK."&#60;/a&#62;\n";
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>This code, put in the themeheader() function of theme.php in the aproppriate place (depending on where exacly you want it to appear), will display a special menu link if the user's language is french. Instead of the current language, any user setting that is globally available can be used. The only work you have to do is to find out which variable stores the global setting you need ($currentlang in the above example).</P
><P
>User information is stored in the userinfo array. This array is filled with a call to the getusrinfo() function. Thus a simple way to arrive at some information that is special to the currently logged-in user, is to write somethink like</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    global $user, $userinfo;
    if(is_user($user)) {
        getusrinfo($user);      
    }</PRE
></FONT
></TD
></TR
></TABLE
><P
>You have then some user-specific settings at your disposal:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$name = $userinfo['uname'];
$uid = $userinfo['uid'];
$email_real = $userinfo['email'];
$email_fake = $userinfo['femail'];
$url = $userinfo['url'];
$avatar = $userinfo['user_avatar'];
$newsletter = $userinfo['newsletter'];
$icq = $userinfo['user_icq'];
$aim = $userinfo['user_aim'];
$yim = $userinfo['user_yim'];
$msnm = $userinfo['user_msnm'];
$location = $userinfo['user_from'];
$occupation = $userinfo['user_occ'];
$interests = $userinfo['user_intrest'];
$signature = $userinfo['user_sig'];
$biography = $userinfo['user_bio'];</PRE
></FONT
></TD
></TR
></TABLE
><P
>and can use them in the same manner as $currentlang above to build a highly customized header.</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
></PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-HEADER-CHANGE-LOGO"
>14.3.4. How to change the logo in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> header</A
></H3
><P
>One of the first things you will want to change once your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> is up and running, is the site's logo. For this, you only have to replace the logo.gif file that came with the theme you are using. Search for themes/YourTheme/logo.gif. Whatever graphic you put in logo.gif, it will show as the site's logo in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> header. </P
><P
>If you want to change the way the logo is displayed, perhaps by setting a width and height attribute, or specifying a border, you will have to change the HTML code that displays it in the theme. To do this in a dynamic way, see <A
HREF="#PHP-NUKE-HEADER-CHANGE-LOGO-DYNAMIC"
>Section 14.3.5</A
>. Here are the relevant code lines for each one of the standard <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> themes:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>./themes/3D-Fantasy/header.html:&#60;a href="index.php"&#62;&#60;img src="themes/3D-Fantasy/images/logo.gif" border="0" 
alt="Welcome to $sitename" align="left"&#62;&#60;/a&#62;
./themes/ExtraLite/theme.php:        ."&#60;a href=\"index.php\"&#62;&#60;img src=\"themes/ExtraLite/images/logo.gif\" 
alt=\"Welcome to $sitename\" title=\"Welcome to $sitename\" border=\"0\"&#62;&#60;/a&#62;"
./themes/Kaput/theme.php:       ."&#60;a href=\"index.php\"&#62;&#60;img src=\"themes/Kaput/images/logo.gif\" border=\"0\" 
alt=\""._WELCOMETO." $sitename\" align=\"left\"&#62;&#60;/a&#62;&#60;/td&#62;"
./themes/NukeNews/header.html:&#60;a href="index.php"&#62;
&#60;img src="themes/NukeNews/images/logo.gif" align="left" 
alt=""._WELCOMETO." $sitename" border="0" hspace="10"&#62;&#60;/a&#62;&#60;/td&#62;
./themes/Odyssey/header.html:&#60;a href="index.php"&#62;
&#60;img src="themes/Odyssey/images/logo.gif" 
alt=""._WELCOMETO." $sitename" border="0"&#62;&#60;/a&#62;
./themes/Slash/theme.php:&#60;a href=$nukeurl&#62;
&#60;img src=themes/Slash/images/logo.gif border=0&#62;&#60;/a&#62;
./themes/SlashOcean/theme.php:&#60;a href=$nukeurl&#62;
&#60;img src=themes/SlashOcean/images/logo.gif 
Alt=\"Welcome to $sitename\" border=0&#62;&#60;/a&#62;
./themes/Traditional/theme.php: ."&#60;a href=\"index.php\"&#62;
&#60;img src=\"themes/Traditional/images/logo.gif\" 
alt=\""._WELCOMETO." $sitename\" border=\"0\"&#62;&#60;/a&#62;"
./themes/Anagram/theme.php:     ."&#60;a href=\"index.php\"&#62;
&#60;img src=\"themes/Anagram/images/logo.gif\" align=\"left\" 
alt=\""._WELCOMETO." $sitename\" border=\"0\"&#62;&#60;/a&#62;&#60;/td&#62;\n"
./themes/Karate/theme.php:      ."&#60;a href=\"index.php\"&#62;
&#60;img src=\"themes/Karate/images/logo.gif\" align=\"left\" 
alt=\""._WELCOMETO." $sitename\" border=\"0\"&#62;&#60;/a&#62;&#60;/td&#62;\n"
./themes/Milo/theme.php:        ."&#60;a href=\"index.php\"&#62;
&#60;img src=\"themes/Milo/images/logo.gif\" align=\"left\" 
alt=\""._WELCOMETO." $sitename\" border=\"0\"&#62;&#60;/a&#62;&#60;/td&#62;\n"
./themes/Sunset/theme.php:echo "&#60;a href=$nuke_url&#62;
&#60;img src=themes/Sunset/images/logo.gif 
Alt=\""._WELCOMETO." $sitename\" border=0&#62;&#60;/a&#62;\n";
./themes/DeepBlue/theme.php:    ."&#60;table border=0 width=100% cellpadding=0
cellspacing=0&#62;&#60;tr&#62;&#60;td align=\"left\"&#62;&#60;a href=\"index.php\"&#62;
&#60;img border=\"0\" src=\"themes/DeepBlue/images/logo.gif\" 
alt=\"Welcome to OpenMax!\" hspace=\"20\"&#62;&#60;/a&#62;&#60;/td&#62;&#60;td align=\"right\"&#62;
&#60;img border=\"0\" src=\"themes/DeepBlue/images/logo-graphic.gif\"
width=\"\"&#62;&#60;/td&#62;&#60;/tr&#62;&#60;/table&#62;&#60;/td&#62;&#60;/tr&#62;\n"</PRE
></FONT
></TD
></TR
></TABLE
><P
>This is also the place to put your change, if you want a second graphic besides your logo, or some other logo customization.</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
></PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-HEADER-CHANGE-LOGO-DYNAMIC"
>14.3.5. How to change the logo's dimensions dynamically</A
></H3
><P
>If you have designed a logo that can be displayed equally well at many resolutions and you wish to be able to change its display dimensions dynamically, according to the display resolution of your visitor's monitor, then you have to use Javascript. This is because <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> is a server-based technology and the web server has no means of knowing the monitor resolution of a client requesting a page. It would have to query that client for the resolution it uses, get an answer, then create the page with the right logo dimensions. But HTTP is a stateless protocol, meaning that, when the server gets an answer, it has no means to relate it to some previous request - not without cookies, URL parameters, sessions and all that extra stuff. This is where Javascript comes into play, obviating the need for a query-and-answer procedure.</P
><P
>Substitute the image logo tag </P
><P
>&#60;img src=themes/YourTheme/images/logo.gif alt=""._WELCOMETO." $sitename" border="0"&#62;</P
><P
>of your theme (see <A
HREF="#PHP-NUKE-HEADER-CHANGE-LOGO"
>Section 14.3.4</A
>) with the following:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$mod_log = "images/my_logo.gif";
echo ("&#60;script&#62;\n");
echo ("var swidth='0';\n");
echo ("swidth=screen.width\n");
echo ("if ((swidth&#60;=640)&#38;&#38;(swidth&#60;800)){\n");
echo ("document.write('&#60;img src=$mod_logo width=500 border=0&#62;')");
echo ("}\n");
echo ("else\n");
echo ("if ((swidth&#62;799)&#38;&#38;(swidth&#60;1024)){\n");
echo ("document.write('&#60;img src=$mod_logo width=700 border=0&#62;')");
echo ("}\n");
echo ("else\n");
echo ("if (swidth&#62;=1024){\n");
echo ("document.write('&#60;img src=$mod_logo width=900 border=0&#62;')");
echo ("}\n");
echo ("&#60;/script&#62;\n");</PRE
></FONT
></TD
></TR
></TABLE
><P
>Change the location of your logo in the $mod_log variable. The code will echo this Javascript in place of the image tag:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;script&#62;
var swidth='0';
swidth=screen.width
if ((swidth&#60;=640)&#38;&#38;(swidth&#60;800)){
document.write('&#60;img src=$mod_logo width=500 border=0&#62;')");
}
else
if ((swidth&#62;799)&#38;&#38;(swidth&#60;1024)){
document.write('&#60;img src=$mod_logo width=700 border=0&#62;')");
}
else
if (swidth&#62;=1024){
document.write('&#60;img src=$mod_logo width=900 border=0&#62;')");
}
&#60;/script&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>which will be executed on the client's browser (if the client has Javascript enabled, of course). It will query its resolution (screen width) and write the HTML image tag, with the correct dimensions for the logo image, into the page's HTML code. It may not work though, if the client's security settings do not allow querying the screen's width. See <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=15307"
TARGET="_top"
>Different themes for different resolutions</A
> and <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=14147"
TARGET="_top"
>banner next to logo</A
> for a discussion of the details.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-HEADER-CHANGE-BANNER-PLACEMENT"
>14.3.6. How to change placement of the banner in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> header</A
></H3
><P
>Sometimes the banner will appear at a position that you would feel is unfavourable for your theme and overall appearence of your site (of course, only if you enabled the banner functionality in the administration panel, see <A
HREF="#ADMINISTRATION-FUNCTIONS"
>Section 7.1</A
>). The code that controls whether the banner will appear or not, is a few lines long:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($banners == 1) {
include("banners.php");
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>and is found in the themeheader() function of the theme.php file. You don't need to bother about the included file, banners.php, that actually does all the job of selecting and displaying the appropriate banner, keeping banner statistics up-to-date and all that stuff. All you need is find out where to place those 3 lines in order to achieve the desired banner placement. As this is a highly theme dependent topic, there are no general recipes. Just move the 3-liner around in themeheader() to get a feeling of the various elements and their positions, then experiment a little to find the right one for you. You might, for example, choose to include it in a table layout and echo it directly after the HTML &#60;body&#62; line:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>echo "&#60;body bgcolor=\"#ffffff\" topmargin=\"0\" 
leftmargin=\"0\" marginheight=\"0\" marginwidth=\"0\"&#62;\n\n"
."&#60;table cellpadding=\"0\" cellspacing=\"0\" 
 width=\"100%\" border=\"0\" bgcolor=\"#6487dc\"&#62;&#60;tr&#62;\n"
."&#60;td bgcolor=\"#6487dc\" align=\"left\" 
 valign=\"top\" width=\"20%\"&#62;&#60;br&#62;
&#60;a href=\"index.php\"&#62;&#60;img src=\"themes/subSilver/images/logo.gif\" 
 align=\"left\" alt=\""._WELCOMETO
." $sitename\" border=\"0\"&#62;&#60;/a&#62;&#60;br&#62;&#60;/td&#62;\n"
."&#60;/td&#62;&#60;td bgcolor=\"#6487dc\" align=\"right\"&#62;";
if ($banners) {
  echo "&#60;br&#62;";
  include("banners.php");
  echo "&#60;br&#62;";
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>See <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=237"
TARGET="_top"
>Banner placement</A
> and <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=14147"
TARGET="_top"
>banner next to logo</A
> for a discussion of banner placement in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-HEADER-WATERMARK-BACKGROUND-IMAGE"
>14.3.7. How to display a watermark background image</A
></H3
><P
>It may sound inconsistent (actually, it <EM
>is</EM
> inconsistent!), but in order to display a static background image (i.e. one that does not scroll down when you scroll), like a watermark, in PHP-Nuke, you must change the theheader() function in the theme.php file of your theme. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_eek.png"></SPAN
> </P
><P
>The code you will need for this nice effect should be placed in the body part of the page's HTML code (the part delimited by the &#60;body&#62; and &#60;/body&#62; HTML tags). The reason we need this in the body part, is that in the header it will produce an error (at least in Mozilla):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Error: document.body has no properties</PRE
></FONT
></TD
></TR
></TABLE
><P
>This is probably because the document body does not exist at the time the header is loading. </P
><P
>Our code is a small Javascript, so you might think it belongs to the javascript.php file under the includes folder (see <A
HREF="#JAVASCRIPT-PHP"
>Section 21.9.1</A
>). Unfortunately, whatever is in that javascript.php file, will be included in the HTML header of the page, i.e. the part of the HTML code delimited by the &#60;head&#62; and &#60;/head&#62; tags (see <A
HREF="#MODIFYING-PHP-NUKE-HTML-HEADER"
>Chapter 15</A
>), so this will not serve our purpose. What we actually need is a file for code that belongs to the HTML body and comes preferably immediately after the &#60;body&#62; tag - but such a file does not exist in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> yet. </P
><P
>Thus, the next best place to insert our Javascript is in the theme.php file of our theme. This is because the &#60;body&#62; tag is echoed precisely in this file, as <A
HREF="#TAB-BODY-TAGS"
>Table 14-1</A
> demonstrates<A
NAME="AEN10629"
HREF="#FTN.AEN10629"
><SPAN
CLASS="footnote"
>[18]</SPAN
></A
>.</P
><P
><DIV
CLASS="TABLE"
><A
NAME="TAB-BODY-TAGS"
></A
><P
><B
>Table 14-1. &#60;body&#62; tags in theme.php of various themes</B
></P
><TABLE
BORDER="1"
RULES="all"
CLASS="CALSTABLE"
><COL
WIDTH="1*"
ALIGN="LEFT"
TITLE="COL0"><COL
WIDTH="1*"
ALIGN="LEFT"
TITLE="COL1"><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>theme.php file</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>PHP code that echoes the &#60;body&#62; tag for the theme</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>themes/3D-Fantasy/theme.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>echo "&#60;body bgcolor=\"#ffffff\" text=\"#000000\" link=\"#363636\" vlink=\"#363636\" alink=\"#d5ae83\"&#62;&#60;br&#62;\n\n\n";</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>themes/Anagram/theme.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>echo "&#60;body bgcolor=\"#ffffff\" text=\"#000000\"&#62;\n";</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>themes/DeepBlue/theme.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>echo "&#60;body bgcolor=\"#0E3259\" text=\"#000000\" link=\"0000ff\"&#62;"</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>themes/ExtraLite/theme.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>echo "&#60;body  text=\"000000\" link=\"0000ff\" vlink=\"0000ff\"&#62;"</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>themes/Kaput/theme.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>echo "&#60;body bgcolor=\"#FFFFFF\" text=\"#000000\" link=\"#363636\" vlink=\"#363636\" alink=\"#d5ae83\"&#62;\n"</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>themes/Karate/theme.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>echo "&#60;body bgcolor=\"#ffffff\" text=\"#000000\" link=\"#363636\" vlink=\"#363636\" alink=\"#d5ae83\"&#62;\n"</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>themes/Milo/theme.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>echo "&#60;body bgcolor=\"#ffffff\" text=\"#000000\" link=\"#363636\" vlink=\"#363636\" alink=\"#d5ae83\"&#62;\n"</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>themes/NukeNews/theme.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>echo "&#60;body bgcolor=\"#505050\" text=\"#000000\" link=\"#363636\" vlink=\"#363636\" alink=\"#d5ae83\"&#62;";</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>themes/Odyssey/theme.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>echo "&#60;body bgcolor=\"#004080\" text=\"#000000\" link=\"#004080\" vlink=\"#004080\" alink=\"#004080\"&#62;";</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>themes/Sand_Journey/theme.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>echo "&#60;body bgcolor=\"$bgcolor1\"&#62;";</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>themes/Slash/theme.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>echo "&#60;body bgcolor=DDDDDD text=222222 link=660000 vlink=222222&#62;</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>themes/SlashOcean/theme.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>echo "&#60;body bgcolor=FFFFFF text=000000 link=101070 vlink=101070&#62;</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>themes/Sunset/theme.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>echo "&#60;body bgcolor=\"#FFC53A\" text=\"#000000\" link=\"#035D8A\" vlink=\"#035D8A\"&#62;";</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>themes/Traditional/theme.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>echo "&#60;body bgcolor=\"#FFFFFF\" text=\"#000000\" link=\"#000000\" vlink=\"#000000\"&#62;"</P
></TD
></TR
></TBODY
></TABLE
></DIV
></P
><P
>Find the line that echoes the &#60;body&#62; tag in your theme.php (look for the themeheader() function or consult <A
HREF="#TAB-BODY-TAGS"
>Table 14-1</A
>) and insert the following lines after it (if the line does not contain a semicolon at its end, you have of course to append these lines after the next most close line that contains it, otherwise you will mess up the code and get errors):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    echo "\n";
    echo "&#60;script language=\"JavaScript1.2\"&#62;\n";
    echo "&#60;!--\n";
    echo "if (document.all||document.getElementById) \n";
    echo "document.body.style.background=
          \"url('http://www.yoursite.com/images/watermark.gif') 
          white center no-repeat fixed\"\n";
    echo "//--&#62;\n";
    echo "&#60;/script&#62;  \n";</PRE
></FONT
></TD
></TR
></TABLE
><P
>Adapt the URL in the script (http://www.yoursite.com/images/watermark.gif) to reflect the full URL to your watermark image. That's all, if your theme does not define any background colours for tables! </P
><P
>In practice, however, your theme <EM
>will</EM
> define at least two table background colours, those in the OpenTable() and OpenTable2() functions, as shown in this example, taken from the ExtraLite theme:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>function OpenTable() {
    global $bgcolor1, $bgcolor2;
    echo "&#60;table width=\"100%\" border=\"0\" 
          cellspacing=\"1\" cellpadding=\"0\" 
          bgcolor=\"$bgcolor2\"&#62;&#60;tr&#62;&#60;td&#62;\n";
    echo "&#60;table width=\"100%\" border=\"0\" 
          cellspacing=\"1\" cellpadding=\"8\" 
          bgcolor=\"$bgcolor1\"&#62;&#60;tr&#62;&#60;td&#62;\n";
}
function OpenTable2() {
    global $bgcolor1, $bgcolor2;
    echo "&#60;table border=\"0\" 
          cellspacing=\"1\" cellpadding=\"0\" 
          bgcolor=\"$bgcolor2\" align=\"center\"&#62;&#60;tr&#62;&#60;td&#62;\n";
    echo "&#60;table border=\"0\" 
          cellspacing=\"1\" cellpadding=\"8\" 
          bgcolor=\"$bgcolor1\"&#62;&#60;tr&#62;&#60;td&#62;\n";
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>You must delete those bgcolor attributes completely for this method to work! In fact, this will not be enough: you will have to delete every other table bgcolor attribute that appears in your theme.php<A
NAME="AEN10742"
HREF="#FTN.AEN10742"
><SPAN
CLASS="footnote"
>[19]</SPAN
></A
>. Contrary to what is implied in <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=14233"
TARGET="_top"
>Static Background Image</A
>, where this method is described in detail, deleting only the bgcolor attributes for the above two OpenTable functions will not be enough.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Alternative solution</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>An alternative solution would be to add the background and bgproperties attributes directly in the &#60;body&#62; tags of the lines in <A
HREF="#TAB-BODY-TAGS"
>Table 14-1</A
>, as in this example for the ExtraLite theme: </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>echo "&#60;body background=\"images/watermark.gif\" bgproperties=\"fixed\" 
text=\"000000\" link=\"0000ff\" vlink=\"0000ff\"&#62;"</PRE
></FONT
></TD
></TR
></TABLE
><P
>bgproperties will also create a "watermark" on the page, a background image which does not scroll with the rest of the page (see <A
HREF="http://htmlcodetutorial.com/document/_BODY_BGPROPERTIES.html"
TARGET="_top"
>bgproperties attribute</A
>. The only value it can attain is &#8220;fixed&#8221; and it must be used in conjunction with the background attribute. It is an MSIE extension, so use it, but don't rely on it. You will again have to delete all background colour attributes of the tables in theme.php. Contrary to the first method, however, there is no way to specify a no-repeat property, so that if your image does not fill the whole background space available (which depends on the client's monitor resolution), it will be repeated horizontally as well as vertically.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-HEADER-DISPLAY-FLASH-OBJECT"
>14.3.8. How to display a Flash object in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> header</A
></H3
><P
>To show Flash in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> header, you simply have to echo the appropriate HTML code. Since the HTML code for a Flash object is something like</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"
codebase=\"http://download.macromedia.com/pub/shockwave/cabs/
flash/swflash.cab#version=6,0,29,0\" width=\"350\" height=\"100\"&#62;
&#60;param name=\"movie\" value=\"yourMovie.swf\"&#62;
&#60;param name=quality value=high&#62;
&#60;embed src=\"yourMovie.swf\" quality=high pluginspage=\"http://www.macromedia.com/shockwave/download/
index.cgi?P1_Prod_Version=ShockwaveFlash\" type=\"application/x-shockwave-flash\"
width=\"350\" height=\"100\"&#62;&#60;/embed&#62;
&#60;/object&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> header code should contain something like</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>echo "&#60;object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" codebase=\"http://download.macromedia.com/pub/shockwave/cabs/
flash/swflash.cab#version=6,0,29,0\" width=\"350\" height=\"100\"&#62; "
."&#60;param name=\"movie\" value=\"yourMovie.swf\"&#62; "
."&#60;param name=quality value=high&#62; "
."&#60;embed src=\"yourMovie.swf\" quality=high pluginspage=\"http://www.macromedia.com/shockwave/download/
index.cgi?P1_Prod_Version=ShockwaveFlash\" type=\"application/x-shockwave-flash\"
width=\"350\" height=\"100\"&#62;&#60;/embed&#62;"
."&#60;/object&#62;";</PRE
></FONT
></TD
></TR
></TABLE
><P
>You can put the above code in the themes/YourTheme/theme.php file, in the themeheader() function, after the call to the banners code:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($banners == 1) {
    include("banners.php");
}
...put Flash code ("echo") here...</PRE
></FONT
></TD
></TR
></TABLE
><P
>The Flash object will be displayed after the banner, if you have one. See <A
HREF="#FLASH-PHP-NUKE-BLOCKS"
>Section 20.6</A
> on how to show Flash in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="HIDE-LEFT-BLOCKS"
>14.3.9. How to hide the left blocks</A
></H3
><P
>For some esoteric reason, you may want to hide the column with the <EM
>left</EM
> blocks, although it contains some crucial blocks, like the modules block (<A
HREF="#FIG-MODULES-BLOCK"
>Figure 17-1</A
>), for example. To accomplish this, you have to edit the themeheader() function in the theme.php file of your theme (in the themes/YourTheme folder) and replace the line:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>blocks(left);</PRE
></FONT
></TD
></TR
></TABLE
><P
>with</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($name=='Forums') {
  /* Don't display it. */
}
else {
  blocks(left);
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>Here, we check if the module is the Forums module and suppress the call to blocks(left) if it is. This will hide the left column blocks in the Forums. It is easy to include more modules, as in the following example (see <A
HREF="http://www.nukecops.com/postx69-0-0.html"
TARGET="_top"
>Hide left blocks when viewing Forum or ANY module</A
>, <A
HREF="http://www.desarrollonuke.org/modules.php?name=Content&#38;pa=showpage&#38;pid=16"
TARGET="_top"
>Como eliminar los bloques de la izquierda</A
>, <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=18282"
TARGET="_top"
>Left Blocks on Index Page only</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($name=='Forums' || $name=='Members_List' || $name=='Private_Messages') {
  /* Don't display it. */
} else {
  blocks(left);
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>Don't forget to add $name to the list of global variables in themeheader():</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>global $user, $banners, $sitename, $slogan, $cookie, $prefix, $dbi, $name;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Of course, if you don't find the call to blocks(left), your theme already suppresses the left column of blocks. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>How to hide the right blocks</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Most of the time, if you want to hide any blocks, they will be the blocks in the right column, not the blocks in the left. See <A
HREF="#HIDE-RIGHT-BLOCKS"
>Section 18.1.1</A
> on how to hide the right blocks.</P
></TD
></TR
></TABLE
></DIV
><P
>From a theme design point of view, the above solution does not look satisfactory: you have to hardcode the names of the modules that should not display the left blocks into the code of the theme. Since you don't know in advance which ones these are, you create a dependency relation to all existing and future modules.</P
><P
>A cleaner, alternative way is to declare the global $hideleft variable in themeheader() and check its value instead:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>global $hideleft;
...
if($hideleft == 1){
  /* Don't display it. */
} else {
  blocks(left);
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>Now, for every module that you want to hide the left blocks, insert the lines</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>global $hideleft;
$hideleft =1;</PRE
></FONT
></TD
></TR
></TABLE
><P
>at the beginning of its code. As you see, with this method, the selection of the modules that hide the left blocks has become the job the modules' authors. The theme code can work with any module, present or future one, without changes - as any theme should.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>More flexibility with the Block Modificator</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>With Chris Sengers' <A
HREF="http://www.sengers-au.com/Portal/main/modules.php?name=Downloads&#38;d_op=viewdownload&#38;cid=5"
TARGET="_top"
>Simple Blocks Manipulator for left blocks</A
> you can put any block left or right differently with any module. You can even use inactive blocks and also change the theme according to the module (we show how to do this yourself in <A
HREF="#CHANGE-PHP-NUKE-THEME-DEPENDING-ON-MODULE"
>Section 14.11</A
>).</P
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PHP-NUKE-THEME-MODIFYING-BODY"
>14.4. Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme body</A
></H2
><P
>In this section we continue our study of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> themes - this time with the body of a theme! We cover topics like:</P
><P
></P
><UL
><LI
><P
>How to get multipage News articles (<A
HREF="#MULTIPAGE-NEWS-ARTICLES"
>Section 14.4.1</A
>).</P
></LI
><LI
><P
>How to change the background colour (<A
HREF="#CHANGE-BACKGROUND-COLOUR"
>Section 14.4.2</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="MULTIPAGE-NEWS-ARTICLES"
>14.4.1. How to get multipage News articles</A
></H3
><P
>It appears that while Reviews, Section, and Content areas allow multipage bodies, the general News article does not. Contrary to what one would think, if you want to add such functionality in the News module, the code under modules/News/ is <EM
>not</EM
> the right place. The right place is the themearticle() in the theme.php file of your theme!</P
><P
>This is so, because it is the themearticle() function that outputs the article text, through a call to the FormatStory() function (which is also defined in theme.php):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>FormatStory($thetext, $notes="", $aid, $informant);</PRE
></FONT
></TD
></TR
></TABLE
><P
>Thus, all we have to do is format $thetext accordingly, before it is passed to FormatStory. Just add the following code to the begining of the themearticle() function in theme.php, like this<A
NAME="AEN10865"
HREF="#FTN.AEN10865"
><SPAN
CLASS="footnote"
>[20]</SPAN
></A
> (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?topic=12114&#38;forum=42"
TARGET="_top"
>Multipage articles</A
>, <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?topic=9390&#38;forum=26"
TARGET="_top"
>Pagebreaks in articles</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>function themearticle ($aid, $informant, $datetime, $title, $thetext, 
$topic, $topicname, $topicimage, $topictext) {
global $admin, $sid, $tipath, $page;
$contentpages = explode( "&#60;!--pagebreak--&#62;", $thetext );
$pageno = count($contentpages);
if ( $page=="" || $page &#60; 1 )
$page = 1; 
if ( $page &#62; $pageno )
$page = $pageno;
$arrayelement = (int)$page;
$arrayelement --;
if ($pageno &#62; 1) {
$thetextNew .= "Page: $page/$pageno&#60;br&#62;";
}
$thetextNew .= "&#60;p align=\"justify\"&#62;$contentpages[$arrayelement]&#60;/p&#62;";
if($page &#62;= $pageno) {
$next_page = "";
} else {
$next_pagenumber = $page + 1;
if ($page != 1) {
$next_page .= "- ";
}
$next_page .= "&#60;a href=\"modules.php?name=News&#38;file=article&#38;sid=$sid
&#38;page=$next_pagenumber\"&#62;"._NEXT." ($next_pagenumber/$pageno)&#60;/a&#62; 
&#60;a href=\"modules.php?name=News&#38;file=article&#38;sid=$sid&#38;page=$next_pagenumber\"&#62;
&#60;img src=\"images/right.gif\"border=\"0\" alt=\""._NEXT."\"&#62;&#60;/a&#62;";
}
if ($page == $pageno) {
$thetextNew .= "&#60;br&#62;&#60;p align=\"justify\"&#62;".nl2br($mypage[page_footer])."&#60;/p&#62;&#60;br&#62;&#60;br&#62;";
}
if($page &#60;= 1) { 
$previous_page = "";
} else {
$previous_pagenumber = $page - 1;
$previous_page = "&#60;a href=\"modules.php?name=News&#38;file=article&#38;sid=$sid
&#38;page=$previous_pagenumber\"&#62;
&#60;img src=\"images/left.gif\" border=\"0\" alt=\""._PREVIOUS."\"&#62;&#60;/a&#62; 
&#60;a href=\"modules.php?name=News&#38;file=article&#38;sid=$sid
&#38;page=$previous_pagenumber\"&#62;"._PREVIOUS." ($previous_pagenumber/$pageno)&#60;/a&#62;";
}
$thetextNew .= "&#60;br&#62;&#60;br&#62;&#60;br&#62;&#60;center&#62;$previous_page $next_page&#60;/center&#62;&#60;br&#62;&#60;br&#62;";
$thetext = $thetextNew;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Now you can use &#60;!--pagebreak--&#62; in your News stories, and the code above will split the text at the &#60;!--pagebreak--&#62; and create the &#8220;previous&#8221; and &#8220;next&#8221; hyperlinks for you (don't forget to define _NEXT and _PREVIOUS in your language file, as shown in <A
HREF="#MODIFYING-PHP-NUKE-TEXTS"
>Chapter 13</A
>).</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CHANGE-BACKGROUND-COLOUR"
>14.4.2. How to change background colour</A
></H3
><P
>A well-constructed theme will offer you a simple way to change the various colours (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=311"
TARGET="_top"
>How to change the background colour</A
>): in the theme.php file of the NukeNews theme, for example, you can read:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>/************************************************************/
/* Theme Colors Definition                                  */
/*                                                          */
/* Define colors for your web site. $bgcolor2 is generaly   */
/* used for the tables border as you can see on OpenTable() */
/* function, $bgcolor1 is for the table background and the  */
/* other two bgcolor variables follows the same criteria.   */
/* $texcolor1 and 2 are for tables internal texts           */
/************************************************************/</PRE
></FONT
></TD
></TR
></TABLE
><P
>and immediately after that:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$bgcolor1 = "#efefef";
$bgcolor2 = "#cfcfbb";
$bgcolor3 = "#efefef";
$bgcolor4 = "#cfcfbb";
$textcolor1 = "#000000";
$textcolor2 = "#000000";</PRE
></FONT
></TD
></TR
></TABLE
><P
>The strings to the right side of the above assignments are hexadecimal representations of colours. They begin with a # and contain six hexadecimal digits, two for each colour of the basic ones, red, green and blue. Thus, the string "#cfcfbb" fot $bgcolor4 means cf for red, cf for green and bb for blue. Each one of the three hexadecimal two-digit numbers has a range from 00 to FF (just as each hexadecimal digit goes from 0 to F: 0, 1, 2, 3..., 8, 9, a, b, c, d, e, f, where a means 10, b means 11, c means 12 ... and f means 15 in the hexadecimal system). This means a range from 0 to 255 - that's 256 different values for each colour. </P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Colour wheels</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>A  useful tool in exploring the visible spectrum in HTML is the <A
HREF="http://www.karakas-online.de/myServices/colorwheel.html"
TARGET="_top"
>colour wheel</A
>.  Just hover over the wheel with your mouse to view 4096 colors in their web safe, web smart and unsafe versions.<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_cool.png"></SPAN
></P
><P
>You can also use the <A
HREF="http://www.karakas-online.de/popups/"
TARGET="_top"
>colour popups of the Tag-o-matic</A
> to show all 216 web-safe colours in a virtual colour card.</P
></TD
></TR
></TABLE
></DIV
><P
>But what do you do if your theme does not follow this scheme and does not offer you this possibility? In such a case, we need to applly our knowledge on the structure of a theme (see <A
HREF="#TOPIC-STRUCTURE"
>Section 14.1</A
>). We have seen that each theme comes with its own definition of the OpenTable() and CloseTable() functions. A brief look at the code of tables.php in modules/NukeNews reveals the place where $bgcolor1 and $bgcolor2 are used in the Nuke News theme: in the definitions of OpenTable() and CloseTable()! This is for example the OpenTable() function for the NukeNews theme (see modules/NukeNews/tables.php):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>function OpenTable() {
    global $bgcolor1, $bgcolor2;
    echo "&#60;table width=\"100%\" border=\"0\" cellspacing=\"1\" 
           cellpadding=\"0\" bgcolor=\"$bgcolor2\"&#62;&#60;tr&#62;&#60;td&#62;\n";
    echo "&#60;table width=\"100%\" border=\"0\" cellspacing=\"1\" 
          cellpadding=\"8\" bgcolor=\"$bgcolor1\"&#62;&#60;tr&#62;&#60;td&#62;\n";
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>Other themes construct their the OpenTable() and CloseTable() functions similarly, if not identically. We will use this fact to change the background colour in the Stories Archive module - and only there. To this end, we only need to define new OpenTable() and CloseTable() functions, with the colour of our choice, then use the new functions instead of the old ones everywhere in the module:</P
><P
>In the theme.php file of your theme, add the following two functions<A
NAME="AEN10918"
HREF="#FTN.AEN10918"
><SPAN
CLASS="footnote"
>[21]</SPAN
></A
>:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>function OpenTableNew() {
    global $bgcolor1, $bgcolor2;
    echo "&#60;table width=\"100%\" border=\"0\" cellspacing=\"1\" 
          cellpadding=\"0\" bgcolor=\"$bgcolornew2\"&#62;&#60;tr&#62;&#60;td&#62;\n";
    echo "&#60;table width=\"100%\" border=\"0\" cellspacing=\"1\" 
          cellpadding=\"8\" bgcolor=\"$bgcolornew1\"&#62;&#60;tr&#62;&#60;td&#62;\n";
} 
function CloseTableNew() {
    echo "&#60;/td&#62;&#60;/tr&#62;&#60;/table&#62;&#60;/td&#62;&#60;/tr&#62;&#60;/table&#62;\n";
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>Give the new background colours, $bgcolornew1 and $bgcolornew2, the values of your liking in the start of theme.php, for example:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$bgcolornew1 = "#ffffff";
$bgcolornew2 = "#660000";</PRE
></FONT
></TD
></TR
></TABLE
><P
>Then just change every occurence of "OpenTable" and "CloseTable" with "OpenTableNew" and "CloseTableNew" respectively in modules/Stories_Archive/index.php. That's all! The Stories Archive module will now use the new colours.</P
><P
>There is one small detail you may also want to fix though: the colours of the cells for the &#8220;Articles | Comments | Reads | Score | Date | Actions&#8221; links. To change those too, you will have to change the $bgcolour2 colour in the table cells of the show_month function of modules/Stories_Archive/index.php (see also <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=12974"
TARGET="_top"
>Background color in Stories Archive</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    echo "&#60;table border=\"0\" width=\"100%\"&#62;&#60;tr&#62;"
        ."&#60;td bgcolor=\"$bgcolor2\" align=\"left\"&#62;&#60;b&#62;"._ARTICLES."&#60;/b&#62;&#60;/td&#62;"
        ."&#60;td bgcolor=\"$bgcolor2\" align=\"center\"&#62;&#60;b&#62;"._COMMENTS."&#60;/b&#62;&#60;/td&#62;"
        ."&#60;td bgcolor=\"$bgcolor2\" align=\"center\"&#62;&#60;b&#62;"._READS."&#60;/b&#62;&#60;/td&#62;"
        ."&#60;td bgcolor=\"$bgcolor2\" align=\"center\"&#62;&#60;b&#62;"._USCORE."&#60;/b&#62;&#60;/td&#62;"
        ."&#60;td bgcolor=\"$bgcolor2\" align=\"center\"&#62;&#60;b&#62;"._DATE."&#60;/b&#62;&#60;/td&#62;"
        ."&#60;td bgcolor=\"$bgcolor2\" align=\"center\"&#62;&#60;b&#62;"._ACTIONS."&#60;/b&#62;&#60;/td&#62;&#60;/tr&#62;";</PRE
></FONT
></TD
></TR
></TABLE
><P
>For your design to be consistent, the best way would be to change the six occurences of $bgcolor2 in the above code, to your new background colour $bgcolornew2. </P
><P
>If you want to change the <EM
>foreground</EM
> colour, the easiest method might be to change the value of the text attribute in the &#60;body&#62; tag that is echoed in the themeheader() function of theme.php (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=378"
TARGET="_top"
>How to change the main font color</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>echo "&#60;body bgcolor=\"#505050\" text=\"#000000\" 
link=\"#363636\" vlink=\"#363636\" alink=\"#d5ae83\"&#62;";</PRE
></FONT
></TD
></TR
></TABLE
><P
>Setting</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>text=\"#FF0000\"</PRE
></FONT
></TD
></TR
></TABLE
><P
>for example, should make all text appear in red. </P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PHP-NUKE-THEME-MODIFYING-INDEX"
>14.5. Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme index</A
></H2
><P
>The themeindex() function displays and formats the News articles. In its standard form, it will attribute a news article to the administrator, rather than the registered user who submitted it. It would be nice if the &#8220;Posted by&#8221; string pointed to the real author, not the administrator who approved and posted the submission (see <A
HREF="#FIG-POSTED-BY"
>Figure 14-4</A
>).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-POSTED-BY"
></A
><P
><B
>Figure 14-4.    News article: &#8220;posted by&#8221; does not mean &#8220;submitted by&#8221;.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/posted-by.png"><DIV
CLASS="CAPTION"
><P
>News article: &#8220;posted by&#8221; does not mean &#8220;submitted by&#8221;.</P
></DIV
></P
></DIV
></DIV
></P
><P
>To give credit, where credit is due, you must change function themeindex() in the file theme.php of your theme, e.g. themes/NukeNews/theme.php. Change the following:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    if ("$aid" == "$informant") {
        $content = "$thetext$notes\n";
    } else {
        if($informant != "") {
            $content = "&#60;a href=\"modules.php?name=Your_Account
               &#38;amp;op=userinfo&#38;amp;username=$informant\"&#62;$informant&#60;/a&#62; ";
        } else {
            $content = "$anonymous ";
        }
        $content .= ""._WRITES." &#60;i&#62;\"$thetext\"&#60;/i&#62;$notes\n";
    }
    $posted = ""._POSTEDBY." ";
    $posted .= get_author($aid);</PRE
></FONT
></TD
></TR
></TABLE
><P
>to:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    $content = "$thetext$notesn";
    $posted = ""._POSTEDBY." ";
    if("$informant" == "") {
        $posted .= "$anonymous ";
    } else {
        $posted .= get_author($informant);
    }</PRE
></FONT
></TD
></TR
></TABLE
><P
>or, if you want to be more flexible, to:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($informant == "") {
        $informant = "Anonymous";
}else {
       $holder = sql_query("SELECT url, femail 
       FROM ".$user_prefix."_users where uname='$informant'", $dbi);
       list($url, $femail) = sql_fetch_row($holder, $dbi);
       if ($url != "") {
           $informant = "&#60;a href="$url"&#62;$aid&#60;/a&#62;";
       } elseif ($femail != "") {
           $informant = "&#60;a href="mailto:$femail"&#62;$informant&#60;/a&#62;";
       } else {
           $informant = "&#60;a href="modules.php?name=Your_Account
           &#38;op=userinfo&#38;uname=$informant"&#62;$aid&#60;/a&#62;";
       }
}
echo "$informant";</PRE
></FONT
></TD
></TR
></TABLE
><P
>If you apply the latter solution, you should also declare $user_prefix and $dbi to be global variables in themeindex(). </P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Every theme is different!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Not all themes are like the NukeNews theme. Some may format the "Posted by" string in a separate function. The important thing to remember is that you must find the line</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$posted = ""._POSTEDBY." ";</PRE
></FONT
></TD
></TR
></TABLE
><P
>in the themeindex() function. The name of the &#8220;informant&#8221; is echoed immediately after that line. That's the place to include the above pieces of code (perhaps replacing some function call).</P
></TD
></TR
></TABLE
></DIV
><P
>See <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=14121"
TARGET="_top"
>submit news problem</A
> and <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=12588"
TARGET="_top"
>Need to change some links</A
> for further discussion of this topic.</P
><P
>The themeindex() function in theme.php is also the place where the &#8220;number of reads&#8221; is printed after the &#8220;posted by&#8221; part (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=386"
TARGET="_top"
>How to remove the number of reads in News</A
>). Thus, if you want to remove the number of reads in the News module and your theme is NukeNews, for example, you have to edit themes/NukeNews/theme.php with a <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=122"
TARGET="_top"
>decent text editor</A
> (see also <A
HREF="#EDITING-PHP-NUKE-FILES"
>Chapter 11</A
>), find the line</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$posted .= " "._ON." $time $timezone ($counter "._READS.")";</PRE
></FONT
></TD
></TR
></TABLE
><P
>in the themeindex() function and change it to:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$posted .= " "._ON." $time $timezone ";</PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PHP-NUKE-THEME-MODIFYING-FOOTER"
>14.6. Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme footer</A
></H2
><P
></P
><UL
><LI
><P
><A
HREF="#INSERT-RIGHT-EXTRA-TABLE"
>Section 14.6.1</A
></P
></LI
><LI
><P
><A
HREF="#PHP-NUKE-COPYRIGHT-NOTICE"
>Section 14.6.2</A
></P
></LI
></UL
><P
>Here is a little unorthodox example of what you can achieve by modifying the theme footer: </P
><P
>Suppose you just wonder how you can make a new table to the right of each page (<A
HREF="#INSERT-RIGHT-EXTRA-TABLE"
>Section 14.6.1</A
>), perhaps because you want to put an advertisement table there. The standard way to do this would be to write a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block (see <A
HREF="#BLOCKS"
>Chapter 20</A
>), insert it in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> through the block management panel (see <A
HREF="#ADMIN-MANAGEMENT"
>Section 9.4</A
>), position it in the right column, then define its relative position to the other blocks in the right column through the intuitive graphical arrows in the block table of the block management panel.</P
><P
>An alternative way is to edit your theme.php. There, in the function themefooter(), you should see an IF statement for the blocks(right):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($index == 1) {
    $tmpl_file = "themes/NukeNews/center_right.html";
    $thefile = implode("", file($tmpl_file));
    $thefile = addslashes($thefile);
    $thefile = "\$r_file=\"".$thefile."\";";
    eval($thefile);
    print $r_file;
    blocks(right);
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>The $index variable controls whether the right column should be displayed at all (together with all the blocks that were positioned &#8220;right&#8221;). If it is equal to 1, the right column should be visible and a call to blocks(right) is made. </P
><P
>You can echo the HTML for the extra table cell after this IF block. This extra table cell will be visible in all pages and could contain a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block with Google skyscraper ad (<A
HREF="#ADVERTISEMENTS-IN-PHP-NUKE-BLOCKS"
>Section 20.7</A
>), or any other content of your choice. See <A
HREF="#INSERT-RIGHT-EXTRA-TABLE"
>Section 14.6.1</A
> for the details.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>What makes right blocks  disappear...</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>...is the theme footer, as you can see from the code above! It is in the themefooter() function of theme.php in your theme folder where the value of $index is checked and blocks(right) is called to display the right blocks. If blocks(right) and the statements around it are called unconditionally, then the right blocks will never disappear, no matter what value  $index  has, and the method of <A
HREF="#HIDE-RIGHT-BLOCKS"
>Section 18.1.1</A
> will not work. You will then have to adjust themefooter() in your theme manually. See also <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?p=59094"
TARGET="_top"
>Disable right blocks in News Module</A
>.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSERT-RIGHT-EXTRA-TABLE"
>14.6.1. How to insert an extra table to the right of the page</A
></H3
><P
>The themefooter() function in the theme.php file of your theme is the right place to modify if you want to insert an extra table cell to the right of your page:</P
><P
>Find the call to blocks(right) (see it in <A
HREF="#PHP-NUKE-THEME-MODIFYING-FOOTER"
>Section 14.6</A
>) and modify it by adding code as follows:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>blocks(right);
    }
    echo "&#60;/td&#62;&#60;td&#62;&#38;nbsp;&#60;/td&#62;";
    echo "&#60;td&#62;Some text here.";
    // This is an extra table cell now
    $footer_message = "$foot1&#60;br&#62;$foot2&#60;br&#62;$foot3&#60;br&#62;$foot4";
    $tmpl_file = "themes/fiblack/footer.html";
    $thefile = implode("", file($tmpl_file));
    $thefile = addslashes($thefile);
    $thefile = "$r_file="".$thefile."";";
    eval($thefile);
    print $r_file;
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>Or, as a more elaborate variation that includes an external piece of code (in this case the Login block):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>blocks(right);
    }
    echo "&#60;/td&#62;&#60;td&#62;&#38;nbsp;&#60;/td&#62;";
    echo "&#60;td&#62;Some text here.&#60;br&#62;";
    include("blocks/block-Login.php");
    $title = "Title Here";
    themesidebox($title,$content);
    // This is an extra table cell now
    $footer_message = "$foot1&#60;br&#62;$foot2&#60;br&#62;$foot3&#60;br&#62;$foot4";
    $tmpl_file = "themes/fiblack/footer.html";
    $thefile = implode("", file($tmpl_file));
    $thefile = addslashes($thefile);
    $thefile = "$r_file="".$thefile."";";
    eval($thefile);
    print $r_file;
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>In both cases, it is important that the inserted code is outside the IF statement that controls the call to blocks(right). See <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?topic=11461&#38;forum=42"
TARGET="_top"
>Insert a new table</A
> for more details.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-NUKE-COPYRIGHT-NOTICE"
>14.6.2. The <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Copyright notice</A
></H3
><P
>The theme footer also is the place where the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> copyright notice comes in. You don't need to do anything for this, it is done automatically as follows (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=100"
TARGET="_top"
>PHP-Nuke Copyright and Logo</A
>): </P
><P
>The function themefooter() in theme.php contains a call to the footmsg() function, as in the following example from the Milo theme (file themes/Milo/theme.php):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    echo "&#60;/td&#62;\n"
        ."&#60;/tr&#62;&#60;/table&#62;\n"
        ."&#60;table bgcolor=\"#000000\" width=\"750\" 
          cellpadding=\"0\" cellspacing=\"0\" border=\"0\" align=\"center\"&#62;\n"
        ."&#60;tr&#62;\n"
        ."&#60;td width=\"750\" height=\"5\"&#62;
          &#60;img src=\"themes/Milo/images/bottombar.gif\" width=\"750\" 
          height=\"5\" border=\"0\" alt=\"\"&#62;&#60;/td&#62;\n"
        ."&#60;/tr&#62;\n"
        ."&#60;tr&#62;\n" 
        ."&#60;td width=\"100%\"&#62;&#60;img src=\"themes/Milo/images/pixel.gif\" 
          width=\"1\" height=\"1\" border=\"0\" alt=\"\"&#62;&#60;/td&#62;\n"
        ."&#60;/tr&#62;\n" 
        ."&#60;/table&#62;\n"
        ."&#60;br&#62;\n"
        ."&#60;br&#62;\n"
        ."&#60;table width=\"750\" cellpadding=\"0\" cellspacing=\"0\" 
          border=\"0\" align=\"center\"&#62;\n"
        ."&#60;tr align=\"center\"&#62;\n"
        ."&#60;td width=\"100%\" colspan=\"3\"&#62;\n";
    footmsg();
    echo "&#60;/td&#62;\n"
        ."&#60;/tr&#62;\n"
        ."&#60;/table&#62;\n";</PRE
></FONT
></TD
></TR
></TABLE
><P
>footmsg, in turn, is defined in the footer.php file (located in the root directory, together with config.php, mainfile.php and the other important files). There, among some code that displays the computation time it took to display the page, we read:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    // DO NOT REMOVE THE FOLLOWING COPYRIGHT LINE. 
       YOU'RE NOT ALLOWED TO REMOVE NOR EDIT THIS.
    echo "$copyright&#60;br&#62;$totaltime&#60;br&#62;\n&#60;/font&#62;\n";</PRE
></FONT
></TD
></TR
></TABLE
><P
>So that's the place where the Copyright notice for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> comes from! Does that mean that, now that we have found it, we are entitled to edit or remove it? Absolutely NOT! In the INSTALL file that comes with the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> package, Franzisco Burzi, the author of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> explicitly forbids this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>##############################################################################
#                        I M P O R T A N T    N O T E                        #
##############################################################################
# IMPORTANT: I saw many sites that removes the copyright line in the footer  #
# of each page. YOU'RE NOT ALLOWED TO REMOVE NOR CHANGE/EDIT THAT NOTE. If I #
# still see this problem happening I'll need to take extreme measures that   #
# can include: to change the &#60;application&#62;PHP-Nuke&#60;/application&#62; license, to encrypt some parts of the  #
# code, stop distributing it for free and in an extreme case stop developing #
# it. The decision is in your hands.                                         #
# If you do not agreed with this simple rule, delete all &#60;application&#62;PHP-Nuke&#60;/application&#62; files      #
# rigth now and move away from it. Thanks.                                   #
##############################################################################</PRE
></FONT
></TD
></TR
></TABLE
><P
>Still, even this simple and clear admonition from the author does not stop some folks to pose the same question in the forums again and again: Am I allowed to take the Copyright Notice away? The argument often presented is one that involves the Licence uder which <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> is released, the <A
HREF="http://www.gnu.org/copyleft/gpl.html"
TARGET="_top"
>GNU General Public Licence</A
> (GPL). If I am allowed to change the code under the GPL, the argument goes, and the Copyright Notice is generated by a function call to footmsg(), why not just change the code and delete that call in my theme? I can do this, right?</P
><P
>Wrong. In an article titled <A
HREF="http://phpnuke.org/modules.php?name=News&#38;file=article&#38;sid=4947"
TARGET="_top"
>PHP-Nuke GPL Copyright Removal Question Finally Solved</A
>, MissS writes:</P
><A
NAME="AEN11095"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>A while back, questions were raised as to whether or not the copyright notice at the bottom of PHPNuke created pages could be removed. Now there is an answer to this question, straight from the <ACRONYM
CLASS="ACRONYM"
>GNU</ACRONYM
> people. </P
><P
>The <ACRONYM
CLASS="ACRONYM"
>GNU</ACRONYM
> website states that if you have any questions concerning licensing, you can simply email them for clarification. That is exactly what I did and what follows is my email to them...</P
></BLOCKQUOTE
><P
>So MissS wrote to licensing@gnu.org on Sept. 19th, 2002 and asked:</P
><A
NAME="AEN11101"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>I have a question about the GNU/GPL license. There is a program called <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> that has been released under this license. (This program can be found at www.phpnuke.org) This program is a content management system that provides the structure for a website along with the means to administer that site. </P
><P
>What I would like to know is this: if I use this PHPNuke program to create my website, must the copyright notice (that is included at the bottom of each page that is created with PHPNuke) remain there in order to remain in compliance with this license? There is also a copyright notice within the source code files themselves. </P
></BLOCKQUOTE
><P
>Dave Turner's answer was clear, albeit somewhat lapidary:</P
><A
NAME="AEN11108"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>Yes. See section 2c of the GPL for details.</P
></BLOCKQUOTE
><P
>MissS was also confused as to whether <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> can be technically considered as what the GPL in its 2c section calls a program that &#8220;normally reads commands interactively when run&#8221; , in which case it must, among other things, &#8220;print or display an announcement including an appropriate copyright notice&#8221;:</P
><A
NAME="AEN11112"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>This subject came up a while back at PHPNuke.org and no-one seemed to know the real</P
><P
>answer. I have spent quite sometime reading over your license and can't definitively figure out</P
><P
>this answer for myself. (I had questions such as: is the output from a program like this truly</P
><P
>considered interactive or not?) </P
><P
>Please let me know. I don't want to remove the copyright footers on the output pages if I am</P
><P
>not legally allowed to do so. </P
></BLOCKQUOTE
><P
>To which Dave Turner replied:</P
><A
NAME="AEN11122"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>I think a web-based message board clearly reads commands interactively. So, if there is such a notice, you can't remove it. But you could alter its form, so long as it is still appropriate.</P
><P
>-Dave Turner</P
><P
>Free Software Licensing Guru</P
><P
>This is not legal advice. If you need legal advice, see a lawyer.</P
></BLOCKQUOTE
><P
>This pretty much says it all.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PHP-NUKE-THEME-MODIFYING-ICONS"
>14.7. Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme icons</A
></H2
><P
>You are not allowed to use PHP-Nuke's own icons (found in <A
HREF="http://phpnuke.org/modules.php?name=Topics"
TARGET="_top"
>phpnuke.org: Topics</A
>). From the <A
HREF="http://phpnuke.org/modules.php?name=FAQ&#38;myfaq=yes&#38;id_cat=1&#38;categories=PHP-Nuke+General+Info"
TARGET="_top"
>PHP-Nuke FAQ</A
>:</P
><A
NAME="AEN11136"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>Can I copy and use your topics graphics?</P
><P
>Absolutely No. All the topics graphics has been made by me and have copyright. You can't copy, modify and/or use those graphics. You can only use "phpnuke.gif" topic image to setup a topic in your web site that refers "only" to <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. Will be exceptions to this rule for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> community's sites. If you run a community support site (for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> ONLY), drop me line. You'll need my written permission to use them. Be fair and don't play with my hard work.</P
></BLOCKQUOTE
><P
>Thus, you must use your own icons. You will have to either use icons that are royalty free, or licence some for use on your site, or create your own ones. </P
><P
>To create your own <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> icons, you can use some of the tools available specifically for this purpose, e.g. <A
HREF="http://www.nukeresources.com/modules.php?name=Downloads&#38;d_op=viewdownloaddetails&#38;lid=154&#38;ttitle=The_Topic_Dude"
TARGET="_top"
>The Topic Dude</A
>.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="THEME-RULES"
>14.8. Theme construction: the rules to follow</A
></H2
><P
>Considering that the example is always on NukeNews, I suggest you always use this theme as an example, by using the HTML template without directly inserting too many tags in the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code, you save time and increase the sites stylistic effect by easily making changes across your site.</P
><P
></P
><OL
TYPE="1"
><LI
><P
>When you add images in an automatic way by using a visual editor, the path will be only images/image.gif, and you have to correct it by hand with the right path.</P
></LI
><LI
><P
>You can insert variables in the HTML that will then be called by <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> - it is important that they are inserted in the global part of the function that will include the file.</P
></LI
><LI
><P
>The visual editor has the defect to open and close the tables, correcting what it thinks is an error. Pay attention because sometimes, in the html files we use, a table is not closed because it will be closed by the successive html file. For example, as often happened, DreamWeaver would close a header by making a mistake in the tables. The header must be closed in the following way:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;td bgcolor="#ffffff "width="150" valign="top "&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Where this table is that one that includes the right blocks.</P
></LI
><LI
><P
>Try to <A
HREF="http://www.karakas-online.de/myServices/w3c-html-validator.html"
TARGET="_top"
>validate the HTML code</A
> as much as possible and to use the style sheets (see <A
HREF="#CSS-SYNTAX"
>Section 28.3</A
>) as much you can. In this way you will save a lot of time when you will modify colors, fonts etc.</P
></LI
></OL
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CHANGE-BUGGY-PHP-NUKE-THEME"
>14.9. How to change a buggy <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme</A
></H2
><P
>You changed your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme to one that is buggy. Now, you cannot see anything, or you only see errors and the Administration panel cannot be reached to change the theme - a chicken-and-egg problem...<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
></P
><P
>There are various solutions to this problem:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>Copy the following code into a file and save it as fixtheme.php: </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
require("config.php");
$host = $dbhost;
$database = $dbname;
$username = $dbuname;
$password = $dbpass;
$def_theme = "NukeNews";
mysql_connect($host, $username, $password);
@mysql_select_db($database);
mysql_query("update ".$prefix."_config set Default_Theme='$def_theme'");
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>If you don't have the NukeNews theme uploaded in your site then change the value for $def_theme in the code above so that it reflects one of your working themes, save it, upload it to where nuke's config.php file is, then point your browser to http://yoursite.com/fixtheme.php (thanks to <A
HREF="http://www.humpa.com"
TARGET="_top"
>Humpa</A
> for this).</P
></LI
><LI
><P
>Just rename the DeepBlue theme (or some other theme known to work) folder to the problematic one.</P
></LI
><LI
><P
>Use phpMyAdmin and change the default_theme field in the nuke_config table.</P
></LI
></OL
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PREVENT-USERS-FROM-CHANGING-PHP-NUKE-THEME"
>14.10. How to prevent users from changing the theme in PHP-Nuke</A
></H2
><P
>PHP-Nuke comes with several standard themes. It gives your registered users the possibility to change the theme at the click of a button (see <A
HREF="#FRONTEND"
>Chapter 6</A
>). But what if you don't want your users to do that? What if you want them to stay with the default theme you chose in the Preferences (see <A
HREF="#ADMINISTRATION-FUNCTIONS"
>Section 7.1</A
>) of the administration panel?</P
><P
>There are two ways to achieve this (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=330"
TARGET="_top"
>I do not want to let users choose their own themes</A
>):</P
><P
></P
><OL
TYPE="1"
><LI
><P
>You delete all themes except the one chosen by you. Themes are stored in the themes folder, under directories that carry the theme name. <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> counts the available themes in function nav() of the file modules/Your_Account/navbar.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    $handle=opendir('themes');
    while ($file = readdir($handle)) {
        if ( (!ereg("[.]",$file)) ) {
                $thmcount++;
        }
    }
    closedir($handle);</PRE
></FONT
></TD
></TR
></TABLE
><P
>If the theme count $thmcount is greater than 1 - and only then - , the registered user is presented the possibility to change the theme. This is done again in function nav() of modules/Your_Account/navbar.php a few lines further down:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    if ($thmcount &#62; 1) {
        $menuimg = menuimg("themes.gif");
        echo "&#60;td width=\"10%\"&#62;&#60;font class=\"content\"&#62;"
            ."&#60;center&#62;&#60;a href=\"modules.php?name=Your_Account&#38;amp;op=chgtheme\"&#62;
            &#60;img src=\"$menuimg\" border=\"0\" alt=\""
            ._SELECTTHETHEME."\" title=\""._SELECTTHETHEME."\"&#62;&#60;/a&#62;&#60;br&#62;"
            ."&#60;a href=\"modules.php?name=Your_Account&#38;amp;op=chgtheme\"&#62;"
            ._SELECTTHETHEME."&#60;/a&#62;"
            ."&#60;/center&#62;&#60;/form&#62;&#60;/font&#62;&#60;/td&#62;";
    }</PRE
></FONT
></TD
></TR
></TABLE
><P
>Thus, by deleting all other themes you will get a theme count of only 1 and the theme change functionality will not be available to the user.</P
></LI
><LI
><P
>Why get to all the trouble and delete whole theme directories? From what we said above, it should suffice just as well to replace the line</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($thmcount &#62; 1) {</PRE
></FONT
></TD
></TR
></TABLE
><P
>with </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($thmcount &#62; 1000) {</PRE
></FONT
></TD
></TR
></TABLE
><P
>Unless you really installed more than a thousand themes, your users are not going to get the chance to change the default one!</P
></LI
></OL
><P
>Choose the first solution, if you don't want to touch the code, choose the second one, if you are lazy. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
><DIV
CLASS="WARNING"
><P
></P
><TABLE
CLASS="WARNING"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/warning.png"
HSPACE="5"
ALT="Warning"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Don't delete themes  if you already have registered users!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Do the above changes before you go online and start getting registered users. Why? Because if you already have some, you don't know if the theme they chose in the User Preferences was the one you want to be the default. If it is not, and you apply either solution above, then those users will not be able to get into your site! Either the theme they specified will not be there, or they will not be able to change it. </P
><P
>The first solution has the extra disadvantage that if you choose to change the default theme, you will need to move it under the themes folder. Thus, even for a very short period of time, you will end up having two themes available. You never know if a user just chose the theme you wanted to remove as her default theme. That user will be denied access to your site the next time she tries, because the theme will not be there anymore!</P
><P
>In cases you do have registered users, you are thus advised to run the following SQL statement, either from the MySQL prompt, or through a graphical frontend, like phpMyAdmin:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>update nuke_users set theme=";</PRE
></FONT
></TD
></TR
></TABLE
><P
>This will set the theme to blank for all users, making it for them possible to change it to the default one afterwards, see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=14853"
TARGET="_top"
>disabling themes</A
> and also <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=18836"
TARGET="_top"
>Where is the themeheader function located?</A
>.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CHANGE-PHP-NUKE-THEME-DEPENDING-ON-MODULE"
>14.11. How to change the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme depending on the module</A
></H2
><P
>For some web designs, it is desirable to always use the same theme for a few modules, while letting the user choose his own theme for the rest. Let's say you want to use the NukeNews theme for the News and Sections modules, but let the user's personal theme be applied to the other modules of your site.</P
><P
>The theme is set in the get_theme function of mainfile.php. Thus, all you have to do is declare the $name variable to be global in that function, then check its value before the selected theme is returned (i.e. immediately before the return statement) and, if it is, say "News", or "Sections", to choose the NukeNews theme (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=18245"
TARGET="_top"
>Truly Global Variables</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>function get_theme() {
    global $user, $cookie, $Default_Theme, $name; <A
NAME="GTNAME"
><IMG
SRC="images/callouts/1.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
>
    if(is_user($user)) {
        $user2 = base64_decode($user);
        $t_cookie = explode(":", $user2);
        if($t_cookie[9]=="") $t_cookie[9]=$Default_Theme;
        if(isset($theme)) $t_cookie[9]=$theme;
        if(!$tfile=@opendir("themes/$t_cookie[9]")) {
            $ThemeSel = $Default_Theme;
        } else { 
            $ThemeSel = $t_cookie[9];
        }
    } else {
        $ThemeSel = $Default_Theme;
    }
    if ($name == "News" || $name == "Sections") { <A
NAME="GTCHECK"
><IMG
SRC="images/callouts/2.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"></A
>
        $ThemeSel = "NukeNews"; <A
NAME="GTSEL"
><IMG
SRC="images/callouts/3.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"></A
>
    } else {
        /* Don't change the theme */    
    }
    return($ThemeSel);
}</PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="CALLOUTLIST"
><DL
COMPACT="COMPACT"
><DT
><A
HREF="#GTNAME"
><IMG
SRC="images/callouts/1.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
></DT
><DD
>      Declare $name to be global.
      </DD
><DT
><A
HREF="#GTCHECK"
><IMG
SRC="images/callouts/2.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"></A
></DT
><DD
>      Check if the module name, $name, is  News or Sections.
      </DD
><DT
><A
HREF="#GTSEL"
><IMG
SRC="images/callouts/3.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"></A
></DT
><DD
>      Set the selected theme to NukeNews.
      </DD
></DL
></DIV
><P
>Of course, there is nothing magic about $name. You could take just any other variable and make the theme selection be dependent on it. You would only have to declare it global in the get_theme() function and in the modules that you would like to se t it. </P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CHANGE-FONT-SIZE-PHP-NUKE"
>14.12. How to change the font size in PHP-Nuke</A
></H2
><P
>Since every theme comes with a CSS (style.css, see also <A
HREF="#CSS-SYNTAX"
>Section 28.3</A
> and <A
HREF="#MAKE-DYNAMIC-CSS"
>Section 25.7</A
>) in the styles folder of the theme itself (see <A
HREF="#TOPIC-STRUCTURE"
>Section 14.1</A
>), it is very easy to apply global formatting changes to our <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site: we just edit the CSS file. For example, to change the font size for all documents, we don't have to chase &#60;font&#62; tags in the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code - we only need to edit the style.css of our theme.</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>&#60;/font&#62; is deprecated in HTML 4.x</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;/font&#62; tags are deprecated in the HTML standard, starting from version 4.0, see <A
HREF="http://www.w3.org/TR/REC-html40/present/graphics.html#h-15.2.2"
TARGET="_top"
>Font modifier elements: FONT and BASEFONT</A
>. </P
></TD
></TR
></TABLE
></DIV
><P
>Typically, in style.css there will be one or more lines specifying the font size, like:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>FONT            {FONT-FAMILY: Verdana,Helvetica; FONT-SIZE: 11px}
TD              {FONT-FAMILY: Verdana,Helvetica; FONT-SIZE: 11px}
BODY            {FONT-FAMILY: Verdana,Helvetica; FONT-SIZE: 11px}
P               {FONT-FAMILY: Verdana,Helvetica; FONT-SIZE: 11px}
DIV             {FONT-FAMILY: Verdana,Helvetica; FONT-SIZE: 11px}</PRE
></FONT
></TD
></TR
></TABLE
><P
>or </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>.title          {BACKGROUND: none; COLOR: #000000; FONT-SIZE: 13px; 
FONT-WEIGHT: bold; FONT-FAMILY: Verdana, Helvetica; TEXT-DECORATION: none}
.content        {BACKGROUND: none; COLOR: #000000; FONT-SIZE: 11px; 
FONT-FAMILY: Verdana, Helvetica}
.storytitle     {BACKGROUND: none; COLOR: #363636; FONT-SIZE: 14px; 
FONT-WEIGHT: bold; FONT-FAMILY: Verdana, Helvetica; TEXT-DECORATION: none}</PRE
></FONT
></TD
></TR
></TABLE
><P
>Font size is usually specified in pixels (px), but other units are also possible (see <A
HREF="http://www.bigbaer.com/css_tutorials/css_font_size.htm"
TARGET="_top"
>CSS Font-Size</A
>):</P
><P
></P
><UL
><LI
><P
>Relative units - they specify a length relative to another length.</P
><P
></P
><UL
><LI
><P
>em: the 'font-size' of the relevant font.</P
></LI
><LI
><P
>ex: the 'x-height' of the relevant font.</P
></LI
><LI
><P
>px: pixels, relative to the viewing device.</P
></LI
></UL
><P
>Thus, the 'em' unit is equal to the <EM
>computed</EM
> value of the 'font-size' property of the element on which it is used. The exception is when 'em' occurs in the value of the 'font-size' property itself, in which case it refers to the font size of the <EM
>parent</EM
> element. That's what the following joke refers to:</P
><P
>What did one .em say to the other .em? <EM
>Who's your Daddy?</EM
> <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_smile.png"></SPAN
> </P
></LI
><LI
><P
>Absolute units:</P
><P
></P
><UL
><LI
><P
>in: inches -- 1 inch is equal to 2.54 centimeters.</P
></LI
><LI
><P
>cm: centimeters</P
></LI
><LI
><P
>mm: millimeters</P
></LI
><LI
><P
>pt: points -- the points used by CSS2 are equal to 1/72th of an inch.</P
></LI
><LI
><P
>pc: picas -- 1 pica is equal to 12 points.</P
></LI
></UL
></LI
></UL
><P
>Depending on where you make the font size change, it may apply only to the title, the content or even the wholy body. Inheritance in the HTML document tree is applied by the browser to decide which properties can be passed on from the &#8220;parent&#8221; elements to the &#8220;children&#8221; or the &#8220;descendants&#8221;. This is called &#8220;cascading&#8221; and is responsible for the first &#8220;C&#8221; in &#8220;CSS&#8221;. You need to understand cascading to use the full potential of CSS, but for simple changes like this one, you can just experiment and get the idea (see <A
HREF="#CSS-SYNTAX"
>Section 28.3</A
> for a short discussion of CSS syntax).</P
><P
>However, it is better, from the "Accessibility" point of view, to let your users decide themselves what font size they like, by setting it in up in their browsers (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=383"
TARGET="_top"
>How to change font size</A
>). Read <A
HREF="http://diveintoaccessibility.org/day_26_using_relative_font_sizes.html"
TARGET="_top"
>Using relative font sizes</A
> for the background on this. Using the advice given in that article, Chris has the following in the <A
HREF="http://www.karakas-online.de/myLinuxTips/css-for-docbook.html"
TARGET="_top"
>CSS file for DocBook</A
> that controls the appearence of the <A
HREF="http://www.karakas-online.de/EN-Book/"
TARGET="_top"
>PHP-Nuke HOWTO</A
> (and actually, all other documents on his site):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>P {
        font-size: 12px;
}
/*/*/A{}
BODY P {
        font-size: x-small;
        voice-family: "\"}\"";
        voice-family: inherit;
        font-size: small;
}
HTML&#62;BODY P {
        font-size: small;
}
/* */</PRE
></FONT
></TD
></TR
></TABLE
><P
>There's a lot going on here, and it's all important, so pay attention (taken from <A
HREF="http://diveintoaccessibility.org/day_26_using_relative_font_sizes.html"
TARGET="_top"
>Using relative font sizes</A
>):</P
><P
></P
><OL
TYPE="1"
><LI
><P
>First, we're defining an absolute size (12px) for every &#60;p&#62;. All browsers apply this style, including Netscape 4.</P
></LI
><LI
><P
>Then we include the odd-looking comment "/*/*/". Due to bugs in Netscape 4, everything between this comment and the following one will be ignored. That's right, all the following styles will only be applied in non-Netscape-4 browsers.</P
></LI
><LI
><P
>Immediately after the odd-looking comment, we include an empty rule "a {}". Opera 5 for Mac is buggy and ignores this rule (and only this rule). It applies everything else.</P
></LI
><LI
><P
>We have now carved out a realm where we can define rules that are applied in all browsers except Netscape 4. Now we can start defining relative font sizes (which Netscape 4 can't handle). The first thing we do is use a "body p" selector to redefine the behaviour of the p tag. Due to the way CSS works, this will override our previous p selector. (In technical terms, "body p" is a more specific selector than "p".)</P
></LI
><LI
><P
>We redefine the font size of all &#60;p&#62; tags to be x-small. This is a font size keyword which, at default settings, Internet Explorer 5 for <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> will translate into 12px. However, if the user changes their "Text Size" (under the View menu), this text will scale larger or smaller, depending on the user's setting. This is what we want. (Note: we've now defined font-size twice for IE5/Win, but that's okay, because the more specific selector always wins, and the previous selector is simply ignored.)</P
></LI
><LI
><P
>Unfortunately, IE5/Win an off-by-1 bug with its font size keywords; every other browser in the world (IE5/Mac, Netscape 6, Mozilla, IE6/Win) will translate x-small to 10px, not 12px. Luckily for us, IE5/Win has its own parsing bug that we can exploit: it looks at that odd-looking voice-family and mistakenly thinks that this entire "body p" selector is over, so it ignores all the lines until the "}".</P
></LI
><LI
><P
>Now we have carved out a smaller realm where we can define rules that are applied in all browsers except IE5/Win (and Netscape 4, which is still blissfully ignoring all of this). So we redefine font-size to small, which modern non-IE5/Win browsers (the only ones still listening) correctly interpret as 12px (at default settings). Again, if the user sets their "text size" to larger, this text will scale larger, which is what we want.</P
></LI
><LI
><P
>But wait! Opera 5 has the same parsing bug that IE5/Win has, so it was also confused by the voice-family hack, but it correctly interprets font size keywords, so now our text will look too small in Opera 5. Luckily, Opera 5 supports a third type of selector, "html&#62;body p". (Again, this is "more specific" than "body p", so it takes precedence over the previous selector.) IE5/Win does not support this type of selector, so it will just ignore it, which is what we want (since we've already compensated for it's off-by-1 bug and don't want to go mucking that up now). IE6/Win also does not support it, but that's OK, because we caught it with the "font-size: small" after the "voice-family: inherit" hack in the "body p" selector. All other browsers support "html&#62;body" selectors, so for them we end up defining font-size four times. Again, that's not a problem, because the most specific selector always wins, and the rest are simply ignored.</P
></LI
><LI
><P
>Finally, we have a set of empty comments: /* */. This triggers Netscape 4's parser to start listening again. If we defined any further rules after these empty comments, all browsers (including Netscape 4) would apply them.</P
></LI
></OL
><P
>To recap:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>Netscape 4 displays &#60;p&#62; text at 12px, regardless of user setting.</P
></LI
><LI
><P
>Internet Explorer 5 for <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> displays &#60;p&#62; text at x-small, which works out to be 12px at the default setting, but would scale larger if the user set their "Text Size" setting larger in the View menu.</P
></LI
><LI
><P
>Internet Explorer 6 for <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> displays &#60;p&#62; text at small, because of the "font-size: small" rule in the "body p" selector. This works out to 12px at the default setting, but would scale larger if the user set their "Text Size" setting larger.</P
></LI
><LI
><P
>Internet Explorer 5 for Mac, Opera, Netscape 6, Mozilla, and (hopefully) all future browsers will display &#60;p&#62; text at small, because of the "font-size: small" rule in the "html&#62;body p" selector. This works out to 12px at the default setting, but would scale larger if the user used the "Text Zoom" feature.</P
></LI
></OL
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Dive into Accessibility!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>By the way, the whole <A
HREF="http://diveintoaccessibility.org/table_of_contents.html"
TARGET="_top"
>Dive into Accessibility</A
> document by Mark Pilgrim is highly recommended reading for everyone. It will open your eays to a different world - that also uses the Internet!</P
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="MODIFYING-PHP-NUKE-HTML-HEADER"
></A
>Chapter 15. Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> HTML header</H1
><P
>The <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> HTML header (i.e. everything that goes between the &#60;head&#62; and &#60;/head&#62; tags in the HTML code of the generated page) is fully customizable through the includes/my_header.php file. This file contains whatever custom stuff you need to include in your site when the header loads. This can be used for third party banners, custom javascript, popup windows, etc. With this file you don't need to edit system code each time you upgrade to a new version. Just remember, in case you add code here to not overwrite this file when updating! Whatever you put here will be between &#60;head&#62; and &#60;/head&#62; tags.</P
><P
>Here are some example customizations of the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> HTML header:</P
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="FAVOURITES-ICON-FAVICON-ICO"
>15.1. How to implement a favourites icon (favicon.ico)</A
></H2
><P
>Would you like to use a custom icon to appear in the URL address field at the top of the IE window when people are at your site? This is a &#8220;favicon&#8221;, a favourites icon, that small icon that you see besides the URL when you visit some cool sites. This &#8220;functionality&#8221; was introduced by the Internet Explorer. When you add a site to your Favourites list, Internet Explorer (version 5 and above) asks the server if it has a file called favicon.ico. If present, this file will be used to provide an icon that is displayed next to the bookmark text. It is not visible in the old browsers, but newer ones, like Mozilla and Konqueror, will also display it.</P
><P
>To display a favicon, you have first to create one. The icon has to be in the ICO format which, contrary to common belief, is NOT the same as GIF, or PNG. You have to transform your GIF or PNG file to ICO format. For Windows, you can use one of the numerous icon tools (<A
HREF="#PHP-NUKE-THEME-MODIFYING-ICONS"
>Section 14.7</A
>). For Linux, simply create a 16x16 PNG file and convert it to an icon resource with <A
HREF="http://www.winterdrache.de/freeware/png2ico"
TARGET="_top"
>png2ico</A
>. </P
><P
>Upload the ICO file to, say, images/favicon.ico. Then add the following lines in the includes/my_header.php file, somewhere between the &#8220;&#60;?php&#8221; and &#8220;?&#62;&#8221; tags:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>echo "&#60;link rel=\"icon\" href=\"images/favicon.ico\" type=\"image/x-icon\"&#62;";
echo &#8220;&#60;link rel=\"shortcut icon\" href=\"images/favicon.ico\" type=\"image/x-icon\"&#62;&#8221;;</PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Note:</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you did the above and your browser still does not show the icon, remember that it may be using an old cache. Empty the cache and remember that even with a new cache, the browser may be using some old information, so you will have to be patient, or check it with a browser that did not visit that URL before.</P
></TD
></TR
></TABLE
></DIV
><P
>For more information on how to create and use a favicon, see <A
HREF="http://www.winterdrache.de/freeware/png2ico/favicon.html"
TARGET="_top"
>How To Create And Install A favicon.ico</A
>.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PREVENT-STATISTICS-MODULE-GATHERING-HITS"
>15.2. How to prevent the statistics module from gathering hits from certain hosts</A
></H2
><P
>If you are still in the phase of editing and tweaking your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site while it is already online, you may find out that your frequent visits are counted just as every other visit to your site by the statistics module. During a very productive phase, this can skew the statistics of your site quite a bit! <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
><P
>Contrary to what you might have expected, to prevent the statistics module from gathering hits from certain hosts, like your own one, you have to edit the header.php file, not any other file from the modules folder.</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>header.php and includes/my_header.php</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Do not confuse header.php, a file located in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> root directory, with the my_header.php file, located under the includes directory. The former contains standard <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> functions for the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> header, the latter  is there for your own, personal additions to the header.</P
></TD
></TR
></TABLE
></DIV
><P
>In your header.php file, find the code:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>include("includes/counter.php");</PRE
></FONT
></TD
></TR
></TABLE
><P
>and replace it with<A
NAME="AEN11547"
HREF="#FTN.AEN11547"
><SPAN
CLASS="footnote"
>[22]</SPAN
></A
>:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>global $admin;
if(!is_array($admin)) {
$admin_name = base64_decode($admin);
$admin_name = explode(":", $admin_name);
$admin_name = "$admin_name[0]";
} else {
$admin_name = "$admin[0]";
}
if($admin_name != "PutYourAdminNameHere") {
include("includes/counter.php");
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>Put your administrator name in place of the "PutYourAdminNameHere" string in the above code and visits by that administrator will not increase your statistics counter any more. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_smile.png"></SPAN
> </P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>How to block all administrators from the statistics counter</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>A simpler fix, which will block all administrators from the statistics counter, is:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>global $admin;
if(!$admin)
{
inlude("includes/counter.php");
}</PRE
></FONT
></TD
></TR
></TABLE
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="MODIFYING-MAINFILE-PHP"
></A
>Chapter 16. Modifying mainfile.php</H1
><P
>The mainfile.php file in the root directory of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> contains all commonly used functions and plays a crucial role in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. We devote this chapter to a closer investigation of this central file. We show:</P
><P
></P
><UL
><LI
><P
>How to allow special HTML tags (<A
HREF="#ALLOW-SPECIAL-HTML-TAGS"
>Section 16.1</A
>).</P
></LI
><LI
><P
>How to change the order of messages (<A
HREF="#CHANGE-ORDER-OF-MESSAGES"
>Section 16.2</A
>).</P
></LI
></UL
><DIV
CLASS="WARNING"
><P
></P
><TABLE
CLASS="WARNING"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/warning.png"
HSPACE="5"
ALT="Warning"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Warning</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Most of the changes discussed in this chapter have direct or indirect security implications (see <A
HREF="#SECURITY"
>Chapter 23</A
>). No line in mainfile.php was put there without some reason, the reason being often security-related. Whenever you comment a line that seems to do a too restrictive check on user input, for example, bear in mind that in the worst of all cases you may run the risk of being hacked because of the absence of exactly a check like that.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="ALLOW-SPECIAL-HTML-TAGS"
>16.1. How to allow special HTML tags</A
></H2
><P
>User input is checked and filtered automatically by <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. For this purpose the functions filter_text and check_html are used. filter_text checks and replaces bad words, then calls check_html, which in turn checks for HTML tags and strips them completely off, if the second parameter is &#8220;nohtml&#8221;.</P
><P
><A
HREF="#TAB-FILTER-TEXT"
>Table 16-1</A
> shows all modules that call filter_text, together with the line the call is made on. You can see that filter_text is used to filter</P
><P
></P
><UL
><LI
><P
>the text of a mail response in the WebMail module</P
></LI
><LI
><P
>the comments in the News module</P
></LI
><LI
><P
>the comments in the Reviews module</P
></LI
><LI
><P
>the subject, story and extended story text in the Submit_News module</P
></LI
><LI
><P
>the subject and comments in the Surveys module</P
></LI
><LI
><P
>the username and message in the Your_Account module</P
></LI
></UL
><P
><DIV
CLASS="TABLE"
><A
NAME="TAB-FILTER-TEXT"
></A
><P
><B
>Table 16-1. Calls to filter_text from <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules (v.6.8)</B
></P
><TABLE
BORDER="1"
RULES="all"
CLASS="CALSTABLE"
><COL
WIDTH="1*"
ALIGN="LEFT"
TITLE="COL0"><COL
WIDTH="1*"
ALIGN="LEFT"
TITLE="COL1"><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Module</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Line with call to filter_text</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/WebMail/readmail.php     </P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$res = filter_text($res); // Security fix by Ulf Harnhammar 2002</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/News/comments.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$comment = FixQuotes(nl2br(filter_text($comment)));</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/News/comments.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$subject = FixQuotes(filter_text($subject, "nohtml"));</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/News/comments.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$comment = FixQuotes(filter_text($comment));</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Reviews/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$comments = FixQuotes(nl2br(filter_text($comments)));</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Submit_News/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$subject = FixQuotes(filter_text($subject, "nohtml"));</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Submit_News/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$story = FixQuotes(nl2br(filter_text($story)));</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Submit_News/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$storyext = FixQuotes(nl2br(filter_text($storyext)));</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Submit_News/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$story = FixQuotes(filter_text($story));</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Submit_News/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$storyext = FixQuotes(filter_text($storyext));</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Surveys/comments.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$subject = FixQuotes(filter_text($subject, "nohtml"));</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Surveys/comments.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$comment = FixQuotes(nl2br(filter_text($comment)));</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Surveys/comments.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$comment = FixQuotes(filter_text($comment));</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Your_Account/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>filter_text($username);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Your_Account/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>if ($bio) { filter_text($bio); $bio = $EditedMessage; $bio = FixQuotes($bio); }</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Your_Account/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$the_message = FixQuotes(filter_text($the_message, "nohtml"));</P
></TD
></TR
></TBODY
></TABLE
></DIV
></P
><P
>check_html, in turn, is not only called from filter_text, but also in its own right. <A
HREF="#TAB-CHECK-HTML"
>Table 16-2</A
> shows all modules that call check_html and the line it is called on. You can see that check_html is called to check the HTML input in</P
><P
></P
><UL
><LI
><P
>the query string in the Downloads, Encyclopedia, Web Links and Search sections</P
></LI
><LI
><P
>the title, text, reviewer, URL text and comments in the Reviews module</P
></LI
><LI
><P
>user name, e-mail, various user info fields in the Your Account module</P
></LI
><LI
><P
>bodytext and comments in the Journal module</P
></LI
></UL
><P
><DIV
CLASS="TABLE"
><A
NAME="TAB-CHECK-HTML"
></A
><P
><B
>Table 16-2. Calls to check_html from <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules (v.6.8)</B
></P
><TABLE
BORDER="1"
RULES="all"
CLASS="CALSTABLE"
><COL
WIDTH="1*"
ALIGN="LEFT"
TITLE="COL0"><COL
WIDTH="1*"
ALIGN="LEFT"
TITLE="COL1"><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Module</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Line with call to filter_text</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Downloads/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$query = check_html($query, nohtml);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Encyclopedia/search.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$query = check_html($query, nohtml);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Encyclopedia/search.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$query = check_html($query, nohtml);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Reviews/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$title = stripslashes(check_html($title, "nohtml"));</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Reviews/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$text = stripslashes(check_html($text, ""));</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Reviews/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$reviewer = stripslashes(check_html($reviewer, "nohtml"));</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Reviews/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$url_title = stripslashes(check_html($url_title, "nohtml"));</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Reviews/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$title = stripslashes(FixQuotes(check_html($title, "nohtml")));</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Reviews/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$text = stripslashes(Fixquotes(urldecode(check_html($text, ""))));</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Reviews/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$comments = stripslashes(FixQuotes(check_html($comments)));</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Search/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$query = stripslashes(check_html($query, nohtml));</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Web_Links/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$query = check_html($query, nohtml);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Your_Account/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$username = check_html($username, nohtml);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Your_Account/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$user_email = check_html($user_email, nohtml);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Your_Account/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$user_email = check_html($user_email, nohtml);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Your_Account/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$femail = check_html($femail, nohtml);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Your_Account/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$user_website = check_html($user_website, nohtml);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Your_Account/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$bio = check_html($bio, nohtml);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Your_Account/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$user_avatar = check_html($user_avatar, nohtml);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Your_Account/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$user_icq = check_html($user_icq, nohtml);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Your_Account/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$user_aim = check_html($user_aim, nohtml);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Your_Account/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$user_yim = check_html($user_yim, nohtml);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Your_Account/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$user_msnm = check_html($user_msnm, nohtml);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Your_Account/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$user_occ = check_html($user_occ, nohtml);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Your_Account/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$user_from = check_html($user_from, nohtml);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Your_Account/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$user_interests = check_html($user_interests, nohtml);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Your_Account/index.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$realname = check_html($realname, nohtml);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Journal/display.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$row[bodytext]=check_html($row[bodytext], $strip);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>modules/Journal/display.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>$row[comment]=check_html($row[comment], $strip);</P
></TD
></TR
></TBODY
></TABLE
></DIV
></P
><P
>check_html uses the $AllowableHTML array that is defined in config.php. The idea is that only the tags that are included in the $AllowableHTML array should be allowed. However, even if you explicitly allow the img tag in $AllowableHTML, it will be stripped away by check_html (and by filter_text, which also calls it). The line that does this is </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$str = eregi_replace("&#60;[[:space:]]* img[[:space:]]*([^&#62;]*)[[:space:]]*&#62;", ", $str);</PRE
></FONT
></TD
></TR
></TABLE
><P
>You can comment out that line - though it is certainly a security issue (allowing people to post harmful code in img tags). </P
><P
>You can also comment out the line that eliminates all anchor attributes exept href in the &#60;a&#62; tag:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$str = eregi_replace("&#60;a[^&#62;]*href[[:space:]]*=[[:space:]]*\"?[[:space:]]*([^\" &#62;]*)[[:space:]]*\"?[^&#62;]*&#62;", '&#60;a href="\\1"&#62;', $str); # "</PRE
></FONT
></TD
></TR
></TABLE
><P
>These changes will affect the checks done at all places shown in both <A
HREF="#TAB-FILTER-TEXT"
>Table 16-1</A
> and  <A
HREF="#TAB-CHECK-HTML"
>Table 16-2</A
>, so again, be careful with security issues. You have to trust your users to give them this comfort.</P
><P
>Put the tags you want to allow in the $AllowableHTML array in the config.php file. Here is a (quite liberal) example:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$AllowableHTML = array("b"=&#62;1,
         "i"=&#62;1,
         "a"=&#62;2,
         "em"=&#62;1,
         "br"=&#62;1,
         "strong"=&#62;1,
         "blockquote"=&#62;1,
         "tt"=&#62;1,
         "li"=&#62;1,
         "ol"=&#62;1,
         "H1"=&#62;1,
         "H2"=&#62;1,
         "H3"=&#62;1,
         "H4"=&#62;1,
         "center"=&#62;1,
         "img"=&#62;2,
         "alt"=&#62;1,
         "table"=&#62;2,
         "tr"=&#62;2,
         "td"=&#62;2,
         "p"=&#62;2,
         "div"=&#62;2,
         "font"=&#62;2,
         "p"=&#62;1,
         "p"=&#62;1,
         "ul"=&#62;1);</PRE
></FONT
></TD
></TR
></TABLE
><P
>The numbers that appear next to each tag have the following meaning:</P
><P
></P
><UL
><LI
><P
>a 1 means the tag does not accept any attributes</P
></LI
><LI
><P
>a 2 indicates that the tag may also contain attributes</P
></LI
></UL
><P
>See also <A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CHANGE-ORDER-OF-MESSAGES"
>16.2. How to change the order of messages</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MESSAGES-2"
></A
><P
><B
>Figure 16-1.    Administration panel: Messages.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/messages.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Messages.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The default for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> is to display messages in ascending order of mid (the id number for each message). You can use Add Story (<A
HREF="#FIG-STORIES"
>Figure 7-2</A
>) to post articles on your site and these will appear in reverse order, i.e. last posted at the top (see also <A
HREF="#ORDER-ARTICLES-IN-SECTIONS"
>Section 18.9.1</A
>, on how to order articles in Sections and <A
HREF="#ORDER-ARTICLES-IN-STORIES-ARCHIVE"
>Section 18.11.1</A
>, on how to order articles in the Stories Archive). Thus you could have a main &#8220;Welcome Message&#8221; at the top which will always be there as a home page, followed by a series of announcements appearing in reverse order below the Welcome Message. But what happens if you don't use &#8220;Add Story&#8221; to add articles, but would rather like to use Messages (<A
HREF="#FIG-MESSAGES"
>Figure 7-17</A
>) for communicating your news?</P
><P
>If you really want to use Messages and have them appear in reverse order (last one at the top), you need to edit mainfile.php using a decent editor (see <A
HREF="#EDITING-PHP-NUKE-FILES"
>Chapter 11</A
>).</P
><P
>At around line 334 in mainfile.php, in function message_box(), change</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$sql = "SELECT mid, title, content, date, expire, view 
FROM ".$prefix."_message WHERE active='1' $querylang";</PRE
></FONT
></TD
></TR
></TABLE
><P
>to</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$sql = "SELECT mid, title, content, date, expire, view 
FROM ".$prefix."_message WHERE active='1' $querylang ORDER by mid DESC";</PRE
></FONT
></TD
></TR
></TABLE
><P
>and this will display your messages in reverse order (last one at the top). See also <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=339"
TARGET="_top"
>How to reverse the order of Messages in the Homepage</A
>.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CHANGE-DURATION-OF-PUBLIC-BROADCAST-MESSAGE"
>16.3. How to change the duration of a public broadcast message</A
></H2
><P
>So you want the public broadcast message to show for a longer/shorter period? There is a simple solution (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=126"
TARGET="_top"
>How to change the duration of a public broadcast message</A
>):</P
><P
>You can increase the time the message will be displayed by editing the following lines in mainfile.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ref_date = $tdate+600;</PRE
></FONT
></TD
></TR
></TABLE
><P
>and </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>setcookie("p_msg",$mid,time()+600);</PRE
></FONT
></TD
></TR
></TABLE
><P
>Adjust the 600 to a value that matches the time you want the message displayed.</P
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="MODIFYING-PHP-NUKE-BLOCKS"
></A
>Chapter 17. Modifying <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks</H1
><P
>In this chapter we show how to <EM
>modify</EM
> <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks. If you are interested in <EM
>creating</EM
> <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks, read <A
HREF="#BLOCK-CREATION"
>Section 20.2</A
>. We cover the topics:</P
><P
></P
><UL
><LI
><P
>How to change a buggy block (<A
HREF="#CHANGE-BUGGY-BLOCK"
>Section 17.1</A
>),</P
></LI
><LI
><P
>How to build custom module blocks (<A
HREF="#BUILD-CUSTOM-MODULE-BLOCKS"
>Section 17.2</A
>),</P
></LI
><LI
><P
>How to build RSS blocks with variable number of news items (<A
HREF="#BUILD-RSS-BLOCKS-WITH-VARIABLE-NEWS-NUMBER"
>Section 17.3</A
>),</P
></LI
><LI
><P
>How to get scrolling headlines in blocks (<A
HREF="#SCROLLING-HEADLINES-IN-BLOCKS"
>Section 17.4</A
>).</P
></LI
></UL
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CHANGE-BUGGY-BLOCK"
>17.1. How to change a buggy block</A
></H2
><P
>You activated a buggy <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block. Now, your site is broken and you get a blank page, or you only see errors and the administration panel is unreachable because the block breaks your page's design...<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
></P
><P
>There is a very simple solution to this very annoying problem (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=17559"
TARGET="_top"
>Site crashed when block was created</A
>): just replace the broken block, say block-Broken.php, with a script that does not contain anything but the following line:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php $content=""; ?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Then, the administration panel should be reachable and you can deactivate the offending block.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="BUILD-CUSTOM-MODULE-BLOCKS"
>17.2. How to build custom module blocks</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MODULES-BLOCK"
></A
><P
><B
>Figure 17-1.     The standard Modules block
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/modules-block.png"><DIV
CLASS="CAPTION"
><P
> The standard Modules block</P
></DIV
></P
></DIV
></DIV
></P
><P
>A module block is a block that displays links to all available modules of a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site (<A
HREF="#FIG-MODULES-BLOCK"
>Figure 17-1</A
>). It is the block that appears at the top of the left column, with the standard title &#8220;Modules&#8221;. The module block is a standard <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block, for its construction you have to follow the same rules as for any other block (see <A
HREF="#BLOCK-CREATION"
>Section 20.2</A
>). It is thus fairly easy to construct your own module block, if you are not satisfied with the standard one. Below are some examples:</P
><P
></P
><UL
><LI
><P
>Simple module block (<A
HREF="#SIMPLE-MODULE-BLOCK"
>Section 17.2.1</A
>),</P
></LI
><LI
><P
>Treemenu block (<A
HREF="#TREEMENU-BLOCK"
>Section 17.2.2</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="SIMPLE-MODULE-BLOCK"
>17.2.1. Simple module block</A
></H3
><P
>The links that are inside the standard <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module block are constructed dynamically, using information that is available about the modules in the database. For example, to present only active modules in the links, the block (located in blocks/block-Modules.php) checks the &#8220;active&#8221; field of the $prefix_modules table (which is table nuke_modules, if $prefix is left to the standard &#8220;nuke&#8221; in config.php, see <A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$sql = "SELECT title, custom_title FROM ".$prefix."_modules 
WHERE active='1' AND inmenu='0' ORDER BY title ASC"; </PRE
></FONT
></TD
></TR
></TABLE
><P
>As we can easily read in the SELECT query above, only modules with the &#8220;active&#8221; bit set to 1 are selected. But we also see that the order in which they are selected is the standard ascending lexicographic order of the modules' title (ORDER BY title ASC). If we wish a different ordering, we are left with only a few possibilities:</P
><P
></P
><UL
><LI
><P
>Change the order from ascending (ASC) to descending (DESC):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$sql = "SELECT title, custom_title FROM ".$prefix."_modules 
WHERE active='1' AND inmenu='0' ORDER BY title DESC"; </PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Change the field on which the ORDER BY clause is applied, e.g. use custom_title instead of title:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$sql = "SELECT title, custom_title FROM ".$prefix."_modules 
WHERE active='1' AND inmenu='0' ORDER BY custom_title ASC"; </PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Add an extra field to the $prefix_modules table, populate it with custom values (e.g. &#8220;1&#8221; for the module we want to be the first in the list, , &#8220;2&#8221; for the second, &#8220;3&#8221; for the third etc. if we decided to use a numeric field ) for each module, and sort in ascending order of this new field:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$sql = "SELECT title, custom_title FROM ".$prefix."_modules 
WHERE active='1' AND inmenu='0' ORDER BY new_field ASC";</PRE
></FONT
></TD
></TR
></TABLE
></LI
></UL
><P
>But if we wish a custom grouping of the modules links, we will have to write our own modules block. You can use the following code as a starting point for your own creations. This script will display certain links only when an admin or user is logged in. Just name it block-menuSample.php and put in the blocks folder, deactivate the block-Modules.php and activate this one (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=10792"
TARGET="_top"
>Different links - some for registered users only</A
> and <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=14816"
TARGET="_top"
>How would I add a clickable link in a Modules Block?</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if (eregi("block-menuSample.php",$PHP_SELF)) {
Header("Location: index.php");  
die(); 
}
Global $user, $admin; 
$title = "Main Menu";
$content = "
&#60;font size=\"1\" face=\"Verdana, Arial, Helvetica, sans-serif\"&#62;
&#60;B&#62;&#60;u&#62;Navigation&#60;/u&#62;
&#60;BR&#62; 
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62; 
&#60;a href=index.php&#62;Start Page&#60;/a&#62;&#60;br&#62;&#60;br&#62;
&#60;u&#62;Information&#60;/u&#62;&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62; 
&#60;A href=\"modules.php?name=News&#38;file=index\"&#62;News&#60;/A&#62;&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=aboutus\"&#62;About us&#60;/A&#62;&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=somefolder&#38;file=index\"&#62;Entry with Some word&#60;/A&#62;&#60;BR&#62;
&#60;BR&#62;
&#60;u&#62;Other things&#60;/u&#62;
&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=Web_Links
&#38;amp;file=index&#38;amp;l_op=viewlink&#38;amp;cid=1\"&#62;Links&#60;/A&#62;&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=My_eGallery\"&#62;All sorts of Pictures&#60;/A&#62;&#60;br&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=Reviews\"&#62;Reviews&#60;/A&#62;&#60;BR&#62;
&#60;BR&#62;
&#60;u&#62;Interact&#60;/u&#62;
&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=GuestBook\"&#62;Guestbook&#60;/A&#62;&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=Feedback\"&#62;Feedback&#60;/A&#62;&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=Recommend_Us\"&#62;Recommend Us&#60;/A&#62;&#60;BR&#62;
&#60;BR&#62;
&#60;u&#62;Misc.&#60;/u&#62;
&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=Web_Links\"&#62;Links&#60;/A&#62;&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=FAQ\"&#62;FAQ&#60;/A&#62;&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=Web_Links
&#38;amp;file=index&#38;amp;l_op=AddLink\"&#62;Add A Link&#60;/A&#62;&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=Downloads\"&#62;Downloads&#60;/A&#62;&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=Statistics\"&#62;Site Statistics&#60;/A&#62;&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=HeadLines\"&#62;News Headlines&#60;/A&#62;&#60;BR&#62;
&#60;BR&#62;
//******************************************
//Below is for users and admins ONLY!!! 
//******************************************
&#60;u&#62;User Control Panel&#60;/u&#62;
&#60;BR&#62;";  
if (!IsSet($user))
{;
$content .= "
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=Your_Account\"&#62;Reg. Users Login. &#60;/A&#62;&#60;br&#62;";
}
if ((IsSet($user)) or (IsSet($admin)))
{;
$content .= "
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=Your_Account\"&#62;Your Account&#60;/A&#62;&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=Your_Account&#38;amp;op=edituser\"&#62;Edit Profile&#60;/A&#62;&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=Members_Photo_Upload\"&#62;Members Photo upload&#60;/A&#62;&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=Members_List\"&#62;View Member List&#60;/A&#62;&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=Your_Account&#38;amp;op=logout\"&#62;logout&#60;/A&#62;&#60;BR&#62;
&#60;BR&#62;
&#60;u&#62;Private Messages&#60;/u&#62;
&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=Private_Messages\"&#62;View Messages&#60;/A&#62;&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=Private_Messages
&#38;amp;file=reply&#38;amp;send=1\"&#62;Compose A Message&#60;/A&#62;&#60;BR&#62;
";
};
//***************************************
//ENDS HERE
//***************************************
$content .= "
&#60;BR&#62;
&#60;u&#62;Send Content&#60;/u&#62;
&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=Submit_News\"&#62;Submit News&#60;/A&#62;&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=Reviews&#38;amp;rop=write\"&#62;Write A Review&#60;/A&#62;&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=Web_Links
&#38;amp;file=index&#38;amp;l_op=AddLink\"&#62;Add A Link&#60;/A&#62;&#60;BR&#62;
&#60;STRONG&#62;&#60;BIG&#62;·&#60;/BIG&#62;&#60;/STRONG&#62;
&#60;A href=\"modules.php?name=My_eGallery
&#38;amp;file=index&#38;amp;do=upload\"&#62;Add images to the Gallery&#60;/A&#62;&#60;BR&#62;
&#60;BR&#62;
&#60;/font&#62;
&#60;/B&#62;
&#60;HR size=3&#62;
";
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="TREEMENU-BLOCK"
>17.2.2. Treemenu block</A
></H3
><P
>A commonly asked question in <A
HREF="http://phpnuke.org"
TARGET="_top"
>PHPNuke</A
> forums (see for example <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?mode=viewtopic&#38;t=11926"
TARGET="_top"
>Menu Hack Needed (show different menu or block depending on the category)</A
>), is if there exists some Module block out there that displays a dynamic view of the available modules. The webmaster needs a functionality that will allow for the display of only certain module links, depending on, say, the interests, access level, or preferences of the viewer. </P
><P
>A typical Module block, as shipped with the standard PHPNuke package, looks as in <A
HREF="#FIG-MODULES-BLOCK-2"
>Figure 17-2</A
>.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MODULES-BLOCK-2"
></A
><P
><B
>Figure 17-2.     The standard Modules block.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/modules-block.png"><DIV
CLASS="CAPTION"
><P
> The standard Modules block.</P
></DIV
></P
></DIV
></DIV
></P
><P
>What we need instead is a module block that displays some links (to modules, or generally, to pages) when a certain condition is met (say, when <A
HREF="http://www.karakas-online.de/EN-Book/preinstalled-modules.html"
TARGET="_top"
>Category</A
> A was previously chosen) and some other ones when a different condition is true (e.g. when Category B was chosen).</P
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="GENERAL-IDEA"
>17.2.2.1. The general idea</A
></H4
><P
>To met the above requirements, the <A
HREF="http://www.karakas-online.de/myTreemenu/"
TARGET="_top"
>Treemenu block for PHP-Nuke</A
> adapts the well-known <A
HREF="http://www.bitbuddha.com/php/treemenu/"
TARGET="_top"
>Treemenu</A
>  concept to a PHPNuke Block and creates a PHPNuke block containing a Treemenu which looks as in <A
HREF="#FIG-TREEMENU"
>Figure 17-3</A
>.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-TREEMENU"
></A
><P
><B
>Figure 17-3.    Treemenu Block.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/treemenu.png"><DIV
CLASS="CAPTION"
><P
>Treemenu Block.</P
></DIV
></P
></DIV
></DIV
></P
><P
>When the user clicks on an item like &#8220;Links&#8221;, the subtree under this item is unfolded (<A
HREF="#FIG-TREEMENU1"
>Figure 17-4</A
>).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-TREEMENU1"
></A
><P
><B
>Figure 17-4.    Treemenu Block with &#8220;Links&#8221; expanded.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/treemenu1.png"><DIV
CLASS="CAPTION"
><P
>Treemenu Block with &#8220;Links&#8221; expanded.</P
></DIV
></P
></DIV
></DIV
></P
><P
>A further click on the subcategory &#8220;My work&#8221; will reveal another level of groups (<A
HREF="#FIG-TREEMENU2"
>Figure 17-5</A
>).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-TREEMENU2"
></A
><P
><B
>Figure 17-5.    Treemenu Block with &#8220;My work&#8221; expanded.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/treemenu2.png"><DIV
CLASS="CAPTION"
><P
>Treemenu Block with &#8220;My work&#8221; expanded.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Finally, a click on a subsubcategory like &#8220;Linux&#8221; will unfold the &#8220;leaves&#8221; of the Treemenu (<A
HREF="#FIG-TREEMENU3"
>Figure 17-6</A
>).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-TREEMENU3"
></A
><P
><B
>Figure 17-6.    Treemenu Block with &#8220;Linux&#8221; expanded.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/treemenu3.png"><DIV
CLASS="CAPTION"
><P
>Treemenu Block with &#8220;Linux&#8221; expanded.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Of course, the naming and nesting of categories and/or items is fully arbitrary. The above functionality can easily be adapted to suit more advanced needs too (see <A
HREF="http://www.karakas-online.de/myTreemenu/refinements.html"
TARGET="_top"
>refinements of the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Treemenu</A
>).</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="WHAT-IS-TREEMENU"
>17.2.2.2. What is Treemenu</A
></H4
><P
>The Treemenu block makes use of a Treemenu in a PHPNuke Block. Treemenu is a <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> class created by Bjorge Dijkstra (original script to be found <A
HREF="http://www.hotscripts.com/Detailed/3704.html"
TARGET="_top"
>Treemenu Class from Bjorge</A
>) and adapted by Denny Shimkoski (his version to be found in <A
HREF="http://www.bitbuddha.com/php/treemenu/"
TARGET="_top"
>Treemenu from Denny</A
>). Chris have fixed some bugs in the latter one and integrated it into a <A
HREF="http://www.karakas-online.de/phpnuke/block-Treemenu.tgz"
TARGET="_top"
>Treemenu block for PHP-Nuke</A
>.</P
><P
>There are two ways you can use the Treemenu class - Chris uses the one that takes as input a <A
HREF="./sitemap.txt"
TARGET="_top"
>simple text file</A
> and creates a tree menu, in a style that most users are familiar with from a graphical file manager (see <A
HREF="#FIG-TREEMENU"
>Figure 17-3</A
>). Navigation through such a tree is done intuitively by expanding and collapsing the various tree levels by clicking on the node icons (the icons are discussed in <A
HREF="http://www.karakas-online.de/myTreemenu/refinements.html"
TARGET="_top"
>custom node icons for the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Treemenu</A
>).</P
><P
>To create a Treemenu, once you have written the input text file with your favorite text editor (see <A
HREF="http://www.karakas-online.de/myTreemenu/what-is-treemenu.html#INPUT-FILE-METHOD"
TARGET="_top"
>input file method for the Treemenu</A
>) or used the <A
HREF="http://www.karakas-online.de/myTreemenu/what-is-treemenu.html#ALTERNATIVE-METHOD"
TARGET="_top"
>alternative method to fill the nodes and leaves of the Treemenu</A
>, you just have to write this 3-liner to get it up and running:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>include("blocks/treemenu/treemenu.inc");
$tree = new TreeMenu("a", "blocks/treemenu/sitemap.txt");
$tree-&#62;show();</PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Note</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>In order to be able to display the output of the above code in a PHPNuke Block, we have to capture it in an output buffer with the ob_start(), ob_get_contents()  and ob_end_clean() mechanism:
<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>ob_start();
include("blocks/treemenu/treemenu.inc");
$tree = new TreeMenu("a", "blocks/treemenu/sitemap.txt");
$tree-&#62;show();
$output = ob_get_contents();
ob_end_clean();
$content = $output;</PRE
></FONT
></TD
></TR
></TABLE
></P
></TD
></TR
></TABLE
></DIV
><P
>See <A
HREF="http://www.karakas-online.de/myTreemenu/"
TARGET="_top"
>Treemenu block for PHP-Nuke</A
> for more information of how to use the Treemenu block as a module block for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>.</P
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="BUILD-RSS-BLOCKS-WITH-VARIABLE-NEWS-NUMBER"
>17.3. How to build RSS blocks with variable number of news items</A
></H2
><P
>If you have created an RSS block from the block administration fuction of the administration panel, you may have noticed that, notably after some change on a previously working RSS block (for example, in the title, or the refresh time), or even from the very start, you get the error:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Currently there is a problem with headlines from this site</PRE
></FONT
></TD
></TR
></TABLE
><P
>This is not always due to some error on your part - it is a bug too. Often, the only solution would be to delete the block and add it anew. </P
><P
>The problem is in the file admin/modules/blocks.php. There, the problematic code is</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>for ($i=0;$i&#60;10;$i++) {
    $link = ereg_replace(".*&#60;link&#62;","",$items[$i]);
    $link = ereg_replace("&#60;/link&#62;.*","",$link);
    $title2 = ereg_replace(".*&#60;title&#62;","",$items[$i]);
    $title2 = ereg_replace("&#60;/title&#62;.*","",$title2);
    if ($items[$i] == "" AND $cont != 1) {
        $content = "";
    } else {    
        if (strcmp($link,$title2) AND $items[$i] != "") {
            $cont = 1;  
            $content .= "&#60;strong&#62;&#60;big&#62;&#38;middot;&#60;/big&#62;&#60;/strong&#62;&#38;nbsp;&#60;a href=\"$link\" target=\"new\"&#62;$title2&#60;/a&#62;&#60;br&#62;\n";
        }           
    }           
}           </PRE
></FONT
></TD
></TR
></TABLE
><P
>which has the number of news items (10) hardcoded into it. The problem is caused by the fact that, if there aren't that many headlines being returned, and in many unlucky cases, there aren't, you will either get an array out of bounds error, or nothing will be returned, and the content of the block will be set to equal nothing. </P
><P
>You could fix that by changing the &#8220;10&#8221; in the code above to &#8220;5&#8221;, for example. However, that fix wouldn't work for a site that had only three headlines in their RSS file. What needs to happen is to modify the </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>        $content = "";
to
        $content += "";</PRE
></FONT
></TD
></TR
></TABLE
><P
>For a modification of the mainfile.php and admin/modules/blocks.php files that also allows for a variable number of items to be chosen from the administration panel individually for each RSS block, see <A
HREF="http://www.nickpadley.com/modules.php?name=Downloads&#38;d_op=getit&#38;li d=17"
TARGET="_top"
>Digital Nick Downloads</A
>, for a discussion thread on this bug, see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=13495"
TARGET="_top"
>Problems when saving RSS block</A
>.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="SCROLLING-HEADLINES-IN-BLOCKS"
>17.4. How to get scrolling headlines in blocks</A
></H2
><P
>You may have noticed those scrolling headlines in blocks of some sites. Perhaps you abhor them, because they distract you from reading the context, or because the scrolling effect is not supported by all browsers. But if you are fascinated by this effect and wondering how to achieve it in your own <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> RSS blocks, here's how:</P
><P
>In mainfile.php, find the code for the headlines() function:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>function headlines($bid, $cenbox=0)</PRE
></FONT
></TD
></TR
></TABLE
><P
>There, near the end, replace the lines</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($cenbox == 0) {
    themesidebox($title, $content);
} else {
    themecenterbox($title, $content);
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>with the lines</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($cenbox == 0) {
    $content = "&#60;marquee scrollamount=\"2\" direction=\"up\" 
                 loop=\"true\"&#62;$content&#60;/marquee&#62;";
    themesidebox($title, $content);
} else {
    $content = "&#60;marquee scrollamount=\"2\" direction=\"up\" 
                 loop=\"true\"&#62;$content&#60;/marquee&#62;";
    themecenterbox($title, $content);
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>Enclosing the old $content variable in the marquee code and assigning it to the $content variable again before the call to the themesidebox or themecenterbox functions, gives the desired scrolling effect for our RSS headlines.</P
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="MODIFYING-PHP-NUKE-MODULES"
></A
>Chapter 18. Modifying <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules</H1
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MODULES-5"
></A
><P
><B
>Figure 18-1.    Administration panel: Modules.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/modules.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Modules.</P
></DIV
></P
></DIV
></DIV
></P
><P
>In this chapter we will talk about <EM
>modifying</EM
> <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules. If you are interested in creating <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules, read <A
HREF="#CREATING-MODULES"
>Chapter 21</A
>. We will talk about:</P
><P
></P
><UL
><LI
><P
>Modifying any <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module (<A
HREF="#MODIFYING-ANY-PHP-NUKE-MODULE"
>Section 18.1</A
>),</P
></LI
><LI
><P
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Homepage (<A
HREF="#MODIFYING-PHP-NUKE-HOMEPAGE"
>Section 18.2</A
>),</P
></LI
><LI
><P
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> FAQ module (<A
HREF="#MODIFYING-PHP-NUKE-MODULE-FAQ"
>Section 18.3</A
>),</P
></LI
><LI
><P
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Reviews module (<A
HREF="#MODIFYING-PHP-NUKE-MODULE-REVIEWS"
>Section 18.4</A
>),</P
></LI
><LI
><P
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Web_Links module (<A
HREF="#MODIFYING-PHP-NUKE-MODULE-WEB-LINKS"
>Section 18.5</A
>),</P
></LI
><LI
><P
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Your_Account module (<A
HREF="#MODIFYING-PHP-NUKE-MODUKE-YOUR-ACCOUNT"
>Section 18.6</A
>),</P
></LI
><LI
><P
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> News module (<A
HREF="#MODIFYING-PHP-NUKE-NEWS-MODULE"
>Section 18.7</A
>),</P
></LI
><LI
><P
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Submit News module (<A
HREF="#MODIFYING-PHP-NUKE-SUBMIT-NEWS-MODULE"
>Section 18.8</A
>),</P
></LI
><LI
><P
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Sections module (<A
HREF="#MODIFYING-PHP-NUKE-SECTIONS-MODULE"
>Section 18.9</A
>),</P
></LI
><LI
><P
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Downloads module (<A
HREF="#MODIFYING-PHP-NUKE-DOWNLOADS-MODULE"
>Section 18.10</A
>),</P
></LI
><LI
><P
>Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Stories Archive module (<A
HREF="#MODIFYING-PHP-NUKE-STORIES-ARCHIVE"
>Section 18.11</A
>).</P
></LI
></UL
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MODIFYING-ANY-PHP-NUKE-MODULE"
>18.1. Modifying any <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module</A
></H2
><P
>Talking about modifying any <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module in general, we will show:</P
><P
></P
><UL
><LI
><P
>How to hide the right blocks (<A
HREF="#HIDE-RIGHT-BLOCKS"
>Section 18.1.1</A
>),</P
></LI
><LI
><P
>How to change a buggy module (<A
HREF="#CHANGE-BUGGY-MODULE"
>Section 18.1.2</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="HIDE-RIGHT-BLOCKS"
>18.1.1. How to hide the right blocks</A
></H3
><P
>If your module needs more space than is available in the central column of the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> layout, you may want to hide the right column of blocks. This is accomplished very easily from within the code of any module: find the line </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$index = 1;</PRE
></FONT
></TD
></TR
></TABLE
><P
>and change it to:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$index = 0;   // 0 : do not show right blocks - 1:show right blocks</PRE
></FONT
></TD
></TR
></TABLE
><P
>Of course, if the line is not there, then $index is already 0, so your module already hides the right blocks.<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>How to hide the left blocks</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
> If you want to hide the left blocks, you have to modify the theme header. See <A
HREF="#HIDE-LEFT-BLOCKS"
>Section 14.3.9</A
>.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CHANGE-BUGGY-MODULE"
>18.1.2. How to change a buggy module</A
></H3
><P
>You activated a buggy <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module. Now, your site is broken and you get a blank page, or you only see errors and the administration panel is unreachable...<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
></P
><P
>Connect to the MySQL database and change the value of the "active" field in the $prefix_modules table to 0 for that module's entry. Example (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=17559"
TARGET="_top"
>Site crashed when block was created</A
> and <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=375"
TARGET="_top"
>logout-Fehler</A
>): suppose the broken module is Mod_Broken, your $prefix is "nuke" and the value of the module id, "mid", field for the Mod_Broken module is "7"):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>UPDATE nuke_modules SET active = '0' WHERE mid = '7';</PRE
></FONT
></TD
></TR
></TABLE
><P
>or (if you prefer to select by title and not by module id)</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>UPDATE nuke_modules SET active = '0' WHERE title = 'Mod_Broken';</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MODIFYING-PHP-NUKE-HOMEPAGE"
>18.2. Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Homepage</A
></H2
><P
>The <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Homepage is the &#8220;Home&#8221; module. The Home module is chosen in the modules administration panel. We show:</P
><P
></P
><UL
><LI
><P
>How to redirect users to the Login page (<A
HREF="#REDIRECT-USERS-TO-LOGIN-PAGE"
>Section 18.2.1</A
>),</P
></LI
><LI
><P
>How to restrict the Homepage only to registered users (<A
HREF="#RESTRICT-HOMEPAGE-TO-REGISTERED-USERS"
>Section 18.2.2</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="REDIRECT-USERS-TO-LOGIN-PAGE"
>18.2.1. How to redirect users to the Login page</A
></H3
><P
>If you want your users to be redirected straight to the Login page, rather than the Homepage, do the following:</P
><P
>Right at the begining of the index.php file , add this code after the 'require_once(&#8220;mainfile.php&#8221;);' line, like this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>require_once("mainfile.php");
global $user;
if(!is_user($user)) {
  header("Location: modules.php?name=Your_Account");
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>This will send anyone who is not logged in (or registered) to the Your Account (Login) page. See <A
HREF="#REDIRECT-USERS-TO-HOMEPAGE"
>Section 18.6.1</A
> for the inverse procedure &#8212; but don't try both. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
><P
>See <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=82"
TARGET="_top"
>how to redirect from forms in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block</A
> for redirection from other places, like blocks.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="RESTRICT-HOMEPAGE-TO-REGISTERED-USERS"
>18.2.2. How to restrict the Homepage only to registered users</A
></H3
><P
>Suppose that you have set up the News module as the &#8220;Homepage module&#8221; of your PHP-Nuke, but you want the news articles to be visible only to registered users. Can this be done?</P
><P
>Well, not exactly. Since you want the News module to be visible only to registered users, you cannot have it in the "Home". This means you must put a different module in Home (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=377"
TARGET="_top"
>hide articles from logged out users</A
>). You can do this from the "Put in Home" link in the modules table shown in the modules administration panel (<A
HREF="#ADMINISTRATION-FUNCTIONS"
>Section 7.1</A
>, <A
HREF="#FIG-MODULES-ADMIN"
>Figure 7-19</A
>).</P
><P
>Once the News module is not in Home anymore, you can edit it and choose that it be visible only by the registered users.</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The "Who can View This?" selection box is not available, as long as the module remains the "Home" module of your P HP-Nuke installation. That's why you can't restrict the visibility of the Home module, no matter which module this is. T he reason for this is that it makes little sense to have a Home module and restrict its availability only to registered users, unless you want your site to be generally available only to registered members. </P
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MODIFYING-PHP-NUKE-MODULE-FAQ"
>18.3. Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> FAQ module</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-FAQ-3"
></A
><P
><B
>Figure 18-2.    Administration panel: FAQ.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/faq.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: FAQ.</P
></DIV
></P
></DIV
></DIV
></P
><P
>In this section we modify the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> FAQ module:</P
><P
></P
><UL
><LI
><P
>How to add more than 127 FAQ answers (<A
HREF="#MORE-THAN-127-FAQ-ANSWERS"
>Section 18.3.1</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="MORE-THAN-127-FAQ-ANSWERS"
>18.3.1. How to add more than 127 FAQ answers</A
></H3
><P
>You have 127 Q&#38;A. You cannot add more, if you delete one, you can add one.</P
><P
>Cause: Looking at the sql/nuke.sql script that creates the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> tables on installation, we see the following for the structure of the nuke_faqAnswer table:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># 
# Table structure for table `nuke_faqAnswer`
# 
  
CREATE TABLE nuke_faqAnswer ( 
  id tinyint(4) NOT NULL auto_increment,
  id_cat tinyint(4) NOT NULL default '0',
  question varchar(255) default ",
  answer text,
  PRIMARY KEY  (id),
  KEY id (id), 
  KEY id_cat (id_cat)
) TYPE=MyISAM;</PRE
></FONT
></TD
></TR
></TABLE
><P
>From the <A
HREF="http://www.mysql.com/doc/en/Column_types.html"
TARGET="_top"
>MySQL manual on column types</A
>, we see:</P
><A
NAME="AEN12479"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>TINYINT[(M)] [UNSIGNED] [ZEROFILL]</P
><P
>A very small integer. The signed range is -128 to 127. The unsigned range is 0 to 255.</P
></BLOCKQUOTE
><P
>so that tinyint is a very small integer indeed in this case.</P
><P
>Solution: Change the length of id and id_cat of nuke_faqAnswer. You can do this with phpMyAdmin, or by logging into MySQL from the console and, after choosing the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> database ("use xxxx;"), by typing:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>alter table nuke_faqAnswer modify id SMALLINT unsigned;
alter table nuke_faqAnswer modify id_cat SMALLINT unsigned;</PRE
></FONT
></TD
></TR
></TABLE
><P
>See also <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=13841"
TARGET="_top"
>FAQ problem</A
>.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MODIFYING-PHP-NUKE-MODULE-REVIEWS"
>18.4. Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Reviews module</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-REVIEWS-2"
></A
><P
><B
>Figure 18-3.    Administration panel: Reviews.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/reviews.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Reviews.</P
></DIV
></P
></DIV
></DIV
></P
><P
>In this section we modify the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Reviews module:</P
><P
></P
><UL
><LI
><P
>How to allow only registered users to enter a review (<A
HREF="#ALLOW-ONLY-REGISTERED-USERS-TO-REVIEW"
>Section 18.4.1</A
>),</P
></LI
><LI
><P
>How to choose images from a dropdown list (<A
HREF="#CHOOSE-IMAGES-FROM-DROPDOWN-LIST"
>Section 18.4.2</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="ALLOW-ONLY-REGISTERED-USERS-TO-REVIEW"
>18.4.1. How to allow only registered users to enter a review</A
></H3
><P
>If you want only your registered users to be able to enter a review, you can achieve it with the following simple change:</P
><P
>Edit the modules/Reviews/index.php file and find the write_review() function:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>function write_review() {
    global $admin, $sitename, $user, $cookie, $prefix, $user_prefix, 
    $currentlang, $multilingual, $dbi, $module_name;
    include ('header.php');
    OpenTable();</PRE
></FONT
></TD
></TR
></TABLE
><P
>Add the following check after the call to OpenTable():</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    if (!is_user($user)) {
        echo "You need to be 
        &#60;a href=\"modules.php?name=Your_Account\"&#62;logged in&#60;/a&#62; or 
        &#60;a href=\"modules.php?name=Your_Account&#38;op=new_user\"&#62;become a member&#60;/a&#62; 
        to submit reviews.";
    } else {</PRE
></FONT
></TD
></TR
></TABLE
><P
>This check will only allow registered users to continue with a review, while pointing others to the login or register page. Of course, the IF statement has to be closed - just put a } at the end of the function, as shown below:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    CloseTable();
    include ("footer.php");
}
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>Unregistered users will be able to view reviews, but only site members will be able to submit new ones.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Tip</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>This simple check can be used to restrict access to registered users in any module that does not offer this functionality, not only in Reviews. </P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CHOOSE-IMAGES-FROM-DROPDOWN-LIST"
>18.4.2. How to choose images from a dropdown list</A
></H3
><P
>Isn't it more comfortable being able to choose the image for your review (if you are an administrator) from a dropdown list that offers the names of all available images in your image directory, rather than having to enter the full URL to the image each time? You could easily incorporate this functionality if you just cut and pasted the code from the admin/modules/topics.php file. The functionality is in the Topics module already - you don't need to write full URLs to the topics icons, do you?<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
><P
>The relevant part in the Reviews to introduce the code from the Topics module is the following code in modules/Reviews/index.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    if(is_admin($admin)) {
        echo "
        &#60;b&#62;"._RIMAGEFILE.":&#60;/b&#62;&#60;br&#62;
        &#60;input type=\"text\" name=\"cover\" size=\"40\" maxlength=\"100\"&#62;&#60;br&#62;
        &#60;i&#62;"._RIMAGEFILEREQ."&#60;/i&#62;&#60;br&#62;&#60;br&#62;
        ";
    }
Replace it with:
    if(is_admin($admin)) {
        echo "
        &#60;b&#62;"._RIMAGEFILE.":&#60;/b&#62;&#60;br&#62;
        echo "&#60;select name="cover"&#62;";
        $path1 = explode ("/", "images/reviews/");
        $path = "$path1[0]/$path1[1]";
        $handle=opendir($path);
        while ($file = readdir($handle)) {
          if ( (ereg("^([_0-9a-zA-Z]+)([.]{1})([_0-9a-zA-Z]{3})$",$file)) 
            AND $file != "AllTopics.gif") {
            $tlist .= "$file ";
          }
        }
        closedir($handle);
        $tlist = explode(" ", $tlist);
        sort($tlist);
        for ($i=0; $i &#60; sizeof($tlist); $i++) {
          if($tlist[$i]!="") {
            if ($topicimage == $tlist[$i]) {
              $sel = "selected";
            } else {
              $sel = "";
            }
            echo "&#60;option name="cover" value="$tlist[$i]" $sel&#62;$tlist[$i]n";
          }
        }
        echo "&#60;/select&#62;&#60;br&#62;";
        echo "&#60;i&#62;"._RIMAGEFILEREQ."&#60;/i&#62;&#60;br&#62;&#60;br&#62;
        ";
    }</PRE
></FONT
></TD
></TR
></TABLE
><P
>The part of code that was stolen from the Topics module (from the admin/modules/topics.php file) is between the blank lines in the above code. It will offer you a dropdown list of all images in the images/reviews folder. Just like with the topics images, you must use all small letters and no underscores or other special characters. See <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=12983"
TARGET="_top"
>choose image for review</A
>.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MODIFYING-PHP-NUKE-MODULE-WEB-LINKS"
>18.5. Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Web_Links module</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-WEBLINKS-4"
></A
><P
><B
>Figure 18-4.    Administration panel: Web Links.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/weblinks.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Web Links.</P
></DIV
></P
></DIV
></DIV
></P
><P
>In this section we modify the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Web Links module:</P
><P
></P
><UL
><LI
><P
>How to display Web Links in the same window (<A
HREF="#DISPLAY-WEB-LINKS-IN-THE-SAME-WINDOW"
>Section 18.5.1</A
>),</P
></LI
><LI
><P
>How to change the number of Web Links per page (<A
HREF="#CHANGE-NUMBER-OF-WEB-LINKS-PER-PAGE"
>Section 18.5.2</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="DISPLAY-WEB-LINKS-IN-THE-SAME-WINDOW"
>18.5.1. How to display Web Links in the same window</A
></H3
><P
>The Web_Links module will display each web link in a separate window. To change this behaviour and make it display the link in the same window, you have to change each occurence of </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>target=\"new\"</PRE
></FONT
></TD
></TR
></TABLE
><P
>to</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>target=\"_self\"</PRE
></FONT
></TD
></TR
></TABLE
><P
>in the modules/Web_Links/index.php file. This is a straightforward search and replace procedure. In vi, you would do</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>1,$s/target=\\"new\\"/target=\\"_self\\"/g</PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CHANGE-NUMBER-OF-WEB-LINKS-PER-PAGE"
>18.5.2. How to change the number of Web Links per page</A
></H3
><P
>You can change the number of Web Links that are displayed per page very easily - no programming necessary! <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_smile.png"></SPAN
> </P
><P
>Just change the value of $perpage in modules/Web_Links/l_config.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$perpage = 10;</PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Make use of the module configuration files!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>It definitely pays off to have a look at the configuration files of the various modules! The l_config.php file, for example, located in the Web_Links folder under the modules directory, offers many variables that can be used to achieve the desired appearence of the Web Links module:</P
><P
></P
><UL
><LI
><P
>$perpage:                     How many links to show on each page?</P
></LI
><LI
><P
>$popular:                     How many hits need a link to be listed as popular?</P
></LI
><LI
><P
>$newlinks:                    How many links to display in the New Links Page?</P
></LI
><LI
><P
>$toplinks:                    How many links to display in The Best Links Page? (Most Popular)</P
></LI
><LI
><P
>$linksresults:                How many links to display on each search result page?</P
></LI
><LI
><P
>$links_anonaddlinklock:       Lock Unregistered users from Suggesting New Links? (0=Yes 1=No)</P
></LI
><LI
><P
>$anonwaitdays:                Number of days anonymous users need to wait to vote on a link</P
></LI
><LI
><P
>$outsidewaitdays:             Number of days outside users need to wait to vote on a link (checks IP)</P
></LI
><LI
><P
>$useoutsidevoting:            Allow Webmasters to put vote links on their site (1=Yes 0=No)</P
></LI
><LI
><P
>$anonweight:                  How many Unregistered User vote per 1 Registered User Vote?</P
></LI
><LI
><P
>$outsideweight:               How many Outside User vote per 1 Registered User Vote?</P
></LI
><LI
><P
>$detailvotedecimal:           Let Detailed Vote Summary Decimal out to N places. (no max)</P
></LI
><LI
><P
>$mainvotedecimal:             Let Main Vote Summary Decimal show out to N places. (max 4)</P
></LI
><LI
><P
>$toplinkspercentrigger:       1 to Show Top Links as a Percentage (else # of links)</P
></LI
><LI
><P
>$toplinks:                    Either # of links OR percentage to show (percentage as whole number. #/100)</P
></LI
><LI
><P
>$mostpoplinkspercentrigger:   1 to Show Most Popular Links as a Percentage (else # of links)</P
></LI
><LI
><P
>$mostpoplinks:                Either # of links OR percentage to show (percentage as whole number. #/100)</P
></LI
><LI
><P
>$featurebox:                  1 to Show Feature Link Box on links Main Page? (1=Yes 0=No)</P
></LI
><LI
><P
>$linkvotemin:                 Number votes needed to make the 'top 10' list</P
></LI
><LI
><P
>$blockunregmodify:            Block unregistered users from suggesting links changes? (1=Yes 0=No)</P
></LI
></UL
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MODIFYING-PHP-NUKE-MODUKE-YOUR-ACCOUNT"
>18.6. Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Your_Account module</A
></H2
><P
>In this section we modify the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Your Account module, one of the most central modules of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. We show:</P
><P
></P
><UL
><LI
><P
>How to redirect users to the Homepage (<A
HREF="#REDIRECT-USERS-TO-HOMEPAGE"
>Section 18.6.1</A
>),</P
></LI
><LI
><P
>How to redirect Your Info to the Forums user profile (<A
HREF="#REDIRECT-YOUR-INFO-TO-FORUMS-USER-PROFILE"
>Section 18.6.2</A
>),</P
></LI
><LI
><P
>How to redirect users to Login and back (<A
HREF="#REDIRECT-USERS-TO-LOGIN-AND-BACK"
>Section 18.6.3</A
>),</P
></LI
><LI
><P
>How to disable registration (<A
HREF="#DISABLE-REGISTRATION"
>Section 18.6.4</A
>),</P
></LI
><LI
><P
>How to let users register immediately (<A
HREF="#REGISTER-USERS-IMMEDIATELY"
>Section 18.6.5</A
>),</P
></LI
><LI
><P
>How to approve users before registration (<A
HREF="#APPROVE-USERS"
>Section 18.6.6</A
>),</P
></LI
><LI
><P
>How to register users through iBill (<A
HREF="#REGISTER-USERS-THROUGH-IBILL"
>Section 18.6.7</A
>),</P
></LI
><LI
><P
>How to change the maximum allowed length for user names (<A
HREF="#CHANGE-MAXIMUM-USERNAME-LENGTH"
>Section 18.6.8</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="REDIRECT-USERS-TO-HOMEPAGE"
>18.6.1. How to redirect users to the Homepage</A
></H3
><P
>Are you looking for a way to redirect a user to Home rather than Your Account when they login? Would you rather prefer them to go to Your Account only when they choose to and be automatically redirected to Home when they login? There is a simple way to accomplish this (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=333"
TARGET="_top"
>How to redirect users to the Homepage</A
> and <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=13776"
TARGET="_top"
>Redirect login to home</A
>):</P
><P
>Find the following lines in function login() in the modules/Your_Account/index.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Header("Location: modules.php?name=Your_Account&#38;op=userinfo&#38;bypass=1&#38;username=$username");</PRE
></FONT
></TD
></TR
></TABLE
><P
>Change it to this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Header("Location: index.php"); </PRE
></FONT
></TD
></TR
></TABLE
><P
>See <A
HREF="#REDIRECT-USERS-TO-LOGIN-PAGE"
>Section 18.2.1</A
> for the inverse procedure &#8212; but don't try both. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="REDIRECT-YOUR-INFO-TO-FORUMS-USER-PROFILE"
>18.6.2. How to redirect Your Info to the Forums user profile</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-YOUR-INFO-PROFILE-LINK"
></A
><P
><B
>Figure 18-5.    Your Info link in the User Preferences panel.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/your-info-profile-link.png"><DIV
CLASS="CAPTION"
><P
>Your Info link in the User Preferences panel.</P
></DIV
></P
></DIV
></DIV
></P
><P
>With the advent of <A
HREF="http://www.phpbb.com"
TARGET="_top"
>phpBB</A
> forums in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> (starting from somewhere around v. 6.5), you not only have to cope with two administration panels, one for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> in general and one for the Forums in particular, your users can maintain their profile in two places too, from the Your Info link in the User Preference panel (<A
HREF="#FIG-YOUR-INFO-PROFILE-LINK"
>Figure 18-5</A
>), as well as the Forums profile link in the Forums module (<A
HREF="#FIG-FORUM-PROFILE-LINK"
>Figure 18-6</A
>).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-FORUM-PROFILE-LINK"
></A
><P
><B
>Figure 18-6.    Forum Profile link in the Forums module.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/forum-profile-link.png"><DIV
CLASS="CAPTION"
><P
>Forum Profile link in the Forums module.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The Your Info link has the URL</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>modules.php?name=Your_Account&#38;op=edituser</PRE
></FONT
></TD
></TR
></TABLE
><P
>and leads to a panel similar to the one of <A
HREF="#FIG-YOUR-INFO-PROFILE"
>Figure 18-7</A
>.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-YOUR-INFO-PROFILE"
></A
><P
><B
>Figure 18-7.    User profile in Your Info.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/your-info-profile.png"><DIV
CLASS="CAPTION"
><P
>User profile in Your Info.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The Profile link in the Forums module, on the other hand, has the URL</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>modules.php?name=Forums&#38;file=profile&#38;mode=editprofile</PRE
></FONT
></TD
></TR
></TABLE
><P
>(optionally with the session <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
> parameter, sid, which is not shown here) and leads to the panel shown in <A
HREF="#FIG-FORUM-PROFILE"
>Figure 18-8</A
>.</P
><P
>Both panels use the same database tables in the background, so it doesn't matter which one you use. This may be confortable for some, but also confusing for other users.</P
><P
>If your users find it confusing to use two different entry points for their personal information, you can modify the Your_Account module to redirect them to the Forum profile (<A
HREF="#FIG-FORUM-PROFILE"
>Figure 18-8</A
>), even when they click on the Your Info link (<A
HREF="#FIG-YOUR-INFO-PROFILE-LINK"
>Figure 18-5</A
>).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-FORUM-PROFILE"
></A
><P
><B
>Figure 18-8.    User profile in the Forums.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/forum-profile.png"><DIV
CLASS="CAPTION"
><P
>User profile in the Forums.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The Your Info link is output (&#8220;echoed&#8221;) in modules/Your_Account/navbar.php, in the following code block:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>echo "&#60;font class=\"content\"&#62;"
    ."&#60;center&#62;&#60;a href=\"modules.php?name=Your_Account&#38;amp;op=edituser\"&#62;
      &#60;img src=\"$menuimg\" border=\"0\" alt=\""._CHANGEYOURINFO.
     "\" title=\""._CHANGEYOURINFO."\"&#62;&#60;/a&#62;&#60;br&#62;"
    ."&#60;a href=\"modules.php?name=Your_Account&#38;amp;op=edituser\"&#62;"
    ._CHANGEYOURINFO."&#60;/a&#62;"
    ."&#60;/center&#62;&#60;/font&#62;&#60;/td&#62;";</PRE
></FONT
></TD
></TR
></TABLE
><P
>To redirect the users to the Forum profile (<A
HREF="#FIG-FORUM-PROFILE"
>Figure 18-8</A
>), you can change the above block to:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>echo "&#60;font class=\"content\"&#62;"
    ."&#60;center&#62;&#60;a href=\"modules.php?name=Forums&#38;amp;file=profile&#38;amp;mode=editprofile\"&#62;
      &#60;img src=\"$menuimg\" border=\"0\" alt=\""._CHANGEYOURINFO.
     "\" title=\""._CHANGEYOURINFO."\"&#62;&#60;/a&#62;&#60;br&#62;"
    ."&#60;a href=\"modules.php?name=Forums&#38;amp;file=profile&#38;amp;mode=editprofile\"&#62;"
    ._CHANGEYOURINFO."&#60;/a&#62;"
    ."&#60;/center&#62;&#60;/font&#62;&#60;/td&#62;";</PRE
></FONT
></TD
></TR
></TABLE
><P
>As you can easily see, we have changed only the two links (one for the image and one for the text), the other lines are for your reference only. </P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>It is not necessary to compute the user's numeric <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
> and pass it on the URL through the u parameter - the mode=editprofile parameter on the URL will find the user automatically (but mode=viewprofile will not!).</P
></TD
></TR
></TABLE
></DIV
><P
>But wait a minute! Is this really all we have to change? Is the Your Info link (<A
HREF="#FIG-YOUR-INFO-PROFILE-LINK"
>Figure 18-5</A
>) the only one that leads a user to the profile screen of the Your_Info module (<A
HREF="#FIG-YOUR-INFO-PROFILE"
>Figure 18-7</A
>)? How about the user name links in other modules, for example? Search for the string &#8220;op=edituser&#8221; and you will already find a ton of those links in various places (Newsletter, language files, Reviews...) And how about a new user? Will the new user registration screen be the one of Your_Account or the one of Forums?</P
><P
>Instead of chasing links in the code, there is a more elegant solution that will eliminate any attempt to bring a user to the Your Info profile at its very beginning! It is also a very good example of what type of control you can achieve over your PHP-Nuke, if you put your knowledge about the way a module works (see <A
HREF="#CREATING-MODULES"
>Chapter 21</A
>) into practice:</P
><P
>In modules/Your_Account/index.php find the lines:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>case "edituser":
edituser();
break;</PRE
></FONT
></TD
></TR
></TABLE
><P
>and replace them with:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>case "edituser":
Header("Refresh: 0; url=modules.php?name=Forums&#38;file=profile&#38;mode=editprofile");
break;</PRE
></FONT
></TD
></TR
></TABLE
><P
>This will take care of the &#8220;edit user&#8221; case. We need to do the same for the &#8220;new user&#8221; case too. Just replace</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>case "new_user":
new_user();
break;</PRE
></FONT
></TD
></TR
></TABLE
><P
>with:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>case "new_user":
Header("Refresh: 0; url=modules.php?name=Forums&#38;file=profile&#38;mode=register");
break;</PRE
></FONT
></TD
></TR
></TABLE
><P
>The idea here is the following: instead of searching all code of all modules for links that point to the Your Info profile, we look at the parameters that such a link passes on the URL. A typical Your Info profile link is of the form:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>modules.php?name=Your_Account&#38;op=edituser</PRE
></FONT
></TD
></TR
></TABLE
><P
>so the parameters it passes to the modules.php script are:</P
><P
></P
><UL
><LI
><P
>name: the name of the module to execute (Your_Account)</P
></LI
><LI
><P
>op: the operation to execute (edituser)</P
></LI
></UL
><P
>The second URL parameter, op, is checked at one single place in the code, in the switch statement of modules/Your_Account/index.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>switch($op) {
    case "logout":
        logout();
        break;
    ...many other cases checked here, among them "edituser" and "new_user"
    
    default:
        main($user);
        break;
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>This is the one and only point of control for the actions taken by the Your_Account module. We make use of this fact and change the actions that are to be taken for the operations "edituser" and "new_user". We don't change the links, we change the actions that follow when the links are clicked.<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_cool.png"></SPAN
></P
><P
>This will make the Your Info profile practically inaccessible in your system and will present the Forums profile instead.</P
><DIV
CLASS="WARNING"
><P
></P
><TABLE
CLASS="WARNING"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/warning.png"
HSPACE="5"
ALT="Warning"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Missing functionality in the Forums profile!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Bear in mind that, depending on the versions of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> and Forums, you may be missing some functionality in the Forums profile, that was present in the profile that was accessible through the Your Info link. This may include changing the fake email address, changing the subscription to the newsletter, or changing the extra info (<A
HREF="#FIG-EXTRA-INFO"
>Figure 12-1</A
>). However, this is planned to be corrected in the future.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="REDIRECT-USERS-TO-LOGIN-AND-BACK"
>18.6.3. How to redirect users to Login and back</A
></H3
><P
>We have already seen how to redirect users to the Login page (<A
HREF="#REDIRECT-USERS-TO-LOGIN-PAGE"
>Section 18.2.1</A
>), to the Homepage (<A
HREF="#REDIRECT-USERS-TO-HOMEPAGE"
>Section 18.6.1</A
>) and to the Forum profile from the Your Info profile (<A
HREF="#REDIRECT-YOUR-INFO-TO-FORUMS-USER-PROFILE"
>Section 18.6.2</A
>). Finally, it is time that we consider the general redirection problem:</P
><P
>You are using some module, say an eCommerce module like the Emporium Shopping Cart (<A
HREF="#PHP-NUKE-ECOMMERCE-MODULE"
>Section 8.3.14</A
>), and at some point you need to ask the user to login (if not already done) to finish off the order. You would like to redirect the user to the Login screen (<A
HREF="#FIG-SECURITY-CODE"
>Figure 3-28</A
>), then bring him back where he was to continue.</P
><P
>This is already implemented in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> at some places, like the Private Messages part of the Your Account module: in the forums for example, if you aren't logged in, you see the link 'Log in to check your private messages', which when clicked on it, takes you to Your Account (address line becomes : http://www.yoursite.com/modules.php?name=Your_Account&#38;redirect=privmsg&#38;folder=inbox), and upon login in, you get taken back to PMs.</P
><P
>To accomplish this from an arbitrary module, that serves as the starting point for the redirection, open that module's code and find the place where the redirection has to happen. Initiate the redirection with the following two lines:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$redirect = $module_name;
&#60;a href=\"modules.php?name=Your_Account&#38;redirect=$redirect\"&#62;CLICK HERE TO LOGIN&#60;/a&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>The value of $redirect is what you will key off in the next step. In this example we use the module name as the key that will point the way back, but you can use anything, as long as you know how to use it later, to trace your way back with the right link.</P
><P
>Now go to modules/Your_Account/index.php and look for the following code in the login() function:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($pm_login != "") {
            Header("Location: modules.php?name=Private_Messages&#38;file=index&#38;folder=inbox");
            exit;
            }</PRE
></FONT
></TD
></TR
></TABLE
><P
>Add the following after it:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($redirect == "XXXXXXXXX"){
        Header("Location: modules.php?name=YYYYYYYYY");
        exit;
        }</PRE
></FONT
></TD
></TR
></TABLE
><P
>where XXXXXXXXX is the value of $redirect from the first step and YYYYYYYY is the name of the module you want them dumped into after login.</P
><P
>You might think that we are done by now, but there is a caveat: the above will work as long as they log in correctly on the first try. If they make a mistake and have to try a second or more times, they will get dumped in Your Account, after they log in successfully, not in the module they came from. This is also true for the Private Messages example above.</P
><P
>To fix this, find the following code in Your_Account\index.php at the bottom of the login function.</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>} else {
   Header("Location: modules.php?name=$module_name&#38;stop=1");
    }</PRE
></FONT
></TD
></TR
></TABLE
><P
>and change it to:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>} else {
     Header("Location: modules.php?name=$module_name&#38;stop=1&#38;redirect=$redirect");
    }</PRE
></FONT
></TD
></TR
></TABLE
><P
>Then it will redirect even if they log in incorrectly the first time. See <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=17779"
TARGET="_top"
>How to redirect</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="DISABLE-REGISTRATION"
>18.6.4. How to disable registration</A
></H3
><P
>If you want to make registration of users impossible, you can apply a variation of the solution in <A
HREF="#REDIRECT-YOUR-INFO-TO-FORUMS-USER-PROFILE"
>Section 18.6.2</A
>: you can redirect the users to the main page (index.php) whenever they try to register (e.g. by clicking on some registration link). Note that just by deleting the registration links from the code (see <A
HREF="#FIND-ALL-REGISTRATION-LINKS"
>Section 26.5</A
> on how to find them), you still can't prevent a determined user from entering</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>http://www.yourdomain.com/modules.php?name=Your_Account&#38;op=new_user</PRE
></FONT
></TD
></TR
></TABLE
><P
>in the URL box of his browser by hand, thus triggering the &#8220;operation new_user&#8221; in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. By this, it becomes clear that a real solution must at least change the behaviour of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> for the value &#8220;new_user&#8221; of the op URL parameter.</P
><P
>Again, instead of chasing links in the code, there is a more elegant solution:</P
><P
>In modules/Your_Account/index.php find the lines:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>case "new_user":
new_user();
break;</PRE
></FONT
></TD
></TR
></TABLE
><P
>and replace them with:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>case "new_user":
Header("Refresh: 0; url=index.php");
break;</PRE
></FONT
></TD
></TR
></TABLE
><P
>This will only disable registration from the Your Account module (more accurately: it will redirect every registration attempt to the main index.php page).</P
><P
>To disable it in the Forums too, edit modules/Forums/profile.php. Find</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>else if ( $mode == 'editprofile' || $mode == 'register' )
{
        if ( !$userdata['session_logged_in'] &#38;&#38; $mode == 'editprofile' )
        {
                $header_location = ( @preg_match("/Microsoft|WebSTAR|Xitami/",
                $_SERVER["SERVER_SOFTWARE"]) ) ? "Refresh: 0; URL=" : "Location: ";
                header($header_location .
                append_sid("login.$phpEx?redirect=profile.$phpEx&#38;mode=editprofile", 
                true));
                exit;
        }
        include("includes/usercp_register.php");
        exit;
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>and change it to something like:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>else if ( $mode == 'editprofile' || $mode == 'register' )
{
        Header("Refresh: 0; url=index.php");
        exit;
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>i.e. we again redirect the user to the index.php page. See also <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=18403"
TARGET="_top"
>How to disable registration</A
>.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>It's also possible without programming!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>As so often in life, it all depends on what you want. You can of course achieve a similar effect, without any programming,  if you make the Your Account module accessible to admins only, from the modules administration, in the administration panel.</P
></TD
></TR
></TABLE
></DIV
><P
>If you want users to be registered directly, without confirmation mails, see <A
HREF="#REGISTER-USERS-IMMEDIATELY"
>Section 18.6.5</A
>. If you want to approve every user who applied for registration, you can use the Approve Membership module (see <A
HREF="#PHP-NUKE-APPROVE-MEMBERSHIP-MODULE"
>Section 8.3.4</A
>).</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="REGISTER-USERS-IMMEDIATELY"
>18.6.5. How to let users register immediately</A
></H3
><P
>When new users register, you may want them to be able to do so immediately, without having to wait for an email notification with an activation link. </P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Do you trust your users?</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you let everyone post without being registered, you will not have *any* data as to who wrote that inflammatory, libellous, pornographic or whatever post in your forum that caught FBI's attention. Thus you should really trust your users not to abuse your system, if you plan to bypass email notification on registration.</P
></TD
></TR
></TABLE
></DIV
><P
>You have two options, if you are not in the mood of programming it yourself <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
>:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>From the administration panel, Preferences, just choose that non-registered users are allowed to post. Then, from the modules and blocks administration panels, for each module or block you use, choose that all users are allowed to see it. That should come very close to what you want - that all users be able to use all parts of your site without registration. </P
></LI
><LI
><P
>A module that allows the administrator to bypass email activation is <A
HREF="http://www.nukefixes.com/article6.html"
TARGET="_top"
>NSN Your Account Tweak 650 3.0.2</A
>. According to the description, administrators can choose to bypass email activation. But the module offers a lot of other useful features around user management, see <A
HREF="#NSN-YOUR-ACCOUNT-TWEAK-MODULE"
>Section 8.3.3</A
>.</P
></LI
></OL
><P
>See also <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=288"
TARGET="_top"
>Authorization and avatars</A
>.</P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Download the right NSN Your Account Tweak version!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Be careful with the version you download from this module! The number 650, for example, indicates that it is only for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.5. Use only the version that is in accordance with your installed <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> version, otherwise you are guaranteed to mess up your installation completely.</P
></TD
></TR
></TABLE
></DIV
><P
>See also the <A
HREF="http://ravenphpscripts.com/download-file-58.html"
TARGET="_top"
>New User Auto Activation Hack</A
> and the <A
HREF="http://ravenphpscripts.com/download-file-83.html"
TARGET="_top"
>Auto Registration Activation For Nuke v7.0</A
>. If you want to disable registration, see <A
HREF="#DISABLE-REGISTRATION"
>Section 18.6.4</A
>. If you want to approve every user who applied for registration, you can use the Approve Membership module (see <A
HREF="#PHP-NUKE-APPROVE-MEMBERSHIP-MODULE"
>Section 8.3.4</A
>).</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="APPROVE-USERS"
>18.6.6. How to approve users before registration</A
></H3
><P
>If you want to enforce the opposite of what is described in <A
HREF="#REGISTER-USERS-IMMEDIATELY"
>Section 18.6.5</A
>, i.e. be able to approve each and every user before he is allowed to register, then you should have a look at the Approve Membership module. See <A
HREF="#PHP-NUKE-APPROVE-MEMBERSHIP-MODULE"
>Section 8.3.4</A
> and <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=83"
TARGET="_top"
>Authorize accounts</A
> for more details.</P
><P
>If you want users to be registered directly, without confirmation mails, see <A
HREF="#REGISTER-USERS-IMMEDIATELY"
>Section 18.6.5</A
>. If you want to disable registration, see <A
HREF="#DISABLE-REGISTRATION"
>Section 18.6.4</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="REGISTER-USERS-THROUGH-IBILL"
>18.6.7. How to register users through iBill</A
></H3
><P
>Theoretically, you could modify the Your Account module easily to accomodate for a registration through the <A
HREF="http://www.ibill.com"
TARGET="_top"
>iBill</A
> credit card option. You could proceed along the following lines (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=10200"
TARGET="_top"
>Replacing registration with iBill credit card option</A
>):</P
><P
>The iBill system essentially works by users entering information into the iBill script. The script would then connect to the web server and create an account in an .htaccess file (<A
HREF="#HTACCESS-FILE"
>Section 25.4</A
>) in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> root directory. When a paid user account would expire, iBill's server could then remove the user account from the .htaccess file.</P
><P
>With iBill controlling the .htaccess file, there would be no need for a Registration option in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. The only thing that would be needed would be to change the code in block-Login.php, perhaps replacing the Register link with a link to a static html page, where the iBill sign up scripts would do the trick. Or you could just put the iBill code in a block and remove the Register option.</P
><P
>There is no ready-made solution for this scenario yet, but the procedure outlined above points to the right direction.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CHANGE-MAXIMUM-USERNAME-LENGTH"
>18.6.8. How to change the maximum allowed length for user names</A
></H3
><P
>The standard maximum length for user names is 25 characters. If your users really pick up such long nicknames, they may break your blocks' layout, depending on your theme and resolution. This is because they may appear as authors of news articles etc. in headlines that appear in various blocks.</P
><P
>To prevent your users from using long user names, you must change the maximum allowed length in modules/Your_Account/index.php, in the function userCheck(). Find the line:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if (strlen($username) &#62; 25) $stop = "&#60;center&#62;"._NICK2LONG."&#60;/center&#62;";</PRE
></FONT
></TD
></TR
></TABLE
><P
>and change the 25 to a lower length. A better programming style would be to define a constant for this and do the check against the constant.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MODIFYING-PHP-NUKE-NEWS-MODULE"
>18.7. Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> News module</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-STORIES-2"
></A
><P
><B
>Figure 18-9.    Administration panel: Add story.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/stories.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Add story.</P
></DIV
></P
></DIV
></DIV
></P
><P
>In this section we modify the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> News module, which is also one of the most important ones:</P
><P
></P
><UL
><LI
><P
>How to get rid of the need to use &#60;br&#62; for new lines (<A
HREF="#GET-RID-OF-BR-IN-NEWS"
>Section 18.7.1</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="GET-RID-OF-BR-IN-NEWS"
>18.7.1. How to get rid of the need to use &#60;br&#62; for new lines</A
></H3
><P
>It is one of the most annoying requirements for users who want to submit a News article to your site: they have to write the text either in BBcode, or in HTML. While BBcode is easy to learn and use, HTML can be a real pain for the average Jo user. Worse yet, for sites that have disabled BBcode, HTML is the only available language for the aspiring journalist. Thus, a lot of people find themselves forced to write their articles with the editor of their choice, then export that document to HTML with the editor's own export function. Although this scenario will not alleviate the need for a subsequent scrutiny of the HTML code thus produced, for the purpose of locating and eliminating the HTML tags that are not allowed by the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site (see <A
HREF="#ALLOW-SPECIAL-HTML-TAGS"
>Section 16.1</A
>), it definitely has its merits, especially for long text.</P
><P
>Those users however, who will rather opt for a quick entering of the text directly in the form fields, will most often be reminded the hard way, by a text totally lacking paragraph structure, that something is missing from their text: two break tags (&#60;br&#62;&#60;br&#62;) for the insertion of a blank line, something that is used intuitively to separate paragraphs. Even seasoned HTML coders will find themselves routinely omitting the obligatory &#60;br&#62; tags, so a way to avoid the need for them is great help for both beginners and specialists alike.</P
><P
>To eliminate the &#60;br&#62; plague once for all, you only have to enter a 2-liner in the modules/news/index.php file. Find the lines:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>        getTopics($s_sid);
        formatTimestamp($time);
        $subject = stripslashes($subject);
        $hometext = stripslashes($hometext);
        $notes = stripslashes($notes);
        $introcount = strlen($hometext);
        $fullcount = strlen($bodytext);
        $totalcount = $introcount + $fullcount;
        $c_count = $comments;
        $r_options = "";</PRE
></FONT
></TD
></TR
></TABLE
><P
>and append the following two ones to them:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>        $hometext=nl2br("$hometext");
        $bodytext=nl2br("$bodytext");</PRE
></FONT
></TD
></TR
></TABLE
><P
>Then, in the modules/News/article.php, find the lines </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($notes != "") {
    $notes = "&#60;br&#62;&#60;br&#62;&#60;b&#62;"._NOTE."&#60;/b&#62; &#60;i&#62;$notes&#60;/i&#62;";
} else {
    $notes = "";
}
if($bodytext == "") {
    $bodytext = "$hometext$notes";
} else {
    $bodytext = "$hometext&#60;br&#62;&#60;br&#62;$bodytext$notes";
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>and add in 2 more lines, like this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$hometext = nl2br($hometext);
$bodytext = nl2br($bodytext);</PRE
></FONT
></TD
></TR
></TABLE
><P
>The <A
HREF="http://www.php.net/manual/en/function.nl2br.php"
TARGET="_top"
>nl2br <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> function</A
> (newline to break) will automatically insert HTML &#60;br /&#62; tags (breaks) before every newline in the short ($hometext) and extended text ($bodytext) of the news article (see also <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=18099"
TARGET="_top"
>How do I stop using the br tag</A
>, <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=11513"
TARGET="_top"
>Linebreaks when entering text</A
>).</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MODIFYING-PHP-NUKE-SUBMIT-NEWS-MODULE"
>18.8. Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Submit News module</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-SUBMISSIONS-2"
></A
><P
><B
>Figure 18-10.    Administration panel: Submissions.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/submissions.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Submissions.</P
></DIV
></P
></DIV
></DIV
></P
><P
>In this section we modify the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Submit News module:</P
><P
></P
><UL
><LI
><P
>How to bypass article approval (<A
HREF="#BYPASS-ARTICLE-APPROVAL"
>Section 18.8.1</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="BYPASS-ARTICLE-APPROVAL"
>18.8.1. How to bypass article approval</A
></H3
><P
>The standard workflow for a news article is that the user writes it, submits it for approval by the administrator, the administrator reads it, approves and publishes it on the site. This has some advantages:</P
><P
></P
><UL
><LI
><P
>Everybody can post, even anonymous users. </P
></LI
><LI
><P
>Since the posts are checked, there is no risk of getting flooded with garbage posts.</P
></LI
></UL
><P
>But it also has some disadvantages too:</P
><P
></P
><UL
><LI
><P
>Users have to wait to see their post published. This may not be what they expect, if actuality of content is highly important for the topics of your site.</P
></LI
><LI
><P
>The administrators have to spend time on approving news articles. Waiting content (<A
HREF="#FIG-WAITING-CONTENT-BLOCK"
>Figure 18-11</A
>) can be quite an administrative headache, if the site receives many user submissions a day (see, for example phpnuke.org, where there are dozens of submissions awaiting approval at any given time).</P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-WAITING-CONTENT-BLOCK"
></A
><P
><B
>Figure 18-11.    Waiting Content block.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/waiting-content-block.png"><DIV
CLASS="CAPTION"
><P
>Waiting Content block.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Fortunately, to bypass article approval, the solution is relatively simple (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=270"
TARGET="_top"
>Automatic Article Posting</A
>):</P
><P
></P
><UL
><LI
><P
>For versions before <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.5:</P
><P
>In the modules/Submit_News, in the function submitStory(), find this </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$result = sql_query("insert into ".$prefix."_queue 
values (NULL, '$uid', '$name', '$subject', '$story', 
'$storyext', now(), '$topic', '$catid', '$alanguage')", $dbi);</PRE
></FONT
></TD
></TR
></TABLE
><P
>Change it to this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$result = sql_query("insert into ".$prefix."_stories 
values (NULL, '$catid', '$name', '$subject', now(), '$story', 
'$storyext', '0', '0', '$topic', '$name', ", '0', '$alanguage', 
'0','0', '0', '0', '0')", $dbi); </PRE
></FONT
></TD
></TR
></TABLE
><P
>The story will get posted immediately, so you will want to make the Submit_News module only available to Users. Also, you will notice that it will now say &#8220;Posted By Some_user&#8221;, and it will no longer show in italics. </P
></LI
><LI
><P
>For <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.5 and later, the solution is slightly different. Replace this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$sql = "INSERT INTO ".$prefix."_queue VALUES (NULL, '$uid', '$name', '$subject',
'$story', '$storyext', now(), '$topic', '$alanguage')";</PRE
></FONT
></TD
></TR
></TABLE
><P
>with this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$sql = "insert into ".$prefix."_stories values (NULL, '$catid', '$name', '$subject',
now(), '$story', '$storyext', '0', '0', '$topic', '$name', ", '0', '$alanguage', '0', '0', '0', '0','0', ")";</PRE
></FONT
></TD
></TR
></TABLE
></LI
></UL
><P
>You will also want to change the language file "defines", or edit these lines in the function submitStory (this is what is displayed when the submission is sent.</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>echo "&#60;center&#62;&#60;font class=\"title\"&#62;"._SUBSENT."&#60;/font&#62;&#60;br&#62;&#60;br&#62;"
."&#60;font class=\"content\"&#62;&#60;b&#62;"._THANKSSUB."&#60;/b&#62;&#60;br&#62;&#60;br&#62;"
.""._SUBTEXT.""
."&#60;br&#62;"._WEHAVESUB." $waiting "._WAITING."";</PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="FORMATAIDHEADER-FUNCTION"
>18.8.1.1. The formatAidHeader() function</A
></H4
><P
>If you want to make the &#8220;Posted By Some_user&#8221; also be a link to the User's profile, then you can edit the function formatAidHeader in your mainfile.php. The following refers to <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.5 and above.</P
><P
>The function is simple: it takes an argument, the author id $aid, searches the nuke_authors table for that author id and, if found, it prints a link to the web page of the author. Only if the web page link fiels of nuke_authors is empty for that author, it prints a link to the author's e-mail (which is always there):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>function formatAidHeader($aid) {
    global $prefix, $db;
    $sql = "SELECT url, email FROM ".$prefix."_authors WHERE aid='$aid'";
    $result = $db-&#62;sql_query($sql);
    $row = $db-&#62;sql_fetchrow($result);
    $url = $row[url];
    $email = $row[email];
    if (isset($url)) {
        $aid = "&#60;a href=\"$url\"&#62;$aid&#60;/a&#62;";
    } elseif (isset($email)) {
        $aid = "&#60;a href=\"mailto:$email\"&#62;$aid&#60;/a&#62;";
    } else {
        $aid = $aid;
    }
    echo "$aid";
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>You could easily change this behaviour. For example, you could take out the check against the $url and leave only the e-mail part, if you wanted the &#8220;Posted By Some_user&#8221; to be an e-mail link, rather than a link to a web page (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=351"
TARGET="_top"
>Change Posted by... Name (Website) to Name (Email)</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>function formatAidHeader($aid) {
    global $prefix, $db;
    $sql = "SELECT url, email FROM ".$prefix."_authors WHERE aid='$aid'";
    $result = $db-&#62;sql_query($sql);
    $row = $db-&#62;sql_fetchrow($result);
    $url = $row[url];
    $email = $row[email];
     if (isset($email)) {
        $aid = "&#60;a href=\"mailto:$email\"&#62;$aid&#60;/a&#62;";
    } else {
        $aid = $aid;
    }
    echo "$aid";
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>You could make it even more sophisticated, by making &#8220;Posted By Some_user&#8221; a link to the user's profile (see <A
HREF="#REDIRECT-YOUR-INFO-TO-FORUMS-USER-PROFILE"
>Section 18.6.2</A
> for the related subject of user profile redirection). The formatAidHeader function should then be:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>function formatAidHeader($aid) { 
    global $prefix, $db;
    $sql = "SELECT url, email FROM ".$prefix."_authors WHERE aid='$aid'";
    $result = $db-&#62;sql_query($sql);
    if($row = $db-&#62;sql_fetchrow($result)) {
        $url = $row[url]; 
        $email = $row[email]; 
        if (isset($url)) { 
            $aid = "&#60;a href=\"$url\"&#62;$aid&#60;/a&#62;";
        } elseif (isset($email)) {  
            $aid = "&#60;a href=\"mailto:$email\"&#62;$aid&#60;/a&#62;"; 
        } else {
            $aid = $aid;
        } 
   }else {
        $sql = "SELECT user_id FROM ".$prefix."_users WHERE username='$aid'"; 
        $result = $db-&#62;sql_query($sql); 
        $row = $db-&#62;sql_fetchrow($result);
        $user_id = $row[user_id];
        $aid = "&#60;a
        href=\"modules.php?name=Forums&#38;file=profile
&#38;mode=viewprofile&#38;u=$user_id\"&#62;$aid&#60;/a&#62;";
    }
    echo "$aid"; 
}</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MODIFYING-PHP-NUKE-SECTIONS-MODULE"
>18.9. Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Sections module</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-SECTIONS-2"
></A
><P
><B
>Figure 18-12.    Administration panel: Sections.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/sections.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Sections.</P
></DIV
></P
></DIV
></DIV
></P
><P
>In this section we modify the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Section module:</P
><P
></P
><UL
><LI
><P
>How to order the articles in the Sections module (<A
HREF="#ORDER-ARTICLES-IN-SECTIONS"
>Section 18.9.1</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="ORDER-ARTICLES-IN-SECTIONS"
>18.9.1. How to order the articles in the Sections module</A
></H3
><P
>Sometimes you may not be satisfied with the order of articles in the Sections module. To change it, edit the following line of the modules/Sections/index.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$result = sql_query("select artid, secid, title, content, counter 
from ".$prefix."_seccont where secid=$secid $querylang", $dbi);</PRE
></FONT
></TD
></TR
></TABLE
><P
>Change it to<A
NAME="AEN13240"
HREF="#FTN.AEN13240"
><SPAN
CLASS="footnote"
>[23]</SPAN
></A
></P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$result = sql_query("select artid, secid, title, content, counter 
from ".$prefix."_seccont where secid=$secid $querylang ORDER BY artid DESC", $dbi);</PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Changing the order of results</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>This is a typical example of  changing the order of results of a database selection. This was achieved by solely adding "ORDER BY artid DESC" to the SQL query string. In plain text, this means "order the results by descending article id". The "right way" would of course be to sort by time. But lacking an extra timestamp field, we make use of the fact that later articles have a higher id. Thus, sorting by descending id will give last articles first. Think of this simple trick whenever you seek a simple way to change the order of some results.  </P
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MODIFYING-PHP-NUKE-DOWNLOADS-MODULE"
>18.10. Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Downloads module</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-DOWNLOADS-4"
></A
><P
><B
>Figure 18-13.    Administration panel: Downloads.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/downloads.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Downloads.</P
></DIV
></P
></DIV
></DIV
></P
><P
>In this section we modify the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Downloads module:</P
><P
></P
><UL
><LI
><P
>How to add URLs longer than 100 characters in Downloads and Web Links (<A
HREF="#URLS-LONGER-THAN-100-CHARACTERS"
>Section 18.10.1</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="URLS-LONGER-THAN-100-CHARACTERS"
>18.10.1. How to add URLs longer than 100 characters in Downloads and Web Links</A
></H3
><P
>Not always is the database the sole culprit when you stumble upon an arbitrary limitation of the functionality: constraints are, for some obscure design reason, also eagerly set in the code of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> itself. A typical example of this situation, is the limitation of the URL length in the Downloads and Web_Links modules to just 100 characters. To remove this constraint you need to make changes to the database tables <EM
>and</EM
> the programming code. </P
><P
>The database change consists of a MySQL command that changes the length of the relevant field. For the Downloads module, the relevant field is the &#8220;url&#8221; field in the nuke_downloads_downloads table, for the Web_Links module it is the &#8220;url&#8221; field in the nuke_links_links table. To change its length, type on the MySQL command line</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>alter table nuke_downloads_downloads modify url varchar(200);</PRE
></FONT
></TD
></TR
></TABLE
><P
>for the Downloads module, and</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>alter table nuke_links_links modify url varchar(200);</PRE
></FONT
></TD
></TR
></TABLE
><P
>for the Web_links module. </P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Changing the length of database fields</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you don't feel comfortable with the MySQL command line, you can use a graphical user interface (GUI) for it, like phpMyAdmin (see   <A
HREF="#PHPMYADMIN2"
>Section 3.4</A
>). But you can also pack the above commands in a <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> program:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
include_once("mainfile.php");
global $prefix, $dbi;
$result=sql_query("alter table nuke_downloads_downloads modify url varchar(200)", $dbi);
if (!$result) {
 print (mysql_error());
}
$result=sql_query("alter table nuke_links_links modify url varchar(200)", $dbi);
if (!$result) {
 print (mysql_error());
}
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Upload it to your web server in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> root directory (the one where config.php and mainfile.php are also located) and point your browser to it. The script even takes care to print a descriptive error message (a good programming practice), if an error occurs.</P
></TD
></TR
></TABLE
></DIV
><P
>But you are not done yet: for the length change to really take effect, you must change all <EM
>relevant</EM
> occurences of "maxlength" in the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code to reflect the new length of the field in the various HTML forms. This means searching not only the modules folder, but also the admin folder, for files related to the two modules and containing the string &#8220;maxlength&#8221;. </P
><P
></P
><UL
><LI
><P
>For the Downloads module, those are:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>The modules/Downloads/index.php file:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>.""._FILEURL.": &#60;input type=\"text\" name=\"url\" size=\"50\" 
maxlength=\"100\" value=\"http://\"&#62;&#60;br&#62;";
.""._URL.":&#60;br&#62;&#60;input type=\"text\" name=\"url\" value=\"$url\" size=\"50\"
maxlength=\"100\"&#62;&#60;br&#62;&#60;br&#62;" </PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>The admin/modules/download.php file:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>.""._FILEURL.": &#60;input type=\"text\" name=\"url\" value=\"$url\" size=\"50\"
maxlength=\"100\"&#62;&#38;nbsp;[ &#60;a target=\"_blank\" href=\"$url\"&#62;"._CHECK."&#60;/a&#62; ]&#60;br&#62;"
.""._FILEURL.": &#60;input type=\"text\" name=\"url\" size=\"50\" 
maxlength=\"100\" value=\"http://\"&#62;&#60;br&#62;";
.""._PAGEURL.": &#60;input type=\"text\" name=\"url\" value=\"$url\" size=\"50\"
maxlength=\"100\"&#62;&#38;nbsp;[ &#60;a href=\"$url\"&#62;"._CHECK."&#60;/a&#62; ]&#60;br&#62;"</PRE
></FONT
></TD
></TR
></TABLE
></LI
></OL
></LI
><LI
><P
>For the Web Links module, they are:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>The modules/Web_Links/index.php file:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>.""._PAGEURL.": &#60;input type=\"text\" name=\"url\" size=\"50\" 
maxlength=\"100\" value=\"http://\"&#62;&#60;br&#62;";
.""._URL.":&#60;br&#62;&#60;input type=\"text\" name=\"url\" value=\"$url\" size=\"50\"
maxlength=\"100\"&#62;&#60;br&#62;&#60;br&#62;" </PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>The admin/modules/links.php file:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>.""._PAGEURL.": &#60;input type=\"text\" name=\"url\" value=\"$url\" size=\"50\"
maxlength=\"100\"&#62;&#38;nbsp;[ &#60;a target=\"_blank\" href=\"$url\"&#62;"._VISIT."&#60;/a&#62; ]&#60;br&#62;"
.""._PAGEURL.": &#60;input type=\"text\" name=\"url\" size=\"50\" 
maxlength=\"100\" value=\"http://\"&#62;&#60;br&#62;";
.""._PAGEURL.": &#60;input type=\"text\" name=\"url\" value=\"$url\" size=\"50\"
maxlength=\"100\"&#62;&#38;nbsp;[ &#60;a href=\"$url\"&#62;Visit&#60;/a&#62; ]&#60;br&#62;"
.""._PAGEURL.": &#60;input type=\"text\" name=\"url\" value=\"$url\" size=\"50\"
maxlength=\"100\"&#62;&#38;nbsp;[ &#60;a target=\"_blank\" href=\"$url\"&#62;"._VISIT."&#60;/a&#62; ]&#60;br&#62;"</PRE
></FONT
></TD
></TR
></TABLE
></LI
></OL
></LI
></UL
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Search for "maxlength" thoroughly!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If it still does not work, then you forgot to change  "maxlength" somewhere - perhaps in a file under the admin folder. Search thoroughly!</P
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MODIFYING-PHP-NUKE-STORIES-ARCHIVE"
>18.11. Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Stories Archive module</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-STORIES-3"
></A
><P
><B
>Figure 18-14.    Administration panel: Add story.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/stories.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Add story.</P
></DIV
></P
></DIV
></DIV
></P
><P
>In this section we modify the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Stories Archive module:</P
><P
></P
><UL
><LI
><P
>How to order the articles in the Stories Archive module (<A
HREF="#ORDER-ARTICLES-IN-STORIES-ARCHIVE"
>Section 18.11.1</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="ORDER-ARTICLES-IN-STORIES-ARCHIVE"
>18.11.1. How to order the articles in the Stories Archive module</A
></H3
><P
>Sometimes you may wish a different order of articles in the Stories module. To change the article order so that the articles appear in alphabetical topic order, instead of a LIFO (last-in-first-out) order, edit the following line of the modules/Sections/index.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$result = sql_query("select sid, catid, title, time, comments, counter, topic, 
alanguage, score, ratings from ".$prefix."_stories order by sid DESC 
limit $min,$max", $dbi); </PRE
></FONT
></TD
></TR
></TABLE
><P
>Change it to (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=13604"
TARGET="_top"
>Sorting the Stories Archive by Topic first</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$result = sql_query("select sid, catid, title, time, comments, counter, topic, 
alanguage, score, ratings from ".$prefix."_stories order by topic ASC 
limit $min,$max", $dbi); </PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Changing the order of results</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>This is a typical example of  changing the order of results of a database selection. This was achieved by solely replacing  "ORDER BY sid DESC" with  "ORDER BY topic ASC" in the SQL query string. In plain text, this means "order the results by ascending topic".  Whenever you are not satisfied with the order of your results, you will know that you have to add or change an ORDER BY clause to an SQL query string somewhere in your module. Of course, you will still have to find where, but hopefully there will be only a few calls to sql_query() in the code, so that, in the worst case, you could try them all and find the one that works. </P
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="MODIFYING-PHP-NUKE-ADMIN-PANEL"
></A
>Chapter 19. Modifying the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> administration panel</H1
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-ADMIN-PANEL-2"
></A
><P
><B
>Figure 19-1.    Administration panel.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/admin-panel.png"><DIV
CLASS="CAPTION"
><P
>Administration panel.</P
></DIV
></P
></DIV
></DIV
></P
><P
>This chapter is devoted to modifications of the administration panel - a rather exotic topic, but with interesting applications:</P
><P
></P
><UL
><LI
><P
>How to set an arbitrary "Stories Number in Home" (<A
HREF="#SET-ARBITRARY-STORIES-NUMBER-IN-HOME"
>Section 19.1</A
>),</P
></LI
><LI
><P
>How to allow HTML in the Newsletter (<A
HREF="#ALLOW-HTML-NEWSLETTER"
>Section 19.2</A
>).</P
></LI
></UL
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="SET-ARBITRARY-STORIES-NUMBER-IN-HOME"
>19.1. How to set an arbitrary "Stories Number in Home"</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PREFERENCES-3"
></A
><P
><B
>Figure 19-2.    Administration panel: Preferences.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/preferences.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Preferences.</P
></DIV
></P
></DIV
></DIV
></P
><P
>You want to display only, say, 3 News on the hopepage of your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. But in the administration panel you get only the options to change the "Stories Number in Home" to 5, 10, 15, 20 , 25 and 30.</P
><P
>Go to admin/modules/settings.php and change at line 61<A
NAME="AEN13422"
HREF="#FTN.AEN13422"
><SPAN
CLASS="footnote"
>[24]</SPAN
></A
>:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>        ."&#60;/td&#62;&#60;/tr&#62;&#60;tr&#62;&#60;td&#62;"
        .""._STORIESHOME.":&#60;/td&#62;&#60;td&#62;&#60;select name='xstoryhome'&#62;"
        ."&#60;option name='xstoryhome'&#62;$storyhome&#60;/option&#62;"
        ."&#60;option name='xstoryhome'&#62;5&#60;/option&#62;"
        ."&#60;option name='xstoryhome'&#62;10&#60;/option&#62;"
        ."&#60;option name='xstoryhome'&#62;15&#60;/option&#62;"
        ."&#60;option name='xstoryhome'&#62;20&#60;/option&#62;"
        ."&#60;option name='xstoryhome'&#62;25&#60;/option&#62;"
        ."&#60;option name='xstoryhome'&#62;30&#60;/option&#62;"
        ."&#60;/select&#62;"</PRE
></FONT
></TD
></TR
></TABLE
><P
>to </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>        ."&#60;/td&#62;&#60;/tr&#62;&#60;tr&#62;&#60;td&#62;"
        .""._STORIESHOME.":&#60;/td&#62;&#60;td&#62;&#60;select name='xstoryhome'&#62;"
        ."&#60;option name='xstoryhome'&#62;$storyhome&#60;/option&#62;"
        ."&#60;option name='xstoryhome'&#62;3&#60;/option&#62;"
        ."&#60;option name='xstoryhome'&#62;5&#60;/option&#62;"
        ."&#60;option name='xstoryhome'&#62;10&#60;/option&#62;"
        ."&#60;option name='xstoryhome'&#62;15&#60;/option&#62;"
        ."&#60;option name='xstoryhome'&#62;20&#60;/option&#62;"
        ."&#60;option name='xstoryhome'&#62;25&#60;/option&#62;"
        ."&#60;option name='xstoryhome'&#62;30&#60;/option&#62;"
        ."&#60;/select&#62;"</PRE
></FONT
></TD
></TR
></TABLE
><P
>Now you can select "3" from the drop-down list. You get the idea. See <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=40"
TARGET="_top"
>How to set an arbitrary "Stories Number in Home"</A
>.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="ALLOW-HTML-NEWSLETTER"
>19.2. How to allow HTML in the Newsletter</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-NEWSLETTER-2"
></A
><P
><B
>Figure 19-3.    Administration panel: Newsletter.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/newsletter.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Newsletter.</P
></DIV
></P
></DIV
></DIV
></P
><P
>If you want to use HTML, instead of only plain text in the Newsletter from the administration panel, you have to do the following:</P
><P
>Replace the function newsletter_send() in admin/modules/newsletter.php with:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>function newsletter_send($title, $content) {
    global $user_prefix, $sitename, $dbi, $nukeurl, $adminmail;
    $send_html_messages = "yes";
    $from = $adminmail;
    $subject = "[$sitename Newsletter]: ".stripslashes($title)."";
    $content = stripslashes($content);
    $content = "$sitename "._NEWSLETTER."\n\n\n$content\n\n- 
$sitename "._STAFF."\n\n\n\n\n\n"._NLUNSUBSCRIBE."";
    $result = sql_query("select email from ".$user_prefix.
"_users where newsletter='1'", $dbi);
    while(list($email) = sql_fetch_row($result, $dbi)) {
        $xheaders = "From: " . $sitename . " &#60;" . $adminmail . "&#62;\n";
        $xheaders .= "X-Sender: &#60;" . $adminmail . "&#62;\n";
        $xheaders .= "X-Mailer: PHP\n"; // mailer
        $xheaders .= "X-Priority: 6\n"; // Urgent message!
        if ($send_html_messages == "yes") {
            $xheaders .= "Content-Type: text/html; 
charset=iso-8859-1\n"; // Mime type
        }
        mail("$email","$subject","$content",$xheaders);
    }
    Header("Location: admin.php?op=newsletter_sent");
} </PRE
></FONT
></TD
></TR
></TABLE
><P
>and the function massmail_send() with </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>function massmail_send($title, $content) {    
    global $user_prefix, $sitename, $dbi, $nukeurl, $adminmail;
    $send_html_messages = "yes";
    $from = $adminmail;
    $subject = "[$sitename]: $title";
    $content = stripslashes($content);
    $content = ""._FROM.": $sitename\n\n\n\n$content\n\n\n\n- 
    $sitename "._STAFF."\n\n\n\n"._MASSEMAILMSG."";
    $result = sql_query("select email from ".$user_prefix
    ."_users where uid != '1'", $dbi);
    while(list($email) = sql_fetch_row($result, $dbi)) {
        $xheaders = "From: " . $sitename . " &#60;" . $adminmail . "&#62;\n";
        $xheaders .= "X-Sender: &#60;" . $adminmail . "&#62;\n";
        $xheaders .= "X-Mailer: PHP\n"; // mailer
        $xheaders .= "X-Priority: 6\n"; // Urgent message!
        if ($send_html_messages == "yes") {
            $xheaders .= "Content-Type: text/html;
            charset=iso-8859-1\n"; // Mime type
        }
        mail("$email","$subject","$content",$xheaders);
    }
    Header("Location: admin.php?op=massmail_sent");
}    </PRE
></FONT
></TD
></TR
></TABLE
><P
>The changes are in both functions the same: a flag, $send_html_messages, is checked and if set to "yes", the headers of the Newsletter mails (stored in the $xheaders variable) get an extra line for the MIME type:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Content-Type: text/html; charset=iso-8859-1</PRE
></FONT
></TD
></TR
></TABLE
><P
>See also <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=13945"
TARGET="_top"
>HTML Newsletter</A
>, but be warned that the code presented in that link, may not escape double quotes, probabbly due to an upgrade bug in the forums.</P
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="BLOCKS"
></A
>Chapter 20. Creating <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks</H1
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-BLOCKS-2"
></A
><P
><B
>Figure 20-1.    Administration panel: Blocks.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/blocks.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Blocks.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Having seen how to <EM
>modify</EM
> a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block (<A
HREF="#MODIFYING-PHP-NUKE-BLOCKS"
>Chapter 17</A
>), we can gradually try our skills in <EM
>creating</EM
> one. We proceed by showing:</P
><P
></P
><UL
><LI
><P
>The characteristics of the various types of blocks (<A
HREF="#BLOCK-TYPES"
>Section 20.1</A
>),</P
></LI
><LI
><P
>How to create a new block (<A
HREF="#BLOCK-CREATION"
>Section 20.2</A
>),</P
></LI
><LI
><P
>A simple Content block (<A
HREF="#SIMPLE-CONTENT-BLOCK"
>Section 20.3</A
>),</P
></LI
><LI
><P
>How to include PHP/HTML files in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block (<A
HREF="#HOW-TO-INCLUDE-FILES"
>Section 20.4</A
>),</P
></LI
><LI
><P
>How to use Javascript in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks (<A
HREF="#JAVASCRIPT-IN-PHP-NUKE-BLOCKS"
>Section 20.5</A
>),</P
></LI
><LI
><P
>How to display Flash in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks (<A
HREF="#FLASH-PHP-NUKE-BLOCKS"
>Section 20.6</A
>),</P
></LI
><LI
><P
>How to show advertisements in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks (<A
HREF="#ADVERTISEMENTS-IN-PHP-NUKE-BLOCKS"
>Section 20.7</A
>),</P
></LI
><LI
><P
>How to display images in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks (<A
HREF="#DISPLAY-IMAGES-PHP-NUKE-BLOCKS"
>Section 20.8</A
>),</P
></LI
><LI
><P
>How to display HTML forms in a block: Paypal (<A
HREF="#PAYPAL-BLOCK-FOR-PHP-NUKE"
>Section 20.9</A
>).</P
></LI
></UL
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="BLOCK-TYPES"
>20.1. The characteristics of the various types of blocks</A
></H2
><P
>There are 3 different types of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks:</P
><P
></P
><UL
><LI
><P
>RSS/RDF: They capture news that's available from other sites in standard reading format, i.e. text (For example the site <A
HREF="www.spaghettibrain.com"
TARGET="_top"
>spaghettibrain</A
> has a lot of news that are at other sites' disposal).</P
></LI
><LI
><P
>Blocks of contents: blocks in which we insert simple text or HTML text that will be then displayed inside the block (See following example)</P
></LI
><LI
><P
>Blocks of files: They are <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> scripts that execute fixed commands (see <A
HREF="#BLOCK-CREATION"
>Section 20.2</A
>)</P
></LI
></UL
><P
>In this paragraph we will see a simple example of how to insert the links and the text in a text block. If you already know a little HTML there is no point in following this example.</P
><P
>We suppose you want to insert a block with text and a link to 3 different sites:</P
><P
>The Webmaster who wrote this book manages the following sites:</P
><P
></P
><UL
><LI
><P
><A
HREF="http://www.spaghettibrain.com"
TARGET="_top"
>spaghettibrain.com</A
></P
></LI
><LI
><P
><A
HREF="http://www.spaghettiopen.com"
TARGET="_top"
>spaghettiopen.com</A
></P
></LI
><LI
><P
><A
HREF="http://www.spaghettipython.com"
TARGET="_top"
>spaghettipython.com</A
></P
></LI
></UL
><P
>The text will be formatted in this way in order to be inserted in the block (see <A
HREF="#FIG-BLOCK-EXAMPLE"
>Figure 20-2</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;B&#62; webmaster &#60;/b&#62; who writes  this book manages the following sites: &#60;b &#62;&#60;br&#62;
&#60;a href="http://www.spaghettibrain.com"&#62;spaghettibrain.com&#60;/a&#62;
&#60;a href ="http://www.claudioerba.com"&#62;claudioerba.com&#60;/a&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-BLOCK-EXAMPLE"
></A
><P
><B
>Figure 20-2.    Block example
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/snapshot15.png"><DIV
CLASS="CAPTION"
><P
>Block example</P
></DIV
></P
></DIV
></DIV
></P
><P
>Some Small HTML lessons:</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>&#60;b&#62;</DT
><DD
><P
>It is for bold text, it opens a tag. All words that we write after this tag will be bold until &#60;/B&#62; (which closes the tag).</P
></DD
><DT
>&#60;br&#62;</DT
><DD
><P
>It is for a page break, it does not need to be closed.</P
></DD
><DT
>&#60;ahref="http://siteyouwant.com"&#62;SiteName&#60;/a&#62;</DT
><DD
><P
>is used to open the http://siteyouwant.com.</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="BLOCK-CREATION"
>20.2. How to create a new block</A
></H2
><P
>To create a block of the third type, i.e. a php script that interfaces with the database and extrapolates the data, first of all we have to understand how these blocks are structured. They are contained in a folder called blocks, the name of the block must be block-blockname.php. It is very important all blocks start with &#8220;block-&#8221; . Every block in which the name will start with block- will be included in the screen of the blocks that can be activated. We will find in the blocks administration menu all the available blocks in the file_name drop-down list. If not assigned by the administrator, the name will be the same that follows block- We can't use break spaces in a block name, they must be replaced by using underscore _ . All the blocks that will respect these rules will be inserted in the blocks admin menu.</P
><P
>We describe:</P
><P
></P
><UL
><LI
><P
>How to create a block, theoretical approach (<A
HREF="#BLOCK-THEORY"
>Section 20.2.1</A
>),</P
></LI
><LI
><P
>How to create a block, a practical example (<A
HREF="#BLOCK-PRACTICE"
>Section 20.2.2</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="BLOCK-THEORY"
>20.2.1. How to create a block, theoretical approach</A
></H3
><P
>You have to follow these rules when creating a block:</P
><P
></P
><UL
><LI
><P
>In every block you create you have to insert the following code at the beginning:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if (eregi("block-Name_of_Block.php", $PHP_SELF)) {
Header("Location: index.php");
die();
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>By using this code you protect the file avoiding users approaching it directly from the blocks folder, and the block will be displayed only when selected from your site. </P
></LI
><LI
><P
>In the blocks you can include everything you want, Perl, java, php, flash etc...</P
></LI
><LI
><P
>All the block output must have a value that can be obtained from the variable $content.</P
></LI
></UL
><P
>Remember that you have a limited amount of space in the block, pay special attention to the layout!</P
><DIV
CLASS="WARNING"
><P
></P
><TABLE
CLASS="WARNING"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/warning.png"
HSPACE="5"
ALT="Warning"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Warning</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>In order to have W3C standard compatible blocks, Francisco Burzi says:
<A
NAME="AEN13631"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>"To respect the W3c standards for HTML 4.01 Transitional, it is very important that you replace all "instances of &#38;" in the URL by the tag "&#38;amp; " </P
></BLOCKQUOTE
>For example the URL:
<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;a href="modules.php?op=modload&#38;name=FAQ&#38;file=index"&#62;</PRE
></FONT
></TD
></TR
></TABLE
>must be written:
<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;a href="modules.php?op=modload&#38;amp;name=FAQ&#38;amp;file=index"&#62;</PRE
></FONT
></TD
></TR
></TABLE
>and don't use, for example, the tag "li" (used to create a list), but leave that in the style sheet (CSS) which will make it for you.</P
></TD
></TR
></TABLE
></DIV
><P
>The background for the tables and font etc., are better left to the style sheet (CSS).</P
><P
>We will now see how to construct a block starting from the beginning.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="BLOCK-PRACTICE"
>20.2.2. How to create a block, a practical example</A
></H3
><P
>We will make a very simple block that shows the pages visited in our site the day before. We'll have a single query and a single value, in order to make things easier. Our block is called "hits", so the complete name of the block will be block-hits.php</P
><P
>First of all, we open the php tag</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php</PRE
></FONT
></TD
></TR
></TABLE
><P
>Then we insert the protection script we've seen before:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if (eregi("block-hits.php", $PHP_SELF)) {
Header("Location: index.php");
die();
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>And now we insert the variables that we want to call (in this case the parameter $prefix and $dbi, which handles the database abstraction): </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>global $prefix, $dbi;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Now we continue inserting the query that reads from the database how many pages were seen in our site: (the instruction would be &#8220;read the first line value of the table nuke_counter in the cell count&#8221;) </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$result = sql_query("select count from "$prefix."_counter 
                     order by type desc limit 0.1", $dbi);
list($count) = sql_fetch_row($result, $dbi);</PRE
></FONT
></TD
></TR
></TABLE
><P
>Finally, we pass the &#8220;$content&#8221; variable that will be echoed by the block and close the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> tag: </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$content. = $count
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Our complete script will be :</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if (eregi("block-hits,php", $PHP_SELF)) {
  Header("Location: index.php");
  die();
}
global $prefix, $dbi;
$result = sql_query("select count from "$prefix."_counter 
                     order by type desc limit 0.1", $dbi);
list($count) = sql_fetch_row($result, $dbi);
$content. = $count
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="SIMPLE-CONTENT-BLOCK"
>20.3. Simple Content block</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-CONTENT-2"
></A
><P
><B
>Figure 20-3.    Administration panel: Content.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/content.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Content.</P
></DIV
></P
></DIV
></DIV
></P
><P
>PHP-Nuke comes with a Content module (<A
HREF="#FIG-CONTENT-2"
>Figure 20-3</A
>). But how about a Content block? How to display links to Content pages in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block? A block may be desirable in case you wish to place a link summary of the Content module's er...content, somewhere in the left, central or right columns.</P
><P
>After you have created the desired categories for the Content module, you can then go to http://yoursite.com/admin.php?op=content and start adding pages to the categories. To find out the link to these pages, you will have to click on the Content link in the modules block, view each page and copy its url from the browser's address window, then just add these urls to a html block with maybe the following HTML code:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#38;nbsp;&#38;nbsp;&#60;b&#62;&#60;big&#62;&#38;middot;&#60;/big&#62;&#60;/b&#62; &#60;img src=images/blocks/icon_dot.gif&#62;
&#38;nbsp;&#60;a href="modules.php?name=Content...etc...1"&#62;Page Title 1&#60;/a&#62;&#60;BR&#62;
&#38;nbsp;&#38;nbsp;&#60;b&#62;&#60;big&#62;&#38;middot;&#60;/big&#62;&#60;/b&#62; &#60;img src=images/blocks/icon_dot.gif&#62;
&#38;nbsp;&#60;a href="modules.php?name=Content...etc...2"&#62;Page Title 2&#60;/a&#62;&#60;BR&#62;
&#38;nbsp;&#38;nbsp;&#60;b&#62;&#60;big&#62;&#38;middot;&#60;/big&#62;&#60;/b&#62; &#60;img src=images/blocks/icon_dot.gif&#62;
&#38;nbsp;&#60;a href="modules.php?name=Content...etc...3"&#62;Page Title 3&#60;/a&#62;&#60;BR&#62;
&#38;nbsp;&#38;nbsp;&#60;b&#62;&#60;big&#62;&#38;middot;&#60;/big&#62;&#60;/b&#62; &#60;img src=images/blocks/icon_dot.gif&#62;
&#38;nbsp;&#60;a href="modules.php?name=Content...etc...4"&#62;Page Title 4&#60;/a&#62;&#60;BR&#62;
&#38;nbsp;&#38;nbsp;&#60;b&#62;&#60;big&#62;&#38;middot;&#60;/big&#62;&#60;/b&#62; &#60;img src=images/blocks/icon_dot.gif&#62;
&#38;nbsp;&#60;a href="modules.php?name=Content...etc...5"&#62;Page Title 5&#60;/a&#62;&#60;BR&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>A block that does the job is the following:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if (eregi("block-Content.php",$PHP_SELF)) {
    Header("Location: index.php");
    die();
}
$content  =  "&#38;nbsp;&#38;nbsp;&#60;b&#62;&#60;big&#62;&#38;middot;&#60;/big&#62;&#60;/b&#62; &#60;img src=images/blocks/icon_dot.gif&#62;
&#38;nbsp;&#60;a href=\"modules.php?name=Content...etc...1\"&#62;Page Title 1&#60;/a&#62;&#60;BR&#62;";
$content  .= "nbsp;&#38;nbsp;&#60;b&#62;&#60;big&#62;&#38;middot;&#60;/big&#62;&#60;/b&#62; &#60;img src=images/blocks/icon_dot.gif&#62;
&#38;nbsp;&#60;a href=\"modules.php?name=Content...etc...2\"&#62;Page Title 2&#60;/a&#62;&#60;BR&#62;";
$content  .= "nbsp;&#38;nbsp;&#60;b&#62;&#60;big&#62;&#38;middot;&#60;/big&#62;&#60;/b&#62; &#60;img src=images/blocks/icon_dot.gif&#62;
&#38;nbsp;&#60;a href=\"modules.php?name=Content...etc...3\"&#62;Page Title 3&#60;/a&#62;&#60;BR&#62;";
$content  .= "nbsp;&#38;nbsp;&#60;b&#62;&#60;big&#62;&#38;middot;&#60;/big&#62;&#60;/b&#62; &#60;img src=images/blocks/icon_dot.gif&#62;
&#38;nbsp;&#60;a href=\"modules.php?name=Content...etc...4\"&#62;Page Title 4&#60;/a&#62;&#60;BR&#62;";
$content  .= "nbsp;&#38;nbsp;&#60;b&#62;&#60;big&#62;&#38;middot;&#60;/big&#62;&#60;/b&#62; &#60;img src=images/blocks/icon_dot.gif&#62;
&#38;nbsp;&#60;a href=\"modules.php?name=Content...etc...5\"&#62;Page Title 5&#60;/a&#62;&#60;BR&#62;";
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Name it block-Content, put it in the blocks folder, then "create" it in the blocks administration (see <A
HREF="#ADMINISTRATION-FUNCTIONS"
>Section 7.1</A
>). </P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="HOW-TO-INCLUDE-FILES"
>20.4. How to include PHP/HTML files in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block</A
></H2
><P
>Suppose you want to write a block, block-bar.php, that includes the file foo/bar.php. The way <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> displays a block is that it first includes the block, with a statement like </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>include("blocks/block-bar.php");</PRE
></FONT
></TD
></TR
></TABLE
><P
>then makes a table and puts in the title, and makes another table row, and "echo"es the $content variable. Thus, the $content variable must contain all the output of foo/bar.php, if your block has to contain its output. The <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> output control functions come in here very handy. The <A
HREF="http://www.php.net/manual/en/ref.outcontrol.php"
TARGET="_top"
>PHP output control functions</A
> allow you to control when output is sent from the script. This can be useful in various situations, especially if you need to send headers to the browser after your script has began outputting data. The output control functions (or output buffering functions, as they are often called and as the ob_ prefix in their name suggests) do not affect headers sent using header() or setcookie(), only functions such as echo() and data between blocks of <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code.</P
><P
>Output buffering is a powerful tool in <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> which allows you to buffer a script's output. You can  even edit this buffer before returning it to the client. The <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> functions that constitute the output buffering toolbox are:</P
><P
></P
><UL
><LI
><P
>ob_start([callback function]) - Starts an output buffering session.</P
></LI
><LI
><P
>ob_flush() - Send the contents of the buffer to the client and clear the buffer.</P
></LI
><LI
><P
>ob_get_contents() - Returns the contents of the buffer. The buffer is not cleared. </P
></LI
><LI
><P
>ob_end_clean() - Ends the current buffering session and purges the buffer. </P
></LI
><LI
><P
>ob_end_flush() - Ends the current buffering session and displays the buffer.</P
></LI
><LI
><P
>ob_get_length() - (Version &#62;= 4.0.2) Return the size of the current buffer. </P
></LI
><LI
><P
>ob_get_clean() - (Version &#62;= 4.3) Composite of ob_get_contents() and</P
></LI
><LI
><P
>ob_end_clean(). The buffer is returned and the session ends.</P
></LI
></UL
><P
>How can we use output buffering to include the output of foo/bar.php in our <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block? The idea is simple: rather than having <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> send output directly to the standard output device (the browser) as the script gets executed, we will define a special output buffer which stores all the output generated by the script during its lifetime. When we do this, the output of the script is never seen by the user unless we explicitly make the contents of this buffer visible via a call to PHP's output control API (through one of the above functions). We put the foo folder in the main phpnuke directory, and use this code our block:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>ob_start(); 
include("foo/bar.php");
$output = ob_get_contents();
ob_end_clean(); 
$content = $output;</PRE
></FONT
></TD
></TR
></TABLE
><P
>This way the $content variable will contain the output of foo/bar.php, which will thus be shown in the block. To learn more about <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> output buffering, see <A
HREF="http://www.devshed.com/Server_Side/PHP/OutputBuffering/"
TARGET="_top"
>Output Buffering with PHP</A
> and <A
HREF="http://jinxidoru.com/tutorials/buffering.html"
TARGET="_top"
>PHP Output Buffering tutorial</A
>. See also <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=11465"
TARGET="_top"
>Scripting a new Block Problem</A
>, for a complete example of including a <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> scoring application in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="JAVASCRIPT-IN-PHP-NUKE-BLOCKS"
>20.5. How to use Javascript in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks</A
></H2
><P
>Javascript can be used with <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> without problems, as long as you remember that they operate in different environments (see <A
HREF="http://forums.devnetwork.net/viewtopic.php?t=1030"
TARGET="_top"
>Frames, JavaScript, and <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> Overview</A
>):</P
><P
></P
><UL
><LI
><P
>PHP-Nuke, like PHP, is server side. Therefore, if you want to pass data from a form to PHP-Nuke, you <EM
>have to</EM
> submit it and load the page again. There is no getting around it.</P
></LI
><LI
><P
>Javascript is client side (run in the browser), and can help you with dynamic functionality. You can easily use JavaScript and <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> together. However, just like PHP, <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> knows <EM
>nothing</EM
> about Javascript. <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> will just echo the Javascript code to the HTML page, just as it would echo the value of a string variable.</P
></LI
></UL
><P
>Thus, from the point of view of <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and PHP-Nuke, there is no difference between </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
echo 'Welcome to PHP-Nuke';
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>and</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
echo '&#60;script type="text/javascript"&#62;
&#60;!--
if ( 1 ) {
    window.open(\'modules.php?name=News\', \'_WELCOME\',
    \'HEIGHT=450, resizable=yes, WIDTH=600\');
}
//--&#62;
&#60;/script&#62;';
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>They both echo strings, of which the first one is simply displayed in the client's browser as a welcome message, while the second one is interpreted by the client's browser and leads to the browser sending a request for the News module, which in turn sends the usual home page of a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site to be displayed on the client.</P
><P
>With this in mind, Javascript does not demand any special treatment when used in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks. Just append the Javascript code to the $content variable of the block and you are done. Of course, you have to escape double quotes - and it is a good idea to add a newline (\n) to the end of each Javascript line (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=13048"
TARGET="_top"
>Javascript and BLOCKs</A
>). </P
><P
>If you use <A
HREF="http://www.gnu.org/software/sed/manual/sed.html"
TARGET="_top"
>sed</A
>, the following sequence of sed commands, applied to a Javascript file, will produce the right <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code to include in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>1,$s/"/\\"/g <A
NAME="SED1"
><IMG
SRC="images/callouts/1.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
>
1,$s/^/\$content \.= "/ <A
NAME="SED2"
><IMG
SRC="images/callouts/2.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"></A
>
1,$s/$/";/ <A
NAME="SED3"
><IMG
SRC="images/callouts/3.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"></A
>
1,$s/";$/\\n";/ <A
NAME="SED4"
><IMG
SRC="images/callouts/4.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"></A
></PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="CALLOUTLIST"
><DL
COMPACT="COMPACT"
><DT
><A
HREF="#SED1"
><IMG
SRC="images/callouts/1.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
></DT
><DD
>       Escape all double quotes.
      </DD
><DT
><A
HREF="#SED2"
><IMG
SRC="images/callouts/2.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"></A
></DT
><DD
>         Add the string '$content .= "' at the start of every line.
       </DD
><DT
><A
HREF="#SED3"
><IMG
SRC="images/callouts/3.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"></A
></DT
><DD
>      Add the string '";' at the end of every line.
       </DD
><DT
><A
HREF="#SED4"
><IMG
SRC="images/callouts/4.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"></A
></DT
><DD
>       Add a newline \n at the end of each JS line.
       </DD
></DL
></DIV
><P
>You can put them in a file, sedscr, and tell sed to read sedscr for commands, while editing the original Javascript file (javascript):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>sed -f sedscr javascript &#62; block-Javascript.php</PRE
></FONT
></TD
></TR
></TABLE
><P
>Of course, you can use vi (<A
HREF="#VI"
>Section 11.1</A
>) too - see <A
HREF="#JAVASCRIPT-PHP"
>Section 21.9.1</A
> for a similar example - or just do the substitutions manually. The examples in this section demonstrate what you have to do (see also <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=379"
TARGET="_top"
>Javascript in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block</A
>):</P
><P
></P
><UL
><LI
><P
>How to create a Hello World block (<A
HREF="#CREATE-HELLO-WORLD-BLOCK"
>Section 20.5.1</A
>),</P
></LI
><LI
><P
>How to create a fade block (<A
HREF="#CREATE-FADE-BLOCK"
>Section 20.5.2</A
>),</P
></LI
><LI
><P
>How to create a Help Center Live block (<A
HREF="#CREATE-HELP-CENTER-LIVE-BLOCK"
>Section 20.5.3</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CREATE-HELLO-WORLD-BLOCK"
>20.5.1. How to create a Hello World block</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-HELLO-WORLD-JAVASCRIPT"
></A
><P
><B
>Figure 20-4.    Hello World block with Javascript.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/hello-world-javascript.png"><DIV
CLASS="CAPTION"
><P
>Hello World block with Javascript.</P
></DIV
></P
></DIV
></DIV
></P
><P
>We will start with a very simple block, one that just displays &#8220;Hello World&#8221;. Once you get the idea, you will be able to construct any Javascript block for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> - they all follow the same rules.</P
><P
>We will keep the Javascript code in a separate file, say hello-world.php, in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> includes directory. The includes directory is a natural place for it, because it also contains the javascript.php file (see <A
HREF="#JAVASCRIPT-PHP"
>Section 21.9.1</A
>). You can use the javascript.php file to store your own Javascript functions (as shown in <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=379"
TARGET="_top"
>Javascript in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block</A
>), but for this simple example, hello-world.php is more than enough. It contains only a few lines:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
echo '
document.write("Hello World!");
';
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Now, create a block, block-Hello_World.php, in the blocks folder that contains:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if (eregi("block-Hello_World.php",$_SERVER[PHP_SELF])) {
    Header("Location: index.php");
    die();
}
$content.="&#60;center&#62;&#60;script language=\"JavaScript\"
src=\"includes/hello-world.php\"&#62;&#60;/script&#62;&#60;/center&#62;&#60;/b&#62;";
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>As you can see, block-Hello_World.php loads the hello-world.php from the includes folder as a Javascript code. hello-world.php, in turn, is executed and echoes the document.write command in the HTML file that is sent to the client's browser. When a the browser receives it (and has Javascript enabled), executes the code writing the "Hello World" message in the place it was called - in the Hello World block.</P
><P
>Using this technique, you can create blocks that are very rich in functionality - just echo their code with a <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> file and call that file as Javascript code from the block. See <A
HREF="#CREATE-HELP-CENTER-LIVE-BLOCK"
>Section 20.5.3</A
> for a non-trivial example.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CREATE-FADE-BLOCK"
>20.5.2. How to create a fade block</A
></H3
><P
>So you have seen this cool fade effect on a site and you decided to incorporate it in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block on your site too? I mean that effect that makes the image fade gradually away, when you pass over it with the mouse cursor - and comes again gradually back the next time you revisit it with the mouse cursor. Before you plunge into this, consider that it is just an effect - and one that will work only with Internet Explorer. If you still feel you must have it, here is the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block that demonstrates this fade effect:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if (eregi("block-Fade.php",$PHP_SELF)) {
Header("Location: index.php");
die();
}
$content .= "&#60;script&#62; \n";
$content .= "\n";
$content .= "/* \n";
$content .= "Gradual-Highlight Image Script II- \n";
$content .= "By J. Mark Birenbaum (birenbau@ugrad.cs.ualberta.ca) \n";
$content .= "Permission granted to Dynamicdrive.com to feature script in archive \n";
$content .= "For full source to script, visit http://dynamicdrive.com \n";
$content .= "*/ \n";
$content .= "\n";
$content .= "nereidFadeObjects = new Object(); \n";
$content .= "nereidFadeTimers = new Object(); \n";
$content .= "\n";
$content .= "/* object - image to be faded (actual object, not name); \n";
$content .= "* destop - destination transparency level (ie 80, for mostly solid) \n";
$content .= "* rate - time in milliseconds between trasparency changes (best under 100) \n";
$content .= "* delta - amount of change each time (ie 5, for 5% change in transparency) \n";
$content .= "*/ \n";
$content .= "\n";
$content .= "function nereidFade(object, destOp, rate, delta){ \n";
$content .= "if (!document.all) \n";
$content .= "return \n";
$content .= "if (object != \"[object]\"){ //do this so I can take a string too \n";
$content .= "setTimeout(\"nereidFade(\"+object+\",\"+destOp+\",\"+rate+\",\"+delta+\")\",0); \n";
$content .= "return; \n";
$content .= "} \n";
$content .= "\n";
$content .= "clearTimeout(nereidFadeTimers[object.sourceIndex]); \n";
$content .= "\n";
$content .= "diff = destOp-object.filters.alpha.opacity; \n";
$content .= "direction = 1; \n";
$content .= "if (object.filters.alpha.opacity &#62; destOp){ \n";
$content .= "direction = -1; \n";
$content .= "} \n";
$content .= "delta=Math.min(direction*diff,delta); \n";
$content .= "object.filters.alpha.opacity+=direction*delta; \n";
$content .= "\n";
$content .= "if (object.filters.alpha.opacity != destOp){ \n";
$content .= "nereidFadeObjects[object.sourceIndex]=object; \n";
$content .= "nereidFadeTimers[object.sourceIndex]=setTimeout
(\"nereidFade(nereidFadeObjects[\"+object.sourceIndex+\"],\"+destOp+\",
\"+rate+\",\"+delta+\")\",rate);\n";
$content .= "\n";
$content .= "} \n";
$content .= "} \n";
$content .= "\n";
$content .= "&#60;/script&#62; \n";
$content .= "&#60;center&#62;&#60;img src=\"images/xxx.png\" 
style=\"filter:alpha(opacity=10)\" onmouseover=\"nereidFade(this,100,30,5)\"
onmouseout=\"nereidFade(this,10,50,5)\"&#62;&#60;/center&#62;";
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>This is an adaptation of the <A
HREF="http://www.dynamicdrive.com/dynamicindex4/highlightgrad2.htm"
TARGET="_top"
>Dynamic Highlight II Script</A
>, by J Mark Birenbaum, that just appends the Javascript code in the $content variable of a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block. You can adjust some parameters, such as the transparency level, the time between trasparency changes and amount of change each time - see the comments in the script's code. You should of course at least adapt the image source file (images/xxx.png in the code) to your situation.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CREATE-HELP-CENTER-LIVE-BLOCK"
>20.5.3. How to create a Help Center Live block</A
></H3
><P
>We will now move on to consider a block that can integrate the whole functionality of a Help Center: the Help Center Live block for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. <A
HREF="http://www.helpcenterlive.com"
TARGET="_top"
>Help Center Live</A
> is an Open Source Application that is distributed under the <ACRONYM
CLASS="ACRONYM"
>GNU</ACRONYM
> Genreal Public License (GPL). It helps you build a real support department for your business. With Help Center Live you can:</P
><P
></P
><UL
><LI
><P
>Create online accounts for your departments.</P
></LI
><LI
><P
>Create online accounts for your support operators and assign them to departments.</P
></LI
><LI
><P
>Create FAQs for your customers.</P
></LI
><LI
><P
>If an operator is online, he can see which hosts currently view the company's page and can initiate chat sessions with those hosts.</P
></LI
><LI
><P
>If someone from a support department is online (has logged in Help Center Live), the visitors browsing the company's page can see this and initiate a chat session with that support person. Thus, a customer can directly contact support personnel and seek a solution to his problem.</P
></LI
><LI
><P
>At the end of the chat session, a transcript of the session can be sent to the participants, at e-mail addresses of their choice. </P
></LI
><LI
><P
>If nobody from the support department(s) is online, the visitor still has the possibility to issue a trouble ticket.</P
></LI
><LI
><P
>Trouble tickets are tracked through a database and there exists a sophisticated backend for dealing with them.</P
></LI
></UL
><P
>How can you incorporate all this functionality into your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site?</P
><P
>At first, you must install Help Center Live on our site, or, if we only want to test it, local system. For this, download the package from <A
HREF="http://www.helpcenterlive.com"
TARGET="_top"
>Help Center Live</A
> and extract its contents into some folder of your web root, say under /helpcenter. Then you must edit the config.php file in the inc directory of that folder with the decent text editor (<A
HREF="#EDITING-PHP-NUKE-FILES"
>Chapter 11</A
>) of your choice. There are various parameters you can set up there, but the most important are the $URL_* ones</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$URL_site = "midas";
$URL_dir = "/helpcenter/"; 
$URL_maindir = "http://midas/helpcenter";
$URL_secure = 0;</PRE
></FONT
></TD
></TR
></TABLE
><P
>as well as the DB_* ones:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$DB_host = "localhost";
$DB_user = "db user here";
$DB_pass = "db password here";
$DB_name = "db name here"; 
$DB_prefix = "prefix here";
$DB_pconnect = 0;</PRE
></FONT
></TD
></TR
></TABLE
><P
>The $DB_host, $DB_user, $DB_pass and $DB_name variables could be the same as the $dbhost, $dbuser, $dbpass and $dbname variables in config.php respectively (see <A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>), although not necessarily so. </P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Terminate the DB_prefix with an underscore!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you use a $DB_prefix, make sure it ends in an underscore (_), otherwise it will be directly concatenated with the table names, rendering them difficult to tell apart.</P
></TD
></TR
></TABLE
></DIV
><P
>The $URL_site, $URL_dir and $URL_secure variables are only used in calls to the <A
HREF="http://www.php.net/manual/en/function.setcookie.php"
TARGET="_top"
>PHP setcookie() function</A
>:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>setcookie("Help Center LiveUser", $INFO_username, $time, $URL_dir, $URL_site, $URL_secure);</PRE
></FONT
></TD
></TR
></TABLE
><P
>Calls to setcookie() like the above are scattered throughout the code - <A
HREF="#TAB-HELP-CENTER-LIVE-SETCOOKIE"
>Table 20-1</A
> lists all files and lines containing such calls. If you experience the infamous login loop problem, it is probably because the setcookie() function was not able to set the cookie on the client. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
> </P
><P
><DIV
CLASS="TABLE"
><A
NAME="TAB-HELP-CENTER-LIVE-SETCOOKIE"
></A
><P
><B
>Table 20-1. Help Center Live: setcookie() calls</B
></P
><TABLE
BORDER="1"
RULES="all"
CLASS="CALSTABLE"
><COL
WIDTH="1*"
ALIGN="LEFT"
TITLE="COL0"><COL
WIDTH="1*"
ALIGN="LEFT"
TITLE="COL1"><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>File</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>setcookie() call</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>cp/logout.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>setcookie("HelpCenterLiveOperator", $LOGIN_username, $time, $URL_dir, $URL_site, $URL_secure);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>cp/logout.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>setcookie("HelpCenterLivePassword", $LOGIN_password, $time, $URL_dir, $URL_site, $URL_secure);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>cp/login.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>setcookie("HelpCenterLiveOperator", $LOGIN_username, $time, $URL_dir, $URL_site, $URL_secure);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>cp/login.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>setcookie("HelpCenterLivePassword", $LOGIN_password, $time, $URL_dir, $URL_site, $URL_secure);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>lh/live_request.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>setcookie("HelpCenterLiveGuest", $REQUEST_name, $time, $URL_dir, $URL_site, $URL_secure);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>lh/live_request.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>setcookie("HelpCenterLiveGuest", $REQUEST_delname, $deltime, $URL_dir, $URL_site, $URL_secure);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>lh/live_request.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>setcookie("HelpCenterLiveGuest", $REQUEST_name, $time, $URL_dir, $URL_site, $URL_secure);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>lh/live_mail.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>setcookie("HelpCenterLiveUser", $LOGIN_username, $time, $URL_dir, $URL_site, $URL_secure);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>lh/live_mail.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>setcookie("HelpCenterLivePass", $LOGIN_password, $time, $URL_dir, $URL_site, $URL_secure);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>tt/user_register.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>setcookie("Help Center LiveUser", $REGISTER_username, $time, $URL_dir, $URL_site, $URL_secure);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>tt/user_register.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>setcookie("Help Center LivePass", $REGISTER_password, $time, $URL_dir, $URL_site, $URL_secure);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>tt/user_login.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>setcookie("HelpCenterLiveUser", $LOGIN_username, $time, $URL_dir, $URL_site, $URL_secure);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>tt/user_login.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>setcookie("HelpCenterLivePass", $LOGIN_password, $time, $URL_dir, $URL_site, $URL_secure);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>tt/user_logout.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>setcookie("HelpCenterLiveUser", $LOGIN_username, $time, $URL_dir, $URL_site, $URL_secure);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>tt/user_logout.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>setcookie("HelpCenterLivePass", $LOGIN_password, $time, $URL_dir, $URL_site, $URL_secure);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>tt/user_info.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>setcookie("Help Center LiveUser", $INFO_username, $time, $URL_dir, $URL_site, $URL_secure);</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>tt/user_info.php</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>setcookie("Help Center LivePass", $INFO_password, $time, $URL_dir, $URL_site, $URL_secure);</P
></TD
></TR
></TBODY
></TABLE
></DIV
></P
><P
>This happens if, for example, you are installing Help Center Live locally, and the host name for $URL_site is taken from a hosts file and not from DNS. One way to get around this is to change all calls to setcookie() listed in <A
HREF="#TAB-HELP-CENTER-LIVE-SETCOOKIE"
>Table 20-1</A
> and take out the last two parameters, $URL_site and $URL_secure, as in the following example:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>setcookie("Help Center LiveUser", $INFO_username, $time, $URL_dir);</PRE
></FONT
></TD
></TR
></TABLE
><P
>After the installation of Help Center Live, you can point your browser to the address you entered for $URL_maindir (http://midas/helpcenter, in our example) and, after a successful login, you will be presented with the main screen (<A
HREF="#FIG-HELP-CENTER-LIVE-MAIN"
>Figure 20-5</A
>).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-HELP-CENTER-LIVE-MAIN"
></A
><P
><B
>Figure 20-5.    Help Center Live: Main screen.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/help-center-live-main.png"><DIV
CLASS="CAPTION"
><P
>Help Center Live: Main screen.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Now, create a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block that uses the method of our Hello World example in <A
HREF="#CREATE-HELLO-WORLD-BLOCK"
>Section 20.5.1</A
> to incorporate Help Center Live's functionality:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if (eregi("block-Online_Support.php",$_SERVER[PHP_SELF])) {
    Header("Location: index.php");
    die();
}
$content.="&#60;center&#62;&#60;script language=\"JavaScript\"
src=\"http://midas/helpcenter/lh/live.php\"&#62;&#60;/script&#62;&#60;/center&#62;&#60;/b&#62;";
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>We named the block above "block-Online_Support", but of course you can use whatever title you like, as long as it is passed as the "needle" string to the eregi() function of the block. The main code consists of only one line, which inserts a Javascript code, whose source file is the lh/live.php <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> script of Help Center Live. We did the same in <A
HREF="#CREATE-HELLO-WORLD-BLOCK"
>Section 20.5.1</A
> to output a Hello World message, but now, this simple line opens a whole world of possibilities for our <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> page! Let's see what happens when we activate the Online Support block we just created:</P
><P
>As long as all Help Center operators are logged off, the block will display a &#8220;Live Support is Offline&#8221; message, as in <A
HREF="#FIG-HELP-CENTER-LIVE-BLOCK-OFFLINE"
>Figure 20-6</A
>.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-HELP-CENTER-LIVE-BLOCK-OFFLINE"
></A
><P
><B
>Figure 20-6.    Help Center Live block: Live Support is Offline.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/help-center-live-block-offline.png"><DIV
CLASS="CAPTION"
><P
>Help Center Live block: Live Support is Offline.</P
></DIV
></P
></DIV
></DIV
></P
><P
>In this case, a click on the arrow in the block's inside will open a window that gives the customer the possibility to enter a trouble ticket (<A
HREF="#FIG-HELP-CENTER-LIVE-BLOCK-TROUBLE-TICKET"
>Figure 20-7</A
>). The window also offers a link to the FAQ and offers the choice to refer to an existing trouble ticket or create a new one.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-HELP-CENTER-LIVE-BLOCK-TROUBLE-TICKET"
></A
><P
><B
>Figure 20-7.    Help Center Live block: Creating a trouble ticket.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/help-center-live-block-trouble-ticket.png"><DIV
CLASS="CAPTION"
><P
>Help Center Live block: Creating a trouble ticket.</P
></DIV
></P
></DIV
></DIV
></P
><P
>On the other side, if some support operator is online <EM
>and has launched the request monitor</EM
> (which opens a window for the operator, displaying the live connections he is currently maintaining), the block will display it with a &#8220;Live Support is Online!&#8221; message (<A
HREF="#FIG-HELP-CENTER-LIVE-BLOCK-ONLINE"
>Figure 20-8</A
>).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-HELP-CENTER-LIVE-BLOCK-ONLINE"
></A
><P
><B
>Figure 20-8.    Help Center Live block: Live Support is Online.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/help-center-live-block-online.png"><DIV
CLASS="CAPTION"
><P
>Help Center Live block: Live Support is Online.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The request monitor, on the operator's side, will display all hosts that are currently viewing the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> page with the Online Support block showing the &#8220;Live Support is Online!&#8221; message (<A
HREF="#FIG-HELP-CENTER-LIVE-BLOCK-REQUEST-MONITOR"
>Figure 20-9</A
>). In other words, both users and operators are informed of each other's online presence.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-HELP-CENTER-LIVE-BLOCK-REQUEST-MONITOR"
></A
><P
><B
>Figure 20-9.    Help Center Live block: Request monitor for the operator.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/help-center-live-block-request-monitor.png"><DIV
CLASS="CAPTION"
><P
>Help Center Live block: Request monitor for the operator.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Now - and this adds a tremendous value to that tiny block we just created - each side can initiate an online chat with the other part:</P
><P
>The operator can click on the &#8220;Initiate&#8221; link and, after selecting the aproppriate department, initiate a chat with the selected user. The user will get pop-up window, notifying him of the operator's wish for a chat (<A
HREF="#FIG-HELP-CENTER-LIVE-BLOCK-USER-NOTIFY"
>Figure 20-10</A
>). The user can then decide whether to accept or decline the chat request.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-HELP-CENTER-LIVE-BLOCK-USER-NOTIFY"
></A
><P
><B
>Figure 20-10.    Help Center Live block: User notification of the operator's chat request.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/help-center-live-block-user-notify.png"><DIV
CLASS="CAPTION"
><P
>Help Center Live block: User notification of the operator's chat request.</P
></DIV
></P
></DIV
></DIV
></P
><P
>On the user's side, everybody can click on the arrow besides the &#8220;Online!&#8221; message in the Online Support block. This will initiate a chat request on behalf of the user (<A
HREF="#FIG-HELP-CENTER-LIVE-BLOCK-USER-REQUEST"
>Figure 20-11</A
>). The operator will get a pop-up window notifying him of the user's request, which he can accept or decline as well.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-HELP-CENTER-LIVE-BLOCK-USER-REQUEST"
></A
><P
><B
>Figure 20-11.    Help Center Live block: User chat request.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/help-center-live-block-user-request.png"><DIV
CLASS="CAPTION"
><P
>Help Center Live block: User chat request.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Either way, initiating from the operator's or user's side, a chat session starts between the two, hopefully leading to the solution of the user's problem. A transcript of the chat can be sent to an e-mail address of the participant's choice for future reference.</P
><P
>This completes our brief review of Help Center Live's features. If you have a look at the code of the Online Support block above and the code of the Hello World block in <A
HREF="#CREATE-HELLO-WORLD-BLOCK"
>Section 20.5.1</A
>, you will see that they both use the same method to incorporate functionality in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block through Javascript. The method is the same, but what a huge difference in functionality! There, a simple &#8220;Hello World&#8221; output - here, a full-featured Help Center! This demonstrates the broad spectrum of possibilities that a simple line like</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$content.="&#60;center&#62;&#60;script language=\"JavaScript\"
src=\"Some &#60;acronym&#62;PHP&#60;/acronym&#62; script\"&#62;&#60;/script&#62;&#60;/center&#62;&#60;/b&#62;";</PRE
></FONT
></TD
></TR
></TABLE
><P
>can offer, when used intelligently in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block with Javascript.</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Help Center Live is looking for a sponsor!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>HCL is getting well over a million hits per month and its on a huge increase keeping in mind that Fantastico now has HCL  as a featured script for install. Mike, the developer of HCL, offers it under the GPL  - however, he is looking for  sponsor to help him continue its development for free and cope with the ever-increasing hosting fees and other expenses. Please contact Mike, if you are interested and serious about sponsoring HCL.</P
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="FLASH-PHP-NUKE-BLOCKS"
>20.6. How to display Flash in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks</A
></H2
><P
>To show Flash in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block, you simply have to include the appropriate HTML code in the $content variable. Since the HTML code is something like</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"
codebase=\"http://download.macromedia.com/pub/shockwave/cabs/
flash/swflash.cab#version=6,0,29,0\" width=\"350\" height=\"100\"&#62;
&#60;param name=\"movie\" value=\"yourMovie.swf\"&#62;
&#60;param name=quality value=high&#62;
&#60;embed src=\"yourMovie.swf\" quality=high 
pluginspage=\"http://www.macromedia.com/shockwave/
download/index.cgi?P1_Prod_Version=ShockwaveFlash\" 
type=\"application/x-shockwave-flash\" 
width=\"350\" height=\"100\"&#62;&#60;/embed&#62;
&#60;/object&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block code should be something like</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$content = "&#60;object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"
codebase=\"http://download.macromedia.com/pub/shockwave/cabs/
flash/swflash.cab#version=6,0,29,0\" width=\"350\" height=\"100\"&#62; "
."&#60;param name=\"movie\" value=\"yourMovie.swf\"&#62; "
."&#60;param name=quality value=high&#62; "
."&#60;embed src=\"yourMovie.swf\" quality=high 
pluginspage=\"http://www.macromedia.com/shockwave/
download/index.cgi?P1_Prod_Version=ShockwaveFlash\" 
type=\"application/x-shockwave-flash\" 
width=\"350\" height=\"100\"&#62;&#60;/embed&#62;"
."&#60;/object&#62;";</PRE
></FONT
></TD
></TR
></TABLE
><P
>See <A
HREF="#PHP-NUKE-HEADER-DISPLAY-FLASH-OBJECT"
>Section 14.3.8</A
> on how to display Flash in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> header, like a banner.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="ADVERTISEMENTS-IN-PHP-NUKE-BLOCKS"
>20.7. How to show advertisements in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks</A
></H2
><P
>Advertisements are a popular source of revenue for webmasters. It doesn't take long until the young webmaster feels attracted to the sirene call of affiliate programs, banners or context relevant advertising. </P
><P
>Advertisements are often created through the use of a Javascript function, called at the right place in the HTML code. We have already treated the subject of Javascript in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks (see <A
HREF="#JAVASCRIPT-IN-PHP-NUKE-BLOCKS"
>Section 20.5</A
>) and modules (see <A
HREF="#JAVASCRIPT-IN-PHP-NUKE-MODULES"
>Section 21.9</A
>) and seen that Javascript does not pose any special problems with <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. However, due to the increasing popularity of Google's <A
HREF="https://www.google.com/adsense/overview"
TARGET="_top"
>AdSense</A
> program, there has been an increasing demand for ready-to-use solutions in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> field. The following code examples should be seen as representative examples of how such advertising functionality can be incorporated in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks. You can use them as starting point for <A
HREF="http://www.content.overture.com/d/USm/ps/cm.jhtml"
TARGET="_top"
>similar advertising solutions</A
>, as offered by today's modern search engines or affiliate programs.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Ready-to-use Google AdSense Block</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you don't feel like writing your own Google AdSense block, just use a ready-made one! Go to <A
HREF="http://home.vie4life.com/downloads-cat-13.html"
TARGET="_top"
>http://home.vie4life.com/downloads-cat-13.html</A
> and download a ready-to-use  AdSense block.</P
></TD
></TR
></TABLE
></DIV
><P
>Create a block called block-AdSense.php and add the following in the file:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if (eregi("block-AdSense.php",$PHP_SELF)) {
  Header("Location: index.php");
  die();
}
?&#62;
&#60;script language="JavaScript"&#62;
&#60;!--
google_ad_client = 'your client-number';
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = '468X60_as';
google_color_border = "E5E5E5";
google_color_bg = "E5E5E5";
google_color_link = "336699";
google_color_url = "000000";
google_color_text = "000000";
// --&#62;
&#60;/script&#62;
&#60;?php
$content .= "&#60;center&#62;&#60;script language=\"JavaScript\"
src=\"http://pagead2.googlesyndication.com/pagead/show_ads.js\"&#62;";
$content .= "&#60;/script&#62;&#60;/center&#62;";
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="IMPORTANT"
><P
></P
><TABLE
CLASS="IMPORTANT"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.png"
HSPACE="5"
ALT="Important"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Don't forget:</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Add your Google client number in the script.</P
></TD
></TR
></TABLE
></DIV
><P
>Activate the AdSense block in your administration panel (see <A
HREF="#ADMIN-MANAGEMENT"
>Section 9.4</A
>) by clicking on the &#8220;Blocks&#8221; links and choosing it from the blocks list as a new block. </P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="DISPLAY-IMAGES-PHP-NUKE-BLOCKS"
>20.8. How to display images in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks</A
></H2
><P
>Blocks offer a quick way to incorporate content in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. They are happily used to display images, since they can be placed anywhere in the three layout columns - and their position can be comfortably changed from the administration panel. A very common use of blocks in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> is to display <EM
>dynamic</EM
> images, i.e. images that change depending on some parameter of dynamic nature, most offen time: a daily quote, a daily weather forecast or a daily comic.</P
><P
>Most of the time you will not be the original author of the quote, forecast or comic. You will want to fetch this content from some popular source on the Internet.</P
><DIV
CLASS="IMPORTANT"
><P
></P
><TABLE
CLASS="IMPORTANT"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.png"
HSPACE="5"
ALT="Important"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Before you proceed: think on copyright!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>We will describe the tecnology that allows you to use somebody else's work  to make your site more beautiful, attractive or informative.  This almost certainly touches that person's copyright. Please take the time to read the admonition on copyright in <A
HREF="#PHP-NUKE-COMIC-BLOCK"
>Section 8.2.3</A
>!</P
></TD
></TR
></TABLE
></DIV
><P
>PHP enables you to read a remote URL, store its whole content in one (!) variable, then search the contents of the variable for any regular expression (for regular expressions, see <A
HREF="#REGULAR-EXPRESSIONS"
>Section 25.3</A
>). We will use this technique to find out the filename of the <A
HREF="http://www.userfriendly.org"
TARGET="_top"
>User Friendly</A
> daily comic strip, in order to display it in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block. This <A
HREF="http://www.karakas-online.de/phpnuke/block-User_Friendly.tar"
TARGET="_top"
>UserFriendly block</A
> reads the <A
HREF="http://www.userfriendly.org/static/"
TARGET="_top"
>User Friendly daily cartoon page</A
> line by line, searches for the pattern</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>whatever&#60;IMG ALT="Latest Strip"whateverSRC="imagefile"&#62;whatever</PRE
></FONT
></TD
></TR
></TABLE
><P
>extracts the location of the image file (imagefile) from it and displays it in the block. The <A
HREF="http://www.karakas-online.de/myServices/showfile.php?highlight=userfriendly"
TARGET="_top"
>PHP code of the User Friendly block </A
> is a classic example of how you can do this &#8220;scrapping&#8221; in <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> (-Nuke):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if (eregi("block-User_Friendly.php",$PHP_SELF)) { <A
NAME="UF1"
><IMG
SRC="images/callouts/1.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
>
    Header("Location: index.php");
    die();
}
$ufurl =  "http://www.userfriendly.org/static/"; <A
NAME="UF2"
><IMG
SRC="images/callouts/2.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"></A
>
$content = "&#60;i&#62;ufurl:&#60;/i&#62; $ufurl&#60;br&#62;";
$imagefile = ""; <A
NAME="UF3"
><IMG
SRC="images/callouts/3.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"></A
>
if (!($textfile = fopen( "$ufurl",  "r"))) { <A
NAME="UF4"
><IMG
SRC="images/callouts/4.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"></A
>
    $content .= "$ufurl&#60;br&#62; could not be opened&#60;br&#62;"; <A
NAME="UF5"
><IMG
SRC="images/callouts/5.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(5)"></A
>
    die();
}
while (!feof($textfile)) { <A
NAME="UF6"
><IMG
SRC="images/callouts/6.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(6)"></A
>
    $line = fgets($textfile, 1500);          <A
NAME="UF7"
><IMG
SRC="images/callouts/7.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(7)"></A
>
    if (eregi( ".*&#60;IMG ALT=\"Latest Strip\".*SRC=\"(.*)\"&#62;.*", $line, $out)) { <A
NAME="UF8"
><IMG
SRC="images/callouts/8.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(8)"></A
>
        $imagefile = $out[1]; <A
NAME="UF9"
><IMG
SRC="images/callouts/9.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(9)"></A
>
        break;
    }
}
fclose($textfile);
$content = "&#60;p align=center&#62;";
$content .= "&#60;A HREF=\"http://www.userfriendly.org\" target=\"_blank\"&#62;
&#60;IMG SRC=\"$imagefile\" alt=\"User Friendly by Illiad\"&#62;&#60;/A&#62;"; <A
NAME="UF10"
><IMG
SRC="images/callouts/10.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(10)"></A
>
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="CALLOUTLIST"
><DL
COMPACT="COMPACT"
><DT
><A
HREF="#UF1"
><IMG
SRC="images/callouts/1.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
></DT
><DD
>      This is the standard check at the start of every <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block: if the name of the script, as it was called by the user, contains the full name of the block, then the user must have called the block directly. In this case we redirect him to the home page. As with modules, a direct call of a block not only will not work, it will also bypass all security measures of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> (see for example <A
HREF="#SECURITY-AUDIT"
>Section 23.4.3</A
>).
      </DD
><DT
><A
HREF="#UF2"
><IMG
SRC="images/callouts/2.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"></A
></DT
><DD
>  The URL of the remote page containing the dynamic image.
      </DD
><DT
><A
HREF="#UF3"
><IMG
SRC="images/callouts/3.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"></A
></DT
><DD
>    Initialization of the image filename.
      </DD
><DT
><A
HREF="#UF4"
><IMG
SRC="images/callouts/4.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"></A
></DT
><DD
>      We open the remote page for reading ("r").  This operation returns a "file handle", a unique identifier for the opened file, which is stored in $textfile.
      </DD
><DT
><A
HREF="#UF5"
><IMG
SRC="images/callouts/5.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(5)"></A
></DT
><DD
>    If the opening operation failed, we output an error message in the content variable of the block and quit.
      </DD
><DT
><A
HREF="#UF6"
><IMG
SRC="images/callouts/6.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(6)"></A
></DT
><DD
>      If the opening operation succeeded, we start reading the content of the remote page in a loop, line-by-line, until the end-of-file (eof) character is encountered.
      </DD
><DT
><A
HREF="#UF7"
><IMG
SRC="images/callouts/7.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(7)"></A
></DT
><DD
>  We only read 1500 characters at a time. This is more than enough for our purposes.
      </DD
><DT
><A
HREF="#UF8"
><IMG
SRC="images/callouts/8.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(8)"></A
></DT
><DD
>    This is where all the magic takes place! We search the line we just read for occurences of a regular expression. The expression itself means       </DD
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>whatever&#60;IMG ALT="Latest Strip"whateverSRC="imagefile"&#62;whatever</PRE
></FONT
></TD
></TR
></TABLE
><DD
><P
>where "whatever" may be any content, including space. The regular expression contains a subexpression in the place of the image filename. This results in the file name being stored in the $out array, as its first element.</P
></DD
><DT
><A
HREF="#UF9"
><IMG
SRC="images/callouts/9.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(9)"></A
></DT
><DD
>      We copy the first element the $out array to the $imagefile variable. By construction of the regular expression above, $imagefile now contains the image filename of the daily comic strip. We only have to display it!
      </DD
><DT
><A
HREF="#UF10"
><IMG
SRC="images/callouts/10.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(10)"></A
></DT
><DD
>    We echo an image anchor using as source the filename we just "scrapped" from our source page. This displays the daily comic strip without fetching the image to our web server (hot linking!).
      </DD
></DL
></DIV
><P
>A similar technique is used in news aggregators, like the MyHeadlines module (see <A
HREF="#PHP-NUKE-MY-HEADLINES-MODULE"
>Section 8.3.9</A
>), that &#8220;scrap&#8221; news sources for pieces of dynamic information that are not otherwise available (i.e. not available as RSS/RDF news feeds), see <A
HREF="http://jmagar.com/modules/MyHeadlines/MyHeadlines/docs/headline_scraper.htm"
TARGET="_top"
>Template Based Scraping</A
>. For each source page, a regular expression is stored in a table. Its subexpressions will automatically store the dynamic information pieces that are of interest to us in the elements of some $out array. We would then only have to display those elements for each source.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Quod medicina aliis, aliis est acre venenum<A
NAME="AEN14385"
HREF="#FTN.AEN14385"
><SPAN
CLASS="footnote"
>[25]</SPAN
></A
></B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you are an artist whose images are being hot-linked with the above methods without your permission, you are certainly not excited. But don't despair! You can defend your work with a simple technique that requires only the Apache mod_rewrite module and a few  lines in your .htaccess file. See <A
HREF="#MAKE-PHP-NUKE-HOT-LINK-STEALTH"
>Section 25.6</A
>.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="DISPLAY-RANDOM-IMAGES-PHP-NUKE-BLOCKS"
>20.8.1. How to display random images in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks</A
></H3
><P
>We now move to a more advanced example of a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block: a block that displays random images. Suppose you have a collection of images in a directory of your webserver and would like to display a random image each time in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block. Using PHP-Nuke's own positioning capabilities for blocks (in the administration panel, from the &#8220;Blocks&#8221; link, see <A
HREF="#ADMINISTRATION-FUNCTIONS"
>Section 7.1</A
>), you can achieve an almost arbitrary positioning of random images in your page - a functionality that could be used to display whatever visual content you like, ranging from a &#8220;daily babe&#8221; to a random skyscraper banner.</P
><P
>To create a random image block for PHP-Nuke, proceed as follows (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=12256"
TARGET="_top"
>Random Picture Block</A
>):</P
><P
>Make a script called block-RandomPics.php and put it in the blocks folder. The code for block-RandomPics.php is:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
$content="";
if (eregi("block-RandomPics.php",$PHP_SELF)) {
  Header("Location: index.php");
  die();
}
// $whereimgs has to be in the Domain (like localhost area) 
// or put ../ in front of folder name
$whereimgs = "../pictures";
mt_srand((double)microtime()*1000000);
$imgs = dir($whereimgs);
while ($file = $imgs-&#62;read()) {
  if (eregi("gif", $file) || eregi("jpg", $file)) {
    $imglist .= "$file ";
  }
}
closedir($imgs-&#62;handle);
$imglist = explode(" ", $imglist);
$a = sizeof($imglist)-2;
$random = mt_rand(0, $a);
$image = $imglist[$random];
$asin = explode(".", $image);
$content = "";
$content .= "&#60;center&#62;&#60;a href=\"PicShow.php?show=".$whereimgs."/$image\"&#62;";
$content .= "&#60;img src=\"".$whereimgs."/$image\" border=\"0\" 
              width=\"120\" alt=\"\"&#62;&#60;br&#62;&#60;br&#62;";
$content .= "Click for full picture.&#60;/a&#62;&#60;BR&#62;&#60;/center&#62;";
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>The block-RandomPics.php block reads all .gif's and .jpg's from the $whereimgs directory into an array ($imglist), computes a random index between 0 and the maximum array index ($a) and uses the random index to select an image name from the array. It then writes some HTML code to display a thumbnail of 120 pixels width with a ling to the original picture. The link itself passes the show parameters on the URL as the concatenation of the $whereimgs directory and the random image name ($image) to a script we still have to write, PicShow.php.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>The right images path</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Taking into account that block-RandomPics.php has to be located in the blocks folder, then, if your images folder is the folder &#8220;pictures&#8221; under the &#8220;PHP-Nuke root&#8221; directory (i.e. under the same directory where mainfile.php, index.php, config.php etc. are located), then you have to prepend a &#8220;../&#8221; to &#8220;pictures&#8221;, as we did in the code, assuming that you don't want to give an absolute, fully qualified URL there.</P
></TD
></TR
></TABLE
></DIV
><P
>For PicShow.php, which is the script that will show the full image, we have to write code that behaves just like a standard <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module (but without any administration functions), so you can see it as an example of a minimal module:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if (!isset($mainfile)) { include("mainfile.php"); }
$index = 0; 
include("header.php");
OpenTable(); 
$sl = $show;
echo " 
&#60;center&#62;&#60;h3&#62;&#60;a href=\"javascript:history.back()\"&#62;Go back!&#60;br&#62;&#60;br&#62;
&#60;img src=$sl border=\"2\"&#62;&#60;/a&#62;&#60;/h3&#62; 
&#60;/center&#62;"; 
closetable();
include("footer.php");
?&#62; </PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PAYPAL-BLOCK-FOR-PHP-NUKE"
>20.9. How to display HTML forms in a block: Paypal</A
></H2
><P
>A lot of sites have a block, asking for donations through <A
HREF="https://www.paypal.com"
TARGET="_top"
>PayPal</A
>. It is easy to construct your own, all you need is get an account from PayPal, then construct an HTML form that contains your data, for example:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Help  keep our web site online with a donation!
&#60;form action="https://www.paypal.com/cgi-bin/webscr" method="post"&#62;
&#60;input type="hidden" name="cmd" value="_xclick"&#62;
&#60;input type="hidden" name="business" value="My email"&#62;
&#60;input type="hidden" name="item_name" value="My Homepage"&#62;
&#60;input type="hidden" name="amount" value="10.00"&#62;
&#60;input type="hidden" name="no_note" value="1"&#62;
&#60;input type="hidden" name="currency_code" value="USD"&#62;
&#60;input type="hidden" name="tax" value="0"&#62;
&#60;input type="image" src="https://www.paypal.com/images/x-click-but04.gif" 
       border="0"
name="submit" alt="Make payments with PayPal - it"s fast, free and secure!"&#62;
&#60;/form&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>The meaning of the form fields is the following:</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>cmd:</DT
><DD
><P
>Must be set to "_xclick" (required).</P
></DD
><DT
>business:</DT
><DD
><P
>This is your PayPal ID, or email address, where payments will be sent. This email address must be confirmed and linked to your Verified Business or Premier account. (required).</P
></DD
><DT
>item_name:</DT
><DD
><P
>Description of donation (maximum 127 characters). If omitted, donor will see a field in which they have the option of entering an Item Name (optional).</P
></DD
><DT
>amount:</DT
><DD
><P
>The price or amount of the purchase, not including shipping, handling, or tax. If omitted, this value will be editable by the buyer at the time of purchase (optional).</P
></DD
><DT
>no_note:</DT
><DD
><P
>Including a note with payment. If set to 1, your customer will not be prompted to include a note. If omitted or set to 0, your customer will be prompted to include a note (optional).</P
></DD
><DT
>currency_code:</DT
><DD
><P
>The currency of the payment. Defines the currency in which the monetary variables (amount, shipping, shipping2, handling, tax) are denoted. Possible values are USD (U.S. Dollar), EUR (Euro), GBP (Pound Sterling), CAD (Canadian Dollar), JPY (Yen). If omitted, all monetary fields will be interpreted as U.S. Dollars (optional).</P
></DD
><DT
>tax:</DT
><DD
><P
>Transaction-based tax override variable. Set to a flat tax amount you would like to apply to the transaction regardless of the buyer s location. If present, this value overrides any tax settings that may be set in the seller s Profile. If omitted, Profile tax settings (if any) will apply (optional).</P
></DD
></DL
></DIV
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>PayPal hyperlink variables</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>There are many more hyperlink variables that you can use in your PayPal block, covering all aspects of a donation transaction. You should consult the <A
HREF="https://www.paypal.com/en_US/pdf/donations.pdf"
TARGET="_top"
>PayPal Donations Manual</A
>, to learn about all the possibilities!</P
></TD
></TR
></TABLE
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PAYPAL1"
></A
><P
><B
>Figure 20-12.    PayPal donation button
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/paypal1.png"><DIV
CLASS="CAPTION"
><P
>PayPal donation button</P
></DIV
></P
></DIV
></DIV
></P
><P
>Pasting the code above into your website would generate a button that looks like <A
HREF="#FIG-PAYPAL1"
>Figure 20-12</A
>. To create a block out of this HTML Form, all we have to do is add the obligatory check for the block name, transform all lines to strings and append them to the $content variable, taking care to escape all double quotes between the string quotes:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if (eregi("block-Donations.php",$PHP_SELF)) {
    Header("Location: index.php");
    die();
}
$content  =  "Help  keep our web site online with a donation!";
$content  .= "form action=\"https://www.paypal.com/cgi-bin/webscr\" method=\"post\"&#62;";
$content  .= "input type=\"hidden\" name=\"cmd\" value=\"_xclick\"&#62;";
$content  .= "input type=\"hidden\" name=\"business\" value=\"My email\"&#62;";
$content  .= "input type=\"hidden\" name=\"item_name\" value=\"My Homepage\"&#62;";
$content  .= "input type=\"hidden\" name=\"amount\" value=\"10.00\"&#62;";
$content  .= "input type=\"hidden\" name=\"no_note\" value=\"1\"&#62;";
$content  .= "input type=\"hidden\" name=\"currency_code\" value=\"USD\"&#62;";
$content  .= "input type=\"hidden\" name=\"tax\" value=\"0\"&#62;";
$content  .= "input type=\"image\" src=\"https://www.paypal.com/images/x-click-but04.gif\"
              border=\"0\" name=\"submit\" 
              alt=\"Make payments with PayPal - it"s fast, free and secure!\"&#62;";
$content  .= "/form&#62;";
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Put the above code in a file called block-Donations.php in the blocks folder. Then, just activate and position the block from the blocks management link in the administration panel.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PAYPAL2"
></A
><P
><B
>Figure 20-13.    PayPal donation block.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/paypal2.png"><DIV
CLASS="CAPTION"
><P
>PayPal donation block.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Depending on your theme, the block will look as in <A
HREF="#FIG-PAYPAL2"
>Figure 20-13</A
>. You can experiment with various button images from the PayPal site. For more information on donations with PayPal, see the <A
HREF="https://www.paypal.com/en_US/pdf/donations.pdf"
TARGET="_top"
>PayPal Donations Manual</A
>.</P
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="CREATING-MODULES"
></A
>Chapter 21. Creating modules</H1
><P
>After having seen how to modify <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules, we are in a position to try our skills at creating one - in this chapter we will show you how! We cover:</P
><P
></P
><UL
><LI
><P
>Module structure (<A
HREF="#MODULE-STRUCTURE"
>Section 21.1</A
>),</P
></LI
><LI
><P
>The rules to follow (<A
HREF="#MODULE-RULES"
>Section 21.2</A
>),</P
></LI
><LI
><P
>Module creation, the public part (<A
HREF="#MODULE-PUBLIC"
>Section 21.3</A
>),</P
></LI
><LI
><P
>Module creation, administrator part (<A
HREF="#MODULE-ADMIN"
>Section 21.4</A
>),</P
></LI
><LI
><P
>How to include a HTML file in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module (<A
HREF="#INCLUDE-HTML-FILE-IN-MODULE"
>Section 21.5</A
>),</P
></LI
><LI
><P
>How to include a HTML file and its links in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module (<A
HREF="#INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE"
>Section 21.6</A
>),</P
></LI
><LI
><P
>How to include a HTML file and its links using an iframe in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module (<A
HREF="#INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE-IFRAME"
>Section 21.7</A
>),</P
></LI
><LI
><P
>How to include a plain text file in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module (<A
HREF="#INCLUDE-PLAIN-TEXT-FILE-IN-MODULE"
>Section 21.8</A
>),</P
></LI
><LI
><P
>How to use Javascript in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules (<A
HREF="#JAVASCRIPT-IN-PHP-NUKE-MODULES"
>Section 21.9</A
>),</P
></LI
><LI
><P
>How to create a Logout module (<A
HREF="#CREATE-LOGOUT-MODULE"
>Section 21.10</A
>),</P
></LI
><LI
><P
>How to show advertisements in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules (<A
HREF="#ADVERTISEMENTS-IN-PHP-NUKE-MODULES"
>Section 21.11</A
>),</P
></LI
><LI
><P
>How to display HTML forms in a module (<A
HREF="#HTML-FORMS-IN-MODULE"
>Section 21.12</A
>).</P
></LI
></UL
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MODULE-STRUCTURE"
>21.1. Module structure</A
></H2
><P
>The <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules are PHP-written applications that manage the central part of the site. For example, the &#8220;News&#8221;, &#8220;Forum&#8221;, &#8220;Members List&#8221; etc. are all modules. Each module, based on it's complexity, is structured using one part for the user's and another for the administrator, in this case there are some contents we have to modify. It's all managed from the modules.php file which alone, carries out the job of authentication and management of the access rights on that module. The modules.php file checks and verifies if the module was activated or not, and verifies the access rights. This saves us a lot of work because we don't have to insert these controls in every module we create.</P
><P
>We refer you to what is written in <A
HREF="#MODULE-MANAGEMENT"
>Section 9.3</A
> to be more exhaustive.</P
><P
>For example in the avantgo module, in order to load the index.php file, it's enough to pass the module name to the parameter string, the file that will be searched for is index.php.</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>modules.php?name=AvantGo</PRE
></FONT
></TD
></TR
></TABLE
><P
>If instead we wanted to call a page different from the default index.php (say, print.php), the string we will have to pass is :</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>modules.php?name=AvantGo &#38; file=print</PRE
></FONT
></TD
></TR
></TABLE
><P
>That is the file variable with a value (print) that corresponds to the name of the file we want to load without the .php extension. </P
><P
>Inside of the folder modules/nameofmodule there is also a subfolder called "language". In this fashion we manage in a simple and immediate way the multilanguage functionality inside the modules.</P
><P
>The rows modules.php work in this way:</P
><P
></P
><UL
><LI
><P
>It includes the mainfile.php</P
></LI
><LI
><P
>Verifies if the module is active</P
></LI
><LI
><P
>Verifies whether the string passes a file name different from index.php</P
></LI
><LI
><P
>Verifies the permissions of the module (whether everybody can see it, or only registered users, or only the administrator).</P
></LI
></UL
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MODULE-RULES"
>21.2. Creating fully compatible modules: the rules to follow</A
></H2
><P
>For people who have a base knowledge of the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> language it is very simple to construct a module. Generally to create a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module means:</P
><P
></P
><UL
><LI
><P
>To create <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> files for the users, ie the public part of the site</P
></LI
><LI
><P
>To create an administrator interface </P
></LI
><LI
><P
>To verify that everything we have created is in keeping with the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> development rules.</P
></LI
></UL
><P
>But what about the development rules? </P
><P
>It is a good idea to stop on this point before continuing on to the programming part.</P
><P
></P
><OL
TYPE="1"
><LI
><P
>Rule: the modules must be included in the folder modules/namemodule in the public part and the folder admin/modules in the administration part</P
></LI
><LI
><P
>Rule: the main file of the module included in modules/nameofmodule must be called index.php</P
></LI
><LI
><P
>Rule: the tables in the php syntax are indicated by prefix. For example Nuke pages will be indicated with "$prefix."_pages, where $prefix takes the value from the config.php file which is nuke by default.</P
></LI
><LI
><P
>Rule: the location of the images or links must start from the root of your html directory and not from the folder modules/nameofmodule because the files contained in it are included in a file placed in html's root directory that's called modules.php</P
></LI
><LI
><P
>Rule: to manage the multilanguage function in an optimal way we have to create some text abstractions that we will insert in the files by making a folder called &#8220;language&#8221; inside the folder of the module. Everything will then be automatically recalled. For example, if we need to create a module that we call Topolino (the Italian name of Mickey Mouse) we must give the possibility to those who use the Italian interface to read "Topolino" and to those who use the English one to read "Mickey Mouse" ; -).</P
></LI
></OL
><P
>How do we do it?</P
><P
>First of all we create the folder &#8220;language&#8221; inside the folder modules/topolino We insert in this folder two php files that we will call lang-italian.php and lang-english.php We create an abstraction for topolino, in the lang-italian.php it will be: </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>define("_TOPO", "Topolino");</PRE
></FONT
></TD
></TR
></TABLE
><P
>And in English it will be:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>define("_TOPO", "Mickey Mouse");</PRE
></FONT
></TD
></TR
></TABLE
><P
>In this way inserting in the module the abstraction "_TOPO" this will be automatically replaced by Topolino in the Italian interface and by Mickey Mouse in the English interface.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MODULE-PUBLIC"
>21.3. Module creation, the public part</A
></H2
><P
>We continue using the example of Topolino from <A
HREF="#MODULE-RULES"
>Section 21.2</A
> and create a very simple module that displays a GIF of Topolino with a list of 3 predefined names that are editable by the users. This is a nonsense module but it's simple enough to be understood by everybody. The DB we will use is MySQL, but the example, by changing some detail, works with all DB's. First of all let's see the skeleton of every module that we will construct:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if (!eregi("modules.php", $PHP_SELF)) {
  die ("You can't access this file directly...");
}
$index = 1;
require_once("mainfile.php");
$module_name = basename(dirname(__FILE__));
get_lang($module_name);
include("header.php");
include("footer.php");
?&#62; </PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="IMPORTANT"
><P
></P
><TABLE
CLASS="IMPORTANT"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.png"
HSPACE="5"
ALT="Important"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Before making anything it's necessary to create a folder called "modules/Topolino", the file we have just created (with the other contents) must be called index.php and must stay in that folder.  </P
></TD
></TR
></TABLE
></DIV
><P
>We create a table in the database called nuke_topolino that is structured in this way:</P
><P
></P
><UL
><LI
><P
>idperson: It is a cell that contains the id of person (int 11, primary)</P
></LI
><LI
><P
>nameperson: It is a cell that contains the names of the people (varchar 60)</P
></LI
></UL
><P
>And we manually insert (by using PHPMyAdmin - see <A
HREF="#PHPMYADMIN2"
>Section 3.4</A
> - or an equivalent interface) the names of the 3 people we are interested in, see <A
HREF="#FIG-INSERTING-VALUES"
>Figure 21-1</A
> (the module, for simplicity reasons doesn't allow you to add or to cancel people but only editing those that already exist).</P
><P
></P
><UL
><LI
><P
>Id 1: Topolino</P
></LI
><LI
><P
>Id 2: Minnie</P
></LI
><LI
><P
>Id 3: Pluto</P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-INSERTING-VALUES"
></A
><P
><B
>Figure 21-1.    PHPMyAdmin: inserting values
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/snapshot16.png"><DIV
CLASS="CAPTION"
><P
>PHPMyAdmin: inserting values</P
></DIV
></P
></DIV
></DIV
></P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>It's possible to include the footer at the end of every function. It's a solution that is a bit more complex because we must write more lines, but I have to stress how much alot of modules use it.</P
></TD
></TR
></TABLE
></DIV
><P
>Once that the table of the DB is ready we can begin to enjoy creating the code that will give us back our output. Our output will be one simple query  with a cycle that will give back  the values inserted in the database (the simplest thing in the world, Gosh!).</P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Attention!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>To maintain the abstraction of the DB so that it can work on various database's in an independent way, we cannot use classic <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> syntax that is generally used by the MySQL addicted ; -), instead we must use the syntax illustrated in the file include/sql_layer.php</P
></TD
></TR
></TABLE
></DIV
><P
>The query that we will compile will be structured in the following way:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$resultpersons = sql_query("SELECT idperson, nameperson FROM "$prefix."_topolino", $dbi);
for ($m=0; $m &#60; sql_num_rows($resultpersons, $dbi); $m++){
  list($idperson, $nameperson) = sql_fetch_row($resultpersons, $dbi);
  echo "$idperson - $nameperson &#60; br &#62;";
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>Very simple, isn't it? OK!, before passing to the administrator's interface for this module, we will start to modify it with the intention of giving it a minimum style dignity.</P
><P
>I would propose:</P
><P
></P
><UL
><LI
><P
>to insert the results in a table </P
></LI
><LI
><P
>to put a title to it and a description for the module.</P
></LI
></UL
><P
>We can do this by rendering all of the module's compatible with the multilanguage system of PHP-Nuke: We define the abstractions that will compose the two phrases we need, in the file lang-english.php we have to insert:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
define("_BENVETOPOMOD", "Topolino Module, Welcome!");
define("_DESCRITOPOMOD", "This is an example module that 
serves to illustrate how a &#60;application&#62;PHP-Nuke&#60;/application&#62; module is created");
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Remember to insert a file called index.htm in our language folder! We need it to protect the inside of that folder from undesired navigations. We are nearly at the end of the frontend part, now we have to insert the stylistic part in the code that we have created and to assemble everything. We take two code pieces previously constructed (The initial one and the one created by us) and we join the stylistic modification:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if (!eregi("modules.php", $PHP_SELF)){ 
  die ("You can't access this rows directly...");
}
$index = 1; 
require_once("mainfile.php");
$module_name = basename(dirname(__FILE__)); 
get_lang($module_name); 
include("header.php");
echo "&#60;br&#62;"; 
echo""._BENVETOPOMOD.""; 
echo "&#60;br&#62;&#60;br&#62;";
opentable();
echo "&#60;br&#62;"; 
echo""._DESCRITOPOMOD.""; 
echo "&#60;br&#62;&#60;br&#62;"; 
$resultpersons = sql_query("SELECT idperson, nameperson 
                 FROM ".$prefix."_topolino", $dbi);
for ($m=0; $m &#60; sql_num_rows($resultpersons, $dbi); $m++) { 
  list($idperson, $nameperson) = sql_fetch_row($resultpersons, $dbi);
  echo "$idperson - $nameperson &#60;br&#62;";
} 
closetable();
include("footer.php");
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>We have only added text, some breaks for the headers and an &#8220;Opentable();&#8221; and a &#8220;Closetable();&#8221; to include the text. The result can be seen in <A
HREF="#FIG-EXAMPLE-MODULE"
>Figure 21-2</A
></P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-EXAMPLE-MODULE"
></A
><P
><B
>Figure 21-2.    Example module.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/snapshot17.png"><DIV
CLASS="CAPTION"
><P
>Example module.</P
></DIV
></P
></DIV
></DIV
></P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MODULE-ADMIN"
>21.4. Module creation, administrator part</A
></H2
><P
>It's time to create the administration part of the module. In this very simple module the only function that will work on the DB will be the one in which we can modify the text of one of the three languages that we have created. First of all, we have to create the files to insert in the folders:</P
><P
></P
><UL
><LI
><P
>admin/case</P
></LI
><LI
><P
>admin/links</P
></LI
><LI
><P
>admin/modules </P
></LI
></UL
><P
>It's important to remember how much we have just said in <A
HREF="#DIRECTORY-STRUCTURE"
>Section 9.1</A
>:</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Admin:</DT
><DD
><P
>contains 4 subdirectories (links, language, case, modules) that manage the various administration modules. The folder that holds the files is modules/admin/ .</P
></DD
></DL
></DIV
><P
>The folder admin/links instead says that the admin module must recall and position one language in admin for that determined module.</P
><P
>Example (Administration for the FAQ module):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if (($radminsuper==1) OR ($radminfaq==1)) {
adminmenu("admin.php?op=FaqAdmin ", "" _FAQ." ", "faq.gif");
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>This module:</P
><P
></P
><UL
><LI
><P
>Verifies the administration rights (This module can be set up so it can be viewed by the superadmin or an admin)</P
></LI
><LI
><P
>It passes a &#8220;CASE&#8221; (op=FaqAdmin) that indicates to the admin.php file (that includes all the admin modules) the module to call, associates a value in order to translate the term &#8220;FAQ&#8221; and associates an image for the visual administration (faq.gif).</P
></LI
></UL
><P
>The folder admin/case instead serves to define the module to be used in each specified case . This is important when, using the same admin file, we need to perform more operations using a CASE statement:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>case1 = insert
case2 = cancel
etc...</PRE
></FONT
></TD
></TR
></TABLE
><P
>In fact it says which module to call in order to verify the CASE condition. For example, in the FAQ module there are lots of cases, here are the last 2:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>case "FaqAdmin":
case "FaqCatGo":
include ("admin/modules/adminfaq.php");
break;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Both CASE statements call the adminfaq.php file, but they are used for different operations. The first one calls the file with the default scheme, the second, on the other hand, gives its O:K. to insert a new category. </P
><P
>This happens through a string like &#8220;admin.php?op=FaqAdmin&#8221; in the first case and &#8220;admin.php?op=FaqCatGo&#8221; in the second.</P
><P
>We will now create, in the following order, the files:</P
><P
></P
><UL
><LI
><P
>admin/modules/topolino.php</P
></LI
><LI
><P
>admin/case/case.topolino.php</P
></LI
><LI
><P
>admin/links/links.topolino.php </P
></LI
></UL
><P
>In order to create the file inside the modules folder (modules/topolino.php) we must have a structure of this type:</P
><P
></P
><UL
><LI
><P
>Starting part of the file (Similar for all the modules)</P
></LI
><LI
><P
>Definition of the necessary functions.</P
></LI
><LI
><P
>Definition of the necessary cases in order to call the various functions for the admin module.</P
></LI
><LI
><P
>Final part of the file.</P
></LI
></UL
><P
>The syntax for the starting part of the file is the following:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if (!eregi("admin.php", $_SERVER['PHP_SELF'])) { die ("Access Denied"); }
$querystr = "SELECT radminsuper, admlanguage FROM "
.$prefix."_authors where aid='$aid'";
$result = sql_query($querystr, $dbi) or die ("invalied query");
list($radminsuper) = sql_fetch_row($result, $dbi);
if ($radminsuper==1) {</PRE
></FONT
></TD
></TR
></TABLE
><P
>This part of the file controls the administration rights for whoever calls it, a control on which language to use and (not in this module) a control on the administrator's rights. An administrator could have only partial rights of administration on modules or some modules can be managed only by a superadmin. In our specific case the module can be managed only by the superadmin because the control is only:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($radminsuper==1)</PRE
></FONT
></TD
></TR
></TABLE
><P
>In case there are some specific rights (for example in the reviews module) the rights to control would have been:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if (($radminreviews==1) OR ($radminsuper==1))</PRE
></FONT
></TD
></TR
></TABLE
><P
>Activating the rights on two levels on new modules indeed isn't simple, you must specify in the nuke_authors table a new field that designates the rights, then modify admin/modules/authors.php adding the checkbox for the rights of the new module and modify the corresponding UPDATE queries.</P
><P
>Let's go back to our module: we have already seen the initial part, which is obligatorily. The end of the open IF statement is:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>} else {
echo "Access Denied";
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>All that we find in the middle, are the management functions and the cases that must be checked, which we will now go on to construct. There are a couple of rules to follow in order to construct the admin functions:</P
><P
></P
><UL
><LI
><P
>We must include a header at the beginning of the function and a footer at the end:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>include("header.php");
include("footer.php");</PRE
></FONT
></TD
></TR
></TABLE
></LI
></UL
><P
>We have to include the GraphicAdmin(); function immediately after the header. It will display the navigation panel that leads to all the other admin links. The functions we'll now go to create are:</P
><P
></P
><UL
><LI
><P
>Display of the database records</P
></LI
><LI
><P
>Selection of the record and its insertion in a modifiable text field</P
></LI
><LI
><P
>Modification of the record through insertion in the database of the value modified in the text field.</P
></LI
></UL
><P
>Here is the code of the function which accomplishes the record selection:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>function mousedisplay() {
   global $admin, $bgcolor2, $prefix, $dbi, $multilingual;
   include ("header.php");
   GraphicAdmin();
   opentable();
   $querystr = "SELECT idperson, nameperson FROM ".$prefix."_topolino";
   $resultpersons = sql_query($querystr, $dbi) 
   or die ("invalid query in mousedisplay");
   for ($m=0; $m &#60; sql_num_rows($resultpersons, $dbi); $m++)
   {
      list ($idperson, $nameperson) = mysql_fetch_row($resultpersons);
      $tmpLink = "&#60;a href=\"admin.php?op=mouseselect&#38;idtopo="
                 .$idperson."\"&#62;Select mouse&#60;/A&#62;&#60;br&#62;";
      echo   "$idperson - $nameperson $tmpLink";
   }
   closetable();
   include("footer.php");
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>The next function to implement is the one that corresponds to the selection of one of the three records:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>function mouseselect() {
   global $admin, $bgcolor2, $prefix, $dbi, $multilingual, $idtopo;
   include ("header.php");
   GraphicAdmin();
   opentable();
   echo "idtopo=".$idtopo;
   $querystr = "SELECT idperson, nameperson 
                FROM ".$prefix."_topolino where idperson='$idtopo'";
   $resultpersons = sql_query($querystr, $dbi) 
   or die ("Invalid query in mouseselect");
   for ($m=0; $m &#60; sql_num_rows($resultpersons, $dbi); $m++){
      list($idperson, $nameperson) = sql_fetch_row($resultpersons, $dbi);
      echo "&#60;form action=\"admin.php\" method=\"post\"&#62;";
      echo "&#60;input type=\"text\" name=\"nameperson\" size=\"20\" 
             maxlength=\"20\" value=\"$nameperson\"&#62;&#60;br&#62;&#60;br&#62;";
      echo "&#60;input type=\"hidden\" name=\"idperson\"value=\"$idtopo\" &#62; ";
      echo "&#60;input type=\"hidden\" name=\"op\" value=\"mousemodify\" &#62; ";
      echo "&#60;input type=\"submit\" value=\""._ADDTOPO."\" &#62; ";
      echo "&#60;/form &#62;";
   }
   closetable();
   include("footer.php");
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>It is very important to take note of some things:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>The variables that we insert will be the ones to be checked, in fact you can see the variable &#8220;$idtopo&#8221; was inserted between the used variables. </P
></LI
><LI
><P
>The value checked in the CASE statements is passed to us through a hidden form field</P
></LI
></OL
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>(&#60; input type=\"hidden\"name=\"op\"value=\"mousemodify\"&#62;).</PRE
></FONT
></TD
></TR
></TABLE
><P
>The last function we consider is the one that corresponds to the update of the values in the database (Here too we added the two variables that we were interested in ($nameperson, $idperson): </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>function mousemodify() {
   global $admin, $bgcolor2, $prefix, $dbi, $multilingaul, 
$idtopo, $nameperson, $idperson;
   include ("header.php");
   GraphicAdmin();
   Opentable();
   sql_query("Update ".$prefix."_topolino set nameperson=' $nameperson' 
where idperson=$idperson", $dbi);
   echo"OK";
   die(mysql_error());
   closetable();
   include("footer.php");
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>The last two elements to insert are the definitions for the CASE statements (that is, which function to call according to the variable passed to the module) and the closing of the file. </P
><P
>Definition of the cases:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($radminsuper==1) {
   switch($op) {
      case "":
         mousedisplay();
         break;
      case "topolino";
         mousedisplay();
         break;
      case "mouseselect";
         mouseselect();
         break;
      case "mousemodify";
         mousemodify();
         break;
   }
}
else {
   echo "Access Denied";
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>The complete modules/topolino.php file is thus (see also <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?p=367"
TARGET="_top"
>Problems with new mods</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if (!eregi("admin.php", $_SERVER['PHP_SELF'])) { die ("Access Denied"); }
$querystr = "SELECT radminsuper, admlanguage FROM "
.$prefix."_authors where aid='$aid'";
$result = sql_query($querystr, $dbi) or die ("invalied query");
list($radminsuper) = sql_fetch_row($result, $dbi);
if ($radminsuper==1) {
   switch($op) {
      case "":
         mousedisplay();
         break;
      case "topolino";
         mousedisplay();
         break;
      case "mouseselect";
         mouseselect();
         break;
      case "mousemodify";
         mousemodify();
         break;
   }
}
else {
   echo "Access Denied";
}
function mousedisplay() {
   global $admin, $bgcolor2, $prefix, $dbi, $multilingual;
   include ("header.php");
   GraphicAdmin();
   Opentable();
   $querystr = "SELECT idperson, nameperson FROM ".$prefix."_topolino";
   $resultpersons = sql_query($querystr, $dbi) 
   or die ("invalid query in mousedisplay");
   for ($m=0; $m &#60; sql_num_rows($resultpersons, $dbi); $m++)
   {
      list ($idperson, $nameperson) = mysql_fetch_row($resultpersons);
      $tmpLink = "&#60;a href=\"admin.php?op=mouseselect&#38;idtopo="
                  .$idperson."\"&#62;Select mouse&#60;/A&#62;&#60;br&#62;";
      echo   "$idperson - $nameperson $tmpLink";
   }
   closetable();
   include("footer.php");
}
function mouseselect() {
   global $admin, $bgcolor2, $prefix, $dbi, $multilingual, $idtopo;
   include ("header.php");
   GraphicAdmin();
   Opentable();
   echo "idtopo=".$idtopo;
   $querystr = "SELECT idperson, nameperson FROM ".$prefix."_topolino 
                where idperson='$idtopo'";
   $resultpersons = sql_query($querystr, $dbi) 
   or die ("Invalid query in mouseselect");
   for ($m=0; $m &#60; sql_num_rows($resultpersons, $dbi); $m++)
   {
      list($idperson, $nameperson) = sql_fetch_row($resultpersons, $dbi);
      echo "&#60;form action=\"admin.php\" method=\"post\"&#62;";
      echo "&#60;input type=\"text\" name=\"nameperson\" size=\"20\" 
             maxlength=\"20\" value=\"$nameperson\"&#62;&#60;br&#62;&#60;br&#62;";
      echo "&#60;input type=\"hidden\" name=\"idperson\"value=\"$idtopo\" &#62; ";
      echo "&#60;input type=\"hidden\" name=\"op\" value=\"mousemodify\" &#62; ";
      echo "&#60;input type=\"submit\" value=\""._ADDTOPO."\" &#62; ";
      echo "&#60;/form &#62;";
   }
   closetable();
   include("footer.php");
}
function mousemodify() {
   global $admin, $bgcolor2, $prefix, $dbi, $multilingaul, $idtopo, 
          $nameperson, $idperson;
   include ("header.php");
   GraphicAdmin();
   Opentable();
   sql_query("Update ".$prefix."_topolino set nameperson=' $nameperson' 
              where idperson=$idperson", $dbi);
   echo"OK";
   die(mysql_error());
   closetable();
   include("footer.php");
}
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>The cases definition page is very easy to construct, it gathers the cases that are included in the file admin/modules/topolino.php and puts them in the file admin/case/case.topolino.php  </P
><P
>This is the syntax:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if (!eregi("admin.php", $_SERVER['PHP_SELF'])) { die ("Access Denied"); }
switch($op) {
   case "topolino":
      include("admin/modules/topolino.php");
      break;
   case "mouseselect":
      include("admin/modules/topolino.php");
      break;
   case "mousemodify":
      include("admin/modules/topolino.php");
      break;
}
&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>The last two things we have to make are the compilation of the file admin/links/link.topolino.php and the creation of a language module: Compilation of the file link.topolino.php</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if ($radminsuper==1) {
   adminmenu("admin.php?op=topolino ", "" _EDITTOPOLINO." ", "topolino.gif");
}
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Where: admin.php?op=topolino defines which module must be called, " _EDITTOPOLINO" is the term to translate (it must be compiled in admin/language). For the modification of the language module I refer you to the previous paragraph with one single note. The language file of the admin section is common for all (admin/language), the relative languages must be added to the end of those that already exist. Just another thing, the syntax of this example is not perfect, its beyond the scope of this to make it work perfectly but it does illustrate the operation of the module (Which you will find available for download at <A
HREF="http://www.spaghettibrain.com"
TARGET="_top"
>www.spaghettibrain.com</A
> so you will be able to study it).</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="INCLUDE-HTML-FILE-IN-MODULE"
>21.5. How to include a HTML file in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module</A
></H2
><P
>From what we have said about the structure of a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module (see <A
HREF="#MODULE-STRUCTURE"
>Section 21.1</A
>), it is easy to include a HTML file in a module - all we have to do is use the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> include command, to include it between the calls to OpenTable() and CloseTable() functions:</P
><P
></P
><UL
><LI
><P
>Create a folder under the modules directory. Call it whatever you like, but take care to replace blanks with underscores in the name.</P
></LI
><LI
><P
>Using a decent text editor (see <A
HREF="#EDITING-PHP-NUKE-FILES"
>Chapter 11</A
>), create a text file called index.php in that newly created directory.</P
></LI
><LI
><P
>Copy the following code in index.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
/************************************************************************/
/* PHP-NUKE: Web Portal System                                          */
/* ===========================                                          */
/*                                                                      */
/* PHP-Nuke-HOWTO module for &#60;application&#62;PHP-Nuke&#60;/application&#62;                                   */
/*                                                                      */
/* Copyright (c) 2003 index.php                                         */
/* by Chris Karakas                                                     */
/* http://www.karakas-online.de                                         */
/*                                                                      */
/* See licence.html for the Licence of the other files                  */
/* distributed together with this index.php file.                       */
/*                                                                      */
/* This program is free software. You can redistribute it and/or modify */
/* it under the terms of the &#60;acronym&#62;GNU&#60;/acronym&#62; General Public License as published by */
/* the Free Software Foundation; either version 2 of the License.       */
/************************************************************************/
if (!eregi("modules.php", $PHP_SELF)) {
  die ("You can't access this file directly...");
}
$index = 0;   // 0 : do not show right blocks - 1:show right blocks 
require_once("mainfile.php");
$module_name = basename(dirname(__FILE__));
include("header.php");
OpenTable();
include("path/to/the/html/file"); // &#60;-- CHANGE THIS!
CloseTable();
include("footer.php");
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Change the licence to reflect your decisions. Of course, I urge you to use the <A
HREF="http://www.gnu.org/copyleft/gpl.html"
TARGET="_top"
>GNU General Public License</A
> whenever possible, to help the cause of free software - <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> is itself set under the GPL, after all, so why would you want a different licence for your module?. </P
></LI
><LI
><P
>Then just enter the right path to the HTML file you want to include, replacing the &#8220;path/to/the/html/file&#8221; string. This can be either a full filesystem path, or a relative one - relative to the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> root directory, which is always the same directory where config.php is located. But it may also very well be a URL to a HTML file of another site. Examples:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>include("/usr/local/httpd/htdocs/myfile.html"); // absolute filesystem path
include("modules/PHP-Nuke_HOWTO/cookies.html"); // relative filesstem path
include("http://www.yoursite.com/filexx.html"); // full URL </PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Finally, activate the module from the modules administration (see <A
HREF="#MODULE-MANAGEMENT"
>Section 9.3</A
>).</P
></LI
></UL
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Javascript in modules</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>There is nothing that prevents you from including a file that contains Javascript code in a module. As long as the Javascript functions defined in the included file are not also present in the includes/javascript.php file (see <A
HREF="#JAVASCRIPT-PHP"
>Section 21.9.1</A
>), and the HTML page created with the Javascript does not break the table layout of your theme, there should be no problem. In this way you could create a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Guestbook module, for example, if you already had the Javascript code for a guestbook (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?p=58133"
TARGET="_top"
>Javascript in themes</A
>).</P
></TD
></TR
></TABLE
></DIV
><P
>If you want to include two files in the module, so that they appear side-by-side, rather than one after the other, you can use the usual HTML table trick to show the files in two separate cells of the same table row (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=19041"
TARGET="_top"
>Using "include" for HTML pages</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>OpenTable();
echo "&#60;table&#62;&#60;tr&#62;&#60;td&#62;";
include ("page.html");
echo "&#60;/td&#62;&#60;td&#62;";
include ("page2.html");
echo "&#60;/td&#62;&#60;/tr&#62;&#60;/table";
CloseTable();</PRE
></FONT
></TD
></TR
></TABLE
><P
>An alternative way to include a HTML file in the module, is to terminate <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> interpretation of the file with a closing ?&#62;, include the HTML code verbatim and then reopen the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> context with a new &#60;?php line:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if (!eregi("modules.php", $PHP_SELF)) {
die ("You can't access this file directly...");
}
$index = 0;   // 0 : do not show right blocks - 1:show right blocks 
require_once("mainfile.php");
$module_name = basename(dirname(__FILE__));
include("header.php");
OpenTable();
?&#62;
PUT YOUR HTML CODE HERE, WHATEVER COMES BETWEEN THE &#60;html&#62; AND &#60;/html&#62;
TAGS OF YOUR HTML FILE
&#60;?php
CloseTable();
include("footer.php");
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Note that we have inserted a closing ?&#62; after the call to OpenTable() and an opening &#60;?php before the call to CloseTable(). Whatever comes in between, should be plain HTML code, not <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
>. This method is suitable for small HTML texts, for larger texts the include method is recommended.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE"
>21.6. How to include a HTML file and its links in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module</A
></H2
><P
>If the HTML file you included in your module with the methods shown in <A
HREF="#INCLUDE-HTML-FILE-IN-MODULE"
>Section 21.5</A
> contains links to HTML files that you would also like to have included, you will need to apply some additional handwork. The problem here is that, although the included file will show correctly inside your module (and your theme), as soon as you click on one of its HTML links, you will be shown the target HTML file as is, i.e. outside your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> environment, like any other file independent of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. This is certainly not something you are going to like - otherwise, why go into the trouble of including the first HTML file anyway? It is clear that, for a collection of interlinked HTML documents, a better approach is needed.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>See the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> HOWTO module!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>For a real world example of including a large collection of HTML documents in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module,  download and install the <A
HREF="http://www.karakas-online.de/EN-Book/EN-Book-Nuke.tar.gz"
TARGET="_top"
>PHP-Nuke HOWTO module</A
>. Then, see how modules/PHP-Nuke_HOWTO/index.php is programmed, as well as how the HTML links to files of the HOWTO were set up.</P
></TD
></TR
></TABLE
></DIV
><P
>In the method we will present here, we use an URL parameter (&#8220;page&#8221;) to find out which file to include in index.php. Every link to a file of our collection is changed to contain this URL parameter. The page URL parameter is validated through an associative array, minimizing the risk for SQL injection and other cracking attacks (see <A
HREF="#SQL-INJECTION-WITH-PHP-NUKE"
>Section 23.3.2</A
>). For a simpler, but not universal, method using iframes, see <A
HREF="#INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE-IFRAME"
>Section 21.7</A
>.</P
><P
>Proceed in two steps as follows:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>Change every HTML link that appears in your HTML documents and points to another document of the same collection (links to other documents should be left unchanged) For example, a link to somefile.html like the following one</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;a href="somefile.html"&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>should be changed to </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;a href="modules.php?name=Your_Module&#38;amp;page=somefile.html"&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>where you should replace "Your_Module" with the name of your module, of course. This link passes the filename as the value of the page URL parameter to Your_Module. You should do this for every link in your HTML document collection that points to another file of the same collection.</P
></LI
><LI
><P
>As a next step, you modify the index.php file of your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module slightly (this is the file modules/Your_Module/index.php, if we stay with the module naming of our example). You add a line for every file that was involved in a link modification above. This means that for every file like somefile.html in the above example, you add a line</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ACCEPT_FILE['somefile.html'] = 'somefile.html';</PRE
></FONT
></TD
></TR
></TABLE
></LI
></OL
><P
>Thus, if your HTML file collection consists of the files</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>accelerating-php-nuke.html
add-on-blocks.html
add-on-modules.html
administration-functions.html
admin-management.html</PRE
></FONT
></TD
></TR
></TABLE
><P
>then, following the above step 1, you should change every HTML link in those files as shown in <A
HREF="#TAB-CHANGING-HTML-LINKS"
>Table 21-1</A
>.</P
><P
><DIV
CLASS="TABLE"
><A
NAME="TAB-CHANGING-HTML-LINKS"
></A
><P
><B
>Table 21-1. Changing HTML links for use in a custom <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module</B
></P
><TABLE
BORDER="1"
RULES="all"
CLASS="CALSTABLE"
><COL
WIDTH="1*"
ALIGN="LEFT"
TITLE="COL0"><COL
WIDTH="1*"
ALIGN="LEFT"
TITLE="COL1"><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Original link</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Changed link</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;a href="accelerating-php-nuke.html"&#62;</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;a href="modules.php?name=Your_Module</P
><P
>&#38;amp;page=accelerating-php-nuke.html"&#62;</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;a href="add-on-blocks.html"&#62;</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;a href="modules.php?name=Your_Module</P
><P
>&#38;amp;page=add-on-blocks.html"&#62;</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;a href="add-on-modules.html"&#62;</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;a href="modules.php?name=Your_Module</P
><P
>&#38;amp;page=add-on-modules.html"&#62;</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;a href="administration-functions.html"&#62;</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;a href="modules.php?name=Your_Module</P
><P
>&#38;amp;page=administration-functions.html"&#62;</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;a href="admin-management.html"&#62;</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;a href="modules.php?name=Your_Module</P
><P
>&#38;amp;page=admin-management.html"&#62;</P
></TD
></TR
></TBODY
></TABLE
></DIV
></P
><P
>After that, following step 2 above, you should insert the following lines in the index.php file of Your_Module:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ACCEPT_FILE['accelerating-php-nuke.html'] = 'accelerating-php-nuke.html';
$ACCEPT_FILE['add-on-blocks.html'] = 'add-on-blocks.html';
$ACCEPT_FILE['add-on-modules.html'] = 'add-on-modules.html';
$ACCEPT_FILE['administration-functions.html'] = 'administration-functions.html';
$ACCEPT_FILE['admin-management.html'] = 'admin-management.html';</PRE
></FONT
></TD
></TR
></TABLE
><P
>The ACCEPT_FILE plays the role of a validator for the page URL parameter. It connects a value of &#8220;page&#8221;, as passed by some URL, with the name of a file that has to be selected. The way we programmed it above, ACCEPT_FILE points to the file accelerating-php-nuke.html when given the &#8220;page&#8221; argument 'accelerating-php-nuke.html' (i.e. when &#8220;page&#8221; was 'accelerating-php-nuke.html' on the URL). This may look trivial, but is not. What's more, there is nothing that would prevent you from choosing a different (and less intuitive) mapping from the values of &#8220;page&#8221; to the selected filenames. </P
><P
>Thus, you could decide that a &#8220;page&#8221; (URL parameter) value of &#8220;1&#8221; means the accelerating-php-nuke.html file, a vlaue of &#8220;2&#8221; the add-on-blocks.html file etc. Then, the ACCEPT_FILE assignments would look as follows:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ACCEPT_FILE['1'] = 'accelerating-php-nuke.html';
$ACCEPT_FILE['2'] = 'add-on-blocks.html';
$ACCEPT_FILE['3'] = 'add-on-modules.html';
$ACCEPT_FILE['4'] = 'administration-functions.html';
$ACCEPT_FILE['5'] = 'admin-management.html';</PRE
></FONT
></TD
></TR
></TABLE
><P
>while the HTML links in the files themselves should be changed as indicated by <A
HREF="#TAB-CHANGING-HTML-LINKS-2"
>Table 21-2</A
>.</P
><P
><DIV
CLASS="TABLE"
><A
NAME="TAB-CHANGING-HTML-LINKS-2"
></A
><P
><B
>Table 21-2. Alternative way of changing HTML links for use in a custom <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module</B
></P
><TABLE
BORDER="1"
RULES="all"
CLASS="CALSTABLE"
><COL
WIDTH="1*"
ALIGN="LEFT"
TITLE="COL0"><COL
WIDTH="1*"
ALIGN="LEFT"
TITLE="COL1"><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Original link</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Changed link</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;a href="accelerating-php-nuke.html"&#62;</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;a href="modules.php?name=Your_Module</P
><P
>&#38;amp;page=1"&#62;</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;a href="add-on-blocks.html"&#62;</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;a href="modules.php?name=Your_Module</P
><P
>&#38;amp;page=2"&#62;</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;a href="add-on-modules.html"&#62;</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;a href="modules.php?name=Your_Module</P
><P
>&#38;amp;page=3"&#62;</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;a href="administration-functions.html"&#62;</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;a href="modules.php?name=Your_Module</P
><P
>&#38;amp;page=4"&#62;</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;a href="admin-management.html"&#62;</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#60;a href="modules.php?name=Your_Module</P
><P
>&#38;amp;page=5"&#62;</P
></TD
></TR
></TBODY
></TABLE
></DIV
></P
><P
>The idea is that you retain control of what filename is selected. If you would blindly set the name of the selected file to be equal to the passed parameter value of &#8220;page&#8221;, then a malicious user could use the URL</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>modules.php?name=Your_Module&#38;amp;page=/etc/passwd</PRE
></FONT
></TD
></TR
></TABLE
><P
>and read the contents of the system's password file (or whatever other file readable by the web server, for that matter). The use of an associative mapping between URL parameters and filenames, as the one implemented by the ACCEPT_FILE array above, is thus not a gimmic, but a necessity. It protects your module from SQL injections and other attacks that rely on the programmer being too lazy to verify user input. See <A
HREF="#SECURITY"
>Chapter 23</A
> for more on <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> security in general and <A
HREF="#SQL-INJECTION-WITH-PHP-NUKE"
>Section 23.3.2</A
> for SQL injections with <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> in particular.</P
><P
>However, even with these precautions in place, the module is still vulnerable to a serious attack, as <A
HREF="http://www.waraxe.us"
TARGET="_top"
>waraxe</A
> has pointed out in a security advisory (to be published): if the $ACCEPT_FILE array is not initialized, one could &#8220;poison&#8221; it. This means that an attacker could pass the parameters '...&#38;page=xxx&#38;ACCEPT_FILE[xxx]=/etc/passwd' on the URL and could still get /etc/passwd (or any other file for that matter) back! This will not work if safe_mode is ON in php.ini, but it still poses a very serious threat. For this reason, we must initialize the array first:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>// We initialize the array, to avoid attacks based on poisoning the
// &#60;acronym&#62;PHP&#60;/acronym&#62; global variable space. Thanks to waraxe for pointing this out!
// See http://www.waraxe.us
//
$ACCEPT_FILE = array();</PRE
></FONT
></TD
></TR
></TABLE
><P
>Now you can hopefully see how important is the following rule:</P
><DIV
CLASS="IMPORTANT"
><P
></P
><TABLE
CLASS="IMPORTANT"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.png"
HSPACE="5"
ALT="Important"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Don't forget:</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Always initialize your variables!</P
></TD
></TR
></TABLE
></DIV
><P
>The complete code of modules/Your_Module/index.php is thus:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
/************************************************************************/
/* PHP-NUKE: Web Portal System                                          */
/* ===========================                                          */
/*                                                                      */
/* PHP-Nuke-HOWTO module for &#60;application&#62;PHP-Nuke&#60;/application&#62;                                   */
/*                                                                      */
/* Copyright (c) 2003 index.php                                         */
/* by Chris Karakas                                                     */
/* http://www.karakas-online.de                                         */
/*                                                                      */
/* See licence.html for the Licence of the other files                  */
/* distributed together with this index.php file.                       */
/*                                                                      */
/* This program is free software. You can redistribute it and/or modify */
/* it under the terms of the &#60;acronym&#62;GNU&#60;/acronym&#62; General Public License as published by */
/* the Free Software Foundation; either version 2 of the License.       */
/************************************************************************/
if (!eregi("modules.php", $PHP_SELF)) {
  die ("You can't access this file directly...");
}
$index = 0;   // 0 : do not show right blocks - 1:show right blocks 
require_once("mainfile.php");
$module_name = basename(dirname(__FILE__));
include("header.php");
// We initialize the array, to avoid attacks based on poisoning the
// &#60;acronym&#62;PHP&#60;/acronym&#62; global variable space. Thanks to waraxe for pointing this out!
// See http://www.waraxe.us
//
$ACCEPT_FILE = array();
$ACCEPT_FILE['accelerating-php-nuke.html'] = 'accelerating-php-nuke.html';
$ACCEPT_FILE['add-on-blocks.html'] = 'add-on-blocks.html';
$ACCEPT_FILE['add-on-modules.html'] = 'add-on-modules.html';
$ACCEPT_FILE['administration-functions.html'] = 'administration-functions.html';
$ACCEPT_FILE['admin-management.html'] = 'admin-management.html';
OpenTable();
$php_ver = phpversion();
$php_ver = explode(".", $php_ver);
$phpver = "$php_ver[0]$php_ver[1]";
if ($phpver &#62;= 41) {
    $page = $_GET['page'];
} else {
    $page = $HTTP_GET_VARS['page'];
}
$pagename = $ACCEPT_FILE[$page];
if (!isSet($pagename)) $pagename = "accelerating-php-nuke.html"; // default file
include("modules/Your_Module/$pagename");
CloseTable();
include("footer.php");
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>As you can easily deduce from the above code, the "page" URL parameter is firtst extracted using either the <A
HREF="http://www.php.net/manual/en/reserved.variables.php#reserved.variables.get"
TARGET="_top"
>GET superglobal</A
>, if the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> version is at least 4.1, or the $HTTP_GET_VARS array otherwise. The associated filename is then computed from the ACCEPT_FILE array. If the user (maliciously or not) entered a value for &#8220;page&#8221; that could not be mapped to a filename, a default file is used (the accelerating-php-nuke.html in the example). Finally, the computed filename is included, just as we have seen in the simpler examples of <A
HREF="#INCLUDE-HTML-FILE-IN-MODULE"
>Section 21.5</A
>.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Automate!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Most of the work  in the method we presented,  will revolve around changing links in the various files and adding the right ACCEPT_FILE line for each file in index.php. This is an error prone procedure, even with just a few files. You should thus automate it with whatever tools you have at your disposal. For the creation of the <A
HREF="http://www.karakas-online.de/EN-Book/EN-Book-Nuke.tar.gz"
TARGET="_top"
>PHP-Nuke HOWTO module</A
>, for example, a shell script is used to produce dynamically the right sed commands, which are then executed to produce the link substitutions. The ACCEPT_FILE lines are also produced automatically.  The result is a perfectly integrated <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module, even with the hundreds of files that comprise this HOWTO. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_smile.png"></SPAN
> </P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE-IFRAME"
>21.7. How to include a HTML file and its links using an iframe in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module</A
></H2
><P
>You can also use an iframe to include an external HTML page in your module. An inline frame (iframe) is a construct which embeds a document into an HTML document so that embedded data is displayed inside a subwindow of the browser's window. This does not mean full inclusion; the two documents are independent, and both them are treated as complete documents, instead of treating one as part of the other (see <A
HREF="http://www.cs.tut.fi/~jkorpela/html/iframe.html"
TARGET="_top"
>Using inline frames (iframe elements) to embed documents into HTML documents</A
>).</P
><P
>Iframes are not supported by all browsers, however they offer a much more comfortable alternative to the solution of <A
HREF="#INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE"
>Section 21.6</A
>, since any links of the included HTML page will be shown in the iframe, if they are linked with a relative URL. To include a HTML file and its links in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module, use the following as the index.php file of the module (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?p=58549"
TARGET="_top"
>Adding Links To The Main Page (Modules)</A
> and <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=388"
TARGET="_top"
>Make <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Use "Frame Like target"</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?
if (!eregi("modules.php", $_SERVER['PHP_SELF'])) {
  die ("You can't access this file directly...");
}
if(!IsSet($mainfile)) { include ("mainfile.php"); }
$index=0;
$theme="DeepBlue";
$go_to_address1="http://www.karakas-online.de/EN-Book/book1.html";
$go_to_address=rawurldecode($go_to_address1);
include("header.php");
OpenTable();
echo "&#60;center&#62;&#60;h4&#62;&#60;a href=\"index.php\"&#62;Click to close.&#60;/a&#62;&#60;/h4&#62;&#60;/center&#62;";
echo "&#60;iframe SRC=\"".$go_to_address."\" width=\"100%\" height=\"1200\" 
framespacing=0 frameborder=no border=0 scrolling=auto&#62;&#60;/iframe&#62;";
echo "&#60;br&#62;&#60;center&#62;NB. Using iframes!&#60;/center&#62;&#60;br&#62;";
CloseTable();
include("footer.php");
die;
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>You only have to enter the HTTP address of the page to be included in $go_to_address1 and the desired theme in $theme (or, if you want to use whatever theme is currently used, comment the $theme line). Activate the module and you are done (<A
HREF="#FIG-IFRAMES"
>Figure 21-3</A
>)!</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-IFRAMES"
></A
><P
><B
>Figure 21-3.    <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> HOWTO included in a module with the help of an iframe.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/iframes.png"><DIV
CLASS="CAPTION"
><P
>PHP-Nuke HOWTO included in a module with the help of an iframe.</P
></DIV
></P
></DIV
></DIV
></P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Include the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> HOWTO as a module in your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>You can include the <A
HREF="http://www.karakas-online.de/EN-Book/"
TARGET="_top"
>PHP-Nuke HOWTO</A
> in your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site as a module using either the method of <A
HREF="#INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE"
>Section 21.6</A
> or the method of <A
HREF="#INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE-IFRAME"
>Section 21.7</A
>!</P
><P
>To use the method of <A
HREF="#INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE"
>Section 21.6</A
>, download the <A
HREF="http://www.karakas-online.de/EN-Book/EN-Book-Nuke.tar.gz"
TARGET="_top"
>PHP-Nuke module version of the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> HOWTO</A
> and install it according to the instruction in the accompanying INSTALL file.</P
><P
>To use the method of <A
HREF="#INCLUDE-HTML-FILE-AND-LINKS-IN-MODULE-IFRAME"
>Section 21.7</A
>, just make a module with an index.php file exactly as in the example shown there. It will show the starting page of the PHP-HOWTO in an iframe (<A
HREF="#FIG-IFRAMES"
>Figure 21-3</A
>) and you will be able to navigate its pages without installing anything locally. You have Chris' explicit permission for this.
<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_smile.png"></SPAN
> </P
></TD
></TR
></TABLE
></DIV
><P
>Besides browser compatibility issues, the iframe method has also problems when it comes to printing. For more information on iframes, see <A
HREF="http://www.cs.tut.fi/~jkorpela/html/iframe.html"
TARGET="_top"
>Using inline frames (iframe elements) to embed documents into HTML documents</A
>.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="INCLUDE-PLAIN-TEXT-FILE-IN-MODULE"
>21.8. How to include a plain text file in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module</A
></H2
><P
>A plain text file needs a somewhat different treatment than a HTML file, if it is to be included in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module. The reason is that a plain text file lacks the formatting tags that are present in a usual HTML file. If you simply include it as shown in <A
HREF="#INCLUDE-HTML-FILE-IN-MODULE"
>Section 21.5</A
>, it will show as a single paragraph, lacking any structure. </P
><P
>Why? Because the &#8220;formatting tags&#8221; of a plain text file are the newline characters. They will introduce a new line - and a new paragraph. In HTML however, a newline will not suffice, you need a break tag (&#60;br&#62;) to achieve the same effect. Since a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module is a <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> file, and as such it will be transformed to a HTML file for the visitor, we need to play by the HTML rules if we want our file to be formatted correctly.</P
><P
>Fortunately, the <A
HREF="http://www.php.net/manual/en/function.nl2br.php"
TARGET="_top"
>nl2br <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> function</A
> (newline to break) comes to our rescue here: it will automatically insert HTML &#60;br /&#62; tags (breaks) before every newline in the text file. Replace </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>OpenTable();
include("path/to/the/html/file"); // &#60;-- CHANGE THIS!
CloseTable();</PRE
></FONT
></TD
></TR
></TABLE
><P
>in the code of <A
HREF="#INCLUDE-HTML-FILE-IN-MODULE"
>Section 21.5</A
> with (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=12926"
TARGET="_top"
>another adding module question</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>OpenTable();
$filename = "path/to/the/text/file"; // &#60;-- CHANGE THIS!
$content_array = file($filename);
$content = implode("", $content_array);
print nl2br($content);
CloseTable();</PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="JAVASCRIPT-IN-PHP-NUKE-MODULES"
>21.9. How to use Javascript in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules</A
></H2
><P
>You can include Javascript code in modules without problems in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. You can proceed in two ways:</P
><P
></P
><UL
><LI
><P
>Include your Javascript functions in javascript.php (<A
HREF="#JAVASCRIPT-PHP"
>Section 21.9.1</A
>).</P
></LI
><LI
><P
>Include your complete Javascript code in the module (<A
HREF="#JAVASCRIPT-IN-PHP-NUKE-MODULES-COMPLETE"
>Section 21.9.2</A
>)</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="JAVASCRIPT-PHP"
>21.9.1. Javascript functions in javascript.php</A
></H3
><P
>PHP-Nuke come with its own Javascript functions included in the file javascript.php, located under the includes folder. You can add your own Javascript code there, if you follow some simple rules:</P
><P
></P
><UL
><LI
><P
>Use a decent text editor (see <A
HREF="#EDITING-PHP-NUKE-FILES"
>Chapter 11</A
>) to edit the file.</P
></LI
><LI
><P
>Append your code after the code already there, but before the ending ?&#62; line.</P
></LI
><LI
><P
>&#8220;echo&#8221; each line of your Javascript script. Example: Instead of entering directly the script code:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;script type="text/javascript"&#62;
&#60;!--
function openwindow(){
 window.open
("modules/$name/copyright.php","Copyright","toolbar=no,location=no,directories=no,
status=no,scrollbars=yes,resizable=no,copyhistory=no,width=400,height=200")
}
//--&#62;
&#60;/script&#62;</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>enter it with &#8220;echo&#8221;s as:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>echo "&#60;script type=\"text/javascript\"&#62;\n";
echo "&#60;!--\n";
echo "function openwindow(){\n";
echo " window.open(\"modules/$name/copyright.php\",\"Copyright\",
\"toolbar=no,location=no,directories=no,status=no,
scrollbars=yes,resizable=no,copyhistory=no,width=400,height=200\");\n";
echo "}\n";
echo "//--&#62;\n";
echo "&#60;/script&#62;\n\n";</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Enclose each line in double quotes, like a string, and escape (with a backslash \) any double quote inside that string.</P
></LI
><LI
><P
>Add a newline character (\n) to the string, before the closing double quote<A
NAME="AEN15365"
HREF="#FTN.AEN15365"
><SPAN
CLASS="footnote"
>[26]</SPAN
></A
>.</P
></LI
><LI
><P
>End each line, like every <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> line, with a semicolon (;).</P
></LI
></UL
><P
>If you use vi (see <A
HREF="#VI"
>Section 11.1</A
>), the following sequence of vi commands, applied to a Javascript file, will produce the right <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code to append in the javascript.php file:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>1,$s/"/\\"/g <A
NAME="VI1"
><IMG
SRC="images/callouts/1.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
>
1,$s/^/echo "/ <A
NAME="VI2"
><IMG
SRC="images/callouts/2.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"></A
>
1,$s/$/";/ <A
NAME="VI3"
><IMG
SRC="images/callouts/3.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"></A
>
1,$s/";$/\\n";/ <A
NAME="VI4"
><IMG
SRC="images/callouts/4.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"></A
></PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="CALLOUTLIST"
><DL
COMPACT="COMPACT"
><DT
><A
HREF="#VI1"
><IMG
SRC="images/callouts/1.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
></DT
><DD
>       Escape all double quotes.
      </DD
><DT
><A
HREF="#VI2"
><IMG
SRC="images/callouts/2.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"></A
></DT
><DD
>         Add 'echo "' at the start of every line.
       </DD
><DT
><A
HREF="#VI3"
><IMG
SRC="images/callouts/3.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"></A
></DT
><DD
>      Add '";' at the end of every line.
       </DD
><DT
><A
HREF="#VI4"
><IMG
SRC="images/callouts/4.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"></A
></DT
><DD
>       Add a newline '\n' at the end of each Javascript  line.
       </DD
></DL
></DIV
><P
>You can then include calls to your Javascript functions in the HTML code of your module. You echo the Javascript code, just like any other HTML code.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="JAVASCRIPT-IN-PHP-NUKE-MODULES-COMPLETE"
>21.9.2. Complete Javascript code in modules</A
></H3
><P
>You can use the following template to include your complete Javascript code in your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if (!eregi("modules.php", $PHP_SELF)) {
  die ("You can't access this file directly...");
}
require_once("mainfile.php");
// 0 : do not show right blocks - 1:show right blocks
$index = 0; 
include("header.php");
?&#62;
// PUT HTML OR JAVASCRIPT CODE HERE, 
// OR GET RID OF THE ?&#62; AND &#60;?php ABOVE AND BELOW THIS LINE 
// AND USE &#60;acronym&#62;PHP&#60;/acronym&#62; CODE HERE INSTEAD.
&#60;?php
include("footer.php");
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Javascript with PHP</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you decide to use <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code ("echo"s) to enter your Javascript code, you should take into account the rules presented in <A
HREF="#JAVASCRIPT-PHP"
>Section 21.9.1</A
>.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Javascript codebase</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>You may need to add the following line to your Javascript applet:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>codebase="modules/modulename"</PRE
></FONT
></TD
></TR
></TABLE
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CREATE-LOGOUT-MODULE"
>21.10. How to create a Logout module</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-LOGOUT-MODULE"
></A
><P
><B
>Figure 21-4.    Logout link in the Modules block.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/logout-module.png"><DIV
CLASS="CAPTION"
><P
>Logout link in the Modules block.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Do you consider it too much work for your registered users to have to click on the &#8220;Your Account&#8221; link in the Modules block, be directed to their personal account page, then have to click on &#8220;Logout&#8221; in order to get logged out of your site? Why not have a direct &#8220;Logout&#8221; link in the Modules block? Well, since all links in the Modules block are automatically created from the active modules (unless you created a custom Modules block along the lines of <A
HREF="#BUILD-CUSTOM-MODULE-BLOCKS"
>Section 17.2</A
>), asking for a Logout link in the Modules block is asking for a Logout module!</P
><P
>In fact, it is easy to construct a Logout module - and is another example of using Javascript in modules (see <A
HREF="#JAVASCRIPT-IN-PHP-NUKE-MODULES"
>Section 21.9</A
>):</P
><P
>Create a new folder, call it Logout, in the modules directory. In the Logout folder, create an index.php file that contains (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=18297"
TARGET="_top"
>Add "Logout" to Modules Block</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
echo "
&#60;script type=\"text/javascript\"&#62;
top.location.replace ('modules.php?name=Your_Account&#38;file=index&#38;op=logout')
&#60;/script&#62;
"
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Activate the Logout module from the administration panel. From now on, a Logout link will appear in the Modules block - it will log a registered user immediately upon clicking on it.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="ADVERTISEMENTS-IN-PHP-NUKE-MODULES"
>21.11. How to show advertisements in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules</A
></H2
><P
>So now you have seen how nice your new AdSense block (<A
HREF="#ADVERTISEMENTS-IN-PHP-NUKE-BLOCKS"
>Section 20.7</A
>) looks and you've got appetite for more? Here you are:</P
><P
></P
><UL
><LI
><P
>Google AdSense in the News module (<A
HREF="#GOOGLE-ADSENSE-IN-NEWS-MODULE"
>Section 21.11.1</A
>),</P
></LI
><LI
><P
>Google AdSense on top of a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module (<A
HREF="#GOOGLE-ADSENSE-ON-TOP-OF-PHP-NUKE-MODULE"
>Section 21.11.2</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="GOOGLE-ADSENSE-IN-NEWS-MODULE"
>21.11.1. Google AdSense in the News module</A
></H3
><P
>Wouldn't it be nice to have your Google AdSense placed just right to a news article? The solution we will present here, taken from <A
HREF="http://www.luchtzak.be/modules.php?name=Google_AdSense_PHP-Nuke"
TARGET="_top"
>Google AdSense in PHP-Nuke</A
>, can be used as a starting point for introducing AdSense (and other similar advertisement schemes) in modules other than the News module. </P
><P
>In file modules/News/article.php, look for the following code:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$boxtitle = ""._RELATED."";
$boxstuff = "&#60;font class=\"content\"&#62;";
$sql = "select name, url from ".$prefix."_related where tid=$topic";
$result = $db-&#62;sql_query($sql);
while ($row = $db-&#62;sql_fetchrow($result)) {
$name = $row[name];
$url = $row[url];
$boxstuff .= "&#60;strong&#62;&#60;big&#62;&#38;middot;&#60;/big&#62;&#60;/strong&#62;&#38;nbsp;&#60;a href=\"$url\"
target=\"new\"&#62;$name&#60;/a&#62;&#60;br&#62;\n";
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>just before that, add the following:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>echo "&#60;table border=\"0\" cellpadding=\"0\" cellspacing=\"2\" bgcolor=\"#FFFFFF\"
width=\"160\"&#62;&#60;tr&#62;&#60;td&#62;\n"
."&#60;table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"160\"&#62;\n"
."&#60;/table&#62;\n"
."&#60;table border=\"0\" cellpadding=\"2\" cellspacing=\"2\" bgcolor=\"#FFFFFF\"
width=\"100%\"&#62;\n"
."&#60;tr&#62;&#60;td align=\"center\"&#62;\n"
."&#60;font class=\"title\" size=\"1\"&#62;&#60;b&#62;Related Websites&#60;/b&#62;&#60;/font&#62;\n"
."&#60;/td&#62;&#60;/tr&#62;\n"
."&#60;tr&#62;\n"
."&#60;td bgcolor=\"#FFFFFF\"&#62;&#60;font size=\"1\"&#62;";
?&#62;
&#60;center&#62;
&#60;script type="text/javascript"&#62;&#60;!--
google_ad_client = "your client-number";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "FFFFFF";
google_color_bg = "FFFFFF";
google_color_link = "336699";
google_color_url = "000000";
google_color_text = "000000";
//--&#62;&#60;/script&#62;
&#60;script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js"&#62;
&#60;/script&#62;
&#60;/center&#62;
&#60;?php
echo "&#60;/td&#62;\n"
."&#60;/tr&#62;\n"
."&#60;/table&#62;&#60;/td&#62;&#60;/tr&#62;&#60;/table&#62;\n"
."&#60;br&#62;\n\n\n";</PRE
></FONT
></TD
></TR
></TABLE
><P
>In the above code, you can recognize the Google AdSense Javascript, also used in <A
HREF="#ADVERTISEMENTS-IN-PHP-NUKE-BLOCKS"
>Section 20.7</A
> to show AdSense in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block, in the middle of a table layout construction.</P
><DIV
CLASS="IMPORTANT"
><P
></P
><TABLE
CLASS="IMPORTANT"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.png"
HSPACE="5"
ALT="Important"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Don't forget:</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Add your Google client number in the AdSense script.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="GOOGLE-ADSENSE-ON-TOP-OF-PHP-NUKE-MODULE"
>21.11.2. Google AdSense on top of a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module</A
></H3
><P
>If you would like to add a 728x90 banner on top of every module, you can include the AdSense Javascript code in a separate file, call it adsense.php, then just include this file from your module (you can also choose a 486*60-banner if you like):</P
><P
>Put the following code in includes/adsense.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;center&#62;
&#60;script type="text/javascript"&#62;&#60;!--
google_ad_client = "your client-number";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_color_border = "FFFFFF";
google_color_bg = "FFFFFF";
google_color_link = "336699";
google_color_url = "000000";
google_color_text = "000000";
//--&#62;&#60;/script&#62;
&#60;script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js"&#62;
&#60;/script&#62;
&#60;/center&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>This is nothing else but the well-known Google AdSense Javascript code we have also encountered in <A
HREF="#ADVERTISEMENTS-IN-PHP-NUKE-BLOCKS"
>Section 20.7</A
> and <A
HREF="#GOOGLE-ADSENSE-IN-NEWS-MODULE"
>Section 21.11.1</A
>. Once you have adsense.php in the includes directory, it becomes trivial to use its code in any module you choose: for every module you would like to add the Google AdSense to, look for the following code:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>include("header.php");</PRE
></FONT
></TD
></TR
></TABLE
><P
>and place the following line after that:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>include("includes/adsense.php");</PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Make some room for long banners</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Make sure that your module contains the line</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$index = 0;</PRE
></FONT
></TD
></TR
></TABLE
><P
>(not necessary if you use 468*60),  otherwise you will get the right blocks column too  - and this is not nice with a 728*90-banner.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Long AdSense banner in the News module</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The right place to put the Google AdSense long banner in the News module, is in the modules/News/index.php file,. There, find the line</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$topic_title = $row_a[topictext];</PRE
></FONT
></TD
></TR
></TABLE
><P
>and add the line</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>include("includes/adsense.php");</PRE
></FONT
></TD
></TR
></TABLE
><P
>directly after it (see <A
HREF="http://www.luchtzak.be/modules.php?name=Google_AdSense_PHP-Nuke"
TARGET="_top"
>Google AdSense in PHP-Nuke</A
>).</P
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="HTML-FORMS-IN-MODULE"
>21.12. How to display HTML forms in a module</A
></H2
><P
>When you have HTML forms in a module, you may run into problems with passing the values from the form fields to the module itself. Here is just a simple form that you can use as a starting point for your own module with forms - just make a folder named Testing (for instance) in your modules folder, and put an index.php in it with the following code (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?topic=12863&#38;forum=42"
TARGET="_top"
>File doesn't exist error when posting with a form</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if (!eregi("modules.php", $PHP_SELF)) {
  die ("You can't access this file directly...");
}
require_once("mainfile.php");
include("header.php");
$module_name = basename(dirname(__FILE__));
echo "&#60;center&#62;&#60;form action=\"modules.php?name=$module_name\" method=\"post\"&#62; "
."Name: &#60;input type=\"text\" name=\"yourname\" size=\"20\" 
  value=\"$yourname\"&#62;&#38;nbsp;&#38;nbsp;"
."&#60;input type=\"hidden\" name=\"test_input\" value=\"test is good\"&#62;"
."&#60;input type=\"submit\" value=\"Submit\"&#62;&#60;/form&#62;&#60;/center&#62;";
if($test_input != "") {
  echo "&#60;br&#62;Form worked, and yourname is $yourname";
}
include("footer.php");
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="DUPLICATING-PHP-NUKE-MODULES"
></A
>Chapter 22. Duplicating <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules</H1
><P
>In some situations, you may find yourself wishing a second, identical module to the one you already have installed. This requires the following general steps on your part:</P
><P
></P
><UL
><LI
><P
>Copy the whole module directory, say module1, to a different name, say module2, in the modules folder. You now have modules/module1 and modules/module2, where module1 and module2 are exact directory copies.</P
></LI
><LI
><P
>Copy all administrative files of module1 (if any). Search for them in admin/modules, admin/links and admin/case. The copied files should be in the same directory as the original ones.</P
></LI
><LI
><P
>Find all tables used by module1. This part may be tricky and involves close examination of the code of all files under modules/module1.</P
></LI
><LI
><P
>Locate the part(s) of the nuke.sql file (located under the sql directory of the extracted <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> package) that creates and populates the tables used by module1. Copy that part(s) in a separate file, say nuke2.sql, and change the names of the tables involved e.g. by adding a &#8220;2&#8221; after the names. Run the nuke2.sql file, just as you had ran nuke.sql (see <A
HREF="#DATABASE-CREATION"
>Section 3.2.4</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysql -u dbuname -p dbname &#60; nuke2.sql</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Inspect the code of all files under modules/module2 and change the table names to reflect the changes in nuke2.sql, e.g. by adding a &#8220;2&#8221; to every table that is specific to module2. Also change any references to administrative files to point to the copied ones. Check the code of the copied administrative files too.</P
></LI
><LI
><P
>If your module uses any &#8220;op&#8221; parameter from the URL, you need to edit all the "op" input fields and all the calls to/from those "op's" in the admin/case file.</P
></LI
><LI
><P
>If the duplicate module should use different texts from the original ones, then you should create the appropriate entries in the language files (under admin/language/, modules/YourModule/ and language/).</P
></LI
><LI
><P
>Activate module2 from the administration panel (<A
HREF="#ADMINISTRATION-FUNCTIONS"
>Section 7.1</A
>)</P
></LI
></UL
><P
>As you can see from the above, duplicating modules can be a fairly complicated enterprise (see also <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=14048"
TARGET="_top"
>How do I duplicate modules?</A
>, <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=10394"
TARGET="_top"
>Multiple Content Modules</A
>). In what follows, we will demonstrate this general procedure in a real world example - duplicating the FAQ module.</P
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="DUPLICATING-PHP-NUKE-FAQ-MODULE"
>22.1. Duplicating the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> FAQ module</A
></H2
><P
>Suppose you would like to have two FAQ modules. You might of course ask why on earth you would want such a complication in your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site, but if you recall that <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> lets you decide for each module individually whether to all visitors, only registered ones, or only administrators to view it, you will find out that two identical FAQ modules would be a simple way to have two FAQs, one only for administrators and one for all users. </P
><P
>We will now follow the steps outlined above for the purpose of duplicating the FAQ module:</P
><P
></P
><UL
><LI
><P
>We copy the whole directory modules/FAQ to modules/Admin_FAQ</P
></LI
><LI
><P
>We also copy:</P
><P
></P
><UL
><LI
><P
>admin/modules/adminfaq.php to admin/modules/adminfaq2.php,</P
></LI
><LI
><P
>admin/links/links.faq.php to admin/links/links.faq2.php and</P
></LI
><LI
><P
>admin/case/case.adminfaq.php to admin/case/case.adminfaq2.php.</P
></LI
></UL
></LI
><LI
><P
>Code inspection reveals that the only tables used by the FAQ module are faqAnswer and faqCategories.</P
></LI
><LI
><P
>The relevant part of nuke.sql that creates and populates faqAnswer and faqCategories is easily located. After we append a &#8220;2&#8221; at the table names and copy it to nuke2.sql, the latter will have the following content:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># 
# Table structure for table `nuke_faqAnswer2`
# 
  
CREATE TABLE nuke_faqAnswer2 (
  id tinyint(4) NOT NULL auto_increment,
  id_cat tinyint(4) NOT NULL default '0',
  question varchar(255) default ",
  answer text,
  PRIMARY KEY  (id),
  KEY id (id), 
  KEY id_cat (id_cat)
) TYPE=MyISAM;
#
# Dumping data for table `nuke_faqAnswer2`
#
# --------------------------------------------------------
#
# Table structure for table `nuke_faqCategories2`
#
CREATE TABLE nuke_faqCategories2 (
  id_cat tinyint(3) NOT NULL auto_increment,
  categories varchar(255) default NULL,
  flanguage varchar(30) NOT NULL default ",
  PRIMARY KEY  (id_cat),
  KEY id_cat (id_cat)
) TYPE=MyISAM;
#
# Dumping data for table `nuke_faqCategories2`
#
# --------------------------------------------------------</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>We run the nuke2.sql file from the MySQL prompt::</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysql -u dbuname -p dbname &#60; nuke2.sql</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>This will create the nuke_faqAnswer2 and nuke_faqCategories2 tables in the database dbname (remember to replace dbuname and dbname with their real values from your config.php!). Since the FAQ module does not come with preset categories and answers, the tables are not populated with data.</P
></LI
><LI
><P
>We edit all files under modules/Admin-FAQ and also the administrative files admin/modules/adminfaq2.php, admin/links/links.faq2.php and admin/case/case.adminfaq2.php: we change all references to faqAnswer or faqCategories to faqAnswer2 and faqCategories2 respectively.</P
></LI
><LI
><P
>In admin/case/case.adminfaq.php we change </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>include ("admin/modules/adminfaq.php");</PRE
></FONT
></TD
></TR
></TABLE
><P
>to </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>include ("admin/modules/adminfaq2.php");</PRE
></FONT
></TD
></TR
></TABLE
></LI
></UL
><P
>Finally, we activate the Admin-FAQ module and specify that it can be viewed only by administrators.</P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Don't forget the "op"s!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you want your duplicate module to perform slightly different functions than the original one, there is no way around to creating duplicate "op" functions to be called from the "switch($op)" part of the admin file. In our example, this would mean that  we would change</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>switch($op) {
 case "FaqCatSave":
   FaqCatSave($id_cat, $categories, $flanguage); /* Multilingual Code : added variable */
   break;
 case "FaqCatGoSave":
   FaqCatGoSave($id, $question, $answer);
   break;
 case "FaqCatAdd":
   FaqCatAdd($categories, $flanguage); /* Multilingual Code : added variable */
   break;
 case "FaqCatGoAdd":
   FaqCatGoAdd($id_cat, $question, $answer);
   break;
 case "FaqCatEdit":
   FaqCatEdit($id_cat);
   break;
 case "FaqCatGoEdit":
   FaqCatGoEdit($id);
   break;
 case "FaqCatDel":
   FaqCatDel($id_cat, $ok);
   break;
 case "FaqCatGoDel":
   FaqCatGoDel($id, $ok);
   break;
 case "FaqAdmin":
   FaqAdmin();
   break;
 case "FaqCatGo":
   FaqCatGo($id_cat);
   break;
}
} else {
 echo "Access Denied";
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>in the admin/modules/adminfaq.php file, to: </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>switch($op) {
 case "FaqCatSave2":
   FaqCatSave2($id_cat, $categories, $flanguage); /* Multilingual Code : added variable */
   break;
 case "FaqCatGoSave2":
   FaqCatGoSave2($id, $question, $answer);
   break;
 case "FaqCatAdd2":
   FaqCatAdd2($categories, $flanguage); /* Multilingual Code : added variable */
   break;
 case "FaqCatGoAdd2":
   FaqCatGoAdd2($id_cat, $question, $answer);
   break;
 case "FaqCatEdit2":
   FaqCatEdit2($id_cat);
   break;
 case "FaqCatGoEdit2":
   FaqCatGoEdit2($id);
   break;
 case "FaqCatDel2":
   FaqCatDel2($id_cat, $ok);
   break;
 case "FaqCatGoDel2":
   FaqCatGoDel2($id, $ok);
   break;
 case "FaqAdmin2":
   FaqAdmin2();
   break;
 case "FaqCatGo2":
   FaqCatGo2($id_cat);
   break;
}
} else {
 echo "Access Denied";
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>and then program the new functionality into the new functions (the ones with the 2 suffix in their name).</P
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="SECURITY"
></A
>Chapter 23. Security </H1
><TABLE
BORDER="0"
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
CLASS="EPIGRAPH"
><TR
><TD
WIDTH="45%"
>&nbsp;</TD
><TD
WIDTH="45%"
ALIGN="LEFT"
VALIGN="TOP"
><I
><P
><I
>Aut inveniam viam aut faciam.</I
></P
><P
><I
>I will either find a way or make one.</I
></P
></I
></TD
></TR
></TABLE
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="HOW-SECURE-IS-PHP-NUKE"
>23.1. How secure is PHP-Nuke?</A
></H2
><P
>If you run the security audit tool <A
HREF="http://www.nessus.org"
TARGET="_top"
>nessus</A
> against a host running PHP-Nuke, you will get the following:</P
><A
NAME="AEN15662"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>The remote host is running a copy of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>.</P
><P
>Given the insecurity history of this package, the Nessus team recommands that you do not use it but use something else instead, as security was clearly not in the mind of the persons who wrote it.</P
><P
>The author of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> (Francisco Burzi) even started to rewrite the program from scratch, given the huge number of vulnerabilities (<A
HREF="http://www.phpnuke.org/modules.php?name=News&#38;file=article&#38;sid=5640"
TARGET="_top"
>Clarifications on a possible rewrite of PHP-Nuke</A
>).</P
><P
>Solution : De-install this package and use something else</P
><P
>Risk factor : High</P
></BLOCKQUOTE
><P
>Uh? <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_eek.png"></SPAN
> Does this mean we have throw away PHP-Nuke? Why is nessus saying this? </P
><P
>The link given by nessus above, contains Francisco's thoughts on the furure of PHP-Nuke, provoked by a recent series of security holes at that time. How was Francisco thinking to cope with the security issues? In that article regarding <A
HREF="http://www.phpnuke.org/modules.php?name=News&#38;file=article&#38;sid=5640"
TARGET="_top"
>Clarifications on a possible rewrite of PHP-Nuke</A
>, Franzisco considers the following possibility as the first one that comes to his mind when contemplating on how to proceed:</P
><A
NAME="AEN15685"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>1) The new code will be closed. This means that script kiddies should get a computer science master or PhD before hacking it. This will reduce the security issues. From time to time, a security test will be made on the code to catch those bugs and fix them.</P
></BLOCKQUOTE
><P
>This is a well-known method of securing your programs - it is called <A
HREF="http://www.wikipedia.org/wiki/Security_by_obscurity"
TARGET="_top"
>security by obscurity</A
>. A system relying on security by obscurity may have theoretical or actual security vulnerabilities, but its owners or designers believe that the flaws are not known, and that attackers are unlikely to find them.</P
><P
>Would you trust such a system to be secure? Would you run a Fortune 500 website on top of it? It is in this light that you have to interpret nessus' warning above. Relying on security by obscurity as a strategy for PHP-Nuke, be it only in a thought experiment, will not persuade the security experts at nessus.org. Because in the cryptography world, the reverse of security by obscurity is believed to be true: <A
HREF="http://www.wikipedia.org/wiki/Kerckhoffs%27_principle"
TARGET="_top"
>Kerckhoffs' principle</A
> from the late 1880s, which states that system designers should assume that the entire design of a security system is known to all attackers, with the exception of cryptographic key secrets.</P
><P
>In practice, operators of systems that rely on security by obscurity often keep the fact that their system is broken secret, so as not to destroy confidence in their service or product (see <A
HREF="http://www.wikipedia.org/wiki/Security_by_obscurity"
TARGET="_top"
>security by obscurity</A
>). Examples of such systems are the <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> &#8220;operating system&#8221; and the IIS web server. According to its creator above, <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> may join them in the future. This has not kept large firms from using these products for their web presence, though. It is therefore up to you how you interpret nessus' warning and Francisco's tendency to resort to controversial security principles.</P
><P
>People have commented on Francisco's thoughts in that article, the sleepless nights trying to close the security holes that were afflicting thousands of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> sites were over and, after some sleep and thoughtful weighting of all the factors involved, Francisco published an <A
HREF="http://www.phpnuke.org/modules.php?name=News&#38;file=article&#38;sid=5647&#38;mode=thread&#38;order=0&#38;thold=0"
TARGET="_top"
>Update and answer to all your nice comments</A
>. In this update, we read that the to do list for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> starts as follows:</P
><A
NAME="AEN15717"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>1) Release the 6.5 version</P
><P
>2) Start catching security bugs, sql injections holes, etc and fixing it.</P
><P
>3) Recode some parts of the core system to properly check variables against malicious code.</P
><P
>4) Reorganization of some html code</P
><P
>etc.</P
></BLOCKQUOTE
><P
>Unfortunately,  reading the above can give one the impression that the release of an intermediate version (priority 1) is more important  than catching security bugs and properly checking against malicious code (priorities 2 and 3 respectively), even if this may not be really the case in the author's mind.<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
> </P
><P
>In fact, Francisco, does care about security, as he confesses in another article on the <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=13048"
TARGET="_top"
>History of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> and Post-Nuke</A
>:</P
><A
NAME="AEN15738"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>About security... Many people can think that I don't care about security... I care, a lot. But what I don't do is to publish "exploits" in my site about my software...Paul is the perfect proof of the above affirmation, he's a direct witness of my interest on this matter... is secret yes, but there is interest.</P
></BLOCKQUOTE
><P
>Should nessus' warning prevent you from deploying <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> on your site? This is a question that only you can answer. In the Web there are multiple truths that can coexist one besides the other. In <A
HREF="http://philip.greenspun.com/panda/suck"
TARGET="_top"
>Envisioning a Site That Won't Be Featured In suck.com</A
>, Philip Greenspun writes about one-truth cultures:</P
><A
NAME="AEN15751"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>Oral cultures do not share this belief. Knowledge is open-ended. People may hold differing opinions without one person being wrong. There is not necessarily one truth; there may be many truths. Though he didn't grow up in an oral culture, Shakespeare knew this. Watch Troilus and Cressida and its five perspectives on the nature of a woman's love. Try to figure out which perspective Shakespeare thinks is correct.</P
></BLOCKQUOTE
><P
>In deciding how secure <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> is for you, you have to find your own truth. Let's have a look at PHP-Nuke's security record, since this is what nessus mentions as a prominent reason not to use it.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="SECURITY-RECORD-SOFTWARE-POPULARITY"
>23.2. The impact of bad security record on software popularity</A
></H2
><P
><A
HREF="http://www.sendmail.org"
TARGET="_top"
>sendmail</A
>, the leading Mail Transport Agent in use today, was written at a time when security was not a big issue. Internet was not as widespread as today and the netizens were kinder to each other. To use nessus' words, &#8220;security was clearly not in the mind of the persons who wrote it&#8221;. Sendmail's security record is legendary (one is tempted to say &#8220;abysmal&#8221;), see this list of <A
HREF="http://cr.yp.to/maildisasters/sendmail.html"
TARGET="_top"
>Sendmail desasters</A
>, which only covers the period from 1993 through 1997. There was a time when sysadmins had to get used to weekly security patches from the sendmail author and even joked about that. </P
><P
>Did this prevent the whole world from using sendmail? Not at all. Did this prevent Fortune 500 companies from organising their mail systems with sendmail? Doesn't seem so. I wonder if the nessus folks would issue the same warning for sendmail too (didn't check, I must admit): </P
><A
NAME="AEN15773"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>The remote host is running a copy of Sendmail. Given the insecurity history of this package, the Nessus team recommends that you do not use it but use something else instead, as security was clearly not in the mind of the persons who wrote it.</P
></BLOCKQUOTE
><P
>Other software, like vBulletin, Iconboard, YaBB or Post-Nuke have shown security problems too. Even hardware is not safe from vulnerabilities today, since it may be running on faulty firmware. See <A
HREF="http://www.nukecops.com/article46.html"
TARGET="_top"
>How secure is PHP-Nuke?</A
> for a long list of links on such examples. </P
><P
>You may have a different opinion on sendmail's merits, but obviously its security record did not harm its popularity that much. And we didn't go that far as to examine this effect on even more popular software, like <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
>. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> That's why, once again, you have to weigh nessus' warning with your own personal &#8220;weight factor&#8221;.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="COMMON-PHP-NUKE-SECURITY-VULNERABILITIES"
>23.3. Common <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> security vulnerabilities</A
></H2
><P
>It's instructive to take the time and have a look at <A
HREF="http://www.secunia.com/advisories/search/date/?task=search&#38;search=php-nuke&#38;vuln_title=1&#38;vuln_software_os=1&#38;vuln_bodytext=1&#38;vuln_cve=1"
TARGET="_top"
>PHP-Nuke's list of vulnerabilities</A
> (see <A
HREF="#TAB-SECURITY-VULNERABILITIES"
>Table 23-1</A
>). Even a superficial inspection reveals some common vulnerability patterns:</P
><P
></P
><UL
><LI
><P
>Cross-site scripting (<A
HREF="#CROSS-SITE-SCRIPTING-WITH-PHP-NUKE"
>Section 23.3.1</A
>)</P
></LI
><LI
><P
>SQL injection (<A
HREF="#SQL-INJECTION-WITH-PHP-NUKE"
>Section 23.3.2</A
>)</P
></LI
><LI
><P
>Path disclosure (<A
HREF="#PATH-DISCLOSURE-WITH-PHP-NUKE"
>Section 23.3.3</A
>)</P
></LI
><LI
><P
>Cross-site tracing (<A
HREF="#CROSS-SITE-TRACING-WITH-PHP-NUKE"
>Section 23.3.4</A
>)</P
></LI
></UL
><P
>In the following we will examine them in more detail.</P
><P
><DIV
CLASS="TABLE"
><A
NAME="TAB-SECURITY-VULNERABILITIES"
></A
><P
><B
>Table 23-1. List of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> security vulnerabilities</B
></P
><TABLE
BORDER="1"
RULES="all"
CLASS="CALSTABLE"
><COL
WIDTH="1*"
ALIGN="LEFT"
TITLE="COL0"><COL
WIDTH="1*"
ALIGN="LEFT"
TITLE="COL1"><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Description</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Date</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><A
HREF="http://www.secunia.com/advisories/10040/"
TARGET="_top"
>PHP-Nuke Path Disclosure Vulnerability</A
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>21.10.2003</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><A
HREF="http://www.secunia.com/advisories/9307/"
TARGET="_top"
>Splatt Forum Cross-Site Scripting Vulnerability</A
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>19.07.2003</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><A
HREF="http://www.secunia.com/advisories/8801/"
TARGET="_top"
>PHP-Nuke SQL injection</A
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>19.05.2003</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><A
HREF="http://www.secunia.com/advisories/8716/"
TARGET="_top"
>Splatt Forum Cross Site Scripting</A
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>02.05.2003</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><A
HREF="http://www.secunia.com/advisories/8662/"
TARGET="_top"
>PHP-Nuke Cross-Site Scripting</A
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>25.04.2003</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><A
HREF="http://www.secunia.com/advisories/8478/"
TARGET="_top"
>PHP-Nuke Cross-Site Scripting</A
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>01.04.2003</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><A
HREF="http://www.secunia.com/advisories/8417/"
TARGET="_top"
>PHP-Nuke SQL Injection</A
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>26.03.2003</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><A
HREF="http://www.secunia.com/advisories/8341/"
TARGET="_top"
>PHP-Nuke Referer Cross-Site Scripting</A
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>19.03.2003</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><A
HREF="http://www.secunia.com/advisories/8321/"
TARGET="_top"
>PHP-Nuke Path Disclosure</A
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>18.03.2003</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><A
HREF="http://www.secunia.com/advisories/8245/"
TARGET="_top"
>PHP-Nuke Multiple SQL Injection Vulnerabilities</A
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>07.03.2003</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><A
HREF="http://www.secunia.com/advisories/8144/"
TARGET="_top"
>PHP-Nuke Multiple SQL Injection Vulnerabilities</A
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>25.02.2003</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><A
HREF="http://www.secunia.com/advisories/7993/"
TARGET="_top"
>PHP Nuke Avatar Scriptcode Injection</A
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>04.02.2003</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><A
HREF="http://www.secunia.com/advisories/7776/"
TARGET="_top"
>PHP-Nuke mail CRLF injection</A
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>23.12.2002</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><A
HREF="http://www.secunia.com/advisories/7731/"
TARGET="_top"
>PHP-Nuke execution of arbitrary code</A
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>17.12.2002</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><A
HREF="http://www.secunia.com/advisories/7736/"
TARGET="_top"
>PHP-Nuke Cross Site Scripting</A
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>17.12.2002</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><A
HREF="http://www.secunia.com/advisories/7595/"
TARGET="_top"
>PHP-Nuke Cross Site Scripting</A
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>25.11.2002</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><A
HREF="http://www.secunia.com/advisories/7430/"
TARGET="_top"
>PHP-Nuke SQL injection resets passwords</A
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>01.11.2002</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><A
HREF="http://www.secunia.com/advisories/7271/"
TARGET="_top"
>PHP-Nuke Cross Site Scripting</A
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>10.10.2002</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><A
HREF="http://www.secunia.com/advisories/7153/"
TARGET="_top"
>Cross Site Scripting holes in Xoops, PHP-Nuke, NPDS, daCode, Drupal and phpWebSite</A
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>24.09.2002</P
></TD
></TR
></TBODY
></TABLE
></DIV
></P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CROSS-SITE-SCRIPTING-WITH-PHP-NUKE"
>23.3.1. Cross-site scripting with PHP-Nuke</A
></H3
><P
>A CSS vulnerability is caused by the failure of a site to validate user input before returning it to the client s web-browser. The essence of cross-site scripting is that an intruder causes a legitimate web server to send a page to a victim's browser that contains malicious script or HTML of the intruder's choosing. The malicious script runs with the privileges of a legitimate script originating from the legitimate web server (see <A
HREF="http://www.cert.org/archive/pdf/cross_site_scripting.pdf"
TARGET="_top"
>Cross-Site Scripting Vulnerabilities</A
>). By failing to validate user input, the vulnerable site makes it possible for a malicious user to execute (&#8220;inject&#8221;) a script in the context of that site's process.</P
><P
>Here are some known examples of cross-site scripting with PHP-Nuke:</P
><P
></P
><UL
><LI
><P
>When a user posts messages, special characters are not stripped making it possible to inject malicious script code. The user types in a forum message </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Some test text for fun &#60;script&#62;alert(document.cookie);&#60;/script&#62; some more text..</PRE
></FONT
></TD
></TR
></TABLE
><P
>the text is not checked for the presence of a script - and the script is executed in the victim's browser, who thinks it is a safe forum text from a trusted <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site. (see <A
HREF="http://www.secunia.com/advisories/8716/"
TARGET="_top"
>Splatt Forum Cross Site Scripting</A
>).</P
></LI
><LI
><P
>In a search field, the user types</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;script&#62;alert(document.cookie);&#60;/script&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>The search text is displayed in the results page without being validated. The result: a script is again executed in the victim's browser (see <A
HREF="http://www.secunia.com/advisories/8716/"
TARGET="_top"
>Splatt Forum Cross Site Scripting</A
>, <A
HREF="http://www.secunia.com/advisories/7595/"
TARGET="_top"
>PHP-Nuke Cross Site Scripting</A
>).</P
></LI
><LI
><P
>In a forum post, a user types</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;html&#62;
&#60;body&#62;
&#60;script&#62;
&#60;!-- Modify here --&#62;
var address='http://www.splatt.it/gate.html?mop=modload&#38;name=Forums&#38;file=newtopic';
&#60;/script&#62;
&#60;!-- Exploit form --&#62;
&#60;script&#62;
document.write("&#60;form action="+address+" method='post' name='coolsus'&#62;");
&#60;/script&#62;
Forum Number: &#60;input type=text name=forum value=1 size=3&#62;&#60;br&#62;
Username: &#60;input CLASS=textbox TYPE="TEXT" NAME="username" 
           SIZE="25" MAXLENGTH="40"&#62;&#60;br&#62;
Password: &#60;input CLASS=textbox TYPE="PASSWORD" NAME="password" 
           SIZE="25" MAXLENGTH="25"&#62;&#60;br&#62;
Subject: &#60;input CLASS=textbox TYPE="TEXT" NAME="subject" 
          SIZE="75" MAXLENGTH="75"&#62;&#60;br&#62;
Message:&#60;br&#62;&#60;textarea name="message" rows="10" cols="75" 
        wrap="VIRTUAL"&#62;&#60;/textarea&#62;&#60;br&#62;
&#60;input type=hidden name=bbcode value=0&#62;
&#60;input type=hidden name=smile value=0&#62;
&#60;input type=hidden name=notify value=0&#62;
&#60;b&#62;Inject code:&#60;/b&#62; &#60;input type=text name=image_subject 
value='icon1.gif"&#62;HTML CODE&#60;!-- "' size=100&#62;&#60;br&#62;
&#60;input type="submit" name="submit" value=submit class="Button"&#62;
&#60;/form&#62;
&#60;/body&#62;
&#60;/html&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>The input is not checked if it contains malicious code, the script is executed in a user's browser when viewed. Successful exploitation can result in disclosure of various information (eg. cookie-based authentication information) associated with the site running Splatt Forum or inclusion of malicious content, which the user thinks is part of the real website (see <A
HREF="http://www.secunia.com/advisories/9307/"
TARGET="_top"
>Splatt Forum Cross-Site Scripting Vulnerability</A
>).</P
></LI
><LI
><P
>Due to insufficient validation of user input used in an attribute inside a tag, arbitrary script code can be executed by a malicious user. The characters &#60; and &#62; are filtered, but <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> neglects to filter out &#8220; characters. A malicious person can exploit this to execute arbitrary script code in a user's browser session by including it in either the profile, comments, or a private message, where one has only to type something like</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;a href="http://" onclick="alert('test')"&#62;http://" onclick="alert('test')&#60;/a&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>to provoke this behaviour (see <A
HREF="http://www.secunia.com/advisories/8662/"
TARGET="_top"
>PHP-Nuke Cross-Site Scripting</A
>).</P
></LI
><LI
><P
>By posting a forum message with a title like: </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>"&#62;&#38;lt;script&#38;gt;evil_code;&#38;lt;/script&#38;gt; </PRE
></FONT
></TD
></TR
></TABLE
><P
>the title will be returned by blocks/block-Forum.php as valid html or script code to the users viewing the message (see <A
HREF="http://www.secunia.com/advisories/8478/"
TARGET="_top"
>PHP-Nuke Cross-Site Scripting</A
>).</P
></LI
><LI
><P
>Input supplied to the $referer variable is not filtered when inserted into the backend database, which makes it possible to include arbitrary script code. When viewed by an administrator, the script code will be executed automatically in the administrator's browser session and could eg. steal the authentication cookie associated with the website, which contains the administrator's username and password (see <A
HREF="http://www.secunia.com/advisories/8341/"
TARGET="_top"
>PHP-Nuke Referer Cross-Site Scripting</A
>).</P
></LI
><LI
><P
>Using the following manipulated addresses</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>modules/Forums/bb_smilies.php?name=code
modules/Forums/bb_smilies.php?Default_Theme=code
modules/Forums/bb_smilies.php?site_font=}--&#62;&#60;/style&#62;code
modules/Forums/bb_smilies.php?bgcolor1="&#62;code</PRE
></FONT
></TD
></TR
></TABLE
><P
>where "code" is a malicious code, a user can execute this code in a viewer's browser (see <A
HREF="http://www.secunia.com/advisories/7736/"
TARGET="_top"
>PHP-Nuke Cross Site Scripting</A
>).</P
></LI
></UL
><P
>As you can see from the above examples, the only remedy to cross-site scripting problems is to write <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code that validates user input (or, if you are the &#8220;viewer&#8221;, disable scripting altogether, although even this will not prevent the injection of malicious HTML, see <A
HREF="http://www.cert.org/archive/pdf/cross_site_scripting.pdf"
TARGET="_top"
>Cross-Site Scripting Vulnerabilities</A
>).</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="SQL-INJECTION-WITH-PHP-NUKE"
>23.3.2. SQL injection with PHP-Nuke</A
></H3
><P
>Interaction with relational databases takes place through a textual language, the Structured Query Language ('SQL'). The most recent standard is ANSI SQL-92 and forms the basis around which most SQL dialects are based today. See <A
HREF="http://www-dbs.inf.ethz.ch/~isk/WS_97/syntax_diagramme/"
TARGET="_top"
>SQL syntax diagrams</A
> for a visualization of SQL syntax. Data extraction from the database takes place through a 'query', which is a collection of SQL statements. An SQL query returns the data in a so-called 'result set'. </P
><P
>SQL statements are divided into two general categories: those that can modify the structure (Data Definition Language statements, or 'DDL') and those that can manipulate the contents of databases (Data Manipulation Language statements, or 'DML'). SQL Injection occurs when an attacker is able to insert a series of SQL statements into a 'query' by manipulating data input into an application (see <A
HREF="http://www.nextgenss.com/papers/advanced_sql_injection.pdf"
TARGET="_top"
>Advanced SQL Injection in SQLServer Applications</A
>).</P
><P
>The typical scenario of an SQL Injection goes like this: an SQL statement like (taken from mainfile.php)</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>SELECT active FROM ".$prefix."_modules WHERE title='$module'</PRE
></FONT
></TD
></TR
></TABLE
><P
>is used to retrieve the 'active' column from the 'nuke_modules' table (assuming that $prefix is set to 'nuke' in config.php, see <A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>), returning in the 'result set' only the row that matches the module $module. An important point to note here is that the string literal '$module' is delimited with single quotes. Presuming that $module is taken from the URL or from user input and was not subjected to further scrutiny, one could use a &#8220;module name&#8221; of </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>' UNION ALL SELECT user_password FROM nuke_users WHERE "=' </PRE
></FONT
></TD
></TR
></TABLE
><P
>and the 'query string' would become: </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>SELECT active FROM ".$prefix."_modules 
WHERE title=" UNION ALL SELECT user_password FROM nuke_users WHERE "="</PRE
></FONT
></TD
></TR
></TABLE
><P
>The database server would execute the first part </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>SELECT active FROM ".$prefix."_modules WHERE title="</PRE
></FONT
></TD
></TR
></TABLE
><P
>and would find no modules with empty title. It would then combine<A
NAME="AEN16048"
HREF="#FTN.AEN16048"
><SPAN
CLASS="footnote"
>[27]</SPAN
></A
> this empty result set with the outcome of </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>SELECT user_password FROM nuke_users WHERE "="</PRE
></FONT
></TD
></TR
></TABLE
><P
>which selects all passwords (since the WHERE clause is tautologically true, comparing an empty string with itself), returning the &#8220;cartesian product&#8221; (UNION) of the two - i.e. the set of all passwords. If the outcome of such a query is supposed to be printed somewhere, the user will be able to see sensitive information.</P
><P
>If the &#8220;module name&#8221; passed on unchecked were</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>' ; DROP TABLES WHERE "='</PRE
></FONT
></TD
></TR
></TABLE
><P
>the consequences would be catastrophic: the database server would execute</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>SELECT active FROM ".$prefix."_modules WHERE title=" ; DROP TABLES WHERE "="</PRE
></FONT
></TD
></TR
></TABLE
><P
>Depending on the actual SQL query, you may have to try some of these possibilities for the WHERE clause:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>' or 1=1--
" or 1=1--
or 1=1--
' or 'a'='a
" or "a"="a
') or ('a'='a</PRE
></FONT
></TD
></TR
></TABLE
><P
>instead of</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>"='</PRE
></FONT
></TD
></TR
></TABLE
><P
>The general rule is that to "break out" of the quotes and manipulate the SQL query, while maintaining valid SQL syntax, your query string must start with a quote and end in a WHERE clause that needs a query appended to it (see <A
HREF="http://www.spidynamics.com/papers/SQLInjectionWhitePaper.pdf"
TARGET="_top"
>SQL Injection</A
>).</P
><P
>In PHP-Nuke, SQL injection has been reported in the following vulnerabilities:</P
><P
></P
><UL
><LI
><P
>The "cid" parameter isn't properly verified in the "Downloads" module. This can be exploited to manipulate the SQL query and may potentially allow bypassing authentication or reveal sensitive information (see <A
HREF="http://www.secunia.com/advisories/9994/"
TARGET="_top"
>PHP-Nuke SQL Injection Vulnerability</A
>).</P
></LI
><LI
><P
>Numeric values in the Web_Links module aren't validated before they are used in SQL queries. Example:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>/modules.php?op=modload&#38;name=Web_Links&#38;file=index&#38;l_op=viewlink&#38;cid=2%20malicious_SQL </PRE
></FONT
></TD
></TR
></TABLE
><P
>(see <A
HREF="http://www.secunia.com/advisories/8801/"
TARGET="_top"
>PHP-Nuke SQL injection</A
>). You wonder how malicious_SQL might look like? Here is a real world example from my web server logs:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>/modules.php?name=Web_Links&#38;l_op=viewlink&#38;cid=2
%20UNION%20select%20counter,%20pwd,%20aid%20FROM%20nuke_authors%20</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Several input validation errors, which could be exploited by malicious people to manipula te existing SQL queries by conducting SQL injection attacks against the application, see <A
HREF="http://www.secunia.com/advisories/8417/"
TARGET="_top"
>PHP-Nuke SQL Injection</A
>.</P
></LI
><LI
><P
>Input validation errors in the modules "Members_List" and "Your_Account", which can be exploited by conducting a SQL injection attack, see <A
HREF="http://www.secunia.com/advisories/8245/"
TARGET="_top"
>PHP-Nuke Multiple SQL Injection Vulnerabilities</A
>.</P
></LI
><LI
><P
>Vulnerabilities can be exploited to manipulate existing SQL queries, which can result in disclosure of the Admin user's password hash. This can afterwards be used to gain administrative priviliges for PHP-Nuke, see <A
HREF="http://www.secunia.com/advisories/8144/"
TARGET="_top"
>PHP-Nuke Multiple SQL Injection Vulnerabilities</A
>.</P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PATH-DISCLOSURE-WITH-PHP-NUKE"
>23.3.3. Path disclosure with PHP-Nuke</A
></H3
><P
>Path disclosure is a vulnerability that enables a user to gain knowledge of the internal path structure of an installation. It affects not only PHP-Nuke, but almost all <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> scripts too. A typical path disclosure scenario goes as follows:</P
><P
>A user enters deliberately a value which is passed unchecked to the script. The value is crafted so as to cause an error in the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> interpreter or the database server. The user's speculation is that the error message will contain valuable information about the paths of the given software installation.</P
><P
>As an example, the error could be something like:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Fatal error: Cannot redeclare theindex() in 
/mnt/be1/02/738/0004711/w3/htdocs/www.yoursite.net/index.php 
on line 7</PRE
></FONT
></TD
></TR
></TABLE
><P
>Typically, error reporting is set to display the errors on the served page and the user would gain knowledge of the full path of the index.php script on the server. This may or may not worry you, but it is a good idea to keep undisclosed to malicious users. To achieve this, once a script is in production and displayed messages are no longer needed for debugging, they should be disabled.</P
><P
>Path disclosure with <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> has been reported in the following cases:</P
><P
></P
><UL
><LI
><P
>The search module can't handle certain characters such as """, "&#38;gt;" and "'". This causes <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> to return an error m essage that discloses the installation path (see <A
HREF="http://www.secunia.com/advisories/10040/"
TARGET="_top"
>PHP-Nuke Path Disclosure Vulnerability</A
>).</P
></LI
><LI
><P
>The <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> script "print.php" used by the modules "News" and "AvantGo" does not verify user input supplied to the "$sid" variable. A malicious person could exploit this to gain knowledge of the full path to the installation directory by sending a HTTP request including invalid input to the "$sid" variable (see <A
HREF="http://www.secunia.com/advisories/8321/"
TARGET="_top"
>PHP-Nuke Path Disclosure</A
>).</P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CROSS-SITE-TRACING-WITH-PHP-NUKE"
>23.3.4. Cross-site tracing with PHP-Nuke</A
></H3
><P
>A new vulnerability has been found in Microsoft's Internet Information Server (IIS) which allows the reading of cookies. This is potentially possible also on Apache. Since <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> relies on the cookie mechanism (<A
HREF="#COOKIES"
>Section 23.4.5</A
>) for user authentication, it is important to know the risks emanating from this type of vulnerability. Here is the way it works, according a <A
HREF="http://www.cert.org/nav/index_main.html"
TARGET="_top"
>CERT</A
> advisory (see <A
HREF="http://www.kb.cert.org/vuls/id/288308"
TARGET="_top"
>Microsoft Internet Information Server (IIS) vulnerable to cross-site scripting via HTTP TRACK method</A
>):</P
><P
>Microsoft IIS servers support the HTTP TRACK method. The HTTP TRACK method asks a web server to echo the contents of the request back to the client for debugging purposes. The TRACK request is not RFC compliant and not well documented.</P
><P
>The complete request, including HTTP headers, is returned in the entity-body of a TRACK response. This leads to a Cross-site Scripting attack. Using features that provide client-side HTTP protocol support, such as <A
HREF="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/xmlsdk/htm/xml_obj_ixmlhttprequest_8bp0.asp"
TARGET="_top"
>XMLHTTP</A
> ActiveX or XMLDOM scripting objects, a web site can cause browsers to issue TRACK requests. The site can read the TRACK response, including sensitive header information such as cookies or authentication data.</P
><P
>Because the TRACK method is similar to the TRACE method, when combined with cross-domain browser vulnerabilities (<A
HREF="http://www.kb.cert.org/vuls/id/244729"
TARGET="_top"
>VU#244729</A
>, <A
HREF="http://www.kb.cert.org/vuls/id/711843"
TARGET="_top"
>VU#711843</A
>, <A
HREF="http://www.kb.cert.org/vuls/id/728563"
TARGET="_top"
>VU#728563</A
>), HTTP TRACK and client-side HTTP support can be leveraged by attackers to read sensitive header information from third-party domains. This technique has been termed "Cross-Site Tracing," or XST, in <A
HREF="http://www.cgisecurity.com/whitehat-mirror/WhitePaper_screen.pdf"
TARGET="_top"
>Cross-Site Tracing (XST)</A
>, a report published by WhiteHat Security. Cross-site tracing is also described in a <A
HREF="http://www.kb.cert.org/vuls/id/867593"
TARGET="_top"
>CERT advisory about Cross-Site-Tracing</A
>.</P
><P
>As noted in the report of WhiteHat, the technique can be used to bypass the <A
HREF="http://msdn.microsoft.com/workshop/author/dhtml/httponly_cookies.asp"
TARGET="_top"
>HttpOnly</A
> cookie attribute introduced in Microsoft Internet Explorer 6.0 SP1. HttpOnly blocks script access to the <A
HREF="http://msdn.microsoft.com/workshop/author/dhtml/reference/properties/cookie.asp"
TARGET="_top"
>cookie</A
> property (document.cookie), but does not prevent a scripting object from reading the cookie out of an HTTP TRACK response. In the White Paper of WhiteHat Security, this new method of Cross-Site-Scripting is explained in detail. The essence is that this technique</P
><A
NAME="AEN16193"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>...is able not only to bypass the httpOnly mechanism present in i.e. 6 service pack 1, but in addition the ability to xss just about anything from just about anywhere. This technique allows client-side scripting languages, such as javascript, and possibly other client-side technologies like vbscript, flash, java, etc., the ability access http web authentication credentials, with the added bonus of achieving this result over ssl.</P
></BLOCKQUOTE
><P
>Normally, the cookie is sent back to the domain it belongs. But with this TRACE or TRACK HTTP method, it is possible to request a trace and the web server will send back all data, <EM
>including the cookie!</EM
> This is especially important for PHP-Nuke, since it relies on cookies for the authentication of its users.</P
><P
>To protect yourself, you should deactivate the TRACE HTTP method , if you are using Apache, and the TRACK HTTP method, if you are using IIS:</P
><P
></P
><UL
><LI
><P
>For Apache, you should put the following in the .htaccess file (<A
HREF="#HTACCESS-FILE"
>Section 25.4</A
>) of your document root (or, for performance reasons, directly in the configuration file of Apache, if you have access to it):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>RewriteEngine On
RewriteCond %{REQUEST_METHOD} ^TRACE
RewriteRule .* - [F]</PRE
></FONT
></TD
></TR
></TABLE
><P
>Of course, this assumes that you have mod_rewrite (<A
HREF="#MOD-REWRITE"
>Section 25.2</A
>) installed.</P
></LI
><LI
><P
>For IIS, you should filter out the TRACE and TRACK methods with the URLScan filter. The only methods allowed should be GET, HEAD and POST.</P
></LI
></UL
><P
>There is nothing you can do in the code of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> to avoid this vulnerability, however you should bear in mind when we talk about cookies <A
HREF="#COOKIES"
>Section 23.4.5</A
> that a Cross-Site Tracing attack may steal the cookies of your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> too. See also <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=341"
TARGET="_top"
>Cross-site tracing attack via HTTP TRACK / TRACE method</A
>.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="GUARD-SECURITY-VULNERABILITIES-IN-PHP-NUKE"
>23.4. How to guard against security vulnerabilities in PHP-Nuke</A
></H2
><P
>After all the detailed excusion to the security risks lurking around your pristine installation of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> that was undertaken in the previous sections, you may be asking yourself if there is anything you can do to avoid them. Indeed, following the advice in this section, will render your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> system as secure as can be. </P
><P
>But there is also one point you should understand while talking about software (and especially Web software) security: there is no absolute security! You can make life very difficult for the hypothetical &#8220;malicious user&#8221;, but then, given enough (time, money and criminal energy) resources, every system connected to the Web can become vulnerable. Thus, if your carreer depends on this, hire a security professional to check the code for you. </P
><P
>However, even if you are on your own, you can still do a lot to guard against security vulnerabilities. You can:</P
><P
></P
><UL
><LI
><P
>Stay current on developments and apply security fixes (see <A
HREF="#SECURITY-FIXES"
>Section 23.4.1</A
>).</P
></LI
><LI
><P
>Take the right security measures (see <A
HREF="#SECURITY-MEASURES"
>Section 23.4.2</A
>).</P
></LI
><LI
><P
>Perform a security audit of the code yourself (see <A
HREF="#SECURITY-AUDIT"
>Section 23.4.3</A
>).</P
></LI
><LI
><P
>Check file permissions (see <A
HREF="#PERMISSIONS2"
>Section 23.4.4</A
>) and cookie settings (see <A
HREF="#COOKIES"
>Section 23.4.5</A
>).</P
></LI
></UL
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Disable HTML and uploads!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Many of the most important security risks arise from the fact that HTML is allowed in the News and Forums, or that users are allowed to upload avatars or mail attachments to the web server. You can thus diminish the attack potential against your site, if you disable HTML and uploads. But of course, this will not protect you from everything, so read on!
<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
></P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="SECURITY-FIXES"
>23.4.1. Security fixes</A
></H3
><P
>No piece of software is free from security related bugs. <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> is no exception to this rule. Due to its open source nature, everyone can search the source code for security holes. This is done by professionals and amateurs alike. When a security hole is found (i.e. a bug in the code that has the potential to enable unauthorized access and/or execution of code, leading to a compromise of the system's integrity or function), a bug fix will appear that closes it. It is of utmost importance to the integrity of your data to follow the developement in this area and apply those &#8220;security fixes&#8221; as soon as they become available.</P
><P
>If you run a fresh version of the analyze.php script (see <A
HREF="#ANALYZE-PHP"
>Section 3.9.1.3</A
>), it will not only test your database connection and report errors, it will also warn you of any vulnerabilities regarding your <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> version (see <A
HREF="#FIG-ANALYZE-WARNING-PHP"
>Figure 23-1</A
>).

<DIV
CLASS="FIGURE"
><A
NAME="FIG-ANALYZE-WARNING-PHP"
></A
><P
><B
>Figure 23-1.    <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> security warning from analyze.php.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/analyze-warning-php.png"><DIV
CLASS="CAPTION"
><P
>PHP security warning from analyze.php.</P
></DIV
></P
></DIV
></DIV
></P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Run a fresh analyze.php regularly</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>analyze.php will also test other components of your system, such as MySQL, various modules etc. for known vulnerabilities, so you should run a fresh copy at regular intervalls (an old copy will not report new vulnerabilities, of course!). But it is also important that you do not rely completely on one script. There is no way around subscribing to the security mailing lists, if you want to stay current on developments in the software security field. </P
></TD
></TR
></TABLE
></DIV
><P
>You should register yourself to well-known security advisories, like those from <A
HREF="http://www.secunia.com"
TARGET="_top"
>secunia</A
>, <A
HREF="http://www.securityfocus.com"
TARGET="_top"
>securityfocus</A
>, <A
HREF="http://www.cert.org"
TARGET="_top"
>CERT</A
>, <A
HREF="http://neworder.box.sk"
TARGET="_top"
>http://neworder.box.sk</A
> or <A
HREF="http://www.linuxsecurity.com"
TARGET="_top"
>linuxsecurity</A
> and filter those that are relevant to <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> (unless you plan to read emails all day!). </P
><P
>Upon reading about a new vulnerability for PHP-Nuke, you should reach the pages of</P
><P
></P
><UL
><LI
><P
><A
HREF="http://phpnuke.org"
TARGET="_top"
>PHP-Nuke</A
></P
></LI
><LI
><P
><A
HREF="http://www.nukecops.com"
TARGET="_top"
>nukecops</A
></P
></LI
><LI
><P
><A
HREF="http://www.nukeresources.com"
TARGET="_top"
>nukeresources</A
></P
></LI
><LI
><P
><A
HREF="http://www.nukesecurity.com"
TARGET="_top"
>nukesecurity</A
></P
></LI
></UL
><P
>looking for available security fixes to apply. For example, <A
HREF="http://www.nukeresources.com"
TARGET="_top"
>nukeresources</A
> collects all (security or not) fixes to the 6.x version of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> under <A
HREF="http://www.nukeresources.com/downloads-cat-63.html"
TARGET="_top"
>Downloads Category: PHPNuke 6.x / Fixes</A
>.</P
><P
>If a new <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> vulnerability has been discovered, then the first place to run to, is <A
HREF="http://www.php.net"
TARGET="_top"
>php.net</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="SECURITY-MEASURES"
>23.4.2. Security measures</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-ANALYZE-WARNING-SITEKEY"
></A
><P
><B
>Figure 23-2.    Site key security warning from analyze.php.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/analyze-warning-sitekey.png"><DIV
CLASS="CAPTION"
><P
>Site key security warning from analyze.php.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Staying current on security fixes is only part of the story. The other part is a conservatively configured system. Regarding security, you cannot be overly conservative, so consider taking the following general security measures:</P
><P
></P
><UL
><LI
><P
>Apply any security fixes available for your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> version (see <A
HREF="#SECURITY-FIXES"
>Section 23.4.1</A
>).</P
></LI
><LI
><P
>Do not allow HTML in the news, forums, private messages or any other areas of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. Use BBcode instead.</P
></LI
><LI
><P
>Do not allow uploading of images (e.g. for a gallery), avatars (e.g. for a forum) or mail attachments, in any module, be it a forum, gallery, mail or whatever.</P
></LI
><LI
><P
>As long as the mailattach.php file is on the server, even if the module is not active, you can get hacked. Currently, the best fix is to delete the file (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=15076"
TARGET="_top"
>mailattach</A
>). analyze.php (see <A
HREF="#ANALYZE-PHP"
>Section 3.9.1.3</A
>) will issue a waring, if it finds the file in your installation (see <A
HREF="#FIG-ANALYZE-WARNING-WEBMAIL"
>Figure 23-3</A
>).</P
></LI
><LI
><P
>Delete the nuke.sql file from your web server, as soon as you finished installation and everything is working correctly. First, you will not need it any more and second, if someone takes control of your site, he could have the nice idea to rerun the nuke.sql file on your database, thus bringing it to its original, pristine state (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?p=55170"
TARGET="_top"
>Hacked - now what?</A
> for a real story).</P
></LI
><LI
><P
>You should also change your site key. The best time to do this is during installation, while entering all the other parameters in config.php. analyze.php will issue a warning, if it finds the default site key in your config.php (see <A
HREF="#FIG-ANALYZE-WARNING-SITEKEY"
>Figure 23-2</A
>). A site key is an important but often overlooked security feature of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. It is used in generating security codes for authentication and resource access (e.g. downloads) purposes (see <A
HREF="http://phpnuke.org/modules.php?name=News&#38;file=article&#38;sid=6555"
TARGET="_top"
>PHP-Nuke Security GFX Mapping - Potential Risk</A
> for details on how this is done). Each installation of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> system requires choosing a unique site key. </P
><P
>You can use the <A
HREF="http://mil-sim.net/modules.php?name=Downloads&#38;op=getit&#38;lid=21"
TARGET="_top"
>Electric Dice</A
> for this purpose. ElectricDice generates true random site keys that can be easily pasted into the config.php file. As opposed to pseudo random numbers generated by computers, Electric Dice uses numbers generated from atmospheric noise in radio waves - a proven entropy source. ElectricDice is useful for both first time installation as well as updating your existing site key. </P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-ANALYZE-WARNING-WEBMAIL"
></A
><P
><B
>Figure 23-3.    WebMail security warning from analyze.php.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/analyze-warning-webmail.png"><DIV
CLASS="CAPTION"
><P
>WebMail security warning from analyze.php.</P
></DIV
></P
></DIV
></DIV
></P
><P
>To reduce the risk of SQL injection (see <A
HREF="#SQL-INJECTION-WITH-PHP-NUKE"
>Section 23.3.2</A
>) and cross-site scripting (see <A
HREF="#CROSS-SITE-SCRIPTING-WITH-PHP-NUKE"
>Section 23.3.1</A
>), you can do the following:</P
><P
></P
><UL
><LI
><P
>Set &#8220;magic_quotes&#8221; to ON in php.ini. When magic_quotes are on, all ' (single-quote), " (double quote), \ (backslash) and NUL's are escaped with a backslash automatically, see <A
HREF="http://www.php.net/ref.info"
TARGET="_top"
>PHP Options and Information</A
>.</P
></LI
><LI
><P
>Set &#8220;register_globals&#8221; to OFF in php.ini. When on, register_globals will inject (poison) your scripts will all sorts of variables, like request variables from html forms. This coupled with the fact that <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> doesn't require variable initialization means writing insecure code is that much easier (see <A
HREF="http://www.php.net/register_globals"
TARGET="_top"
>Using Register Globals</A
>).</P
></LI
><LI
><P
>Follow a well-thought user rights concept. Do not give users more rights to the database than it is absolutely necessary.</P
></LI
></UL
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>PHP-Nuke now works with register_globals set to OFF!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Contrary to the older 5.x versions that needed some extra script for this, newer versions (starting 6.0) of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> will work with register_globals set to OFF in the php.ini! Thus, there is no need to renounce this security measure, as far as  <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> is concerned. The reason is the following code that is now included in the start of mainfile.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if (!ini_get("register_globals")) {
 import_request_variables('GPC');
} </PRE
></FONT
></TD
></TR
></TABLE
><P
>Since every module includes mainfile.php, it also includes the above code, and will thus work with register_globals OFF. If, for some unusual reason, your module does not include mainfile.php, just add the above lines of code to make it work with register_globals OFF.</P
></TD
></TR
></TABLE
></DIV
><P
>To avoid path disclosure (see <A
HREF="#PATH-DISCLOSURE-WITH-PHP-NUKE"
>Section 23.3.3</A
>), you can:</P
><P
></P
><UL
><LI
><P
>Set "display_errors" to off in php.ini or </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>php_flag display_errors off</PRE
></FONT
></TD
></TR
></TABLE
><P
>in .htaccess (see <A
HREF="#HTACCESS-FILE"
>Section 25.4</A
>) or in an http configuration file.</P
></LI
><LI
><P
>Use PHP's error handling functions to disable error reporting or alter the handling (to email an admin for example, and display a less explicit error). </P
></LI
></UL
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Security Tip (from the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> INSTALL file)</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>It's a good choice to put your config.php file outside the Web Server path, then you can create a new config.php with the line: </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php include("../config.php"); ?&#62; </PRE
></FONT
></TD
></TR
></TABLE
></TD
></TR
></TABLE
></DIV
><P
>Some of the above measures may make <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> less attractive to you, or your visitors, who would very much like, for example, to be able to write in HTML, upload images at will, or attach nice files to their mails. It is up to you to weigh the risks and the merits of allowing or disabling a functionality. A small, amateur site may take a different approach than a big, professional one. </P
><P
>And remember  that the most secure website is one that is offline. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="SECURITY-AUDIT"
>23.4.3. Security audit</A
></H3
><P
>Unfortunately, the above measures will not be enough to protect you, if the code is flawed. Thus, the most effective measure, is the one that needs a programmer and a security specialist together:</P
><P
>If you are a programmer, or if you hire one: inspect (audit) the code and &#8220;sanitize&#8221; the data, whenever it is input by the user. Sanitization is best achieved through a default-deny regular expression, like [^a-zA-Z0-9] - whatever matches the expression should be removed. The regular expression acts like a filter on user input. Make that filter as narrow as possible: if at all possible, allow only numbers, else letters and numbers. Make sure that any other characters, like symbols or punctuation, are converted to their HTML entity equivalents. Further, prefix and append a quote to all user input. For more programming tips, see <A
HREF="http://www.nextgenss.com/papers/advanced_sql_injection.pdf"
TARGET="_top"
>Advanced SQL Injection In SQL Server Applications</A
> and <A
HREF="http://www.spidynamics.com/whitepapers/WhitepaperSQLInjection.pdf"
TARGET="_top"
>Web Applications and SQL Injection</A
>.</P
><P
>If you rather prefer an explicit list of what to block, try this one, taken from <A
HREF="http://www.securiteam.com/securityreviews/5DP0N1P76E.html"
TARGET="_top"
>SQL Injection Walkthrough</A
>:</P
><A
NAME="AEN16505"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>Filter out characters like single quote, double quote, slash, backslash, semicolon, extended characters like NULL, carriage return, newline, etc, in all strings from:</P
><P
></P
><UL
><LI
><P
>Input from users</P
></LI
><LI
><P
>Parameters from URLs</P
></LI
><LI
><P
>Values from cookies</P
></LI
></UL
><P
>For a numeric value, convert it to an integer before parsing it into an SQL statement.</P
></BLOCKQUOTE
><P
>Currently, <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> checks with the following code for the presence of &#8220;bad code&#8221; in GET parameters:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>foreach ($_GET as $secvalue) {
    if ((eregi("&#60;[^&#62;]*script*\"?[^&#62;]*&#62;", $secvalue)) ||
        (eregi("&#60;[^&#62;]*object*\"?[^&#62;]*&#62;", $secvalue)) ||
        (eregi("&#60;[^&#62;]*iframe*\"?[^&#62;]*&#62;", $secvalue)) ||
        (eregi("&#60;[^&#62;]*applet*\"?[^&#62;]*&#62;", $secvalue)) ||
        (eregi("&#60;[^&#62;]*meta*\"?[^&#62;]*&#62;", $secvalue)) ||
        (eregi("&#60;[^&#62;]*style*\"?[^&#62;]*&#62;", $secvalue)) ||
        (eregi("&#60;[^&#62;]*form*\"?[^&#62;]*&#62;", $secvalue)) ||
        (eregi("&#60;[^&#62;]*img*\"?[^&#62;]*&#62;", $secvalue)) ||
        (eregi("\([^&#62;]*\"?[^)]*\)", $secvalue)) ||
        (eregi("\"", $secvalue))) {
        die ("I don't like you...");
    }
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>Notice that the expressions in the first argument of the eregi functions above are regular expressions (see <A
HREF="#REGULAR-EXPRESSIONS"
>Section 25.3</A
>). Their meaning is the following:</P
><P
>For the sake of example, we explain the first regular expression</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;[^&#62;]*script*\"?[^&#62;]*&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>meaning "anything that starts with "&#60;" (that's the first "&#60;" in the expression), immediately followed by zero or more occurrences (that's the "*" after the [^&#62;]) of a character that is NOT (that's the "^" inside the "[^&#62;]") "&#62;" (that's what follows the "^" in the square brackets), immediately followed by "script", followed by zero or more occurrences of "t" (that's the "*" after "script", but it is wrong here, you probably should have a blank between "script" and "*", meaning zero or more blanks....but let's continue ), immediately followed by zero or one """ (that's the ""?" - don't let the double quotes mislead you, what we mean is "zero or one double quote" ), immediately followed by zero or more occurrences of any character that is not "&#62;" (that's the "[^&#62;]*" again...)". Phew...</P
><P
>As it stands, an expression like that will match everything that contains &#8220;&#60; scriptxxxxxxxxx&#8221;, where the x's stay for &#8220;whatever&#8221;. This may be too restrictive for you, as you might want to allow words that contain &#8220;script&#8221; as part of the word, but not the word &#8220;script&#8221; itself. Try the following regular expression instead:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;[^&#62;]*script +\"?[^&#62;]*&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Uhmm...what's the difference? We have inserted a blank between "script" and the "*" immediately following it and have replaced the "*" with the "+". Thus, the "+" will refer to the preceding blank (meaning "one or more blanks", not "zero or more t's", as in the case of the original "script*"). Remember, the "*" and the "+" and the "?" all refer to the <EM
>preceding</EM
> "atom" - it is NOT like "dir *.exe" here!</P
><P
>Small, but crucial! <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_cool.png"></SPAN
></P
><P
>Further, go to modules/Forums/admin/common.php and have a look at the start of the code. There you can see how to use <A
HREF="http://www.php.net/manual/en/function.addslashes.php"
TARGET="_top"
>addslashes</A
> to "escape" potentially dangerous characters (like quotes). Since we are dealing only with GET parameters in this discussion, you need only the part that is relevant to the $HTTP_GET_VARS array:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>//
// addslashes to vars if magic_quotes_gpc is off
// this is a security precaution to prevent someone
// trying to break out of a SQL statement.
//
if( !get_magic_quotes_gpc() )
{
        if( is_array($HTTP_GET_VARS) )
        {
                while( list($k, $v) = each($HTTP_GET_VARS) )
                {
                        if( is_array($HTTP_GET_VARS[$k]) )
                        {
                                while( list($k2, $v2) = each($HTTP_GET_VARS[$k]) )
                                {
                                        $HTTP_GET_VARS[$k][$k2] = addslashes($v2);
                                }
                                @reset($HTTP_GET_VARS[$k]);
                        }
                        else
                        {
                                $HTTP_GET_VARS[$k] = addslashes($v);
                        }
                }
                @reset($HTTP_GET_VARS);
        }
}</PRE
></FONT
></TD
></TR
></TABLE
><P
><A
HREF="http://www.nukeresources.com"
TARGET="_top"
>Chatserv</A
> has recently undergone <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> a detailed scrutiny from the security point of view and came up with <A
HREF="http://www.nukeresources.com/article492.html"
TARGET="_top"
>security patches for all 6.x and 7.x versions of PHP-Nuke</A
> that cover:</P
><P
></P
><UL
><LI
><P
>New Abstraction layer conversion.</P
></LI
><LI
><P
>Variables quoted on all sql queries.</P
></LI
><LI
><P
>Security check added to most variables.</P
></LI
><LI
><P
>Bugs in core files fixed.</P
></LI
><LI
><P
>Previous sec-fix patches applied.</P
></LI
></UL
><P
>You should include Chatserv's patches in your security audit and try to stay current on the developments in this area as much as you can. </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PERMISSIONS2"
>23.4.4. Permissions on folders and files</A
></H3
><P
>This section is of importance only to those who use <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> under Linux/Unix (this is true for the greater part of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> sites that are hosted by providers, and often also those who test locally use Linux).</P
><P
>You have already set the right permissions on folders and files during installation (see <A
HREF="#PERMISSIONS"
>Section 3.2.3</A
>, where you will find a more in-depth treatment of the concept of file permissions). However, it is a good idea to think about permissions once again, in a security context.</P
><P
>Burzi says that the directories should be assigned a mode of 777, the files a mode of 666, but we may calmly let our <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> do its work under more restrictive permissions, as illustrated below:</P
><P
></P
><UL
><LI
><P
>config.php (666)</P
></LI
><LI
><P
>backend.php (666)</P
></LI
><LI
><P
>ultramode.txt (666)</P
></LI
><LI
><P
>All directories (755)</P
></LI
><LI
><P
>Other files (644)</P
></LI
></UL
><P
>The files config.php, backend.php, ultramode.txt must have the write permissions because :</P
><P
></P
><UL
><LI
><P
>For config.php editing the preferences we will write this file modifying the text.</P
></LI
><LI
><P
>For the backend and ultramode on the other side, we will write them (in an automatic way) modifying the titles and abstracts of the news. </P
></LI
></UL
><P
>There is however something particular we have to take into account: if we use modules that upload files in some directories, their permissions wil have to be raised. As an example, consider the IndyNews module, a non standard module that makes it possible to enclose files and images in articles. The structure of the module is the following:</P
><P
></P
><UL
><LI
><P
>modules/indynews/media</P
></LI
></UL
><P
>In the inside of the &#8220;indynews&#8221; folder the permissions of the folder &#8220;media&#8221; would have to be 777, due to an override problem, the 777 permissions will have to be imposed on everything that is below &#8220;modules&#8221;. For this reason, everything that resides in &#8220;modules&#8221; will be in 777 mode and this could cause a vulnerability. A solution is to move the folder that will have to accommodate the uploaded files to the outside of the modules folder, even to the document root, changing inside the module all the references to it.</P
><P
>Doing so will leave one single folder in root with permissions set to 777. But you still have to consider the risks associated with such a decision. To quote the <A
HREF="http://free-source.com/files/phpgw-howto.html#2.3"
TARGET="_top"
>phpGroupWare Installation and security HOWTO</A
>:</P
><A
NAME="AEN16625"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>As discussed earlier, having a world writable file in you web root is a rather serious security risk, especially if that file will accept raw user data. It becomes trivial for someone to add php code or any type of script or cgi code your server supports and execute it on your system. Risk is reduced slightly because it would be executed as the "anonymous" nobody user that apache runs under but still would allow access to your ...[ed. config.php] and thus your database, as well as access to /etc/* where all sorts of fun and dangerous information could be abused.</P
></BLOCKQUOTE
><P
>Thus, if the upload feature is of utmost importance to you, you are well advised to double-check what kinds of files your users will be allowed to upload - and test any paranoid scenario you can think of. In case of doudt, it may be safer to disable uploading at the cost of making some users unhappy. Better safe than sory.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="COOKIES"
>23.4.5. Cookies - timeout and configuration</A
></H3
><P
>PHP-Nuke makes heavy use of cookies, be it for user authentication, or admin authentication. The cookies are text files that are saved on our computers and contain various information that is read when we enter a certain site. In the case of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> the information saved there pertains to the user, the chosen theme and the language used. </P
><P
>The cookie is also the instrument that enables us not to have to retype the password each time we log in. This way, each time we access a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site, the cookie works for us by managing the login operation.</P
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="COOKIE-HIJACK"
>23.4.5.1. Cookie hijack</A
></H4
><P
>The problem is that if the cookie does not have an expiry date low enough, someone can to steal it from us and be able to access the site as a user or administrator. This is possible for a series of reasons:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>The cookie of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> has a life duration close to infinite (31536000 seconds)</P
></LI
><LI
><P
>Explorer (most used browser, unfortunately) has vulnerabilities that allow the execution of malicious scripts on the client that &#8220;steal&#8221; the cookie from the user and send it to the &#8220;burglar&#8221;.</P
></LI
><LI
><P
>PHP-Nuke does not succeed in filtering all the malicious scripts (or, to put it better, Internet Explorer is so stupid that corrects inserted scripts with the wrong syntax in order not to be recognized).</P
></LI
></OL
><P
>Let's show a concrete example of how a script kiddie (those who hold themselves for hackers, but they are not...) can try to obtain administrator rights on our site:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>The script kiddie inserts a script that supposedly contains news: </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60; vb script give the cookie to me and send it to the server xyz&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>that is not filtered by the function check_words() of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>.</P
></LI
><LI
><P
>The administrator of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> opens the page up with Internet Explorer!!! (This hack does not work if you're using Mozilla, or better yet, any <SPAN
CLASS="PRODUCTNAME"
>Linux</SPAN
> browser). The list of the news waiting to be approved for publishing is seen by the administrator. When he goes to look at the Submissions, Internet Explorer (stupidly) corrects the vbscript in this way: </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;vbscript&#62;(script kiddies commands go here)</PRE
></FONT
></TD
></TR
></TABLE
><P
>succeeding to interpret the wrong syntax in the correct way (!!!), taking the cookie and sending it to the script kiddie.</P
></LI
><LI
><P
>The script kiddie puts the cookie among the other ones of his own, connects to the site and... is recognized as being the administartor!!!</P
></LI
></OL
><P
>But how is it possible to protect ourselves from this type of hack?</P
><P
>There are some solutions that should increase the security for our administration area:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>First of all STOP using Internet Explorer as a browser and pass the seat to <A
HREF="http://www.mozilla.org"
TARGET="_top"
>Mozilla</A
>. Mozilla is a browser that supports all sites in an optimal way and is not plagued by all the vulnerabilities of Microsoft. If you use <SPAN
CLASS="PRODUCTNAME"
>Linux</SPAN
> instead you won't encounter any problems of this sort...</P
><P
></P
><OL
TYPE="a"
><LI
><P
>In case you want to continue to use the Explorer, you should at least download the patches from <A
HREF="http://www.microsoft.com"
TARGET="_top"
>Microsoft</A
>.</P
></LI
></OL
></LI
><LI
><P
>Disable, where possible, the insertion of HTML tags (for example in the forum)</P
></LI
><LI
><P
>Narrow down the life of cookies. If for example we set up the life of the cookie to two hours, the script kiddie will be forced to use the cookie within that period, this limits much of their ability to act in time.</P
><P
>If instead we leave the life of the cookie to its preset value, the script kiddie may use our cookie even for 1 month after it was stolen.</P
><P
>How to set up the duration of the administartor cookie? The cookie is set up in the file includes/auth.php and the function to modify it is the following:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ((isset($aid)) &#38;&#38; (isset($pwd)) &#38;&#38; ($op == "login")) {
    if($aid! = "" AND $pwd!="") {
        $pwd = md5($pwd);
        $result=sql_query("select pwd, admlanguage from "$prefix."_authors  where aid='$aid'", $dbi);
        list($pass, $admlanguage)=sql_fetch_row($result, $dbi);
        if($pass == $pwd) {
            $admin = base64_encode("$aid:$pwd:$admlanguage");
            setcookie("admin", "$admin",time()+7200);
            unset($op);
        }
    }
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>As you see we have modified the life duration of the second cookie from 2592000 (a month) to 7200 seconds (two hours). As you can easily see, we have reduced the action radius of the script kiddie down from one month to two hours.</P
></LI
><LI
><P
>A much more effective tag filter is realized through the check_html and filter_text functions in mainfile.php (see <A
HREF="#ALLOW-SPECIAL-HTML-TAGS"
>Section 16.1</A
>). The admissible tags are defined in the file config.php in the $AllowableHTML array, these are valid for the comments, the insertion of news and many other user inputs (see <A
HREF="#TAB-FILTER-TEXT"
>Table 16-1</A
> and <A
HREF="#TAB-CHECK-HTML"
>Table 16-2</A
> for all instances of a call to the filter_text and check_html functions respectively).</P
></LI
></OL
><P
>All these actions and a correct configuration of the permissions as illustrated in <A
HREF="#PERMISSIONS"
>Section 3.2.3</A
> and <A
HREF="#PERMISSIONS2"
>Section 23.4.4</A
>, should guarantee us a good security for our site. It is also important to closely follow the security warnings for <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> that are brought up on the various security advisories (see <A
HREF="#SECURITY-FIXES"
>Section 23.4.1</A
>).</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="USER-COOKIE-CHANGE-DURATION"
>23.4.5.2. Changing the duration of the user cookie</A
></H4
><P
>If you want to redefine the duration of the <EM
>user</EM
> cookie (as opposed to the administrator cookie), you have to edit the file modules/Your_Account/index.php. There, find the function docookie():</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>function docookie($setuid, $setusername, $setpass, $setstorynum, $setumode, 
$setuorder, $setthold, $setnoscore, $setublockon, $settheme, $setcommentmax) {
    $info = base64_encode("$setuid:$setusername:$setpass:$setstorynum:$setumode:
$setuorder:$setthold:$setnoscore:$setublockon:$settheme:$setcommentmax");
    setcookie("user","$info",time()+2592000);
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>and change the 2592000 seconds (30 days) to the duration of your choice. </P
><P
>If you want the user cookie to expire as soon as the user closes his browser, to avoid problems with internet cafes and similar situations where a user might forget to log off your site and leave his browser still running, thus making it trivial for others to use his <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> account, you should set a <EM
>temporary</EM
> cookie. This is done by removing the time altogether:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>setcookie("user","$info");</PRE
></FONT
></TD
></TR
></TABLE
><P
>See:</P
><P
></P
><UL
><LI
><P
><A
HREF="http://www.php.net/setcookie"
TARGET="_top"
>PHP Manual on setcookie</A
>,</P
></LI
><LI
><P
><A
HREF="http://www.nukeforums.com/forums/viewtopic.php?topic=15342&#38;forum=26"
TARGET="_top"
>user Log off</A
>,</P
></LI
><LI
><P
><A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=14003"
TARGET="_top"
>cookie expire time</A
></P
></LI
><LI
><P
><A
HREF="http://www.nukeforums.com/forums/viewtopic.php?p=57872"
TARGET="_top"
>how to force all users to relogin</A
> and </P
></LI
><LI
><P
><A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=78"
TARGET="_top"
>automatic logout</A
></P
></LI
></UL
><P
>for discussions on this subject.</P
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="BAN-IP-ADDRESSES"
>23.5. How to ban IP addresses</A
></H2
><P
>So you have been hacked and your IP Tracking module (<A
HREF="#PHP-NUKE-IP-TRACKING-MODULE"
>Section 8.3.6</A
>) shows you it was an attack from a few IP addresses? Perhaps your site is continuing to be the aim of notorious cracking attempts from those IP addresses and you now want to ban them? That's something you can accomplish easily in two ways, a hard-coded approach and a more elaborate one.</P
><P
>The hard-coded approach (suitable only for just a few IP addresses, unless you want to clutter the code with unwanted IPs) requires you to place this 4-liner:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$ip = getenv("REMOTE_ADDR");
if ($ip != "66.666.66.6" AND $ip != "55.555.55.5") {
return 0;
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>in two places:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>after the global line of the is_amdin() function in mainfile.php and</P
></LI
><LI
><P
>at the begining of the admin.php file.</P
></LI
></OL
><P
>Change the &#8220;66.666.66.6&#8221; and &#8220;55.555.55.5&#8221; to the IP addresses you want to block and you are done! See <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=13987"
TARGET="_top"
>How to block an IP address in PHP-Nuke</A
>.</P
><P
>The more elaborate approach is to create a text file, call it banned.txt, containing all the IP addresses you want to ban, one address per line. Upload banned.txt in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> root directory on your web server (this is the same directory where also config.php is located). Then include the following code in the includes/my_header.php file (the custom HTML header file of PHP-Nuke, see <A
HREF="#MODIFYING-PHP-NUKE-HTML-HEADER"
>Chapter 15</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if (isset($_SERVER['HTTP_X_FORWARDED_FOR'])) {
    $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
}
elseif (isset($_SERVER['HTTP_VIA'])) {
    $ip = $_SERVER['HTTP_VIA'];
}
elseif (isset($_SERVER['REMOTE_ADDR'])) {
    $ip = $_SERVER['REMOTE_ADDR'];
}
else {
    $ip = "Banned";
}
$banned = file("banned.txt", "r+");
$nbanned = count($banned);
function ban($ip, $banned, $nbanned){
    for ($i = 0 ; $i &#60; $nbanned ; $i++) {
        
        // Use this if you want to use IP patterns with regular expressions:
        // if (eregi($ip, $banned[$i])) {
        // We have to strip the end-of-line characters, to test for equality: 
        if ($ip ==  rtrim($banned[$i])) {
            echo "You have been banned from this portal, if you feel this is in error ";
            echo "please send email to you@yoursite.com ";
            die();
        }
    }
}
ban($ip, $banned, $nbanned);</PRE
></FONT
></TD
></TR
></TABLE
><P
>If you are having problems with <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> not recognizing the line endings when reading files with the <A
HREF="http://www.php.net/manual/en/function.file.php"
TARGET="_top"
>PHP file() function</A
> (see the code above), either on or created by a Macintosh computer, you might want to enable the <A
HREF="http://www.php.net/manual/en/ref.filesystem.php#ini.auto-detect-line-endings"
TARGET="_top"
>auto_detect_line_endings</A
> run-time configuration option (which, however, is available only starting <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> v. 4.3.0).</P
><P
>If you would like to ban whole ranges of IP addresses, you can play with the <A
HREF="http://www.php.net/manual/en/function.eregi.php"
TARGET="_top"
>PHP eregi() function</A
> and use </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if (eregi($ip, $banned[$i])) {</PRE
></FONT
></TD
></TR
></TABLE
><P
>instead of</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if ($ip ==  rtrim($banned[$i])) {</PRE
></FONT
></TD
></TR
></TABLE
><P
>You then use patterns of IP addresses, i.e. regular expressions (see <A
HREF="#REGULAR-EXPRESSIONS"
>Section 25.3</A
>, <A
HREF="http://www.php.net/regex"
TARGET="_top"
>Regular Expression Functions (POSIX Extended)</A
>), instead of constant IPs in banned.txt. See also <A
HREF="http://www.grancanariayoungsters.com/ftopicp-322.html"
TARGET="_top"
>How to ban IPs real fast</A
>.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>How to ban IPs using the web server</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Of course, you can achieve the same results by putting deny directives in the server configuration file, or .htaccess file (<A
HREF="#HTACCESS-FILE"
>Section 25.4</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>deny from xxx.xxx.xxx.xxx</PRE
></FONT
></TD
></TR
></TABLE
></TD
></TR
></TABLE
></DIV
><P
>See the Protector Module (<A
HREF="#PHP-NUKE-PROTECTOR-MODULE"
>Section 8.3.7</A
>) for a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module for IP banning.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="HACKED-NOW-WHAT"
>23.6. Hacked - now what?</A
></H2
><P
>Here is an incomplete list of what you can do when you realize that your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site has been hacked:</P
><P
></P
><UL
><LI
><P
>Check the files on your server against your latest backup to check for any modifications.<A
HREF="http://www.tripwire.org"
TARGET="_top"
>Tripwire</A
> can help you with this task.</P
></LI
><LI
><P
>Reset all admin passwords.</P
></LI
><LI
><P
>Search the logs for the message posting URL, e.g. *admin.php?op=messages , find the perpetrator's IP and notify the person responsible for the network.</P
></LI
><LI
><P
>If using Apache, create "admin" user group, add a new user to this group and create the appropriate .htaccess file (<A
HREF="#HTACCESS-FILE"
>Section 25.4</A
>).</P
></LI
><LI
><P
>Limit access to admin.php to a "tight" IP range/subnet.</P
></LI
><LI
><P
>Install the Protector module (<A
HREF="#PHP-NUKE-PROTECTOR-MODULE"
>Section 8.3.7</A
>), which gives you "high level" logs of session activity on your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site.</P
></LI
><LI
><P
>Re-evaluate the security of installed 3rd party modules/blocks.</P
></LI
></UL
><P
>See also </P
><P
></P
><UL
><LI
><P
><A
HREF="http://www.nukecops.com/postitle17223-0-0-.html"
TARGET="_top"
>My site running phpnuke 6.9 got hacked</A
>, </P
></LI
><LI
><P
><A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=14487"
TARGET="_top"
>Hacked - what do I do?</A
>,</P
></LI
><LI
><P
><A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=17131"
TARGET="_top"
>My site has reset itself to the 'welcome to php-nuke' screen</A
>.</P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="ACCELERATING-PHP-NUKE"
></A
>Chapter 24. Accelerating PHP-Nuke</H1
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-OPTIMIZE-2"
></A
><P
><B
>Figure 24-1.    Accelerating <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/optimize.png"><DIV
CLASS="CAPTION"
><P
>Accelerating <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Want a lightning fast PHP-Nuke? Read on... <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Problem:</DT
><DD
><P
>You installed all kinds of modules, blocks and image galleries on your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. Now, you notice that it has become painfully slow. What can be done to accelarate things a bit?</P
></DD
><DT
>Idea:</DT
><DD
><P
><A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=130"
TARGET="_top"
>Cache PHP-Nuke</A
>!</P
></DD
></DL
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CACHING-PHP-NUKE"
>24.1. Caching PHP-Nuke</A
></H2
><P
>As in <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=130"
TARGET="_top"
>How to accelerate PHP-Nuke</A
>, we ask ourselves the following questions:</P
><P
></P
><UL
><LI
><P
>Does your index.php, or the other parts of your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> change more often than, say, once in 15 minutes? Maybe not, if you are not logged in.</P
></LI
><LI
><P
>Do you really need to see a change the very moment you hit the reload button of your browser? For me, if this change is the number of private messages I got, then I might be interested to see the *real* number. But then again, why not the number as of 5 minutes ago? How important is current content for you? How current is current enough for you? 1 minute, 5 minutes, or even 15 minutes? </P
></LI
></UL
><P
>If you think a little about it, you will realize that maybe it is not absolutely necessary that your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> does all these conections to the database, querying all that data that most probably did not change the last x minutes, each time you display a page.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-OPTIMIZE-PHP"
></A
><P
><B
>Figure 24-2.    Optimizing <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code execution.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/optimize-php.png"><DIV
CLASS="CAPTION"
><P
>Optimizing <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code execution.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Various tests on optimizing <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> (see, for example, <A
HREF="http://phplens.com/lens/php-book/optimizing-debugging-php.php"
TARGET="_top"
>Optimizing PHP</A
>) have shown that the biggest time savings in execution time are not achieved through elaborate algorithmic optimization, but rather with an old, well-known technique: caching! The idea behind caching is to avoid repeated execution of the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code, by storing the HTML output in a file, as jpcache (<A
HREF="#JPCACHE"
>Section 24.1.1</A
>) and Cache-Lite (<A
HREF="#CACHE-LITE"
>Section 24.1.2</A
>) do, or in shared memory, as Turck MMCache (<A
HREF="#TURCK-MMCACHE"
>Section 24.1.3</A
>) does. Optimizers, such as the commercial <A
HREF="http://www.zend.com"
TARGET="_top"
>Zend Performance Suite</A
> and the free Turck MMCache, transform the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code in an intermediate form, an &#8220;opcode&#8221; , which they cache - <A
HREF="#FIG-OPTIMIZE-PHP"
>Figure 24-2</A
> shows the way these optimizers work. In the following we will examine them in more detail.</P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Know what you cache and why!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
> 
If you try to cache the whole index.php page even for registered users, you shouldn't be surprised of the errors and you shouldn't blame it on cache. The cache will just cache what you tell it to, for the time intervall you tell it to.</P
><P
>Now, suppose that your users get different output on your index.php page, depending on your settings as an administrator (blocks, modules etc.) and their settings as users. Also suppose that you use a caching mechanism, like the ones we will describe later in this chapter, to cache the whole index.php page. Then we can easily imagine a situation where your user A will not get to see what he should see, but what user B was viewing a few minutes ago. In other words, all users will see user's B cached index.php page, with all the wrong links in it, like "Your Account" with user's B data in the link etc. </P
><P
>For this reason, it is absolutely necessary to know what you cache and why you cache it!</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>What to cache for registered users</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
> 
If you want to cache content when it is viewed by registered users too, it will make more sense to cache only individual modules or blocks which (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?p=2006"
TARGET="_top"
>Caching strategy with PHP-Nuke</A
>)</P
><P
></P
><UL
><LI
><P
>take much time to build their content and</P
></LI
><LI
><P
>their content is independent of the user viewing it.</P
></LI
></UL
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="JPCACHE"
>24.1.1. jpcache</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-JPCACHE"
></A
><P
><B
>Figure 24-3.    Powered by jpcache.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/jpcache.png"><DIV
CLASS="CAPTION"
><P
>Powered by jpcache.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Enter <A
HREF="http://www.jpcache.com"
TARGET="_top"
>jpcache</A
>: jpcache is a lightweight, full page caching system for PHP, thus reducing server load, as pages are generated less often. It dramatically speeds up serving of your pages, by caching page ouput and returning the chached page instead of compiling the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> one. In the following we will describe jpcache installation, configuration and use (see also <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=130"
TARGET="_top"
>How to accelerate PHP-Nuke</A
>):</P
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="JPCACHE-INSTALLATION"
>24.1.1.1. Installation of jpcache</A
></H4
><P
>Installation is very simple:</P
><P
></P
><UL
><LI
><P
>Download it from the <A
HREF="http://sourceforge.net/project/showfiles.php?group_id=23902&#38;release_id=173955"
TARGET="_top"
>jpcache download page at sourceforge.net</A
>.</P
></LI
><LI
><P
>Extract the files in the includes directory of your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. A folder "jpcache" will be created containing all the necessary files. Change to that folder.</P
></LI
><LI
><P
>Read the readme file.</P
></LI
></UL
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="JPCACHE-CONFIGURATION"
>24.1.1.2. Configuration of jpcache</A
></H4
><P
></P
><UL
><LI
><P
>Edit the $includedir variable in the jpcache.php file to reflect the *full* path to the jpcache files:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>// Set the includedir to the jpcache-directory
$includedir = "/usr/local/httpd/htdocs/nuke6/html/includes/jpcache";</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Edit the jpcache-config.php file. You basically only need to set the $JPCACHE_TYPE to "file" (remember, we want to avoid database connections):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$JPCACHE_TYPE = "file";
//$JPCACHE_TYPE = "mysql";
//$JPCACHE_TYPE = "dbm"; -- Not yet</PRE
></FONT
></TD
></TR
></TABLE
><P
>then coment the next block (you don't need it, since you *did* specified the $JPCACHE_TYPE above):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>// DOH! Strip out this check for performance if you are sure you did set it.
// if (!isset($JPCACHE_TYPE))
// {
// exit("[jpcache-config.php] No JPCACHE_TYPE has been set!");
// }</PRE
></FONT
></TD
></TR
></TABLE
><P
>Just check the configuration options to see what they do, the defaults are O.K. for me:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>/**
* General configuration options. 
*/
$JPCACHE_TIME = 900; // Default number of seconds to cache a page
$JPCACHE_DEBUG = 0; // Turn debugging on/off
$JPCACHE_IGNORE_DOMAIN= 1; // Ignore domain name in request(single site)
$JPCACHE_ON = 1; // Turn caching on/off
$JPCACHE_USE_GZIP = 1; // Whether or not to use GZIP
$JPCACHE_POST = 0; // Should POST's be cached (default OFF)
$JPCACHE_GC = 1; // Probability % of garbage collection
$JPCACHE_GZIP_LEVEL = 9; // GZIPcompressionlevel to use (1=low,9=high)
$JPCACHE_CLEANKEYS = 0; // Set to 1 to avoid hashing storage-key:
// you can easily see cachefile-origin.</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Finally, set the directory for the cached files, preferably outside your web server root, say /tmp/jpcache. Create it, set the owner and group equal to the owner and group of your web server and change the permissions to 755 (rwx-r-x-r-x), or even 750 (rwx-r-x----). Then, enter in jpcache-config.php the absolute path  to that cache directory:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>/**
* File based caching setting.
*/
$JPCACHE_DIR = "/tmp/jpcache"; // Directory where jpcache must store 
// generated files. Please use a dedicated
// directory, and make it writable</PRE
></FONT
></TD
></TR
></TABLE
></LI
></UL
><P
>That's all! jpcache is now configured correctly. </P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="JPCACHE-USE"
>24.1.1.3. How to use jpcache</A
></H4
><P
>To use it, just open the index.php file of your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> and enter the following lines, after the line "require_once("mainfile.php");" (that's important!):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>require_once("mainfile.php");
if (!isset($user)) {
  $cachetimeout=900; 
} else {
  $cachetimeout=300;
}
require_once "includes/jpcache/jpcache.php";</PRE
></FONT
></TD
></TR
></TABLE
><P
>(I have included the 'require_once("mainfile.php");' line in the code above for your orientation).</P
><P
>That's it! You can now tweak the two caching intervalls, 900 and 300 seconds, which apply to non-logged-in and logged-in users respectively. Rethink the questions I asked you in <A
HREF="#CACHING-PHP-NUKE"
>Section 24.1</A
> above. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
></P
><P
>A caching intervall of x seconds means that your server will serve you a cached copy of the page, if the cache copy is not older than x seconds. Since non-logged-in users don't get private messages or similar "events", a longer caching intervall is just right for them. Feel free to experiment with these two values, trading actuality of content against serving speed.</P
><P
>Enjoy your new, lightning fast PHP-Nuke!</P
><P
>Oops...I forgot a crucial detail:</P
><P
>You must edit the mainfile.php file too! There, you *must* comment the line</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>ob_start("ob_gzhandler");</PRE
></FONT
></TD
></TR
></TABLE
><P
>as follows:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># ob_start("ob_gzhandler");</PRE
></FONT
></TD
></TR
></TABLE
><P
>Otherwise, you will be compressing twofold, once from <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> with the above line and once with jpcache through the configuration line</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$JPCACHE_USE_GZIP = 1; // Whether or not to use GZIP</PRE
></FONT
></TD
></TR
></TABLE
><P
>of jpcache-config.php.</P
><P
>The other way round, turning off gzip in jpcache and leaving the ob_start("ob_gzhandler") line uncommented in PHP-Nuke, works too. It may even be better to choose this way, if you use Apache and mod_gzip (a common configuration).</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>How to test if caching is working</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>You can check if you are doing it right, by trying to cache a block that just echoes the current time. If the cached block displays the same time again and again after reloading (for some time interval equal to the "cache interval"), then  caching is working!</P
><P
>If it displays the current time (which is changing after every reloading), then caching is NOT working! In this case, most probably no files are being written into the cache directory you specified. Most of the time, this will be a permissions problem: check that the web server has write and execute permissions on the cache directory! See <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=130"
TARGET="_top"
>How to accelerate PHP-Nuke</A
>.</P
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CACHE-LITE"
>24.1.2. Cache-Lite</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PEAR"
></A
><P
><B
>Figure 24-4.    Cache-Lite is powered by PEAR.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/pear.png"><DIV
CLASS="CAPTION"
><P
>Cache-Lite is powered by PEAR.</P
></DIV
></P
></DIV
></DIV
></P
><P
>After reading the above, you may ask yourself if this is all we can do to accelerate <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> with caching - and the answer is: of course not!</P
><P
>jpcache (<A
HREF="#JPCACHE"
>Section 24.1.1</A
>) enables caching of the whole page. Remember, we edited index.php to set a different cache expiration time for logged and not logged-in users. The idea behind this was that a user that is not logged in will not have access to most of the dynamic features of PHP-Nuke, thus making caching of the whole page for longer intervalls an acceptable compromise between freshness of content and speed of page generation.</P
><P
>But how about our logged-in users? Wouldn't it be nice if we could at least cache some <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks we know they don't change that often? This is indeed possible with <A
HREF="http://pear.php.net/package-info.php?pacid=99"
TARGET="_top"
>Cache-Lite</A
>  of the <A
HREF="http://pear.php.net"
TARGET="_top"
>PEAR  library</A
> from <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
>.</P
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="CACHE-LITE-INSTALLATION"
>24.1.2.1. Installation of Cache-Lite</A
></H4
><P
>Download Cache-Lite  and extract it in the includes folder of your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> installation. </P
><P
>If your <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> does not include the PEAR library, you will need to download download the base PEAR package  too. Extract only the PEAR.php file and put it in the same folder as mainfile.php, i.e. your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> base folder. </P
><P
>Cache-Lite needs the PEAR.php file for its error-handling, so you may not notice that you need it until some error occurs. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
></P
><P
>If your <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> installation includes PEAR, you don't need to bother installing PEAR.php anywhere - it is already there, at the right place. But if your ISP does not include it, the above PEAR.php will do the trick.</P
><P
>That's all! You are now ready to use Cache-Lite.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="CACHE-LITE-USE"
>24.1.2.2. How to use Cache-Lite</A
></H4
><P
>Cache-Lite can easily be used to cache a <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> variable. The easiest application of this is to cache the $content variable of a block that does not change very often - and this is the majority of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks! </P
><P
>To use Cache-Lite in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block, open that block in your editor and put the following code (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=130"
TARGET="_top"
>How to accelerate PHP-Nuke</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>// include the Cache-Lite package
require_once("includes/Cache_Lite/Lite.php");
// set some variables
$options = array(
  "cacheDir" =&#62; "/tmp/Cache_Lite/",
  "lifeTime" =&#62; 900
);
// create a Cache_Lite object
$objCache = new Cache_Lite($options);
// test if there exists a valid cache,
// the &#60;acronym&#62;ID&#60;/acronym&#62; will be the basename of the block
$fileid = basename($blockfile,".php");
if ($content = $objCache-&#62;get($fileid)) {
// add a message indicating this is cached output
  $content .= "\n[cached with ID=$fileid]";
}
else
{
// do the block's work here...</PRE
></FONT
></TD
></TR
></TABLE
><P
><EM
>after the lines</EM
></P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if (eregi("block-XXXXXXX.php",$PHP_SELF)) {
  Header("Location: index.php");
  die();
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>What does the inserted code do?</P
><P
></P
><UL
><LI
><P
>It includes Cache-Lite. Note that in this example, Cache_Lite is a symbolic link to the actual directory the Lite.php file is in. I created this symbolic link myself, as I did not want to put a version-specific directory name in my code - I would have to change it each time I would upgrade Cache-Lite, this way I will only need to change the symbolic link to show to the right directory.</P
></LI
><LI
><P
>It first sets the path to the cache directory, in this case /tmp/Cache_Lite/. The directory must exist and must be writable and readable by the web server.</P
></LI
><LI
><P
>Sets the cache expiration time intervall for the object we are going to cache, in this case to 900 seconds.</P
></LI
><LI
><P
>Creates a cache object with the above settings.</P
></LI
><LI
><P
>Uses a computed "file id" as a key to identify the cached object (the cached $content variable). I have decided to use the basename of the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block , i.e. the filename of the block without the ".php" ending, as the key for the $content variable. This way I don't have to change my code each time I insert the above lines in a new block. The $key will be computed automatically and will be the basename of the block file. Since in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks are guaranteed to have distinct names, this is a good choice.</P
><P
>$blockfile is a variable that is computed by <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> in mainfile.php, in function blocks():</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$sql = "SELECT bid, bkey, title, content, url, blockfile, view FROM ".$prefix."_blocks
WHERE bposition='$pos' AND active='1' $querylang ORDER BY weight ASC";
$result = $db-&#62;sql_query($sql);
while($row = $db-&#62;sql_fetchrow($result)) {
    $bid = $row[bid];
    $title = $row[title];
    $content = $row[content];
    $url = $row[url];
    $blockfile = $row[blockfile];</PRE
></FONT
></TD
></TR
></TABLE
><P
>The value of $blockfile is then passed through to the individual block: it is passed to function render_blocks() (in mainfile.php again), which in turn renders the block using the blockfileinc() function. </P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="90%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>What to do if the cache <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
> is empty</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Looking at the blockfileinc() function in mainfile.php, you can see that it uses the functions themecenterbox(() and themesidebox() for blocks that don't have a filename - and, of course, it does not  pass the (empty) blockfile parameter. Thus, if you see that the above code for the block prints an empty cache ID, then you will know that you are using a block without a filename (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?p=1893"
TARGET="_top"
>empty cache <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
> and Cache-Lite</A
>).</P
><P
>The quick solution is to explicitly set the fileid variable to some arbitrary value in you block code. However, you should check to find out why your block does not posess a filename (e.g. it could be an RSS block - we describe these in <A
HREF="#ADMINISTRATION-FUNCTIONS"
>Section 7.1</A
> and <A
HREF="#FIG-BLOCKS"
>Figure 7-7</A
>).</P
></TD
></TR
></TABLE
></DIV
></LI
><LI
><P
>If a valid cached copy of the object identified by the key exists, it is fetched and fed into the $content variable of the block. I issue an echo to print the cache <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
> (the key) in this case, just for the start, to give me some idea of how (and if at all) this works. Of course, you can comment the echo later.</P
></LI
><LI
><P
>In case the cache misses the object (or expiration time is over), you wil have to compute $content from scratch. Put your normal code here.</P
></LI
></UL
><P
>Of course, we are not done yet - after we compute $content in our block, we will want to cache it for future use. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
></P
><P
>Thus, after the end of your computations and before you close the block with "?&#62;", put the following to instruct Cache-Lite to cache your $content:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>// ...and save it in the cache for future use
$objCache-&#62;save($content, $fileid);
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>This closes the IF-statement we opened with the previous block of lines. It caches the $content variable in our cache object, using as identifier the file <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
> we derived from the block's filename. You have to put these two blocks of lines in every <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block you plan to cache, but the work is worth it!</P
><P
>The complete code for your cached block should thus look like:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if (eregi("block-XXXXXXX.php",$PHP_SELF)) {
    Header("Location: index.php");
    die();
}
// include the Cache-Lite package
require_once("includes/Cache_Lite/Lite.php");
// set some variables
$options = array(
  "cacheDir" =&#62; "/tmp/Cache_Lite/",
  "lifeTime" =&#62; 900
);
// create a Cache_Lite object
$objCache = new Cache_Lite($options);
// test if there exists a valid cache,
// the &#60;acronym&#62;ID&#60;/acronym&#62; will be the basename of the block
$fileid = basename($blockfile,".php");
if ($content = $objCache-&#62;get($fileid)) {
  // add a message indicating this is cached output
  $content .= "\n[cached with ID=$fileid]";
}
else
{
  // do the whole work here...
-------&#62; Your original code goes here &#60;-------
  // ...and save it in the cache for future use
  $objCache-&#62;save($content, $fileid);
}
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>If something goes wrong and your block is not being cached, check the following (<A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=130"
TARGET="_top"
>How to accelerate PHP-Nuke</A
>):</P
><P
></P
><UL
><LI
><P
>Do you have the PEAR.php?</P
></LI
><LI
><P
>Where did you install the Lite.php file? </P
></LI
><LI
><P
>Did you install it in includes/Cache_Lite/Lite.php, as I suggested?</P
></LI
><LI
><P
>Did you enter the right path to Lite.php in the block you are trying to cache?</P
></LI
><LI
><P
>Did you follow my example for a cached block above?</P
></LI
><LI
><P
>If you did, do you have the right path in the line</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>require_once("includes/Cache_Lite/Lite.php");</PRE
></FONT
></TD
></TR
></TABLE
><P
>of that example?</P
></LI
></UL
><P
>For a more in-depth tutorial on Cache-Lite, see <A
HREF="http://www.devshed.com/Server_Side/PHP/PHP_Cache_Lite"
TARGET="_top"
>Caching With <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> Cache_Lite</A
>.</P
><P
>You can use both jpcache and Cache-Lite together in a cache strategy that caches the whole page with jpcache when a user is not logged-in, but caches the least changing blocks (probably most of them) with Cache-Lite when he is. Such a strategy allows enough flexibility and room for experimentation and brings a considerable acceleration to your PHP-Nuke, without, on the other hand, requiring any access to the internals of your <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> installation - something that you will need, if you want to try the ultimate approach to caching , which we will present you in <A
HREF="#TURCK-MMCACHE"
>Section 24.1.3</A
>.</P
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="TURCK-MMCACHE"
>24.1.3. Turck MMCache</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MMCACHE"
></A
><P
><B
>Figure 24-5.    Turck MMCache.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/mmcache.png"><DIV
CLASS="CAPTION"
><P
>Turck MMCache.</P
></DIV
></P
></DIV
></DIV
></P
><P
>As we know, <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> is an interpreted language. The <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> interpreter compiles your scripts each time you call them. However, the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code itself may not change that often in your scripts. Having to compile the code on each call wastes your CPU's time. That's where the idea of caching the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code (and not only the HTML content) comes in (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=130"
TARGET="_top"
>How to accelerate PHP-Nuke</A
>). </P
><P
>The idea of <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code caching lies in the basis of many commercial <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> accelerators, like </P
><P
></P
><UL
><LI
><P
><A
HREF="http://www.zend.com"
TARGET="_top"
>Zend Performance Suite</A
> </P
></LI
><LI
><P
><A
HREF="http://www.php-accelerator.co.uk"
TARGET="_top"
>PHP Accelerator</A
> </P
></LI
><LI
><P
><A
HREF="http://apc.communityconnect.com"
TARGET="_top"
>Alternative <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> Cache</A
> </P
></LI
><LI
><P
><A
HREF="http://www.bwcache.bware.it"
TARGET="_top"
>AfterBurner Cache</A
> </P
></LI
></UL
><P
>Hopefully, there is a free open source alternative: <A
HREF="http://www.turcksoft.com/en/e_mmc.htm"
TARGET="_top"
>Turck MMCache</A
>, a product under the GPL Licence. </P
><P
>Turck MMCache is a free open source <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> accelerator, optimizer, encoder and dynamic content cache for <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
>. It increases performance of <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> scripts by caching them in compiled state, so that the overhead of compiling is almost completely eliminated. Also it uses some optimizations to speed up execution of <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> scripts. Turck MMCache typically reduces server load and increases the speed of your <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code by 1-10 times!</P
><P
>Download the newest version (currently 2.4.6) from the <A
HREF="http://sourceforge.net/project/showfiles.php?group_id=69426"
TARGET="_top"
>Turck MMCache download page at Sourceforge</A
>. There are precompiled binaries for Windows, as well as source packages for <SPAN
CLASS="PRODUCTNAME"
>Linux</SPAN
> and other operating systems.</P
><P
>Before you rush and download it though, let me bring to your attention that the approach taken by a code accelerator like MMCache requires that you install it as a so-called "PHP extension". You will also be configuring options like the amount of shared memory that you want allocated to MMCache, in order to use it for caching. These steps are normally beyond the reach of mass hosting accounts on ISPs, so you may be out of luck. However, if you own the web server, or have administration access to it, then MMCache is for you - rush to the download page and get it!</P
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="TURCK-MMCACHE-INSTALLATION"
>24.1.3.1. Installation of Turck MMCache</A
></H4
><P
>In the following, I will describe the installation process of Turck MMCache for Linux:</P
><P
></P
><UL
><LI
><P
>Login as root.</P
></LI
><LI
><P
>Change to a directory that is appropriate for holding source code. In Linux, this is /usr/src:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>cd /usr/src</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Extract the package:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>tar -xzvf /usr/cdimage/source/turck-mmcache-2.4.6.tar.gz</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>It creates an folder with all files. Change to that folder:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>cd turck-mmcache-2.4.6</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Find the place where the phpize program is installed on your system. For this, type:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>which phpize</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Mine is on /usr/bin, as you can see from the output:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># which phpize
/usr/bin/phpize</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>so what is before the "/bin" is my PHP_PREFIX. In this case &#8220;/usr&#8221;. Type the following:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>export PHP_PREFIX="/usr"
$PHP_PREFIX/bin/phpize</PRE
></FONT
></TD
></TR
></TABLE
><P
>You get the output:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>autoheader: `config.h.in' is created
You should update your `aclocal.m4' by running aclocal.</PRE
></FONT
></TD
></TR
></TABLE
><P
>so you run</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>aclocal</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Now you are ready to create the Makefile with the configure script:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>./configure --enable-mmcache=shared --with-php-config=$PHP_PREFIX/bin/php-config</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>After that, the Makefile is there and you can do (you must be root for the last step)</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>make
make install</PRE
></FONT
></TD
></TR
></TABLE
></LI
></UL
><P
>This will finish installation of Turck MMCache on your server.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="TURCK-MMCACHE-CONFIGURATION"
>24.1.3.2. Configuration of Turck MMCache</A
></H4
><P
>After installation, you need to configure MMCache:</P
><P
>Open the php.ini file (/etc/php.ini), find the "extensions" section and put the following there:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>[extension section]
... various other extensions
extension="mmcache.so"
mmcache.shm_size="16"
mmcache.cache_dir="/tmp/mmcache"
mmcache.enable="1"
mmcache.optimizer="1"
mmcache.check_mtime="1"
mmcache.debug="0"
mmcache.filter=""
mmcache.shm_max="0"
mmcache.shm_ttl="0"
mmcache.shm_prune_period="0"
mmcache.shm_only="0"
mmcache.compress="0"
; end of extension section</PRE
></FONT
></TD
></TR
></TABLE
><P
>MMCache uses shared memory for caching, as opposed to disk space. This is a reason why it is so fast. The mmcache.shm_size option defines how much shared memory (in MBytes) it should use for caching.</P
><P
>Again, you need a cache directory too, which is what mmcache.cache_dir is for. Again, the cache directory should be writable and readable by your web server.</P
><P
>You can read about the other options in the <A
HREF="http://www.turcksoft.com/en/e_mmc.htm"
TARGET="_top"
>Turck MMCache Homepage</A
>. For our purposes, you can leave them at their values as in the example above.</P
><P
>This completes the configuration of MMCache. We still have to talk about its use - but that's easy, see the next section. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Turck MMCache on a virtual server</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Question: I am on a virtual server and should not interfere with the other domains hosted there. How do I configure MMCache in this situation?</P
><P
>Answer: Compile MMCache and put it into the extensions directory. Configure php.ini to utilize the extension but set mmcache.optimizer, .compress and .enable all to FALSE.</P
><P
>Then a .htaccess file (see <A
HREF="#HTACCESS-FILE"
>Section 25.4</A
>) in your own webspace and use:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>php_value 'mmcache.enable' '1'
php_value 'mmcache.optimizer' '1'
php_value 'mmcache.compress' 1'</PRE
></FONT
></TD
></TR
></TABLE
><P
>This should do the trick.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="TURCK-MMCACHE-USE"
>24.1.3.3. How to use Turck MMCache</A
></H4
><P
>By following the configuartion steps above, MMCache already works for you: it compiles <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code and caches it. Whenever a script's code changes, it recompiles it and caches it again. You should already see a noticeable improvement in your response times because of this.</P
><P
>But there is more you can do with MMCache: you can cache a whole page, like with jpcache (<A
HREF="#JPCACHE"
>Section 24.1.1</A
>), or individual parts of them, like with Cache-Lite (<A
HREF="#CACHE-LITE"
>Section 24.1.2</A
>). Since jpcache uses disk space for caching the whole page, you can replace it by MMCache's functionality, which uses shared memory and could thus be up to 5 times faster. Here's how you do it (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=130"
TARGET="_top"
>How to accelerate PHP-Nuke</A
>):</P
><P
>Open the index.php file and change the code we put there for jpcache (see a previous post) as follows:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>require_once("mainfile.php");
if (!isset($user)) {
  $cachetimeout=900;
  mmcache_cache_page($_SERVER['PHP_SELF'].'?GET='.serialize($_GET), $cachetimeout);
} else {
  $cachetimeout=-1;
}
# require_once "includes/jpcache/jpcache.php";</PRE
></FONT
></TD
></TR
></TABLE
><P
>As you can see, we commented the jpcache inclusion line and put a call to mmcache_cache_page with the same cache timeout. This will do exactly what jpcache was doing previously - cache the whole page in case the user is not logged-in and leave it uncached in case he is, so that Cache-Lite can cache parts of it. But due to the shared memory implementation, we are going the get an extra speed kick out of it. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_cool.png"></SPAN
></P
><P
>mmcache_cache_page is only one of many MMCache functions you can use in your blocks and modules to speed up things. Some other interesting ones are:</P
><P
></P
><UL
><LI
><P
>mmcache_set_session_handlers(): install the MMCache session handlers. Since <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> 4.2.0 you can install MMCache session handlers in "php.ini" by</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>session.save_handler=mmcache</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>mmcache_cache_output($key, $eval_code, $ttl=0): caches the output of $eval_code in shared memory for $ttl seconds. Output can be removed from cache by calling mmcach_rm() with the same $key. For Example:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php mmcache_cache_output('test', 'echo time(); phpinfo();', 30); ?&#62;</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>mmcache_cache_result($key, $eval_code, $ttl=0): caches the result of $eval_code in shared memory for $ttl seconds. Result can be removed from cache by calling mmcach_rm() with the same $key. For Example:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php mmcache_cache_output('test', 'time()." Hello";', 30); ?&#62;</PRE
></FONT
></TD
></TR
></TABLE
></LI
></UL
><P
>There are other uses of MMCache, like its use as an encoder to hide your precious <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> scripts from the spying eyes of competitors - but we are talking open source here, aren't we? <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CACHING-PHP-NUKE-CONCLUSION"
>24.1.4. Caching PHP-Nuke: Conclusion</A
></H3
><P
>We have seen three approaches to <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> acceleration in the previous sections:</P
><P
></P
><UL
><LI
><P
>jpcache (see <A
HREF="#JPCACHE"
>Section 24.1.1</A
>) can cache and compress a whole page - on disk.</P
></LI
><LI
><P
>Cache-Lite (see <A
HREF="#CACHE-LITE"
>Section 24.1.2</A
>) can cache and compress a whole page or individual <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks, modules, variables - on disk (or shared memory too? FIXME: someone please correct me here!).</P
></LI
><LI
><P
>Turck MMCache (see <A
HREF="#TURCK-MMCACHE"
>Section 24.1.3</A
>) can cache and compress all of the above, plus can do encoding - all in shared memory!</P
></LI
></UL
><P
>So which tool is the right one for you?</P
><P
>There are a lot of combinations one could try there and without serious testing it is not easy to answer this question definitely. However, from what we have seen already in the previous posts, we can derive some strategies (see also <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=130"
TARGET="_top"
>How to accelerate PHP-Nuke</A
>):</P
><P
></P
><UL
><LI
><P
>If you don't have administration access to your web server, you are left with jpcache and Cache-Lite. Use a combination of them as outlined above, caching whole pages with jpcache and individual blocks/modules with Cache-Lite. It's a strategic decision when to use which one - one you will have to make yourself.</P
></LI
><LI
><P
>If you do have administration access to your web server, MMCache is the way to go. You can use it to cache <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code and - optionally - a whole page content or just part of it. Whether you should prefer Cache-Lite for the latter, or decide to use MMCache, is something that probably only tests can show.</P
></LI
><LI
><P
>Ease of deployment can also play a role: with MMCache, you add a line, with Cache-Lite a whole block of lines, to each <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module or block you wish to cache. On the other hand, Cache-Lite may live up to its name and prove itself to be really lightweight in some (or all) situations. Again, you wll have to test.</P
></LI
></UL
></DIV
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="OPTIMIZING-PHP-NUKE"
></A
>Chapter 25. Optimizing <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> </H1
><P
>Once your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site is up and running, you can relax and watch it grow. But as it grows, your expectations will grow too: better visibility with the search engines, better protection of your content, better response times from the database - in short, the idea of optimization will start occupying your thoughts more and more. In this chapter we cover some advanced optimization topics:</P
><P
></P
><UL
><LI
><P
>Search engines and dynamic URLs (<A
HREF="#SEARCH-ENGINES-AND-DYNAMIC-URLS"
>Section 25.1</A
>),</P
></LI
><LI
><P
>mod_rewrite (<A
HREF="#MOD-REWRITE"
>Section 25.2</A
>),</P
></LI
><LI
><P
>Regular expressions (<A
HREF="#REGULAR-EXPRESSIONS"
>Section 25.3</A
>),</P
></LI
><LI
><P
>The .htaccess file (<A
HREF="#HTACCESS-FILE"
>Section 25.4</A
>),</P
></LI
><LI
><P
>How to make <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> search engine friendly (<A
HREF="#MAKE-PHP-NUKE-SEARCH-ENGINE-FRIENDLY"
>Section 25.5</A
>),</P
></LI
><LI
><P
>How to make <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> hot link stealth (<A
HREF="#MAKE-PHP-NUKE-HOT-LINK-STEALTH"
>Section 25.6</A
>),</P
></LI
><LI
><P
>How to make a dynamic CSS (<A
HREF="#MAKE-DYNAMIC-CSS"
>Section 25.7</A
>),</P
></LI
><LI
><P
>How to proceed when MySQL is slow (<A
HREF="#PROCEED-WHEN-MYSQL-SLOW"
>Section 25.8</A
>).</P
></LI
></UL
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="SEARCH-ENGINES-AND-DYNAMIC-URLS"
>25.1. Search engines and dynamic URLs</A
></H2
><P
>The ability to transfer information from one script to another is essential to modern dynamic web pages. Usually, the scripts will use the well-known GET method for this purpose. For example, to edit your personal information, <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> calls the Your_Account module with an URL like:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>http://www.yourdomain.com/modules.php?name=Your_Account&#38;op=edituser</PRE
></FONT
></TD
></TR
></TABLE
><P
>The "name" and "op" are so-called URL parameters and are passed to the modules.php script through the GET method. This is what happens besides the scenes:</P
><P
>The modules.php file includes mainfile.php, as practically every piece of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> code does, directly or indirectly (see <A
HREF="#BLOCK-CREATION"
>Section 20.2</A
>, for blocks and <A
HREF="#CREATING-MODULES"
>Chapter 21</A
>, for modules). In mainfile.php, one of the first things that is checked, is whether you have register_globals set to OFF in your php.ini:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if (!ini_get("register_globals")) {
    import_request_variables('GPC');
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>If it is, the above code will call <A
HREF="http://www.php.net/manual/en/function.import-request-variables.php"
TARGET="_top"
>import_request_variables</A
> and import all GET variables (i.e. "name" and "op" in the example) in the $_GET array. Using the types parameter, you can specify which request variables to import with import_request_variables . You can use 'G', 'P' and 'C' characters respectively for GET, POST and Cookie, as in the example from mainfile.php above.</P
><P
>The code goes on to submit each variable in the $_GET array to a series of checks that should guard against any misuse of the parameters for cracking purposes (see <A
HREF="#SECURITY-AUDIT"
>Section 23.4.3</A
>), but this is not going to be pursued further here (see <A
HREF="#HOW-SECURE-IS-PHP-NUKE"
>Section 23.1</A
> for the security perspective on PHP-Nuke). We are rather going to concentrate on a different aspect of URL parameter passing: the GET method of transferring parameters between scripts makes your web pages unfriendly for search engines - up to the point that they may not be indexed at all!</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="SEARCH-ENGINES-AND-GET-METHOD"
>25.1.1. Search engines and the GET method</A
></H3
><P
>When a search engine spider encounters an URL with many parameters while indexing your pages, it will ignore the URL and not index that particular page. Just how many parameters are too many for a search engine, is difficult to say. The search engines are deliberately vague on this point, just as they are on almost every other point regarding their algorithms. For example, <A
HREF="http://www.google.com"
TARGET="_top"
>Google</A
> states the following in its <A
HREF="http://www.google.com/webmasters/guidelines.html"
TARGET="_top"
>Guidelines for Webmasters</A
>:</P
><A
NAME="AEN17636"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>Allow search bots to crawl your sites without session ID's or arguments that track their path through the site. These techniques are useful for tracking individual user behavior, but the access pattern of bots is entirely different. Using these techniques may result in incomplete indexing of your site, as bots may not be able to eliminate URLs that look different but actually point to the same page. </P
></BLOCKQUOTE
><P
>This does not mean that Google will not spider dynamic pages at all, however (although this seems to have been the case in the past, though). Somewhere in the first months of 2003, Google's algoritms became intelligent enough to tackle the tricky problem of dynamic URLs - well, at least partly, see <A
HREF="http://www.webmasterworld.com/forum3/12370.htm"
TARGET="_top"
>Google is now better at spidering dynamic sites</A
>. Observational evidence suggests that Google will now index a page whose URL contains no more than 2-3 parameters with short names (URLs with 2 parameters is the maximum for Google right now, said Marissa Mayer of Google in the <A
HREF="http://www.seroundtable.com/archives/000024.html"
TARGET="_top"
>Search Engines Strategies  Chicago December 10th  Day Two</A
>, Dec. 10th 2003 ). </P
><P
>Still, the problem remains for URLs with many parameters, as well as session IDs. A page that uses session IDs can generate an infinite amount of pages for a spider to visit. These types of pages are blocked from being indexed not only by Google, but from other search engines as well.</P
><P
>If a bot ignores a page due to a session <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
> or a large number of GET parameters on the URL, it will also ignore all pages referenced by that page (unless it finds its way to them through some other link that it can follow). Since every <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> module is accessible through an URL of the form</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>http://www.yourdomain.com/modules.php?name=Your_Account&#38;op=edituser</PRE
></FONT
></TD
></TR
></TABLE
><P
>and the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> forums with at least 4 URL parameters, one of which is a session ID,</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>http://www.yourdomain.com/modules.php?name=Forums&#38;file=viewforum&#38;f=1
&#38;sid=9bd5f57e4615bbd6d9e2677ea7cbb781</PRE
></FONT
></TD
></TR
></TABLE
><P
>you run the risk that the majority of your pages will be unknown to the search engines. As a rule of thumb we can say that, if this happens, it will cost you two thirds of your external referrals<A
NAME="AEN17660"
HREF="#FTN.AEN17660"
><SPAN
CLASS="footnote"
>[28]</SPAN
></A
>. This can cost you your web existence and can mean the difference between success and failure for your website!</P
><P
>Why? Because search engines create multiple entry points into your website, a fact that many people fail to realize. Most people you know may be coming to your website through its main index.php page, mainly because it is easier to remember, or it's just the web address you printed on the business card you gave to them. But a well-indexed website will soon begin driving traffic to deeper located pages. The search engines have rendered elaborately crafted entry pages almost obsolete: today, every page of your website can be an entry page.</P
><P
>It is also overseen by the average webmaster that these interior pages often draw a different kind of users than the index page: users arriving there are much more qualified because they are looking for information specific to a certain topic. Because they are looking for very specific information, they are also more likely to convert on a sale or action that you have prepared for them.</P
><P
>If the search engines are not able to spider your dynamic content because of the GET parameters in the URL, you are losing - these more qualified visitors often won't find your website. Thus it is very important that you find a way to make as much of your website as possible visible to the search engines.</P
><P
>If you budget affords it, you can choose the lazy way: some serach engines, like Inktomi (FIXM: URL!), offer a Paid Inclusion Program. In a Paid Inclusion Program, it is <EM
>you</EM
> who submits a list of URLs to the search engine to crawl, not the search engine that finds them automatically. This way, the search engine can be sure that the list of URLs you submitted contains real content that is of importance to you and that none of the URLs contain duplicate content of one and the same page (something that can easy happen with session IDs and an automatic spider, for example). </P
><P
>On the plus side of a Paid Inclusion Program, you will get your pages indexed, the URLs will be the correct ones and the world will be able to search and find you. The downside is that you have to pay for each and every URL you want to have indexed. If this strains your budget, you will have to search for alternatives.</P
><P
>It turns out that such an alternative exists, thanks to the Swiss-Army-Knife of URL manipulation that is called mod_rewrite.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MOD-REWRITE"
>25.2. mod_rewrite</A
></H2
><P
>You will probably find <A
HREF="http://httpd.apache.org/docs/mod/mod_rewrite.html"
TARGET="_top"
>mod_rewrite</A
> already installed by your ISP on your web server. This module uses a rule-based rewriting engine (based on a regular-expression parser) to rewrite requested URLs on the fly. It supports an unlimited number of rules and an unlimited number of attached rule conditions for each rule to provide a really flexible and powerful URL manipulation mechanism. The URL manipulations can depend on various tests, for instance server variables, environment variables, HTTP headers, time stamps and even external database lookups in various formats can be used to achieve a really granular URL matching (see the <A
HREF="http://httpd.apache.org/docs/mod/mod_rewrite.html"
TARGET="_top"
>Apache Documentation of mod_rewrite</A
>).</P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Find out if you have mod_rewrite installed first!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>There is little meaning in trying to implement an URL manipulation solution, if your ISP has not installed mod_rewrite on your web server - so you better find out before you start. The easiest way is to call your ISP and ask. If this appears to be more time consuming than you thought, you can also find it out yourself if you save the following 3-liner</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?
phpinfo()
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>in a file called test.php, then upload it to you web server and open it with your browser. It will display a wealth of information about your <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> configuration (that's why you should delete it, or at least restrict access to it by putting it in a .htaccess password protected directory, when you are done). Among others, you will see a section called &#8220;apache&#8221;. Search for &#8220;mod_rewrite&#8221; in the &#8220;Loaded Modules&#8221; part. If you find it, mod_rewrite is up and running on your web server.</P
></TD
></TR
></TABLE
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MOD-REWRITE-PHPINFO"
></A
><P
><B
>Figure 25-1.    Apache section of the phpinfo() output: mod_rewrite is loaded.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/mod-rewrite-phpinfo.png"><DIV
CLASS="CAPTION"
><P
>Apache section of the phpinfo() output: mod_rewrite is loaded.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The internal processing of this module is very complex but needs to be explained once even to the average user to avoid common mistakes and to let you exploit its full functionality. For this we use the <A
HREF="http://httpd.apache.org/docs/mod/mod_rewrite.html"
TARGET="_top"
>Apache Documentation of mod_rewrite</A
>. Of course, there is little point in reproducing it here in whole, so you are referred to it for all the gory details.</P
><P
>Here we will cover:</P
><P
></P
><UL
><LI
><P
>The mod_rewrite API phases (<A
HREF="#MOD-REWRITE-API-PHASES"
>Section 25.2.1</A
>),</P
></LI
><LI
><P
>The mod_rewrite ruleset processing (<A
HREF="#MOD-REWRITE-RULESET-PROCESSING"
>Section 25.2.2</A
>),</P
></LI
><LI
><P
>Quoting special characters (<A
HREF="#MOD-REWRITE-QUOTING-SPECIAL-CHARACTERS"
>Section 25.2.3</A
>),</P
></LI
><LI
><P
>Regex backreference availability (<A
HREF="#MOD-REWRITE-REGEX-BACKREFERENCES"
>Section 25.2.4</A
>).</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="MOD-REWRITE-API-PHASES"
>25.2.1. API phases</A
></H3
><P
>First you have to understand that when Apache processes a HTTP request it does this in phases. A hook for each of these phases is provided by the Apache API. Mod_rewrite uses two of these hooks: the URL-to-filename translation hook which is used after the HTTP request has been read but before any authorization starts and the Fixup hook which is triggered after the authorization phases and after the per-directory config files (.htaccess) have been read, but before the content handler is activated.</P
><P
>So, after a request comes in and Apache has determined the corresponding server (or virtual server) the rewriting engine starts processing of all mod_rewrite directives from the per-server configuration in the URL-to-filename phase. A few steps later when the final data directories are found, the per-directory configuration directives of mod_rewrite are triggered in the Fixup phase. In both situations mod_rewrite rewrites URLs either to new URLs or to filenames, although there is no obvious distinction between them. This is a usage of the API which was not intended to be this way when the API was designed, but as of Apache 1.x this is the only way mod_rewrite can operate. To make this point more clear remember the following two points:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>Although mod_rewrite rewrites URLs to URLs, URLs to filenames and even filenames to filenames, the API currently provides only a URL-to-filename hook. In Apache 2.0 the two missing hooks will be added to make the processing more clear. But this point has no drawbacks for the user, it is just a fact which should be remembered: Apache does more in the URL-to-filename hook than the API intends for it.</P
></LI
><LI
><P
>Unbelievably mod_rewrite provides URL manipulations in per-directory context, i.e., within .htaccess files, although these are reached a very long time after the URLs have been translated to filenames. It has to be this way because .htaccess files live in the filesystem, so processing has already reached this stage. In other words: According to the API phases at this time it is too late for any URL manipulations. To overcome this chicken and egg problem mod_rewrite uses a trick: When you manipulate a URL/filename in per-directory context mod_rewrite first rewrites the filename back to its corresponding URL (which is usually impossible, but see the Re writeBase directive below for the trick to achieve this) and then initiates a new internal sub-request with the new URL. This restarts processing of the API phases.</P
><P
>Again mod_rewrite tries hard to make this complicated step totally transparent to the user, but you should remember here: While URL manipulations in per-server context are really fast and efficient, per-directory rewrites are slow and inefficient due to this chicken and egg problem. But on the other hand this is the only way mod_rewrite can provide (locally restricted) URL manipulations to the average user.</P
></LI
></OL
><P
>Don't forget these two points!</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="MOD-REWRITE-RULESET-PROCESSING"
>25.2.2. Ruleset processing</A
></H3
><P
>Now when mod_rewrite is triggered in these two API phases, it reads the configured rulesets from its configuration structure (which itself was either created on start up for per-server context or during the directory walk of the Apache kernel for per-directory context). Then the URL rewriting engine is started with the contained ruleset (one or more rules together with their conditions). The operation of the URL rewriting engine itself is exactly the same for both configuration contexts. Only the final result processing is different.</P
><P
>The order of rules in the ruleset is important because the rewriting engine processes them in a special (and not very obvious) order. The rule is this: The rewriting engine loops through the ruleset rule by rule (RewriteRule directives) and when a particular rule matches it optionally loops through existing corresponding conditions (RewriteCond directives). For historical reasons the conditions are given first, and so the control flow is a little bit long-winded. See <A
HREF="#FIG-MOD-REWRITE-CONTROL-FLOW"
>Figure 25-2</A
> for more details.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MOD-REWRITE-CONTROL-FLOW"
></A
><P
><B
>Figure 25-2.    mod_rewrite: The control flow through the rewriting ruleset
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/mod-rewrite-control-flow.png"><DIV
CLASS="CAPTION"
><P
>mod_rewrite: The control flow through the rewriting ruleset</P
></DIV
></P
></DIV
></DIV
></P
><P
>As you can see, first the URL is matched against the Pattern of each rule. When it fails mod_rewrite immediately stops processing this rule and continues with the next rule. If the Pattern matches, mod_rewrite looks for corresponding rule conditions. If none are present, it just substitutes the URL with a new value which is constructed from the string Substitution and goes on with its rule-looping. But if conditions exist, it starts an inner loop for processing them in the order that they are listed. For conditions the logic is different: we don't match a pattern against the current URL. Instead we first create a string TestString by expanding variables, back-references, map lookups, etc. and then we try to match CondPattern against it. If the pattern doesn't match, the complete set of conditions and the corresponding rule fails. If the pattern matches, then the next condition is processed until no more conditions are available. If all conditions match, processing is continued with the substitution of the URL with Substitution.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="MOD-REWRITE-QUOTING-SPECIAL-CHARACTERS"
>25.2.3. Quoting special characters</A
></H3
><P
>As of Apache 1.3.20, special characters in TestString and Substitution strings can be escaped (that is, treated as normal characters without their usual special meaning) by prefixing them with a slosh ('\') character. In other words, you can include an actual dollar-sign character in a Substitution string by using '\$'; this keeps mod_rewrite from trying to treat it as a backreference.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="MOD-REWRITE-REGEX-BACKREFERENCES"
>25.2.4. Regex backreference availability</A
></H3
><P
>One important thing here has to be remembered: Whenever you use parentheses in Pattern or in one of the CondPattern, back-references are internally created which can be used with the strings $N and %N (see <A
HREF="#REGULAR-EXPRESSIONS"
>Section 25.3</A
>). These are available for creating the strings Substitution and TestString. <A
HREF="#FIG-MOD-REWRITE-BACK-REFERENCE"
>Figure 25-3</A
> shows to which locations the backreferences are transfered for expansion.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MOD-REWRITE-BACK-REFERENCE"
></A
><P
><B
>Figure 25-3.    mod_rewrite: The back-reference flow through a rule.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/mod-rewrite-back-reference.png"><DIV
CLASS="CAPTION"
><P
>mod_rewrite: The back-reference flow through a rule.</P
></DIV
></P
></DIV
></DIV
></P
><P
>We know this was a crash course on mod_rewrite's internal processing. But you will benefit from this knowledge when reading the following. mod_rewrite's behaviour can be controlled with numerous directives, they are all described in the <A
HREF="http://httpd.apache.org/docs/mod/mod_rewrite.html"
TARGET="_top"
>Apache Documentation of mod_rewrite</A
>. Further, real world examples of mod_rewrite use are presented in the <A
HREF="http://httpd.apache.org/docs/misc/rewriteguide.html"
TARGET="_top"
>Apache URL Rewriting Guide</A
>. </P
><P
>But besides the directives available for mod_rewrite, you will also need a grasp of regular expressions (<A
HREF="#REGULAR-EXPRESSIONS"
>Section 25.3</A
>) and the .htaccess file (<A
HREF="#HTACCESS-FILE"
>Section 25.4</A
>) to understand the solution for a search engine friendly <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site that we will present later on, in <A
HREF="#MAKE-PHP-NUKE-SEARCH-ENGINE-FRIENDLY"
>Section 25.5</A
>.</P
><P
>Not so fast! &#8220;Regular expression?&#8221; Right. If you've used "wildcards" with MS-DOS or Windows, somefile.* or some?.exe for example, you already understand the concept. But regex (regular expressions) are much more powerful. And complex. Read on! <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
></P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="REGULAR-EXPRESSIONS"
>25.3. Regular expressions</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-REGULAR-EXPRESSIONS"
></A
><P
><B
>Figure 25-4.    Pattern matching with a regular expression.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/regular-expressions.png"><DIV
CLASS="CAPTION"
><P
>Pattern matching with a regular expression.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Regular expressions are used as &#8220;templates&#8221; that match patterns of text. For example, the regular expression for the pattern matching in <A
HREF="#FIG-REGULAR-EXPRESSIONS"
>Figure 25-4</A
> is<A
NAME="AEN17907"
HREF="#FTN.AEN17907"
><SPAN
CLASS="footnote"
>[29]</SPAN
></A
></P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>\([Ii]f \|and \)*\(&#60;i&#62;[AC]\+&#60;\/i&#62;.\)\(and\)\?</PRE
></FONT
></TD
></TR
></TABLE
><P
>To understand any URL manipulation solution to the problem of non-search-engine-friendly URLs, you have to get acquainted with Regular Expressions. To get you started, read <A
HREF="http://etext.lib.virginia.edu/helpsheets/regex.html"
TARGET="_top"
>Using Regular Expressions</A
> and <A
HREF="http://gnosis.cx/publish/programming/regular_expressions.html"
TARGET="_top"
>Matching Patterns in Text</A
>. We can only touch the basics here, for which we use material taken from <A
HREF="http://www.tldp.org/LDP/abs/html/x12265.html"
TARGET="_top"
>A Brief Introduction to Regular Expressions</A
>:</P
><P
>An expression is a string of characters. Those characters that have an interpretation above and beyond their literal meaning are called metacharacters. A quote symbol, for example, may denote speech by a person, ditto, or a meta-meaning for the symbols that follow. Regular Expressions are sets of characters and/or metacharacters that UNIX endows with special features.</P
><P
>The main uses for Regular Expressions (REs) are text searches and string manipulation. An RE matches a single character or a set of characters (a substring or an entire string). </P
><P
></P
><UL
><LI
><P
>The asterisk -- * -- matches any number of repeats of the character string or RE preceding it, including zero.</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>"1133*" matches 11 + one or more 3's + possibly other characters: 113, 1133, 111312, and so forth.</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>The dot -- . -- matches any one character, except a newline. [2]</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>"13." matches 13 + at least one of any character (including a space): 1133, 11333, but not 13 (additional character missing).</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>The caret -- ^ -- matches the beginning of a line, but sometimes, depending on context, negates the meaning of a set of characters in an RE.</P
></LI
><LI
><P
>The dollar sign -- $ -- at the end of an RE matches the end of a line.</P
></LI
><LI
><P
>"^$" matches blank lines.</P
></LI
><LI
><P
>Brackets -- [...] -- enclose a set of characters to match in a single RE.</P
><P
></P
><UL
><LI
><P
>"[xyz]" matches the characters x, y, or z.</P
></LI
><LI
><P
>"[c-n]" matches any of the characters in the range c to n.</P
></LI
><LI
><P
>"[B-Pk-y]" matches any of the characters in the ranges B to P and k to y.</P
></LI
><LI
><P
>"[a-z0-9]" matches any lowercase letter or any digit.</P
></LI
><LI
><P
>"[^b-d]" matches all characters except those in the range b to d. This is an instance of ^ negating or inverting the meaning of the following RE (taking on a role similar to ! in a different context).</P
></LI
><LI
><P
>Combined sequences of bracketed characters match common word patterns. "[Yy][Ee][Ss]" matches yes, Yes, YES, yEs, and so forth. "[0-9][0-9][0-9]-[0-9][0-9]-[0-9</P
></LI
><LI
><P
>][0-9][0-9][0-9]" matches any Social Security number.</P
></LI
></UL
></LI
><LI
><P
>The backslash -- \ -- escapes a special character, which means that character gets interpreted literally.</P
><P
></P
><UL
><LI
><P
>A "\$" reverts back to its literal meaning of "$", rather than its RE meaning of end-of-line. Likewise a "\\" has the literal meaning of "\".</P
></LI
><LI
><P
>Escaped "angle brackets" -- \&#60;...\&#62; -- mark word boundaries. The angle brackets must be escaped, since otherwise they have only their literal character meaning:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>"\&#60;the\&#62;" matches the word "the", but not the words "them", "there", "other", etc.</PRE
></FONT
></TD
></TR
></TABLE
></LI
></UL
></LI
><LI
><P
>The question mark -- ? -- matches zero or one of the previous RE. It is generally used for matching single characters.</P
></LI
><LI
><P
>The plus -- + -- matches one or more of the previous RE. It serves a role similar to the *, but does not match zero occurrences.</P
></LI
><LI
><P
>Escaped "curly brackets" -- \{ \} -- indicate the number of occurrences of a preceding RE to match. It is necessary to escape the curly brackets since they have only their literal character meaning otherwise. </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>"[0-9]\{5\}" matches exactly five digits (characters in the range of 0 to 9).</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Parenthesses -- ( ) -- enclose groups of REs. They are useful with the following "|" operator and in substring extraction using expr.</P
></LI
><LI
><P
>The -- | -- "or" RE operator matches any of a set of alternate characters.</P
></LI
></UL
><P
>What does the above tell us when we encounter a cryptic mod_rewrite directive that looks like the following?</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>RewriteEngine on
RewriteRule ^page1\.html$ page2.html [R=301,L]</PRE
></FONT
></TD
></TR
></TABLE
><P
>Of course, the first line is easy: mod_rewrite is not enabled by default, so this line starts the &#8220;Rewrite Engine&#8221;. The second directive is a &#8220;Rewrite Rule&#8221; that instructs mod_rewrite to translate whatever URL is matched by the regular expression &#8220;^page1\.html$&#8221; to &#8220;page2.html&#8221;. </P
><P
>What URLs does the regular expression &#8220;^page1\.html$&#8221; match? </P
><P
>In this example, adapted from <A
HREF="http://www.webmasterworld.com/forum92/82.htm"
TARGET="_top"
>An Introduction to Redirecting URLs on an Apache Server</A
>, we have a caret at the beginning of the pattern, and a dollar sign at the end. These are regex special characters called anchors. The caret tells regex to begin looking for a match with the character that immediately follows it, in this case a "p". The dollar sign anchor tells regex that this is the end of the string we want to match. In our simple example, "page1\.html" and "^page1\.html$" are interchangable expressions and match the same string. However, "page1\.html" matches any string containing "page1.html" (apage1.html for example) anywhere in the URL, but "^page1\.html$" matches only a string which is exactly equal to "page1.html". In a more complex redirect, anchors (and other special regex characters) are often essential.</P
><P
>Putting all the above together, we can see that &#8220;^page1\.html$&#8221; matches URLs that start (the caret -- ^ --) with &#8220;page1&#8221;, immediately followed by a literal dot (escaped dot --\.--, as opposed to a simple tot, which is a metacharacter that matches any single character except newline), immediately followed by &#8220;html&#8221; and the end of the URL (dollar sign --$--).</P
><P
>In our example, we also have an "[R=301,L]". These are called flags in mod_rewrite and they're optional parameters. "R=301" instructs Apache to return a 301 status code with the delivered page and, when not included as in [R,L], defaults to 302. The "L" flag tells Apache that this is the last rule that it needs to process, IF the RewriteRule pattern is matched. Experts suggest that you get in the habit of including the "L" flag with every RewriteRule to avoid unpleasant surprises.</P
><P
>One powerful option in creating search patterns is specifying that a subexpression that was matched earlier in a regular expression is matched again later in the expression. We do this using backreferences. Backreferences are named by the numbers 1 through 9, preceded by the backslash/escape character when used in this manner (in mod_rewrite, you have to use the dollar sign instead of the backslash, but in <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> you will use the backslash, so don't get confused, it just depends on the context the regular expression is in). These backreferences refer to each successive group in the match pattern, as in /(one)(two)(three)/\1\2\3/ (or $1, $2 and $3 for mod_rewrite). Each numbered backreference refers to the group that has the word corresponding to the number.</P
><P
>Thus the following URL translation:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>#Your Account
RewriteRule ^userinfo-([a-zA-Z0-9_-]*)\.html
modules.php?name=Your_Account&#38;op=userinfo&#38;username=$1</PRE
></FONT
></TD
></TR
></TABLE
><P
>in the .htaccess file (<A
HREF="#HTACCESS-FILE"
>Section 25.4</A
>) will match any URL that starts (carret --^--) with &#8220;userinfo-&#8221;, immediately followed by any number (star --*--) of characters belonging to the alphanumeric class (a-z, A-Z, 0-9), including underscores (_) and dashes (-), followed by a literal dot (an escaped dot --\.--) and &#8220;html&#8221;. The Rewrite Rule instructs mod_rewrite to translate ther URL to </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>modules.php?name=Your_Account&#38;op=userinfo&#38;username=$1</PRE
></FONT
></TD
></TR
></TABLE
><P
>where $1 is a backreference, referring to the first matched subexpression, the one inside the parenthesses (). Since inside the parenthesses is a regular expression that matches &#8220;any number of characters belonging to the alphanumeric class, including underscores and dashes&#8221;, $1 will contain whatever alphanumeric characters were between &#8220;userinfo-&#8221; and &#8220;.html&#8221; (including underscores and dashes). In PHP-Nuke, this is the username, so that the URL returned by mod_rewrite will be</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>modules.php?name=Your_Account&#38;op=userinfo&#38;username=(some matched username)</PRE
></FONT
></TD
></TR
></TABLE
><P
>thus completing the transformation of a static URL (that <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> does not understand), to a dynamic one that makes perfectly sense to <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> (see <A
HREF="#GOOGLETAP-HOW-IT-WORKS"
>Section 25.5.1.3</A
> for the complete picture).</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="HTACCESS-FILE"
>25.4. The .htaccess file</A
></H2
><P
>An .htaccess file just is a plain text file that contains web server &#8220;directives&#8221; (another word for instructions in the Apache world), one per line. Think of it as an .ini file for your web server. The peculiarity of the .htaccess files is that, contrary to .ini files, their directives can be overwritten by .htaccess files located in subdirectories. </P
><P
>Thus your web server root directory may contain an .htaccess file (perhaps put in place by your ISP) whose directives should be valid through the whole website. However, you can create separate .htaccess files, one for each subdirectory of your website, containing directives that override those of the root. In this manner, you can achieve a very fine-grained control of the web server's behaviour.</P
><DIV
CLASS="WARNING"
><P
></P
><TABLE
CLASS="WARNING"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/warning.png"
HSPACE="5"
ALT="Warning"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Beware of hidden .htaccess files!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Just because you don't see any .htaccess file there, does not necessarily mean there isn't one! Some hosts will hide files whose names start with a period, so you'd better ask your ISP. Overwriting an .htaccess file can affect your website in a very negative way - you could even lose access to it,  if you delete an .htaccess file that contained directives vital to your configuration.</P
></TD
></TR
></TABLE
></DIV
><P
>If you don't have access to the web server configuration file (a usual situation in mass hosting environments), then a properly populated .htaccess file is your only way of setting server configuration options. Apart form URL manipulation, there is a whole bunch of interesting things you can achieve with the .htaccess file, see <A
HREF="#MAKE-PHP-NUKE-HOT-LINK-STEALTH"
>Section 25.6</A
>, <A
HREF="#MAKE-DYNAMIC-CSS"
>Section 25.7</A
>, or <A
HREF="#CHANGE-PHP-PARAMETERS"
>Section 27.3</A
>, for example. But before you do them, please make a backup of the existing .htaccess file!</P
><P
>Also bear in mind that, if you have full control of your server (i.e. administrator access to its configuration file), then it will be way faster to avoid using .htaccess and insert all the necessary lines in the configuration file itself. As the <A
HREF="http://httpd.apache.org/docs/howto/htaccess.html#when"
TARGET="_top"
>Apache HOWTO on when (not) to use .htaccess files</A
> says, in general, use of .htaccess files should be avoided when possible. Any configuration that you would consider putting in a .htaccess file, can just as effectively be made in a &#60;Directory&#62; section in your main server configuration file.</P
><P
>There are two main reasons to avoid the use of .htaccess files:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>The first of these is performance. When AllowOverride is set to allow the use of .htaccess files, Apache will look in every directory for .htaccess files. Thus, permitting .htaccess files causes a performance hit, whether or not you actually even use them! Also, the .htaccess file is loaded every time a document is requested.</P
><P
>Further note that Apache must look for .htaccess files in all higher-level directories, in order to have a full complement of directives that it must apply. Thus, if a file is requested out of a directory /www/htdocs/example, Apache must look for the following files:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>/.htaccess
/www/.htaccess
/www/htdocs/.htaccess
/www/htdocs/example/.htaccess</PRE
></FONT
></TD
></TR
></TABLE
><P
>And so, for each file access out of that directory, there are 4 additional file-system accesses, even if none of those files are present. (Note that this would only be the case if .htaccess files were enabled for /, which is not usually the case.)</P
></LI
><LI
><P
>The second consideration is one of security. You are permitting users to modify server configuration, which may result in changes over which you have no control. Carefully consider whether you want to give your users this privilege.</P
></LI
></OL
><P
>Note that it is completely equivalent to put a .htaccess file in a directory /www/htdocs/example containing a directive, and to put that same directive in a Directory section &#60;Directory /www/htdocs/example&#62; in your main server configuration:</P
><P
>.htaccess file in /www/htdocs/example:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>AddType text/example .exm</PRE
></FONT
></TD
></TR
></TABLE
><P
>httpd.conf example:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;Directory /www/htdocs/example&#62;
AddType text/example .exm
&#60;/Directory&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>However, putting this configuration in your server configuration file will result in less of a performance hit, as the configuration is loaded once when Apache starts, rather than every time a file is requested. Remember this, before you complain that Googletap (<A
HREF="#GOOGLETAP"
>Section 25.5.1</A
>) is too slow for you.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>How to disable .htaccess completely</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The use of .htaccess files can be disabled completely by setting the AllowOverride directive to "none"</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>AllowOverride None</PRE
></FONT
></TD
></TR
></TABLE
></TD
></TR
></TABLE
></DIV
><P
>In the sections to follow, we will see that the .htaccess file has to be populated with lines like</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>#Your Account
RewriteRule ^userinfo-([a-zA-Z0-9_-]*)\.html
modules.php?name=Your_Account&#38;op=userinfo&#38;username=$1</PRE
></FONT
></TD
></TR
></TABLE
><P
>If you don't use the .htaccess file for performance reasons, you should put those lines in the configuration file. It is these lines that trigger mod_rewrite (<A
HREF="#MOD-REWRITE"
>Section 25.2</A
>) to translate static URLs that match the regular expression (<A
HREF="#REGULAR-EXPRESSIONS"
>Section 25.3</A
>)</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>^userinfo-([a-zA-Z0-9_-]*)\.html</PRE
></FONT
></TD
></TR
></TABLE
><P
>to a dynamic URL that <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> understands:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>modules.php?name=Your_Account&#38;op=userinfo&#38;username=(some username)</PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MAKE-PHP-NUKE-SEARCH-ENGINE-FRIENDLY"
>25.5. How to make <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> search engine friendly</A
></H2
><P
>To create a search engine friendly <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site, you need a means of converting dynamic URLs to static ones. How can this be done? For example, you could convert </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>http://www.yourdomain.com/modules.php?name=Your_Account&#38;op=userinfo&#38;username=chris</PRE
></FONT
></TD
></TR
></TABLE
><P
>to </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>http://www.yourdomain.com/userinfo-chris.html</PRE
></FONT
></TD
></TR
></TABLE
><P
>Notice that the spider-friendly format contains no indication that there are any parameters being passed at all. Rather,  it simply looks like we are trying to access the file userinfo-chris.html on www.yourdomain.com, and this will not present any problems to the search engine spiders. We have of course to track this case down and use such a &#8220;file&#8221; accordingly, i.e split it internally into its parts, determine the parameter-value pairs and the name of the script to execute and pass the parameters (name=Your_Account, op=edituser, username=chris) to that script (modules.php) for execution. </P
><P
>We will describe GoogleTap, an ingenious solution to this problem, that combines the components we saw in the previous sections:</P
><P
></P
><UL
><LI
><P
>mod_rewrite (<A
HREF="#MOD-REWRITE"
>Section 25.2</A
>),</P
></LI
><LI
><P
>regular expressions (<A
HREF="#REGULAR-EXPRESSIONS"
>Section 25.3</A
>),</P
></LI
><LI
><P
>.htacces file (<A
HREF="#HTACCESS-FILE"
>Section 25.4</A
>).</P
></LI
></UL
><DIV
CLASS="WARNING"
><P
></P
><TABLE
CLASS="WARNING"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/warning.png"
HSPACE="5"
ALT="Warning"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Frontpage extensions will not work!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>This does not need to upset you, since <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> does not use Frontpage extensions. But for the sake of completeness, be warned that if you use Frontpage extensions, mod_rewrite will not work! Of course, if your ISP has installed them, but you don't use them, you also don't need to worry. </P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="GOOGLETAP"
>25.5.1. GoogleTap</A
></H3
><P
><A
HREF="http://www.nukecops.com/postt362.html"
TARGET="_top"
>GoogleTap</A
> is a collection of files (header.php, footer.php, .htaccess and replacements for some modules and blocks) that combines the power of regular expressions (<A
HREF="#REGULAR-EXPRESSIONS"
>Section 25.3</A
>) and mod_rewrite (<A
HREF="#MOD-REWRITE"
>Section 25.2</A
>) into a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> setting, to implement a search engine friendly <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> using URL manipulation. It grew out of attempts to make <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> search engine friendly, that date back to the 5.x versions (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=9201"
TARGET="_top"
>Mod_rewrite and Nuke</A
>, <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=16544"
TARGET="_top"
>PHP Nuke &#38; mod_rewrite</A
> and <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=13625"
TARGET="_top"
>Google mod_rewrite fix</A
>), which in turn seem to be related to similar efforts in the PostNuke camp (see <A
HREF="http://news.postnuke.com/modules.php?op=modload&#38;name=News&#38;file=article&#38;sid=1804"
TARGET="_top"
>Search engine friendly URLs revisited</A
> and <A
HREF="http://www.aquanuke.com/article358.html"
TARGET="_top"
>Hackin' the core - Mod_Rewrite</A
>).</P
><P
>Our treatment of GoogleTap is divided in three parts:</P
><P
></P
><UL
><LI
><P
>Requirements (<A
HREF="#GOOGLETAP-REQUIREMENTS"
>Section 25.5.1.1</A
>),</P
></LI
><LI
><P
>Installation (<A
HREF="#GOOGLETAP-INSTALLATION"
>Section 25.5.1.2</A
>),</P
></LI
><LI
><P
>How it works (<A
HREF="#GOOGLETAP-HOW-IT-WORKS"
>Section 25.5.1.3</A
>).</P
></LI
></UL
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="GOOGLETAP-REQUIREMENTS"
>25.5.1.1. Requirements</A
></H4
><P
>To implement the solution of GoogleTap, your system needs to fullfil some <EM
>software</EM
> requirements:</P
><P
></P
><UL
><LI
><P
>mod_rewrite needs to be compiled and loaded into apache (see <A
HREF="#MOD-REWRITE"
>Section 25.2</A
> on how you can check this).</P
></LI
><LI
><P
>allowoverrides need to be set to "all" for the directory location your site resides in. Check with your ISP (but see also <A
HREF="#HTACCESS-FILE"
>Section 25.4</A
> why this will make your web server much slower).</P
></LI
><LI
><P
>rewriteengine needs to be turned "on" in the .htaccess file (this is already done in the .htaccess file that comes with GoogleTap).</P
></LI
></UL
><P
>But it also needs to fullfil some <EM
>hardware</EM
> requirements too: mod_rewrite has to check a lot of regular expressions for each page request. Regular expressions are very flexible, but can be very time consuming too, depending on their complexity. The current implementation of GoogleTap seems to strain the <ACRONYM
CLASS="ACRONYM"
>CPU</ACRONYM
> quite a bit. Depending on the hardware, your hosting scheme (&#8220;root&#8221; , or &#8220;virtual&#8221; server) and the number of HTTP requests you have to serve per second, this may make your pages prohibitively slow to load! Get the best hardware you can afford!</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Monitor the load of your web server!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you are on your own ("root") server, but your hardware is not up to the demands of mod_rewrite for computing power, you may find out that your web server load is approaching dwindling heights. There have been reports that a high server load affects the stability  of Apache, or causes memory leaks. This may or may not be true for your version and configuration. But in case you are experiencing a high server load,  the following script of Zhen-Xjell (the <A
HREF="http://www.nukecops.com"
TARGET="_top"
>nukecops</A
> Webmaster) may turn out to be very helpful:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>#!/usr/bin/perl -w
#use strict;
$|++;
open(LOAD,"/proc/loadavg") || die "couldn't open /proc/loadavg: $!\n";
my @load=split(/ /,&#60;LOAD&#62;);
close(LOAD);
if ($load[0] &#62; 5) {
`/sbin/service httpd restart`;
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>Save it as loadavg.pl, adapt it to your case (location of the perl executable and the Apache start script)  and set up a cron job to call loadavg.pl at regular time intervalls. The script  monitors the server load average and restarts the server process, if it becomes too high, say, higher than 5 - see <A
HREF="http://www.nukecops.com/postp68930.html"
TARGET="_top"
>GoogleTap, mod_rewrite and SID defined</A
>.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="GOOGLETAP-INSTALLATION"
>25.5.1.2. Installation</A
></H4
><DIV
CLASS="WARNING"
><P
></P
><TABLE
CLASS="WARNING"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/warning.png"
HSPACE="5"
ALT="Warning"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Do not download the Google_Tap_Beta_0.6.5 package!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Do not download the Google_Tap_Beta_0.6.5 package! At least the .htacess file contained there,  is missing some crucial lines. Besides that, you will  not find any clear installation instructions and the files are probably already too old by the time you read this. Use the GT_Distro_10-22-03 package, or a newer one, instead! Please understand that this is beta software and still under constant development.</P
></TD
></TR
></TABLE
></DIV
><P
>We will describe the manual installation of GoogleTap, as applies to the <A
HREF="http://www.audioslaved.com/GT_Distro_10-22-03.zip"
TARGET="_top"
>GT Distro 10-22-03</A
> package (see <A
HREF="http://www.nukecops.com/posts12457-0.html"
TARGET="_top"
>Updated Google Tap Distribution 10-22-2003</A
>):</P
><P
></P
><UL
><LI
><P
>Open your header.php file and make the required changes as indicated in header.php_manualchanges.txt. Please use the included header.php as a reference. This means that you have to find the lines:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if (eregi("header.php",$_SERVER['PHP_SELF'])) {
    Header("Location: index.php");
    die();
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>in your existing header.php file and add </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>ob_start();
function replace_for_mod_rewrite(&#38;$s) {
$urlin = array(
"'(?&#60;!/)modules.php\?name=News&#38;amp;file=article&#38;amp;
sid=([0-9]*)&#38;amp;mode=([a-z]*)&#38;amp;order=([0-9]*)&#38;amp;thold=([0-9]*)
'",
"'(?&#60;!/)modules.php\?name=News&#38;amp;file=article&#38;amp;sid=([0-9]*)'",
"'(?&#60;!/)modules.php\?name=News&#38;file=article&#38;sid=([0-9]*)'",
"'(?&#60;!/)modules.php\?name=News&#38;amp;new_topic=([0-9]*)'",
...
);
$urlout = array(
"article-\\1-\\2-\\3-\\4.html",
"article\\1.html",
"article\\1.html",
"article-topic-\\1.html",
"archive-\\1-\\2-\\3.html",
"archive.html",
...
);
$s = preg_replace($urlin, $urlout, $s);
return $s;
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>The code shown here has been abbreviated for clarity - please refer to the original instructions in header.php_manualchanges.txt! You should leave the code of your original header.php untouched, after the above lines. The final header.php would look as the header.php file that is included in the GT_Distro_10-22-03 package for your reference.</P
><P
>What you basically do with this in your header.php, is start output buffering and include a function (replace_for_mod_rewrite) with two arrays, urlin and urlout.</P
></LI
><LI
><P
>Open your footer.php file and make the required changes as indicated in footer.php_manualchanges.txt. Please use the included footer.php as a reference. This means that you have to add</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>//Google Tap Footer Entry
$contents = ob_get_contents(); // store buffer in $contents
ob_end_clean(); // delete output buffer and stop buffering
echo replace_for_mod_rewrite($contents); //display modified buffer to screen
//End of Google Tap Footer</PRE
></FONT
></TD
></TR
></TABLE
><P
>after the end of the foot function in your footer.php file. The final footer.php would look as the footer.php file that is included in the GT_Distro_10-22-03 package for your reference.</P
><P
>With this change, you just conclude the actions that you introduced in header.php: there, you started output buffering, here you have to store the buffer in a variable ($contents), before you stop buffering and call the new function you introduced in header.php, the replace_for_mod_rewrite() function, passing it the whole buffer content as argument.</P
></LI
><LI
><P
>Open your includes/sessions.php (Older than <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> v.6.5, this may be modules/Forums/includes) file and make the required changes as indicated in includes/sessions.php_manualchanges.txt. Please use the included sessions.php as a reference. This means that you replace </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>        if ( !empty($SID) &#38;&#38; !eregi('sid=', $url) )
        {
                $url .= ( ( strpos($url, '?') != false ) ?  
( ( $non_html_amp) ? '&#38;' : '&#38;amp;' ) : '?' ) . $SID;
        }
        return($url);</PRE
></FONT
></TD
></TR
></TABLE
><P
>with </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>        if( !empty($SID) &#38;&#38; !eregi('sid=', $url) &#38;&#38; !areyouabot() )
        {
                $url .= ( ( strpos($url, "?") != false ) ?  
( ( $non_html_amp ) ? "&#38;" : "&#38;amp;" ) : "?" ) . $SID;
        }
        return($url);</PRE
></FONT
></TD
></TR
></TABLE
><P
>This introduces an extra check with the areyouabot() function. The session <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
> ($SID) is appended to the URL ($url) only if the areyouabot() function returns false. Already from the name, we can deduce that areyouabot() checks if the visitor is a search engine spider bot. Thus, the session <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
> will not be output on the URL that search engines get to see when they visit the site.</P
><P
>Of course, we still have to insert the code for the areyouabot() function. We can do this after the append_sid function of sessions.php, by including the code as shown in includes/sessions.php_manualchanges.txt:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>function areyouabot()
{
global $HTTP_SERVER_VARS;
        $RobotsList = array (
        "antibot",
        "appie",
        "architext",
        "bjaaland",
        "digout4u",
        "echo",
        "fast-webcrawler",
        "ferret",
...
        );
        $botID = strtolower($HTTP_SERVER_VARS['HTTP_USER_AGENT']);
        for ($i = 0; $i &#60; count($RobotsList); $i++)
        {
                if ( strstr($botID, $RobotsList[$i]) )
                {
                        return TRUE;
                }
        }
        return FALSE;
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>Please note that the above code has been abbreviated for clarity. Refer to includes/sessions.php_manualchanges.txt for the full code of areyouabot(). The final sessions.php would look as the includes/sessions.php file that is included in the GT_Distro_10-22-03 package for your reference.</P
></LI
></UL
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
></PRE
></FONT
></TD
></TR
></TABLE
><P
></P
><UL
><LI
><P
>Upload the distribution .htaccess to your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> root directory. This is the same directory that the header.php and footer.php are located within.</P
></LI
></UL
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Make a backup of your original .htaccess file!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Your ISP may already have set up an .htaccess file for you. Even if you don't see one there, there might be one, as some systems will not show hidden files (such as .htaccess). Check very thoroughly that you don't overwrite an existing .htaccess file with important directives that are vital to your site. If you find one, make a backup copy of it and be sure that you have saved it somewhere in a safe and accessible place. If your site breaks and you can't access it with your browser anymore, you should still be able to upload the backup copy of your .htaccess and restore the previous settings.</P
></TD
></TR
></TABLE
></DIV
><P
>In order for GT to work correctly with all modules currently supported, you will need to make a few minor adjustments to the following modules:</P
><P
></P
><UL
><LI
><P
>Sections</P
></LI
><LI
><P
>Statistics</P
></LI
><LI
><P
>Web_Links</P
></LI
><LI
><P
>Top</P
></LI
><LI
><P
>Your_Account</P
></LI
></UL
><P
>You can either overwrite your existing file with the one included in the distribution or make the manual changes as indicated in the readme files contained within each module. (Make sure you backup your existing files first! Included files are based on the ones located at cvs.nukecops.com). </P
><P
>The changes correct some links in the above modules. If you check, you will see that the corrections are really minimal, but are nonetheless essential for a correct working of the GoogleTap: they replace the ampersand (&#38;) on the links, with its equivalent &#8220;HTML entity&#8221; (&#38;amp;) (but not in the language files, where the changes work in the opposite direction, replacing &#38;amp; with &#38;). </P
><P
>This is actually an ommission on the part of the modules, that GoogleTap is just trying to correct: to be HTML 4.x compliant, you can't put an ampersand (&#38;) on the URL, you have to put its <A
HREF="http://www.bbsinc.com/symbol.html"
TARGET="_top"
>HTML entity</A
> (&#38;amp;) instead. This may not harm your links in most situations if you don't do it, but if you pass the URL through some regular expression, as GoogleTap does through mod_rewrite (see <A
HREF="#GOOGLETAP-HOW-IT-WORKS"
>Section 25.5.1.3</A
> for an explanation of how GoogleTap works)), you have to know if the ampersand is meant in a literal way, or if it is a <EM
>metacharacter</EM
> of some regular expression (a character that is not a &#8220;literal&#8221; , i.e. does not match (only) itself ).</P
><P
>You can now upload the GT (Google Tap) converted blocks - currently supported are:</P
><P
></P
><UL
><LI
><P
>Scrolling Forums Block</P
></LI
><LI
><P
>Top 10 Downloads Block</P
></LI
><LI
><P
>Top 10 Web_Links Block</P
></LI
><LI
><P
>Sections Articles Block</P
></LI
></UL
><P
>To install, simply overwrite your existing block. Make sure they are enabled in the blocks administration panel.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="GOOGLETAP-HOW-IT-WORKS"
>25.5.1.3. How it works</A
></H4
><P
>The GoogleTap works as follows:</P
><P
>The header.php file starts output buffering. This delays the output - all contents are temporarily sent to an internal buffer. It also defines a function, replace_for_mod_rewrite(). This function takes a sole argument (a variable) and replaces every occurence of a member of the urlin array with the respective member of the urlout array (we have seen the urlin and urlout arrays already in <A
HREF="#GOOGLETAP-INSTALLATION"
>Section 25.5.1.2</A
>). You can view the urlin and urlout arrays as ordered collections of regular expressions (see <A
HREF="#REGULAR-EXPRESSIONS"
>Section 25.3</A
>), where the first member of urlin corresponds to the first member of urlout, the second member of urlin to the second member of urlout and so forth. </P
><P
>The replace_for_mod_rewrite() function examines the contents of the variable that was passed to it as argument (remember that in <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> a variable can hold the contents of a whole page - in fact, in our case, it does exactly that!) and replaces every occurence of the first regular expression in urlin, with the first element of urlout. It does so with all other regular expressions of urlin - if it finds a string that matches the nth regular expression, it replaces that string with the nth array member of urlout. The first five replacement pairs<A
NAME="AEN18417"
HREF="#FTN.AEN18417"
><SPAN
CLASS="footnote"
>[30]</SPAN
></A
> are shown in <A
HREF="#TAB-URLIN-URLOUT"
>Table 25-1</A
>.</P
><P
><DIV
CLASS="TABLE"
><A
NAME="TAB-URLIN-URLOUT"
></A
><P
><B
>Table 25-1. URL replacement with replace_for_mod_rewrite(): dynamic to static.</B
></P
><TABLE
BORDER="1"
RULES="all"
CLASS="CALSTABLE"
><COL
WIDTH="1*"
ALIGN="LEFT"
TITLE="COL0"><COL
WIDTH="1*"
ALIGN="LEFT"
TITLE="COL1"><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>urlin: regular expression for dynamic URL</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>urlout: corresponding static URL</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>'(?&#60;!/)modules.php\?name=News</P
><P
>&#38;amp;file=article</P
><P
>&#38;amp;sid=([0-9]*)</P
><P
>&#38;amp;mode=([a-z]*)</P
><P
>&#38;amp;order=([0-9]*)</P
><P
>&#38;amp;thold=([0-9]*)'</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>article-\\1-\\2-\\3-\\4.html</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>'(?&#60;!/)modules.php\?name=News</P
><P
>&#38;amp;file=article</P
><P
>&#38;amp;sid=([0-9]*)'</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>article\\1.html</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>'(?&#60;!/)modules.php\?name=News</P
><P
>&#38;file=article</P
><P
>&#38;sid=([0-9]*)'</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>article\\1.html</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>'(?&#60;!/)modules.php\?name=News</P
><P
>&#38;amp;new_topic=([0-9]*)'</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>article-topic-\\1.html</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>'(?&#60;!/)modules.php\?name=Stories_Archive</P
><P
>&#38;sa=show_month</P
><P
>&#38;year=([0-9]*)</P
><P
>&#38;month=([0-9]*)</P
><P
>&#38;month_l=([a-zA-Z]*)'</P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>archive-\\1-\\2-\\3.html</P
></TD
></TR
></TBODY
></TABLE
></DIV
></P
><P
>From <A
HREF="#TAB-URLIN-URLOUT"
>Table 25-1</A
> we can already see that an URL of the form</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>(something)modules.php?name=News&#38;amp;file=article&#38;amp;sid=(some SID)
&#38;amp;mode=(some mode)&#38;amp;order=(some order)&#38;amp;thold=(something)</PRE
></FONT
></TD
></TR
></TABLE
><P
>is replaced with </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>article-(some SID)-(some mode)-(some order)-(something.html</PRE
></FONT
></TD
></TR
></TABLE
><P
>(first replacement pair of the table), while an URL of the form</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>(something)modules.php?name=News&#38;amp;file=article&#38;amp;sid=(someSID)</PRE
></FONT
></TD
></TR
></TABLE
><P
>is replaced with</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>article(some SID).html</PRE
></FONT
></TD
></TR
></TABLE
><P
>(the escaped numbers in the second column of <A
HREF="#TAB-URLIN-URLOUT"
>Table 25-1</A
> represent "backreferences": they match the subexpressions inside the () of the expressions in the first column. \1 matches the first subexpression, \2 the second and so forth).</P
><P
>Some explanations on the regular expressions used in the urlin column of <A
HREF="#TAB-URLIN-URLOUT"
>Table 25-1</A
> (see also <A
HREF="#REGULAR-EXPRESSIONS"
>Section 25.3</A
>):</P
><P
></P
><UL
><LI
><P
>(?&#60;!/) is a so-called assertion. It means that this pattern will only be valid, if it does not start with a preceding slash and helps us convert only links inside our <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site (so links to external sites will not be converted). </P
></LI
><LI
><P
>The question mark on the URL must be escaped, so we have to write \? to match it.</P
></LI
><LI
><P
>The ampersands (&#38;) on the URL must be in the form of their HTML entities, &#8220;&#38;amp;&#8221; (see <A
HREF="http://www.ncbi.nlm.nih.gov/entrez/query/static/entities.html"
TARGET="_top"
>SGML entities</A
>). That's why all affected modules will have to be changed to echo URLs that contain &#38;amp; instead of &#38; (this was done in <A
HREF="#GOOGLETAP-INSTALLATION"
>Section 25.5.1.2</A
>).</P
></LI
><LI
><P
>sid=([0-9]*) indicates that you may have any digit from 0 to 9 after sid=. The * means that the occurrence may be 0 or more times. </P
></LI
><LI
><P
>mode=([a-zA-Z]*) indicates that you may have any alphabetical character after mode=. Again, the * means that the occurence may be 0 or more times.</P
></LI
><LI
><P
>The parenthesis () around a regular expression like [a-zA-Z]* or [0-9]* indicate that this is a subexpression that, if matched, will be stored in an internal numbered buffer that we cann access as \1, \2, \3 and so forth. Thus, if sid=([0-9]*) is the first such subexpression in an URL, \1 will internally store the sid value, whatever it is, as long as it is matched by [0-9]* , which matches arbitrarily long sequences of digits. If it is the second one, then the session <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
> will be stored in \2.</P
></LI
><LI
><P
>The matched subexpressions (\1, \2, \3 etc) are then used in the regular expressions of the urlout array to construct a simpler, static looking URL that nevertheless contains all necessary information to convert it back to the dynamic version (this backward conversion is carried up in the .htaccess file, see below).</P
></LI
></UL
><P
>The replace_for_mod_rewrite() function is not called in header.php though - it is only defined there. As its name says, header.php outputs the <EM
>standard</EM
> <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> header (as opposed to the custom HTML header, which is contained in includes/my_heder.php, see <A
HREF="#MODIFYING-PHP-NUKE-HTML-HEADER"
>Chapter 15</A
>). It would be too early to call replace_for_mod_rewrite() during header generation. Instead, everything is meticulously gathered in the &#8220;output buffer&#8221; of <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> (to learn more about output buffering in PHP, see <A
HREF="http://www.devshed.com/Server_Side/PHP/OutputBuffering/page1.html"
TARGET="_top"
>Output Buffering With PHP</A
> and the <A
HREF="http://www.php.net/manual/en/ref.outcontrol.php"
TARGET="_top"
>PHP manual pages on output control functions</A
>).</P
><P
>As <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> outputs the page contents (which continue to land in the output buffer), it eventually reaches the page footer. This is the job of footer.php. We already saw in <A
HREF="#GOOGLETAP-INSTALLATION"
>Section 25.5.1.2</A
> that it is the footer who calls replace_for_mod_rewrite(): it stops buffering, saves the buffer contents in a variable, cleans up the buffer and calls replace_for_mod_rewrite(). </P
><P
>What are the contents of the output buffer at this stage? You guessed -it - the whole page, all the HTML that comprises the &#8220;page source&#8221; (the HTML code you see when you hit the &#8220;View source&#8221; menu entry of your browser. Without GoogleTap, this would be the HTML code that would be sent to your browser to render the page, with all its text and links and...</P
><P
>Huh! Did I say links? What if your page contains dynamic links? In fact, it is very unusual for a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> page to NOT contain any dynamic links. Dont't they have to be replaced with their static pendants too? Of course they do! Thus, it should be clear to you by now, that just by changing the URLs from dynamic to static, we are by far not done - we have to do this for every URL contained in the HTML of our page. </P
><P
>Well, that's exactly what that call of replace_for_mod_rewrite() in the footer does: it passes the whole page as argument to replace_for_mod_rewrite(), which then does an elaborate &#8220;search and replace&#8221; in the whole page, according to the urlin and urlout arrays, as indicated by <A
HREF="#TAB-URLIN-URLOUT"
>Table 25-1</A
>. </P
><P
>This completes the translation from dynamic to static: the browser gets a page where every dynamic link of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> has been replaced by a static one. The user - and the search engine - sees only static links on the page to follow. </P
><P
>What's more, through the changes we did in sessions.php during installation (see <A
HREF="#GOOGLETAP-INSTALLATION"
>Section 25.5.1.2</A
>), we have already taken care that if the visitor is a search engine bot, it will not be shown the session <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
> on the URL. Normal users will continue to see it, though. With this ingenious method, we get the best of two worlds: users can rely on the security and comfort that <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> session management has to offer - and search engines will not be chased away from our site through some huge URLs.<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_smile.png"></SPAN
></P
><P
>But suppose that the user (or better, the search engine, for which we are actually getting into all this trouble) now clicks on one of those static links on the page thet we previously served through our header-footer trick - what then? How are we going to tell <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> which link was meant? Remember, <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> sits on the server and understands only links like</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>modules.php?name=Your_Account&#38;amp;op=userinfo&#38;amp;username=chris</PRE
></FONT
></TD
></TR
></TABLE
><P
>Only so it is going to understand that you mean to see the User Info profile for chris (see <A
HREF="#FIG-YOUR-INFO-PROFILE"
>Figure 18-7</A
>), in  the Your_Account module. But the user will not click on that link, because all dynamic links were already transformed to static (by replace_for_mod_rewrite()), <EM
>before</EM
> the page was served by the web server to his browser. The user will click on a link that looks like</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>userinfo-chris.html</PRE
></FONT
></TD
></TR
></TABLE
><P
>This is because, according to the urlin and urlout arrays, which control dynamic-to-static translation of URLs in the replace_for_mod_rewrite() function of header.php, the regular expression </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>'(?&#60;!/)modules.php\?name=Your_Account&#38;amp;op=userinfo&#38;amp;username=([a-zA-Z0-9_-]*)'</PRE
></FONT
></TD
></TR
></TABLE
><P
>is translated to</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>userinfo-\\1.html</PRE
></FONT
></TD
></TR
></TABLE
><P
>(the \1 in the second expression matches a subexpression, enclosed in parenthesis (), of the first regular expression, in this case whatever follows the "username=" string).</P
><P
>For the reverse translation, from static to dynamic, the .htaccess file comes into play. It tells mod_rewrite to rewrite every URL that looks like </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>userinfo-(some username).html</PRE
></FONT
></TD
></TR
></TABLE
><P
>to </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>modules.php?name=Your_Account&#38;op=userinfo&#38;username=(some username)</PRE
></FONT
></TD
></TR
></TABLE
><P
>Here is the relevant part of .htaccess that is responsible for this translation:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>#Your Account
RewriteRule ^userinfo-([a-zA-Z0-9_-]*).html
modules.php?name=Your_Account&#38;op=userinfo&#38;username=$1</PRE
></FONT
></TD
></TR
></TABLE
><P
>You will find rewrite rules like the above, for every regular expression pair that you encounter in the urlin and urlout arrays of the header.php file. Only the roles have been exchanged: the first expression is the static one, the second the dynamic.</P
><P
>This way, <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> never sees the static URLs - when they arrive at the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> interpreter, they have been already translated to the original, correct, dynamic URLs that <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> knows how to treat.</P
><P
>While it is at it, by the way, .htaccess does some other neat things for us too. They don't have to do with the search-engine friendliness, but rather with the security of our site, and come as a nice by-product of the mod_rewrite technology:</P
><P
></P
><UL
><LI
><P
>It blocks access to almost everything, except .php files:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;FilesMatch "\.(inc|tpl|h|ihtml|sql|ini|conf|class|bin|spd|theme|module)$"&#62;
deny from all
&#60;/FilesMatch&#62;</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>It redirects email spammers robots to a fake page (some emailsforyou.php)</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>RewriteCond %{HTTP_USER_AGENT} ^Alexibot [OR]
RewriteCond %{HTTP_USER_AGENT} ^asterias [OR]
RewriteCond %{HTTP_USER_AGENT} ^BackDoorBot [OR]
RewriteCond %{HTTP_USER_AGENT} ^Black.Hole [OR]
RewriteCond %{HTTP_USER_AGENT} ^BlackWidow [OR]
...
RewriteRule ^.*$ emailsforyou.php [L]</PRE
></FONT
></TD
></TR
></TABLE
></LI
></UL
><P
>Of course, this is only going to work for email robots that are not clever enough to fake the HTTP_USER_AGENT string they present to the server.</P
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MAKE-PHP-NUKE-HOT-LINK-STEALTH"
>25.6. How to make <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> hot link stealth</A
></H2
><P
>The Web has made incorporating material from other sources almost trivial: an anchor with the source attribute pointing to someone else's image and voila! your page looks much nicer already - thanks to the hard work of that other person, or organization. </P
><P
>PHP-Nuke amplifies this tendency for &#8220;content sharing&#8221; with its easily programmed blocks: just include the output of another page in the $content variable, perhaps utilizing the output buffer - and that's all, your block now shows the content of that page (see <A
HREF="#BLOCK-CREATION"
>Section 20.2</A
>). Numerous blocks, such as Meteosat (<A
HREF="#PHP-NUKE-METEOSAT-BLOCK"
>Section 8.2.2</A
>), Sun &#38; Moon (<A
HREF="#PHP-NUKE-MOON-SUN-BLOCK"
>Section 8.2.1</A
>), Daily Comic <A
HREF="#PHP-NUKE-COMIC-BLOCK"
>Section 8.2.3</A
>), to name just a few, take advantage of this technology. They inform, beautify and entertain you.</P
><P
>Or they make somebody very angry about you! This somebody is the original author who sees his content being used without permission and the bandwidth of his site used for purposes of other sites. You should not underestimate these two problems:</P
><P
></P
><UL
><LI
><P
>Copyright: although a block that displays sattelite images for public use may be above suspicion, the situation becomes less favourable for a block that displays the work of other artists - cartoonists, for example.</P
></LI
><LI
><P
>Bandwidth: because the image is still being called from the server of the author or his hosting account, the bandwidth or data transfer is tacked onto his account for each time that image is loaded. </P
></LI
></UL
><P
>If you are the author of a collection of image files that you do not want to share through this so-called &#8220;hot&#8221; linking, there is a solution to your problem. It is not specific to PHP-Nuke, but it is based on mod_rewrite (<A
HREF="#MOD-REWRITE"
>Section 25.2</A
>) and the .htaccess file (<A
HREF="#HTACCESS-FILE"
>Section 25.4</A
>), so that if you are willing to deploy these two for a search engine friendly <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> (as shown in <A
HREF="#MAKE-PHP-NUKE-SEARCH-ENGINE-FRIENDLY"
>Section 25.5</A
>), then why not use them for a hot link stealth <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> too? Even more so, since the requirements from a programming standpoint are minimal.</P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Find out if you have mod_rewrite installed first!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Be sure that your web server supports mod_rewrite (see <A
HREF="#MOD-REWRITE"
>Section 25.2</A
> on how to find out). </P
></TD
></TR
></TABLE
></DIV
><P
>Here is what you have to do in order to show an error to everybody who is trying to access an image on your server, but is not currently viewing a page of your domain:</P
><P
>Insert the following lines in the .htaccess file of the directory you want to protect:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>RewriteEngine on  <A
NAME="REON"
><IMG
SRC="images/callouts/1.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
>
RewriteCond %{HTTP_REFERER} !^$ <A
NAME="REWRITE1"
><IMG
SRC="images/callouts/2.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"></A
>
RewriteCond %{HTTP_REFERER} !^http://(www\.)?mydomain.com/.*$ [NC] <A
NAME="REWRITE2"
><IMG
SRC="images/callouts/3.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"></A
>
RewriteRule \.(gif|jpg)$ - [F] <A
NAME="REWRITE3"
><IMG
SRC="images/callouts/4.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"></A
></PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="CALLOUTLIST"
><DL
COMPACT="COMPACT"
><DT
><A
HREF="#REON"
><IMG
SRC="images/callouts/1.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
></DT
><DD
>      Enable URL rewriting through mod_rewrite.
      </DD
><DT
><A
HREF="#REWRITE1"
><IMG
SRC="images/callouts/2.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"></A
></DT
><DD
>     Check that the HTTP referer of the client is not empty
      </DD
><DT
><A
HREF="#REWRITE2"
><IMG
SRC="images/callouts/3.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"></A
></DT
><DD
>      Check that the HTTP referer of the client does NOT start with your domain.  Of course, you must enter your real domain here. The ! at the start of the condition pattern  negates the result of the pattern that follows it. ^ and $  are special characters used to match the start and the end of the string in question respectively.  Thus the pattern ^http:// would match  strings starting in http://. The sequence .* will match any character f or 0 or more times, and so adding it to the start or end of a particular string will allow fuzzy pattern matching.  The ? will match zero or one occurences of the string that precedes it, so (www\.)? means that either "www." appears once, or not at all. The [NC] flag at the end of the RewriteCond lines tells the server to ignore the case (no case) while looking for matches.
      </DD
><DT
><A
HREF="#REWRITE3"
><IMG
SRC="images/callouts/4.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"></A
></DT
><DD
>      Finally,  if all conditions are met, this rewrite rule matches anything that ends in .gif or .jpg. Note that the dot in front of the file ending is escaped in the regular expression (\.) and that the OR function is indicated by the | . The dollar sign denotes the end of the URL. The [F] flag tells the browser that it is forbidden to  retrieve  that file.
      </DD
></DL
></DIV
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Will not work with faked  HTTP_REFERER!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The method will also prevent web spiders from downloading your images. Web spiders are a popular tool and are used whenever a complete local copy of a site or resource is preferred over online reading. Bear in mind, however, that good spiders allow the user to fake the HTTP referer field,  thus presenting themselves as coming from some internal page of your domain. There is no way to force  a determined  user  to look at your pages or the advertisements you have there,  before downloading your precious images.</P
></TD
></TR
></TABLE
></DIV
><P
>Of course, you can just as well redirect  the offending visitor to a file you have created just for this purpose, one that contains a standard text or image that reflects your feelings.<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> For this, you can change the above slightly to:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http://(www\.)?mydomain.com/.*$ [NC]
RewriteRule \.(gif|jpg)$ http://www.mydomain.com/nasty.gif [R,L]</PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="IMPORTANT"
><P
></P
><TABLE
CLASS="IMPORTANT"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.png"
HSPACE="5"
ALT="Important"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Don't block search engine caches, image searches and automatic translations on your site!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The rewrite conditions we use here are a bit too restrictive: everything whose referer is not in our domain is blocked or redirected. But what about image searches with search engines? A search engine will hot link our image when it shows it to the searcher. The same is true with the search engine cache and the automatic translations offered by Google or Altavista. You will not want to block these services,  let alone force search engines to display a nasty image in place of   figures in a cached or translated document from your site.</P
><P
>Thus, unless you don't care,  you will have to be more thoughtful and  construct additional rewrite conditions that do not block useful services. For example, the following rules will  allow the Altavista and Google translation services to hot link images from your site:
<TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>RewriteCond %{HTTP_REFERER} !^http://jump.altavista.com/.*(www\.)?mydomain\.com.*$ [NC]
RewriteCond %{HTTP_REFERER} !^http://translate.google.com/.*(www\.)?mydomain\.com.*$ [NC]</PRE
></FONT
></TD
></TR
></TABLE
></P
></TD
></TR
></TABLE
></DIV
><P
>See <A
HREF="http://faq.solutionscripts.com/misc/hot_linking.html"
TARGET="_top"
>Using Mod_rewrite to block hot linked images</A
>, <A
HREF="http://www.javascriptkit.com/howto/htaccess10.shtml"
TARGET="_top"
>Preventing hot linking of images</A
>, <A
HREF="http://www.webmasterstop.com/tutorials/prevent-hotlinking.shtml"
TARGET="_top"
>Preventing Hotlinking with Apache mod_rewrite</A
> and <A
HREF="http://www.fuckallyall.com/article1634.html"
TARGET="_top"
>How to be a total prick using mod_rewrite</A
>.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MAKE-DYNAMIC-CSS"
>25.7. How to make a dynamic CSS</A
></H2
><P
>A lot of people think that <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> can only be used to deliver dynamic HTML pages. This is by no means the whole story! Did you know, for example, that with <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> you can deliver dynamic <EM
>CSS files</EM
>? Forget all those multiple CSS for different browsers! You can maitain one CSS file, with <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code in it - and <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> will interpret that code and deliver the right CSS to the right browser.</P
><P
>Again, the .htaccess file (see <A
HREF="#HTACCESS-FILE"
>Section 25.4</A
>) plays a central role here: add this line to the .htaccess file in your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> root directory:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>AddType application/x-httpd-php .css</PRE
></FONT
></TD
></TR
></TABLE
><P
>This will instruct the Apache web server to parse .css files for <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> commands. Then add this line <EM
>to the top</EM
> of your CSS file:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php Header ("Content-type: text/css");?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>This makes sure that the .css file looks like a regular CSS file to anyone that asks. If you don't return a text/css header, Mozilla will refuse to include the file if the calling page has an XHTML or strict HTML doctype.</P
><P
>With these two changes in place, you can now use <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> everywhere in your CSS file. Conditional operations, function calls, and generally the whole <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> functionality is at your disposal!</P
><P
>You could for example have a link to 'printer-friendly.php' which would set a cookie (for say 10/20secs) and redirect back to the refering page. Your CSS file would then check the &#8220;printer&#8221; cookie and, if set, would produce a stylesheet that is more printer friendly:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if(isset($_COOKIE['printer'])) {
?&#62; 
/* print styles here, turn off logos,
do in black and white or whatever */
&#60;?php
} else {
?&#62;
/* regular styles */
&#60;?php
}
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Your browser does not notice!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Whether you use a dynamic CSS with PHP, or a static one, your browser will never notice - just as will never notice with other HTML files anyway! Why? Because all the "dynamics" take place on the server. As soon as <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> finishes its work with parsing the CSS file on the server, the browser gets served a CSS file that looks just about any other CSS file would do. The only difference is that this CSS is constructed on-the-fly, taking into account whatever dynamic parameters you told it to (cookies, user preferences, browser type etc.). Your browser will never notice and will cache it like any other CSS.</P
></TD
></TR
></TABLE
></DIV
><P
>The above is of course just an example, since CSS already caters for alternative 'print-friendly' styles using the "media" attribute:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;LINK rel="stylesheet" type="text/css" href="/style.css"&#62;
&#60;LINK rel="stylesheet" type="text/css" href="/print.css" media="print"&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>which, on the other hand, does not seem to be completely supported by all browsers for the moment.</P
><P
>Another interesting application of the dynamic CSS idea, is the construction of &#8220;theme variants&#8221;: different colour combinations for the same theme. Following the previous lines, you could set links somewhere in your pages, that would set a cookie and redirect back to the refering page. Your CSS file would then check the &#8220;style&#8221; cookie and, would produce the appropriate colours (see <A
HREF="http://www.webmasterworld.com/forum83/2201.htm"
TARGET="_top"
>Server Side Scripting in CSS Files</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
switch($_COOKIE['style']) {
  case "high_contrast":
  $bg="black";
  $fg="white";
  break;
case "silly":
  $bg="pink";
  $fg="red";
  break;
default:
  $bg="white";
  $fg="black";
  break;
}
?&#62;
body {
background-color: &#60;?php =$bg;?&#62;;
color: &#60;?php =$fg;?&#62;;
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>The CSS file that you should modify for such actions, is the style.css file in the styles folder of your theme (see <A
HREF="#TOPIC-STRUCTURE"
>Section 14.1</A
>).</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PROCEED-WHEN-MYSQL-SLOW"
>25.8. How to proceed when MySQL is slow</A
></H2
><P
>It is of course too general a complain to say &#8220;MySQL is slow! What is wrong with my pages?&#8221;, but nonetheless, there exist a couple of things you can check if this happens to you (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=18393"
TARGET="_top"
>slow page load and mysql errors</A
>):</P
><P
></P
><UL
><LI
><P
>First obvious question: did your host upgrade or make changes to MySQL?</P
></LI
><LI
><P
>Second, any new or modified modules added?</P
></LI
><LI
><P
>Third, does your host have 'log slow queries' enabled for mysql so you can isolate which ones are causing the problems? When started with the --log-slow-queries[=file_name] option, mysqld writes a log file containing all SQL commands that took more than long_query_time seconds to execute. See <A
HREF="http://www.mysql.com/doc/en/Slow_query_log.html"
TARGET="_top"
>The Slow Query Log</A
>.</P
></LI
><LI
><P
>Does this happen randomly or during certain time periods throughout the day?</P
></LI
><LI
><P
>Maybe you need to rebuild your indexes. To rebuild your indexes, the easiest way to do so for a MyISAM table is to use the following statement, which rebuilds the index file:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysql&#62; REPAIR TABLE tbl_name QUICK;</PRE
></FONT
></TD
></TR
></TABLE
><P
>If you don't have access to the MySQL prompt through a terminal, you can write a small <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> script that does the same. Copy the following code into a file and save it as, say, repair.php: </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
require("config.php");
$host = $dbhost;
$database = $dbname;
$username = $dbuname;
$password = $dbpass;
mysql_connect($host, $username, $password);
@mysql_select_db($database);
$res = mysql_query("repair table ".$prefix."_XXXX");
if ($res) {
    echo $res;
} else {
    print (mysql_error());
}
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Dont't forget to replace &#8220;XXXX&#8221; with the actual name (without the prefix!) of the table you are suspecting of causing you trouble. Read the table definitions in the nuke.sql file that came with your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> package under the sql directory (you used nuke.sql during installation to populate the database, see <A
HREF="#DATABASE-CREATION"
>Section 3.2.4</A
> and <A
HREF="#INSTALL-DB"
>Section 3.4.5</A
>). </P
><P
>Upload repair.php to the same directory on your web server where also config.php is in - and point your browser to it. Of course, you should delete it after you are done.</P
></LI
><LI
><P
>The phpBB software used for the standard Forum in PHP-Nuke, comes with a table, nuke_bbsearch_wordlist, that is used to store words that occur in forum posts. Due to the large size of your database, the nuke_bbsearch_wordlist table may have grown very large. By default phpBB does not include an index for that table. Lack of an index on nuke_bbsearch_wordlist can make your forum slow down. Running the SQL command below will increase the size of the nuke_bbsearch_wordlist table (could double it), but a performance increase is expected with the index (see <A
HREF="http://phpnuke.org/modules.php?name=News&#38;file=article&#38;sid=6534"
TARGET="_top"
>How to Increase your Forums Performance</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>ALTER TABLE nuke_bbsearch_wordmatch ADD INDEX post_id (post_id);</PRE
></FONT
></TD
></TR
></TABLE
><P
>Run this during a time on your site when it is least busy. More records on that table means longer run time.</P
><P
>If you find that this doesn't work for you, you can remove the index with:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>ALTER TABLE nuke_search_wordmatch DROP INDEX post_id;</PRE
></FONT
></TD
></TR
></TABLE
></LI
></UL
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Large Slow Query Logs</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The slow query log can be used to find queries that take a long time to execute and are thus candidates for optimization . With a large log, that can become a difficult task. You can pipe the slow query log through the mysqldumpslow command to get a summary of the queries which appear in the log. </P
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="SOLVE-COMMON-PROBLEMS-PHP-NUKE"
></A
>Chapter 26. How to solve common probems with PHP-Nuke</H1
><P
>What often inhibits the work of administrators of websites made with PHP-Nuke, are the maintenance interventions that are necessary for an optimal operation of their site. You should never consider your installation of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> &#8220;finished&#8221;, as correction releases that eliminate bugs, or cover security holes (<A
HREF="#SECURITY-FIXES"
>Section 23.4.1</A
>), often follow an original release and you may also feel the need for a new module that adds a much-needed functionality. Various everyday problems are related to these activities and in this chapter we are going to discuss the most common ones and ways to solve them:</P
><P
></P
><UL
><LI
><P
>How to repair a corrupt table (<A
HREF="#REPAIR-CORRUPT-TABLE"
>Section 26.1</A
>),</P
></LI
><LI
><P
>How to restore <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> from backup (<A
HREF="#RESTORE-PHP-NUKE-FROM-BACKUP"
>Section 26.2</A
>),</P
></LI
><LI
><P
>How to install new modules (<A
HREF="#INSTALL-NEW-MODULES"
>Section 26.3</A
>),</P
></LI
><LI
><P
>How to install patches and correct errors (<A
HREF="#INSTALL-PATCHES-CORRECT-ERRORS"
>Section 26.4</A
>),</P
></LI
><LI
><P
>How to find all registration links (<A
HREF="#FIND-ALL-REGISTRATION-LINKS"
>Section 26.5</A
>),</P
></LI
><LI
><P
>How to allow anonymous web link submissions (<A
HREF="#ALLOW-ANONYMOUS-WEB-LINK-SUBMISSIONS"
>Section 26.6</A
>),</P
></LI
><LI
><P
>How to disable DEBUG mode (<A
HREF="#DISABLE-DEBUG-MODE"
>Section 26.7</A
>).</P
></LI
></UL
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="REPAIR-CORRUPT-TABLE"
>26.1. How to repair a corrupt table</A
></H2
><TABLE
BORDER="0"
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
CLASS="EPIGRAPH"
><TR
><TD
WIDTH="45%"
>&nbsp;</TD
><TD
WIDTH="45%"
ALIGN="LEFT"
VALIGN="TOP"
><I
><P
><I
>Three things are certain: Death, taxes and lost data. Guess which has occurred.</I
></P
></I
></TD
></TR
></TABLE
><P
>Occasionally, under circumstances involving high load on the server, multiple INSERTs and UPDATEs, coupled with many SELECTs (see <A
HREF="#SQL-SYNTAX"
>Section 28.5</A
> for the syntax of SQL code), or hardware failure (oh yes...whenever possible, blame the hardware! <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
>), your database server may corrupt a table. This is something it shouldn't happen, but of course this doesn't help you if it does. According to the MySQL manual on <A
HREF="http://www.mysql.com/doc/en/Corrupted_MyISAM_tables.html"
TARGET="_top"
>Corrupted MyISAM Tables</A
>, you can  get corrupted tables if some of the following things happens:</P
><P
></P
><UL
><LI
><P
>The mysqld process being killed in the middle of a write.</P
></LI
><LI
><P
>Unexpected shutdown of the computer (for example, if the computer is turned off).</P
></LI
><LI
><P
>A hardware error.</P
></LI
><LI
><P
>You are using an external program (like myisamchk) on a live table.</P
></LI
><LI
><P
>A software bug in the MySQL or MyISAM code.</P
></LI
></UL
><P
>and the typical symptoms for a corrupt table are:</P
><P
></P
><UL
><LI
><P
>You get the error </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Incorrect key file for table: '...'. Try to repair it</PRE
></FONT
></TD
></TR
></TABLE
><P
>while selecting data from the table.</P
></LI
><LI
><P
>Queries don't find rows in the table or return incomplete data.</P
></LI
></UL
><P
>For PHP-Nuke, a typical error is MySQL errno 145 (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=332"
TARGET="_top"
>MySQL errno: 145 Can't open file nuke bbsearch wordmatch.MYI</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Could not insert new word matches
DEBUG MODE
SQL Error : 1016 Can't open file: 'nuke_bbsearch_wordmatch.MYI'. (errno: 145)
INSERT INTO nuke_bbsearch_wordmatch (post_id, word_id, title_match) 
SELECT 4467, word_id, 0 FROM nuke_bbsearch_wordlist WHERE word_text IN ('testing')
Line : 282
File : /xxxx/xxxx/public_html/nuke/includes/functions_search.php</PRE
></FONT
></TD
></TR
></TABLE
><P
>You can use the repair.php script of <A
HREF="#PROCEED-WHEN-MYSQL-SLOW"
>Section 25.8</A
>, or the REPAIR TABLE command from the MySQL prompt, not only to rebuild indexes, but also to generally repair a broken table (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=416"
TARGET="_top"
>Missing blocks and modules</A
>). Normally you should never have to run the REPAIR TABLE command, but if disaster strikes, you are very likely to get back all your data from a MyISAM table with it (if your tables get corrupted a lot, you should try to find the reason for this, to eliminate the need to use REPAIR TABLE, see <A
HREF="http://www.mysql.com/doc/en/Crashing.html"
TARGET="_top"
>What To Do If MySQL Keeps Crashing</A
> and <A
HREF="http://www.mysql.com/doc/en/MyISAM_table_problems.html"
TARGET="_top"
>MyISAM Table Problems</A
>). On the MySQL prompt, type:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>repair table nuke_users;</PRE
></FONT
></TD
></TR
></TABLE
><P
>to repair the nuke_users table, for example. To only check if the table is corrupt, use the &#8220;check table&#8221; SQL command:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>check table nuke_users;</PRE
></FONT
></TD
></TR
></TABLE
><P
>See <A
HREF="http://www.mysql.com/doc/en/REPAIR_TABLE.html"
TARGET="_top"
>REPAIR TABLE Syntax</A
> for the syntax of REPAIR TABLE.</P
><P
>If you don't have a ccess to the MySQL prompt, but can access the shell, you can use the myisamchk utility. Again, you can both check and repair a table. To check it, type </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>myisamchk /path/to/the/table</PRE
></FONT
></TD
></TR
></TABLE
><P
>on the shell's command line. To repair it, use</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>myisamchk -r /path/to/the/table</PRE
></FONT
></TD
></TR
></TABLE
><P
>If you ever needed the REPAIR TABLE function of MySQL (and went through the torture process of wondering what this might do to your beloved data), then you may be appreciating backups a bit more - see <A
HREF="#BACKUP-MYSQL-USING-BROWSER"
>Section 27.16</A
> and backup your database regularly!</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="RESTORE-PHP-NUKE-FROM-BACKUP"
>26.2. How to restore <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> from backup</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-BACKUP-2"
></A
><P
><B
>Figure 26-1.    Administration panel: Backup DB.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/backup.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Backup DB.</P
></DIV
></P
></DIV
></DIV
></P
><P
>We have already seen that <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> offers a built-in database backup function in the administration panel (<A
HREF="#FIG-BACKUP-DB"
>Figure 26-2</A
>). phpMyAdmin (<A
HREF="#PHPMYADMIN"
>Section 3.3</A
>) also offers a very good web interface to database backups and you can even use home-made scripts that automate the backup work for you (see <A
HREF="#BACKUP-MYSQL-USING-BROWSER"
>Section 27.16</A
>). However, we have not yet covered the procedures necessary to <EM
>restore</EM
> a backup made with the above procedures.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-BACKUP-DB"
></A
><P
><B
>Figure 26-2.    Administration panel: Backup DB.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/backup-db.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Backup DB.</P
></DIV
></P
></DIV
></DIV
></P
><P
>PHP-Nuke can bee seen as a structure comprising two general elements, the files and the database. The pulsing heart of our dynamic CMS is the database. It is actually there where the we save all usernames, articles, statistics and all the rest. In the files, on the other hand, we have the commands that are necessary for a functioning connection to the database, the fetching and processing of the data and finally their saving back to the database again.</P
><P
>Although the database is experiencing constant modifications (UPDATEs) - practically every time some user is vieweing some page - the files themselves are subject to much slower change, most of the time due to necessary interventions of the administrator. If, for example, we have <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.8 installed, then the possible modifications to our installation include:</P
><P
></P
><UL
><LI
><P
>Installation of a new theme we programmed ourselves, or modification of an existing theme.</P
></LI
><LI
><P
>Installation of patches that correct errors.</P
></LI
><LI
><P
>Installation of new modules or of modification of existisng modules in order to get a more personalized site.</P
></LI
></UL
><P
>As you can see, if we were to lose our <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> files, a recuperation would not be something impossible, although painful and annoying. On the other hand, it would be really impossible to recuperate our database data, if lost, due to the fact that they may change automatically, independently of the administrator's will. For example, the update of the statistics, a user's post in the forums, or a user registration, are all events that happen independently of the administrator's will and they all find their way to the database.</P
><P
>Hopefully, the above observations have convinced you of the necessity of database backups. We recommend you to:</P
><P
>Make a backup of your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> at least every time you make a change to them (although a regular backup every N days would be even better).</P
><P
>Make a database backup as often as possible. The backup frequency should be directly proportional to the number of visits that your site attracts per day: the more visits per day , the more new data is stored in our database each day. Also in this case, a regular backup is the recommended way.</P
><DIV
CLASS="WARNING"
><P
></P
><TABLE
CLASS="WARNING"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/warning.png"
HSPACE="5"
ALT="Warning"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Don't trust your ISP on making backups of your data!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
> 
Do not, under any circumstances,  indulge to the comforting thought that your ISP is doing database backups for you, even if he talks in his marketing brochures about "security", "crash protection" or even "backups"! If you read the Standard Terms and Conditions of your ISP carefully, you will almost certainly discover that he does not assume any responsibility for data loss, unless it was the result of gross negligence (a rare condition that you will have to prove in a court).</P
><P
>Even if your ISP does do backups, and runs big ads declaring so, this does not mean that he does them for you! You might discover that you have to pay an &#8220;market fair&#8221; hourly rate for the ISP's operator's work, if you ask his help on restoring that lost table of yours...</P
><P
>Thus, you'd better not rely on your ISP when it comes to backups. Do your homework and you will not regret it.</P
></TD
></TR
></TABLE
></DIV
><P
>Restoring a backup is very simple. All you need to do is delete all tables contained in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> database and insert the emergecy versions in their place. You can do this through the function &#8220;SQL query&#8221; of phpMyAdmin (see <A
HREF="#PHPMYADMIN-NAVIGATION-BAR-SQL"
>Section 3.4.2</A
>). Enter the full name of the backup file in the field for &#8220;textfile&#8221; in <A
HREF="#FIG-PHPMYADMIN-SQL-QUERY-2"
>Figure 26-3</A
>, or select &#8220;Browse&#8221; and then search for it in the dialog that follows.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHPMYADMIN-SQL-QUERY-2"
></A
><P
><B
>Figure 26-3.    phpMyAdmin: SQL query.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/phpmyadmin-sql-query.png"><DIV
CLASS="CAPTION"
><P
>phpMyAdmin: SQL query.</P
></DIV
></P
></DIV
></DIV
></P
><P
>However, it is important that we are aware of some exceptions or particular cases that may yield themselves the above restore procedure: </P
><P
></P
><UL
><LI
><P
>How to restore a single table (see <A
HREF="#RESTORE-SINGLE-TABLE"
>Section 26.2.1</A
>).</P
></LI
><LI
><P
>How to restore a large backup (see <A
HREF="#RESTORE-LARGE-BACKUP"
>Section 26.2.2</A
>).</P
></LI
></UL
><P
>We will talk about these cases in the following subsections.</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="RESTORE-SINGLE-TABLE"
>26.2.1. How to restore a single table</A
></H3
><P
>Suppose we only need to restore the nuke_users table, leaving all other tables untouched. For this we use phpMyAdmin (<A
HREF="#PHPMYADMIN"
>Section 3.3</A
>) to selectively delete the nuke_users table. We then open our backup file with a decent text editor (see <A
HREF="#EDITING-PHP-NUKE-FILES"
>Chapter 11</A
>) and copy from it only those parts that are relevant to the </P
><P
></P
><UL
><LI
><P
>structure and</P
></LI
><LI
><P
>data </P
></LI
></UL
><P
>of the nuke_users table. The structure part is normally preceded by a three-line comment like:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>#
# Table structure for table `nuke_users`
#</PRE
></FONT
></TD
></TR
></TABLE
><P
>The data part, on the other hand, is preceded by a three-line comment like:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>#
# Dumping data for table `nuke_users`
#</PRE
></FONT
></TD
></TR
></TABLE
><P
>All in all, our structure and data parts for the nuke_users table will look like the following:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>#
# Table structure for table `nuke_users`
#
CREATE TABLE nuke_users (
user_id int(11) NOT NULL auto_increment,
name varchar(60) NOT NULL default ",
username varchar(25) NOT NULL default ",
user_email varchar(255) NOT NULL default ",
femail varchar(255) NOT NULL default ",
 
...many other fields of nuke_users follow here 
 
#
# Dumping data for table `nuke_users`
#
INSERT INTO nuke_users VALUES (1, ", 'Anonymous', ", ", ", 
'blank.gif', 'Nov 10, 2000', ",", ", ", ", 0, 0, ", ", ", 
", 10, ", 0, 0, 0, ", 0, ", ", 4096, 0, 0, 0, 0, 0, 1, 0, 
0, 1, 0, 0, 0, 10,NULL, 'english', 'D M d, Y g:i a', 0, 0, 0, NULL, 
1, 1, 1, 1, 1, 1, 1, 1, 0, 3, NULL, NULL, NULL);
 
...many other user data follow here 
 </PRE
></FONT
></TD
></TR
></TABLE
><P
>In the above example, only a small part of the structure of the nuke_users table is shown for brevity. You will also most probably have more than one user, so that the data part will also be much bigger (we only show the user data for user &#8220;Anonymous&#8221;).</P
><P
>We can get a partial restore of the single nuke_users table in three ways:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>We copy and paste the relevant structure and data parts from our backup file into a separate file that we will call partial_backup.sql. Then we use phpMyAdmin's &#8220;SQL query&#8221; function (see <A
HREF="#PHPMYADMIN-NAVIGATION-BAR-SQL"
>Section 3.4.2</A
>) to import the partial_backup.sql file, just as we do with any other file containing SQL queries. We enter the full path to partial_backup.sql in the &#8220;textfile&#8221; field of <A
HREF="#FIG-PHPMYADMIN-SQL-QUERY-2"
>Figure 26-3</A
> and click on &#8220;Go&#8221;.</P
></LI
><LI
><P
>We copy and paste the relevant structure and data parts from our backup file into the text area field above the &#8220;Browse&#8221; button, then click on &#8220;Go&#8221;.</P
></LI
><LI
><P
>We don't use phpMyAdmin but use the shell command line instead. From the shell promt, we type:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysql -h dbhost -u dbuname -p dbname &#60; partial_backup.sql</PRE
></FONT
></TD
></TR
></TABLE
><P
>where dbhost, dbuname and dbname are exactly the same as in your config.php file(<A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>).</P
></LI
></OL
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="RESTORE-LARGE-BACKUP"
>26.2.2. How to restore a large backup</A
></H3
><P
>If your backup file is really large (a few megabytes are enough), <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> will not be able to import it in the usual <ACRONYM
CLASS="ACRONYM"
>CPU</ACRONYM
> time limit of 30 sec. that is set by most ISPs. The result will be an error and a corrupted or incomplete table. In this case you can proceed as follows:</P
><P
></P
><UL
><LI
><P
>If you have access to the shell promt, login to your server with SSH and type the following on the shell prompt:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysql -h dbhost -u dbuname -p dbname &#60; partial_backup.sql</PRE
></FONT
></TD
></TR
></TABLE
><P
>where dbhost, dbuname and dbname are exactly the same as in your config.php file(<A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>).</P
></LI
><LI
><P
>If you don't have shell access, you can use an interface like MysqlFront (see <A
HREF="#MYSQL-FRONTEND"
>Section 28.6</A
>):</P
></LI
></UL
><DIV
CLASS="WARNING"
><P
></P
><TABLE
CLASS="WARNING"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/warning.png"
HSPACE="5"
ALT="Warning"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>The <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> <ACRONYM
CLASS="ACRONYM"
>CPU</ACRONYM
> time limit may hit you in backups too!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Just as <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> may time out on a restore, it may timeout on a backup as well!. You are then left with  the command line option , or some script solution along the lines of <A
HREF="#BACKUP-MYSQL-USING-BROWSER"
>Section 27.16</A
>, modified so that it only makes a backup of a piece of your data each time.</P
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="INSTALL-NEW-MODULES"
>26.3. How to install new modules</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MODULES-3"
></A
><P
><B
>Figure 26-4.    Administration panel: Modules.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/modules.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Modules.</P
></DIV
></P
></DIV
></DIV
></P
><DIV
CLASS="IMPORTANT"
><P
></P
><TABLE
CLASS="IMPORTANT"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.png"
HSPACE="5"
ALT="Important"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Check versions!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Before we start,  check that the version of the module you are about to install is compatible with the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> version of your installation!</P
></TD
></TR
></TABLE
></DIV
><P
>The add-on modules of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> are of various types (see <A
HREF="#PHP-NUKE-ADD-ON-MODULES"
>Section 8.3</A
> for some examples), but can be grouped together in 3 different categories:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>Modules that do not change the database structure (see <A
HREF="#INSTALL-MODULES-WITH-NO-DATABASE-CHANGE"
>Section 26.3.1</A
>).</P
></LI
><LI
><P
>Modules that change the database structure (see <A
HREF="#INSTALL-MODULES-WITH-DATABASE-CHANGE"
>Section 26.3.2</A
>).</P
></LI
><LI
><P
>Modules that change both the database structure and the orininal <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> files (see <A
HREF="#INSTALL-MODULES-WITH-DATABASE-FILES-CHANGE"
>Section 26.3.3</A
>).</P
></LI
></OL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALL-MODULES-WITH-NO-DATABASE-CHANGE"
>26.3.1. How to install modules that do not change the database structure</A
></H3
><P
>These are the simplest modules to install. Their installation consists only of copying the module's files in the aproppriate folders in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. There are no changes to the original tables and no new tables involved.</P
><P
>These modules may consist of only a public part, only an administration part , or both. But how tell if a certain module requires a database modification or not? Generally, a module package comes with the following folders:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>html <A
NAME="MODULES-HTML"
><IMG
SRC="images/callouts/1.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
>
html/modules <A
NAME="MODULES-HTML-MODULES"
><IMG
SRC="images/callouts/2.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"></A
>
html/admin <A
NAME="MODULES-HTML-ADMIN"
><IMG
SRC="images/callouts/3.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"></A
>
html/images <A
NAME="MODULES-HTML-IMAGES"
><IMG
SRC="images/callouts/4.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"></A
>
html/sql <A
NAME="MODULES-HTML-SQL"
><IMG
SRC="images/callouts/5.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(5)"></A
></PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="CALLOUTLIST"
><DL
COMPACT="COMPACT"
><DT
><A
HREF="#MODULES-HTML"
><IMG
SRC="images/callouts/1.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
></DT
><DD
>       This is a container folder that is not involved in the installation.
      </DD
><DT
><A
HREF="#MODULES-HTML-MODULES"
><IMG
SRC="images/callouts/2.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"></A
></DT
><DD
>       The subfolders of this folder constitute the public part of the module and should be copied under a directory with the module's name in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules folder.
      </DD
><DT
><A
HREF="#MODULES-HTML-ADMIN"
><IMG
SRC="images/callouts/3.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"></A
></DT
><DD
>       The subfolders of this folder constitute the administration  part of the module and should be copied under PHP-Nuke's admin folder.
      </DD
><DT
><A
HREF="#MODULES-HTML-IMAGES"
><IMG
SRC="images/callouts/4.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"></A
></DT
><DD
>       Contains any images used by the module. Its contents should be copied in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> images folder.
      </DD
><DT
><A
HREF="#MODULES-HTML-SQL"
><IMG
SRC="images/callouts/5.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(5)"></A
></DT
><DD
>       Contains the file with all the necessary modification commands for the database, if any. It is the existence of such a file (sometimes not with the .sql ending) that suggests that the module in question requires changes in the database. However, its absence is not a sure sign that such a change is not needed at all: some modules will make their changes to the database on-the-fly,  e.g. through some install.php <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> script that we will have to open with our browser during installation.
      </DD
></DL
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALL-MODULES-WITH-DATABASE-CHANGE"
>26.3.2. How to install modules that change the database structure</A
></H3
><P
>These modules, although they will not change any original <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> files, they will require a change in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> database. The required change in the database may be of two types:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>Some tables are appended to the database, but without changing any of the existing ones.</P
></LI
><LI
><P
>The original <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> tables must be changed.</P
></LI
></OL
><P
>The installation of these modules consists in the copying of their files into the appropriate folders (see <A
HREF="#INSTALL-MODULES-WITH-NO-DATABASE-CHANGE"
>Section 26.3.1</A
> for the details, remember that they don't overwrite or change any original <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> file) and the import of a .sql file (using phpMyAdmin, as shown in <A
HREF="#PHPMYADMIN-NAVIGATION-BAR-SQL"
>Section 3.4.2</A
>, or the command line as in <A
HREF="#DATABASE-CREATION"
>Section 3.2.4</A
>), or the opening of some install.php file through the browser that will make the database changes automatically.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALL-MODULES-WITH-DATABASE-FILES-CHANGE"
>26.3.3. How to install modules that change the database structure and the files</A
></H3
><P
>There are module that, in order to function properly, require the addition of functions in the original files of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. These modules will overwrite mainfile.php, modules.php, or some other file. </P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Beware of subsequent installations!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you install a module that changes PHP-Nuke's original files, you may not be able to conduct the installation of another one that requires changes in those files too! The new module's installation script may not find the expected code to modify, since it will have been changed by the previous one. </P
><P
>For example, in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.0 there were two interesting add-on modules, Indy News and Groups, that both required changes to be made in mainfile.php. In order to get them both to work, we had to do the changes in mainfile.php by hand, resulting in a file that contained a mix of modifications by both modules.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="WARNING"
><P
></P
><TABLE
CLASS="WARNING"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/warning.png"
HSPACE="5"
ALT="Warning"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Automatic upgrades may not work any more!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>In case you had to change the original tables of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> (i.e. you had not just to append some new tables to the database, but to change existing ones), then you may find out the next time you want to upgrade, the automatic upgrade scripts that come with each new <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> version (see <A
HREF="#UPGRADE-PHP-NUKE"
>Chapter 4</A
>) do not work any more!</P
><P
>This is because the scripts will search for the original table structure to upgrade, but will find some new one instead. In this case it is recommended to have a look at the upgrade scripts and do the changes manually, using either a graphical frontend, like phpMyAdmin (<A
HREF="#PHPMYADMIN"
>Section 3.3</A
>) or the MySQL command line (<A
HREF="#DATABASE-CREATION"
>Section 3.2.4</A
>).</P
></TD
></TR
></TABLE
></DIV
><P
>The same warning applies to file changes during upgrades: it is best to make the changes in the files by hand, also for those files of the new modules. Such a procedure can be very painful and time-consuming. It is recommended that you use a local test server for all these changes and that you do not upload the modified files, until you have tested them thoroughly and made all backups of the production system. (See <A
HREF="#FIG-BACKUP-DB"
>Figure 26-2</A
> and <A
HREF="#ADMINISTRATION-FUNCTIONS"
>Section 7.1</A
>, for PHP-Nuke's own backup function, <A
HREF="#PHPMYADMIN"
>Section 3.3</A
> for phpMyAdmin's functionality, which also includes a very good web interface to database backups and <A
HREF="#BACKUP-MYSQL-USING-BROWSER"
>Section 27.16</A
>, for home-made scripts that automate the backup work for you).</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="INSTALL-PATCHES-CORRECT-ERRORS"
>26.4. How to install patches and correct errors</A
></H2
><P
>From time to time it occurs that some functions of a certain <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> version contain bugs, or that some others are in need of an update. Here we will briefly discuss the most common problems that arise in such situations.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Use the Forums!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you are in search of a solution to a common problem, your first move should be to consult a Forum, like those of the authors:   <A
HREF="http://www.spaghettilearning.com/modules.php?name=Forums&#38;file=index&#38;c=1"
TARGET="_top"
>PHP-Nuke Forum of spaghettibrain</A
> (Claudio), or <A
HREF="http://www.karakas-online.de/forum/phpnuke.html"
TARGET="_top"
>PHP-Nuke Forum of karakas-online</A
> (Chris). Of course, you should always use the search function of the Forums first, before asking a question that has been possibly asked (and answered) many times already.</P
></TD
></TR
></TABLE
></DIV
><P
>Here is an example of the installation of a patch:</P
><P
>Generally a patch consists of one or more files that will overwrite the buggy existing ones. The &#8220;installation&#8221; of the patch is thus nothing more than the simple overwriting of those files: foobar.php (12Kb) will overwrite the existing file foobar.php (13Kb) (notice that the name is the same, but the size differs). It is a good practice not to overwrite the old file, thus deleting it completely, but to move it to something like foobar.old or foobar.orig, so that you can easily restore it, should the new version present unexpected problems.</P
><P
>Example of a manual correction in the code:</P
><P
>Suppose our file consists of a number of lines:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$qdb = "WHERE topic='$new_topic'";
$sql_a = "SELECT topictext FROM ".$prefix."_topics WHERE topicid='$new_topic'";
$result_a = $db-&#62;sql_query($sql_a)
$row_a = $db-&#62;sql_fetchrow($result_a);
$numrows_a = $db-&#62;sql_numrows($result_a);
$topic_title = $row_a[topictext];</PRE
></FONT
></TD
></TR
></TABLE
><P
>and we are told that we must replace the fourth one with </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$result_a = $db-&#62;sql_query($sql_a);</PRE
></FONT
></TD
></TR
></TABLE
><P
>then, after we do this and save the file, our new file will look like:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$qdb = "WHERE topic='$new_topic'";
$sql_a = "SELECT topictext FROM ".$prefix."_topics WHERE topicid='$new_topic'";
$result_a = $db-&#62;sql_query($sql_a);
$row_a = $db-&#62;sql_fetchrow($result_a);
$numrows_a = $db-&#62;sql_numrows($result_a);
$topic_title = $row_a[topictext];</PRE
></FONT
></TD
></TR
></TABLE
><P
>(Can you see the difference? <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
>)</P
><P
>Most decent text editors (see <A
HREF="#EDITING-PHP-NUKE-FILES"
>Chapter 11</A
>) will display the line number for your orientation during such operations.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="FIND-ALL-REGISTRATION-LINKS"
>26.5. How to find all registration links</A
></H2
><P
>Links pointing to the registration page </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>modules.php?name=Your_Account&#38;op=new_user</PRE
></FONT
></TD
></TR
></TABLE
><P
>exist at various places in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> - and with various texts. To disable registration, it will not suffice to find them all and delete them from the code. This will not prevent a user from entering the above URL directly by hand in the address field of his browser. You will have to apply a solution like the one of <A
HREF="#DISABLE-REGISTRATION"
>Section 18.6.4</A
>. Nevertheless, you may still wish to find and delete all links to the registration page <EM
>after</EM
> you have applied the solution of <A
HREF="#DISABLE-REGISTRATION"
>Section 18.6.4</A
>. How do you proceed?</P
><P
>Place your mouse on a registration link and take note of the URL show in the status bar of your browser. Try to find some special string in it. The URL parameters are well suited for this. In the above registration URL, there are two of them, name (with value &#8220;Your_Account&#8221;) and op (with value &#8220;new_user&#8221;). The value of name is certainly not a uniquely identifying feature of the URL (you will encounter &#8220;name=Your_Account&#8221; in many URLs, not only those for registration) , but the value of op certainly is. </P
><P
>Thus, you only have to search for &#8220;new_user&#8221; . But not in the whole code. Since link texts have to be different for different languages, you can safely bet that the URLs you are looking for are going to contain text constants (see <A
HREF="#GENERAL-PHP-NUKE-TEXTS"
>Section 13.1</A
>). Your first attempt should thus concentrate in the language files:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>grep new_user language/*
...
language/lang-english.php:define("_ASREGISTERED",
"Don't have an account yet? You can 
&#60;a href=\"modules.php?name=Your_Account&#38;amp;op=new_user\"&#62;create one&#60;/a&#62;. 
As a registered user you have some advantages like theme manager, 
comments configuration and post comments with your name.");
language/lang-english.php:define("_YOUAREANON",
"You are Anonymous user. You can register for free by clicking 
&#60;a href=\"modules.php?name=Your_Account&#38;amp;op=new_user\"&#62;here&#60;/a&#62;");
language/lang-english.php:define("_MODULEUSERS", 
"We are Sorry, but this section of our site is for 
&#60;i&#62;Registered Users Only.&#60;/i&#62;&#60;br&#62;&#60;br&#62;You can register for free by clicking 
&#60;a href=\"modules.php?name=Your_Account&#38;op=new_user\"&#62;here&#60;/a&#62;, 
then you can&#60;br&#62;access this section without restrictions. Thanks.&#60;br&#62;&#60;br&#62;");
...</PRE
></FONT
></TD
></TR
></TABLE
><P
>You now see that user registration links (from the Your Account module) come in three flavours, containing the text constants _ASREGISTERED, _YOUAREANON and _MODULEUSERS respectively. Now, all you have to do to find the exact places of the links in the code, is to search the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> files for those three constants. You can then delete or modify the links you find, according to the context and your liking.</P
><P
>A similar &#8220;bottom-up&#8221; approach can be used to find the reason for an error, such as <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=353"
TARGET="_top"
>Sorry, such file doesn't exist...</A
> for example, which is discussed in <A
HREF="#SORRY-SUCH-FILE-DOESNT-EXIST"
>Section 3.9.6</A
>.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="ALLOW-ANONYMOUS-WEB-LINK-SUBMISSIONS"
>26.6. How to allow anonymous web link submissions</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-WEBLINKS-5"
></A
><P
><B
>Figure 26-5.    Administration panel: Web Links.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/weblinks.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Web Links.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Suppose you need to allow anonymous users to submit web links that then must be approved by an Administrator. Is this possible with the vanilla install of PHP-Nule?</P
><P
>It turns out that yes, it is - very easily indeed! But instead of just presenting you the solution, we will also describe how we arrived at it (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=18795"
TARGET="_top"
>Anonymous Web Link Submissions</A
>):</P
><P
>We first thought that if the Web Links module was visible by all visitors, it would also allow them to suggest a link. We tried it, but we got the error:</P
><A
NAME="AEN19317"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>You are not a registered user or you have not logged in.</P
><P
>If you were registered you could add links on this website.</P
><P
>Becoming a registered user is a quick and easy process.</P
><P
>Why do we require registration for access to certain features?</P
><P
>So we can offer you only the highest quality content,</P
><P
>each item is individually reviewed and approved by our staff.</P
><P
>We hope to offer you only valuable information.</P
></BLOCKQUOTE
><P
>Obviously, <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> made a check if this was a registered user - and issued that statement. But where was this check located in the code?</P
><P
>To find it, we used the same bottom-up approach of <A
HREF="#SORRY-SUCH-FILE-DOESNT-EXIST"
>Section 3.9.6</A
> and <A
HREF="#FIND-ALL-REGISTRATION-LINKS"
>Section 26.5</A
>: </P
><P
>We first had to find the place where the above error was echoed. We thus searched the whole code tree for all occurences of a word that most probably would appear only in the error above - we chose the word "valuable". It turned out that the word "valuable" was in some unrelated text consntants - but it was also in the _LINKSNOTUSER7 text constant that was translated in all modules/Web_Links/language/lang-XXXX.php files!</P
><P
>Armed with this information, we only had to do a second search, this time for all occurences of the string "_LINKSNOTUSER" in the whole code tree of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. We got again dozens of language files in the output, but we also got the modules/Web_Links/index.php file. Indeed, if at all, it must be this file where the check is made! </P
><P
>We thus checked the relevant lines of modules/Web_Links/index.php and the code went like this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if (is_user($user) || $links_anonaddlinklock == 1) {
--&#62; do the work here &#60;--
}else {
    echo "&#60;center&#62;"._LINKSNOTUSER1."&#60;br&#62;"
        .""._LINKSNOTUSER2."&#60;br&#62;&#60;br&#62;"
        .""._LINKSNOTUSER3."&#60;br&#62;"
        .""._LINKSNOTUSER4."&#60;br&#62;"
        .""._LINKSNOTUSER5."&#60;br&#62;"
        .""._LINKSNOTUSER6."&#60;br&#62;"
        .""._LINKSNOTUSER7."&#60;br&#62;&#60;br&#62;"
        .""._LINKSNOTUSER8."";
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>So that's where the check is made! You can see it for yourself, because the code is almost speaking natural language:</P
><A
NAME="AEN19350"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>If is user or anon add link</P
></BLOCKQUOTE
><P
>We first thought we had to remove the check "if is user", but then we saw that "or $links_anonaddlinklock == 1" which made us suspicious. So there was some kind of configuration variable ( $links_anonaddlinklock) which can control the outcome of the test!</P
><P
>We know from experience that such variables are set in a separate <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> file, in the same folder of the module. If you didn't have this experience, then you would just have to do a third search for all occurences of the string "links_anonaddlinklock" in the text of all files - there shouldn't be that many.</P
><P
>Indeed, $links_anonaddlinklock is set in modules/Web_Links/l_config.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># $links_anonaddlinklock:       Lock Unregistered users from Suggesting New Links? 
                                (0=Yes 1=No)
...many other comments
######################################################################
...many other variables
$links_anonaddlinklock = 0;</PRE
></FONT
></TD
></TR
></TABLE
><P
>So you just have to set</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$links_anonaddlinklock = 1;</PRE
></FONT
></TD
></TR
></TABLE
><P
>in modules/Web_Links/l_config.php and any user, also unregistered ones, will be able to suggest Web Links!</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>A general approach to problem solving</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>You can use this bottom-up approach to solve many similar problems of your daily work as an administrator of a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> system.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="DISABLE-DEBUG-MODE"
>26.7. How to disable DEBUG mode</A
></H2
><P
>You may have already come across those errors that enter automatically a DEBUG mode and output a more descriptive message of what happened (we saw how to do this ourselves in <A
HREF="#DESCRIPTIVE-ERROR-MESSAGE"
>Section 3.9.23</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>General Error
Couldn't update private forum permissions
DEBUG MODE
SQL Error : 1064 You have an error in your SQL syntax near ' 1)' at line 2
INSERT INTO nuke_bbauth_access (forum_id, group_id, auth_mod) VALUES (1, , 1)
Line : 425
File : /web/htdocs/www.yoursite.net/home/html69/modules/Forums/admin/admin_ug_auth.php</PRE
></FONT
></TD
></TR
></TABLE
><P
>By the way, this is the error discussed in <A
HREF="#ERROR-UPDATE-PRIVATE-FORUM-PERMISSIONS"
>Section 3.9.14</A
>. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
>You may not want to show so many details to your users and wish you could disable the DEBUG mode. But to disable the DEBUG mode, you have first to find where to do it:</P
><P
>In cases like this, search is your friend (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=307"
TARGET="_top"
>Can I disable the DEBUG mode</A
>): search for DEBUG in all texts of all files in all subdirectories of a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> installation. You will get a handful of lines:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>/usr/bin/find ./ -type f -print0 | /usr/bin/xargs -0 /usr/bin/grep DEBUG
./includes/constants.php://define('DEBUG', 1); // Debugging on
./includes/constants.php:define('DEBUG', 1); // Debugging off
./includes/functions.php:       if ( DEBUG &#38;&#38; ( $msg_code == GENERAL_ERROR ||
$msg_code == CRITICAL_ERROR ) )
./includes/functions.php:       // Add on DEBUG info if we've enabled debug mode 
and this is an error. This
./includes/functions.php:       // prevents debug info being output for general 
messages should DEBUG be
./includes/functions.php:       if ( DEBUG &#38;&#38; ( $msg_code == GENERAL_ERROR || 
$msg_code == CRITICAL_ERROR ) )
./includes/functions.php:                       $msg_text = $msg_text . '&#60;br /&#62;
&#60;br /&#62;&#60;b&#62;&#60;u&#62;DEBUG MODE&#60;/u&#62;&#60;/b&#62;' . $debug_text;
./modules/WebMail/pop3.php:        var $DEBUG=0;
./modules/WebMail/pop3.php:                if ($this-&#62;DEBUG) echo "&#60;b&#62;Sending 
Command: &#60;/b&#62;".$command."&#60;br&#62;";flush();
./modules/WebMail/pop3.php:                        if ($this-&#62;DEBUG) echo "&#60;b&#62;
Result OK: &#60;/b&#62;&#60;br&#62;";flush();
./modules/WebMail/pop3.php:                 if ($this-&#62;DEBUG) echo "&#60;b&#62;
Openning Connection to: &#60;/b&#62;".$this-&#62;hostname."&#60;br&#62;";flush();
./modules/WebMail/pop3.php:                if ($this-&#62;DEBUG) echo "&#60;b&#62;
Connection opened &#60;/b&#62;&#60;br&#62;";flush();</PRE
></FONT
></TD
></TR
></TABLE
><P
>It is clear that the DEBUG constant is set in includes/constants.php (see the first two lines of the above results) and is used in the rest of the files.</P
><P
>Thus, to disable DEBUG mode, you only need to edit includes/constants.php and change</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>// Debug Level
define('DEBUG', 1); // Debugging on
//define('DEBUG', 1); // Debugging off</PRE
></FONT
></TD
></TR
></TABLE
><P
>to</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>// Debug Level
//define('DEBUG', 1); // Debugging on
define('DEBUG', 1); // Debugging off</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="MISCELLANEOUS"
></A
>Chapter 27. Miscellaneous</H1
><P
>This chapter contains material that did not fit anywhere else, because the content was too specific, too advanced, or even too eccentric to be presented elsewhere. This does not mean that you should skip it, however. You will find some tips and tricks that may save the day - and you will learn some techniques applicable not only to PHP-Nuke, but to other areas as well, such as <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> programming or website management - so please read on!<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_smile.png"></SPAN
></P
><P
>The topics we cover are:</P
><P
></P
><UL
><LI
><P
>How to change the Home module (<A
HREF="#CHANGE-HOME-MODULE"
>Section 27.1</A
>),</P
></LI
><LI
><P
>How to use <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> under SSL (<A
HREF="#PHP-NUKE-UNDER-SSL"
>Section 27.2</A
>),</P
></LI
><LI
><P
>How to change <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> parameters when you don't have access to php.ini (<A
HREF="#CHANGE-PHP-PARAMETERS"
>Section 27.3</A
>),</P
></LI
><LI
><P
>How to display HTML code in a FAQ (<A
HREF="#DISPLAY-HTML-CODE-IN-FAQ"
>Section 27.4</A
> ),</P
></LI
><LI
><P
>How to enter thousands of web links (<A
HREF="#ENTER-THOUSANDS-OF-WEB-LINKS"
>Section 27.5</A
>),</P
></LI
><LI
><P
>How to enter thousands of download links (<A
HREF="#ENTER-THOUSANDS-OF-DOWNLOAD-LINKS"
>Section 27.6</A
>),</P
></LI
><LI
><P
>How to check the validity of thousands of web links (<A
HREF="#CHECK-VALIDITY-OF-WEB-LINKS"
>Section 27.7</A
>),</P
></LI
><LI
><P
>How to enter thousands of ephemerids (<A
HREF="#ENTER-THOUSANDS-OF-EPHEMERIDS"
>Section 27.8</A
>),</P
></LI
><LI
><P
>How to make the Encyclopedia international (<A
HREF="#MAKE-ENCYCLOPEDIA-INTERNATIONAL"
>Section 27.9</A
>),</P
></LI
><LI
><P
>How to find the user name in a module (<A
HREF="#FIND-USER-NAME"
>Section 27.10</A
>), </P
></LI
><LI
><P
>How to correct thousands of users fields (<A
HREF="#CORRECT-THOUSANDS-OF-USERS-FIELDS"
>Section 27.11</A
>),</P
></LI
><LI
><P
>How to size the select boxes in a module (<A
HREF="#SIZE-SELECT-BOXES"
>Section 27.12</A
>),</P
></LI
><LI
><P
>How to deal with date and time (<A
HREF="#DATE-TIME"
>Section 27.13</A
>),</P
></LI
><LI
><P
>How to deal with quotes in the site's name (<A
HREF="#DEAL-WITH-QUOTES-IN-SITENAME"
>Section 27.14</A
>),</P
></LI
><LI
><P
>How to embed a Flash object in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> News (<A
HREF="#FLASH-PHP-NUKE-NEWS"
>Section 27.15</A
>),</P
></LI
><LI
><P
>How to backup your MySQL database using only the browser (<A
HREF="#BACKUP-MYSQL-USING-BROWSER"
>Section 27.16</A
>).</P
></LI
></UL
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CHANGE-HOME-MODULE"
>27.1. How to change the Home module</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MODULES-2"
></A
><P
><B
>Figure 27-1.    Administration panel: Modules.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/modules.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Modules.</P
></DIV
></P
></DIV
></DIV
></P
><P
>In PHP-Nuke, the &#8220;Home&#8221; module is the module that is displayed in the central column of the index.php page. The default Home module is the News module, i.e., upon opening the index.php page, we get the usual news summary of the News module in the central column. However, you may want to change this behaviour and display, say, the Downloads module in the Home instead. You could of course use some kind of redirection (see <A
HREF="#REDIRECT-USERS-TO-HOMEPAGE"
>Section 18.6.1</A
> and <A
HREF="#REDIRECT-USERS-TO-LOGIN-AND-BACK"
>Section 18.6.3</A
> for ideas) to redirect your visitors to the Downloads module, however this is not necessary: <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> allows you to change the module that will be &#8220;put in Home&#8221; from the modules administration panel (<A
HREF="#ADMINISTRATION-FUNCTIONS"
>Section 7.1</A
>).</P
><P
>Normally, to change the Home module, you proceed as follows: go to the administration panel, click on "Modules". You get a table of modules (<A
HREF="#FIG-MODULES-ADMIN-3"
>Figure 27-2</A
>). </P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MODULES-ADMIN-3"
></A
><P
><B
>Figure 27-2.    Modules administration panel.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/modules-admin.png"><DIV
CLASS="CAPTION"
><P
>Modules administration panel.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Find the line that contains the information on the "Downloads" module. There, there is a link "Put in Home", besides the "Edit" and "Delete" links. Click on "Put in Home" and answer with "Yes" the question that follows (you may have to scroll to see it):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Default Homepage Module
Are you sure you want to change your Homepage from Web_Links To Downloads?
[ No | Yes ]</PRE
></FONT
></TD
></TR
></TABLE
><P
>Then the Downloads module will be your "Home". </P
><P
>However, this may not work with some themes like Sand_Journey (which is one of the standard ones). <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
></P
><P
>The reason is the following code in index.php (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=331"
TARGET="_top"
>Setting a module to be shown on Home page</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if (file_exists("themes/$ThemeSel/module.php")) {
include("themes/$ThemeSel/module.php");</PRE
></FONT
></TD
></TR
></TABLE
><P
>For the Sand_Journey theme (i.e. when $ThemeSel is "Sand_Journey"), this means that  themes/Sand_Journey/module.php file is included in index.php, if it exists. But if it is included, it changes the default module, because the module.php file for the Sand_Journey theme contains:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
$default_module = "News";
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>overriding any other settings. Thus, to be able to change the Home module with such a theme, you have to rename, delete, or remove the module.php file from the theme folder. No file, no cry. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_cool.png"></SPAN
></P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PHP-NUKE-UNDER-SSL"
>27.2. How to use <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> under SSL</A
></H2
><P
>SSL encrypts data at layer 6 of the <A
HREF="http://en2.wikipedia.org/wiki/OSI_model"
TARGET="_top"
>OSI model</A
> (FIXME: image!). SSL doesn't necessarily keep hackers out, but rather encrypts the data so that IF a hacker is listening, it renders the data useless to the hacker. SSL is mainly used for e-commerce but is not limited to it, so you can certainly use it with <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>.</P
><P
>To install SSL on your system, you need the <A
HREF="http://www.openssl.org"
TARGET="_top"
>openSSL</A
> package and the <A
HREF="http://www.modssl.org"
TARGET="_top"
>Apache modSSL module</A
>. </P
><P
>SSL will, by default, slow a site down. However not considerably, it does slow a site down due to encryption algorythms (don't worry, it's not a slowdown analogous to broadband vs. dialup).</P
><P
>SSL will NOT protect you from a user that knows the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> password of a user or is determined to apply the latest exploit to your site. It will only protect the traffic from eavesdroppers on the line. Nothing can totally protect you from this kind of attack - unless you probably sit the whole day in front of your computer, reading security advisories and taking action the very minute you read something about a new <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> vulnerability. Of course you can take security measures for your site (and you should take them, see <A
HREF="#SECURITY-MEASURES"
>Section 23.4.2</A
>), but you should not conclude that your site is now secure just because you are using SSL!</P
><P
>After installing Apache with openSSL and modSSL to make your site more secure, you will be connecting to it with the HTTPS protocol and, accordingly, your site will be accessible as https://www.yoursite.com (notice the extra &#8220;s&#8221; after &#8220;http&#8221;). But now every page of your site popps up with a Seuciryt Information Alert like this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>This Page contains both secure and nonsecure items.
Do you want to display the nonsecure items?
Yes - No - More Info</PRE
></FONT
></TD
></TR
></TABLE
><P
>Of course, this is normal after installation of SSL. The reason is that many <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> blocks get their images from other sites (e.g. weather blocks (<A
HREF="#PHP-NUKE-METEOSAT-BLOCK"
>Section 8.2.2</A
>), comics blocks (<A
HREF="#PHP-NUKE-COMIC-BLOCK"
>Section 8.2.3</A
>, <A
HREF="#PHP-NUKE-DAILY-COMIC-MODULE"
>Section 8.3.1</A
>), <A
HREF="http://www.humpa.com/phpnuke/modules.php?name=Downloads&#38;d_op=viewdownload&#38;cid=2"
TARGET="_top"
>daily babe blocks</A
> ...). You will find out that the browser will nerve you with questions like the above and will NOT display images, showing rather a broken key in their place, if the images come from outside the SSL domain.</P
><P
>The only solution to this annoyance is to write "SSL versions" of the relevant blocks that will store the image in a local directory and then display the image from that directory, instead from the remote one.</P
><P
>To save the image locally, you can use for example:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>  require_once "includes/SSL.php";
  $myurl = "http://www.someremotesite.com/somedir/someimage.jpg";
  $myfile = "localtmpdir/mylocalimage.jpg";
  $content = "";
  saveimage($myurl, $myfile, $content);</PRE
></FONT
></TD
></TR
></TABLE
><P
>in the block code, where includes/SSL.php is</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
function saveimage($imagefileurl, $tempfile, &#38;$content) {
if (time() - filemtime($tempfile) &#62; 3600); {
    if (!($imagefile = fopen( "$imagefileurl",  "rb"))) {
        $content .= "$imagefileurl&#60;br&#62; could not be opened&#60;br&#62;";
        die();
    }
    $imagecontent .= fread($imagefile, 300000);
    fclose($imagefile);
    if (!($localimagefile = fopen($tempfile ,  "wb"))) {
        $content .= "$tempfile&#60;br&#62; could not be opened&#60;br&#62;";
        die();
    }
    fwrite($localimagefile, $imagecontent);
    fclose($localimagefile);
}
return 1;
}
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>the idea being that we only download the remote file to the local one if the remote file's modification time is older that one hour (3600 sec.).</P
><P
>There are probably better ways to do this - you could for example use Cache-Lite (<A
HREF="#CACHE-LITE"
>Section 24.1.2</A
>) to cache the image file in a local cache directory, see <A
HREF="#CACHING-PHP-NUKE"
>Section 24.1</A
> and <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=130"
TARGET="_top"
>How to accelerate PHP-Nuke</A
>. A discussion thread is in <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=18047"
TARGET="_top"
>SSL on a phpnuke site</A
>.</P
><P
>If you want to restrict SSL only on certain directories for the above reasons, you wil have to find a way to enforce the HTTPS protocol in some directories and enforce HTTP on others. Note that will have to enforce HTTP on the directories that don's need encryption, otherwise a secure (and slow) connection will still be possible and your users might not notice that they are still using encryption in pages that don't matter (if they come to those pages from an encrypted page through a relative link, for example).</P
><P
>You can try mod_rewrite <A
HREF="#MOD-REWRITE"
>Section 25.2</A
>) to force HTTPS on some URLs and force HTTP on others: using SERVER_PORT, you can check the current port is not 443 (the standard HTTPS port), and thus to force HTTPS when entering the /dir/ directory, use:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># /dir/.htaccess
RewriteEngine On
RewriteCond %{SERVER_PORT}!443
RewriteRule ^(.*)$ https://www.x.com/dir/$1 [R,L]</PRE
></FONT
></TD
></TR
></TABLE
><P
>And because HTTPS is slower than HTTP, take the users out of HTTPS mode when they leave the /dir/ directory by:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># /.htaccess
RewriteEngine On
RewriteCond %{SERVER_PORT} 443
RewriteRule ^(.*)$ https://www.x.com/$1 [R,L]</PRE
></FONT
></TD
></TR
></TABLE
><P
>The above code should be in a .htaccess file (<A
HREF="#HTACCESS-FILE"
>Section 25.4</A
>) in the respective directory, but you can achieve the same result much faster if you have access to the web server configuration file and use the &#60;Directory&#62; directive, as described in <A
HREF="#HTACCESS-FILE"
>Section 25.4</A
>. See also <A
HREF="http://www.webmasterworld.com/forum13/3345.htm"
TARGET="_top"
>Using mod_rewrite to force SSL</A
> and <A
HREF="http://www.webmasterworld.com/forum92/600.htm"
TARGET="_top"
>More on rewrites</A
>.</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
></PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CHANGE-PHP-PARAMETERS"
>27.3. How to change <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> parameters when you don't have access to php.ini</A
></H2
><P
>Unless you have your own &#8220;root&#8221; server, you are most probably sharing the same hardware with a few thousand other so-called &#8220;virtual&#8221; domains. For this reason, it is all too natural that your ISP will deny you access to the system-wide php.ini file (usually located under /etc). Whatever value you enter there, is going to affect all the virtual domains running on that machine!</P
><P
>But what to do if you find out that you must change a setting and you are told to change it in php.ini? Fortunately, there is an alternative way - and once again the .htaccess file (see <A
HREF="#HTACCESS-FILE"
>Section 25.4</A
>) comes to your rescue:</P
><P
>To set register_globals to off (a good idea from a security point of view, see <A
HREF="#SECURITY-MEASURES"
>Section 23.4.2</A
>), for example, add </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>php_flag register_globals off</PRE
></FONT
></TD
></TR
></TABLE
><P
>to the .htaccess file in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> root directory.</P
><P
>To set magic_quotes to off (a bad idea from a security point of view, see <A
HREF="#SECURITY-MEASURES"
>Section 23.4.2</A
>), you can add the following line to the .htaccess file in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> root directory:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>php_flag magic_quotes_gpc off</PRE
></FONT
></TD
></TR
></TABLE
><P
>To set "display_errors" to off, add:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>php_flag display_errors off</PRE
></FONT
></TD
></TR
></TABLE
><P
>while to set the include path (see <A
HREF="#INCLUDE-PATH"
>Section 3.9.10</A
>), you can add</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>php_value include_path &#8220;your/include/path/here&#8221;</PRE
></FONT
></TD
></TR
></TABLE
><P
>If you get a memory limit error like:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Fatal error: Allowed memory size of 8388608 bytes exhausted 
(tried to allocate 67584 bytes) in xxx/xxxxxxx/xxxxx</PRE
></FONT
></TD
></TR
></TABLE
><P
>then you can try to increase allocated memory with</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>php_value memory_limit &#8220;16M&#8221;</PRE
></FONT
></TD
></TR
></TABLE
><P
>although you will probably not achieve the desired result, due to restrictions that your ISP has set in place.</P
><P
>To change the maximum execution time limit of your <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> scripts, add:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>php_value max_execution_time 60</PRE
></FONT
></TD
></TR
></TABLE
><P
>This will set the time limit to 60 seconds. But if you are not allowed to change php.ini, it is doudtful that you will be allowed to change the value of max_execution_time in a .htaccess file. If you <EM
>can</EM
> do it, however, then the .htaccess method gives you the flexibility to set different time limits in different directories - and thus different scripts that reside therein. See also <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=407"
TARGET="_top"
>Page genration time too long</A
>.</P
><P
>As you have guessed by now <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
>, the general syntax is:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>php_value PHP-variable value</PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="DISPLAY-HTML-CODE-IN-FAQ"
>27.4. How to display HTML code in a FAQ</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-FAQ-2"
></A
><P
><B
>Figure 27-3.    Administration panel: FAQ.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/faq.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: FAQ.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Using standard tools of a <SPAN
CLASS="PRODUCTNAME"
>Linux</SPAN
> system, like <A
HREF="http://www.gnu.org/software/sed/manual/sed.html"
TARGET="_top"
>sed</A
> and <A
HREF="http://www.gnu.org/manual/gawk-3.0.3/gawk.html"
TARGET="_top"
>awk</A
>, you can automate code generation for some highly repetitive code fragments, like the one in the following example:</P
><P
>Suppose you want to display a table of smilies that are available on your system. Each row should show the smiley and the code needed to insert it in an article. The code that does the job is <A
HREF="http://www.karakas-online.de/various/phpnuke-faq-code-1"
TARGET="_top"
>phpnuke-faq-code-1</A
>, for only one smiley, icon_smile.gif:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;table width='100%' border='0' cellspacing='0' cellpadding='3'&#62;
&#60;tr&#62;&#60;td&#62;
&#60;a&#62; &#60;img src="./modules/Forums/images/smiles/icon_smile.gif"&#62; &#60;/a&#62;
&#60;/td&#62;&#60;td&#62;&#60;b&#62;
&#38;a&#38; &#38;img src="./modules/Forums/images/smiles/icon_smile.gif"&#38; &#38;/a&#38;
&#60;/b&#62;&#60;/td&#62;&#60;/tr&#62;
&#60;/table&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>To automate the code generation process for all the smilies you have, do:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>cd /usr/local/httpd/htdocs/nuke6/html
ll modules/Forums/images/smiles/* | awk '{print $9}' &#62; smilies</PRE
></FONT
></TD
></TR
></TABLE
><P
>That is, you change to the html directory, list all smilies from the modules/Forums/images/smiles directory and let awk print the 9th field of each line - this is the file name of the smiley. The output is redirected to the smilies file, which will thus contain a list of all smiley filenames.</P
><P
>Create a <A
HREF="http://www.karakas-online.de/various/phpnuke-faq-code-2"
TARGET="_top"
>sed script that produces the HTML code for the smilies</A
> and put it in a file named &#8220;sedscr&#8221; (for sed script):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>s/\(^.*$\)/&#60;tr&#62;&#60;td&#62;&#60;a&#62; &#60;img src="\1"&#62; &#60;\/a&#62;\
&#60;\/td&#62;&#60;td&#62;&#60;b&#62;\
\&#38;a\&#38; \&#38;img src="\1"\&#38; \&#38;\/a\&#38;\
&#60;\/b&#62;&#60;\/td&#62;&#60;\/tr&#62;\
/</PRE
></FONT
></TD
></TR
></TABLE
><P
>and run sed on the previously created smilies file, using the above script as the &#8220;sed script&#8221;. For this, just run the <A
HREF="http://www.karakas-online.de/various/runsed"
TARGET="_top"
>runsed</A
> script:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>runsed sedscr smilies</PRE
></FONT
></TD
></TR
></TABLE
><P
>(runsed accepts two arguments: the sed script and the file to operate on). This produces the right code for our FAQ. You just have to add</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;table width='100%' border='0' cellspacing='0' cellpadding='3'&#62;
&#60;tr&#62;&#60;td&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>at the beginning and</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;/table&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>at the end.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="ENTER-THOUSANDS-OF-WEB-LINKS"
>27.5. How to enter thousands of web links</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-WEBLINKS-2"
></A
><P
><B
>Figure 27-4.    Administration panel: Web Links.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/weblinks.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Web Links.</P
></DIV
></P
></DIV
></DIV
></P
><P
>You have gathered, or you have found , thousands of web links that you would like to enter in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Web Links module. You don't want to do this manually. You can use <A
HREF="http://www.gnu.org/software/sed/sed.html"
TARGET="_top"
>sed</A
> to produce the MySQL commands in a script file that you will then feed to MySQL, as described in <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=113"
TARGET="_top"
>How to enter thousands of web links in PHP-Nuke</A
>.</P
><P
>The first step is of course to find the page that contains all the links you need. This may be a HTML file, but it may also be a CVS file from an exported MS Access data - this doesn't matter, the procedure is the same: edit the source with sed to convert every line that has a link and a description to an SQL command that inserts the link and its description to the aproppriate table.</P
><P
>Example: Let's consider the page <A
HREF="http://dmoz.org/Computers/Programming/Languages/PHP/Scripts/Content_Management/PHP-Nuke/"
TARGET="_top"
>Content Management - PHP-Nuke</A
> of the Open Directory (DMOZ) for a real world example. Save it as dmoz.html. To enter all the web links contained in dnoz.html into the WEB_Links module<A
NAME="AEN19761"
HREF="#FTN.AEN19761"
><SPAN
CLASS="footnote"
>[31]</SPAN
></A
>, we have to create the appropriate MySQL commands. To this end, save the following sed script under the name "sedscr_downloads":</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>s/&#60;li&#62;&#60;a href="\([^"]*\)"&#62;\(.*\)&#60;\/a&#62;\(.*\)$/INSERT INTO nuke_links_links
( lid, cid, sid, title, url, description, date, name, email, hits, submitter, linkratingsummary, totalvotes, totalcomments ) 
VALUES ( '0', '100', '0', '\2', '\1', '\3', '2003-06-23 06:05:45', 
", ", ", ", ", ", ");/p </PRE
></FONT
></TD
></TR
></TABLE
><P
>This is a one-line sed command that creates the SQL INSERT query for every line of dmoz.html that contains a link. It takes the links's URL, title and description and stores them in sed's internal numbered fields 1, 2 and 3 respectively. It then uses the values of those fields [you can see them as escaped numbers \1, \2 and \3 in the VALUES part of the query) to fill the appropriate fields of the nuke_links_links table. You can download this sed script from <A
HREF="http://www.karakas-online.de/various/sedscr_downloads"
TARGET="_top"
>sedscr_downloads</A
>. Adapt sedscr_downloads to your situation (e.g. change cid from 100 to the right category id, add values for name and email, change the date or the prefix of the links_links table). Then, run it as follows:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>sed -n -f sedscr_downloads dmoz.html &#62; dmoz.sql</PRE
></FONT
></TD
></TR
></TABLE
><P
>This will produce the file <A
HREF="http://www.karakas-online.de/various/dmoz.sql"
TARGET="_top"
>dmoz.sql</A
>, containing lines like this one:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>INSERT INTO nuke_links_links( lid, cid, sid, title, url, description, 
date, name, email, hits, submitter, linkratingsummary, totalvotes, 
totalcomments ) VALUES ( '0', '100', '0', 'PHPNuke: Management and Programming',
'http://www.karakas-online.de/EN-Book/', ' - This tutorial describes the 
installation and structure of PHPNuke. It also delves into more advanced issues, 
like the programming of PHPNuke blocks and modules.', '2003-06-23 06:05:45', 
", ", ", ", ", ", ");</PRE
></FONT
></TD
></TR
></TABLE
><P
>A line like the above will insert a Web Link in the module, when ran from the MySQL command line. As you can see, <A
HREF="http://www.karakas-online.de/various/dmoz.sql"
TARGET="_top"
>dmoz.sql</A
> contains the complete set of INSERT commands for all links contained in dmoz.html. To execute the commands from MySQL, type</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysql &#60; dmoz.sql</PRE
></FONT
></TD
></TR
></TABLE
><P
>and all links will be inserted in the Web Links module. </P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>A big time saver!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you have thousands (or even hundreds) of web links to enter, this method will save you days of typing! That's the power of sed!</P
></TD
></TR
></TABLE
></DIV
><P
>Since I used <A
HREF="http://www.dmoz.org"
TARGET="_top"
>DMOZ</A
> (or ODP, Open Directory Project) as an example, let me add that there are a lot of scripts out there that can help you include the DMOZ data in your website. An example is <A
HREF="http://www.bie.no/products/phpodp/index.php"
TARGET="_top"
>phpODP</A
>. phpODP enables you to add the content of The Open Directory Project to your own website. You can let your visitors browse the categories, or search the directory - 100% locally on your site. The content is updated in real-time - so when ODP updates, you update!</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Search for ODP tools in ODP itself!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>There is even an ODP category that is devoted to scripts and tools that can scrap ODP data for you: <A
HREF="http://dmoz.org/Computers/Internet/Searching/Directories/Open_Directory_Project/Use_of_ODP_Data/Upload_Tools"
TARGET="_top"
>Computers: Internet: Searching: Directories: Open Directory Project: Use of ODP Data: Upload Tools</A
> . It includes links to more than 20 tools that can do this, so I think one of those should fit your purposes, if the method described here is not the right one for you. In any case, it is a source of a wealth of ideas that you can explore!</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="ENTER-THOUSANDS-OF-DOWNLOAD-LINKS"
>27.6. How to enter thousands of download links</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-DOWNLOADS-2"
></A
><P
><B
>Figure 27-5.    Administration panel: Downloads.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/downloads.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Downloads.</P
></DIV
></P
></DIV
></DIV
></P
><P
>You have gathered, or you have found , thousands of download links that you would like to enter in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Downloads module. You don't want to do this manually. You can use a <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> script to read the links and create the file with the SQL commands for you.</P
><P
>Put the following script (which you can download from <A
HREF="http://www.humpa.com/news/downloadadd.txt"
TARGET="_top"
>downloadadd.txt</A
>) in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> root directory (the directory where also the config.php file is located), using .php as the ending, instead of .txt:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
global $prefix, $dbi;
include_once("mainfile.php");
$url_downloads_folder = "http://www.humpa.com/images/"; // put the url to the 
               // directory with your downloads - you need the trailing slash!
$cat = 2; // the download category id (cid)
$description = "You can put a generic description here - this will be on all of them!!!!";
$name = "PutThe_Subbmitted_By_Name_Here";
$email = "PutEmailHere";
$the_hits = 0; // you can change this if you want
$filesize = 0;  // you can change this if you want
$version = "";  // you can put something betwenn the quotes if you want, or leave them empty
$homepage = "http://www.HomePage.com";
$fp = @fopen("$url_downloads_folder","r"); 
if($fp) {
        echo "success opening the $url_downloads$downloads_folder folder.&#60;br&#62;&#60;br&#62;";
        
        $i=1;
        $buffer = "";
        while (!feof ($fp)) {
                $i++;
                $buffer_temp = fgets($fp, 2048);
                $buffer = "$buffer$buffer_temp";
        }
fclose ($fp);
}else {
        echo "couldn't connect to $url_downloads_folder";
        die();
}
//$buffer = str_replace("A HREF=\"/", "", $buffer);
//$buffer = str_replace("A HREF=\"?", "", $buffer);
$i=0;
while(eregi("(&#60;A HREF=\")([a-zA-Z0-9._-]+)(\"&#62;)",$buffer,$array_data)) {
                $i++;
                $buffer = str_replace($array_data[1].$array_data[2].$array_data[3],"",$buffer);
                //echo "$array_data[2] is data-2&#60;br&#62;";
                $file_names[$i] = $array_data[2];
}
echo "found $i files&#60;br&#62;";
while($i&#62;0) {
        //echo "$file_names[$i]&#60;br&#62;";
        $title = eregi_replace("(.+)(\.)(.+)","\\1",$file_names[$i]);
        $url = $url_downloads_folder.$file_names[$i];
        $the_sql_querys .= "insert into ".$prefix."_downloads_downloads values 
(NULL, '$cat', '0', '$title', '$url', '$description', now(), '$name', '$email',
'$the_hits',",'0','0','0', '$filesize', '$version', '$homepage');&#60;br&#62;&#60;br&#62;";
        $i--;
}
echo "&#60;br&#62;&#60;br&#62;$the_sql_querys";
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>You must of course adapt the script to your situation. The following variables must be set correctly:</P
><P
></P
><UL
><LI
><P
>$url_downloads_folder: the url to the directory with your downloads - you need the trailing slash (obligatory)!</P
></LI
><LI
><P
>$cat: the download category id (cid) (obligatory).</P
></LI
><LI
><P
>$description: you can put a generic description here - this will be on all of them! (optional)</P
></LI
><LI
><P
>$name: this will be the Subbmitted_By name (optional).</P
></LI
><LI
><P
>$email : your email (optional).</P
></LI
><LI
><P
>$version: the download version (optional).</P
></LI
><LI
><P
>$homepage: your homepage address (optional).</P
></LI
></UL
><P
>When you point the browser to the locally saved downloadadd.php script, it will print out some messages about the files it found in your downloads folder and also all the necessary SQL INSERT commands for those files to be entered as Downloads in the Downloads module. </P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>You should not have a file named index.html in your downloads folder!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you have an index.html, index.htm or similar file in the $url_downloads_folder, the script will analyze the contents of this file, instead of the contents of the folder itself! Thus, to get the right SQL INSERT commands, you should make sure that your download folder does not contain any index.htm* file.</P
></TD
></TR
></TABLE
></DIV
><P
>You can copy and paste them in a text file, call it downloads.sql for example,  then run that file in the MySQL prompt, just as we did with the dmoz.sql file in <A
HREF="#ENTER-THOUSANDS-OF-WEB-LINKS"
>Section 27.5</A
>:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysql &#60; downloads.sql</PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Test a few INSERTSs first!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>You should copy and test a few INSERTs first, before you run the whole downloads.sql file! You might not be satisfied with the resulted entries, you might discover an error, or decide to change some optional variable in the script - all this is much easier if you just tested a few commands first!</P
></TD
></TR
></TABLE
></DIV
><P
>See <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=12191"
TARGET="_top"
>How to add many downloads to my phpnuke site?</A
>, <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=13545"
TARGET="_top"
>Question about bulk upload</A
> and <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=13525"
TARGET="_top"
>Can this be done?</A
>.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CHECK-VALIDITY-OF-WEB-LINKS"
>27.7. How to check the validity of thousands of web links</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-WEBLINKS-3"
></A
><P
><B
>Figure 27-6.    Administration panel: Web Links.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/weblinks.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Web Links.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Problem: You need the check the validity of your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> weblinks. You have a lot of them and the built-in checker of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> just hangs <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
>, probably due to constraints on <ACRONYM
CLASS="ACRONYM"
>CPU</ACRONYM
> time consumption (usually 30 sec.) . You would like to run a cron job to check for valid weblinks.</P
><P
>Solution: Download <A
HREF="http://dlc.sourceforge.net"
TARGET="_top"
>deadlinkcheck</A
>, let MySQL dump a list of your web links, and give it to deadlinkcheck to validate (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=9"
TARGET="_top"
>How to check the validity of thousands of weblinks</A
>, <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=14137"
TARGET="_top"
>Weblinks Validation</A
>). </P
><P
>deadlinkcheck is a simple - you guessed right! - dead link checker. It only requires <SPAN
CLASS="APPLICATION"
>Perl</SPAN
> 5.x to run, nothing else. It produces a nice HTML validation report that you can check every day, if you combine it with a scheduling facility like cron. To install it, follow these three simple steps:</P
><P
></P
><OL
TYPE="1"
><LI
><P
>Extract the tar archive you downloaded:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>tar -xzvf dlc-0.4.0.tar.gz</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Change in the newly created directory dlc-0.4.0 and run the configure script:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>./configure --prefix=/usr/local</PRE
></FONT
></TD
></TR
></TABLE
><P
>Substitute your own prefix. In the above example, deadlinkcheck will be installed in /usr/local/bin and the man page in /usr/local/man/man1 (unfortunately, the --mandir option to the configure script is not honoured).</P
></LI
><LI
><P
>Run "make install". This completes installation. Do a "man deadlinkcheck" to get acquainted with the options.</P
></LI
></OL
><P
>The only thing you need now, is a file with all those 5000 HTTP links - or were they 50000? <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> No matter how many links you have to check, this is easy done:</P
><P
>Create a MySQL batch script, say weblinks.sql, that contains:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
># Put your database here!
use phpnuke;
#
# Output all entries of 'nuke_weblinks'
#
select url from nuke_links_links;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Run it from the MySQL prompt:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysql &#60; weblinks.sql</PRE
></FONT
></TD
></TR
></TABLE
><P
>(You may need to add your user and password in the file, see <A
HREF="http://www.mysql.com/doc/en/Batch_mode.html"
TARGET="_top"
>running MySQL in Batch Mode</A
>). This should produce a list of all the URLs on the standard output. You only need to redirect it to a file:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysql &#60; weblinks.sql &#62; urls_weblinks</PRE
></FONT
></TD
></TR
></TABLE
><P
>Now all the above comes to its completion: write a cron job to execute a script that contains the following two commands:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysql &#60; weblinks.sql &#62; urls_weblinks
deadlinkcheck -output deadlinks.html -HTMLoutput urls_weblinks</PRE
></FONT
></TD
></TR
></TABLE
><P
>Next day, when the cron job is finished and you're enjoying the morning coffee, just open the file deadlinks.html with your browser and check the results.<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_smile.png"></SPAN
></P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>How to find out the category of the invalid links</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>To find and correct an invalid link in PHP-Nuke, it is nice to know the category it is in. The solution we will present is not perfect, but you could find an even better one, if you were willing to tweak the code of the deadlinkcheck script. Use the following command in  weblinks.sql:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>select url, cid, sid from nuke_links_links;</PRE
></FONT
></TD
></TR
></TABLE
><P
>The rest remains the same. Now, at the end you get a file that contains the validated links, sorted according to HTTP return code (2xx, 3xx and 4xx) with the difference that now you see the categories in the anchor text! The links themselves show up in the status line of the browser when you pass the mouse pointer over the category id! This just makes use of a bug (in this case a feature 
<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
>
) of deadlinkcheck: if you have more information than just the link to check on a line, it checks the link and uses (part of) that extra information as anchor text.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="ENTER-THOUSANDS-OF-EPHEMERIDS"
>27.8. How to enter thousands of ephemerids</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-EPHEMERIDS-2"
></A
><P
><B
>Figure 27-7.    Administration panel: Ephemerids.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/ephemerids.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Ephemerids.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Problem: You have a file of nice quotes (often called "fortunes") that you would like to see displayed every day in the Ephemerids module (see <A
HREF="#PREINSTALLED-MODULES"
>Section 6.1</A
> for the user view and <A
HREF="#ADMINISTRATION-FUNCTIONS"
>Section 7.1</A
> for the administrator view of the Ephemerids module) . You don't want to write all those texts by hand, so you are looking for a way to automate the text insertion.</P
><P
>Idea:The right command to insert a text in the Ephemerids table nuke_ephem is:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>insert into nuke_ephem values (4,4,11,2002,
"Nothing cures insomnia like the realization that it's time to get up.",");</PRE
></FONT
></TD
></TR
></TABLE
><P
>We will use a script to produce these INSERT commands (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=5"
TARGET="_top"
>Inserting Ephemerids through script</A
>).</P
><P
>Solution: We write a script like:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>#! /bin/sh
did=6
while [ $did -le 30 ]; do
  read LINE
  if [ -n "$LINE" ]; then
    echo "insert into nuke_ephem values (",$did,11,2002,\"$LINE\",");"
    did=$((did+1))
  fi
done</PRE
></FONT
></TD
></TR
></TABLE
><P
>Let's call it "ephemerids" - don't forget to make it executable. When executed, the ephemerids script outputs the MySQL INSERT command we saw above, for each fortune in the standard input. Suppose that the "fortunes" are in the file called "myfortune", one fortune per line. Then, if you use the script as follows:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>ephemerids &#60; myfortune &#62; ephemerids.sql</PRE
></FONT
></TD
></TR
></TABLE
><P
>it will create the necessary MySQL statements and put them all in the ephemerids.sql file. Once ephemerids.sql is created, you only need to import it in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> database. For this, you can type</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysql -u dbuname -h dbhost -p dbname &#60; ephemerids.sql</PRE
></FONT
></TD
></TR
></TABLE
><P
>or use the import function of phpMyAdmin (<A
HREF="#PHPMYADMIN"
>Section 3.3</A
>).</P
><P
>Verification: To show the content of nuke_ephem and verify that the fortunes were inserted, execute the following SQL query:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>select eid,did,mid,yid from nuke_ephem;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Note that in this version, the above problem can be easily solved with the Random Quotes block (see <A
HREF="#PHP-NUKE-RANDOM-QUOTES-BLOCK"
>Section 8.2.8</A
>). However, instead of fortunes, you could just as well have the birthdays of hundreds of people, or the dates and descriptions of thousands of historical events, as in a classic ephemerids context.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MAKE-ENCYCLOPEDIA-INTERNATIONAL"
>27.9. How to make the Encyclopedia international</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-ENCYCLOPEDIA-2"
></A
><P
><B
>Figure 27-8.    Administration panel: Encyclopedia.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/encyclopedia.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Encyclopedia.</P
></DIV
></P
></DIV
></DIV
></P
><P
>If you are using the Encyclopedia module in your own language, which happens to be different from english, you may encounter problems like the following:</P
><P
></P
><UL
><LI
><P
>If you enter a term in your language, it is not recognized, if you enter it in english, it is.</P
></LI
><LI
><P
>Sorting of Encyclopedia terms is O.K. for english terms, but not O.K. for terms in your language.</P
></LI
></UL
><P
>Such problems have their roots in both MySQL and the Encyclopedia code (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=204"
TARGET="_top"
>Encyclopedia Module with terms in non-english language</A
>):</P
><P
>First, make sure that the MySQL server uses the right character encoding. From the MySQL manual on <A
HREF="http://www.mysql.com/doc/en/Character_sets.html"
TARGET="_top"
>The Character Set Used for Data and Sorting</A
>:</P
><A
NAME="AEN20046"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>By default, MySQL uses the ISO-8859-1 (Latin1) character set with sorting according to Swedish/Finnish. This is the character set suitable in the USA and western Europe.</P
><P
>All standard MySQL binaries are compiled with --with-extra-charsets=complex. This will add code to all standard programs to be able to handle latin1 and all multi-byte character sets within the binary. Other character sets will be loaded from a character-set definition file when needed.</P
><P
>The character set determines what characters are allowed in names and how things are sorted by the ORDER BY and GROUP BY clauses of the SELECT statement.</P
><P
>You can change the character set with the --default-character-set option when you start the server. The character sets available depend on the --with-charset=charset and --with-extra-charsets= list-of-charset | complex | all | none options to configure, and the character set configuration files listed in `SHAREDIR/charsets/Index'.</P
></BLOCKQUOTE
><P
>Also, the user comments for the <A
HREF="http://www.mysql.com/doc/en/German_character_set.html"
TARGET="_top"
>German character set in MySQL</A
> suggest that, if you change the default character encoding of mysqldd <EM
>after</EM
> you have already entered some texts with a different character set previously, then you will have to export the database and reimport it, for all texts to be stored with the right character encoding. "REPAIR" or "MYISAMCHECK" (see <A
HREF="#REPAIR-CORRUPT-TABLE"
>Section 26.1</A
>) will not help, even if the documentation wants to make us believe they will. </P
><P
>You can see the character set used in a table by issuing the command</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>myisamchk -dvv table.MYI</PRE
></FONT
></TD
></TR
></TABLE
><P
>If it is not the one you want, then the only thing that helps is to export the DB and reimport it with:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysqldump -u dbuname -h dbhost --all-databases --add-drop-table -p dbname &#62; backup.sql</PRE
></FONT
></TD
></TR
></TABLE
><P
>for the export, and </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mysql -u dbuname -h dbhost -lL -p dbname &#60; backup.sql</PRE
></FONT
></TD
></TR
></TABLE
><P
>for the import, where dbuname, dbhost and dbname are exactly the same as in your config.php (<A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>). Your character encoding should be set to the one that is aproppriate for your language, see the <A
HREF="http://www.mysql.com/doc/en/Charset-map.html"
TARGET="_top"
>Table with Character Sets and Corresponding 4.1 Character Set/Collation Pairs</A
>.</P
><P
>Second, even if you set the character encoding correctly in MySQL, you may still want to change the $alphabet array in the alpha() function of modules/Encyclopedia/index.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$alphabet = array ("A","B","C","D","E","F","G","H","I","J","K","L","M",
"N","O","P","Q","R","S","T","U","V","W","X","Y","Z");</PRE
></FONT
></TD
></TR
></TABLE
><P
>Add the letters of your non-english alphabet there, either by intermixing them with the english ones, or by deleting the english ones alltogether.</P
><P
>The way all this works in PHP-Nuke, is by constructing a database query that finds all entries of the given encyclopedia id having a title which, when transformed to all uppercase, starts "like" the given letter, where the letter can only be one of the entries in the $alphabet array. See for yourself in function terms() of modules/Encyclopedia/index.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$sql = "SELECT tid, title FROM ".$prefix."_encyclopedia_text 
WHERE UPPER(title) LIKE '$ltr%' AND eid='$eid'";</PRE
></FONT
></TD
></TR
></TABLE
><P
>Now, what if you want to mix chinese and greek together? <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
><P
>In such a case, your best bet would be to go with Unicode. But given that <A
HREF="http://www.php.net/manual/en/language.types.string.php"
TARGET="_top"
>PHP's Unicode support is close to non-existent</A
>, you are out of luck. Perhaps this will change in the future. In the meantime, you can prepare yourself with a good reading on <A
HREF="http://www.joelonsoftware.com/articles/Unicode.html"
TARGET="_top"
>The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets</A
> - No Excuses!</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="FIND-USER-NAME"
>27.10. How to find the user name in a module</A
></H2
><P
>If you want to greet the user personally, if registered, from your own home-made module, here is the code that does it in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=13404"
TARGET="_top"
>Getting username in <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> script</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if (!isset($mainfile)) {include("mainfile.php"); }
include ("header.php");
if(!is_array($user)) {
  $user_get = base64_decode($user);
  $user_get = explode(":", $user_get);
  $user_name = "$user_get[1]";
} else {
  $user_name = "$user[1]";
}
if($user_name == "") {$user_name="Anonymous";}
echo "Welcome, $user_name";
include ("footer.php");
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CORRECT-THOUSANDS-OF-USERS-FIELDS"
>27.11. How to correct thousands of users fields</A
></H2
><P
>You have discovered a problem where several (thousands) of your users were added through the edit user screen and ended up with a space (or in some cases 2 spaces) inserted before the e-mail address and other fields. Your bulk e-mails are coming through, but you are not able to effectively search or sort users because of this space. In situations like this, you must be able to correct thousands of users fields, without having to do it manually. Proceed as follows (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=18469"
TARGET="_top"
>exporting nuke_users data</A
>):</P
><P
>Create the following <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> script with a <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=122"
TARGET="_top"
>decent text editor</A
> (<A
HREF="#EDITING-PHP-NUKE-FILES"
>Chapter 11</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
include("mainfile.php");
global $prefix, $db, $dbi;
$sql = "SELECT * FROM ".$prefix."_users ORDER BY user_id ASC";
$result = $db-&#62;sql_query($sql);
while ($row = $db-&#62;sql_fetchrow($result)) {
  $userid = $row['user_id'];
  $oldemail = $row["user_email"];
  $newemail = str_replace (" ","",$oldemail);
  $update = $db-&#62;sql_query("UPDATE ".$prefix.
  "_users set user_email='$newemail' where user_id='$userid'");
}
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Upload it in the same directory where also the mainfile.php of your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> is located (sinse it includes mainfile.php with a relative, as opposed to absolute, path, it will not work if you upload it in a different place!). Point your browser to it - and the script will do the rest for you! <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_cool.png"></SPAN
></P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Backup your database!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Always make a backup of your database before trying such a thing! If it breaks, you keep both pieces.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="SIZE-SELECT-BOXES"
>27.12. How to size the select boxes in a module</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-DOWNLOADS-3"
></A
><P
><B
>Figure 27-9.    Administration panel: Downloads.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/downloads.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Downloads.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Select boxes (those boxes that present you with multiple options to choose from a dropdown list) are in many places around in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. An example is the "Modify a Category" select box in the Downloads administration panel (<A
HREF="#FIG-DOWNLOADS-ADD-DOWNLOAD"
>Figure 27-10</A
>).</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-DOWNLOADS-ADD-DOWNLOAD"
></A
><P
><B
>Figure 27-10.    Downloads: Add download.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/downloads-add-download.png"><DIV
CLASS="CAPTION"
><P
>Downloads: Add download.</P
></DIV
></P
></DIV
></DIV
></P
><P
>What if you wish to change the dimensions of such a select box? The code that outputs the select boxes is in admin/modules/download.php. Just search the code there for "&#60;select" and you will see them all.</P
><P
>However, there is no way to manipulate the width of a select box in HTML, other than entering a "dummy" option that has a certain length: the width of a select box is determined by the width of the longest line of text beside an &#60;option&#62;! Thus, there is no way to set the width of select boxes except by manipulating the text tags associated with &#60;option&#62;s. </P
><P
>This leads us to the following tip (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=345"
TARGET="_top"
>How to Change Width of Modify a Category Drop-Down</A
>):</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Sizing The select box in Downloads</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The very first category that you ever enter in the Downloads Administration Panel should be one with a text long enough to size the box to the desired length. If you choose to enter a "dummy" category  like "Choose your Category here" (see <A
HREF="#FIG-DOWNLOADS-ADD-DOWNLOAD-2"
>Figure 27-11</A
>), bear in mind that it will be displayed along with the "right" ones in the Downloads category list.</P
></TD
></TR
></TABLE
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-DOWNLOADS-ADD-DOWNLOAD-2"
></A
><P
><B
>Figure 27-11.    Downloads: Add download.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/downloads-add-download-2.png"><DIV
CLASS="CAPTION"
><P
>Downloads: Add download.</P
></DIV
></P
></DIV
></DIV
></P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="DATE-TIME"
>27.13. How to deal with date and time</A
></H2
><P
>You will encounter date/time functions all over PHP-Nuke: cookie expiration time, broadcast message duration time, article time, server time. <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> offers many functions that help us with date/time tasks. Here we will cover:</P
><P
></P
><UL
><LI
><P
>How to find the last date of some article, download etc. (<A
HREF="#FIND-LAST-DATE"
>Section 27.13.1</A
>),</P
></LI
><LI
><P
>How to adjust server time (<A
HREF="#ADJUST-SERVER-TIME"
>Section 27.13.2</A
>),</P
></LI
><LI
><P
>How to use the Discordian Calendar (<A
HREF="#DISCORDIAN-CALENDAR"
>Section 27.13.3</A
>). </P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="FIND-LAST-DATE"
>27.13.1. How to find the last date of...</A
></H3
><P
>Dates are stored in many tables of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. The date fields are used to hold the date we</P
><P
></P
><UL
><LI
><P
>entered a banner and whhen that banner expires,</P
></LI
><LI
><P
>wrote a private message,</P
></LI
><LI
><P
>wrote a comment,</P
></LI
><LI
><P
>entered a download link,</P
></LI
><LI
><P
>voted for something (article, download, link etc.),</P
></LI
><LI
><P
>wrote in our journal,</P
></LI
><LI
><P
>inserted a web link,</P
></LI
><LI
><P
>wrote a review, </P
></LI
><LI
><P
>wrote an article</P
></LI
></UL
><P
>and so on. Sometimes, while writing a modification (<A
HREF="#MODIFYING-PHP-NUKE-BLOCKS"
>Chapter 17</A
>, <A
HREF="#MODIFYING-PHP-NUKE-MODULES"
>Chapter 18</A
>), or even a new block (<A
HREF="#BLOCKS"
>Chapter 20</A
>) or module (<A
HREF="#CREATING-MODULES"
>Chapter 21</A
>), you may want to compute the last date that an event like the above has happened.</P
><P
>Whenever you encounter a problem of this type - find the first, the last, the minimum, the maximum, the average...of some attribute that is stored in a table field of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> - think <A
HREF="http://www.mysql.com/doc/en/GROUP-BY-Functions.html"
TARGET="_top"
>aggregate functions</A
>. There is no need to go through a loop of all records in our table, just to find an aggregate function of its fields - the database does it for us: <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_cool.png"></SPAN
></P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>SELECT max( date ) FROM nuke_downloads_downloads;</PRE
></FONT
></TD
></TR
></TABLE
><P
>The above SQL query will compute the maximum date (i.e. the <EM
>last</EM
> date) of all links n the Downloads section. You can use SQL queries like the above in your blocks and modules. To start with, create (with a <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=122"
TARGET="_top"
>decent text editor</A
>, see <A
HREF="#EDITING-PHP-NUKE-FILES"
>Chapter 11</A
>) a file that contains (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=344"
TARGET="_top"
>How to compute the date of the last file added in Downloads</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
require_once("mainfile.php");
global $db;
include("header.php");
$sql = "SELECT max(date) FROM nuke_downloads_downloads";
$result = $db-&#62;sql_query($sql);
$row = $db-&#62;sql_fetchrow($result);
$maxdate = $row["max(date)"];
echo "maxdate = $maxdate";
echo "&#60;br&#62;&#60;br&#62;";
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>name it query.php, upload it in the same dir on your server where also mainfile.php is located, then point your browser to query.php. You should see a line like</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>maxdate = 2003-11-17 15:33:03</PRE
></FONT
></TD
></TR
></TABLE
><P
>This example illustrates the use of the new SQL layer (see <A
HREF="#SQL-SYNTAX"
>Section 28.5</A
>) for the computation of aggregates. Note that the argument of the $row array is a string that mimics exactly the aggregate function in the SELECT statement:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$maxdate = $row["max(date)"];</PRE
></FONT
></TD
></TR
></TABLE
><P
>Here, &#8220;max(date)&#8221; is just a string and has nothing to do with the max() function.</P
><P
>Of course, this example is more a &#8220;proof of concept&#8221;, rather than something you should use in production - on the contrary, you should delete it from server as soon as you don't need it, for security reasons. But it serves as a starting point for more ambitious projects. like the following modification to the Downloads module:</P
><P
>Problem: You have various categories and subcategories defined in the Downloads section. For each category, you want to compute the last date that you entered some download link, either in this category, <EM
>or in any of its subcategories</EM
>.</P
><P
>We have already seen how to find the lst date of the downloads in <EM
>one</EM
> category above. What makes the situation here somewhat more complicated is the fact that we have to do the same computation for every subcategory of a category - however we don't know all those subcategory IDs a priori, we have to search for them.</P
><P
>More specifically, the steps to be taken for every category <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
> $cid are:</P
><P
></P
><UL
><LI
><P
>Compute the maximum date for that $cid.</P
></LI
><LI
><P
>Search the nuke_downloads_categories for all category IDs, whose parent <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
> is $cid. Let's call such a category <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
> $subcid (meaning that it is a subcategory, since it has a parent, $cid).</P
></LI
><LI
><P
>Compute the latest date a download was inserted in that $subcid. Do this for all $subcid's you can find for that $cid.</P
></LI
><LI
><P
>Compute the maximum of all those maximum dates (including the maximum date for $cid). This will be the latest date a download link was inserted in either the category $cid, or any of its subcategories $subcid.</P
></LI
></UL
><P
>The code that implements the above algorithm is (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=344"
TARGET="_top"
>How to compute the date of the last file added in Downloads</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$sql3 = "SELECT max(date) FROM ".$prefix."_downloads_downloads WHERE cid='$cid'"; <A
NAME="MAXDATE1"
><IMG
SRC="images/callouts/1.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
>
$result3 = $db-&#62;sql_query($sql3);
$row3 = $db-&#62;sql_fetchrow($result3);
$maxdate3 = $row3["max(date)"]; <A
NAME="MAXDATE2"
><IMG
SRC="images/callouts/2.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"></A
>
$sql4 = "SELECT cid FROM ".$prefix."_downloads_categories WHERE parentid='$cid'"; <A
NAME="MAXDATE3"
><IMG
SRC="images/callouts/3.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"></A
>
$result4 = $db-&#62;sql_query($sql4);
$maxdate4 = 0;
while ($row4 = $db-&#62;sql_fetchrow($result4)) { <A
NAME="MAXDATE4"
><IMG
SRC="images/callouts/4.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"></A
>
   $subcid = $row4["cid"];
   $sql5 = "SELECT max(date) FROM ".$prefix."_downloads_downloads WHERE cid='$subcid'"; <A
NAME="MAXDATE5"
><IMG
SRC="images/callouts/5.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(5)"></A
>
   $result5 = $db-&#62;sql_query($sql5);
   $row5 = $db-&#62;sql_fetchrow($result5);
   $maxdate5 = $row5["max(date)"]; <A
NAME="MAXDATE6"
><IMG
SRC="images/callouts/6.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(6)"></A
>
   if ($maxdate5 &#62; $maxdate4){
      $maxdate4 = $maxdate5; <A
NAME="MAXDATE7"
><IMG
SRC="images/callouts/7.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(7)"></A
>
   }
}
$maxdate = max($maxdate3, $maxdate4); <A
NAME="MAXDATE8"
><IMG
SRC="images/callouts/8.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(8)"></A
>
if ($maxdate) {
   echo "&#60;font class=\"content\"&#62;Latest Download on $maxdate&#60;/font&#62;&#60;br&#62;"; <A
NAME="MAXDATE9"
><IMG
SRC="images/callouts/9.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(9)"></A
>
}</PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="CALLOUTLIST"
><DL
COMPACT="COMPACT"
><DT
><A
HREF="#MAXDATE1"
><IMG
SRC="images/callouts/1.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
></DT
><DD
>Compute the maximum date for that $cid. The SQL query is the same as the one we used in the simplified example above.
       </DD
><DT
><A
HREF="#MAXDATE2"
><IMG
SRC="images/callouts/2.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"></A
></DT
><DD
>This is the maximum date for the category <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
> $cid. It may or may not be set, depending on whether we entered a download directly under that category at all, i.e. without making use of any of its subcategories. If we did, this is the last date (and time) we did it, otherwise it is 0.
       </DD
><DT
><A
HREF="#MAXDATE3"
><IMG
SRC="images/callouts/3.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"></A
></DT
><DD
>With this SQL query, we select all  subcategories of that category. The subcategories' parentid field will contain the parent category ID, therefore this field must be equal to our $cid.
       </DD
><DT
><A
HREF="#MAXDATE4"
><IMG
SRC="images/callouts/4.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"></A
></DT
><DD
>We enter a loop for every subcategory. Inside the loop, the subcategory will be stored in $subcid and we will compute the maximum date for each subcategory <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
>.
       </DD
><DT
><A
HREF="#MAXDATE5"
><IMG
SRC="images/callouts/5.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(5)"></A
></DT
><DD
>This is the same SQL query we used previously to compute the maximum date for a given <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
>. In this case, the <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
> is that one of the subcategory, i.e. $subcid.  Depending on whether we entered a download under that subcategory  this will either be  the last date (and time) we did so, or just 0.
       </DD
><DT
><A
HREF="#MAXDATE6"
><IMG
SRC="images/callouts/6.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(6)"></A
></DT
><DD
>The maximum date of downloads under the $subcid is stored in $maxdate5.
       </DD
><DT
><A
HREF="#MAXDATE7"
><IMG
SRC="images/callouts/7.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(7)"></A
></DT
><DD
>Since for every subcategory $subcid,  a different maximum date is going to be stored in $maxdate5, we have to compute the maximum of all those maximums. This is stored in $maxdate4. At the end of the loop, $maxdate4 will be the maximum of all dates of all subcategories. Again, this will be some date, or zero.
       </DD
><DT
><A
HREF="#MAXDATE8"
><IMG
SRC="images/callouts/8.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(8)"></A
></DT
><DD
>Finally,  we take the maximum of the maximum date of all subcategories and the maximum date of the category itself. This is the last date we inserted a link, either in the category itself, or in any of its subcategories.
       </DD
><DT
><A
HREF="#MAXDATE9"
><IMG
SRC="images/callouts/9.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(9)"></A
></DT
><DD
>Print some result, if the last date we computed is not 0. It looks as in <A
HREF="#FIG-DOWNLOADS-MAIN-CATEGORIES-MAXDATE"
>Figure 27-12</A
>.
       </DD
></DL
></DIV
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-DOWNLOADS-MAIN-CATEGORIES-MAXDATE"
></A
><P
><B
>Figure 27-12.    Downloads: Main categories with last download date.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/downloads-main-categories-maxdate.png"><DIV
CLASS="CAPTION"
><P
>Downloads: Main categories with last download date.</P
></DIV
></P
></DIV
></DIV
></P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Use JOIN</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>This algorithm would be a perfect example of an application of the SQL JOIN query, since the &#8220;parent-child&#8221; information is kept in a different table, nuke_downloads_categories, while the dates themselves are kept in nuke_downloads_downloads. However, JOINs may not be supported by your version of MySQL, so we took the rather primitive (and usually slower) approach of nested SELECT statements in the code above. If you only have a few categories, subcategories and downloads, JOINs may not be a big deal for you, but the situation changes if you have thousands of them (see <A
HREF="#ENTER-THOUSANDS-OF-DOWNLOAD-LINKS"
>Section 27.6</A
> on how you can enter that many, without subjecting yourself to <A
HREF="http://freshmeat.net/articles/view/407/"
TARGET="_top"
>Repetitive Stress Injury</A
> <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
>). You are encouraged to experiment with JOINs and test if they improve the algorithm's performance!</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="ADJUST-SERVER-TIME"
>27.13.2. How to adjust server time</A
></H3
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-YOUR-INFO-PROFILE-TIMEZONE"
></A
><P
><B
>Figure 27-13.    Your Info profile: Timezone and Date settings.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/your-info-profile-timezone.png"><DIV
CLASS="CAPTION"
><P
>Your Info profile: Timezone and Date settings.</P
></DIV
></P
></DIV
></DIV
></P
><P
>In some cases, perhaps due a misconfiguration of your server, the time shown up in the News stories is wrong. Normally, it should be possible to control it by changing the time settings in either the Preferences of the administration panel, or the user preferences (<A
HREF="#FIG-YOUR-INFO-PROFILE-TIMEZONE"
>Figure 27-13</A
>). However, there will be situations where a quick fix is desirable. </P
><P
>You can offset the time by tweaking the following line in the mainfile.php in the function formatTimeStamp (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=410"
TARGET="_top"
>How to adjust server time in PHP-Nuke</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$datetime = strftime(""._DATESTRING."", mktime($datetime[4],$datetime[5],$datetime[6],
$datetime[2],$datetime[3],$datetime[1]));</PRE
></FONT
></TD
></TR
></TABLE
><P
>For example to add one hour (3600 seconds), you would simply add 3600:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$datetime = strftime(""._DATESTRING."", mktime($datetime[4],$datetime[5],$datetime[6],
$datetime[2],$datetime[3],$datetime[1]) + 3600);</PRE
></FONT
></TD
></TR
></TABLE
><P
>or, to subtract two hours:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$datetime = strftime(""._DATESTRING."", mktime($datetime[4],$datetime[5],$datetime[6],
$datetime[2],$datetime[3],$datetime[1]) - 7200);</PRE
></FONT
></TD
></TR
></TABLE
><P
>A situation that calls for server time modification arises when your server is located in a different timezone than your geographic location - say you are located in Japan, but your hosting company is in Canada (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=410"
TARGET="_top"
>How to adjust server time in PHP-Nuke</A
>). The article on phpbuilder.com <A
HREF="http://phpbuilder.com/columns/ehresman20030911.php3"
TARGET="_top"
>On User-Defined Timezones in PHP</A
> explains the problem in detail. Quoting:</P
><A
NAME="AEN20434"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>PHP's 'mktime' and 'date' functions work well as a pair without the help of any other timestamp manipulation routines, but only if the application in which they are used is concerned solely with display and entry of time in the servers timezone. If an application needs to handle entry from a timezone other than that in which the server is located something more than 'mktime' and 'date' is required.</P
><P
>Two things are required to accomplish this: a location independent format for storing time in the database, and methods to translate to and from that format into the user's local time.</P
></BLOCKQUOTE
><P
>Read the original article for a solution. To apply it to PHP-Nuke, you would need to replace the time functions with the new ones, read the time offset from the user's profile and display the result.</P
><P
>To reflect the new time zone that may be implied by the hardcoded time offset, you would also want to change the _DATESTRING definition in your language file, e.g. language/lang-english.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>define("_DATESTRING","%A, %B %d @ %T %Z");</PRE
></FONT
></TD
></TR
></TABLE
><P
>You can change the "%A, %B %d @ %T %Z" string to whatever you deem appropriate. <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> gives to some placeholders a special meaning:</P
><P
></P
><UL
><LI
><P
>%a - abbreviated weekday name according to the current locale</P
></LI
><LI
><P
>%A - full weekday name according to the current locale</P
></LI
><LI
><P
>%b - abbreviated month name according to the current locale</P
></LI
><LI
><P
>%B - full month name according to the current locale</P
></LI
><LI
><P
>%c - preferred date and time representation for the current locale</P
></LI
><LI
><P
>%C - century number (the year divided by 100 and truncated to an integer, range 00 to 99)</P
></LI
><LI
><P
>%d - day of the month as a decimal number (range 01 to 31)</P
></LI
><LI
><P
>%D - same as %m/%d/%y</P
></LI
><LI
><P
>%e - day of the month as a decimal number, a single digit is preceded by a space (range ' 1' to '31')</P
></LI
><LI
><P
>%g - like %G, but without the century.</P
></LI
><LI
><P
>%G - The 4-digit year corresponding to the ISO week number (see %V). This has the same format and value as %Y, except that if the ISO week number belongs to the previous or next year, that year is used instead.</P
></LI
><LI
><P
>%h - same as %b</P
></LI
><LI
><P
>%H - hour as a decimal number using a 24-hour clock (range 00 to 23)</P
></LI
><LI
><P
>%I - hour as a decimal number using a 12-hour clock (range 01 to 12)</P
></LI
><LI
><P
>%j - day of the year as a decimal number (range 001 to 366)</P
></LI
><LI
><P
>%m - month as a decimal number (range 01 to 12)</P
></LI
><LI
><P
>%M - minute as a decimal number</P
></LI
><LI
><P
>%n - newline character</P
></LI
><LI
><P
>%p - either `am' or `pm' according to the given time value, or the corresponding strings for the current locale</P
></LI
><LI
><P
>%r - time in a.m. and p.m. notation</P
></LI
><LI
><P
>%R - time in 24 hour notation</P
></LI
><LI
><P
>%S - second as a decimal number</P
></LI
><LI
><P
>%t - tab character</P
></LI
><LI
><P
>%T - current time, equal to %H:%M:%S</P
></LI
><LI
><P
>%u - weekday as a decimal number [1,7], with 1 representing Monday</P
></LI
><LI
><P
>%U - week number of the current year as a decimal number, starting with the first Sunday as the first day of the first week</P
></LI
><LI
><P
>%V - The ISO 8601:1988 week number of the current year as a decimal number, range 01 to 53, where week 1 is the first week that has at least 4 days in the current year, and with Monday as the first day of the week. (Use %G or %g for the year component that corresponds to the week number for the specified timestamp.)</P
></LI
><LI
><P
>%W - week number of the current year as a decimal number, starting with the first Monday as the first day of the first week</P
></LI
><LI
><P
>%w - day of the week as a decimal, Sunday being 0</P
></LI
><LI
><P
>%x - preferred date representation for the current locale without the time</P
></LI
><LI
><P
>%X - preferred time representation for the current locale without the date</P
></LI
><LI
><P
>%y - year as a decimal number without a century (range 00 to 99)</P
></LI
><LI
><P
>%Y - year as a decimal number including the century</P
></LI
><LI
><P
>%Z - time zone or name or abbreviation</P
></LI
><LI
><P
>%% - a literal `%' character</P
></LI
></UL
><P
>You can combine them with punctuation or extra words to construct the datetime string of your liking. You are not limited to the above interpretation. For example, you can just delete the %Z, and replace it with EST or whatever you time zone is (if you cannot set it from the preferences, that is). There are some points to bear in mind while experimenting:</P
><P
></P
><UL
><LI
><P
>Given a 'bare number' in seconds, e.g. 143567, strftime() will format this number according to your local timezone. Thus, for Germany, you will get an extra hour, since CET is GMT +1. If you are interested in simply formatting a number to give you hours, minutes and seconds (very quick for showing time values), then you should always use 'gmstrftime' instead, which will not adjust the time for your local timezone. You set the local timezone in the preferences section of the administration panel, or the preferences in the user info panel. Valid timezone codes can (usually) be seen (on Linux, at least) in /usr/share/zoneinfo or /usr/lib/zoneinfo (according to the tzset manpage).</P
></LI
><LI
><P
>The call to mktime</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mktime($datetime[4],$datetime[5],$datetime[6],$datetime[2],$datetime[3],$datetime[1])</PRE
></FONT
></TD
></TR
></TABLE
><P
>means something equivalent to </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>mktime($hour,$minute,$second,$month,$day,$year)</PRE
></FONT
></TD
></TR
></TABLE
><P
>assuming that $hour, $minute etc. are filled with the right values (this is exactly what the datetime array does for us).</P
></LI
></UL
><P
>See the <A
HREF="http://www.php.net/manual/en/function.strftime.php"
TARGET="_top"
>PHP manual page for strftime</A
> for more information and examples about date string formatting.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="DISCORDIAN-CALENDAR"
>27.13.3. The Discordian Calendar</A
></H3
><P
>Date and time functions in <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> are very flexible, but I still have to find a <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> function that converts my date strings to the <A
HREF="http://www.lojban.org/wiki/index.php/Discordian%20Calendar"
TARGET="_top"
>Discordian Calendar</A
>:</P
><A
NAME="AEN20593"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>The Discordian calendar divides the year into five seasons (commonly known as Chaos (la kalsa), Discord (la tolsarxe), Confusion (la cfipu), Bureaucracy (la lujycatni) and the Aftermath (la jalge) ) of 73 days each. Every four years, an extra day (St. Tib's Day / la tib noi vrude) is inserted between Chaos 59 and Chaos 60.</P
><P
>The Discordian calendar defines a week as having five days, named Sweetmorn(la titcer), Boomtime (la bumtem), Pungenday (la pynjdei/cpinydei), Prickle-Prickle (la kilkil) and Setting Orange (after the Five Elements). Chaos 1 is always Sweetmorn, Chaos 2 Boomtime, The Aftermath 73 Setting Orange(la canci narju), etc. St. Tib's Day is none of the five days of the week. </P
><P
>The Discordian calendar's year 0 (notionally the time of the Original Snub) is known in the Gregorian calendar as 1166 BC; alternatively, the Gregorian year 0 (notionally the birth of the Jewish mystic Yeshua ben Yosef) is known as 1166 YOLD in the Discordian calendar. The year known in the Gregorian calendar as 2001 is known as 3167 in the Discordian calendar.</P
></BLOCKQUOTE
><P
>Just in case you wanted to know. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
><P
>How do we output a date string in the Discordian Calendar? If you want to write your own <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> ddate function, you might find the code of the <A
HREF="http://search.cpan.org/author/RBOW/Date-Discordian-1.36/lib/Date/Discordian.pm"
TARGET="_top"
>Perl Date::Discordian module</A
> useful. If the settings in your php.ini allow the execution of system commands (either safe_mode is off, or safe_mode is on and safe_mode_exec_dir contains the directory that holds the ddate executable, see <A
HREF="http://www.php.net/manual/en/features.safe-mode.php#ini.safe-mode"
TARGET="_top"
>safe mode settings</A
>) and you are running off a <SPAN
CLASS="PRODUCTNAME"
>Linux</SPAN
> box, then you can use the output of <A
HREF="http://linuxcommand.sourceforge.net/man_pages/ddate1.html"
TARGET="_top"
>ddate</A
> to construct a discordian date in mainfile.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$datetime = explode("Today is", exec('ddate'));</PRE
></FONT
></TD
></TR
></TABLE
><P
>This will result in something like</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Setting Orange, the 41st day of Bureaucracy in the YOLD 3169</PRE
></FONT
></TD
></TR
></TABLE
><P
>as the value of $datetime displayed in the News posts. More on this confusing topic in <A
HREF="http://www.principiadiscordia.com/"
TARGET="_top"
>Principia Discordia</A
>, the Opiatum Magnum of the Discordian Philosophy, as well as in the <A
HREF="http://www.principiadiscordia.com/phpBB/index.php"
TARGET="_top"
>Discordian Forum</A
> - where Enlightenment meets Confusion (TM)...</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="DEAL-WITH-QUOTES-IN-SITENAME"
>27.14. How to deal with quotes in the site's name</A
></H2
><P
>What if O'Reilly decided to use <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> for an "O'Reilly  website"? He might  find out the single quote in his name made it impossible to save the site's name in the Preferences of the administration panel (see <A
HREF="#PREFERENCES"
>Section 7.2</A
>). <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
> </P
><P
>Single quotes ('), double quotes (") and backslashes (\) need to be quoted in strings that will be entered in a database. This is done by the <A
HREF="http://www.php.net/manual/en/function.addslashes.php"
TARGET="_top"
>PHP addslashes function</A
>. Conversely, the <A
HREF="http://www.php.net/manual/en/function.stripslashes.php"
TARGET="_top"
>PHP stripslashes function</A
> returns a string with backslashes stripped off (\' becomes ' and so on). To enable the use of single quotes in the site's name, do the following:</P
><P
>Add the line</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$sitename = stripslashes($sitename);</PRE
></FONT
></TD
></TR
></TABLE
><P
>in mainfile.php, after the line that computes $sitename. According to your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> version, this line may be </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$sitename = $row[sitename];</PRE
></FONT
></TD
></TR
></TABLE
><P
>(for version 6.8) or </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>list($sitename, $nukeurl, $site_logo, $slogan, $startdate, $adminmail, $anonpost, $Default_Theme, $foot1, $foot2, $foot3, $commentlimit, $anonymous, $minpass, 
$pollcomm, $articlecomm, $broadcast_msg, $my_headlines, $top, $storyhome, 
$user_news, $oldnum, $ultramode, $banners, $backend_title, $backend_language, 
$language, $locale, $multilingual, $useflags, $notify, $notify_email, 
$notify_subject, $notify_message, $notify_from, $footermsgtxt, $email_send, 
$attachmentdir, $attachments, $attachments_view, $download_dir, $defaultpopserver,
$singleaccount, $singleaccountname, $numaccounts, $imgpath, $filter_forward, 
$moderate, $admingraphic, $httpref, $httprefmax, $CensorMode, $CensorReplace, 
$copyright, $Version_Num) = sql_fetch_row($result, $dbi);</PRE
></FONT
></TD
></TR
></TABLE
><P
>(for earlier 6.x versions). Repeat this for the file admin/modules/settings.php. While you are in this file, search for the line</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>.""._SITENAME.":&#60;/td&#62;&#60;td&#62;&#60;input type='text' name='xsitename' 
value='$sitename' size='40' maxlength='255'&#62;"</PRE
></FONT
></TD
></TR
></TABLE
><P
>and change it to</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>.""._SITENAME.":&#60;/td&#62;&#60;td&#62;&#60;input type=\"text\" name=\"xsitename\" 
value=\"$sitename\" size=\"40\" maxlength=\"255\"&#62;"</PRE
></FONT
></TD
></TR
></TABLE
><P
>(we basically replace single quotes with escaped double ones in the above line, so that the single quote(s) in $sitename don't mess up the code). Finally , while still in admin/modules/settings.php, find the line</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>global $prefix, $dbi;</PRE
></FONT
></TD
></TR
></TABLE
><P
>in function ConfigSave and add the following line after it:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$xsitename = addslashes($xsitename);</PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="FLASH-PHP-NUKE-NEWS"
>27.15. How to embed a Flash object in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> News</A
></H2
><P
>To embed a Flash object in a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> news article, you have to use HTML code like the following - you must have administrator rights, or the whole code will be wiped out after submission.</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/
swflash.cab#version=6,0,29,0" width="600" height="400"&#62;
&#60;param name="movie" value="yourmovie.swf"&#62;
&#60;param name=quality value=high&#62;
&#60;embed src="http://www.yoursite.com/yourmovie.swf" quality=high
pluginspage="http://www.macromedia.com/shockwave/download/index.cgi
?P1_Prod_Version=ShockwaveFlash"
type="application/x-shockwave-flash" width="600" height="400"&#62;&#60;/embed&#62;
&#60;/object&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Adapt the file name and dimensions to your situation.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="BACKUP-MYSQL-USING-BROWSER"
>27.16. How to backup your MySQL database using only the browser</A
></H2
><P
>You want to do regular dumps of your MySQL database, but you are lazy and would like to automate the task.</P
><P
>If your <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> installation permits execution of commands through system() (e.g. you are not running in safe mode, or, if you are, safe_mode_exec_dir contains all the commands you need), you can trigger a backup of your MySQL database, just by pointing your browser to the following script (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=49"
TARGET="_top"
>How to backup your MySQL database using only the browser</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
  // Enter your MySQL access data
  $host= 'dbhost';
  $user= 'dbuser';               
  $pass= 'dbpassword';
  $db=   'db';
  $backupdir = 'backups';
  // Compute day, month, year, hour and min.
  $today = getdate();
  $day = $today[mday];
  if ($day &#60; 10) {
      $day = "0$day";
  }
  $month = $today[mon];
  if ($month &#60; 10) {
      $month = "0$month";
  }
  $year = $today[year];
  $hour = $today[hours];
  $min = $today[minutes];
  $sec = "00";
  // Execute mysqldump command.
  // It will produce a file named $db-$year$month$day-$hour$min.gz
  // under $DOCUMENT_ROOT/$backupdir
  system(sprintf(
    'mysqldump --opt -h %s -u %s -p%s %s | gzip &#62; %s/%s/%s-%s%s%s-%s%s.gz',                                             
    $host,
    $user,
    $pass,
    $db,
    getenv('DOCUMENT_ROOT'),
    $backupdir,
    $db,
    $year,
    $month,
    $day,
    $hour,
    $min
  ));
  echo '+DONE';
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Upload it to your backup directory (see code) and just reload it with your browser each time you want to do a backup.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Use cron on the client, if it is not available on the server</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you are not allowed cron access on the web server (to start mysqldump directly there), you can set up your own cron job (on your home system!) to periodically call the above script.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Poor man's cron</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you don't have cron, or a similar functionality on your system, you can still modify the above script to inform the browser to reget the file every xxx hours. A poor man's cron, so to say.
<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> </P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Protect your backup directory!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Of course, the backup directory should at least be protected with a .htaccess file.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Beware of the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> execution limit!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If your <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> has some timeout limit set (often 30 sec), you will not be able to dump really large databases (larger than, say, 2-5MB) through this method. It is the same limitation, as with the phpMyAdmin DB backup option. The only alternative you have in this case is telnet or ssh access, see  <A
HREF="#RESTORE-LARGE-BACKUP"
>Section 26.2.2</A
>.</P
></TD
></TR
></TABLE
></DIV
><P
>Note that phpMyAdmin (<A
HREF="#PHPMYADMIN"
>Section 3.3</A
>) also offers an excellent backup capability through the browser, with many options, like compression, structure and data backups, various backup file formats etc. However, you cannot automate backup creation with phpMyAdmin.</P
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="TOOLS"
></A
>Chapter 28. Programmer's tools </H1
><DIV
CLASS="SECT1"
><H2
CLASS="SECT1"
><A
NAME="DATABASE-TABLES"
>28.1. The database tables</A
></H2
><P
>Here are the tables that comprise the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> database and what they serve for (FIXME: these are still from a very old version! Update! Data model!):</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>nuke_access:</DT
><DD
><P
>Defines various users profiles.</P
></DD
><DT
>nuke_authors:</DT
><DD
><P
>Defines the administrators and their access levels.</P
></DD
><DT
>nuke_autonews:</DT
><DD
><P
>Manages automatic news.</P
></DD
><DT
>nuke_banlist:</DT
><DD
><P
>Manages banned users (those excluded from viewing the site).</P
></DD
><DT
>nuke_banner:</DT
><DD
><P
>Manages banner campaigns, impressions and clicks.</P
></DD
><DT
>nuke_bannerclient:</DT
><DD
><P
>Manages the banner campaign clients.</P
></DD
><DT
>nuke_bbtopics:</DT
><DD
><P
>Manages the BBCode.</P
></DD
><DT
>nuke_blocks:</DT
><DD
><P
>List of created blocks.</P
></DD
><DT
>nuke_catagories:</DT
><DD
><P
>List of the categories.</P
></DD
><DT
>nuke_comments:</DT
><DD
><P
>Manages comments and answers.</P
></DD
><DT
>nuke_config:</DT
><DD
><P
>Manages some configurations like the possibility to mail in HTML etc.</P
></DD
><DT
>nuke_counter:</DT
><DD
><P
>Manages statistics.</P
></DD
><DT
>nuke_disallow:</DT
><DD
><P
>Blocks a user.</P
></DD
><DT
>nuke_downloads_categories:</DT
><DD
><P
>Manages categories and subcategories for the download area.</P
></DD
><DT
>nuke_downloads_downloads:</DT
><DD
><P
>Manages the files present in the download area.</P
></DD
><DT
>nuke_downloads_editorials:</DT
><DD
><P
>Manages the comments on the files.</P
></DD
><DT
>nuke_downloads_modrequest:</DT
><DD
><P
>Manages the reporting of broken links.</P
></DD
><DT
>nuke_downloads_newdownload:</DT
><DD
><P
>Manages the insertion of files from third parties.</P
></DD
><DT
>nuke_downloads_moddata:</DT
><DD
><P
>Manages voting on files.</P
></DD
><DT
>nuke_encyclopedya:</DT
><DD
><P
>Lists the various encyclopedias.</P
></DD
><DT
>nuke_encyclopedia_text:</DT
><DD
><P
>Lists encyclopedia entries.</P
></DD
><DT
>nuke_ephem:</DT
><DD
><P
>Manages recurrent events.</P
></DD
><DT
>nuke_faqanswer:</DT
><DD
><P
>Archives the FAQ answers.</P
></DD
><DT
>nuke_faqcategories:</DT
><DD
><P
>Manages the categories in which the FAQ are subdivided.</P
></DD
><DT
>nuke_forum_access:</DT
><DD
><P
>Records the last access of the users.</P
></DD
><DT
>nuke_forum_mods:</DT
><DD
><P
>Defines moderators of the forums.</P
></DD
><DT
>nuke_forums:</DT
><DD
><P
>Defines the active forums.</P
></DD
><DT
>nuke_forumtopics:</DT
><DD
><P
>Defines forum topics.</P
></DD
><DT
>nuke_headlines:</DT
><DD
><P
>Defines the sources from which to take news with the blocks.</P
></DD
><DT
>nuke_links_categories:</DT
><DD
><P
>Defines the categories in which the links are subdivided. </P
></DD
><DT
>nuke_links_editorials:</DT
><DD
><P
>Manages the judgments on the links.</P
></DD
><DT
>nuke_links_links:</DT
><DD
><P
>Archives the links.</P
></DD
><DT
>nuke_links_modrequest:</DT
><DD
><P
>Archives the messages related to the link (broken link etc.).</P
></DD
><DT
>nuke_links_newlink:</DT
><DD
><P
>Archives links suggested for insertion.</P
></DD
><DT
>nuke_links_votedata:</DT
><DD
><P
>Archives link votes.</P
></DD
><DT
>nuke_main:</DT
><DD
><P
>Defines which is the main module that must be included in index.php.</P
></DD
><DT
>nuke_message:</DT
><DD
><P
>Manages the home page messages.</P
></DD
><DT
>nuke_modules:</DT
><DD
><P
>Lists and manages the installed modules.</P
></DD
><DT
>nuke_pages:</DT
><DD
><P
> </P
></DD
><DT
>nuke_pages_categories:</DT
><DD
><P
> </P
></DD
><DT
>nuke_poll_check:</DT
><DD
><P
>List of the IP addresses that have voted in last 24 hours.</P
></DD
><DT
>nuke_poll_data:</DT
><DD
><P
>List of survey answers.</P
></DD
><DT
>nuke_poll_desc:</DT
><DD
><P
>List of present and past surveys.</P
></DD
><DT
>nuke_pollcomments:</DT
><DD
><P
>Comment to the survey.</P
></DD
><DT
>nuke_posts:</DT
><DD
><P
>Main titles of forum posts</P
></DD
><DT
>nuke_posts_text:</DT
><DD
><P
> </P
></DD
><DT
>nuke_priv_msgs:</DT
><DD
><P
>Manages the module private messages.</P
></DD
><DT
>nuke_queue:</DT
><DD
><P
>Lists the texts waiting for publication</P
></DD
><DT
>nuke_quotes:</DT
><DD
><P
> </P
></DD
><DT
>nuke_ranks:</DT
><DD
><P
>Registers the votes for the news</P
></DD
><DT
>nuke_referer:</DT
><DD
><P
>Lists where the last x rows come from</P
></DD
><DT
>nuke_related:</DT
><DD
><P
>Associates eventual links to the topics.</P
></DD
><DT
>nuke_reviews:</DT
><DD
><P
> </P
></DD
><DT
>nuke_reviews_add</DT
><DD
><P
> </P
></DD
><DT
>nuke_reviews_comments:</DT
><DD
><P
>Comments to the reviews.</P
></DD
><DT
>nuke_reviews_main:</DT
><DD
><P
>main table of the reviews.</P
></DD
><DT
>nuke_seccont:</DT
><DD
><P
>Lists the section texts.</P
></DD
><DT
>nuke_sections:</DT
><DD
><P
>Lists the active sections.</P
></DD
><DT
>nuke_session:</DT
><DD
><P
>Lists the active sessions.</P
></DD
><DT
>nuke_smiles:</DT
><DD
><P
>Lists the supported emoticons.</P
></DD
><DT
>nuke_stats_date:</DT
><DD
><P
>Statistics module.</P
></DD
><DT
>nuke_stats_hour:</DT
><DD
><P
>Statistics module...</P
></DD
><DT
>nuke_stats_month:</DT
><DD
><P
>Statistics module.</P
></DD
><DT
>nuke_stats_year:</DT
><DD
><P
>Statistics module.</P
></DD
><DT
>nuke_stories:</DT
><DD
><P
>Texts of the news.</P
></DD
><DT
>nuke_stories_cat:</DT
><DD
><P
>Categories of the news.</P
></DD
><DT
>nuke_topics:</DT
><DD
><P
>List of topics.</P
></DD
><DT
>nuke_users:</DT
><DD
><P
>List of users.</P
></DD
><DT
>nuke_words:</DT
><DD
><P
>Words to censure.</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="HTML-SYNTAX"
>28.2. The syntax of HTML code</A
></H2
><P
>HTML is the language that is used to construct web pages. It is somewhat obsolete, as it is going to be replaced by XHTML. In this section we will have a look at the HTML code we need in order to </P
><P
></P
><UL
><LI
><P
>format text,</P
></LI
><LI
><P
>create links, </P
></LI
><LI
><P
>insert images,</P
></LI
><LI
><P
>create tables.</P
></LI
></UL
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="HTML-FORMAT-TEXT"
>28.2.1. How to format text in HTML</A
></H3
><P
>To format a text in bold, you can use the &#60;b&#62; tag (deprecated in XHTML, use CSS instead, see <A
HREF="#CHANGE-FONT-SIZE-PHP-NUKE"
>Section 14.12</A
>, <A
HREF="#CSS-SYNTAX"
>Section 28.3</A
>!). We recall that in HTML in most cases you have to open and close the tag. Thus, the code</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;b&#62;Hello&#60;/b&#62; World</PRE
></FONT
></TD
></TR
></TABLE
><P
>means that the word &#8220;Hello&#8221; shall be in bold face, while the rest of the sentence will be in normal face, since the &#60;b&#62; tag was closed with &#60;/b&#62; immediately after the word &#8220;Hello&#8221;. Other formatting tags are:</P
><P
></P
><UL
><LI
><P
>&#60;u&#62;&#60;/u&#62; (for underlining a phrase)</P
></LI
><LI
><P
>&#60;i&#62;&#60;/i&#62; (for italicizing, i.e. render a phrase with cursive face)</P
></LI
></UL
><P
>But how can we change not only the face, but also the colour, the size and the font? For this, the &#60;font&#62; tag comes to our help (also deprecated in XHTML, use CSS instead, see <A
HREF="#CHANGE-FONT-SIZE-PHP-NUKE"
>Section 14.12</A
>, <A
HREF="#CSS-SYNTAX"
>Section 28.3</A
>!). Let's take a concrete example and analyze it:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;font color="#FF0000" size="2"&#62;Hello World&#60;/font&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>The code assigns some values to attributes of the font tag, that will apply to the &#8220;Hello World&#8221; text:</P
><P
></P
><UL
><LI
><P
>color="#FF0000": assigns the red colour to the text. Why red? Because only the first two hex numbers are set (to FF, which is the hexadecimal notation for 255), meaning that only the red component is active (there are three components, red, grren and blue, each one taking up two hex digits in the colur notation).</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="90%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Colour wheels</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>A  useful tool in exploring the visible spectrum in HTML is the <A
HREF="http://www.karakas-online.de/myServices/colorwheel.html"
TARGET="_top"
>colour wheel</A
>.  Just hover over the wheel with your mouse to view 4096 colors in their web safe, web smart and unsafe versions.<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_cool.png"></SPAN
></P
><P
>You can also use the <A
HREF="http://www.karakas-online.de/popups/"
TARGET="_top"
>colour popups of the Tag-o-matic</A
> to show all 216 web-safe colours in a virtual colour card.</P
></TD
></TR
></TABLE
></DIV
></LI
><LI
><P
>size = 2: assigns the size 2 to the characters of the &#8220;Hello World&#8221; string.</P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="HTML-CREATE-LINK"
>28.2.2. How to create a link in HTML</A
></H3
><P
>We recall that a link in HTML is always composed of two parts, the clickable part (the link text) and the URL (Uniform Resource Locator, the destination site, page or resource). Here is an example:</P
><P
></P
><UL
><LI
><P
>Clickable part (link text): <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> HOWTO.</P
></LI
><LI
><P
>URL: http://www.karakas-online.de/EN-Book/</P
></LI
></UL
><P
>The HTML code for this link is:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;a href=&#8221;http://www.karakas-online.de/EN-Book/&#8221;&#62;PHP-Nuke HOWTO&#60;/a&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>which will look like: <A
HREF="http://www.karakas-online.de/EN-Book/"
TARGET="_top"
>PHP-Nuke HOWTO</A
>. As you can see, the &#60;a&#62; tag is closed with &#60;/a&#62;.</P
><P
>Some rules for creating links:</P
><P
></P
><UL
><LI
><P
>If the link points to an external site, the address must always start with &#8220;http://&#8221;.</P
></LI
><LI
><P
>If the link points to an internal page in the same directory as the page setting the link, it suffices to give only the name of the file. This will be a little faster, as we save a DNS query on the site's fully quallified domain name. It also saves you administration headaches, should you choose to move your files under a different directory: in case of absolute paths, you would have to change all of them in your code. Finally, if you use relative paths, you can still navigate around your pages locally, on your development server, without having to upload all files on the web server first. See also <A
HREF="http://www.compugoddess.com/relvsabs.htm"
TARGET="_top"
>Relative vs. Absolute Links</A
> and <A
HREF="http://www.webdiner.com/webadv/begin/paths.htm"
TARGET="_top"
>About Paths</A
>.</P
></LI
><LI
><P
>We can pass parameters (the so-called &#8220;URL parameters&#8221;) on the link. <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> make heavy use of this feature: all <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> modules are called through a link that passes the module's name to the modules.php script, as in the following example for the News module:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>http://www.yousite.com/modules.php?name=News</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>The link text can be treated just as any other text in HTML, assigning it colour and size, in the same way as we do it for normal text (see <A
HREF="#HTML-FORMAT-TEXT"
>Section 28.2.1</A
>).</P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="HTML-INSERT-IMAGE"
>28.2.3. How to insert an image in HTML</A
></H3
><P
>To insert an image in an HTML file (or <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> news article (see <A
HREF="#PREINSTALLED-MODULES"
>Section 6.1</A
>), or <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> theme (see <A
HREF="#TOPIC-STRUCTURE"
>Section 14.1</A
>)), we use the &#60;img&#62; tag. For example, to insert an image called photo.png, located in the same directory as the file that is going to show it, we write:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;img src="photo.png" alt=&#8221;description of the photo&#8221;&#62;&#60;/img&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>The alt tag serves as an alternative, textual description of the image. This description is shown when we hover with the mouse over the image, but it is also used by speech browsers like <A
HREF="http://www.freedomscientific.com/fs_products/software_jaws.asp"
TARGET="_top"
>JAWS</A
>, or text-only browsers like <A
HREF="http://lynx.isc.org"
TARGET="_top"
>Lynx</A
>, instead of the image file, to convey an idea of the image object to people with disabilities, see day 23 of the 30-day <A
HREF="http://diveintoaccessibility.org"
TARGET="_top"
>Dive Into Accessibility</A
> tutorial on <A
HREF="http://diveintoaccessibility.org/day_23_providing_text_equivalents_for_images.html"
TARGET="_top"
>Providing text equivalents for images</A
>.</P
><P
>In case your image is included in a different folder, say images/, as is often the case with PHP-Nuke, the code looks like:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;img src="images/photo.png" alt=&#8221;description of the photo&#8221;&#62;&#60;/img&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Note that we only need to specify a relative path to the image file, relative to the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> root directory, that is. The reason for this is that in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> all articles, stories etc. are shown through the modules.php file (which is passed the right module name through an URL parameter, as shown in <A
HREF="#HTML-CREATE-LINK"
>Section 28.2.2</A
>), which is located in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> root directory (by the way, this is the same directory where the config.php file (<A
HREF="#CONFIG-PHP-FILE"
>Section 3.7</A
>) is also located).</P
><P
>Also note that, to remain compatible with the HTML standards, you have to include the values of the attributes, like src or alt, in double quotes, as in the examples above. You can check your site for HTML standards compliance with the <A
HREF="http://www.karakas-online.de/myServices/w3c-html-validator.html"
TARGET="_top"
>W3C HTML validator</A
>.</P
><P
>You can also make the image clickable, combining the two techniques of creating a link (see <A
HREF="#HTML-CREATE-LINK"
>Section 28.2.2</A
>) and inserting an image:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;a href=&#8221;http://www.karakas-online.de/EN-Book/&#8221;&#62;
&#60;img src=&#8221; http://www.karakas-online.de/EN-Book/images/nuke.png&#8221; 
alt=&#8221;PHP-Nuke HOWTO&#8221;&#62;&#60;/img&#62;&#60;/a&#62;</PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="HTML-CREATE-TABLE"
>28.2.4. How to create a table in HTML</A
></H3
><P
>The important HTML tags for tables are:</P
><P
></P
><UL
><LI
><P
>&#60;table&#62;&#60;/table&#62; (opens and closes a table)</P
></LI
><LI
><P
>&#60;tr&#62;&#60;/tr&#62; (opens and closes a table row)</P
></LI
><LI
><P
>&#60;td&#62;&#60;td&#62; (opens and closes a table cell, inside a column)</P
></LI
></UL
><P
>A table with one row and one column will be constructed with the code:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;table width="100%" border="0"&#62;
  &#60;tr&#62;
    &#60;td&#62;&#60;/td&#62;
  &#60;/tr&#62;
&#60;/table&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Here you can also see how to use some attributes, like "width", which can attain values in pixels or percent, and "border", which, if set to "0" as in the above example, will suppress the drawing of borders around table cells, thus making the structure of the table invisible to the reader.</P
><P
>A table with two rows and two columns can be created with the code:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;table width="500" border="0"&#62;
  &#60;tr&#62;
    &#60;td width="200"&#62;&#60;/td&#62;
    &#60;td&#62;&#60;/td&#62;
  &#60;/tr&#62;
  &#60;tr&#62;
    &#60;td width="200"&#62;&#60;/td&#62;
    &#60;td&#62;&#60;/td&#62;
  &#60;/tr&#62;
&#60;/table&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>As you can see in this example, the table has the following properties:</P
><P
></P
><UL
><LI
><P
>two rows,</P
></LI
><LI
><P
>two columns,</P
></LI
><LI
><P
>fixed total table width of 500 pixels,</P
></LI
><LI
><P
>fixed width of the left column: 200 pixels.</P
></LI
></UL
><P
>Content is inserted in the columns, while the rows have a higher priority and are inserted first. For example, if we wanted to insert the text &#8220;PHP-Nuke&#8221; in the first line of the left column of the above table, the code would look like this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;table width="500" border="0"&#62;
  &#60;tr&#62;
    &#60;td width="200"&#62;PHP-Nuke&#60;/td&#62;
    &#60;td&#62;&#60;/td&#62;
  &#60;/tr&#62;
  &#60;tr&#62;
    &#60;td width="200"&#62;&#60;/td&#62;
    &#60;td&#62;&#60;/td&#62;
  &#60;/tr&#62;
&#60;/table&#62;</PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>HTML layout: tables was yesterday, today is CSS!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Tables are meant to hold tabular data. They should not be used for layout purposes, even though they are being widely misused for this purpose, also in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>. The correct way to position your data today, is not through tables, but through CSS (see <A
HREF="#CSS-SYNTAX"
>Section 28.3</A
> and <A
HREF="http://www.sitepoint.com/books/css1/"
TARGET="_top"
>Designing Without Tables</A
>). If you decide to use tables, you should be <A
HREF="http://diveintoaccessibility.org/day_19_using_real_table_headers.html"
TARGET="_top"
>using real table headers</A
> and <A
HREF="http://diveintoaccessibility.org/day_20_providing_a_summary_for_tables.html"
TARGET="_top"
>providing a table summary</A
>, for accessibility reasons.</P
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="CSS-SYNTAX"
>28.3. The syntax of CSS</A
></H2
><P
>Cascading Style Sheets (CSS) are files that contain presentational information. They are associated wit an HTML or XHTML file and help us separate presentation from content, thus rendering the management of our pages much easier and our code much cleaner.</P
><P
>CSS files work as follows: they contain a series of rules, to every rule is appended a group of formatting instructions. The formatting instructions are only applied by the client's browser to those parts of the HTML page specified by the preceding rule. With a CSS we can do everything that we could do with the deprecated HTML tags, like setting the font, the font size or colour (&#60;font&#62; tag), the font face (bold with the &#60;b&#62; tag or italics with the &#60;i&#62; tag), link colour and much more that was not previously possible.</P
><P
>In the following we will examine some examples. In PHP-Nuke, the CSS file is contained in a file called style.css, located in the style folder of the corresponding theme. For the NukeNews theme, for example, the CSS file is themes/NukeNews/style/style.css.</P
><P
>For the HTML &#60;body&#62; tag, we can set up its attributes in the CSS as follows:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>body {background: #FFF; color:#003366; margin-left: 0; margin-top: 0;}</PRE
></FONT
></TD
></TR
></TABLE
><P
>This rule specifies a few attributes that will be valid through the whole HTML body (unless overriden by a more specific rule):</P
><P
></P
><UL
><LI
><P
>background: assigns a background colour to the page.</P
></LI
><LI
><P
>color: defines the text colour.</P
></LI
><LI
><P
>margin-left and margin-top: define the space between the margin of the page and the margin of the content.</P
></LI
></UL
><P
>The concepts of margin, border and padding follow a page model that is described in W3C's working draft <A
HREF="http://www.w3.org/TR/2003/WD-css3-page-20031218/"
TARGET="_top"
>CSS3 Paged Media Module</A
>, version of Dec. 18th 2003. <A
HREF="#FIG-PAGE-AREA-MODEL"
>Figure 28-1</A
>, taken from this document (Copyright © 2003 <A
HREF="http://www.w3.org"
TARGET="_top"
>W3C</A
> (<A
HREF="http://www.lcs.mit.edu"
TARGET="_top"
>MIT</A
>, <A
HREF="http://www.ercim.org"
TARGET="_top"
>ERCIM</A
>, <A
HREF="http://www.keio.ac.jp"
TARGET="_top"
>Keio</A
>), All Rights Reserved) illustrates the various geometric notions of this page model. Note that the <A
HREF="http://www.w3.org/TR/2003/WD-xsl11-20031217/#area_model"
TARGET="_top"
>XSL area model</A
> is deliberately very similar to the CSS one.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PAGE-AREA-MODEL"
></A
><P
><B
>Figure 28-1.    CSS page area model.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/page-area-model.png"><DIV
CLASS="CAPTION"
><P
>CSS page area model.</P
></DIV
></P
></DIV
></DIV
></P
><P
>CSS allows for the creation of whole sets of rules that will be applied to the parts of the page those rules specify. Such a rule could for example look like:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>.headercoldx {
  vertical-align: top;
  width:500px;
  background-image: url(http://yoursite.com/themes/sometheme/images/bgheader.png);
  background-color:#ffffff;
  font: 11px arial, verdana, helvetica;
  color: #000
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>The .headercoldx part is a so-called <A
HREF="http://www.w3.org/TR/REC-CSS2/selector.html"
TARGET="_top"
>CSS Selector</A
>, specifically a class selector. It selects (applies to) HTML elements of the class &#8220;headercoldx&#8221;. If we had an element name in front of the dot, the selector would apply only to that element and only if it were of the headercoldx class. Since in the above example there is no element name in front of the dot, the formatting instructions that follow are applied to <EM
>all</EM
> HTML elements of the headercoldx class (see also <A
HREF="http://www.w3.org/TR/REC-CSS2/selector.html#class-html"
TARGET="_top"
>Class selectors</A
>). Thus, all HTML elements that are of class headercoldx will </P
><P
></P
><UL
><LI
><P
>be vertically aligned to the top of the box that contains them,</P
></LI
><LI
><P
>have a width of 500 pixels,</P
></LI
><LI
><P
>display bgheader.png as background image,</P
></LI
><LI
><P
>use white as the background colour,</P
></LI
><LI
><P
>use a 11 pixel font, preferably arial, or, if arial is not available, verdana, or, if verdana is also missing, helvetica,</P
></LI
><LI
><P
>use black for the text colour.</P
></LI
></UL
><P
>What remains to be seen, is how to mark HTML elements as being members of a certain class, like headercoldx above. This is easily done through the use of the class attribute, as the following example demonstrates for the table we constructed in <A
HREF="#HTML-CREATE-TABLE"
>Section 28.2.4</A
>:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;table class="headercoldx"&#62;
  &#60;tr&#62;
    &#60;td width="200"&#62;PHP-Nuke&#60;/td&#62;
    &#60;td&#62;&#60;/td&#62;
  &#60;/tr&#62;
  &#60;tr&#62;
    &#60;td width="200"&#62;&#60;/td&#62;
    &#60;td&#62;&#60;/td&#62;
  &#60;/tr&#62;
&#60;/table&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>As you can see, all attributes of the table tag have been removed and replaced by the class attribute. The formatting information that was contained in the replaced attributes is now contained in the group of formatting instructions that follows the class selector for the headercoldx class.</P
><P
>In the following example, a different selector is used, one that selects the <A
HREF="http://www.w3.org/TR/REC-CSS2/selector.html#link-pseudo-classes"
TARGET="_top"
>pseudo-class :link</A
> and one that selects the <A
HREF="http://www.w3.org/TR/REC-CSS2/selector.html#dynamic-pseudo-classes"
TARGET="_top"
>dynamic pseudo-class :hover</A
>:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>A:link {BACKGROUND: none; COLOR: #003366; FONT-SIZE: 11px; FONTFAMILY:
Verdana, Helvetica; TEXT-DECORATION: underline}
A:hover {color:003366; background-color:#FFCC33; FONT-SIZE: 11px; FONTFAMILY:
Verdana, Helvetica; TEXT-DECORATION: underline }</PRE
></FONT
></TD
></TR
></TABLE
><P
>The first rule specifies the formatting of a link, the second overrides the first one for the case that the user hovers with the mouse over the link.</P
><P
>Conflicting rules are intrinsic to the CSS mechanism. To find the value for an element/property combination, the following algorithm must be followed (see <A
HREF="http://www.ezdefinition.com/eng/catalog/pages/comp/870/870.html"
TARGET="_top"
>The cascade</A
>):</P
><P
></P
><OL
TYPE="1"
><LI
><P
>Find all declarations that apply to the element/property in question. Declarations apply if the selector matches the element in question. If no declarations apply, the inherited value is used. If there is no inherited value (this is the case for the 'HTML' element and for properties that do not inherit), the initial value is used. </P
></LI
><LI
><P
>Sort the declarations by explicit weight: declarations marked '!important' carry more weight than unmarked (normal) declarations.</P
></LI
><LI
><P
>Sort by origin: the author's style sheets override the reader's style sheet which override the UA's default values. An imported style sheet has the same origin as the style sheet from which it is imported.</P
></LI
><LI
><P
>Sort by specificity of selector: more specific selectors will override more general ones. To find the specificity, count the number of <ACRONYM
CLASS="ACRONYM"
>ID</ACRONYM
> attributes in the selector (a), the number of CLASS attributes in the selector (b), and the number of tag names in the selector (c). Concatenating the three numbers (in a number system with a large base) gives the specificity. Some examples:</P
><P
></P
><UL
><LI
><P
>LI {...} /* a=0 b=0 c=1 -&#62; specificity = 1 */</P
></LI
><LI
><P
>UL LI {...} /* a=0 b=0 c=2 -&#62; specificity = 2 */</P
></LI
><LI
><P
>UL OL LI {...} /* a=0 b=0 c=3 -&#62; specificity = 3 */</P
></LI
><LI
><P
>LI.red {...} /* a=0 b=1 c=1 -&#62; specificity = 11 */ </P
></LI
><LI
><P
>UL OL LI.red {...} /* a=0 b=1 c=3 -&#62; specificity = 13 */ </P
></LI
><LI
><P
>#x34y {...} /* a=1 b=0 c=0 -&#62; specificity = 100 */ </P
></LI
></UL
><P
>Pseudo-elements and pseudo-classes are counted as normal elements and classes, respectively.</P
></LI
><LI
><P
>Sort by order specified: if two rules have the same weight, the latter specified wins. Rules in imported style sheets are considered to be before any rules in the style sheet itself. </P
></LI
></OL
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>CSS of this HOWTO</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>This HOWTO uses a <A
HREF="ck-style.css"
TARGET="_top"
>special CSS file</A
> (well, at least in its original version that you can always find in <A
HREF="http://www.karakas-online.de/EN-Book/"
TARGET="_top"
>PHP-Nuke HOWTO</A
>), tailored to the classes created by the DocBook stylesheets, which are used for its creation (see <A
HREF="#BOOK-BEHIND-BOOK"
>Section 1.8</A
>). If you like the formatting, you can read more about it in <A
HREF="http://www.karakas-online.de/myLinuxTips/css-for-docbook.html"
TARGET="_top"
>CSS file for DocBook</A
>.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="PHP-SYNTAX"
>28.4. The syntax of <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code</A
></H2
><P
>PHP-Nuke is written in <A
HREF="http://www.php.net"
TARGET="_top"
>PHP</A
> and uses the <A
HREF="http://www.mysql.com"
TARGET="_top"
>MySQL</A
> database. In this section we will present some examples of <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code. We don't try to teach you a new programming language, but only to illustrate how some things work.</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-VARIABLES"
>28.4.1. Variables</A
></H3
><P
>Variables are those elements that are given variable values, depending on the case. Here is an example:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;? <A
NAME="PHP-VARIABLES-1"
><IMG
SRC="images/callouts/1.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
>
if ($foobar == 1)){ <A
NAME="PHP-VARIABLES-2"
><IMG
SRC="images/callouts/2.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"></A
>
 echo "The value is 1"; <A
NAME="PHP-VARIABLES-3"
><IMG
SRC="images/callouts/3.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"></A
>
} else {
 echo "The value is not 1"; <A
NAME="PHP-VARIABLES-4"
><IMG
SRC="images/callouts/4.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"></A
>
}
?&#62; <A
NAME="PHP-VARIABLES-5"
><IMG
SRC="images/callouts/5.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(5)"></A
></PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="CALLOUTLIST"
><DL
COMPACT="COMPACT"
><DT
><A
HREF="#PHP-VARIABLES-1"
><IMG
SRC="images/callouts/1.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
></DT
><DD
>       As with every <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> script, we have to designate its start and end. Here is the start...
      </DD
><DT
><A
HREF="#PHP-VARIABLES-2"
><IMG
SRC="images/callouts/2.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"></A
></DT
><DD
>       We check if the foobar variable has the value 1.
      </DD
><DT
><A
HREF="#PHP-VARIABLES-3"
><IMG
SRC="images/callouts/3.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"></A
></DT
><DD
>       If it does, we output a message. We do this with the echo function. This functions will print whatever is included in the double quotes.  The double quotes may contain other variables (in which case the echo command will print their values), HTML code etc. If you want to print double quotes, you have to escape them with a backslash.
      </DD
><DT
><A
HREF="#PHP-VARIABLES-4"
><IMG
SRC="images/callouts/4.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"></A
></DT
><DD
>       If it doesn't, we also output an aproppriate message.
      </DD
><DT
><A
HREF="#PHP-VARIABLES-5"
><IMG
SRC="images/callouts/5.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(5)"></A
></DT
><DD
>       ...and here is the end of the script.
      </DD
></DL
></DIV
><P
>See also <A
HREF="http://www.php.net/language.variables"
TARGET="_top"
>PHP variables</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-FUNCTIONS"
>28.4.2. Functions</A
></H3
><P
>Here is an example of a simple <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> function:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>function get_lang($module) {
  global $currentlang, $language;
 
  HERE GOES THE FUNCTION CODE
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>It has the following structure, common to every <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> function:</P
><P
></P
><UL
><LI
><P
>the function name, preceded by the keyword "function",</P
></LI
><LI
><P
>the function parameters in the parenthesis,</P
></LI
><LI
><P
>the global variables that we intend to use in this function, registered through the "global" keyword (we cannot use any global variables, if we do not register them as such),</P
></LI
><LI
><P
>the curly brackets that include the function's content</P
></LI
></UL
><P
>Functions may be called from anywhere in the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code. See also <A
HREF="http://www.php.net/manual/en/functions.php"
TARGET="_top"
>PHP functions</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PHP-SWITCHES"
>28.4.3. Switches</A
></H3
><P
>A switch in <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> allows us to take certain actions depending on the value of a certain variable, as in the following example, where we check the value of the $pa variable:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>switch($pa) {
  case "showpage":
    showpage($pid, $page);
  break;
  case "list_pages_categories":
    list_pages_categories($cid);
  break;
  default:
    list_pages();
  break;
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>In case $pa has the value &#8220;showpage&#8221;, we call the showpage() function, in case it has the value "list_pages_categories", we call the list_pages_categories() function. If $pa does not have any of these two values, or any value at all, we enter the default case and call list_pages(). See also <A
HREF="http://www.php.net/manual/en/control-structures.php"
TARGET="_top"
>PHP control structures</A
>.</P
><P
>Switch statements are often used in module development (especially in the module administration functions, see <A
HREF="#MODULE-ADMIN"
>Section 21.4</A
>). So, if you declared in a module admin case file a switch like: </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>switch($func) {
     case "func-one":
     funct-one();
     break;    
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>you must call it through a link like:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>http://www.yoursite.com/modules.php?mop=modload
&#38;name=The_Web_Ring&#38;file=index&#38;func=func-one</PRE
></FONT
></TD
></TR
></TABLE
><P
>If your function needs to have parameters (see <A
HREF="#PHP-FUNCTIONS"
>Section 28.4.2</A
>), your switch will look like:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>switch($func) {
    case "func-one":
    funct-one($xid, $xname);
    break;
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>and your link will have to be:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>http://www.yoursite.com/modules.php?mop=modload
&#38;name=The_Web_Ring&#38;file=index&#38;func=func-one&#38;xid=$xid&#38;xname=$xname</PRE
></FONT
></TD
></TR
></TABLE
><P
>See also the ADDONS-MODULES file that came with your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> package.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="SQL-SYNTAX"
>28.5. The syntax of SQL code</A
></H2
><P
>Aiming at making <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> compatible with more databases, the SQL syntax has been transformed to functions, in order to achieve a standard syntax that is independent of the database used. For convenience, let us recall the file sql_layer.php in a somewhat cleaned-up version: </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>sql_connect($host, $user, $password, $db) <A
NAME="LOGIN"
><IMG
SRC="images/callouts/1.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
>
sql_logout($id) <A
NAME="DISCONNECT"
><IMG
SRC="images/callouts/2.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"></A
>
sql_query($query, $id) <A
NAME="QUERY"
><IMG
SRC="images/callouts/3.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"></A
>
sql_num_rows($res) <A
NAME="NUMROWS"
><IMG
SRC="images/callouts/4.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"></A
>
sql_fetch_row(&#38;$res, $nr) <A
NAME="FETCHROWS"
><IMG
SRC="images/callouts/5.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(5)"></A
>
sql_fetch_array(&#38;$res, $nr) <A
NAME="FETCHARRAY"
><IMG
SRC="images/callouts/6.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(6)"></A
>
sql_fetch_object(&#38;$res, $nr) <A
NAME="FETCHOBJECT"
><IMG
SRC="images/callouts/7.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(7)"></A
>
sql_free_result($res) <A
NAME="FREERESULT"
><IMG
SRC="images/callouts/8.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(8)"></A
></PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="CALLOUTLIST"
><DL
COMPACT="COMPACT"
><DT
><A
HREF="#LOGIN"
><IMG
SRC="images/callouts/1.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(1)"></A
></DT
><DD
>       Log into the DB.
      </DD
><DT
><A
HREF="#DISCONNECT"
><IMG
SRC="images/callouts/2.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(2)"></A
></DT
><DD
>         Disconnect from the DB.
       </DD
><DT
><A
HREF="#QUERY"
><IMG
SRC="images/callouts/3.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(3)"></A
></DT
><DD
>       Query.
       </DD
><DT
><A
HREF="#NUMROWS"
><IMG
SRC="images/callouts/4.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(4)"></A
></DT
><DD
>      Number of Rows.
       </DD
><DT
><A
HREF="#FETCHROWS"
><IMG
SRC="images/callouts/5.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(5)"></A
></DT
><DD
>       Fetch Rows.
       </DD
><DT
><A
HREF="#FETCHARRAY"
><IMG
SRC="images/callouts/6.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(6)"></A
></DT
><DD
>       Fetch Array.
       </DD
><DT
><A
HREF="#FETCHOBJECT"
><IMG
SRC="images/callouts/7.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(7)"></A
></DT
><DD
>      Fetch Object.
       </DD
><DT
><A
HREF="#FREERESULT"
><IMG
SRC="images/callouts/8.png"
HSPACE="0"
VSPACE="0"
BORDER="0"
ALT="(8)"></A
></DT
><DD
>      Free Result.
       </DD
></DL
></DIV
><P
>With this syntax you will be able to render all the modifications, blocks or modules you create compatible to all the databases supported by PHP-Nuke, which are:</P
><P
></P
><UL
><LI
><P
>MySQL</P
></LI
><LI
><P
>mSQL</P
></LI
><LI
><P
>PostgreSQL</P
></LI
><LI
><P
>PostgreSQL_local</P
></LI
><LI
><P
>ODBC</P
></LI
><LI
><P
>ODBC_Adabas</P
></LI
><LI
><P
>Interbase</P
></LI
><LI
><P
>Sybase</P
></LI
></UL
><P
>From version 6.5 and up, <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> users the same abstraction layer of phpBB for compatibility reasons. It's very easy and highly tested. Normaly you make a query on MySQL like this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$sql = "SELECT uid, uname FROM nuke_users";
$result = mysql_query($sql);
list($uid, $uname) = mysql_fetch_row($result);</PRE
></FONT
></TD
></TR
></TABLE
><P
>With the SQL abstraction layer on PHP-Nuke, you would declare $db as a global variable and then write:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$sql = "SELECT uid, uname FROM nuke_users";
$result = $db-&#62;sql_query($sql);
$row = $db-&#62;sql_fetchrow($result);</PRE
></FONT
></TD
></TR
></TABLE
><P
>This will return the array $row[] with the results. If you want to work with more friendly names you should do this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$uid = $row[uid];
$uname = $row[uname];</PRE
></FONT
></TD
></TR
></TABLE
><P
>But it is much faster for you (and for the system) to use just the array values directly, ie:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>echo "Hello $row[uname], Welcome to my site!";</PRE
></FONT
></TD
></TR
></TABLE
><P
>Note that there isn't any "sql_fetch_array", the sql_fetch_row automaticaly will create the array with the results of your query. </P
><P
>The old method using the file sql_layer.php and the variable $dbi is now deprecated. It works for compatibility reasons, but we strongly suggest to any developer making new modules or modifying a module to start using the new method. See also the ADDONS-MODULES file that came with your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> package.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MYSQL-FRONTEND"
>28.6. MySQL Front, how to administer a MySQL DB from <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
></A
></H2
><P
>Mysql Front is a client for <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> that allows for the management to manage a local or remote DB through a client interface. Since we consider <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> to be more aproppriate and flexible tool for this task, we would like to focus our attention a little on a functionality of MySQLFront that on PHPMyAdmin has shown itself to be little reliable. That is the ability to load, import and export DBs of great dimensions without losing data or getting errors.</P
><P
>In this section we will limit ourselves in analyzing the connection phase, the import and upload.</P
><P
>Connection (<A
HREF="#FIG-MYSQLFRONT-CONNECTION"
>Figure 28-2</A
>): Clicking on File-&#62;Connection, we will get an interface in which we are asked to enter the host, user and password. If we have to use MySQLFront locally, we will leave the localhost entry untouched. </P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MYSQLFRONT-CONNECTION"
></A
><P
><B
>Figure 28-2.    MySQL Front: Connection
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/snapshot20.png"><DIV
CLASS="CAPTION"
><P
>MySQL Front: Connection</P
></DIV
></P
></DIV
></DIV
></P
><P
>Download (or copy) of an existing DB: choose the database you wish to be exported and then click on &#8220;Export Tables&#8221; (fifth from the right, <A
HREF="#FIG-MYSQLFRONT-EXPORT-TABLES"
>Figure 28-3</A
>). Then choose a destination path for the database dump. As you may notice, the system, through the use of flags, gives us even the possibility to choose individually those tables we want to import.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MYSQLFRONT-EXPORT-TABLES"
></A
><P
><B
>Figure 28-3.    MySQL Front: export tables
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/snapshot21.png"><DIV
CLASS="CAPTION"
><P
>MySQL Front: export tables</P
></DIV
></P
></DIV
></DIV
></P
><P
>Upload of a DB: clicking on the SQL Query button (<A
HREF="#FIG-MYSQLFRONT-SQL-QUERY"
>Figure 28-4</A
>), an interface appears that allows us to carry out the upload of an existing database. It suffices to click on the symbol of the open folder, choose the database dump and click on the button that looks&#8221;Play&#8221;-like button. Before starting this operation will have to select the destination database.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MYSQLFRONT-SQL-QUERY"
></A
><P
><B
>Figure 28-4.    MySQL Front: SQL Query
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/snapshot22.png"><DIV
CLASS="CAPTION"
><P
>MySQL Front: SQL Query</P
></DIV
></P
></DIV
></DIV
></P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="FOXSERV"
>28.7. Foxserv, making <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> work on <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> Systems</A
></H2
><P
>There exists an application that installs <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> + MySQL + Apache in a simple and fast way, configuring your operating system to emulate a local Web server. This is very useful, as it allows us to experiment with <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> and our modifications locally. </P
><P
>The software is called Foxserv, has reached version 3.0, but I recommend using version 2.0 which is much easier to use.</P
><P
>The installation is very simple, it is enough to launch the FoxServ-2.0core.exe file, proceed with the installation inserting any data (nothing is needed besides user and password of the DB) and then start using it!</P
><P
>When launching the foxserv control panel, you will have to activate apache and mysql, type in your browser the address http://localhost/and the web page will appear as if it were on any Internet server.</P
><P
>Suppose that you have installed everything in c:\foxserv. The <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> folders have to be inserted under the folder www. For example if we want to insert a nuke56 installation, we create the folder c:\foxserv\www\nuke56\ and load there all the content of the HTML folder of our <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> (in the config.php of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> we will leave &#8220;localhost&#8221; as our host, &#8220;root&#8221; as user and nothing as password).</P
><P
>In order to reach PHPMyAdmin (even this is preinstalled), the address will be http://localhost/phpmyadmin/.</P
><DIV
CLASS="IMPORTANT"
><P
></P
><TABLE
CLASS="IMPORTANT"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.png"
HSPACE="5"
ALT="Important"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Important note</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The file php.ini (which is located, depending on the operating system, in c:\windows, c:\windows\system, c:\winnt or c:\winnt\system\) contains paths to a  disc f:</P
></TD
></TR
></TABLE
></DIV
><P
>The only modification that you will have to make consists in:</P
><P
></P
><UL
><LI
><P
>create a folder c:\temp</P
></LI
><LI
><P
>modify the parameter: session.save_path = c:\temp. It must be c:\temp and not f:\foxserv etc.</P
></LI
></UL
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Attention</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The folder &#8220;php&#8221; contains also a php.ini, but it is not the file that interests us.</P
></TD
></TR
></TABLE
></DIV
><P
>FIXME: This section certainly needs updating! </P
></DIV
></DIV
><DIV
CLASS="APPENDIX"
><HR><H1
><A
NAME="AEN21797"
></A
>Appendix A. Appendix</H1
><DIV
CLASS="SECT1"
><H2
CLASS="SECT1"
><A
NAME="GNU-FREE-DOCUMENATION-LICENCE"
>A.1. The <ACRONYM
CLASS="ACRONYM"
>GNU</ACRONYM
> Free Documentation Licence</A
></H2
><P
>This is an exact copy of the <A
HREF="http://www.gnu.org/copyleft/fdl.html"
TARGET="_top"
>GNU Free Documentation License Version 1.2</A
>, November 2002:</P
><P
>Copyright (C) 2000,2001,2002 Free Software Foundation, Inc. 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed.</P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="GFDL-PREAMBLE"
>A.1.1. PREAMBLE</A
></H3
><P
>The purpose of this License is to make a manual, textbook, or other functional and useful document "free" in the sense of freedom: to assure everyone the effective freedom to copy and redistribute it, with or without modifying it, either commercially or noncommercially. Secondarily, this License preserves for the author and publisher a way to get credit for their work, while not being considered responsible for modifications made by others.</P
><P
>This License is a kind of "copyleft", which means that derivative works of the document must themselves be free in the same sense. It complements the <ACRONYM
CLASS="ACRONYM"
>GNU</ACRONYM
> General Public License, which is a copyleft license designed for free software.</P
><P
>We have designed this License in order to use it for manuals for free software, because free software needs free documentation: a free program should come with manuals providing the same freedoms that the software does. But this License is not limited to software manuals; it can be used for any textual work, regardless of subject matter or whether it is published as a printed book. We recommend this License principally for works whose purpose is instruction or reference.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="GFDL-APPLICABILITY-AND-DEFINITIONS"
>A.1.2. APPLICABILITY AND DEFINITIONS</A
></H3
><P
>This License applies to any manual or other work, in any medium, that contains a notice placed by the copyright holder saying it can be distributed under the terms of this License. Such a notice grants a world-wide, royalty-free license, unlimited in duration, to use that work under the conditions stated herein. The "Document", below, refers to any such manual or work. Any member of the public is a licensee, and is addressed as "you". You accept the license if you copy, modify or distribute the work in a way requiring permission under copyright law.</P
><P
>A "Modified Version" of the Document means any work containing the Document or a portion of it, either copied verbatim, or with modifications and/or translated into another language.</P
><P
>A "Secondary Section" is a named appendix or a front-matter section of the Document that deals exclusively with the relationship of the publishers or authors of the Document to the Document's overall subject (or to related matters) and contains nothing that could fall directly within that overall subject. (Thus, if the Document is in part a textbook of mathematics, a Secondary Section may not explain any mathematics.) The relationship could be a matter of historical connection with the subject or with related matters, or of legal, commercial, philosophical, ethical or political position regarding them.</P
><P
>The "Invariant Sections" are certain Secondary Sections whose titles are designated, as being those of Invariant Sections, in the notice that says that the Document is released under this License. If a section does not fit the above definition of Secondary then it is not allowed to be designated as Invariant. The Document may contain zero Invariant Sections. If the Document does not identify any Invariant Sections then there are none.</P
><P
>The "Cover Texts" are certain short passages of text that are listed, as Front-Cover Texts or Back-Cover Texts, in the notice that says that the Document is released under this License. A Front-Cover Text may be at most 5 words, and a Back-Cover Text may be at most 25 words.</P
><P
>A "Transparent" copy of the Document means a machine-readable copy, represented in a format whose specification is available to the general public, that is suitable for revising the document straightforwardly with generic text editors or (for images composed of pixels) generic paint programs or (for drawings) some widely available drawing editor, and that is suitable for input to text formatters or for automatic translation to a variety of formats suitable for input to text formatters. A copy made in an otherwise Transparent file format whose markup, or absence of markup, has been arranged to thwart or discourage subsequent modification by readers is not Transparent. An image format is not Transparent if used for any substantial amount of text. A copy that is not "Transparent" is called "Opaque".</P
><P
>Examples of suitable formats for Transparent copies include plain <ACRONYM
CLASS="ACRONYM"
>ASCII</ACRONYM
> without markup, Texinfo input format, <SPAN
CLASS="APPLICATION"
>LaTeX</SPAN
> input format, SGML or XML using a publicly available DTD, and standard-conforming simple HTML, PostScript or PDF designed for human modification. Examples of transparent image formats include PNG, XCF and JPG. Opaque formats include proprietary formats that can be read and edited only by proprietary word processors, SGML or XML for which the DTD and/or processing tools are not generally available, and the machine-generated HTML, PostScript or PDF produced by some word processors for output purposes only.</P
><P
>The "Title Page" means, for a printed book, the title page itself, plus such following pages as are needed to hold, legibly, the material this License requires to appear in the title page. For works in formats which do not have any title page as such, "Title Page" means the text near the most prominent appearance of the work's title, preceding the beginning of the body of the text.</P
><P
>A section "Entitled XYZ" means a named subunit of the Document whose title either is precisely XYZ or contains XYZ in parentheses following text that translates XYZ in another language. (Here XYZ stands for a specific section name mentioned below, such as "Acknowledgements", "Dedications", "Endorsements", or "History".) To "Preserve the Title" of such a section when you modify the Document means that it remains a section "Entitled XYZ" according to this definition.</P
><P
>The Document may include Warranty Disclaimers next to the notice which states that this License applies to the Document. These Warranty Disclaimers are considered to be included by reference in this License, but only as regards disclaiming warranties: any other implication that these Warranty Disclaimers may have is void and has no effect on the meaning of this License.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="GFDL-VERBATIM-COPYING"
>A.1.3. VERBATIM COPYING</A
></H3
><P
>You may copy and distribute the Document in any medium, either commercially or noncommercially, provided that this License, the copyright notices, and the license notice saying this License applies to the Document are reproduced in all copies, and that you add no other conditions whatsoever to those of this License. You may not use technical measures to obstruct or control the reading or further copying of the copies you make or distribute. However, you may accept compensation in exchange for copies. If you distribute a large enough number of copies you must also follow the conditions in <A
HREF="#GFDL-COPYING-IN-QUANTITY"
>Section A.1.4</A
>.</P
><P
>You may also lend copies, under the same conditions stated above, and you may publicly display copies.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="GFDL-COPYING-IN-QUANTITY"
>A.1.4. COPYING IN QUANTITY</A
></H3
><P
>If you publish printed copies (or copies in media that commonly have printed covers) of the Document, numbering more than 100, and the Document's license notice requires Cover Texts, you must enclose the copies in covers that carry, clearly and legibly, all these Cover Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on the back cover. Both covers must also clearly and legibly identify you as the publisher of these copies. The front cover must present the full title with all words of the title equally prominent and visible. You may add other material on the covers in addition. Copying with changes limited to the covers, as long as they preserve the title of the Document and satisfy these conditions, can be treated as verbatim copying in other respects.</P
><P
>If the required texts for either cover are too voluminous to fit legibly, you should put the first ones listed (as many as fit reasonably) on the actual cover, and continue the rest onto adjacent pages.</P
><P
>If you publish or distribute Opaque copies of the Document numbering more than 100, you must either include a machine-readable Transparent copy along with each Opaque copy, or state in or with each Opaque copy a computer-network location from which the general network-using public has access to download using public-standard network protocols a complete Transparent copy of the Document, free of added material. If you use the latter option, you must take reasonably prudent steps, when you begin distribution of Opaque copies in quantity, to ensure that this Transparent copy will remain thus accessible at the stated location until at least one year after the last time you distribute an Opaque copy (directly or through your agents or retailers) of that edition to the public.</P
><P
>It is requested, but not required, that you contact the authors of the Document well before redistributing any large number of copies, to give them a chance to provide you with an updated version of the Document.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="GFDL-MODIFICATIONS"
>A.1.5. MODIFICATIONS</A
></H3
><P
>You may copy and distribute a Modified Version of the Document under the conditions of <A
HREF="#GFDL-VERBATIM-COPYING"
>Section A.1.3</A
> and <A
HREF="#GFDL-COPYING-IN-QUANTITY"
>Section A.1.4</A
> above, provided that you release the Modified Version under precisely this License, with the Modified Version filling the role of the Document, thus licensing distribution and modification of the Modified Version to whoever possesses a copy of it. In addition, you must do these things in the Modified Version:</P
><P
></P
><UL
><LI
><P
>A. Use in the Title Page (and on the covers, if any) a title distinct from that of the Document, and from those of previous versions (which should, if there were any, be listed in the History section of the Document). You may use the same title as a previous version if the original publisher of that version gives permission. </P
></LI
><LI
><P
>B. List on the Title Page, as authors, one or more persons or entities responsible for authorship of the modifications in the Modified Version, together with at least five of the principal authors of the Document (all of its principal authors, if it has fewer than five), unless they release you from this requirement. </P
></LI
><LI
><P
>C. State on the Title page the name of the publisher of the Modified Version, as the publisher. </P
></LI
><LI
><P
>D. Preserve all the copyright notices of the Document. </P
></LI
><LI
><P
>E. Add an appropriate copyright notice for your modifications adjacent to the other copyright notices. </P
></LI
><LI
><P
>F. Include, immediately after the copyright notices, a license notice giving the public permission to use the Modified Version under the terms of this License, in the form shown in the Addendum below. </P
></LI
><LI
><P
>G. Preserve in that license notice the full lists of Invariant Sections and required Cover Texts given in the Document's license notice. </P
></LI
><LI
><P
>H. Include an unaltered copy of this License. </P
></LI
><LI
><P
>I. Preserve the section Entitled "History", Preserve its Title, and add to it an item stating at least the title, year, new authors, and publisher of the Modified Version as given on the Title Page. If there is no section Entitled "History" in the Document, create one stating the title, year, authors, and publisher of the Document as given on its Title Page, then add an item describing the Modified Version as stated in the previous sentence. </P
></LI
><LI
><P
>J. Preserve the network location, if any, given in the Document for public access to a Transparent copy of the Document, and likewise the network locations given in the Document for previous versions it was based on. These may be placed in the "History" section. You may omit a network location for a work that was published at least four years before the Document itself, or if the original publisher of the version it refers to gives permission. </P
></LI
><LI
><P
>K. For any section Entitled "Acknowledgements" or "Dedications", Preserve the Title of the section, and preserve in the section all the substance and tone of each of the contributor acknowledgements and/or dedications given therein. </P
></LI
><LI
><P
>L. Preserve all the Invariant Sections of the Document, unaltered in their text and in their titles. Section numbers or the equivalent are not considered part of the section titles. </P
></LI
><LI
><P
>M. Delete any section Entitled "Endorsements". Such a section may not be included in the Modified Version. </P
></LI
><LI
><P
>N. Do not retitle any existing section to be Entitled "Endorsements" or to conflict in title with any Invariant Section. </P
></LI
><LI
><P
>O. Preserve any Warranty Disclaimers.</P
></LI
></UL
><P
>If the Modified Version includes new front-matter sections or appendices that qualify as Secondary Sections and contain no material copied from the Document, you may at your option designate some or all of these sections as invariant. To do this, add their titles to the list of Invariant Sections in the Modified Version's license notice. These titles must be distinct from any other section titles.</P
><P
>You may add a section Entitled "Endorsements", provided it contains nothing but endorsements of your Modified Version by various parties--for example, statements of peer review or that the text has been approved by an organization as the authoritative definition of a standard.</P
><P
>You may add a passage of up to five words as a Front-Cover Text, and a passage of up to 25 words as a Back-Cover Text, to the end of the list of Cover Texts in the Modified Version. Only one passage of Front-Cover Text and one of Back-Cover Text may be added by (or through arrangements made by) any one entity. If the Document already includes a cover text for the same cover, previously added by you or by arrangement made by the same entity you are acting on behalf of, you may not add another; but you may replace the old one, on explicit permission from the previous publisher that added the old one.</P
><P
>The author(s) and publisher(s) of the Document do not by this License give permission to use their names for publicity for or to assert or imply endorsement of any Modified Version.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="GFDL-COMBINING-DOCUMENTS"
>A.1.6. COMBINING DOCUMENTS</A
></H3
><P
>You may combine the Document with other documents released under this License, under the terms defined in <A
HREF="#GFDL-MODIFICATIONS"
>Section A.1.5</A
> above for modified versions, provided that you include in the combination all of the Invariant Sections of all of the original documents, unmodified, and list them all as Invariant Sections of your combined work in its license notice, and that you preserve all their Warranty Disclaimers.</P
><P
>The combined work need only contain one copy of this License, and multiple identical Invariant Sections may be replaced with a single copy. If there are multiple Invariant Sections with the same name but different contents, make the title of each such section unique by adding at the end of it, in parentheses, the name of the original author or publisher of that section if known, or else a unique number. Make the same adjustment to the section titles in the list of Invariant Sections in the license notice of the combined work.</P
><P
>In the combination, you must combine any sections Entitled "History" in the various original documents, forming one section Entitled "History"; likewise combine any sections Entitled "Acknowledgements", and any sections Entitled "Dedications". You must delete all sections Entitled "Endorsements".</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="GFDL-COLLECTIONS-OF-DOCUMENTS"
>A.1.7. COLLECTIONS OF DOCUMENTS</A
></H3
><P
>You may make a collection consisting of the Document and other documents released under this License, and replace the individual copies of this License in the various documents with a single copy that is included in the collection, provided that you follow the rules of this License for verbatim copying of each of the documents in all other respects.</P
><P
>You may extract a single document from such a collection, and distribute it individually under this License, provided you insert a copy of this License into the extracted document, and follow this License in all other respects regarding verbatim copying of that document.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="GFDL-AGGREGATION-WITH-INDEPENDENT-WORKS"
>A.1.8. AGGREGATION WITH INDEPENDENT WORKS</A
></H3
><P
>A compilation of the Document or its derivatives with other separate and independent documents or works, in or on a volume of a storage or distribution medium, is called an "aggregate" if the copyright resulting from the compilation is not used to limit the legal rights of the compilation's users beyond what the individual works permit. When the Document is included in an aggregate, this License does not apply to the other works in the aggregate which are not themselves derivative works of the Document.</P
><P
>If the Cover Text requirement of <A
HREF="#GFDL-COPYING-IN-QUANTITY"
>Section A.1.4</A
> is applicable to these copies of the Document, then if the Document is less than one half of the entire aggregate, the Document's Cover Texts may be placed on covers that bracket the Document within the aggregate, or the electronic equivalent of covers if the Document is in electronic form. Otherwise they must appear on printed covers that bracket the whole aggregate.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="GFDL-TRANSLATION"
>A.1.9. TRANSLATION</A
></H3
><P
>Translation is considered a kind of modification, so you may distribute translations of the Document under the terms of <A
HREF="#GFDL-MODIFICATIONS"
>Section A.1.5</A
>. Replacing Invariant Sections with translations requires special permission from their copyright holders, but you may include translations of some or all Invariant Sections in addition to the original versions of these Invariant Sections. You may include a translation of this License, and all the license notices in the Document, and any Warranty Disclaimers, provided that you also include the original English version of this License and the original versions of those notices and disclaimers. In case of a disagreement between the translation and the original version of this License or a notice or disclaimer, the original version will prevail.</P
><P
>If a section in the Document is Entitled "Acknowledgements", "Dedications", or "History", the requirement (<A
HREF="#GFDL-MODIFICATIONS"
>Section A.1.5</A
>) to Preserve its Title (<A
HREF="#GFDL-APPLICABILITY-AND-DEFINITIONS"
>Section A.1.2</A
>) will typically require changing the actual title.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="GFDL-TERMINATION"
>A.1.10. TERMINATION</A
></H3
><P
>You may not copy, modify, sublicense, or distribute the Document except as expressly provided for under this License. Any other attempt to copy, modify, sublicense or distribute the Document is void, and will automatically terminate your rights under this License. However, parties who have received copies, or rights, from you under this License will not have their licenses terminated so long as such parties remain in full compliance.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="GFDL-FUTURE-REVISIONS"
>A.1.11. FUTURE REVISIONS OF THIS LICENSE</A
></H3
><P
>The Free Software Foundation may publish new, revised versions of the <ACRONYM
CLASS="ACRONYM"
>GNU</ACRONYM
> Free Documentation License from time to time. Such new versions will be similar in spirit to the present version, but may differ in detail to address new problems or concerns. See http://www.gnu.org/copyleft/.</P
><P
>Each version of the License is given a distinguishing version number. If the Document specifies that a particular numbered version of this License "or any later version" applies to it, you have the option of following the terms and conditions either of that specified version or of any later version that has been published (not as a draft) by the Free Software Foundation. If the Document does not specify a version number of this License, you may choose any version ever published (not as a draft) by the Free Software Foundation.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN21906"
>A.1.12. ADDENDUM: How to use this License for your documents</A
></H3
><P
>To use this License in a document you have written, include a copy of the License in the document and put the following copyright and license notices just after the title page:</P
><A
NAME="AEN21909"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>Copyright (c) YEAR YOUR NAME. Permission is granted to copy, distribute and/or modify this document under the terms of the <ACRONYM
CLASS="ACRONYM"
>GNU</ACRONYM
> Free Documentation License, Version 1.2 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts. A copy of the license is included in the section entitled "GNU Free Documentation License".</P
></BLOCKQUOTE
><P
>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts, replace the "with...Texts." line with this:</P
><A
NAME="AEN21913"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>with the Invariant Sections being LIST THEIR TITLES, with the Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.</P
></BLOCKQUOTE
><P
>If you have Invariant Sections without Cover Texts, or some other combination of the three, merge those two alternatives to suit the situation.</P
><P
>If your document contains nontrivial examples of program code, we recommend releasing these examples in parallel under your choice of free software license, such as the <ACRONYM
CLASS="ACRONYM"
>GNU</ACRONYM
> General Public License, to permit their use in free software. </P
></DIV
></DIV
></DIV
><DIV
CLASS="INDEX"
><HR><H1
><A
NAME="AEN21918"
></A
>Index</H1
><DIV
CLASS="INDEXDIV"
><H2
CLASS="INDEXDIV"
><A
NAME="AEN21919"
>Symbols</A
></H2
><DL
><DT
>%A,
    <A
HREF="adjust-server-time.html#AEN19883"
>How to adjust server time</A
>
  </DT
><DT
>%G,
    <A
HREF="adjust-server-time.html#AEN19911"
>How to adjust server time</A
>
  </DT
><DT
>%H,
    <A
HREF="adjust-server-time.html#AEN19951"
>How to adjust server time</A
>
  </DT
><DT
>%y,
    <A
HREF="adjust-server-time.html#AEN19905"
>How to adjust server time</A
>,
    <A
HREF="adjust-server-time.html#AEN19915"
>How to adjust server time</A
>
  </DT
><DT
>%Z,
    <A
HREF="adjust-server-time.html#AEN19986"
>How to adjust server time</A
>
  </DT
><DT
>1.2.3.4,
    <A
HREF="how-sessions-work.html#AEN9474"
>How sessions work in the forums</A
>
  </DT
><DT
>10px,
    <A
HREF="change-font-size-php-nuke.html#AEN11074"
>How to change the font size in PHP-Nuke</A
>
  </DT
><DT
>127,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3494"
>Apache, PHP and MySQL on Red Hat Linux</A
>,
    <A
HREF="more-than-127-faq-answers.html#AEN12116"
>How to add more than 127 FAQ answers</A
>
  </DT
><DT
>12px,
    <A
HREF="change-font-size-php-nuke.html#AEN11064"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11104"
>How to change the font size in PHP-Nuke</A
>
  </DT
><DT
>200.100.40.40,
    <A
HREF="how-sessions-work.html#AEN9484"
>How sessions work in the forums</A
>
  </DT
><DT
>4-liner,
    <A
HREF="ban-ip-addresses.html#AEN16316"
>How to ban IP addresses</A
>
  </DT
><DT
>55.555.55.5,
    <A
HREF="ban-ip-addresses.html#AEN16330"
>How to ban IP addresses</A
>
  </DT
><DT
>6.5,
    <A
HREF="invalid-session-in-forums.html#AEN4385"
>Invalid session in forums</A
>,
    <A
HREF="preinstalled-modules.html#AEN5424"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5839"
>The preinstalled modules</A
>,
    <A
HREF="backend.html#AEN6133"
>Back end structure: administrator view</A
>,
    <A
HREF="bypass-article-approval.html#AEN12777"
>How to bypass article approval</A
>,
    <A
HREF="googletap.html#AEN17791"
>Installation</A
>
  </DT
><DT
>6.5B5,
    <A
HREF="test-scripts.html#AEN3858"
>analyze.php</A
>
  </DT
><DT
>6.6,
    <A
HREF="preinstalled-modules.html#AEN5254"
>The preinstalled modules</A
>
  </DT
><DT
>600,
    <A
HREF="adjust-server-time.html#AEN19850"
>How to adjust server time</A
>
  </DT
><DT
>644,
    <A
HREF="permissions.html#AEN2510"
>File permissions</A
>,
    <A
HREF="permissions.html#AEN2571"
>File permissions</A
>
  </DT
><DT
>666,
    <A
HREF="permissions.html#AEN2580"
>File permissions</A
>,
    <A
HREF="permissions2.html#AEN16108"
>Permissions on folders and files</A
>,
    <A
HREF="ban-ip-addresses.html#AEN16328"
>How to ban IP addresses</A
>
  </DT
><DT
>7.0,
    <A
HREF="error-update-private-forum-permissions.html#AEN4362"
>Error: Couldn't update private forum permissions</A
>
  </DT
><DT
>750,
    <A
HREF="jpcache.html#AEN16573"
>Configuration of jpcache</A
>
  </DT
><DT
>755,
    <A
HREF="permissions.html#AEN2603"
>File permissions</A
>
  </DT
><DT
>764,
    <A
HREF="permissions.html#AEN2505"
>File permissions</A
>,
    <A
HREF="permissions.html#AEN2524"
>File permissions</A
>
  </DT
><DT
>777,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3503"
>Apache, PHP and MySQL on Red Hat Linux</A
>,
    <A
HREF="permissions2.html#AEN16106"
>Permissions on folders and files</A
>,
    <A
HREF="permissions2.html#AEN16143"
>Permissions on folders and files</A
>,
    <A
HREF="permissions2.html#AEN16154"
>Permissions on folders and files</A
>
  </DT
><DT
>_EDITTOPOLINO,
    <A
HREF="module-admin.html#AEN14539"
>Module creation, administrator part</A
>
  </DT
><DT
>_NOADMINYET,
    <A
HREF="cannot-create-administrator-account.html#AEN4421"
>You cannot create the administrator account</A
>
  </DT
><DT
>_SEARCH,
    <A
HREF="general-php-nuke-texts.html#AEN9715"
>General PHP-Nuke texts</A
>
  </DT
><DT
>_YOUAREANO,
    <A
HREF="find-all-registration-links.html#AEN18767"
>How to find all registration links</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN22017"
>A</A
></H2
><DL
><DT
>A-Z,
    <A
HREF="regular-expressions.html#AEN17534"
>Regular expressions</A
>
  </DT
><DT
>abbreviation,
    <A
HREF="adjust-server-time.html#AEN19977"
>How to adjust server time</A
>
  </DT
><DT
>abstraction,
    <A
HREF="module-rules.html#AEN14259"
>Creating fully compatible modules: the rules to follow</A
>
  </DT
><DT
>abused,
    <A
HREF="permissions2.html#AEN16169"
>Permissions on folders and files</A
>
  </DT
><DT
>access,
    <A
HREF="phpmyadmin-other-commands.html#AEN2969"
>phpMyAdmin: other commands</A
>,
    <A
HREF="sorry-such-file-doesnt-exist.html#AEN4072"
>Sorry, such file doesn't exist...</A
>,
    <A
HREF="php-nuke-upload-module.html#AEN8794"
>Upload module</A
>,
    <A
HREF="security-fixes.html#AEN15821"
>Security fixes</A
>,
    <A
HREF="restore-large-backup.html#AEN18573"
>How to restore a large backup</A
>,
    <A
HREF="change-php-parameters.html#AEN19101"
>How to change PHP parameters when you don't have access to php.ini</A
>
  </DT
><DT
>access level,
    <A
HREF="treemenu-block.html#AEN11754"
>Treemenu block</A
>
  </DT
><DT
>accessible,
    <A
HREF="php-nuke-vs-post-nuke.html#AEN2084"
>PHP-Nuke vs. Post-Nuke</A
>
  </DT
><DT
>ACP,
    <A
HREF="how-sessions-work.html#AEN9517"
>How sessions work in the forums</A
>
  </DT
><DT
>acquisition,
    <A
HREF="preinstalled-modules.html#AEN5866"
>The preinstalled modules</A
>
  </DT
><DT
>activate,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3484"
>Apache, PHP and MySQL on Red Hat Linux</A
>,
    <A
HREF="administration-functions.html#AEN6348"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6562"
>The administration functions</A
>,
    <A
HREF="change-buggy-block.html#AEN11668"
>How to change a buggy block</A
>,
    <A
HREF="simple-module-block.html#AEN11738"
>Simple module block</A
>
  </DT
><DT
>activated,
    <A
HREF="php-nuke-vs-xoops.html#AEN2202"
>PHP-Nuke vs. XOOPS</A
>,
    <A
HREF="administration-functions.html#AEN6248"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6762"
>The administration functions</A
>,
    <A
HREF="block-creation.html#AEN13177"
>How to create a new block</A
>,
    <A
HREF="mod_rewrite-api-phases.html#AEN17271"
>API phases</A
>
  </DT
><DT
>activation,
    <A
HREF="mail-problems.html#AEN4298"
>Users don't receive any confirmation mails</A
>,
    <A
HREF="nsn-your-account-tweak-module.html#AEN8081"
>NSN Your Account Tweak module</A
>
  </DT
><DT
>admin,
    <A
HREF="whatis-phpnuke.html#AEN1835"
>What Is PHP-Nuke</A
>,
    <A
HREF="upload.html#AEN2378"
>Upload through FTP</A
>,
    <A
HREF="phpmyadmin.html#AEN2648"
>How to install PHP-Nuke through phpMyAdmin</A
>,
    <A
HREF="phpmyadmin2.html#AEN2736"
>phpMyAdmin: How to administer MySQL via Web</A
>,
    <A
HREF="phpmyadmin-navigation-bar-export.html#AEN2938"
>phpMyAdmin navigation bar: Export</A
>,
    <A
HREF="config-php-file.html#AEN3541"
>The config.php file</A
>,
    <A
HREF="config-php-file.html#AEN3635"
>The config.php file</A
>,
    <A
HREF="security-code.html#AEN4177"
>Security code is not showing up</A
>,
    <A
HREF="administrator-password-lost.html#AEN4507"
>You lost the administrator password, or deleted the admin account</A
>,
    <A
HREF="compressed-output-in-forums.html#AEN4576"
>Compressed output in forums</A
>,
    <A
HREF="changing-web-hoster.html#AEN5155"
>Changing Web hoster</A
>,
    <A
HREF="backend.html#AEN6127"
>Back end structure: administrator view</A
>,
    <A
HREF="preferences.html#AEN7372"
>The Preferences Page </A
>,
    <A
HREF="preferences.html#AEN7407"
>The Preferences Page </A
>,
    <A
HREF="nsn-your-account-tweak-module.html#AEN8071"
>NSN Your Account Tweak module</A
>,
    <A
HREF="php-nuke-approve-membership-module.html#AEN8173"
>Approve Membership module</A
>,
    <A
HREF="php-nuke-ecommerce-module.html#AEN9021"
>eCommerce module</A
>,
    <A
HREF="directory-structure.html#AEN9174"
>Directory structure </A
>,
    <A
HREF="admin-management.html#AEN9373"
>Administration management </A
>,
    <A
HREF="eliminate-session-checks.html#AEN9553"
>How to eliminate session checks</A
>,
    <A
HREF="more-than-127-faq-answers.html#AEN12124"
>How to add more than 127 FAQ answers</A
>,
    <A
HREF="module-admin.html#AEN14381"
>Module creation, administrator part</A
>,
    <A
HREF="module-admin.html#AEN14404"
>Module creation, administrator part</A
>,
    <A
HREF="module-admin.html#AEN14489"
>Module creation, administrator part</A
>,
    <A
HREF="ban-ip-addresses.html#AEN16325"
>How to ban IP addresses</A
>,
    <A
HREF="hacked-now-what.html#AEN16397"
>Hacked - now what?</A
>,
    <A
HREF="hacked-now-what.html#AEN16402"
>Hacked - now what?</A
>,
    <A
HREF="install-modules-with-database-change.html#AEN18660"
>How to install modules that change the database structure</A
>,
    <A
HREF="backup-mysql-using-browser.html#AEN20146"
>How to backup your MySQL database using only the browser</A
>
  </DT
><DT
>admin.php,
    <A
HREF="security-code.html#AEN4179"
>Security code is not showing up</A
>,
    <A
HREF="cannot-create-administrator-account.html#AEN4426"
>You cannot create the administrator account</A
>,
    <A
HREF="cannot-create-administrator-account.html#AEN4448"
>You cannot create the administrator account</A
>,
    <A
HREF="backend.html#AEN6131"
>Back end structure: administrator view</A
>,
    <A
HREF="administration-functions.html#AEN6493"
>The administration functions</A
>,
    <A
HREF="simple-content-block.html#AEN13265"
>Simple Content block</A
>,
    <A
HREF="module-admin.html#AEN14430"
>Module creation, administrator part</A
>,
    <A
HREF="module-admin.html#AEN14432"
>Module creation, administrator part</A
>,
    <A
HREF="hacked-now-what.html#AEN16393"
>Hacked - now what?</A
>
  </DT
><DT
>admin/case,
    <A
HREF="admin-management.html#AEN9405"
>Administration management </A
>,
    <A
HREF="module-admin.html#AEN14368"
>Module creation, administrator part</A
>,
    <A
HREF="module-admin.html#AEN14411"
>Module creation, administrator part</A
>
  </DT
><DT
>admin/links,
    <A
HREF="admin-management.html#AEN9384"
>Administration management </A
>,
    <A
HREF="module-admin.html#AEN14372"
>Module creation, administrator part</A
>,
    <A
HREF="module-admin.html#AEN14388"
>Module creation, administrator part</A
>
  </DT
><DT
>administration,
    <A
HREF="easyphp.html#AEN3171"
>easyPHP</A
>,
    <A
HREF="config-php-file.html#AEN3633"
>The config.php file</A
>,
    <A
HREF="compressed-output-in-forums.html#AEN4574"
>Compressed output in forums</A
>,
    <A
HREF="preinstalled-blocks.html#AEN5904"
>The preinstalled blocks</A
>,
    <A
HREF="preinstalled-blocks.html#AEN5908"
>The preinstalled blocks</A
>,
    <A
HREF="backend.html#AEN6165"
>Back end structure: administrator view</A
>,
    <A
HREF="php-nuke-autotheme.html#AEN7534"
>AutoTheme</A
>,
    <A
HREF="display-random-images-php-nuke-blocks.html#AEN13969"
>How to display random images in PHP-Nuke blocks</A
>,
    <A
HREF="install-modules-with-no-database-change.html#AEN18618"
>How to install modules that do not change the database structure</A
>,
    <A
HREF="adjust-server-time.html#AEN20001"
>How to adjust server time</A
>
  </DT
><DT
>administrator,
    <A
HREF="sorry-such-file-doesnt-exist.html#AEN4050"
>Sorry, such file doesn't exist...</A
>,
    <A
HREF="preinstalled-modules.html#AEN5348"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5612"
>The preinstalled modules</A
>,
    <A
HREF="administration-functions.html#AEN6352"
>The administration functions</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7143"
>phpBB Forum administration</A
>,
    <A
HREF="php-nuke-approve-membership-module.html#AEN8124"
>Approve Membership module</A
>,
    <A
HREF="php-nuke-approve-membership-module.html#AEN8126"
>Approve Membership module</A
>,
    <A
HREF="php-nuke-theme-modifying-index.html#AEN10629"
>Modifying the PHP-Nuke theme index</A
>,
    <A
HREF="bypass-article-approval.html#AEN12737"
>How to bypass article approval</A
>,
    <A
HREF="block-creation.html#AEN13179"
>How to create a new block</A
>,
    <A
HREF="module-structure.html#AEN14158"
>Module structure </A
>,
    <A
HREF="cross-site-scripting-with-php-nuke.html#AEN15535"
>Cross-site scripting with PHP-Nuke</A
>,
    <A
HREF="cookies.html#AEN16187"
>Cookie hijack</A
>,
    <A
HREF="cookies.html#AEN16214"
>Cookie hijack</A
>,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18434"
>How to restore PHP-Nuke from backup</A
>,
    <A
HREF="allow-anonymous-web-link-submissions.html#AEN18792"
>How to allow anonymous web link submissions</A
>
  </DT
><DT
>ads,
    <A
HREF="communities.html#AEN1940"
>The PHP-Nuke Communities</A
>,
    <A
HREF="communities.html#AEN1945"
>The PHP-Nuke Communities</A
>,
    <A
HREF="modules-disappear.html#AEN4739"
>Modules do not show up and/or disappear</A
>,
    <A
HREF="preinstalled-modules.html#AEN5355"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-blocks.html#AEN6039"
>The preinstalled blocks</A
>,
    <A
HREF="preinstalled-blocks.html#AEN6109"
>The preinstalled blocks</A
>,
    <A
HREF="administration-functions.html#AEN6326"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6971"
>The administration functions</A
>,
    <A
HREF="php-nuke-header-create-top-navigation-bar.html#AEN10135"
>How to create a top navigation bar as in NukeNews theme</A
>,
    <A
HREF="php-nuke-theme-modifying-index.html#AEN10666"
>Modifying the PHP-Nuke theme index</A
>,
    <A
HREF="modifying-php-nuke-html-header.html#AEN11135"
>Modifying the PHP-Nuke HTML header</A
>,
    <A
HREF="allow-special-html-tags.html#AEN11376"
>How to allow special HTML tags</A
>,
    <A
HREF="change-home-module.html#AEN18956"
>How to change the Home module</A
>,
    <A
HREF="enter-thousands-of-download-links.html#AEN19309"
>How to enter thousands of download links</A
>,
    <A
HREF="enter-thousands-of-download-links.html#AEN19317"
>How to enter thousands of download links</A
>,
    <A
HREF="find-last-date.html#AEN19724"
>How to find the last date of...</A
>,
    <A
HREF="database-tables.html#AEN20243"
>The database tables </A
>
  </DT
><DT
>AdSense,
    <A
HREF="advertisements-in-php-nuke-blocks.html#AEN13845"
>How to show advertisements in PHP-Nuke blocks</A
>
  </DT
><DT
>adsense.php,
    <A
HREF="google-adsense-on-top-of-php-nuke-module.html#AEN15049"
>Google AdSense on top of a PHP-Nuke module</A
>,
    <A
HREF="google-adsense-on-top-of-php-nuke-module.html#AEN15052"
>Google AdSense on top of a PHP-Nuke module</A
>
  </DT
><DT
>advisories,
    <A
HREF="security-fixes.html#AEN15845"
>Security fixes</A
>,
    <A
HREF="php-nuke-under-ssl.html#AEN19032"
>How to use PHP-Nuke under SSL</A
>
  </DT
><DT
>Aemmenet,
    <A
HREF="aknowledgements.html#AEN1321"
>Aknowledgements</A
>
  </DT
><DT
>aggregators,
    <A
HREF="display-images-php-nuke-blocks.html#AEN13945"
>How to display images in PHP-Nuke blocks</A
>
  </DT
><DT
>album,
    <A
HREF="php-nuke-gallery-module.html#AEN8238"
>Gallery module</A
>
  </DT
><DT
>albums,
    <A
HREF="php-nuke-gallery-module.html#AEN8222"
>Gallery module</A
>
  </DT
><DT
>Alert,
    <A
HREF="php-nuke-under-ssl.html#AEN19039"
>How to use PHP-Nuke under SSL</A
>
  </DT
><DT
>algorithms,
    <A
HREF="search-engines-and-get-method.html#AEN17140"
>Search engines and the GET method</A
>
  </DT
><DT
>AllowableHTML,
    <A
HREF="allow-special-html-tags.html#AEN11551"
>How to allow special HTML tags</A
>,
    <A
HREF="allow-special-html-tags.html#AEN11553"
>How to allow special HTML tags</A
>,
    <A
HREF="cookies.html#AEN16264"
>Cookie hijack</A
>
  </DT
><DT
>alter,
    <A
HREF="modules-disappear.html#AEN4742"
>Modules do not show up and/or disappear</A
>,
    <A
HREF="how-sessions-work.html#AEN9506"
>How sessions work in the forums</A
>
  </DT
><DT
>alternatives,
    <A
HREF="editing-php-nuke-files.html#AEN9597"
>Editing PHP (-Nuke) files</A
>,
    <A
HREF="search-engines-and-get-method.html#AEN17200"
>Search engines and the GET method</A
>
  </DT
><DT
>ampersand,
    <A
HREF="googletap.html#AEN17857"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17863"
>Installation</A
>
  </DT
><DT
>analyse,
    <A
HREF="topic-structure.html#AEN9959"
>Structure of a PHP-Nuke theme</A
>
  </DT
><DT
>analyze,
    <A
HREF="test-scripts.html#AEN3808"
>Test scripts</A
>,
    <A
HREF="test-scripts.html#AEN3853"
>analyze.php</A
>,
    <A
HREF="security-code.html#AEN4165"
>Security code is not showing up</A
>,
    <A
HREF="security-code.html#AEN4170"
>Security code is not showing up</A
>,
    <A
HREF="upload-add-on-for-phpbb.html#AEN8852"
>Upload add-on for phpBB</A
>,
    <A
HREF="security-fixes.html#AEN15826"
>Security fixes</A
>,
    <A
HREF="security-measures.html#AEN15913"
>Security measures </A
>,
    <A
HREF="security-measures.html#AEN15934"
>Security measures </A
>
  </DT
><DT
>anchors,
    <A
HREF="regular-expressions.html#AEN17508"
>Regular expressions</A
>
  </DT
><DT
>anonymous,
    <A
HREF="php-nuke-upload-module.html#AEN8790"
>Upload module</A
>,
    <A
HREF="permissions2.html#AEN16165"
>Permissions on folders and files</A
>,
    <A
HREF="restore-single-table.html#AEN18523"
>How to restore a single table</A
>
  </DT
><DT
>Apache,
    <A
HREF="mandrake-linux-apache-php-mysql.html#AEN3319"
>Apache, PHP and MySQL on Mandrake Linux</A
>,
    <A
HREF="mandrake-linux-apache-php-mysql.html#AEN3328"
>Apache, PHP and MySQL on Mandrake Linux</A
>,
    <A
HREF="mandrake-linux-apache-php-mysql.html#AEN3330"
>Apache, PHP and MySQL on Mandrake Linux</A
>,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3379"
>Apache, PHP and MySQL on Red Hat Linux</A
>,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3396"
>Apache, PHP and MySQL on Red Hat Linux</A
>,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3426"
>Apache, PHP and MySQL on Red Hat Linux</A
>,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3482"
>Apache, PHP and MySQL on Red Hat Linux</A
>,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3491"
>Apache, PHP and MySQL on Red Hat Linux</A
>,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15693"
>Cross-site tracing with PHP-Nuke</A
>,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15755"
>Cross-site tracing with PHP-Nuke</A
>,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15758"
>Cross-site tracing with PHP-Nuke</A
>,
    <A
HREF="htaccess-file.html#AEN17591"
>The .htaccess file</A
>
  </DT
><DT
>API,
    <A
HREF="mod_rewrite-api-phases.html#AEN17263"
>API phases</A
>,
    <A
HREF="mod_rewrite-api-phases.html#AEN17289"
>API phases</A
>
  </DT
><DT
>applicant,
    <A
HREF="php-nuke-approve-membership-module.html#AEN8137"
>Approve Membership module</A
>,
    <A
HREF="php-nuke-approve-membership-module.html#AEN8141"
>Approve Membership module</A
>
  </DT
><DT
>application,
    <A
HREF="upload.html#AEN2386"
>Upload through FTP</A
>,
    <A
HREF="phpmyadmin-other-commands.html#AEN2975"
>phpMyAdmin: other commands</A
>,
    <A
HREF="easyphp.html#AEN3153"
>easyPHP</A
>,
    <A
HREF="php-nuke-approve-membership-module.html#AEN8179"
>Approve Membership module</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15569"
>SQL injection with PHP-Nuke</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15635"
>SQL injection with PHP-Nuke</A
>,
    <A
HREF="adjust-server-time.html#AEN19864"
>How to adjust server time</A
>
  </DT
><DT
>approval,
    <A
HREF="php-nuke-approve-membership-module.html#AEN8129"
>Approve Membership module</A
>,
    <A
HREF="upload-add-on-for-phpbb.html#AEN8900"
>Upload add-on for phpBB</A
>,
    <A
HREF="bypass-article-approval.html#AEN12770"
>How to bypass article approval</A
>
  </DT
><DT
>architecture,
    <A
HREF="php-nuke-autotheme.html#AEN7522"
>AutoTheme</A
>
  </DT
><DT
>archived,
    <A
HREF="preinstalled-modules.html#AEN5393"
>The preinstalled modules</A
>
  </DT
><DT
>archives,
    <A
HREF="preinstalled-blocks.html#AEN6122"
>The preinstalled blocks</A
>
  </DT
><DT
>arrows,
    <A
HREF="php-nuke-ip-tracking-module.html#AEN8324"
>IP Tracking module</A
>,
    <A
HREF="php-nuke-theme-modifying-footer.html#AEN10695"
>Modifying the PHP-Nuke theme footer</A
>
  </DT
><DT
>article,
    <A
HREF="preinstalled-modules.html#AEN5298"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5303"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5309"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5313"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5315"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5595"
>The preinstalled modules</A
>,
    <A
HREF="administration-functions.html#AEN6196"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6200"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6204"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6210"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6216"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6228"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6468"
>The administration functions</A
>,
    <A
HREF="preferences.html#AEN7259"
>The Preferences Page </A
>,
    <A
HREF="preferences.html#AEN7261"
>The Preferences Page </A
>,
    <A
HREF="preferences.html#AEN7379"
>The Preferences Page </A
>,
    <A
HREF="multipage-news-articles.html#AEN10527"
>How to get multipage News articles</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11037"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="get-rid-of-br-in-news.html#AEN12703"
>How to get rid of the need to use &#60;br&#62; for new lines</A
>,
    <A
HREF="google-adsense-in-news-module.html#AEN15022"
>Google AdSense in the News module</A
>,
    <A
HREF="google-adsense-in-news-module.html#AEN15028"
>Google AdSense in the News module</A
>,
    <A
HREF="how-secure-is-php-nuke.html#AEN15230"
>How secure is PHP-Nuke?</A
>,
    <A
HREF="how-secure-is-php-nuke.html#AEN15256"
>How secure is PHP-Nuke?</A
>,
    <A
HREF="display-html-code-in-faq.html#AEN19172"
>How to display HTML code in a FAQ</A
>,
    <A
HREF="date-time.html#AEN19648"
>How to deal with date and time</A
>,
    <A
HREF="find-last-date.html#AEN19672"
>How to find the last date of...</A
>,
    <A
HREF="find-last-date.html#AEN19682"
>How to find the last date of...</A
>,
    <A
HREF="flash-php-nuke-news.html#AEN20104"
>How to embed a Flash object in PHP-Nuke News</A
>
  </DT
><DT
>Articles,
    <A
HREF="preinstalled-blocks.html#AEN6021"
>The preinstalled blocks</A
>,
    <A
HREF="preinstalled-blocks.html#AEN6102"
>The preinstalled blocks</A
>
  </DT
><DT
>ascending,
    <A
HREF="simple-module-block.html#AEN11730"
>Simple module block</A
>
  </DT
><DT
>assertion,
    <A
HREF="googletap.html#AEN17990"
>How it works</A
>
  </DT
><DT
>ations,
    <A
HREF="aknowledgements.html#AEN1301"
>Aknowledgements</A
>,
    <A
HREF="phpmyadmin-other-commands.html#AEN2977"
>phpMyAdmin: other commands</A
>,
    <A
HREF="more-than-one-php-nuke-sites.html#AEN3691"
>Different PHP-Nuke sites from the same database</A
>,
    <A
HREF="more-than-one-php-nuke-sites.html#AEN3725"
>Different PHP-Nuke sites with the same user base</A
>,
    <A
HREF="mail-problems.html#AEN4295"
>Users don't receive any confirmation mails</A
>,
    <A
HREF="forums-cant-create-category-without-name.html#AEN4790"
>Forums Error: Can't create a category without a name</A
>,
    <A
HREF="forums-cant-create-category-without-name.html#AEN4819"
>Forums Error: Can't create a category without a name</A
>,
    <A
HREF="changing-web-hoster.html#AEN5112"
>Changing Web hoster</A
>,
    <A
HREF="preinstalled-modules.html#AEN5306"
>The preinstalled modules</A
>,
    <A
HREF="php-nuke-meteosat-block.html#AEN7656"
>Meteosat block</A
>,
    <A
HREF="php-nuke-google-adsense-block.html#AEN7865"
>Google AdSense block</A
>,
    <A
HREF="php-nuke-approve-membership-module.html#AEN8120"
>Approve Membership module</A
>,
    <A
HREF="directory-structure.html#AEN9229"
>Directory structure </A
>,
    <A
HREF="admin-management.html#AEN9381"
>Administration management </A
>,
    <A
HREF="admin-management.html#AEN9413"
>Administration management </A
>,
    <A
HREF="how-sessions-work.html#AEN9486"
>How sessions work in the forums</A
>,
    <A
HREF="simple-module-block.html#AEN11736"
>Simple module block</A
>,
    <A
HREF="modifying-php-nuke-admin-panel.html#AEN12990"
>Modifying the PHP-Nuke administration panel</A
>,
    <A
HREF="how-to-include-files.html#AEN13293"
>How to include PHP/HTML files in a PHP-Nuke block</A
>,
    <A
HREF="paypal-block-for-php-nuke.html#AEN14076"
>How to display HTML forms in a block: Paypal</A
>,
    <A
HREF="module-admin.html#AEN14423"
>Module creation, administrator part</A
>,
    <A
HREF="caching-php-nuke-conclusion.html#AEN17057"
>Caching PHP-Nuke: Conclusion</A
>,
    <A
HREF="make-dynamic-css.html#AEN18217"
>How to make a dynamic CSS</A
>,
    <A
HREF="install-patches-correct-errors.html#AEN18705"
>How to install patches and correct errors</A
>,
    <A
HREF="install-patches-correct-errors.html#AEN18739"
>How to install patches and correct errors</A
>,
    <A
HREF="css-syntax.html#AEN20878"
>The syntax of CSS</A
>
  </DT
><DT
>attachments,
    <A
HREF="preferences.html#AEN7471"
>The Preferences Page </A
>,
    <A
HREF="preferences.html#AEN7473"
>The Preferences Page </A
>,
    <A
HREF="security-measures.html#AEN15904"
>Security measures </A
>
  </DT
><DT
>attack,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15642"
>SQL injection with PHP-Nuke</A
>,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15709"
>Cross-site tracing with PHP-Nuke</A
>
  </DT
><DT
>attackers,
    <A
HREF="how-secure-is-php-nuke.html#AEN15245"
>How secure is PHP-Nuke?</A
>,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15722"
>Cross-site tracing with PHP-Nuke</A
>
  </DT
><DT
>attribute,
    <A
HREF="make-dynamic-css.html#AEN18229"
>How to make a dynamic CSS</A
>,
    <A
HREF="css-syntax.html#AEN20855"
>The syntax of CSS</A
>,
    <A
HREF="css-syntax.html#AEN20860"
>The syntax of CSS</A
>
  </DT
><DT
>attributes,
    <A
HREF="php-nuke-header-watermark-background-image.html#AEN10419"
>How to display a watermark background image</A
>,
    <A
HREF="allow-special-html-tags.html#AEN11560"
>How to allow special HTML tags</A
>,
    <A
HREF="allow-special-html-tags.html#AEN11574"
>How to allow special HTML tags</A
>,
    <A
HREF="allow-special-html-tags.html#AEN11578"
>How to allow special HTML tags</A
>,
    <A
HREF="html-create-table.html#AEN20730"
>How to create a table in HTML</A
>,
    <A
HREF="css-syntax.html#AEN20862"
>The syntax of CSS</A
>
  </DT
><DT
>authentication,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15697"
>Cross-site tracing with PHP-Nuke</A
>,
    <A
HREF="cookies.html#AEN16177"
>Cookies - timeout and configuration</A
>
  </DT
><DT
>authorization,
    <A
HREF="mod_rewrite-api-phases.html#AEN17267"
>API phases</A
>
  </DT
><DT
>AvantGO,
    <A
HREF="credits-version-1.0.html#AEN399"
>Version 1.0</A
>,
    <A
HREF="preinstalled-modules.html#AEN5324"
>The preinstalled modules</A
>
  </DT
><DT
>avatars,
    <A
HREF="php-nuke-vs-xoops.html#AEN2209"
>PHP-Nuke vs. XOOPS</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7100"
>phpBB Forum administration</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN22395"
>B</A
></H2
><DL
><DT
>babe,
    <A
HREF="display-random-images-php-nuke-blocks.html#AEN13976"
>How to display random images in PHP-Nuke blocks</A
>
  </DT
><DT
>Babelfish,
    <A
HREF="credits-versions-1.x.html#AEN543"
>Versions 1.x</A
>
  </DT
><DT
>baby,
    <A
HREF="aknowledgements.html#AEN1347"
>Aknowledgements</A
>
  </DT
><DT
>backend,
    <A
HREF="administration-functions.html#AEN6373"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6403"
>The administration functions</A
>
  </DT
><DT
>backend.php,
    <A
HREF="administration-functions.html#AEN6380"
>The administration functions</A
>
  </DT
><DT
>background,
    <A
HREF="topic-structure.html#AEN9864"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="topic-structure.html#AEN9980"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="example-creation-html-template.html#AEN10055"
>Example creation of HTML file to include in the theme</A
>,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12396"
>How to redirect Your Info to the Forums user profile</A
>,
    <A
HREF="css-syntax.html#AEN20787"
>The syntax of CSS</A
>
  </DT
><DT
>backreference,
    <A
HREF="mod_rewrite-quoting-special-characters.html#AEN17352"
>Quoting special characters</A
>
  </DT
><DT
>backreferences,
    <A
HREF="regular-expressions.html#AEN17519"
>Regular expressions</A
>,
    <A
HREF="googletap.html#AEN17980"
>How it works</A
>
  </DT
><DT
>backslash,
    <A
HREF="security-audit.html#AEN16041"
>Security audit</A
>,
    <A
HREF="regular-expressions.html#AEN17524"
>Regular expressions</A
>
  </DT
><DT
>backup,
    <A
HREF="upgrade-php-nuke.html#AEN4858"
>How to upgrade PHP-Nuke</A
>,
    <A
HREF="changing-web-hoster.html#AEN5129"
>Changing Web hoster</A
>,
    <A
HREF="changing-web-hoster.html#AEN5143"
>Changing Web hoster</A
>,
    <A
HREF="changing-web-hoster.html#AEN5151"
>Changing Web hoster</A
>,
    <A
HREF="administration-functions.html#AEN6823"
>The administration functions</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7073"
>phpBB Forum administration</A
>,
    <A
HREF="restore-single-table.html#AEN18529"
>How to restore a single table</A
>,
    <A
HREF="restore-single-table.html#AEN18531"
>How to restore a single table</A
>,
    <A
HREF="restore-single-table.html#AEN18536"
>How to restore a single table</A
>,
    <A
HREF="restore-single-table.html#AEN18540"
>How to restore a single table</A
>,
    <A
HREF="restore-single-table.html#AEN18545"
>How to restore a single table</A
>,
    <A
HREF="backup-mysql-using-browser.html#AEN20120"
>How to backup your MySQL database using only the browser</A
>
  </DT
><DT
>Backup DB,
    <A
HREF="administration-functions.html#AEN6292"
>The administration functions</A
>
  </DT
><DT
>backups,
    <A
HREF="changing-web-hoster.html#AEN5137"
>Changing Web hoster</A
>,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18461"
>How to restore PHP-Nuke from backup</A
>,
    <A
HREF="backup-mysql-using-browser.html#AEN20144"
>How to backup your MySQL database using only the browser</A
>
  </DT
><DT
>ban,
    <A
HREF="ban-ip-addresses.html#AEN16336"
>How to ban IP addresses</A
>
  </DT
><DT
>banned,
    <A
HREF="php-nuke-protector-module.html#AEN8472"
>Protector module</A
>,
    <A
HREF="ban-ip-addresses.html#AEN16334"
>How to ban IP addresses</A
>,
    <A
HREF="ban-ip-addresses.html#AEN16338"
>How to ban IP addresses</A
>,
    <A
HREF="ban-ip-addresses.html#AEN16360"
>How to ban IP addresses</A
>
  </DT
><DT
>banner,
    <A
HREF="preinstalled-blocks.html#AEN6031"
>The preinstalled blocks</A
>,
    <A
HREF="topic-structure.html#AEN9952"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="topic-structure.html#AEN9955"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="php-nuke-header-change-banner-placement.html#AEN10270"
>How to change placement of the banner in the PHP-Nuke header</A
>,
    <A
HREF="php-nuke-header-display-flash-object.html#AEN10446"
>How to display a Flash object in the PHP-Nuke header</A
>,
    <A
HREF="flash-php-nuke-blocks.html#AEN13823"
>How to display Flash in PHP-Nuke blocks</A
>,
    <A
HREF="display-random-images-php-nuke-blocks.html#AEN13978"
>How to display random images in PHP-Nuke blocks</A
>
  </DT
><DT
>banners,
    <A
HREF="directory-structure.html#AEN9221"
>Directory structure </A
>,
    <A
HREF="topic-structure.html#AEN9948"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="php-nuke-header-change-banner-placement.html#AEN10268"
>How to change placement of the banner in the PHP-Nuke header</A
>,
    <A
HREF="modifying-php-nuke-html-header.html#AEN11137"
>Modifying the PHP-Nuke HTML header</A
>
  </DT
><DT
>banning,
    <A
HREF="php-nuke-ip-tracking-module.html#AEN8385"
>IP Tracking module</A
>,
    <A
HREF="ban-ip-addresses.html#AEN16371"
>How to ban IP addresses</A
>
  </DT
><DT
>bars,
    <A
HREF="php-nuke-treemenu-with-javascript.html#AEN7833"
>Treemenu with Javascript</A
>
  </DT
><DT
>base,
    <A
HREF="database-creation.html#AEN2631"
>Database creation</A
>,
    <A
HREF="phpmyadmin.html#AEN2646"
>How to install PHP-Nuke through phpMyAdmin</A
>,
    <A
HREF="install-phpmyadmin.html#AEN2681"
>How to install phpMyAdmin</A
>,
    <A
HREF="phpmyadmin2.html#AEN2719"
>phpMyAdmin: How to administer MySQL via Web</A
>,
    <A
HREF="phpmyadmin2.html#AEN2750"
>phpMyAdmin: How to administer MySQL via Web</A
>,
    <A
HREF="phpmyadmin-navigation-bar-structure.html#AEN2776"
>phpMyAdmin navigation bar: Structure</A
>,
    <A
HREF="phpmyadmin-navigation-bar-sql.html#AEN2850"
>phpMyAdmin navigation bar: SQL</A
>,
    <A
HREF="phpmyadmin-navigation-bar-export.html#AEN2915"
>phpMyAdmin navigation bar: Export</A
>,
    <A
HREF="install-db.html#AEN3003"
>How to install the DB of PHP-Nuke with PHPMyadmin</A
>,
    <A
HREF="install-db.html#AEN3051"
>How to install the DB of PHP-Nuke with PHPMyadmin</A
>,
    <A
HREF="install-php-nuke-nukesql.html#AEN3084"
>How to install PHP-Nuke using nukesql.php</A
>,
    <A
HREF="config-php-file.html#AEN3534"
>The config.php file</A
>,
    <A
HREF="config-php-file.html#AEN3539"
>The config.php file</A
>,
    <A
HREF="config-php-file.html#AEN3611"
>The config.php file</A
>,
    <A
HREF="config-php-file.html#AEN3617"
>The config.php file</A
>,
    <A
HREF="more-than-one-php-nuke-sites.html#AEN3676"
>Different PHP-Nuke sites from the same database</A
>,
    <A
HREF="warning-mysql_fetch_row-supplied-argument.html#AEN3932"
>Warning: mysql_fetch_row(): supplied argument is not a valid MySQL result resource</A
>,
    <A
HREF="call-to-undefined-function.html#AEN3953"
>Call to undefined function: message_die() in db.php line 88</A
>,
    <A
HREF="call-to-undefined-function.html#AEN3967"
>Call to undefined function: message_die() in db.php line 88</A
>,
    <A
HREF="failed-opening-lang-php.html#AEN3992"
>Error: Failed opening 'language/lang-.php' for inclusion</A
>,
    <A
HREF="cannot-create-administrator-account.html#AEN4446"
>You cannot create the administrator account</A
>,
    <A
HREF="upgrade-php-nuke.html#AEN4874"
>How to upgrade PHP-Nuke</A
>,
    <A
HREF="upgrade-php-nuke.html#AEN4886"
>How to upgrade PHP-Nuke</A
>,
    <A
HREF="transferring-local-installation-to-web.html#AEN5031"
>Transferring a local installation to the Web</A
>,
    <A
HREF="changing-web-hoster.html#AEN5117"
>Changing Web hoster</A
>,
    <A
HREF="changing-web-hoster.html#AEN5120"
>Changing Web hoster</A
>,
    <A
HREF="changing-web-hoster.html#AEN5147"
>Changing Web hoster</A
>,
    <A
HREF="administration-functions.html#AEN6289"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6294"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6421"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6819"
>The administration functions</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7062"
>phpBB Forum administration</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7115"
>phpBB Forum administration</A
>,
    <A
HREF="php-nuke-my-headlines-module.html#AEN8625"
>My Headlines module</A
>,
    <A
HREF="php-nuke-my-headlines-module.html#AEN8639"
>My Headlines module</A
>,
    <A
HREF="php-nuke-workboard-module.html#AEN9055"
>WorkBoard Module</A
>,
    <A
HREF="directory-structure.html#AEN9251"
>Directory structure </A
>,
    <A
HREF="how-sessions-work.html#AEN9526"
>How sessions work in the forums</A
>,
    <A
HREF="user-extra-information.html#AEN9657"
>More than 255 characters of user extra information</A
>,
    <A
HREF="user-extra-information.html#AEN9679"
>More than 255 characters of user extra information</A
>,
    <A
HREF="simple-module-block.html#AEN11706"
>Simple module block</A
>,
    <A
HREF="cross-site-scripting-with-php-nuke.html#AEN15533"
>Cross-site scripting with PHP-Nuke</A
>,
    <A
HREF="security-measures.html#AEN15923"
>Security measures </A
>,
    <A
HREF="permissions2.html#AEN16167"
>Permissions on folders and files</A
>,
    <A
HREF="caching-php-nuke.html#AEN16469"
>Caching PHP-Nuke</A
>,
    <A
HREF="proceed-when-mysql-slow.html#AEN18268"
>How to proceed when MySQL is slow</A
>,
    <A
HREF="proceed-when-mysql-slow.html#AEN18281"
>How to proceed when MySQL is slow</A
>,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18425"
>How to restore PHP-Nuke from backup</A
>,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18427"
>How to restore PHP-Nuke from backup</A
>,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18431"
>How to restore PHP-Nuke from backup</A
>,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18450"
>How to restore PHP-Nuke from backup</A
>,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18458"
>How to restore PHP-Nuke from backup</A
>,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18475"
>How to restore PHP-Nuke from backup</A
>,
    <A
HREF="install-modules-with-database-change.html#AEN18647"
>How to install modules that change the database structure</A
>,
    <A
HREF="install-modules-with-database-change.html#AEN18652"
>How to install modules that change the database structure</A
>,
    <A
HREF="enter-thousands-of-ephemerids.html#AEN19453"
>How to enter thousands of ephemerids</A
>,
    <A
HREF="adjust-server-time.html#AEN19871"
>How to adjust server time</A
>,
    <A
HREF="deal-with-quotes-in-sitename.html#AEN20074"
>How to deal with quotes in the site's name</A
>,
    <A
HREF="backup-mysql-using-browser.html#AEN20111"
>How to backup your MySQL database using only the browser</A
>,
    <A
HREF="backup-mysql-using-browser.html#AEN20115"
>How to backup your MySQL database using only the browser</A
>,
    <A
HREF="php-syntax.html#AEN20920"
>The syntax of PHP code</A
>,
    <A
HREF="sql-syntax.html#AEN21070"
>The syntax of SQL code</A
>,
    <A
HREF="sql-syntax.html#AEN21074"
>The syntax of SQL code</A
>,
    <A
HREF="mysql-frontend.html#AEN21145"
>MySQL Front, how to administer a MySQL DB from Windows </A
>,
    <A
HREF="mysql-frontend.html#AEN21147"
>MySQL Front, how to administer a MySQL DB from Windows </A
>,
    <A
HREF="mysql-frontend.html#AEN21149"
>MySQL Front, how to administer a MySQL DB from Windows </A
>
  </DT
><DT
>BBcode,
    <A
HREF="get-rid-of-br-in-news.html#AEN12681"
>How to get rid of the need to use &#60;br&#62; for new lines</A
>,
    <A
HREF="get-rid-of-br-in-news.html#AEN12685"
>How to get rid of the need to use &#60;br&#62; for new lines</A
>,
    <A
HREF="database-tables.html#AEN20197"
>The database tables </A
>
  </DT
><DT
>Bechini,
    <A
HREF="aknowledgements.html#AEN1305"
>Aknowledgements</A
>,
    <A
HREF="aknowledgements.html#AEN1384"
>Aknowledgements</A
>
  </DT
><DT
>Bibliography,
    <A
HREF="credits.html#AEN360"
>Credits</A
>
  </DT
><DT
>Birenbaum,
    <A
HREF="create-fade-block.html#AEN13495"
>How to create a fade block</A
>
  </DT
><DT
>block,
    <A
HREF="preinstalled-modules.html#AEN5421"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-blocks.html#AEN5963"
>The preinstalled blocks</A
>,
    <A
HREF="preinstalled-blocks.html#AEN6017"
>The preinstalled blocks</A
>,
    <A
HREF="administration-functions.html#AEN6250"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6427"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6431"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6502"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6504"
>The administration functions</A
>,
    <A
HREF="php-nuke-comic-block.html#AEN7668"
>Comic block</A
>,
    <A
HREF="php-nuke-treemenu-with-php.html#AEN7767"
>Treemenu with PHP</A
>,
    <A
HREF="php-nuke-random-quotes-block.html#AEN7888"
>Random Quotes block</A
>,
    <A
HREF="php-nuke-event-calendar-module.html#AEN8016"
>Event calendar</A
>,
    <A
HREF="php-nuke-tools-module.html#AEN8670"
>PHP-Nuke-Tools module </A
>,
    <A
HREF="php-nuke-module-and-block-titles.html#AEN9776"
>PHP-Nuke module and block titles</A
>,
    <A
HREF="php-nuke-module-and-block-titles.html#AEN9778"
>PHP-Nuke module and block titles</A
>,
    <A
HREF="example-creation-html-template.html#AEN10053"
>Example creation of HTML file to include in the theme</A
>,
    <A
HREF="php-nuke-header-display-flash-object.html#AEN10450"
>How to display a Flash object in the PHP-Nuke header</A
>,
    <A
HREF="hide-left-blocks.html#AEN10456"
>How to hide the left blocks</A
>,
    <A
HREF="php-nuke-theme-modifying-footer.html#AEN10705"
>Modifying the PHP-Nuke theme footer</A
>,
    <A
HREF="change-buggy-block.html#AEN11664"
>How to change a buggy block</A
>,
    <A
HREF="change-buggy-block.html#AEN11670"
>How to change a buggy block</A
>,
    <A
HREF="build-custom-module-blocks.html#AEN11690"
>How to build custom module blocks</A
>,
    <A
HREF="build-custom-module-blocks.html#AEN11693"
>How to build custom module blocks</A
>,
    <A
HREF="simple-module-block.html#AEN11734"
>Simple module block</A
>,
    <A
HREF="treemenu-block.html#AEN11757"
>Treemenu block</A
>,
    <A
HREF="treemenu-block.html#AEN11869"
>What is Treemenu </A
>,
    <A
HREF="build-rss-blocks-with-variable-news-number.html#AEN11891"
>How to build RSS blocks with variable number of news items</A
>,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12414"
>How to redirect Your Info to the Forums user profile</A
>,
    <A
HREF="blocks.html#AEN13107"
>Creating PHP-Nuke blocks</A
>,
    <A
HREF="block-types.html#AEN13129"
>The characteristics of the various types of blocks</A
>,
    <A
HREF="block-types.html#AEN13144"
>The characteristics of the various types of blocks</A
>,
    <A
HREF="block-creation.html#AEN13187"
>How to create a new block</A
>,
    <A
HREF="block-creation.html#AEN13192"
>How to create a new block</A
>,
    <A
HREF="block-theory.html#AEN13198"
>How to create a block, theoretical approach</A
>,
    <A
HREF="block-theory.html#AEN13212"
>How to create a block, theoretical approach</A
>,
    <A
HREF="simple-content-block.html#AEN13257"
>Simple Content block</A
>,
    <A
HREF="simple-content-block.html#AEN13260"
>Simple Content block</A
>,
    <A
HREF="simple-content-block.html#AEN13269"
>Simple Content block</A
>,
    <A
HREF="how-to-include-files.html#AEN13282"
>How to include PHP/HTML files in a PHP-Nuke block</A
>,
    <A
HREF="how-to-include-files.html#AEN13285"
>How to include PHP/HTML files in a PHP-Nuke block</A
>,
    <A
HREF="how-to-include-files.html#AEN13332"
>How to include PHP/HTML files in a PHP-Nuke block</A
>,
    <A
HREF="how-to-include-files.html#AEN13335"
>How to include PHP/HTML files in a PHP-Nuke block</A
>,
    <A
HREF="how-to-include-files.html#AEN13339"
>How to include PHP/HTML files in a PHP-Nuke block</A
>,
    <A
HREF="how-to-include-files.html#AEN13349"
>How to include PHP/HTML files in a PHP-Nuke block</A
>,
    <A
HREF="javascript-in-php-nuke-blocks.html#AEN13396"
>How to use Javascript in PHP-Nuke blocks</A
>,
    <A
HREF="create-hello-world-block.html#AEN13444"
>How to create a Hello World block</A
>,
    <A
HREF="create-hello-world-block.html#AEN13446"
>How to create a Hello World block</A
>,
    <A
HREF="create-hello-world-block.html#AEN13464"
>How to create a Hello World block</A
>,
    <A
HREF="create-hello-world-block.html#AEN13472"
>How to create a Hello World block</A
>,
    <A
HREF="create-hello-world-block.html#AEN13480"
>How to create a Hello World block</A
>,
    <A
HREF="create-fade-block.html#AEN13498"
>How to create a fade block</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13697"
>How to create a Help Center Live block</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13776"
>How to create a Help Center Live block</A
>,
    <A
HREF="flash-php-nuke-blocks.html#AEN13814"
>How to display Flash in PHP-Nuke blocks</A
>,
    <A
HREF="advertisements-in-php-nuke-blocks.html#AEN13855"
>How to show advertisements in PHP-Nuke blocks</A
>,
    <A
HREF="display-images-php-nuke-blocks.html#AEN13901"
>How to display images in PHP-Nuke blocks</A
>,
    <A
HREF="display-random-images-php-nuke-blocks.html#AEN13960"
>How to display random images in PHP-Nuke blocks</A
>,
    <A
HREF="display-random-images-php-nuke-blocks.html#AEN13967"
>How to display random images in PHP-Nuke blocks</A
>,
    <A
HREF="paypal-block-for-php-nuke.html#AEN14002"
>How to display HTML forms in a block: Paypal</A
>,
    <A
HREF="create-logout-module.html#AEN14979"
>How to create a Logout module</A
>,
    <A
HREF="create-logout-module.html#AEN14985"
>How to create a Logout module</A
>,
    <A
HREF="google-adsense-in-news-module.html#AEN15038"
>Google AdSense in the News module</A
>,
    <A
HREF="security-audit.html#AEN16036"
>Security audit</A
>,
    <A
HREF="cache-lite.html#AEN16685"
>How to use Cache-Lite</A
>,
    <A
HREF="cache-lite.html#AEN16717"
>How to use Cache-Lite</A
>,
    <A
HREF="cache-lite.html#AEN16726"
>How to use Cache-Lite</A
>,
    <A
HREF="cache-lite.html#AEN16741"
>How to use Cache-Lite</A
>,
    <A
HREF="cache-lite.html#AEN16757"
>How to use Cache-Lite</A
>,
    <A
HREF="googletap.html#AEN17887"
>Installation</A
>,
    <A
HREF="make-php-nuke-hot-link-stealth.html#AEN18138"
>How to make PHP-Nuke hot link stealth</A
>
  </DT
><DT
>block-Login.php,
    <A
HREF="security-code.html#AEN4229"
>How to bypass the security code</A
>
  </DT
><DT
>block-Online_Support,
    <A
HREF="create-help-center-live-block.html#AEN13695"
>How to create a Help Center Live block</A
>
  </DT
><DT
>Blocks,
    <A
HREF="test-scripts.html#AEN3893"
>analyze.php</A
>,
    <A
HREF="frontend.html#AEN5213"
>Front end structure: user view</A
>,
    <A
HREF="administration-functions.html#AEN6342"
>The administration functions</A
>,
    <A
HREF="advertisements-in-php-nuke-blocks.html#AEN13853"
>How to show advertisements in PHP-Nuke blocks</A
>,
    <A
HREF="display-random-images-php-nuke-blocks.html#AEN13973"
>How to display random images in PHP-Nuke blocks</A
>
  </DT
><DT
>board,
    <A
HREF="how-sessions-work.html#AEN9442"
>How sessions work in the forums</A
>,
    <A
HREF="how-sessions-work.html#AEN9491"
>How sessions work in the forums</A
>
  </DT
><DT
>border,
    <A
HREF="php-nuke-header-change-logo.html#AEN10216"
>How to change the logo in the PHP-Nuke header</A
>,
    <A
HREF="html-create-table.html#AEN20732"
>How to create a table in HTML</A
>
  </DT
><DT
>bottom-up,
    <A
HREF="find-all-registration-links.html#AEN18775"
>How to find all registration links</A
>
  </DT
><DT
>Browse,
    <A
HREF="phpmyadmin-navigation-bar-structure.html#AEN2781"
>phpMyAdmin navigation bar: Structure</A
>,
    <A
HREF="phpmyadmin-navigation-bar-structure.html#AEN2799"
>phpMyAdmin navigation bar: Structure</A
>,
    <A
HREF="phpmyadmin-navigation-bar-structure.html#AEN2805"
>phpMyAdmin navigation bar: Structure</A
>,
    <A
HREF="phpmyadmin-navigation-bar-sql.html#AEN2839"
>phpMyAdmin navigation bar: SQL</A
>,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18481"
>How to restore PHP-Nuke from backup</A
>,
    <A
HREF="restore-single-table.html#AEN18547"
>How to restore a single table</A
>
  </DT
><DT
>buffer,
    <A
HREF="how-to-include-files.html#AEN13308"
>How to include PHP/HTML files in a PHP-Nuke block</A
>,
    <A
HREF="how-to-include-files.html#AEN13312"
>How to include PHP/HTML files in a PHP-Nuke block</A
>,
    <A
HREF="how-to-include-files.html#AEN13316"
>How to include PHP/HTML files in a PHP-Nuke block</A
>,
    <A
HREF="how-to-include-files.html#AEN13320"
>How to include PHP/HTML files in a PHP-Nuke block</A
>,
    <A
HREF="how-to-include-files.html#AEN13324"
>How to include PHP/HTML files in a PHP-Nuke block</A
>,
    <A
HREF="googletap.html#AEN17897"
>How it works</A
>,
    <A
HREF="googletap.html#AEN18026"
>How it works</A
>
  </DT
><DT
>buffering,
    <A
HREF="cannot-add-header-information-in-forums.html#AEN4608"
>Warning: Cannot add header information...in forums</A
>,
    <A
HREF="how-to-include-files.html#AEN13342"
>How to include PHP/HTML files in a PHP-Nuke block</A
>,
    <A
HREF="googletap.html#AEN17782"
>Installation</A
>,
    <A
HREF="googletap.html#AEN18040"
>How it works</A
>
  </DT
><DT
>bug,
    <A
HREF="build-rss-blocks-with-variable-news-number.html#AEN11894"
>How to build RSS blocks with variable number of news items</A
>
  </DT
><DT
>bugs,
    <A
HREF="communities.html#AEN1951"
>The PHP-Nuke Communities</A
>,
    <A
HREF="how-secure-is-php-nuke.html#AEN15268"
>How secure is PHP-Nuke?</A
>,
    <A
HREF="security-fixes.html#AEN15816"
>Security fixes</A
>,
    <A
HREF="solve-common-problems-php-nuke.html#AEN18297"
>How to solve common probems with PHP-Nuke</A
>
  </DT
><DT
>Bureaucracy,
    <A
HREF="discordian-calendar.html#AEN20023"
>The Discordian Calendar</A
>
  </DT
><DT
>burglar,
    <A
HREF="cookies.html#AEN16195"
>Cookie hijack</A
>
  </DT
><DT
>Burzi,
    <A
HREF="whatis-phpnuke.html#AEN1823"
>What Is PHP-Nuke</A
>,
    <A
HREF="history.html#AEN1864"
>Short history of PHP-Nuke</A
>,
    <A
HREF="php-nuke-copyright-notice.html#AEN10748"
>The PHP-Nuke Copyright notice</A
>
  </DT
><DT
>business,
    <A
HREF="whatis-phpnuke.html#AEN1763"
>What Is PHP-Nuke</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13512"
>How to create a Help Center Live block</A
>,
    <A
HREF="paypal-block-for-php-nuke.html#AEN14018"
>How to display HTML forms in a block: Paypal</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN22711"
>C</A
></H2
><DL
><DT
>cache,
    <A
HREF="php-nuke-moon-sun-block.html#AEN7597"
>Moon &#38; Sun block</A
>,
    <A
HREF="how-sessions-work.html#AEN9467"
>How sessions work in the forums</A
>,
    <A
HREF="cache-lite.html#AEN16767"
>How to use Cache-Lite</A
>,
    <A
HREF="cache-lite.html#AEN16788"
>How to use Cache-Lite</A
>,
    <A
HREF="turck-mmcache.html#AEN16928"
>Configuration of Turck MMCache</A
>,
    <A
HREF="turck-mmcache.html#AEN16931"
>Configuration of Turck MMCache</A
>,
    <A
HREF="caching-php-nuke-conclusion.html#AEN17055"
>Caching PHP-Nuke: Conclusion</A
>
  </DT
><DT
>Cache-Lite,
    <A
HREF="cache-lite.html#AEN16676"
>Installation of Cache-Lite</A
>,
    <A
HREF="cache-lite.html#AEN16696"
>How to use Cache-Lite</A
>,
    <A
HREF="cache-lite.html#AEN16698"
>How to use Cache-Lite</A
>,
    <A
HREF="cache-lite.html#AEN16797"
>How to use Cache-Lite</A
>,
    <A
HREF="caching-php-nuke-conclusion.html#AEN17037"
>Caching PHP-Nuke: Conclusion</A
>,
    <A
HREF="caching-php-nuke-conclusion.html#AEN17041"
>Caching PHP-Nuke: Conclusion</A
>,
    <A
HREF="php-nuke-under-ssl.html#AEN19063"
>How to use PHP-Nuke under SSL</A
>
  </DT
><DT
>cached,
    <A
HREF="cache-lite.html#AEN16714"
>How to use Cache-Lite</A
>,
    <A
HREF="cache-lite.html#AEN16772"
>How to use Cache-Lite</A
>
  </DT
><DT
>calendar,
    <A
HREF="discordian-calendar.html#AEN20031"
>The Discordian Calendar</A
>,
    <A
HREF="discordian-calendar.html#AEN20033"
>The Discordian Calendar</A
>,
    <A
HREF="discordian-calendar.html#AEN20042"
>The Discordian Calendar</A
>
  </DT
><DT
>campaigns,
    <A
HREF="database-tables.html#AEN20185"
>The database tables </A
>
  </DT
><DT
>Campoli,
    <A
HREF="aknowledgements.html#AEN1382"
>Aknowledgements</A
>
  </DT
><DT
>camPortal,
    <A
HREF="php-nuke-webcam-module.html#AEN8587"
>WebCam module</A
>
  </DT
><DT
>cancel,
    <A
HREF="module-public.html#AEN14291"
>Module creation, the public part</A
>
  </DT
><DT
>captions,
    <A
HREF="php-nuke-gallery-module.html#AEN8243"
>Gallery module</A
>
  </DT
><DT
>capture,
    <A
HREF="administration-functions.html#AEN6399"
>The administration functions</A
>
  </DT
><DT
>care,
    <A
HREF="how-secure-is-php-nuke.html#AEN15290"
>How secure is PHP-Nuke?</A
>
  </DT
><DT
>cartoon,
    <A
HREF="php-nuke-daily-comic-module.html#AEN7949"
>Daily Comic module</A
>
  </DT
><DT
>cartoonists,
    <A
HREF="make-php-nuke-hot-link-stealth.html#AEN18140"
>How to make PHP-Nuke hot link stealth</A
>
  </DT
><DT
>cascading,
    <A
HREF="change-font-size-php-nuke.html#AEN11027"
>How to change the font size in PHP-Nuke</A
>
  </DT
><DT
>case,
    <A
HREF="config-php-file.html#AEN3650"
>The config.php file</A
>,
    <A
HREF="mail-problems.html#AEN4285"
>Users don't receive any confirmation mails</A
>,
    <A
HREF="forums-cant-create-category-without-name.html#AEN4756"
>Forums Error: Can't create a category without a name</A
>,
    <A
HREF="forums-cant-create-category-without-name.html#AEN4814"
>Forums Error: Can't create a category without a name</A
>,
    <A
HREF="transferring-local-installation-to-web.html#AEN5044"
>Transferring a local installation to the Web</A
>,
    <A
HREF="preinstalled-modules.html#AEN5453"
>The preinstalled modules</A
>,
    <A
HREF="php-nuke-protector-module.html#AEN8413"
>Protector module</A
>,
    <A
HREF="admin-management.html#AEN9409"
>Administration management </A
>,
    <A
HREF="php-nuke-header-change.html#AEN10177"
>How to change the PHP-Nuke header depending on some global feature</A
>,
    <A
HREF="more-than-127-faq-answers.html#AEN12119"
>How to add more than 127 FAQ answers</A
>,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12448"
>How to redirect Your Info to the Forums user profile</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13715"
>How to create a Help Center Live block</A
>,
    <A
HREF="module-admin.html#AEN14402"
>Module creation, administrator part</A
>,
    <A
HREF="duplicating-php-nuke-faq-module.html#AEN15184"
>Duplicating the PHP-Nuke FAQ module</A
>,
    <A
HREF="cache-lite.html#AEN16744"
>How to use Cache-Lite</A
>,
    <A
HREF="htaccess-file.html#AEN17595"
>The .htaccess file</A
>,
    <A
HREF="googletap.html#AEN17909"
>How it works</A
>,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18466"
>How to restore PHP-Nuke from backup</A
>,
    <A
HREF="make-encyclopedia-international.html#AEN19542"
>How to make the Encyclopedia international</A
>,
    <A
HREF="php-variables.html#AEN20926"
>Variables</A
>
  </DT
><DT
>CASE statement,
    <A
HREF="module-admin.html#AEN14413"
>Module creation, administrator part</A
>
  </DT
><DT
>Categories,
    <A
HREF="php-nuke-webcam-module.html#AEN8539"
>WebCam module</A
>,
    <A
HREF="php-nuke-ecommerce-module.html#AEN8995"
>eCommerce module</A
>,
    <A
HREF="duplicating-php-nuke-faq-module.html#AEN15166"
>Duplicating the PHP-Nuke FAQ module</A
>
  </DT
><DT
>category,
    <A
HREF="forums-cant-create-category-without-name.html#AEN4785"
>Forums Error: Can't create a category without a name</A
>,
    <A
HREF="preinstalled-modules.html#AEN5295"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5353"
>The preinstalled modules</A
>,
    <A
HREF="php-nuke-treemenu-with-javascript.html#AEN7813"
>Treemenu with Javascript</A
>,
    <A
HREF="php-nuke-treemenu-with-javascript.html#AEN7817"
>Treemenu with Javascript</A
>,
    <A
HREF="admin-management.html#AEN9417"
>Administration management </A
>,
    <A
HREF="module-admin.html#AEN14427"
>Module creation, administrator part</A
>,
    <A
HREF="find-last-date.html#AEN19726"
>How to find the last date of...</A
>,
    <A
HREF="find-last-date.html#AEN19728"
>How to find the last date of...</A
>,
    <A
HREF="find-last-date.html#AEN19735"
>How to find the last date of...</A
>
  </DT
><DT
>censor,
    <A
HREF="phpbb-forum-administration.html#AEN7127"
>phpBB Forum administration</A
>
  </DT
><DT
>Center,
    <A
HREF="create-help-center-live-block.html#AEN13507"
>How to create a Help Center Live block</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13527"
>How to create a Help Center Live block</A
>
  </DT
><DT
>centimeters,
    <A
HREF="change-font-size-php-nuke.html#AEN11006"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11010"
>How to change the font size in PHP-Nuke</A
>
  </DT
><DT
>Championship,
    <A
HREF="preinstalled-modules.html#AEN5284"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5293"
>The preinstalled modules</A
>
  </DT
><DT
>character,
    <A
HREF="mod_rewrite-quoting-special-characters.html#AEN17348"
>Quoting special characters</A
>,
    <A
HREF="regular-expressions.html#AEN17433"
>Regular expressions</A
>,
    <A
HREF="regular-expressions.html#AEN17469"
>Regular expressions</A
>,
    <A
HREF="googletap.html#AEN17866"
>Installation</A
>,
    <A
HREF="googletap.html#AEN18005"
>How it works</A
>,
    <A
HREF="adjust-server-time.html#AEN19931"
>How to adjust server time</A
>,
    <A
HREF="adjust-server-time.html#AEN19947"
>How to adjust server time</A
>,
    <A
HREF="adjust-server-time.html#AEN19981"
>How to adjust server time</A
>
  </DT
><DT
>characteristics,
    <A
HREF="preferences.html#AEN7301"
>The Preferences Page </A
>
  </DT
><DT
>checker,
    <A
HREF="check-validity-of-web-links.html#AEN19358"
>How to check the validity of thousands of web links</A
>
  </DT
><DT
>check_html,
    <A
HREF="allow-special-html-tags.html#AEN11241"
>How to allow special HTML tags</A
>,
    <A
HREF="allow-special-html-tags.html#AEN11370"
>How to allow special HTML tags</A
>
  </DT
><DT
>chinese,
    <A
HREF="general-php-nuke-texts.html#AEN9705"
>General PHP-Nuke texts</A
>
  </DT
><DT
>Chris,
    <A
HREF="credits-version-2.0.html#AEN1009"
>Version 2.0</A
>
  </DT
><DT
>cid,
    <A
HREF="find-last-date.html#AEN19742"
>How to find the last date of...</A
>,
    <A
HREF="find-last-date.html#AEN19749"
>How to find the last date of...</A
>,
    <A
HREF="find-last-date.html#AEN19758"
>How to find the last date of...</A
>,
    <A
HREF="find-last-date.html#AEN19760"
>How to find the last date of...</A
>,
    <A
HREF="find-last-date.html#AEN19766"
>How to find the last date of...</A
>
  </DT
><DT
>class,
    <A
HREF="regular-expressions.html#AEN17540"
>Regular expressions</A
>,
    <A
HREF="css-syntax.html#AEN20825"
>The syntax of CSS</A
>,
    <A
HREF="css-syntax.html#AEN20853"
>The syntax of CSS</A
>,
    <A
HREF="css-syntax.html#AEN20864"
>The syntax of CSS</A
>
  </DT
><DT
>classification,
    <A
HREF="whyphpnuke.html#AEN2017"
>Why use PHP-Nuke and not static HTML pages</A
>
  </DT
><DT
>clause,
    <A
HREF="error-update-private-forum-permissions.html#AEN4366"
>Error: Couldn't update private forum permissions</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15607"
>SQL injection with PHP-Nuke</A
>
  </DT
><DT
>click,
    <A
HREF="administration-functions.html#AEN6218"
>The administration functions</A
>,
    <A
HREF="create-logout-module.html#AEN14975"
>How to create a Logout module</A
>
  </DT
><DT
>clients,
    <A
HREF="administration-functions.html#AEN6314"
>The administration functions</A
>,
    <A
HREF="database-tables.html#AEN20191"
>The database tables </A
>
  </DT
><DT
>collapsing,
    <A
HREF="treemenu-block.html#AEN11853"
>What is Treemenu </A
>
  </DT
><DT
>colour,
    <A
HREF="topic-structure.html#AEN9984"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="change-background-colour.html#AEN10556"
>How to change background colour</A
>,
    <A
HREF="change-background-colour.html#AEN10558"
>How to change background colour</A
>,
    <A
HREF="change-background-colour.html#AEN10610"
>How to change background colour</A
>,
    <A
HREF="change-background-colour.html#AEN10616"
>How to change background colour</A
>,
    <A
HREF="html-format-text.html#AEN20606"
>How to format text in HTML</A
>,
    <A
HREF="css-syntax.html#AEN20772"
>The syntax of CSS</A
>,
    <A
HREF="css-syntax.html#AEN20791"
>The syntax of CSS</A
>,
    <A
HREF="css-syntax.html#AEN20842"
>The syntax of CSS</A
>,
    <A
HREF="css-syntax.html#AEN20850"
>The syntax of CSS</A
>
  </DT
><DT
>colours,
    <A
HREF="php-nuke-header-watermark-background-image.html#AEN10406"
>How to display a watermark background image</A
>,
    <A
HREF="change-background-colour.html#AEN10554"
>How to change background colour</A
>,
    <A
HREF="change-background-colour.html#AEN10592"
>How to change background colour</A
>,
    <A
HREF="change-background-colour.html#AEN10602"
>How to change background colour</A
>
  </DT
><DT
>comic,
    <A
HREF="display-images-php-nuke-blocks.html#AEN13874"
>How to display images in PHP-Nuke blocks</A
>,
    <A
HREF="display-images-php-nuke-blocks.html#AEN13879"
>How to display images in PHP-Nuke blocks</A
>
  </DT
><DT
>comics,
    <A
HREF="php-nuke-comic-block.html#AEN7693"
>Comic block</A
>
  </DT
><DT
>command,
    <A
HREF="mysql-errno-145.html#AEN4693"
>MySQL errno: 145: Can't open file nuke_XXXX.MYI</A
>,
    <A
HREF="php-nuke-upgrade-scripts.html#AEN4963"
>PHP-Nuke upgrade scripts</A
>,
    <A
HREF="php-nuke-upgrade-scripts.html#AEN4970"
>PHP-Nuke upgrade scripts</A
>,
    <A
HREF="php-nuke-upgrade-scripts.html#AEN4979"
>PHP-Nuke upgrade scripts</A
>,
    <A
HREF="php-nuke-upgrade-scripts.html#AEN4988"
>PHP-Nuke upgrade scripts</A
>,
    <A
HREF="php-nuke-upgrade-scripts.html#AEN4995"
>PHP-Nuke upgrade scripts</A
>,
    <A
HREF="php-nuke-upgrade-scripts.html#AEN5002"
>PHP-Nuke upgrade scripts</A
>,
    <A
HREF="php-nuke-upgrade-scripts.html#AEN5009"
>PHP-Nuke upgrade scripts</A
>,
    <A
HREF="include-html-file-in-module.html#AEN14549"
>How to include a HTML file in a PHP-Nuke module</A
>,
    <A
HREF="repair-corrupt-table.html#AEN18366"
>How to repair a corrupt table</A
>,
    <A
HREF="repair-corrupt-table.html#AEN18374"
>How to repair a corrupt table</A
>,
    <A
HREF="make-encyclopedia-international.html#AEN19514"
>How to make the Encyclopedia international</A
>
  </DT
><DT
>command-line,
    <A
HREF="phpmyadmin-navigation-bar-export.html#AEN2936"
>phpMyAdmin navigation bar: Export</A
>
  </DT
><DT
>comments,
    <A
HREF="credits-versions-1.x.html#AEN552"
>Versions 1.x</A
>,
    <A
HREF="security-code.html#AEN4157"
>Security code is not showing up</A
>,
    <A
HREF="preinstalled-modules.html#AEN5461"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5699"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5753"
>The preinstalled modules</A
>,
    <A
HREF="administration-functions.html#AEN6208"
>The administration functions</A
>,
    <A
HREF="preferences.html#AEN7269"
>The Preferences Page </A
>,
    <A
HREF="preferences.html#AEN7416"
>The Preferences Page </A
>,
    <A
HREF="php-nuke-gallery-module.html#AEN8266"
>Gallery module</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11096"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11098"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="create-fade-block.html#AEN13500"
>How to create a fade block</A
>,
    <A
HREF="cookies.html#AEN16266"
>Cookie hijack</A
>,
    <A
HREF="database-tables.html#AEN20213"
>The database tables </A
>
  </DT
><DT
>commercial,
    <A
HREF="changing-web-hoster.html#AEN5081"
>Changing Web hoster</A
>
  </DT
><DT
>communities,
    <A
HREF="communities.html#AEN1914"
>The PHP-Nuke Communities</A
>
  </DT
><DT
>community,
    <A
HREF="credits.html#AEN335"
>Credits</A
>,
    <A
HREF="php-nuke-vs-post-nuke.html#AEN2135"
>PHP-Nuke vs. Post-Nuke</A
>,
    <A
HREF="installation.html#AEN2275"
>How to install PHP-Nuke</A
>,
    <A
HREF="installation.html#AEN2278"
>How to install PHP-Nuke</A
>,
    <A
HREF="common-installation-problems.html#AEN3788"
>Common installation problems</A
>,
    <A
HREF="transferring-local-installation-to-web.html#AEN5049"
>Transferring a local installation to the Web</A
>
  </DT
><DT
>compatibility,
    <A
HREF="php-nuke-vs-post-nuke.html#AEN2132"
>PHP-Nuke vs. Post-Nuke</A
>
  </DT
><DT
>complexity,
    <A
HREF="php-nuke-autotheme.html#AEN7524"
>AutoTheme</A
>,
    <A
HREF="module-structure.html#AEN14156"
>Module structure </A
>,
    <A
HREF="googletap.html#AEN17711"
>Requirements</A
>
  </DT
><DT
>compliance,
    <A
HREF="php-nuke-vs-post-nuke.html#AEN2072"
>PHP-Nuke vs. Post-Nuke</A
>
  </DT
><DT
>complication,
    <A
HREF="duplicating-php-nuke-faq-module.html#AEN15133"
>Duplicating the PHP-Nuke FAQ module</A
>
  </DT
><DT
>computers,
    <A
HREF="security-measures.html#AEN15948"
>Security measures </A
>
  </DT
><DT
>concatenation,
    <A
HREF="display-random-images-php-nuke-blocks.html#AEN13985"
>How to display random images in PHP-Nuke blocks</A
>
  </DT
><DT
>concepts,
    <A
HREF="disclaimer.html#AEN130"
>Disclaimer</A
>
  </DT
><DT
>condition,
    <A
HREF="treemenu-block.html#AEN11774"
>Treemenu block</A
>,
    <A
HREF="module-admin.html#AEN14417"
>Module creation, administrator part</A
>
  </DT
><DT
>CondPattern,
    <A
HREF="mod_rewrite-regex-backreferences.html#AEN17357"
>Regex backreference availability</A
>
  </DT
><DT
>config,
    <A
HREF="database-creation.html#AEN2626"
>Database creation</A
>,
    <A
HREF="install-phpmyadmin.html#AEN2702"
>How to install phpMyAdmin</A
>,
    <A
HREF="install-phpmyadmin.html#AEN2706"
>How to install phpMyAdmin</A
>,
    <A
HREF="phpmyadmin-navigation-bar-export.html#AEN2944"
>phpMyAdmin navigation bar: Export</A
>,
    <A
HREF="install-db.html#AEN2989"
>How to install the DB of PHP-Nuke with PHPMyadmin</A
>,
    <A
HREF="install-php-nuke-nukesql.html#AEN3063"
>How to install PHP-Nuke using nukesql.php</A
>,
    <A
HREF="install-php-nuke-nukesql.html#AEN3090"
>How to install PHP-Nuke using nukesql.php</A
>,
    <A
HREF="config-php-file.html#AEN3510"
>The config.php file</A
>,
    <A
HREF="config-php-file.html#AEN3531"
>The config.php file</A
>,
    <A
HREF="config-php-file.html#AEN3536"
>The config.php file</A
>,
    <A
HREF="config-php-file.html#AEN3549"
>The config.php file</A
>,
    <A
HREF="config-php-file.html#AEN3601"
>The config.php file</A
>,
    <A
HREF="config-php-file.html#AEN3643"
>The config.php file</A
>,
    <A
HREF="more-than-one-php-nuke-sites.html#AEN3668"
>More than one PHP-Nuke sites</A
>,
    <A
HREF="more-than-one-php-nuke-sites.html#AEN3683"
>Different PHP-Nuke sites from the same database</A
>,
    <A
HREF="more-than-one-php-nuke-sites.html#AEN3700"
>Different PHP-Nuke sites from the same database</A
>,
    <A
HREF="more-than-one-php-nuke-sites.html#AEN3704"
>Different PHP-Nuke sites from the same database</A
>,
    <A
HREF="more-than-one-php-nuke-sites.html#AEN3706"
>Different PHP-Nuke sites from the same database</A
>,
    <A
HREF="more-than-one-php-nuke-sites.html#AEN3739"
>Different PHP-Nuke sites with the same user base</A
>,
    <A
HREF="more-than-one-php-nuke-sites.html#AEN3743"
>Different PHP-Nuke sites with the same user base</A
>,
    <A
HREF="more-than-one-php-nuke-sites.html#AEN3745"
>Different PHP-Nuke sites with the same user base</A
>,
    <A
HREF="test-scripts.html#AEN3818"
>test.php</A
>,
    <A
HREF="test-scripts.html#AEN3845"
>ConnectTest.php</A
>,
    <A
HREF="test-scripts.html#AEN3855"
>analyze.php</A
>,
    <A
HREF="test-scripts.html#AEN3875"
>analyze.php</A
>,
    <A
HREF="call-to-undefined-function.html#AEN3972"
>Call to undefined function: message_die() in db.php line 88</A
>,
    <A
HREF="call-to-undefined-function.html#AEN3980"
>Call to undefined function: message_die() in db.php line 88</A
>,
    <A
HREF="security-code.html#AEN4243"
>How to bypass the security code</A
>,
    <A
HREF="cannot-create-administrator-account.html#AEN4430"
>You cannot create the administrator account</A
>,
    <A
HREF="upgrade-php-nuke.html#AEN4884"
>How to upgrade PHP-Nuke</A
>,
    <A
HREF="upgrade-phpbb-php-nuke.html#AEN4942"
>From phpBB to PHP-Nuke</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7132"
>phpBB Forum administration</A
>,
    <A
HREF="preferences.html#AEN7213"
>The Preferences Page </A
>,
    <A
HREF="preferences.html#AEN7460"
>The Preferences Page </A
>,
    <A
HREF="editing-php-nuke-files.html#AEN9588"
>Editing PHP (-Nuke) files</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13549"
>How to create a Help Center Live block</A
>,
    <A
HREF="module-rules.html#AEN14239"
>Creating fully compatible modules: the rules to follow</A
>,
    <A
HREF="include-html-file-in-module.html#AEN14577"
>How to include a HTML file in a PHP-Nuke module</A
>,
    <A
HREF="duplicating-php-nuke-faq-module.html#AEN15178"
>Duplicating the PHP-Nuke FAQ module</A
>,
    <A
HREF="security-measures.html#AEN15936"
>Security measures </A
>,
    <A
HREF="security-measures.html#AEN15946"
>Security measures </A
>,
    <A
HREF="ban-ip-addresses.html#AEN16341"
>How to ban IP addresses</A
>,
    <A
HREF="jpcache.html#AEN16562"
>Configuration of jpcache</A
>,
    <A
HREF="jpcache.html#AEN16575"
>Configuration of jpcache</A
>,
    <A
HREF="allow-anonymous-web-link-submissions.html#AEN18844"
>How to allow anonymous web link submissions</A
>,
    <A
HREF="make-encyclopedia-international.html#AEN19528"
>How to make the Encyclopedia international</A
>,
    <A
HREF="html-insert-image.html#AEN20705"
>How to insert an image in HTML</A
>,
    <A
HREF="foxserv.html#AEN21188"
>Foxserv, making PHP-Nuke work on Windows Systems</A
>
  </DT
><DT
>config.php,
    <A
HREF="database-creation.html#AEN2637"
>Database creation</A
>,
    <A
HREF="install-php-nuke-nukesql.html#AEN3071"
>How to install PHP-Nuke using nukesql.php</A
>,
    <A
HREF="config-php-file.html#AEN3553"
>The config.php file</A
>,
    <A
HREF="more-than-one-php-nuke-sites.html#AEN3696"
>Different PHP-Nuke sites from the same database</A
>,
    <A
HREF="more-than-one-php-nuke-sites.html#AEN3735"
>Different PHP-Nuke sites with the same user base</A
>,
    <A
HREF="upgrade-php-nuke.html#AEN4896"
>How to upgrade PHP-Nuke</A
>,
    <A
HREF="php-nuke-copyright-notice.html#AEN10742"
>The PHP-Nuke Copyright notice</A
>,
    <A
HREF="allow-special-html-tags.html#AEN11549"
>How to allow special HTML tags</A
>,
    <A
HREF="allow-special-html-tags.html#AEN11567"
>How to allow special HTML tags</A
>,
    <A
HREF="simple-module-block.html#AEN11712"
>Simple module block</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15575"
>SQL injection with PHP-Nuke</A
>,
    <A
HREF="security-measures.html#AEN15932"
>Security measures </A
>,
    <A
HREF="proceed-when-mysql-slow.html#AEN18273"
>How to proceed when MySQL is slow</A
>,
    <A
HREF="enter-thousands-of-download-links.html#AEN19287"
>How to enter thousands of download links</A
>
  </DT
><DT
>configuration,
    <A
HREF="prerequisites.html#AEN2317"
>Prerequisites</A
>,
    <A
HREF="prerequisites.html#AEN2337"
>Prerequisites</A
>,
    <A
HREF="easyphp.html#AEN3184"
>How to check a successful installation</A
>,
    <A
HREF="invalid-session-in-forums.html#AEN4390"
>Invalid session in forums</A
>,
    <A
HREF="preferences.html#AEN7359"
>The Preferences Page </A
>,
    <A
HREF="htaccess-file.html#AEN17575"
>The .htaccess file</A
>,
    <A
HREF="htaccess-file.html#AEN17603"
>The .htaccess file</A
>,
    <A
HREF="htaccess-file.html#AEN17610"
>The .htaccess file</A
>
  </DT
><DT
>configurations,
    <A
HREF="prerequisites.html#AEN2315"
>Prerequisites</A
>,
    <A
HREF="php-nuke-approve-membership-module.html#AEN8177"
>Approve Membership module</A
>
  </DT
><DT
>connection,
    <A
HREF="test-scripts.html#AEN3839"
>ConnectTest.php</A
>
  </DT
><DT
>consntants,
    <A
HREF="allow-anonymous-web-link-submissions.html#AEN18817"
>How to allow anonymous web link submissions</A
>
  </DT
><DT
>constants,
    <A
HREF="find-all-registration-links.html#AEN18770"
>How to find all registration links</A
>,
    <A
HREF="disable-debug-mode.html#AEN18869"
>How to disable DEBUG mode</A
>,
    <A
HREF="disable-debug-mode.html#AEN18872"
>How to disable DEBUG mode</A
>
  </DT
><DT
>constraints,
    <A
HREF="purpose.html#AEN1742"
>Purpose</A
>
  </DT
><DT
>Content,
    <A
HREF="book-behind-book.html#AEN1632"
>The book behind the book</A
>,
    <A
HREF="preinstalled-modules.html#AEN5766"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-blocks.html#AEN6044"
>The preinstalled blocks</A
>,
    <A
HREF="administration-functions.html#AEN6407"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6414"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6423"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6462"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6496"
>The administration functions</A
>,
    <A
HREF="simple-content-block.html#AEN13267"
>Simple Content block</A
>,
    <A
HREF="simple-content-block.html#AEN13275"
>Simple Content block</A
>
  </DT
><DT
>contents,
    <A
HREF="block-types.html#AEN13122"
>The characteristics of the various types of blocks</A
>
  </DT
><DT
>context,
    <A
HREF="credits.html#AEN353"
>Credits</A
>,
    <A
HREF="preinstalled-modules.html#AEN5665"
>The preinstalled modules</A
>,
    <A
HREF="scrolling-headlines-in-blocks.html#AEN11900"
>How to get scrolling headlines in blocks</A
>,
    <A
HREF="permissions2.html#AEN16103"
>Permissions on folders and files</A
>,
    <A
HREF="mod_rewrite-api-phases.html#AEN17295"
>API phases</A
>,
    <A
HREF="regular-expressions.html#AEN17440"
>Regular expressions</A
>,
    <A
HREF="find-all-registration-links.html#AEN18772"
>How to find all registration links</A
>,
    <A
HREF="enter-thousands-of-ephemerids.html#AEN19464"
>How to enter thousands of ephemerids</A
>
  </DT
><DT
>control,
    <A
HREF="phpbb-forum-administration.html#AEN7168"
>phpBB Forum administration</A
>,
    <A
HREF="how-sessions-work.html#AEN9534"
>How sessions work in the forums</A
>,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12438"
>How to redirect Your Info to the Forums user profile</A
>,
    <A
HREF="module-admin.html#AEN14465"
>Module creation, administrator part</A
>,
    <A
HREF="security-measures.html#AEN15921"
>Security measures </A
>,
    <A
HREF="mod_rewrite-ruleset-processing.html#AEN17319"
>Ruleset processing</A
>,
    <A
HREF="htaccess-file.html#AEN17605"
>The .htaccess file</A
>,
    <A
HREF="googletap.html#AEN18075"
>How it works</A
>
  </DT
><DT
>cookie,
    <A
HREF="preinstalled-modules.html#AEN5719"
>The preinstalled modules</A
>,
    <A
HREF="eliminate-session-checks.html#AEN9568"
>How to eliminate session checks</A
>,
    <A
HREF="cookies.html#AEN16255"
>Cookie hijack</A
>,
    <A
HREF="cookies.html#AEN16288"
>Changing the duration of the user cookie</A
>,
    <A
HREF="search-engines-and-dynamic-urls.html#AEN17124"
>Search engines and dynamic URLs</A
>
  </DT
><DT
>cookies,
    <A
HREF="architecture.html#AEN9133"
>Architecture and structure </A
>,
    <A
HREF="php-nuke-header-change-logo-dynamic.html#AEN10239"
>How to change the logo's dimensions dynamically</A
>,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15691"
>Cross-site tracing with PHP-Nuke</A
>,
    <A
HREF="security-audit.html#AEN16052"
>Security audit</A
>,
    <A
HREF="cookies.html#AEN16175"
>Cookies - timeout and configuration</A
>,
    <A
HREF="cookies.html#AEN16247"
>Cookie hijack</A
>
  </DT
><DT
>copy,
    <A
HREF="licence.html#AEN270"
>Licence</A
>,
    <A
HREF="licence.html#AEN273"
>Licence</A
>,
    <A
HREF="licence.html#AEN277"
>Licence</A
>,
    <A
HREF="licence.html#AEN281"
>Licence</A
>,
    <A
HREF="credits-general.html#AEN1266"
>General</A
>,
    <A
HREF="general-php-nuke-texts.html#AEN9725"
>General PHP-Nuke texts</A
>,
    <A
HREF="duplicating-php-nuke-faq-module.html#AEN15149"
>Duplicating the PHP-Nuke FAQ module</A
>,
    <A
HREF="css-syntax.html#AEN20800"
>The syntax of CSS</A
>
  </DT
><DT
>copyright,
    <A
HREF="php-nuke-theme-modifying-icons.html#AEN10809"
>Modifying the PHP-Nuke theme icons</A
>,
    <A
HREF="make-php-nuke-hot-link-stealth.html#AEN18136"
>How to make PHP-Nuke hot link stealth</A
>
  </DT
><DT
>corporate,
    <A
HREF="create-fade-block.html#AEN13486"
>How to create a fade block</A
>
  </DT
><DT
>corrupt,
    <A
HREF="repair-corrupt-table.html#AEN18372"
>How to repair a corrupt table</A
>
  </DT
><DT
>costs,
    <A
HREF="forums-cant-create-category-without-name.html#AEN4821"
>Forums Error: Can't create a category without a name</A
>
  </DT
><DT
>counter,
    <A
HREF="whatis-phpnuke.html#AEN1837"
>What Is PHP-Nuke</A
>,
    <A
HREF="php-nuke-webcam-module.html#AEN8550"
>WebCam module</A
>,
    <A
HREF="upload-add-on-for-phpbb.html#AEN8896"
>Upload add-on for phpBB</A
>,
    <A
HREF="database-tables.html#AEN20225"
>The database tables </A
>
  </DT
><DT
>cracking,
    <A
HREF="search-engines-and-dynamic-urls.html#AEN17129"
>Search engines and dynamic URLs</A
>
  </DT
><DT
>credentials,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15743"
>Cross-site tracing with PHP-Nuke</A
>
  </DT
><DT
>credit,
    <A
HREF="php-nuke-theme-modifying-index.html#AEN10643"
>Modifying the PHP-Nuke theme index</A
>
  </DT
><DT
>criteria,
    <A
HREF="php-nuke-vs-xoops.html#AEN2214"
>PHP-Nuke vs. XOOPS</A
>,
    <A
HREF="preinstalled-modules.html#AEN5519"
>The preinstalled modules</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7042"
>phpBB Forum administration</A
>,
    <A
HREF="topic-structure.html#AEN9982"
>Structure of a PHP-Nuke theme</A
>
  </DT
><DT
>cron,
    <A
HREF="check-validity-of-web-links.html#AEN19361"
>How to check the validity of thousands of web links</A
>
  </DT
><DT
>cross-references,
    <A
HREF="credits-version-2.0.html#AEN1007"
>Version 2.0</A
>
  </DT
><DT
>cryptic,
    <A
HREF="permissions.html#AEN2508"
>File permissions</A
>
  </DT
><DT
>CSS,
    <A
HREF="change-font-size-php-nuke.html#AEN11029"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11031"
>How to change the font size in PHP-Nuke</A
>
  </DT
><DT
>culprit,
    <A
HREF="how-sessions-work.html#AEN9482"
>How sessions work in the forums</A
>
  </DT
><DT
>cultures,
    <A
HREF="how-secure-is-php-nuke.html#AEN15295"
>How secure is PHP-Nuke?</A
>
  </DT
><DT
>currencies,
    <A
HREF="php-nuke-ecommerce-module.html#AEN9001"
>eCommerce module</A
>
  </DT
><DT
>custom,
    <A
HREF="simple-module-block.html#AEN11728"
>Simple module block</A
>,
    <A
HREF="create-logout-module.html#AEN14987"
>How to create a Logout module</A
>
  </DT
><DT
>customers,
    <A
HREF="create-help-center-live-block.html#AEN13521"
>How to create a Help Center Live block</A
>
  </DT
><DT
>customizable,
    <A
HREF="php-nuke-approve-membership-module.html#AEN8145"
>Approve Membership module</A
>,
    <A
HREF="php-nuke-module-texts.html#AEN9748"
>PHP-Nuke module texts</A
>
  </DT
><DT
>customization,
    <A
HREF="php-nuke-google-adsense-block.html#AEN7858"
>Google AdSense block</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN23210"
>D</A
></H2
><DL
><DT
>daily,
    <A
HREF="php-nuke-moon-sun-block.html#AEN7601"
>Moon &#38; Sun block</A
>
  </DT
><DT
>dashes,
    <A
HREF="sql-syntax-error.html#AEN4342"
>You have an error in your SQL syntax near '-------------</A
>,
    <A
HREF="regular-expressions.html#AEN17542"
>Regular expressions</A
>
  </DT
><DT
>data,
    <A
HREF="permissions.html#AEN2578"
>File permissions</A
>,
    <A
HREF="phpmyadmin2.html#AEN2754"
>phpMyAdmin: How to administer MySQL via Web</A
>,
    <A
HREF="phpmyadmin-navigation-bar-export.html#AEN2899"
>phpMyAdmin navigation bar: Export</A
>,
    <A
HREF="phpmyadmin-navigation-bar-export.html#AEN2903"
>phpMyAdmin navigation bar: Export</A
>,
    <A
HREF="phpmyadmin-navigation-bar-export.html#AEN2917"
>phpMyAdmin navigation bar: Export</A
>,
    <A
HREF="changing-web-hoster.html#AEN5141"
>Changing Web hoster</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7184"
>phpBB Forum administration</A
>,
    <A
HREF="block-creation.html#AEN13175"
>How to create a new block</A
>,
    <A
HREF="how-to-include-files.html#AEN13295"
>How to include PHP/HTML files in a PHP-Nuke block</A
>,
    <A
HREF="paypal-block-for-php-nuke.html#AEN14007"
>How to display HTML forms in a block: Paypal</A
>,
    <A
HREF="duplicating-php-nuke-faq-module.html#AEN15180"
>Duplicating the PHP-Nuke FAQ module</A
>,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15716"
>Cross-site tracing with PHP-Nuke</A
>,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15746"
>Cross-site tracing with PHP-Nuke</A
>,
    <A
HREF="security-audit.html#AEN16029"
>Security audit</A
>,
    <A
HREF="permissions2.html#AEN16161"
>Permissions on folders and files</A
>,
    <A
HREF="repair-corrupt-table.html#AEN18356"
>How to repair a corrupt table</A
>,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18452"
>How to restore PHP-Nuke from backup</A
>,
    <A
HREF="php-nuke-under-ssl.html#AEN19019"
>How to use PHP-Nuke under SSL</A
>,
    <A
HREF="database-tables.html#AEN20267"
>The database tables </A
>,
    <A
HREF="database-tables.html#AEN20363"
>The database tables </A
>
  </DT
><DT
>database-driven,
    <A
HREF="general-php-nuke-texts.html#AEN9717"
>General PHP-Nuke texts</A
>
  </DT
><DT
>databases,
    <A
HREF="whatis-phpmyadmin.html#AEN2657"
>What Is PHPMyadmin</A
>,
    <A
HREF="phpmyadmin-other-commands.html#AEN2965"
>phpMyAdmin: other commands</A
>,
    <A
HREF="changing-web-hoster.html#AEN5077"
>Changing Web hoster</A
>,
    <A
HREF="changing-web-hoster.html#AEN5139"
>Changing Web hoster</A
>,
    <A
HREF="directory-structure.html#AEN9254"
>Directory structure </A
>
  </DT
><DT
>date,
    <A
HREF="credits-versions-1.x.html#AEN535"
>Versions 1.x</A
>,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3421"
>Apache, PHP and MySQL on Red Hat Linux</A
>,
    <A
HREF="changing-web-hoster.html#AEN5085"
>Changing Web hoster</A
>,
    <A
HREF="preinstalled-modules.html#AEN5361"
>The preinstalled modules</A
>,
    <A
HREF="administration-functions.html#AEN6743"
>The administration functions</A
>,
    <A
HREF="php-nuke-gallery-module.html#AEN8268"
>Gallery module</A
>,
    <A
HREF="how-sessions-work.html#AEN9541"
>How sessions work in the forums</A
>,
    <A
HREF="register-users-through-ibill.html#AEN12633"
>How to register users through iBill</A
>,
    <A
HREF="module-admin.html#AEN14510"
>Module creation, administrator part</A
>,
    <A
HREF="how-secure-is-php-nuke.html#AEN15262"
>How secure is PHP-Nuke?</A
>,
    <A
HREF="googletap.html#AEN17674"
>GoogleTap</A
>,
    <A
HREF="install-patches-correct-errors.html#AEN18703"
>How to install patches and correct errors</A
>,
    <A
HREF="find-last-date.html#AEN19764"
>How to find the last date of...</A
>,
    <A
HREF="adjust-server-time.html#AEN19969"
>How to adjust server time</A
>,
    <A
HREF="database-tables.html#AEN20519"
>The database tables </A
>
  </DT
><DT
>dates,
    <A
HREF="changing-web-hoster.html#AEN5171"
>Changing Web hoster</A
>,
    <A
HREF="enter-thousands-of-web-links.html#AEN19261"
>How to enter thousands of web links</A
>
  </DT
><DT
>dbhost,
    <A
HREF="database-creation.html#AEN2635"
>Database creation</A
>,
    <A
HREF="transferring-local-installation-to-web.html#AEN5039"
>Transferring a local installation to the Web</A
>,
    <A
HREF="changing-web-hoster.html#AEN5125"
>Changing Web hoster</A
>,
    <A
HREF="restore-single-table.html#AEN18553"
>How to restore a single table</A
>,
    <A
HREF="restore-large-backup.html#AEN18568"
>How to restore a large backup</A
>
  </DT
><DT
>dbuname,
    <A
HREF="mysql-errno-145.html#AEN4688"
>MySQL errno: 145: Can't open file nuke_XXXX.MYI</A
>,
    <A
HREF="make-encyclopedia-international.html#AEN19526"
>How to make the Encyclopedia international</A
>
  </DT
><DT
>dbuser,
    <A
HREF="phpmyadmin-navigation-bar-export.html#AEN2942"
>phpMyAdmin navigation bar: Export</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13556"
>How to create a Help Center Live block</A
>
  </DT
><DT
>deadlinkcheck,
    <A
HREF="check-validity-of-web-links.html#AEN19353"
>How to check the validity of thousands of web links</A
>
  </DT
><DT
>debugging,
    <A
HREF="path-disclosure-with-php-nuke.html#AEN15675"
>Path disclosure with PHP-Nuke</A
>
  </DT
><DT
>decent,
    <A
HREF="editing-php-nuke-files.html#AEN9580"
>Editing PHP (-Nuke) files</A
>,
    <A
HREF="editing-php-nuke-files.html#AEN9582"
>Editing PHP (-Nuke) files</A
>
  </DT
><DT
>delays,
    <A
HREF="php-nuke-meteosat-block.html#AEN7654"
>Meteosat block</A
>
  </DT
><DT
>DELETE,
    <A
HREF="php-nuke-upgrade-scripts.html#AEN4986"
>PHP-Nuke upgrade scripts</A
>
  </DT
><DT
>dependencies,
    <A
HREF="mandrake-linux-apache-php-mysql.html#AEN3333"
>Apache, PHP and MySQL on Mandrake Linux</A
>,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3423"
>Apache, PHP and MySQL on Red Hat Linux</A
>
  </DT
><DT
>dependency,
    <A
HREF="hide-left-blocks.html#AEN10486"
>How to hide the left blocks</A
>
  </DT
><DT
>deprecated,
    <A
HREF="html-format-text.html#AEN20608"
>How to format text in HTML</A
>,
    <A
HREF="sql-syntax.html#AEN21095"
>The syntax of SQL code</A
>
  </DT
><DT
>descendants,
    <A
HREF="change-font-size-php-nuke.html#AEN11025"
>How to change the font size in PHP-Nuke</A
>
  </DT
><DT
>designer,
    <A
HREF="whatis-phpnuke.html#AEN1815"
>What Is PHP-Nuke</A
>
  </DT
><DT
>development,
    <A
HREF="php-nuke-tools-module.html#AEN8740"
>PHP-Nuke-Tools module </A
>,
    <A
HREF="php-nuke-ecommerce-module.html#AEN8988"
>eCommerce module</A
>,
    <A
HREF="php-nuke-workboard-module.html#AEN9085"
>WorkBoard Module</A
>
  </DT
><DT
>diagram,
    <A
HREF="licence.html#AEN306"
>Licence</A
>,
    <A
HREF="aknowledgements.html#AEN1340"
>Aknowledgements</A
>
  </DT
><DT
>dictionaries,
    <A
HREF="preinstalled-modules.html#AEN5785"
>The preinstalled modules</A
>
  </DT
><DT
>digit,
    <A
HREF="regular-expressions.html#AEN17457"
>Regular expressions</A
>
  </DT
><DT
>digits,
    <A
HREF="googletap.html#AEN18011"
>How it works</A
>
  </DT
><DT
>directives,
    <A
HREF="general-php-nuke-texts.html#AEN9727"
>General PHP-Nuke texts</A
>,
    <A
HREF="mod_rewrite-regex-backreferences.html#AEN17374"
>Regex backreference availability</A
>,
    <A
HREF="htaccess-file.html#AEN17554"
>The .htaccess file</A
>
  </DT
><DT
>Directories,
    <A
HREF="permissions.html#AEN2575"
>File permissions</A
>
  </DT
><DT
>disabilities,
    <A
HREF="html-insert-image.html#AEN20690"
>How to insert an image in HTML</A
>
  </DT
><DT
>disk,
    <A
HREF="caching-php-nuke-conclusion.html#AEN17014"
>Caching PHP-Nuke: Conclusion</A
>
  </DT
><DT
>display_errors,
    <A
HREF="security-measures.html#AEN15997"
>Security measures </A
>,
    <A
HREF="change-php-parameters.html#AEN19123"
>How to change PHP parameters when you don't have access to php.ini</A
>
  </DT
><DT
>disposal,
    <A
HREF="php-nuke-header-change.html#AEN10192"
>How to change the PHP-Nuke header depending on some global feature</A
>
  </DT
><DT
>distribution,
    <A
HREF="frontend.html#AEN5192"
>Front end structure: user view</A
>,
    <A
HREF="frontend.html#AEN5194"
>Front end structure: user view</A
>
  </DT
><DT
>ditto,
    <A
HREF="architecture.html#AEN9149"
>Architecture and structure </A
>,
    <A
HREF="regular-expressions.html#AEN17418"
>Regular expressions</A
>
  </DT
><DT
>dmoz.html,
    <A
HREF="enter-thousands-of-web-links.html#AEN19219"
>How to enter thousands of web links</A
>,
    <A
HREF="enter-thousands-of-web-links.html#AEN19241"
>How to enter thousands of web links</A
>
  </DT
><DT
>dmoz.sql,
    <A
HREF="enter-thousands-of-download-links.html#AEN19319"
>How to enter thousands of download links</A
>
  </DT
><DT
>DNS,
    <A
HREF="create-help-center-live-block.html#AEN13670"
>How to create a Help Center Live block</A
>
  </DT
><DT
>documentation,
    <A
HREF="aknowledgements.html#AEN1535"
>Aknowledgements</A
>
  </DT
><DT
>domain,
    <A
HREF="invalid-session-in-forums.html#AEN4394"
>Invalid session in forums</A
>,
    <A
HREF="make-php-nuke-hot-link-stealth.html#AEN18157"
>How to make PHP-Nuke hot link stealth</A
>,
    <A
HREF="php-nuke-under-ssl.html#AEN19052"
>How to use PHP-Nuke under SSL</A
>
  </DT
><DT
>domains,
    <A
HREF="mail-problems.html#AEN4287"
>Users don't receive any confirmation mails</A
>,
    <A
HREF="upload-add-on-for-phpbb.html#AEN8885"
>Upload add-on for phpBB</A
>,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15724"
>Cross-site tracing with PHP-Nuke</A
>,
    <A
HREF="change-php-parameters.html#AEN19099"
>How to change PHP parameters when you don't have access to php.ini</A
>,
    <A
HREF="change-php-parameters.html#AEN19103"
>How to change PHP parameters when you don't have access to php.ini</A
>
  </DT
><DT
>download,
    <A
HREF="whatis-phpnuke.html#AEN1857"
>What Is PHP-Nuke</A
>,
    <A
HREF="upload.html#AEN2388"
>Upload through FTP</A
>,
    <A
HREF="xampp.html#AEN3226"
>XAMPP</A
>,
    <A
HREF="administration-functions.html#AEN6527"
>The administration functions</A
>,
    <A
HREF="cookies.html#AEN16240"
>Cookie hijack</A
>,
    <A
HREF="cache-lite.html#AEN16656"
>Installation of Cache-Lite</A
>,
    <A
HREF="size-select-boxes.html#AEN19616"
>How to size the select boxes in a module</A
>,
    <A
HREF="database-tables.html#AEN20261"
>The database tables </A
>
  </DT
><DT
>Downloads,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15622"
>SQL injection with PHP-Nuke</A
>,
    <A
HREF="change-home-module.html#AEN18981"
>How to change the Home module</A
>
  </DT
><DT
>DreamWeaver,
    <A
HREF="example-creation-html-template.html#AEN10042"
>Example creation of HTML file to include in the theme</A
>
  </DT
><DT
>dummy,
    <A
HREF="size-select-boxes.html#AEN19621"
>How to size the select boxes in a module</A
>
  </DT
><DT
>dynamic,
    <A
HREF="php-nuke-meteosat-block.html#AEN7651"
>Meteosat block</A
>,
    <A
HREF="treemenu-block.html#AEN11750"
>Treemenu block</A
>,
    <A
HREF="javascript-in-php-nuke-blocks.html#AEN13366"
>How to use Javascript in PHP-Nuke blocks</A
>,
    <A
HREF="display-images-php-nuke-blocks.html#AEN13868"
>How to display images in PHP-Nuke blocks</A
>,
    <A
HREF="googletap.html#AEN18086"
>How it works</A
>,
    <A
HREF="googletap.html#AEN18098"
>How it works</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN23420"
>E</A
></H2
><DL
><DT
>e-mail,
    <A
HREF="preferences.html#AEN7377"
>The Preferences Page </A
>,
    <A
HREF="allow-special-html-tags.html#AEN11384"
>How to allow special HTML tags</A
>
  </DT
><DT
>easyPHP,
    <A
HREF="easyphp.html#AEN3128"
>easyPHP</A
>,
    <A
HREF="easyphp.html#AEN3146"
>easyPHP</A
>,
    <A
HREF="easyphp.html#AEN3150"
>easyPHP</A
>,
    <A
HREF="easyphp.html#AEN3169"
>easyPHP</A
>
  </DT
><DT
>Edit,
    <A
HREF="upload.html#AEN2476"
>Upload through FTP</A
>,
    <A
HREF="upload.html#AEN2478"
>Upload through FTP</A
>,
    <A
HREF="phpmyadmin-navigation-bar-structure.html#AEN2807"
>phpMyAdmin navigation bar: Structure</A
>,
    <A
HREF="administration-functions.html#AEN6558"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6579"
>The administration functions</A
>,
    <A
HREF="change-home-module.html#AEN18983"
>How to change the Home module</A
>
  </DT
><DT
>editor,
    <A
HREF="call-to-undefined-function.html#AEN3976"
>Call to undefined function: message_die() in db.php line 88</A
>,
    <A
HREF="editing-php-nuke-files.html#AEN9578"
>Editing PHP (-Nuke) files</A
>,
    <A
HREF="theme-rules.html#AEN10833"
>Theme construction: the rules to follow </A
>,
    <A
HREF="change-order-of-messages.html#AEN11607"
>How to change the order of messages</A
>
  </DT
><DT
>edituser,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12431"
>How to redirect Your Info to the Forums user profile</A
>
  </DT
><DT
>elements,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18423"
>How to restore PHP-Nuke from backup</A
>
  </DT
><DT
>Emporium,
    <A
HREF="php-nuke-ecommerce-module.html#AEN9018"
>eCommerce module</A
>
  </DT
><DT
>emulate,
    <A
HREF="installation.html#AEN2286"
>How to install PHP-Nuke</A
>
  </DT
><DT
>encoding,
    <A
HREF="make-encyclopedia-international.html#AEN19489"
>How to make the Encyclopedia international</A
>,
    <A
HREF="make-encyclopedia-international.html#AEN19508"
>How to make the Encyclopedia international</A
>
  </DT
><DT
>encrypted,
    <A
HREF="compressed-output-in-forums.html#AEN4569"
>Compressed output in forums</A
>,
    <A
HREF="php-nuke-under-ssl.html#AEN19072"
>How to use PHP-Nuke under SSL</A
>
  </DT
><DT
>encryption,
    <A
HREF="php-nuke-under-ssl.html#AEN19070"
>How to use PHP-Nuke under SSL</A
>
  </DT
><DT
>encyclopedia,
    <A
HREF="preinstalled-modules.html#AEN5787"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5794"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-blocks.html#AEN6051"
>The preinstalled blocks</A
>,
    <A
HREF="preinstalled-blocks.html#AEN6055"
>The preinstalled blocks</A
>,
    <A
HREF="preinstalled-blocks.html#AEN6062"
>The preinstalled blocks</A
>,
    <A
HREF="administration-functions.html#AEN6596"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6619"
>The administration functions</A
>
  </DT
><DT
>engine,
    <A
HREF="whatis-phpnuke.html#AEN1855"
>What Is PHP-Nuke</A
>,
    <A
HREF="whyphpnuke.html#AEN2032"
>Why use PHP-Nuke and not static HTML pages</A
>,
    <A
HREF="preinstalled-modules.html#AEN5820"
>The preinstalled modules</A
>,
    <A
HREF="directory-structure.html#AEN9194"
>Directory structure </A
>,
    <A
HREF="search-engines-and-get-method.html#AEN17138"
>Search engines and the GET method</A
>,
    <A
HREF="mod_rewrite-ruleset-processing.html#AEN17317"
>Ruleset processing</A
>,
    <A
HREF="regular-expressions.html#AEN17497"
>Regular expressions</A
>,
    <A
HREF="googletap.html#AEN18061"
>How it works</A
>
  </DT
><DT
>English,
    <A
HREF="aknowledgements.html#AEN1308"
>Aknowledgements</A
>,
    <A
HREF="php-nuke-webcam-module.html#AEN8558"
>WebCam module</A
>
  </DT
><DT
>enhancements,
    <A
HREF="availability-of-sources.html#AEN324"
>Availability of sources</A
>
  </DT
><DT
>entities,
    <A
HREF="googletap.html#AEN17997"
>How it works</A
>
  </DT
><DT
>entity,
    <A
HREF="config-php-file.html#AEN3659"
>The config.php file</A
>,
    <A
HREF="googletap.html#AEN17852"
>Installation</A
>
  </DT
><DT
>Enumerate,
    <A
HREF="translate-php-nuke-howto.html#AEN1713"
>How to translate this HOWTO</A
>,
    <A
HREF="translate-php-nuke-howto.html#AEN1721"
>How to translate this HOWTO</A
>,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3435"
>Apache, PHP and MySQL on Red Hat Linux</A
>,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3440"
>Apache, PHP and MySQL on Red Hat Linux</A
>,
    <A
HREF="sorry-such-file-doesnt-exist.html#AEN4048"
>Sorry, such file doesn't exist...</A
>,
    <A
HREF="sorry-such-file-doesnt-exist.html#AEN4054"
>Sorry, such file doesn't exist...</A
>,
    <A
HREF="administrator-password-lost.html#AEN4490"
>You lost the administrator password, or deleted the admin account</A
>,
    <A
HREF="administrator-password-lost.html#AEN4496"
>You lost the administrator password, or deleted the admin account</A
>,
    <A
HREF="administrator-password-lost.html#AEN4505"
>You lost the administrator password, or deleted the admin account</A
>,
    <A
HREF="administrator-password-lost.html#AEN4513"
>You lost the administrator password, or deleted the admin account</A
>,
    <A
HREF="cannot-add-header-information-in-forums.html#AEN4590"
>Warning: Cannot add header information...in forums</A
>,
    <A
HREF="administration-functions.html#AEN6255"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6260"
>The administration functions</A
>,
    <A
HREF="php-nuke-protector-module.html#AEN8466"
>Protector module</A
>,
    <A
HREF="php-nuke-protector-module.html#AEN8470"
>Protector module</A
>,
    <A
HREF="php-nuke-protector-module.html#AEN8476"
>Protector module</A
>,
    <A
HREF="php-nuke-protector-module.html#AEN8480"
>Protector module</A
>,
    <A
HREF="urls-longer-than-100-characters.html#AEN12917"
>How to add URLs longer than 100 characters in Downloads and Web Links</A
>,
    <A
HREF="cookies.html#AEN16238"
>Cookie hijack</A
>,
    <A
HREF="mod_rewrite-api-phases.html#AEN17285"
>API phases</A
>,
    <A
HREF="mod_rewrite-api-phases.html#AEN17293"
>API phases</A
>,
    <A
HREF="htaccess-file.html#AEN17584"
>The .htaccess file</A
>,
    <A
HREF="htaccess-file.html#AEN17599"
>The .htaccess file</A
>,
    <A
HREF="check-validity-of-web-links.html#AEN19368"
>How to check the validity of thousands of web links</A
>,
    <A
HREF="check-validity-of-web-links.html#AEN19379"
>How to check the validity of thousands of web links</A
>
  </DT
><DT
>Ephemerids,
    <A
HREF="preinstalled-blocks.html#AEN6084"
>The preinstalled blocks</A
>,
    <A
HREF="preinstalled-blocks.html#AEN6089"
>The preinstalled blocks</A
>,
    <A
HREF="administration-functions.html#AEN6634"
>The administration functions</A
>,
    <A
HREF="enter-thousands-of-ephemerids.html#AEN19442"
>How to enter thousands of ephemerids</A
>,
    <A
HREF="enter-thousands-of-ephemerids.html#AEN19448"
>How to enter thousands of ephemerids</A
>,
    <A
HREF="enter-thousands-of-ephemerids.html#AEN19450"
>How to enter thousands of ephemerids</A
>
  </DT
><DT
>Europe,
    <A
HREF="php-nuke-meteosat-block.html#AEN7631"
>Meteosat block</A
>,
    <A
HREF="make-encyclopedia-international.html#AEN19496"
>How to make the Encyclopedia international</A
>
  </DT
><DT
>evaluation,
    <A
HREF="transferring-local-installation-to-web.html#AEN5024"
>Transferring a local installation to the Web</A
>
  </DT
><DT
>event,
    <A
HREF="test-scripts.html#AEN3841"
>ConnectTest.php</A
>,
    <A
HREF="administration-functions.html#AEN6638"
>The administration functions</A
>,
    <A
HREF="php-nuke-event-calendar-module.html#AEN7961"
>Event calendar</A
>
  </DT
><DT
>Exit,
    <A
HREF="administration-functions.html#AEN6994"
>The administration functions</A
>
  </DT
><DT
>expiration,
    <A
HREF="date-time.html#AEN19642"
>How to deal with date and time</A
>
  </DT
><DT
>expire,
    <A
HREF="register-users-through-ibill.html#AEN12640"
>How to register users through iBill</A
>
  </DT
><DT
>explanation,
    <A
HREF="credits.html#AEN357"
>Credits</A
>,
    <A
HREF="session-management.html#AEN9430"
>Session management</A
>
  </DT
><DT
>exploit,
    <A
HREF="change-font-size-php-nuke.html#AEN11076"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="mod_rewrite.html#AEN17239"
>mod_rewrite</A
>
  </DT
><DT
>Explorer,
    <A
HREF="change-font-size-php-nuke.html#AEN11061"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="favourites-icon-favicon-ico.html#AEN11150"
>How to implement a favourites icon (favicon.ico)</A
>,
    <A
HREF="create-fade-block.html#AEN13489"
>How to create a fade block</A
>
  </DT
><DT
>export,
    <A
HREF="make-encyclopedia-international.html#AEN19518"
>How to make the Encyclopedia international</A
>,
    <A
HREF="make-encyclopedia-international.html#AEN19522"
>How to make the Encyclopedia international</A
>
  </DT
><DT
>Expressions,
    <A
HREF="regular-expressions.html#AEN17410"
>Regular expressions</A
>
  </DT
><DT
>extract,
    <A
HREF="install-phpmyadmin.html#AEN2663"
>How to install phpMyAdmin</A
>
  </DT
><DT
>extraction,
    <A
HREF="upload.html#AEN2456"
>Upload through FTP</A
>,
    <A
HREF="regular-expressions.html#AEN17490"
>Regular expressions</A
>
  </DT
><DT
>ExtraLite,
    <A
HREF="php-nuke-header-watermark-background-image.html#AEN10408"
>How to display a watermark background image</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN23588"
>F</A
></H2
><DL
><DT
>failure,
    <A
HREF="sorry-such-file-doesnt-exist.html#AEN4056"
>Sorry, such file doesn't exist...</A
>
  </DT
><DT
>faked,
    <A
HREF="directory-structure.html#AEN9205"
>Directory structure </A
>
  </DT
><DT
>FAQ,
    <A
HREF="preinstalled-modules.html#AEN5798"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5803"
>The preinstalled modules</A
>,
    <A
HREF="administration-functions.html#AEN6654"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6658"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6661"
>The administration functions</A
>,
    <A
HREF="admin-management.html#AEN9402"
>Administration management </A
>,
    <A
HREF="module-admin.html#AEN14406"
>Module creation, administrator part</A
>,
    <A
HREF="module-admin.html#AEN14408"
>Module creation, administrator part</A
>,
    <A
HREF="module-admin.html#AEN14421"
>Module creation, administrator part</A
>,
    <A
HREF="duplicating-php-nuke-faq-module.html#AEN15145"
>Duplicating the PHP-Nuke FAQ module</A
>,
    <A
HREF="duplicating-php-nuke-faq-module.html#AEN15154"
>Duplicating the PHP-Nuke FAQ module</A
>,
    <A
HREF="duplicating-php-nuke-faq-module.html#AEN15158"
>Duplicating the PHP-Nuke FAQ module</A
>,
    <A
HREF="duplicating-php-nuke-faq-module.html#AEN15162"
>Duplicating the PHP-Nuke FAQ module</A
>,
    <A
HREF="duplicating-php-nuke-faq-module.html#AEN15190"
>Duplicating the PHP-Nuke FAQ module</A
>,
    <A
HREF="display-html-code-in-faq.html#AEN19188"
>How to display HTML code in a FAQ</A
>
  </DT
><DT
>faqAnswer2,
    <A
HREF="duplicating-php-nuke-faq-module.html#AEN15186"
>Duplicating the PHP-Nuke FAQ module</A
>
  </DT
><DT
>FAQs,
    <A
HREF="duplicating-php-nuke-faq-module.html#AEN15137"
>Duplicating the PHP-Nuke FAQ module</A
>
  </DT
><DT
>favicon,
    <A
HREF="favourites-icon-favicon-ico.html#AEN11146"
>How to implement a favourites icon (favicon.ico)</A
>,
    <A
HREF="favourites-icon-favicon-ico.html#AEN11152"
>How to implement a favourites icon (favicon.ico)</A
>,
    <A
HREF="favourites-icon-favicon-ico.html#AEN11157"
>How to implement a favourites icon (favicon.ico)</A
>,
    <A
HREF="favourites-icon-favicon-ico.html#AEN11170"
>How to implement a favourites icon (favicon.ico)</A
>,
    <A
HREF="favourites-icon-favicon-ico.html#AEN11179"
>How to implement a favourites icon (favicon.ico)</A
>
  </DT
><DT
>features,
    <A
HREF="install-php-nuke-nukesql.html#AEN3074"
>How to install PHP-Nuke using nukesql.php</A
>,
    <A
HREF="preinstalled-modules.html#AEN5842"
>The preinstalled modules</A
>,
    <A
HREF="php-nuke-upload-module.html#AEN8757"
>Upload module</A
>,
    <A
HREF="upload-add-on-for-phpbb.html#AEN8916"
>Upload add-on for phpBB</A
>,
    <A
HREF="php-nuke-ecommerce-module.html#AEN8986"
>eCommerce module</A
>,
    <A
HREF="php-nuke-ecommerce-module.html#AEN9023"
>eCommerce module</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13793"
>How to create a Help Center Live block</A
>,
    <A
HREF="regular-expressions.html#AEN17422"
>Regular expressions</A
>,
    <A
HREF="allow-anonymous-web-link-submissions.html#AEN18804"
>How to allow anonymous web link submissions</A
>
  </DT
><DT
>feed,
    <A
HREF="enter-thousands-of-web-links.html#AEN19211"
>How to enter thousands of web links</A
>
  </DT
><DT
>Feedback,
    <A
HREF="preinstalled-modules.html#AEN5371"
>The preinstalled modules</A
>
  </DT
><DT
>filename,
    <A
HREF="administration-functions.html#AEN6405"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6416"
>The administration functions</A
>,
    <A
HREF="include-html-file-and-links-in-module.html#AEN14774"
>How to include a HTML file and its links in a PHP-Nuke module</A
>,
    <A
HREF="cache-lite.html#AEN16764"
>How to use Cache-Lite</A
>,
    <A
HREF="mod_rewrite-api-phases.html#AEN17274"
>API phases</A
>
  </DT
><DT
>filter,
    <A
HREF="allow-special-html-tags.html#AEN11249"
>How to allow special HTML tags</A
>,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15767"
>Cross-site tracing with PHP-Nuke</A
>
  </DT
><DT
>filter_text,
    <A
HREF="allow-special-html-tags.html#AEN11247"
>How to allow special HTML tags</A
>,
    <A
HREF="allow-special-html-tags.html#AEN11555"
>How to allow special HTML tags</A
>
  </DT
><DT
>FINAL,
    <A
HREF="credits-versions-1.x.html#AEN569"
>Versions 1.x</A
>
  </DT
><DT
>firmware,
    <A
HREF="security-record-software-popularity.html#AEN15326"
>The impact of bad security record on software popularity </A
>
  </DT
><DT
>FIXME,
    <A
HREF="credits-version-2.0.html#AEN712"
>Version 2.0</A
>,
    <A
HREF="php-nuke-treemenu-with-javascript.html#AEN7848"
>Treemenu with Javascript</A
>,
    <A
HREF="vi.html#AEN9605"
>vi</A
>,
    <A
HREF="emacs.html#AEN9610"
>Emacs</A
>,
    <A
HREF="bluefish.html#AEN9615"
>Bluefish</A
>,
    <A
HREF="ultraedit.html#AEN9620"
>UltraEdit</A
>,
    <A
HREF="winsyntax.html#AEN9625"
>WinSyntax</A
>,
    <A
HREF="htmlkit.html#AEN9630"
>HTMLKit</A
>,
    <A
HREF="crimson-editor.html#AEN9635"
>Crimson Editor</A
>,
    <A
HREF="phped.html#AEN9640"
>PHPEd</A
>,
    <A
HREF="caching-php-nuke-conclusion.html#AEN17022"
>Caching PHP-Nuke: Conclusion</A
>,
    <A
HREF="php-nuke-under-ssl.html#AEN19017"
>How to use PHP-Nuke under SSL</A
>,
    <A
HREF="database-tables.html#AEN20154"
>The database tables </A
>
  </DT
><DT
>flash,
    <A
HREF="block-theory.html#AEN13207"
>How to create a block, theoretical approach</A
>,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15741"
>Cross-site tracing with PHP-Nuke</A
>
  </DT
><DT
>font-size,
    <A
HREF="change-font-size-php-nuke.html#AEN11090"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11114"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11120"
>How to change the font size in PHP-Nuke</A
>
  </DT
><DT
>fonts,
    <A
HREF="theme-rules.html#AEN10852"
>Theme construction: the rules to follow </A
>
  </DT
><DT
>foobar,
    <A
HREF="install-patches-correct-errors.html#AEN18718"
>How to install patches and correct errors</A
>,
    <A
HREF="install-patches-correct-errors.html#AEN18720"
>How to install patches and correct errors</A
>
  </DT
><DT
>foobar.orig,
    <A
HREF="install-patches-correct-errors.html#AEN18722"
>How to install patches and correct errors</A
>
  </DT
><DT
>football,
    <A
HREF="preinstalled-modules.html#AEN5493"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5497"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5508"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5512"
>The preinstalled modules</A
>
  </DT
><DT
>footer,
    <A
HREF="credits-versions-1.x.html#AEN539"
>Versions 1.x</A
>,
    <A
HREF="preferences.html#AEN7343"
>The Preferences Page </A
>,
    <A
HREF="architecture.html#AEN9143"
>Architecture and structure </A
>,
    <A
HREF="php-nuke-theme-modifying-footer.html#AEN10687"
>Modifying the PHP-Nuke theme footer</A
>,
    <A
HREF="googletap.html#AEN17769"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17773"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17775"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17777"
>Installation</A
>,
    <A
HREF="googletap.html#AEN18035"
>How it works</A
>
  </DT
><DT
>footer.php,
    <A
HREF="googletap.html#AEN17767"
>Installation</A
>,
    <A
HREF="googletap.html#AEN18037"
>How it works</A
>
  </DT
><DT
>forecast,
    <A
HREF="display-images-php-nuke-blocks.html#AEN13877"
>How to display images in PHP-Nuke blocks</A
>
  </DT
><DT
>foreground,
    <A
HREF="change-background-colour.html#AEN10614"
>How to change background colour</A
>
  </DT
><DT
>forks,
    <A
HREF="php-nuke-forks.html#AEN2049"
>The PHP-Nuke forks</A
>
  </DT
><DT
>format,
    <A
HREF="phpmyadmin-navigation-bar-export.html#AEN2907"
>phpMyAdmin navigation bar: Export</A
>,
    <A
HREF="phpmyadmin-other-commands.html#AEN2981"
>phpMyAdmin: other commands</A
>,
    <A
HREF="preinstalled-modules.html#AEN5593"
>The preinstalled modules</A
>,
    <A
HREF="administration-functions.html#AEN6365"
>The administration functions</A
>,
    <A
HREF="preferences.html#AEN7279"
>The Preferences Page </A
>,
    <A
HREF="topic-structure.html#AEN9977"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="favourites-icon-favicon-ico.html#AEN11161"
>How to implement a favourites icon (favicon.ico)</A
>,
    <A
HREF="adjust-server-time.html#AEN19869"
>How to adjust server time</A
>
  </DT
><DT
>formats,
    <A
HREF="formats.html#AEN160"
>Formats</A
>,
    <A
HREF="formats.html#AEN261"
>Formats</A
>,
    <A
HREF="translate-php-nuke-howto.html#AEN1726"
>How to translate this HOWTO</A
>,
    <A
HREF="phpmyadmin-other-commands.html#AEN2973"
>phpMyAdmin: other commands</A
>
  </DT
><DT
>Forum,
    <A
HREF="communities.html#AEN1935"
>The PHP-Nuke Communities</A
>,
    <A
HREF="whyphpnuke.html#AEN2013"
>Why use PHP-Nuke and not static HTML pages</A
>,
    <A
HREF="preinstalled-modules.html#AEN5428"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5438"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5811"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5816"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5834"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-blocks.html#AEN6070"
>The preinstalled blocks</A
>,
    <A
HREF="administration-functions.html#AEN6680"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6695"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6697"
>The administration functions</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7013"
>phpBB Forum administration</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7034"
>phpBB Forum administration</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7046"
>phpBB Forum administration</A
>,
    <A
HREF="module-structure.html#AEN14152"
>Module structure </A
>,
    <A
HREF="cross-site-scripting-with-php-nuke.html#AEN15528"
>Cross-site scripting with PHP-Nuke</A
>
  </DT
><DT
>foxserv,
    <A
HREF="foxserv.html#AEN21180"
>Foxserv, making PHP-Nuke work on Windows Systems</A
>,
    <A
HREF="foxserv.html#AEN21185"
>Foxserv, making PHP-Nuke work on Windows Systems</A
>
  </DT
><DT
>FoxServ-2.0core.exe,
    <A
HREF="foxserv.html#AEN21172"
>Foxserv, making PHP-Nuke work on Windows Systems</A
>
  </DT
><DT
>frame,
    <A
HREF="phpbb-forum-administration.html#AEN7015"
>phpBB Forum administration</A
>,
    <A
HREF="include-html-file-and-links-in-module-iframe.html#AEN14796"
>How to include a HTML file and its links using an iframe in a PHP-Nuke module</A
>
  </DT
><DT
>frames,
    <A
HREF="include-html-file-and-links-in-module.html#AEN14621"
>How to include a HTML file and its links in a PHP-Nuke module</A
>,
    <A
HREF="include-html-file-and-links-in-module-iframe.html#AEN14848"
>How to include a HTML file and its links using an iframe in a PHP-Nuke module</A
>
  </DT
><DT
>Free Software Foundation,
    <A
HREF="licence.html#AEN286"
>Licence</A
>
  </DT
><DT
>french,
    <A
HREF="credits-versions-1.x.html#AEN541"
>Versions 1.x</A
>,
    <A
HREF="credits-versions-1.x.html#AEN547"
>Versions 1.x</A
>,
    <A
HREF="failed-opening-lang-php.html#AEN3996"
>Error: Failed opening 'language/lang-.php' for inclusion</A
>,
    <A
HREF="php-nuke-header-change.html#AEN10170"
>How to change the PHP-Nuke header depending on some global feature</A
>,
    <A
HREF="php-nuke-header-change.html#AEN10183"
>How to change the PHP-Nuke header depending on some global feature</A
>
  </DT
><DT
>friendliness,
    <A
HREF="googletap.html#AEN18107"
>How it works</A
>
  </DT
><DT
>frustration,
    <A
HREF="common-installation-problems.html#AEN3786"
>Common installation problems</A
>
  </DT
><DT
>function,
    <A
HREF="phpmyadmin-navigation-bar-structure.html#AEN2811"
>phpMyAdmin navigation bar: Structure</A
>,
    <A
HREF="easyphp.html#AEN3204"
>How to check a successful installation</A
>,
    <A
HREF="upgrade-php-nuke.html#AEN4862"
>How to upgrade PHP-Nuke</A
>,
    <A
HREF="frontend.html#AEN5227"
>Front end structure: user view</A
>,
    <A
HREF="preinstalled-modules.html#AEN5736"
>The preinstalled modules</A
>,
    <A
HREF="administration-functions.html#AEN6312"
>The administration functions</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7067"
>phpBB Forum administration</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7161"
>phpBB Forum administration</A
>,
    <A
HREF="php-nuke-protector-module.html#AEN8492"
>Protector module</A
>,
    <A
HREF="topic-structure.html#AEN9935"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="php-nuke-header-change.html#AEN10188"
>How to change the PHP-Nuke header depending on some global feature</A
>,
    <A
HREF="php-nuke-header-display-flash-object.html#AEN10442"
>How to display a Flash object in the PHP-Nuke header</A
>,
    <A
HREF="multipage-news-articles.html#AEN10533"
>How to get multipage News articles</A
>,
    <A
HREF="php-nuke-copyright-notice.html#AEN10736"
>The PHP-Nuke Copyright notice</A
>,
    <A
HREF="theme-rules.html#AEN10838"
>Theme construction: the rules to follow </A
>,
    <A
HREF="change-php-nuke-theme-depending-on-module.html#AEN10938"
>How to change the PHP-Nuke theme depending on the module</A
>,
    <A
HREF="allow-only-registered-users-to-review.html#AEN12164"
>How to allow only registered users to enter a review</A
>,
    <A
HREF="redirect-users-to-login-and-back.html#AEN12516"
>How to redirect users to Login and back</A
>,
    <A
HREF="get-rid-of-br-in-news.html#AEN12687"
>How to get rid of the need to use &#60;br&#62; for new lines</A
>,
    <A
HREF="advertisements-in-php-nuke-blocks.html#AEN13830"
>How to show advertisements in PHP-Nuke blocks</A
>,
    <A
HREF="cache-lite.html#AEN16728"
>How to use Cache-Lite</A
>,
    <A
HREF="googletap.html#AEN17784"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17797"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17804"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17899"
>How it works</A
>,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18404"
>How to restore PHP-Nuke from backup</A
>,
    <A
HREF="install-modules-with-database-files-change.html#AEN18693"
>How to install modules that change the database structure and the files</A
>,
    <A
HREF="find-last-date.html#AEN19716"
>How to find the last date of...</A
>,
    <A
HREF="discordian-calendar.html#AEN20045"
>The Discordian Calendar</A
>,
    <A
HREF="php-functions.html#AEN20952"
>Functions</A
>,
    <A
HREF="php-functions.html#AEN20962"
>Functions</A
>,
    <A
HREF="php-switches.html#AEN20987"
>Switches</A
>,
    <A
HREF="php-switches.html#AEN20989"
>Switches</A
>
  </DT
><DT
>functionality,
    <A
HREF="permissions.html#AEN2561"
>File permissions</A
>,
    <A
HREF="frontend.html#AEN5188"
>Front end structure: user view</A
>,
    <A
HREF="preinstalled-modules.html#AEN5395"
>The preinstalled modules</A
>,
    <A
HREF="administration-functions.html#AEN6724"
>The administration functions</A
>,
    <A
HREF="php-nuke-moon-sun-block.html#AEN7610"
>Moon &#38; Sun block</A
>,
    <A
HREF="multipage-news-articles.html#AEN10519"
>How to get multipage News articles</A
>,
    <A
HREF="favourites-icon-favicon-ico.html#AEN11148"
>How to implement a favourites icon (favicon.ico)</A
>,
    <A
HREF="javascript-in-php-nuke-blocks.html#AEN13368"
>How to use Javascript in PHP-Nuke blocks</A
>,
    <A
HREF="create-hello-world-block.html#AEN13475"
>How to create a Hello World block</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13691"
>How to create a Help Center Live block</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13796"
>How to create a Help Center Live block</A
>,
    <A
HREF="security-measures.html#AEN16013"
>Security measures </A
>,
    <A
HREF="turck-mmcache.html#AEN16960"
>How to use Turck MMCache</A
>,
    <A
HREF="mod_rewrite.html#AEN17241"
>mod_rewrite</A
>,
    <A
HREF="solve-common-problems-php-nuke.html#AEN18300"
>How to solve common probems with PHP-Nuke</A
>,
    <A
HREF="mysql-frontend.html#AEN21106"
>MySQL Front, how to administer a MySQL DB from Windows </A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN23846"
>G</A
></H2
><DL
><DT
>Gallery,
    <A
HREF="php-nuke-gallery-module.html#AEN8235"
>Gallery module</A
>
  </DT
><DT
>garbage,
    <A
HREF="garbage-on-page.html#AEN4538"
>You get garbage in some parts of the page</A
>,
    <A
HREF="bypass-article-approval.html#AEN12744"
>How to bypass article approval</A
>
  </DT
><DT
>GET,
    <A
HREF="search-engines-and-dynamic-urls.html#AEN17122"
>Search engines and dynamic URLs</A
>
  </DT
><DT
>gftp,
    <A
HREF="upload.html#AEN2395"
>Upload through FTP</A
>
  </DT
><DT
>global,
    <A
HREF="php-nuke-header-change.html#AEN10173"
>How to change the PHP-Nuke header depending on some global feature</A
>,
    <A
HREF="php-nuke-header-change.html#AEN10185"
>How to change the PHP-Nuke header depending on some global feature</A
>,
    <A
HREF="php-functions.html#AEN20972"
>Functions</A
>,
    <A
HREF="sql-syntax.html#AEN21082"
>The syntax of SQL code</A
>
  </DT
><DT
>GMT,
    <A
HREF="php-nuke-meteosat-block.html#AEN7647"
>Meteosat block</A
>,
    <A
HREF="php-nuke-meteosat-block.html#AEN7649"
>Meteosat block</A
>
  </DT
><DT
>GNU,
    <A
HREF="php-nuke-workboard-module.html#AEN9040"
>WorkBoard Module</A
>
  </DT
><DT
>GNU Free Documentation License,
    <A
HREF="licence.html#AEN284"
>Licence</A
>
  </DT
><DT
>God,
    <A
HREF="config-php-file.html#AEN3609"
>The config.php file</A
>,
    <A
HREF="config-php-file.html#AEN3613"
>The config.php file</A
>,
    <A
HREF="config-php-file.html#AEN3637"
>The config.php file</A
>
  </DT
><DT
>goodies,
    <A
HREF="apache2triad.html#AEN3287"
>Apache2Triad</A
>
  </DT
><DT
>Google,
    <A
HREF="search-engines-and-get-method.html#AEN17148"
>Search engines and the GET method</A
>,
    <A
HREF="search-engines-and-get-method.html#AEN17154"
>Search engines and the GET method</A
>
  </DT
><DT
>GoogleTap,
    <A
HREF="make-php-nuke-search-engine-friendly.html#AEN17647"
>How to make PHP-Nuke search engine friendly</A
>,
    <A
HREF="googletap.html#AEN17695"
>Requirements</A
>,
    <A
HREF="googletap.html#AEN17731"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17850"
>Installation</A
>,
    <A
HREF="googletap.html#AEN18043"
>How it works</A
>
  </DT
><DT
>Gossip,
    <A
HREF="preinstalled-modules.html#AEN5501"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5516"
>The preinstalled modules</A
>
  </DT
><DT
>GPL,
    <A
HREF="php-nuke-copyright-notice.html#AEN10757"
>The PHP-Nuke Copyright notice</A
>,
    <A
HREF="include-html-file-in-module.html#AEN14570"
>How to include a HTML file in a PHP-Nuke module</A
>
  </DT
><DT
>granular,
    <A
HREF="mod_rewrite.html#AEN17219"
>mod_rewrite</A
>
  </DT
><DT
>graphics,
    <A
HREF="communities.html#AEN1962"
>The PHP-Nuke Communities</A
>,
    <A
HREF="communities.html#AEN1967"
>The PHP-Nuke Communities</A
>,
    <A
HREF="php-nuke-theme-modifying-icons.html#AEN10806"
>Modifying the PHP-Nuke theme icons</A
>,
    <A
HREF="php-nuke-theme-modifying-icons.html#AEN10811"
>Modifying the PHP-Nuke theme icons</A
>
  </DT
><DT
>Gregorian,
    <A
HREF="discordian-calendar.html#AEN20029"
>The Discordian Calendar</A
>
  </DT
><DT
>guide,
    <A
HREF="credits-versions-1.x.html#AEN573"
>Versions 1.x</A
>
  </DT
><DT
>Guru,
    <A
HREF="php-nuke-copyright-notice.html#AEN10794"
>The PHP-Nuke Copyright notice</A
>
  </DT
><DT
>GZIP,
    <A
HREF="phpmyadmin-navigation-bar-export.html#AEN2924"
>phpMyAdmin navigation bar: Export</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN23925"
>H</A
></H2
><DL
><DT
>hack,
    <A
HREF="php-nuke-ip-tracking-module.html#AEN8388"
>IP Tracking module</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11082"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="cookies.html#AEN16225"
>Cookie hijack</A
>
  </DT
><DT
>hacked,
    <A
HREF="security-measures.html#AEN15910"
>Security measures </A
>,
    <A
HREF="hacked-now-what.html#AEN16377"
>Hacked - now what?</A
>
  </DT
><DT
>hacker,
    <A
HREF="php-nuke-under-ssl.html#AEN19021"
>How to use PHP-Nuke under SSL</A
>
  </DT
><DT
>hackers,
    <A
HREF="php-nuke-protector-module.html#AEN8498"
>Protector module</A
>,
    <A
HREF="how-sessions-work.html#AEN9451"
>How sessions work in the forums</A
>
  </DT
><DT
>hand-out,
    <A
HREF="licence.html#AEN316"
>Licence</A
>
  </DT
><DT
>hardcoded,
    <A
HREF="topic-structure.html#AEN9946"
>Structure of a PHP-Nuke theme</A
>
  </DT
><DT
>hash,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15649"
>SQL injection with PHP-Nuke</A
>
  </DT
><DT
>headache,
    <A
HREF="bypass-article-approval.html#AEN12755"
>How to bypass article approval</A
>
  </DT
><DT
>headaches,
    <A
HREF="test-scripts.html#AEN3797"
>Test scripts</A
>,
    <A
HREF="sorry-such-file-doesnt-exist.html#AEN4092"
>Sorry, such file doesn't exist...</A
>,
    <A
HREF="html-create-link.html#AEN20657"
>How to create a link in HTML</A
>
  </DT
><DT
>Header,
    <A
HREF="preinstalled-modules.html#AEN5773"
>The preinstalled modules</A
>,
    <A
HREF="administration-functions.html#AEN6316"
>The administration functions</A
>,
    <A
HREF="preferences.html#AEN7311"
>The Preferences Page </A
>,
    <A
HREF="preferences.html#AEN7314"
>The Preferences Page </A
>,
    <A
HREF="php-nuke-ip-tracking-module.html#AEN8344"
>IP Tracking module</A
>,
    <A
HREF="directory-structure.html#AEN9241"
>Directory structure </A
>,
    <A
HREF="topic-structure.html#AEN9910"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="topic-structure.html#AEN9928"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="topic-structure.html#AEN9937"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="php-nuke-header-create-top-navigation-bar.html#AEN10133"
>How to create a top navigation bar as in NukeNews theme</A
>,
    <A
HREF="php-nuke-header-create-top-navigation-bar.html#AEN10146"
>How to create a top navigation bar as in NukeNews theme</A
>,
    <A
HREF="php-nuke-header-insert-slashocean-search-box.html#AEN10151"
>How to insert a Search Box as in SlashOcean theme</A
>,
    <A
HREF="php-nuke-header-change.html#AEN10196"
>How to change the PHP-Nuke header depending on some global feature</A
>,
    <A
HREF="php-nuke-header-change-logo.html#AEN10213"
>How to change the logo in the PHP-Nuke header</A
>,
    <A
HREF="php-nuke-header-display-flash-object.html#AEN10433"
>How to display a Flash object in the PHP-Nuke header</A
>,
    <A
HREF="modifying-php-nuke-html-header.html#AEN11133"
>Modifying the PHP-Nuke HTML header</A
>,
    <A
HREF="modifying-php-nuke-html-header.html#AEN11141"
>Modifying the PHP-Nuke HTML header</A
>,
    <A
HREF="favourites-icon-favicon-ico.html#AEN11172"
>How to implement a favourites icon (favicon.ico)</A
>,
    <A
HREF="prevent-statistics-module-gathering-hits.html#AEN11194"
>How to prevent the statistics module from gathering hits from certain hosts</A
>,
    <A
HREF="prevent-statistics-module-gathering-hits.html#AEN11203"
>How to prevent the statistics module from gathering hits from certain hosts</A
>,
    <A
HREF="module-admin.html#AEN14487"
>Module creation, administrator part</A
>,
    <A
HREF="ban-ip-addresses.html#AEN16343"
>How to ban IP addresses</A
>,
    <A
HREF="googletap.html#AEN17667"
>GoogleTap</A
>,
    <A
HREF="googletap.html#AEN17738"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17740"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17742"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17746"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17750"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17752"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17754"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17756"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17759"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17780"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17786"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17815"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17895"
>How it works</A
>,
    <A
HREF="googletap.html#AEN18017"
>How it works</A
>,
    <A
HREF="googletap.html#AEN18019"
>How it works</A
>,
    <A
HREF="googletap.html#AEN18023"
>How it works</A
>,
    <A
HREF="googletap.html#AEN18077"
>How it works</A
>,
    <A
HREF="googletap.html#AEN18096"
>How it works</A
>,
    <A
HREF="make-dynamic-css.html#AEN18213"
>How to make a dynamic CSS</A
>,
    <A
HREF="css-syntax.html#AEN20838"
>The syntax of CSS</A
>
  </DT
><DT
>headers,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15705"
>Cross-site tracing with PHP-Nuke</A
>,
    <A
HREF="mod_rewrite.html#AEN17217"
>mod_rewrite</A
>
  </DT
><DT
>headlines,
    <A
HREF="administration-functions.html#AEN6371"
>The administration functions</A
>,
    <A
HREF="build-rss-blocks-with-variable-news-number.html#AEN11884"
>How to build RSS blocks with variable number of news items</A
>,
    <A
HREF="build-rss-blocks-with-variable-news-number.html#AEN11887"
>How to build RSS blocks with variable number of news items</A
>,
    <A
HREF="scrolling-headlines-in-blocks.html#AEN11912"
>How to get scrolling headlines in blocks</A
>,
    <A
HREF="database-tables.html#AEN20327"
>The database tables </A
>
  </DT
><DT
>hello-world.php,
    <A
HREF="create-hello-world-block.html#AEN13452"
>How to create a Hello World block</A
>,
    <A
HREF="create-hello-world-block.html#AEN13470"
>How to create a Hello World block</A
>
  </DT
><DT
>higher-level,
    <A
HREF="htaccess-file.html#AEN17589"
>The .htaccess file</A
>
  </DT
><DT
>hijacked,
    <A
HREF="how-sessions-work.html#AEN9521"
>How sessions work in the forums</A
>
  </DT
><DT
>hijacking,
    <A
HREF="how-sessions-work.html#AEN9519"
>How sessions work in the forums</A
>
  </DT
><DT
>history,
    <A
HREF="php-nuke-ecommerce-module.html#AEN8963"
>eCommerce module</A
>
  </DT
><DT
>homepage,
    <A
HREF="preinstalled-modules.html#AEN5385"
>The preinstalled modules</A
>,
    <A
HREF="directory-structure.html#AEN9245"
>Directory structure </A
>,
    <A
HREF="general-php-nuke-texts.html#AEN9719"
>General PHP-Nuke texts</A
>,
    <A
HREF="enter-thousands-of-download-links.html#AEN19306"
>How to enter thousands of download links</A
>
  </DT
><DT
>hook,
    <A
HREF="mod_rewrite-api-phases.html#AEN17287"
>API phases</A
>
  </DT
><DT
>hooks,
    <A
HREF="mod_rewrite-api-phases.html#AEN17265"
>API phases</A
>
  </DT
><DT
>hosters,
    <A
HREF="resources.html#AEN3773"
>Resources</A
>,
    <A
HREF="changing-web-hoster.html#AEN5173"
>Changing Web hoster</A
>
  </DT
><DT
>hosting,
    <A
HREF="resources.html#AEN3765"
>Resources</A
>
  </DT
><DT
>hosts.allow,
    <A
HREF="changing-web-hoster.html#AEN5104"
>Changing Web hoster</A
>
  </DT
><DT
>hours,
    <A
HREF="history.html#AEN1889"
>Short history of PHP-Nuke</A
>,
    <A
HREF="cookies.html#AEN16249"
>Cookie hijack</A
>,
    <A
HREF="cookies.html#AEN16259"
>Cookie hijack</A
>,
    <A
HREF="adjust-server-time.html#AEN19854"
>How to adjust server time</A
>,
    <A
HREF="adjust-server-time.html#AEN19997"
>How to adjust server time</A
>
  </DT
><DT
>HOWTO,
    <A
HREF="aknowledgements.html#AEN1363"
>Aknowledgements</A
>,
    <A
HREF="common-installation-problems.html#AEN3791"
>Common installation problems</A
>,
    <A
HREF="html-create-link.html#AEN20641"
>How to create a link in HTML</A
>
  </DT
><DT
>HTML,
    <A
HREF="book-behind-book.html#AEN1638"
>The book behind the book</A
>,
    <A
HREF="php-nuke-vs-post-nuke.html#AEN2070"
>PHP-Nuke vs. Post-Nuke</A
>,
    <A
HREF="php-nuke-header-create-top-navigation-bar.html#AEN10129"
>How to create a top navigation bar as in NukeNews theme</A
>,
    <A
HREF="get-rid-of-br-in-news.html#AEN12683"
>How to get rid of the need to use &#60;br&#62; for new lines</A
>,
    <A
HREF="allow-html-newsletter.html#AEN13041"
>How to allow HTML in the Newsletter</A
>,
    <A
HREF="cross-site-scripting-with-php-nuke.html#AEN15549"
>Cross-site scripting with PHP-Nuke</A
>,
    <A
HREF="security-measures.html#AEN16011"
>Security measures </A
>,
    <A
HREF="make-dynamic-css.html#AEN18198"
>How to make a dynamic CSS</A
>,
    <A
HREF="size-select-boxes.html#AEN19619"
>How to size the select boxes in a module</A
>,
    <A
HREF="html-create-link.html#AEN20674"
>How to create a link in HTML</A
>,
    <A
HREF="css-syntax.html#AEN20770"
>The syntax of CSS</A
>
  </DT
><DT
>HTTP,
    <A
HREF="administration-functions.html#AEN6529"
>The administration functions</A
>,
    <A
HREF="php-nuke-under-ssl.html#AEN19080"
>How to use PHP-Nuke under SSL</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN24083"
>I</A
></H2
><DL
><DT
>Iconboard,
    <A
HREF="security-record-software-popularity.html#AEN15324"
>The impact of bad security record on software popularity </A
>
  </DT
><DT
>icons,
    <A
HREF="phpbb-forum-administration.html#AEN7123"
>phpBB Forum administration</A
>,
    <A
HREF="php-nuke-theme-modifying-icons.html#AEN10817"
>Modifying the PHP-Nuke theme icons</A
>,
    <A
HREF="php-nuke-theme-modifying-icons.html#AEN10821"
>Modifying the PHP-Nuke theme icons</A
>,
    <A
HREF="database-tables.html#AEN20515"
>The database tables </A
>
  </DT
><DT
>ICQ,
    <A
HREF="preinstalled-modules.html#AEN5689"
>The preinstalled modules</A
>
  </DT
><DT
>IDE,
    <A
HREF="php-nuke-tools-module.html#AEN8737"
>PHP-Nuke-Tools module </A
>
  </DT
><DT
>identifier,
    <A
HREF="how-sessions-work.html#AEN9546"
>How sessions work in the forums</A
>,
    <A
HREF="cache-lite.html#AEN16761"
>How to use Cache-Lite</A
>
  </DT
><DT
>idperson,
    <A
HREF="module-public.html#AEN14284"
>Module creation, the public part</A
>
  </DT
><DT
>IIS,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15750"
>Cross-site tracing with PHP-Nuke</A
>,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15765"
>Cross-site tracing with PHP-Nuke</A
>
  </DT
><DT
>illustrated,
    <A
HREF="cookies.html#AEN16271"
>Cookie hijack</A
>
  </DT
><DT
>images,
    <A
HREF="architecture.html#AEN9115"
>Architecture and structure </A
>,
    <A
HREF="directory-structure.html#AEN9213"
>Directory structure </A
>,
    <A
HREF="topic-structure.html#AEN9894"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="choose-images-from-dropdown-list.html#AEN12190"
>How to choose images from a dropdown list</A
>,
    <A
HREF="display-images-php-nuke-blocks.html#AEN13862"
>How to display images in PHP-Nuke blocks</A
>,
    <A
HREF="display-images-php-nuke-blocks.html#AEN13870"
>How to display images in PHP-Nuke blocks</A
>,
    <A
HREF="display-random-images-php-nuke-blocks.html#AEN13962"
>How to display random images in PHP-Nuke blocks</A
>,
    <A
HREF="php-nuke-under-ssl.html#AEN19050"
>How to use PHP-Nuke under SSL</A
>,
    <A
HREF="html-syntax.html#AEN20583"
>The syntax of HTML code</A
>
  </DT
><DT
>impetus,
    <A
HREF="php-nuke-vs-post-nuke.html#AEN2130"
>PHP-Nuke vs. Post-Nuke</A
>
  </DT
><DT
>includes,
    <A
HREF="include-path.html#AEN4271"
>Include path is wrong</A
>,
    <A
HREF="directory-structure.html#AEN9225"
>Directory structure </A
>,
    <A
HREF="admin-management.html#AEN9398"
>Administration management </A
>,
    <A
HREF="create-hello-world-block.html#AEN13468"
>How to create a Hello World block</A
>
  </DT
><DT
>index,
    <A
HREF="sorry-such-file-doesnt-exist.html#AEN4077"
>Sorry, such file doesn't exist...</A
>,
    <A
HREF="security-code.html#AEN4227"
>How to bypass the security code</A
>,
    <A
HREF="administration-functions.html#AEN6767"
>The administration functions</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7020"
>phpBB Forum administration</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7028"
>phpBB Forum administration</A
>,
    <A
HREF="php-nuke-my-headlines-module.html#AEN8645"
>My Headlines module</A
>,
    <A
HREF="architecture.html#AEN9100"
>Architecture and structure </A
>,
    <A
HREF="architecture.html#AEN9126"
>Architecture and structure </A
>,
    <A
HREF="architecture.html#AEN9153"
>Architecture and structure </A
>,
    <A
HREF="directory-structure.html#AEN9190"
>Directory structure </A
>,
    <A
HREF="module-management.html#AEN9341"
>Module management</A
>,
    <A
HREF="how-sessions-work.html#AEN9503"
>How sessions work in the forums</A
>,
    <A
HREF="redirect-users-to-login-page.html#AEN12053"
>How to redirect users to the Login page</A
>,
    <A
HREF="allow-only-registered-users-to-review.html#AEN12158"
>How to allow only registered users to enter a review</A
>,
    <A
HREF="display-web-links-in-the-same-window.html#AEN12224"
>How to display Web Links in the same window</A
>,
    <A
HREF="redirect-users-to-homepage.html#AEN12330"
>How to redirect users to the Homepage</A
>,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12442"
>How to redirect Your Info to the Forums user profile</A
>,
    <A
HREF="redirect-users-to-login-and-back.html#AEN12514"
>How to redirect users to Login and back</A
>,
    <A
HREF="redirect-users-to-login-and-back.html#AEN12530"
>How to redirect users to Login and back</A
>,
    <A
HREF="disable-registration.html#AEN12541"
>How to disable registration</A
>,
    <A
HREF="disable-registration.html#AEN12556"
>How to disable registration</A
>,
    <A
HREF="disable-registration.html#AEN12562"
>How to disable registration</A
>,
    <A
HREF="disable-registration.html#AEN12571"
>How to disable registration</A
>,
    <A
HREF="get-rid-of-br-in-news.html#AEN12697"
>How to get rid of the need to use &#60;br&#62; for new lines</A
>,
    <A
HREF="urls-longer-than-100-characters.html#AEN12919"
>How to add URLs longer than 100 characters in Downloads and Web Links</A
>,
    <A
HREF="urls-longer-than-100-characters.html#AEN12932"
>How to add URLs longer than 100 characters in Downloads and Web Links</A
>,
    <A
HREF="module-structure.html#AEN14169"
>Module structure </A
>,
    <A
HREF="module-public.html#AEN14343"
>Module creation, the public part</A
>,
    <A
HREF="include-html-file-in-module.html#AEN14559"
>How to include a HTML file in a PHP-Nuke module</A
>,
    <A
HREF="include-html-file-and-links-in-module.html#AEN14638"
>How to include a HTML file and its links in a PHP-Nuke module</A
>,
    <A
HREF="include-html-file-and-links-in-module.html#AEN14768"
>How to include a HTML file and its links in a PHP-Nuke module</A
>,
    <A
HREF="include-html-file-and-links-in-module-iframe.html#AEN14803"
>How to include a HTML file and its links using an iframe in a PHP-Nuke module</A
>,
    <A
HREF="create-logout-module.html#AEN14997"
>How to create a Logout module</A
>,
    <A
HREF="html-forms-in-module.html#AEN15081"
>How to display HTML forms in a module</A
>,
    <A
HREF="path-disclosure-with-php-nuke.html#AEN15669"
>Path disclosure with PHP-Nuke</A
>,
    <A
HREF="jpcache.html#AEN16582"
>How to use jpcache</A
>,
    <A
HREF="cache-lite.html#AEN16639"
>Cache-Lite</A
>,
    <A
HREF="turck-mmcache.html#AEN16964"
>How to use Turck MMCache</A
>,
    <A
HREF="allow-anonymous-web-link-submissions.html#AEN18823"
>How to allow anonymous web link submissions</A
>,
    <A
HREF="allow-anonymous-web-link-submissions.html#AEN18826"
>How to allow anonymous web link submissions</A
>,
    <A
HREF="change-home-module.html#AEN18994"
>How to change the Home module</A
>
  </DT
><DT
>index.php,
    <A
HREF="main-page-management.html#AEN9314"
>Main page management</A
>,
    <A
HREF="main-page-management.html#AEN9318"
>Main page management</A
>,
    <A
HREF="module-management.html#AEN9364"
>Module management</A
>,
    <A
HREF="change-background-colour.html#AEN10600"
>How to change background colour</A
>,
    <A
HREF="change-background-colour.html#AEN10605"
>How to change background colour</A
>,
    <A
HREF="choose-images-from-dropdown-list.html#AEN12184"
>How to choose images from a dropdown list</A
>,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12472"
>How to redirect Your Info to the Forums user profile</A
>,
    <A
HREF="change-maximum-username-length.html#AEN12653"
>How to change the maximum allowed length for user names</A
>,
    <A
HREF="order-articles-in-sections.html#AEN12838"
>How to order the articles in the Sections module</A
>,
    <A
HREF="order-articles-in-stories-archive.html#AEN12967"
>How to order the articles in the Stories Archive module</A
>,
    <A
HREF="module-structure.html#AEN14171"
>Module structure </A
>,
    <A
HREF="module-structure.html#AEN14175"
>Module structure </A
>,
    <A
HREF="module-structure.html#AEN14196"
>Module structure </A
>,
    <A
HREF="module-rules.html#AEN14231"
>Creating fully compatible modules: the rules to follow</A
>,
    <A
HREF="include-html-file-in-module.html#AEN14563"
>How to include a HTML file in a PHP-Nuke module</A
>,
    <A
HREF="include-html-file-and-links-in-module.html#AEN14616"
>How to include a HTML file and its links in a PHP-Nuke module</A
>,
    <A
HREF="include-html-file-and-links-in-module.html#AEN14641"
>How to include a HTML file and its links in a PHP-Nuke module</A
>,
    <A
HREF="cookies.html#AEN16281"
>Changing the duration of the user cookie</A
>,
    <A
HREF="caching-php-nuke.html#AEN16462"
>Caching PHP-Nuke</A
>,
    <A
HREF="search-engines-and-get-method.html#AEN17173"
>Search engines and the GET method</A
>,
    <A
HREF="change-home-module.html#AEN18952"
>How to change the Home module</A
>,
    <A
HREF="change-home-module.html#AEN18954"
>How to change the Home module</A
>,
    <A
HREF="change-home-module.html#AEN19001"
>How to change the Home module</A
>,
    <A
HREF="make-encyclopedia-international.html#AEN19535"
>How to make the Encyclopedia international</A
>,
    <A
HREF="make-encyclopedia-international.html#AEN19544"
>How to make the Encyclopedia international</A
>
  </DT
><DT
>indexed,
    <A
HREF="search-engines-and-get-method.html#AEN17194"
>Search engines and the GET method</A
>,
    <A
HREF="search-engines-and-get-method.html#AEN17198"
>Search engines and the GET method</A
>
  </DT
><DT
>indynews,
    <A
HREF="permissions2.html#AEN16141"
>Permissions on folders and files</A
>
  </DT
><DT
>info,
    <A
HREF="easyphp.html#AEN3211"
>How to check a successful installation</A
>,
    <A
HREF="mandrake-linux-apache-php-mysql.html#AEN3369"
>Apache, PHP and MySQL on Mandrake Linux</A
>,
    <A
HREF="test-scripts.html#AEN3824"
>test.php</A
>,
    <A
HREF="test-scripts.html#AEN3827"
>test.php</A
>,
    <A
HREF="administrator-password-lost.html#AEN4501"
>You lost the administrator password, or deleted the admin account</A
>,
    <A
HREF="preinstalled-modules.html#AEN5687"
>The preinstalled modules</A
>,
    <A
HREF="administration-functions.html#AEN6397"
>The administration functions</A
>,
    <A
HREF="php-nuke-moon-sun-block.html#AEN7603"
>Moon &#38; Sun block</A
>,
    <A
HREF="php-nuke-module-texts.html#AEN9756"
>PHP-Nuke module texts</A
>
  </DT
><DT
>information,
    <A
HREF="whatis-phpnuke.html#AEN1755"
>What Is PHP-Nuke</A
>,
    <A
HREF="whyphpnuke.html#AEN2024"
>Why use PHP-Nuke and not static HTML pages</A
>,
    <A
HREF="preinstalled-modules.html#AEN5381"
>The preinstalled modules</A
>,
    <A
HREF="php-nuke-moon-sun-block.html#AEN7608"
>Moon &#38; Sun block</A
>,
    <A
HREF="php-nuke-protector-module.html#AEN8439"
>Protector module</A
>,
    <A
HREF="user-extra-information.html#AEN9649"
>More than 255 characters of user extra information</A
>,
    <A
HREF="user-extra-information.html#AEN9655"
>More than 255 characters of user extra information</A
>,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12399"
>How to redirect Your Info to the Forums user profile</A
>,
    <A
HREF="cross-site-scripting-with-php-nuke.html#AEN15513"
>Cross-site scripting with PHP-Nuke</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15598"
>SQL injection with PHP-Nuke</A
>,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15714"
>Cross-site tracing with PHP-Nuke</A
>,
    <A
HREF="search-engines-and-dynamic-urls.html#AEN17100"
>Search engines and dynamic URLs</A
>,
    <A
HREF="search-engines-and-get-method.html#AEN17178"
>Search engines and the GET method</A
>,
    <A
HREF="allow-anonymous-web-link-submissions.html#AEN18809"
>How to allow anonymous web link submissions</A
>,
    <A
HREF="allow-anonymous-web-link-submissions.html#AEN18820"
>How to allow anonymous web link submissions</A
>,
    <A
HREF="css-syntax.html#AEN20763"
>The syntax of CSS</A
>
  </DT
><DT
>initialization,
    <A
HREF="security-measures.html#AEN15980"
>Security measures </A
>
  </DT
><DT
>inject,
    <A
HREF="cross-site-scripting-with-php-nuke.html#AEN15493"
>Cross-site scripting with PHP-Nuke</A
>
  </DT
><DT
>INSERT,
    <A
HREF="php-nuke-upgrade-scripts.html#AEN4975"
>PHP-Nuke upgrade scripts</A
>,
    <A
HREF="preferences.html#AEN7330"
>The Preferences Page </A
>,
    <A
HREF="preferences.html#AEN7334"
>The Preferences Page </A
>,
    <A
HREF="preferences.html#AEN7338"
>The Preferences Page </A
>,
    <A
HREF="module-public.html#AEN14339"
>Module creation, the public part</A
>,
    <A
HREF="include-plain-text-file-in-module.html#AEN14869"
>How to include a plain text file in a PHP-Nuke module</A
>
  </DT
><DT
>insertion,
    <A
HREF="enter-thousands-of-ephemerids.html#AEN19431"
>How to enter thousands of ephemerids</A
>
  </DT
><DT
>installation,
    <A
HREF="install-db.html#AEN3049"
>How to install the DB of PHP-Nuke with PHPMyadmin</A
>,
    <A
HREF="install-php-nuke-nukesql.html#AEN3059"
>How to install PHP-Nuke using nukesql.php</A
>,
    <A
HREF="easyphp.html#AEN3142"
>easyPHP</A
>,
    <A
HREF="mandrake-linux-apache-php-mysql.html#AEN3359"
>Apache, PHP and MySQL on Mandrake Linux</A
>,
    <A
HREF="more-than-one-php-nuke-sites.html#AEN3713"
>Different PHP-Nuke sites from the same database</A
>,
    <A
HREF="failed-opening-sql-layer-php.html#AEN4014"
>Fatal error: Failed opening required 'includes/sql_layer.php' </A
>,
    <A
HREF="php-nuke-event-calendar-module.html#AEN7974"
>Event calendar</A
>,
    <A
HREF="more-than-127-faq-answers.html#AEN12106"
>How to add more than 127 FAQ answers</A
>,
    <A
HREF="path-disclosure-with-php-nuke.html#AEN15657"
>Path disclosure with PHP-Nuke</A
>,
    <A
HREF="path-disclosure-with-php-nuke.html#AEN15664"
>Path disclosure with PHP-Nuke</A
>,
    <A
HREF="security-measures.html#AEN15930"
>Security measures </A
>,
    <A
HREF="jpcache.html#AEN16535"
>jpcache</A
>,
    <A
HREF="cache-lite.html#AEN16652"
>Installation of Cache-Lite</A
>,
    <A
HREF="cache-lite.html#AEN16805"
>How to use Cache-Lite</A
>,
    <A
HREF="turck-mmcache.html#AEN16921"
>Configuration of Turck MMCache</A
>,
    <A
HREF="install-patches-correct-errors.html#AEN18716"
>How to install patches and correct errors</A
>,
    <A
HREF="disable-debug-mode.html#AEN18865"
>How to disable DEBUG mode</A
>,
    <A
HREF="check-validity-of-web-links.html#AEN19381"
>How to check the validity of thousands of web links</A
>,
    <A
HREF="foxserv.html#AEN21183"
>Foxserv, making PHP-Nuke work on Windows Systems</A
>
  </DT
><DT
>insurance,
    <A
HREF="more-than-one-php-nuke-sites.html#AEN3720"
>Different PHP-Nuke sites with the same user base</A
>
  </DT
><DT
>integer,
    <A
HREF="more-than-127-faq-answers.html#AEN12114"
>How to add more than 127 FAQ answers</A
>,
    <A
HREF="adjust-server-time.html#AEN19899"
>How to adjust server time</A
>
  </DT
><DT
>integrity,
    <A
HREF="security-fixes.html#AEN15823"
>Security fixes</A
>
  </DT
><DT
>interface,
    <A
HREF="php-nuke-vs-xoops.html#AEN2192"
>PHP-Nuke vs. XOOPS</A
>,
    <A
HREF="install-phpmyadmin.html#AEN2708"
>How to install phpMyAdmin</A
>,
    <A
HREF="upgrade-php-nuke.html#AEN4865"
>How to upgrade PHP-Nuke</A
>,
    <A
HREF="preinstalled-blocks.html#AEN5945"
>The preinstalled blocks</A
>,
    <A
HREF="backend.html#AEN6146"
>Back end structure: administrator view</A
>,
    <A
HREF="backend.html#AEN6148"
>Back end structure: administrator view</A
>,
    <A
HREF="backend.html#AEN6151"
>Back end structure: administrator view</A
>,
    <A
HREF="php-nuke-event-calendar-module.html#AEN7959"
>Event calendar</A
>,
    <A
HREF="architecture.html#AEN9110"
>Architecture and structure </A
>,
    <A
HREF="module-rules.html#AEN14269"
>Creating fully compatible modules: the rules to follow</A
>,
    <A
HREF="module-public.html#AEN14326"
>Module creation, the public part</A
>,
    <A
HREF="install-modules-with-database-files-change.html#AEN18696"
>How to install modules that change the database structure and the files</A
>,
    <A
HREF="mysql-frontend.html#AEN21103"
>MySQL Front, how to administer a MySQL DB from Windows </A
>
  </DT
><DT
>Internet,
    <A
HREF="changing-web-hoster.html#AEN5087"
>Changing Web hoster</A
>,
    <A
HREF="display-images-php-nuke-blocks.html#AEN13881"
>How to display images in PHP-Nuke blocks</A
>
  </DT
><DT
>interpretation,
    <A
HREF="adjust-server-time.html#AEN19984"
>How to adjust server time</A
>
  </DT
><DT
>interpreter,
    <A
HREF="googletap.html#AEN18103"
>How it works</A
>
  </DT
><DT
>IP,
    <A
HREF="changing-web-hoster.html#AEN5178"
>Changing Web hoster</A
>,
    <A
HREF="php-nuke-protector-module.html#AEN8405"
>Protector module</A
>,
    <A
HREF="php-nuke-protector-module.html#AEN8421"
>Protector module</A
>,
    <A
HREF="php-nuke-protector-module.html#AEN8435"
>Protector module</A
>,
    <A
HREF="php-nuke-protector-module.html#AEN8443"
>Protector module</A
>,
    <A
HREF="php-nuke-protector-module.html#AEN8447"
>Protector module</A
>,
    <A
HREF="php-nuke-protector-module.html#AEN8453"
>Protector module</A
>,
    <A
HREF="php-nuke-protector-module.html#AEN8496"
>Protector module</A
>,
    <A
HREF="how-sessions-work.html#AEN9445"
>How sessions work in the forums</A
>,
    <A
HREF="how-sessions-work.html#AEN9454"
>How sessions work in the forums</A
>,
    <A
HREF="how-sessions-work.html#AEN9458"
>How sessions work in the forums</A
>,
    <A
HREF="how-sessions-work.html#AEN9464"
>How sessions work in the forums</A
>,
    <A
HREF="how-sessions-work.html#AEN9477"
>How sessions work in the forums</A
>,
    <A
HREF="how-sessions-work.html#AEN9530"
>How sessions work in the forums</A
>,
    <A
HREF="ban-ip-addresses.html#AEN16313"
>How to ban IP addresses</A
>
  </DT
><DT
>IPs,
    <A
HREF="how-sessions-work.html#AEN9472"
>How sessions work in the forums</A
>,
    <A
HREF="how-sessions-work.html#AEN9539"
>How sessions work in the forums</A
>
  </DT
><DT
>ISP,
    <A
HREF="install-php-nuke-locally.html#AEN3103"
>How to install PHP-Nuke locally</A
>
  </DT
><DT
>ISPs,
    <A
HREF="turck-mmcache.html#AEN16865"
>Turck MMCache</A
>,
    <A
HREF="restore-large-backup.html#AEN18561"
>How to restore a large backup</A
>
  </DT
><DT
>Italian,
    <A
HREF="module-rules.html#AEN14253"
>Creating fully compatible modules: the rules to follow</A
>
  </DT
><DT
>italicizing,
    <A
HREF="html-format-text.html#AEN20603"
>How to format text in HTML</A
>
  </DT
><DT
>item_name,
    <A
HREF="paypal-block-for-php-nuke.html#AEN14024"
>How to display HTML forms in a block: Paypal</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN24350"
>J</A
></H2
><DL
><DT
>Japanese,
    <A
HREF="php-nuke-vs-xoops.html#AEN2224"
>PHP-Nuke vs. XOOPS</A
>
  </DT
><DT
>Java,
    <A
HREF="whatis-phpnuke.html#AEN1802"
>What Is PHP-Nuke</A
>,
    <A
HREF="communities.html#AEN2002"
>The PHP-Nuke Communities</A
>
  </DT
><DT
>Javascript,
    <A
HREF="whatis-phpnuke.html#AEN1800"
>What Is PHP-Nuke</A
>,
    <A
HREF="php-nuke-treemenu-with-javascript.html#AEN7782"
>Treemenu with Javascript</A
>,
    <A
HREF="php-nuke-tools-module.html#AEN8700"
>PHP-Nuke-Tools module </A
>,
    <A
HREF="directory-structure.html#AEN9236"
>Directory structure </A
>,
    <A
HREF="php-nuke-header-change-logo-dynamic.html#AEN10234"
>How to change the logo's dimensions dynamically</A
>,
    <A
HREF="php-nuke-header-change-logo-dynamic.html#AEN10253"
>How to change the logo's dimensions dynamically</A
>,
    <A
HREF="php-nuke-header-watermark-background-image.html#AEN10292"
>How to display a watermark background image</A
>,
    <A
HREF="php-nuke-header-watermark-background-image.html#AEN10295"
>How to display a watermark background image</A
>,
    <A
HREF="javascript-in-php-nuke-blocks.html#AEN13375"
>How to use Javascript in PHP-Nuke blocks</A
>,
    <A
HREF="create-hello-world-block.html#AEN13455"
>How to create a Hello World block</A
>,
    <A
HREF="create-hello-world-block.html#AEN13458"
>How to create a Hello World block</A
>,
    <A
HREF="create-hello-world-block.html#AEN13478"
>How to create a Hello World block</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13799"
>How to create a Help Center Live block</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13804"
>How to create a Help Center Live block</A
>,
    <A
HREF="javascript-in-php-nuke-modules.html#AEN14884"
>How to use Javascript in PHP-Nuke modules</A
>,
    <A
HREF="javascript-php.html#AEN14893"
>Javascript functions in javascript.php</A
>,
    <A
HREF="javascript-php.html#AEN14927"
>Javascript functions in javascript.php</A
>,
    <A
HREF="google-adsense-in-news-module.html#AEN15034"
>Google AdSense in the News module</A
>,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15739"
>Cross-site tracing with PHP-Nuke</A
>
  </DT
><DT
>Journal,
    <A
HREF="preinstalled-modules.html#AEN5707"
>The preinstalled modules</A
>
  </DT
><DT
>jpcache,
    <A
HREF="jpcache.html#AEN16548"
>Installation of jpcache</A
>,
    <A
HREF="jpcache.html#AEN16557"
>Configuration of jpcache</A
>,
    <A
HREF="jpcache.html#AEN16571"
>Configuration of jpcache</A
>,
    <A
HREF="caching-php-nuke-conclusion.html#AEN17039"
>Caching PHP-Nuke: Conclusion</A
>
  </DT
><DT
>jpcache-config.php,
    <A
HREF="jpcache.html#AEN16613"
>How to use jpcache</A
>
  </DT
><DT
>JpGraph,
    <A
HREF="xampp.html#AEN3249"
>XAMPP</A
>
  </DT
><DT
>JSP,
    <A
HREF="php-nuke-tools-module.html#AEN8692"
>PHP-Nuke-Tools module </A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN24398"
>K</A
></H2
><DL
><DT
>key,
    <A
HREF="permissions.html#AEN2586"
>File permissions</A
>,
    <A
HREF="module-rules.html#AEN14267"
>Creating fully compatible modules: the rules to follow</A
>,
    <A
HREF="security-measures.html#AEN15928"
>Security measures </A
>,
    <A
HREF="security-measures.html#AEN15942"
>Security measures </A
>,
    <A
HREF="security-measures.html#AEN15950"
>Security measures </A
>,
    <A
HREF="turck-mmcache.html#AEN16983"
>How to use Turck MMCache</A
>,
    <A
HREF="turck-mmcache.html#AEN16987"
>How to use Turck MMCache</A
>,
    <A
HREF="turck-mmcache.html#AEN16992"
>How to use Turck MMCache</A
>,
    <A
HREF="turck-mmcache.html#AEN16996"
>How to use Turck MMCache</A
>
  </DT
><DT
>knowledge,
    <A
HREF="change-background-colour.html#AEN10572"
>How to change background colour</A
>,
    <A
HREF="path-disclosure-with-php-nuke.html#AEN15655"
>Path disclosure with PHP-Nuke</A
>
  </DT
><DT
>Konqueror,
    <A
HREF="favourites-icon-favicon-ico.html#AEN11154"
>How to implement a favourites icon (favicon.ico)</A
>
  </DT
><DT
>korean,
    <A
HREF="credits-versions-1.x.html#AEN545"
>Versions 1.x</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN24421"
>L</A
></H2
><DL
><DT
>lang-.php,
    <A
HREF="failed-opening-lang-php.html#AEN3994"
>Error: Failed opening 'language/lang-.php' for inclusion</A
>
  </DT
><DT
>lang-english.php,
    <A
HREF="cannot-create-administrator-account.html#AEN4418"
>You cannot create the administrator account</A
>,
    <A
HREF="directory-structure.html#AEN9282"
>Directory structure </A
>,
    <A
HREF="general-php-nuke-texts.html#AEN9703"
>General PHP-Nuke texts</A
>,
    <A
HREF="adjust-server-time.html#AEN19879"
>How to adjust server time</A
>
  </DT
><DT
>lang-languagename.php,
    <A
HREF="general-php-nuke-texts.html#AEN9701"
>General PHP-Nuke texts</A
>
  </DT
><DT
>lang-xxx.php,
    <A
HREF="php-nuke-module-texts.html#AEN9750"
>PHP-Nuke module texts</A
>,
    <A
HREF="php-nuke-module-texts.html#AEN9759"
>PHP-Nuke module texts</A
>
  </DT
><DT
>Language,
    <A
HREF="administration-functions.html#AEN6214"
>The administration functions</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15563"
>SQL injection with PHP-Nuke</A
>
  </DT
><DT
>latin1,
    <A
HREF="make-encyclopedia-international.html#AEN19499"
>How to make the Encyclopedia international</A
>
  </DT
><DT
>layer,
    <A
HREF="warning-mysql_fetch_row-supplied-argument.html#AEN3934"
>Warning: mysql_fetch_row(): supplied argument is not a valid MySQL result resource</A
>,
    <A
HREF="warning-mysql_fetch_row-supplied-argument.html#AEN3937"
>Warning: mysql_fetch_row(): supplied argument is not a valid MySQL result resource</A
>,
    <A
HREF="warning-mysql_fetch_row-supplied-argument.html#AEN3939"
>Warning: mysql_fetch_row(): supplied argument is not a valid MySQL result resource</A
>,
    <A
HREF="failed-opening-sql-layer-php.html#AEN4008"
>Fatal error: Failed opening required 'includes/sql_layer.php' </A
>,
    <A
HREF="directory-structure.html#AEN9249"
>Directory structure </A
>,
    <A
HREF="directory-structure.html#AEN9264"
>Directory structure </A
>,
    <A
HREF="directory-structure.html#AEN9267"
>Directory structure </A
>,
    <A
HREF="sql-syntax.html#AEN21012"
>The syntax of SQL code</A
>,
    <A
HREF="sql-syntax.html#AEN21093"
>The syntax of SQL code</A
>
  </DT
><DT
>layer,,
    <A
HREF="directory-structure.html#AEN9261"
>Directory structure </A
>
  </DT
><DT
>layout,
    <A
HREF="php-nuke-random-quotes-block.html#AEN7875"
>Random Quotes block</A
>,
    <A
HREF="php-nuke-upload-module.html#AEN8800"
>Upload module</A
>,
    <A
HREF="topic-structure.html#AEN9855"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="topic-structure.html#AEN9969"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="hide-right-blocks.html#AEN11997"
>How to hide the right blocks</A
>,
    <A
HREF="change-maximum-username-length.html#AEN12650"
>How to change the maximum allowed length for user names</A
>
  </DT
><DT
>LC_TIME,
    <A
HREF="warning-setlocale.html#AEN4123"
>Warning: setlocale(): Passing locale category name as string is deprecated</A
>
  </DT
><DT
>League,
    <A
HREF="preinstalled-modules.html#AEN5288"
>The preinstalled modules</A
>
  </DT
><DT
>leaves,
    <A
HREF="php-nuke-treemenu-with-php.html#AEN7732"
>Treemenu with PHP</A
>,
    <A
HREF="php-nuke-treemenu-with-php.html#AEN7742"
>Treemenu with PHP</A
>,
    <A
HREF="php-nuke-treemenu-with-php.html#AEN7750"
>Treemenu with PHP</A
>,
    <A
HREF="php-nuke-treemenu-with-javascript.html#AEN7786"
>Treemenu with Javascript</A
>,
    <A
HREF="treemenu-block.html#AEN11823"
>The general idea </A
>
  </DT
><DT
>legitimate,
    <A
HREF="cross-site-scripting-with-php-nuke.html#AEN15488"
>Cross-site scripting with PHP-Nuke</A
>
  </DT
><DT
>libraries,
    <A
HREF="test-scripts.html#AEN3830"
>test.php</A
>
  </DT
><DT
>library,
    <A
HREF="security-code.html#AEN4217"
>How to bypass the security code</A
>,
    <A
HREF="upload-add-on-for-phpbb.html#AEN8846"
>Upload add-on for phpBB</A
>
  </DT
><DT
>Licence,
    <A
HREF="php-nuke-workboard-module.html#AEN9042"
>WorkBoard Module</A
>,
    <A
HREF="turck-mmcache.html#AEN16845"
>Turck MMCache</A
>
  </DT
><DT
>lightweight,
    <A
HREF="jpcache.html#AEN16530"
>jpcache</A
>
  </DT
><DT
>Linux,
    <A
HREF="history.html#AEN1900"
>Short history of PHP-Nuke</A
>,
    <A
HREF="install-php-nuke-locally.html#AEN3110"
>How to install PHP-Nuke locally</A
>,
    <A
HREF="mandrake-linux-apache-php-mysql.html#AEN3322"
>Apache, PHP and MySQL on Mandrake Linux</A
>,
    <A
HREF="favourites-icon-favicon-ico.html#AEN11166"
>How to implement a favourites icon (favicon.ico)</A
>,
    <A
HREF="treemenu-block.html#AEN11821"
>The general idea </A
>,
    <A
HREF="turck-mmcache.html#AEN16874"
>Installation of Turck MMCache</A
>,
    <A
HREF="turck-mmcache.html#AEN16883"
>Installation of Turck MMCache</A
>,
    <A
HREF="adjust-server-time.html#AEN20005"
>How to adjust server time</A
>
  </DT
><DT
>Lite.php,
    <A
HREF="cache-lite.html#AEN16784"
>How to use Cache-Lite</A
>
  </DT
><DT
>load,
    <A
HREF="phpmyadmin-navigation-bar-sql.html#AEN2837"
>phpMyAdmin navigation bar: SQL</A
>,
    <A
HREF="admin-management.html#AEN9400"
>Administration management </A
>,
    <A
HREF="jpcache.html#AEN16532"
>jpcache</A
>,
    <A
HREF="mysql-frontend.html#AEN21108"
>MySQL Front, how to administer a MySQL DB from Windows </A
>
  </DT
><DT
>local time,
    <A
HREF="adjust-server-time.html#AEN19873"
>How to adjust server time</A
>
  </DT
><DT
>Locator,
    <A
HREF="html-create-link.html#AEN20635"
>How to create a link in HTML</A
>
  </DT
><DT
>lock,
    <A
HREF="preinstalled-blocks.html#AEN6027"
>The preinstalled blocks</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7044"
>phpBB Forum administration</A
>,
    <A
HREF="treemenu-block.html#AEN11842"
>What is Treemenu </A
>,
    <A
HREF="googletap.html#AEN17872"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17876"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17880"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17884"
>Installation</A
>
  </DT
><DT
>logged-in,
    <A
HREF="cache-lite.html#AEN16802"
>How to use Cache-Lite</A
>
  </DT
><DT
>login,
    <A
HREF="security-code.html#AEN4225"
>How to bypass the security code</A
>,
    <A
HREF="redirect-users-to-homepage.html#AEN12323"
>How to redirect users to the Homepage</A
>,
    <A
HREF="redirect-users-to-homepage.html#AEN12325"
>How to redirect users to the Homepage</A
>,
    <A
HREF="redirect-users-to-login-and-back.html#AEN12522"
>How to redirect users to Login and back</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13675"
>How to create a Help Center Live block</A
>
  </DT
><DT
>logo,
    <A
HREF="credits-versions-1.x.html#AEN522"
>Versions 1.x</A
>,
    <A
HREF="credits-versions-1.x.html#AEN563"
>Versions 1.x</A
>,
    <A
HREF="preferences.html#AEN7231"
>The Preferences Page </A
>,
    <A
HREF="php-nuke-header-insert-slashocean-search-box.html#AEN10157"
>How to insert a Search Box as in SlashOcean theme</A
>,
    <A
HREF="php-nuke-header-change-logo.html#AEN10204"
>How to change the logo in the PHP-Nuke header</A
>,
    <A
HREF="php-nuke-header-change-logo.html#AEN10206"
>How to change the logo in the PHP-Nuke header</A
>,
    <A
HREF="php-nuke-header-change-logo.html#AEN10226"
>How to change the logo in the PHP-Nuke header</A
>,
    <A
HREF="php-nuke-header-change-logo-dynamic.html#AEN10245"
>How to change the logo's dimensions dynamically</A
>
  </DT
><DT
>logo.gif,
    <A
HREF="php-nuke-header-change-logo.html#AEN10208"
>How to change the logo in the PHP-Nuke header</A
>,
    <A
HREF="php-nuke-header-change-logo.html#AEN10210"
>How to change the logo in the PHP-Nuke header</A
>
  </DT
><DT
>Logout,
    <A
HREF="create-logout-module.html#AEN14981"
>How to create a Logout module</A
>,
    <A
HREF="create-logout-module.html#AEN14983"
>How to create a Logout module</A
>,
    <A
HREF="create-logout-module.html#AEN14990"
>How to create a Logout module</A
>,
    <A
HREF="create-logout-module.html#AEN14995"
>How to create a Logout module</A
>
  </DT
><DT
>lookups,
    <A
HREF="mod_rewrite-ruleset-processing.html#AEN17337"
>Ruleset processing</A
>
  </DT
><DT
>LyX,
    <A
HREF="credits-version-1.0.html#AEN500"
>Version 1.0</A
>,
    <A
HREF="credits-version-1.0.html#AEN502"
>Version 1.0</A
>,
    <A
HREF="credits-version-2.0.html#AEN1221"
>Version 2.0</A
>,
    <A
HREF="book-behind-book-line-of-attack.html#AEN1668"
>Line of attack </A
>,
    <A
HREF="translate-php-nuke-howto.html#AEN1716"
>How to translate this HOWTO</A
>
  </DT
><DT
>l_config.php,
    <A
HREF="change-number-of-web-links-per-page.html#AEN12238"
>How to change the number of Web Links per page</A
>,
    <A
HREF="allow-anonymous-web-link-submissions.html#AEN18838"
>How to allow anonymous web link submissions</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN24576"
>M</A
></H2
><DL
><DT
>MacOS,
    <A
HREF="prerequisites.html#AEN2321"
>Prerequisites</A
>
  </DT
><DT
>magic_quotes,
    <A
HREF="security-measures.html#AEN15968"
>Security measures </A
>
  </DT
><DT
>mainfile.php,
    <A
HREF="sorry-such-file-doesnt-exist.html#AEN4042"
>Sorry, such file doesn't exist...</A
>,
    <A
HREF="sorry-such-file-doesnt-exist.html#AEN4062"
>Sorry, such file doesn't exist...</A
>,
    <A
HREF="garbage-on-page.html#AEN4547"
>You get garbage in some parts of the page</A
>,
    <A
HREF="module-management.html#AEN9358"
>Module management</A
>,
    <A
HREF="change-php-nuke-theme-depending-on-module.html#AEN10936"
>How to change the PHP-Nuke theme depending on the module</A
>,
    <A
HREF="change-order-of-messages.html#AEN11611"
>How to change the order of messages</A
>,
    <A
HREF="change-duration-of-public-broadcast-message.html#AEN11623"
>How to change the duration of a public broadcast message</A
>,
    <A
HREF="scrolling-headlines-in-blocks.html#AEN11904"
>How to get scrolling headlines in blocks</A
>,
    <A
HREF="redirect-users-to-login-page.html#AEN12055"
>How to redirect users to the Login page</A
>,
    <A
HREF="bypass-article-approval.html#AEN12797"
>The formatAidHeader() function</A
>,
    <A
HREF="module-structure.html#AEN14190"
>Module structure </A
>,
    <A
HREF="jpcache.html#AEN16585"
>How to use jpcache</A
>,
    <A
HREF="jpcache.html#AEN16589"
>How to use jpcache</A
>,
    <A
HREF="cache-lite.html#AEN16722"
>How to use Cache-Lite</A
>,
    <A
HREF="search-engines-and-dynamic-urls.html#AEN17113"
>Search engines and dynamic URLs</A
>,
    <A
HREF="adjust-server-time.html#AEN19845"
>How to adjust server time</A
>,
    <A
HREF="discordian-calendar.html#AEN20051"
>The Discordian Calendar</A
>,
    <A
HREF="deal-with-quotes-in-sitename.html#AEN20081"
>How to deal with quotes in the site's name</A
>
  </DT
><DT
>maintenance,
    <A
HREF="php-nuke-protector-module.html#AEN8502"
>Protector module</A
>
  </DT
><DT
>malicious,
    <A
HREF="cross-site-scripting-with-php-nuke.html#AEN15490"
>Cross-site scripting with PHP-Nuke</A
>
  </DT
><DT
>management,
    <A
HREF="aknowledgements.html#AEN1495"
>Aknowledgements</A
>,
    <A
HREF="php-nuke-vs-xoops.html#AEN2190"
>PHP-Nuke vs. XOOPS</A
>,
    <A
HREF="preinstalled-modules.html#AEN5844"
>The preinstalled modules</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7056"
>phpBB Forum administration</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7137"
>phpBB Forum administration</A
>,
    <A
HREF="architecture.html#AEN9113"
>Architecture and structure </A
>,
    <A
HREF="topic-structure.html#AEN9908"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="example-creation-html-template.html#AEN10060"
>Example creation of HTML file to include in the theme</A
>
  </DT
><DT
>manager,
    <A
HREF="whatis-phpnuke.html#AEN1840"
>What Is PHP-Nuke</A
>,
    <A
HREF="whatis-phpnuke.html#AEN1844"
>What Is PHP-Nuke</A
>,
    <A
HREF="php-nuke-treemenu-with-php.html#AEN7752"
>Treemenu with PHP</A
>
  </DT
><DT
>manipulations,
    <A
HREF="mod_rewrite-api-phases.html#AEN17301"
>API phases</A
>
  </DT
><DT
>margin-top,
    <A
HREF="css-syntax.html#AEN20795"
>The syntax of CSS</A
>
  </DT
><DT
>marketese,
    <A
HREF="php-nuke-random-quotes-block.html#AEN7891"
>Random Quotes block</A
>
  </DT
><DT
>Matarrazzo,
    <A
HREF="aknowledgements.html#AEN1367"
>Aknowledgements</A
>
  </DT
><DT
>match,
    <A
HREF="php-nuke-protector-module.html#AEN8445"
>Protector module</A
>,
    <A
HREF="mod_rewrite-ruleset-processing.html#AEN17339"
>Ruleset processing</A
>,
    <A
HREF="mod_rewrite-ruleset-processing.html#AEN17341"
>Ruleset processing</A
>,
    <A
HREF="regular-expressions.html#AEN17485"
>Regular expressions</A
>,
    <A
HREF="regular-expressions.html#AEN17502"
>Regular expressions</A
>,
    <A
HREF="regular-expressions.html#AEN17510"
>Regular expressions</A
>
  </DT
><DT
>matching,
    <A
HREF="preferences.html#AEN7458"
>The Preferences Page </A
>
  </DT
><DT
>maxlength,
    <A
HREF="urls-longer-than-100-characters.html#AEN12904"
>How to add URLs longer than 100 characters in Downloads and Web Links</A
>,
    <A
HREF="urls-longer-than-100-characters.html#AEN12907"
>How to add URLs longer than 100 characters in Downloads and Web Links</A
>
  </DT
><DT
>mcrypt,
    <A
HREF="xampp.html#AEN3240"
>XAMPP</A
>
  </DT
><DT
>MD5,
    <A
HREF="phpmyadmin-navigation-bar-structure.html#AEN2813"
>phpMyAdmin navigation bar: Structure</A
>,
    <A
HREF="administrator-password-lost.html#AEN4498"
>You lost the administrator password, or deleted the admin account</A
>
  </DT
><DT
>members,
    <A
HREF="aknowledgements.html#AEN1479"
>Aknowledgements</A
>,
    <A
HREF="php-nuke-approve-membership-module.html#AEN8167"
>Approve Membership module</A
>,
    <A
HREF="php-nuke-workboard-module.html#AEN9072"
>WorkBoard Module</A
>
  </DT
><DT
>memory,
    <A
HREF="caching-php-nuke.html#AEN16492"
>Caching PHP-Nuke</A
>
  </DT
><DT
>menu,
    <A
HREF="frontend.html#AEN5219"
>Front end structure: user view</A
>,
    <A
HREF="administration-functions.html#AEN6943"
>The administration functions</A
>,
    <A
HREF="preferences.html#AEN7427"
>The Preferences Page </A
>,
    <A
HREF="php-nuke-treemenu-with-php.html#AEN7734"
>Treemenu with PHP</A
>,
    <A
HREF="php-nuke-treemenu-with-php.html#AEN7759"
>Treemenu with PHP</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11109"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="treemenu-block.html#AEN11783"
>The general idea </A
>,
    <A
HREF="treemenu-block.html#AEN11850"
>What is Treemenu </A
>,
    <A
HREF="treemenu-block.html#AEN11858"
>What is Treemenu </A
>,
    <A
HREF="block-creation.html#AEN13181"
>How to create a new block</A
>
  </DT
><DT
>Messages,
    <A
HREF="administration-functions.html#AEN6739"
>The administration functions</A
>,
    <A
HREF="php-nuke-treemenu-with-javascript.html#AEN7841"
>Treemenu with Javascript</A
>
  </DT
><DT
>metacharacters,
    <A
HREF="regular-expressions.html#AEN17416"
>Regular expressions</A
>
  </DT
><DT
>metatags,
    <A
HREF="architecture.html#AEN9139"
>Architecture and structure </A
>
  </DT
><DT
>Micione,
    <A
HREF="whyphpnuke.html#AEN2036"
>Why use PHP-Nuke and not static HTML pages</A
>
  </DT
><DT
>Microsoft,
    <A
HREF="cookies.html#AEN16232"
>Cookie hijack</A
>
  </DT
><DT
>mid,
    <A
HREF="change-order-of-messages.html#AEN11596"
>How to change the order of messages</A
>,
    <A
HREF="change-buggy-module.html#AEN12028"
>How to change a buggy module</A
>
  </DT
><DT
>millimeters,
    <A
HREF="change-font-size-php-nuke.html#AEN11014"
>How to change the font size in PHP-Nuke</A
>
  </DT
><DT
>Minnie,
    <A
HREF="install-phpmyadmin.html#AEN2699"
>How to install phpMyAdmin</A
>,
    <A
HREF="module-public.html#AEN14300"
>Module creation, the public part</A
>
  </DT
><DT
>MMCache,
    <A
HREF="caching-php-nuke.html#AEN16498"
>Caching PHP-Nuke</A
>,
    <A
HREF="turck-mmcache.html#AEN16863"
>Turck MMCache</A
>,
    <A
HREF="turck-mmcache.html#AEN16872"
>Installation of Turck MMCache</A
>,
    <A
HREF="turck-mmcache.html#AEN16956"
>How to use Turck MMCache</A
>,
    <A
HREF="caching-php-nuke-conclusion.html#AEN17048"
>Caching PHP-Nuke: Conclusion</A
>,
    <A
HREF="caching-php-nuke-conclusion.html#AEN17052"
>Caching PHP-Nuke: Conclusion</A
>
  </DT
><DT
>model,
    <A
HREF="css-syntax.html#AEN20806"
>The syntax of CSS</A
>
  </DT
><DT
>moderation,
    <A
HREF="preferences.html#AEN7395"
>The Preferences Page </A
>,
    <A
HREF="preferences.html#AEN7403"
>The Preferences Page </A
>
  </DT
><DT
>modifications,
    <A
HREF="hacked-now-what.html#AEN16382"
>Hacked - now what?</A
>,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18437"
>How to restore PHP-Nuke from backup</A
>,
    <A
HREF="sql-syntax.html#AEN21041"
>The syntax of SQL code</A
>
  </DT
><DT
>module,
    <A
HREF="prerequisites.html#AEN2309"
>Prerequisites</A
>,
    <A
HREF="permissions.html#AEN2617"
>File permissions</A
>,
    <A
HREF="sorry-such-file-doesnt-exist.html#AEN4060"
>Sorry, such file doesn't exist...</A
>,
    <A
HREF="sorry-such-file-doesnt-exist.html#AEN4070"
>Sorry, such file doesn't exist...</A
>,
    <A
HREF="security-code.html#AEN4184"
>Security code is not showing up</A
>,
    <A
HREF="modules-disappear.html#AEN4720"
>Modules do not show up and/or disappear</A
>,
    <A
HREF="preinstalled-modules.html#AEN5320"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5332"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5367"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5661"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5677"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5729"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5758"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5760"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5791"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5807"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5868"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-blocks.html#AEN6001"
>The preinstalled blocks</A
>,
    <A
HREF="preinstalled-blocks.html#AEN6059"
>The preinstalled blocks</A
>,
    <A
HREF="preinstalled-blocks.html#AEN6116"
>The preinstalled blocks</A
>,
    <A
HREF="administration-functions.html#AEN6184"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6543"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6612"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6615"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6665"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6979"
>The administration functions</A
>,
    <A
HREF="preferences.html#AEN7243"
>The Preferences Page </A
>,
    <A
HREF="preferences.html#AEN7249"
>The Preferences Page </A
>,
    <A
HREF="preferences.html#AEN7253"
>The Preferences Page </A
>,
    <A
HREF="php-nuke-gallery-module.html#AEN8283"
>Gallery module</A
>,
    <A
HREF="php-nuke-ip-tracking-module.html#AEN8316"
>IP Tracking module</A
>,
    <A
HREF="php-nuke-ip-tracking-module.html#AEN8319"
>IP Tracking module</A
>,
    <A
HREF="php-nuke-webcam-module.html#AEN8525"
>WebCam module</A
>,
    <A
HREF="php-nuke-my-headlines-module.html#AEN8621"
>My Headlines module</A
>,
    <A
HREF="php-nuke-odp-module.html#AEN8945"
>ODP module</A
>,
    <A
HREF="architecture.html#AEN9094"
>Architecture and structure </A
>,
    <A
HREF="architecture.html#AEN9120"
>Architecture and structure </A
>,
    <A
HREF="directory-structure.html#AEN9280"
>Directory structure </A
>,
    <A
HREF="directory-structure.html#AEN9294"
>Directory structure </A
>,
    <A
HREF="admin-management.html#AEN9386"
>Administration management </A
>,
    <A
HREF="admin-management.html#AEN9391"
>Administration management </A
>,
    <A
HREF="php-nuke-module-texts.html#AEN9752"
>PHP-Nuke module texts</A
>,
    <A
HREF="hide-left-blocks.html#AEN10495"
>How to hide the left blocks</A
>,
    <A
HREF="multipage-news-articles.html#AEN10521"
>How to get multipage News articles</A
>,
    <A
HREF="change-background-colour.html#AEN10583"
>How to change background colour</A
>,
    <A
HREF="prevent-statistics-module-gathering-hits.html#AEN11192"
>How to prevent the statistics module from gathering hits from certain hosts</A
>,
    <A
HREF="allow-special-html-tags.html#AEN11254"
>How to allow special HTML tags</A
>,
    <A
HREF="allow-special-html-tags.html#AEN11258"
>How to allow special HTML tags</A
>,
    <A
HREF="allow-special-html-tags.html#AEN11262"
>How to allow special HTML tags</A
>,
    <A
HREF="allow-special-html-tags.html#AEN11270"
>How to allow special HTML tags</A
>,
    <A
HREF="allow-special-html-tags.html#AEN11274"
>How to allow special HTML tags</A
>,
    <A
HREF="allow-special-html-tags.html#AEN11388"
>How to allow special HTML tags</A
>,
    <A
HREF="hide-right-blocks.html#AEN11999"
>How to hide the right blocks</A
>,
    <A
HREF="modifying-php-nuke-homepage.html#AEN12038"
>Modifying the PHP-Nuke Homepage</A
>,
    <A
HREF="restrict-homepage-to-registered-users.html#AEN12071"
>How to restrict the Homepage only to registered users</A
>,
    <A
HREF="modifying-php-nuke-module-faq.html#AEN12095"
>Modifying the PHP-Nuke FAQ module</A
>,
    <A
HREF="modifying-php-nuke-module-reviews.html#AEN12145"
>Modifying the PHP-Nuke Reviews module</A
>,
    <A
HREF="choose-images-from-dropdown-list.html#AEN12182"
>How to choose images from a dropdown list</A
>,
    <A
HREF="modifying-php-nuke-module-web-links.html#AEN12208"
>Modifying the PHP-Nuke Web_Links module</A
>,
    <A
HREF="modifying-php-nuke-moduke-your-account.html#AEN12290"
>Modifying the PHP-Nuke Your_Account module</A
>,
    <A
HREF="redirect-users-to-login-and-back.html#AEN12496"
>How to redirect users to Login and back</A
>,
    <A
HREF="redirect-users-to-login-and-back.html#AEN12502"
>How to redirect users to Login and back</A
>,
    <A
HREF="redirect-users-to-login-and-back.html#AEN12507"
>How to redirect users to Login and back</A
>,
    <A
HREF="approve-users.html#AEN12621"
>How to approve users before registration</A
>,
    <A
HREF="modifying-php-nuke-news-module.html#AEN12672"
>Modifying the PHP-Nuke News module</A
>,
    <A
HREF="modifying-php-nuke-submit-news-module.html#AEN12728"
>Modifying the PHP-Nuke Submit News module</A
>,
    <A
HREF="modifying-php-nuke-sections-module.html#AEN12825"
>Modifying the PHP-Nuke Sections module</A
>,
    <A
HREF="order-articles-in-sections.html#AEN12836"
>How to order the articles in the Sections module</A
>,
    <A
HREF="modifying-php-nuke-downloads-module.html#AEN12864"
>Modifying the PHP-Nuke Downloads module</A
>,
    <A
HREF="urls-longer-than-100-characters.html#AEN12880"
>How to add URLs longer than 100 characters in Downloads and Web Links</A
>,
    <A
HREF="urls-longer-than-100-characters.html#AEN12888"
>How to add URLs longer than 100 characters in Downloads and Web Links</A
>,
    <A
HREF="urls-longer-than-100-characters.html#AEN12892"
>How to add URLs longer than 100 characters in Downloads and Web Links</A
>,
    <A
HREF="urls-longer-than-100-characters.html#AEN12912"
>How to add URLs longer than 100 characters in Downloads and Web Links</A
>,
    <A
HREF="urls-longer-than-100-characters.html#AEN12927"
>How to add URLs longer than 100 characters in Downloads and Web Links</A
>,
    <A
HREF="modifying-php-nuke-stories-archive.html#AEN12956"
>Modifying the PHP-Nuke Stories Archive module</A
>,
    <A
HREF="order-articles-in-stories-archive.html#AEN12965"
>How to order the articles in the Stories Archive module</A
>,
    <A
HREF="simple-content-block.html#AEN13263"
>Simple Content block</A
>,
    <A
HREF="javascript-in-php-nuke-blocks.html#AEN13386"
>How to use Javascript in PHP-Nuke blocks</A
>,
    <A
HREF="display-random-images-php-nuke-blocks.html#AEN13996"
>How to display random images in PHP-Nuke blocks</A
>,
    <A
HREF="creating-modules.html#AEN14127"
>Creating modules</A
>,
    <A
HREF="module-structure.html#AEN14162"
>Module structure </A
>,
    <A
HREF="module-rules.html#AEN14204"
>Creating fully compatible modules: the rules to follow</A
>,
    <A
HREF="module-rules.html#AEN14251"
>Creating fully compatible modules: the rules to follow</A
>,
    <A
HREF="module-public.html#AEN14328"
>Module creation, the public part</A
>,
    <A
HREF="module-public.html#AEN14336"
>Module creation, the public part</A
>,
    <A
HREF="module-admin.html#AEN14363"
>Module creation, administrator part</A
>,
    <A
HREF="module-admin.html#AEN14390"
>Module creation, administrator part</A
>,
    <A
HREF="module-admin.html#AEN14395"
>Module creation, administrator part</A
>,
    <A
HREF="module-admin.html#AEN14458"
>Module creation, administrator part</A
>,
    <A
HREF="module-admin.html#AEN14478"
>Module creation, administrator part</A
>,
    <A
HREF="include-html-file-in-module.html#AEN14572"
>How to include a HTML file in a PHP-Nuke module</A
>,
    <A
HREF="include-html-file-in-module.html#AEN14593"
>How to include a HTML file in a PHP-Nuke module</A
>,
    <A
HREF="include-html-file-and-links-in-module-iframe.html#AEN14791"
>How to include a HTML file and its links using an iframe in a PHP-Nuke module</A
>,
    <A
HREF="include-html-file-and-links-in-module-iframe.html#AEN14801"
>How to include a HTML file and its links using an iframe in a PHP-Nuke module</A
>,
    <A
HREF="include-plain-text-file-in-module.html#AEN14856"
>How to include a plain text file in a PHP-Nuke module</A
>,
    <A
HREF="javascript-php.html#AEN14944"
>Javascript functions in javascript.php</A
>,
    <A
HREF="javascript-in-php-nuke-modules-complete.html#AEN14950"
>Complete Javascript code in modules</A
>,
    <A
HREF="google-adsense-in-news-module.html#AEN15025"
>Google AdSense in the News module</A
>,
    <A
HREF="google-adsense-on-top-of-php-nuke-module.html#AEN15047"
>Google AdSense on top of a PHP-Nuke module</A
>,
    <A
HREF="html-forms-in-module.html#AEN15079"
>How to display HTML forms in a module</A
>,
    <A
HREF="duplicating-php-nuke-modules.html#AEN15089"
>Duplicating PHP-Nuke modules</A
>,
    <A
HREF="duplicating-php-nuke-modules.html#AEN15125"
>Duplicating PHP-Nuke modules</A
>,
    <A
HREF="duplicating-php-nuke-faq-module.html#AEN15140"
>Duplicating the PHP-Nuke FAQ module</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15578"
>SQL injection with PHP-Nuke</A
>,
    <A
HREF="permissions2.html#AEN16135"
>Permissions on folders and files</A
>,
    <A
HREF="googletap.html#AEN17843"
>Installation</A
>,
    <A
HREF="googletap.html#AEN18070"
>How it works</A
>,
    <A
HREF="allow-anonymous-web-link-submissions.html#AEN18835"
>How to allow anonymous web link submissions</A
>,
    <A
HREF="change-home-module.html#AEN18960"
>How to change the Home module</A
>,
    <A
HREF="change-home-module.html#AEN18965"
>How to change the Home module</A
>,
    <A
HREF="enter-thousands-of-web-links.html#AEN19208"
>How to enter thousands of web links</A
>,
    <A
HREF="enter-thousands-of-web-links.html#AEN19221"
>How to enter thousands of web links</A
>,
    <A
HREF="enter-thousands-of-web-links.html#AEN19238"
>How to enter thousands of web links</A
>,
    <A
HREF="enter-thousands-of-web-links.html#AEN19247"
>How to enter thousands of web links</A
>,
    <A
HREF="enter-thousands-of-download-links.html#AEN19281"
>How to enter thousands of download links</A
>,
    <A
HREF="enter-thousands-of-download-links.html#AEN19311"
>How to enter thousands of download links</A
>,
    <A
HREF="find-user-name.html#AEN19563"
>How to find the user name in a module</A
>,
    <A
HREF="find-last-date.html#AEN19721"
>How to find the last date of...</A
>,
    <A
HREF="html-create-link.html#AEN20669"
>How to create a link in HTML</A
>
  </DT
><DT
>module.php,
    <A
HREF="change-home-module.html#AEN19003"
>How to change the Home module</A
>
  </DT
><DT
>modules,
    <A
HREF="history.html#AEN1877"
>Short history of PHP-Nuke</A
>,
    <A
HREF="communities.html#AEN1972"
>The PHP-Nuke Communities</A
>,
    <A
HREF="communities.html#AEN1977"
>The PHP-Nuke Communities</A
>,
    <A
HREF="whyphpnuke.html#AEN2034"
>Why use PHP-Nuke and not static HTML pages</A
>,
    <A
HREF="php-nuke-vs-post-nuke.html#AEN2137"
>PHP-Nuke vs. Post-Nuke</A
>,
    <A
HREF="resources.html#AEN3769"
>Resources</A
>,
    <A
HREF="test-scripts.html#AEN3889"
>analyze.php</A
>,
    <A
HREF="modules-disappear.html#AEN4718"
>Modules do not show up and/or disappear</A
>,
    <A
HREF="modules-disappear.html#AEN4724"
>Modules do not show up and/or disappear</A
>,
    <A
HREF="modules-disappear.html#AEN4726"
>Modules do not show up and/or disappear</A
>,
    <A
HREF="modules-disappear.html#AEN4728"
>Modules do not show up and/or disappear</A
>,
    <A
HREF="modules-disappear.html#AEN4745"
>Modules do not show up and/or disappear</A
>,
    <A
HREF="frontend.html#AEN5198"
>Front end structure: user view</A
>,
    <A
HREF="frontend.html#AEN5206"
>Front end structure: user view</A
>,
    <A
HREF="frontend.html#AEN5223"
>Front end structure: user view</A
>,
    <A
HREF="preinstalled-blocks.html#AEN5884"
>The preinstalled blocks</A
>,
    <A
HREF="preinstalled-blocks.html#AEN5886"
>The preinstalled blocks</A
>,
    <A
HREF="preinstalled-blocks.html#AEN6037"
>The preinstalled blocks</A
>,
    <A
HREF="administration-functions.html#AEN6324"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6758"
>The administration functions</A
>,
    <A
HREF="preferences.html#AEN7320"
>The Preferences Page </A
>,
    <A
HREF="php-nuke-autotheme.html#AEN7532"
>AutoTheme</A
>,
    <A
HREF="php-nuke-menu-builder.html#AEN7713"
>Menu Builder</A
>,
    <A
HREF="php-nuke-treemenu-with-javascript.html#AEN7821"
>Treemenu with Javascript</A
>,
    <A
HREF="php-nuke-tools-module.html#AEN8667"
>PHP-Nuke-Tools module </A
>,
    <A
HREF="php-nuke-tools-module.html#AEN8672"
>PHP-Nuke-Tools module </A
>,
    <A
HREF="upload-add-on-for-phpbb.html#AEN8918"
>Upload add-on for phpBB</A
>,
    <A
HREF="architecture.html#AEN9091"
>Architecture and structure </A
>,
    <A
HREF="architecture.html#AEN9104"
>Architecture and structure </A
>,
    <A
HREF="architecture.html#AEN9106"
>Architecture and structure </A
>,
    <A
HREF="architecture.html#AEN9118"
>Architecture and structure </A
>,
    <A
HREF="architecture.html#AEN9124"
>Architecture and structure </A
>,
    <A
HREF="directory-structure.html#AEN9178"
>Directory structure </A
>,
    <A
HREF="directory-structure.html#AEN9289"
>Directory structure </A
>,
    <A
HREF="module-management.html#AEN9336"
>Module management</A
>,
    <A
HREF="module-management.html#AEN9350"
>Module management</A
>,
    <A
HREF="module-management.html#AEN9353"
>Module management</A
>,
    <A
HREF="admin-management.html#AEN9377"
>Administration management </A
>,
    <A
HREF="admin-management.html#AEN9379"
>Administration management </A
>,
    <A
HREF="hide-left-blocks.html#AEN10465"
>How to hide the left blocks</A
>,
    <A
HREF="hide-left-blocks.html#AEN10488"
>How to hide the left blocks</A
>,
    <A
HREF="change-php-nuke-theme-depending-on-module.html#AEN10929"
>How to change the PHP-Nuke theme depending on the module</A
>,
    <A
HREF="change-php-nuke-theme-depending-on-module.html#AEN10933"
>How to change the PHP-Nuke theme depending on the module</A
>,
    <A
HREF="build-custom-module-blocks.html#AEN11687"
>How to build custom module blocks</A
>,
    <A
HREF="simple-module-block.html#AEN11708"
>Simple module block</A
>,
    <A
HREF="simple-module-block.html#AEN11710"
>Simple module block</A
>,
    <A
HREF="simple-module-block.html#AEN11740"
>Simple module block</A
>,
    <A
HREF="treemenu-block.html#AEN11752"
>Treemenu block</A
>,
    <A
HREF="treemenu-block.html#AEN11771"
>Treemenu block</A
>,
    <A
HREF="modifying-php-nuke-modules.html#AEN11930"
>Modifying PHP-Nuke modules</A
>,
    <A
HREF="modifying-php-nuke-modules.html#AEN11933"
>Modifying PHP-Nuke modules</A
>,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12429"
>How to redirect Your Info to the Forums user profile</A
>,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12454"
>How to redirect Your Info to the Forums user profile</A
>,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12462"
>How to redirect Your Info to the Forums user profile</A
>,
    <A
HREF="redirect-users-to-login-and-back.html#AEN12504"
>How to redirect users to Login and back</A
>,
    <A
HREF="creating-modules.html#AEN14101"
>Creating modules</A
>,
    <A
HREF="module-structure.html#AEN14154"
>Module structure </A
>,
    <A
HREF="module-structure.html#AEN14160"
>Module structure </A
>,
    <A
HREF="module-structure.html#AEN14164"
>Module structure </A
>,
    <A
HREF="module-structure.html#AEN14182"
>Module structure </A
>,
    <A
HREF="module-structure.html#AEN14185"
>Module structure </A
>,
    <A
HREF="module-rules.html#AEN14245"
>Creating fully compatible modules: the rules to follow</A
>,
    <A
HREF="module-admin.html#AEN14385"
>Module creation, administrator part</A
>,
    <A
HREF="module-admin.html#AEN14467"
>Module creation, administrator part</A
>,
    <A
HREF="duplicating-php-nuke-modules.html#AEN15096"
>Duplicating PHP-Nuke modules</A
>,
    <A
HREF="duplicating-php-nuke-faq-module.html#AEN15131"
>Duplicating the PHP-Nuke FAQ module</A
>,
    <A
HREF="permissions2.html#AEN16145"
>Permissions on folders and files</A
>,
    <A
HREF="permissions2.html#AEN16147"
>Permissions on folders and files</A
>,
    <A
HREF="accelerating-php-nuke.html#AEN16447"
>Accelerating PHP-Nuke</A
>,
    <A
HREF="caching-php-nuke-conclusion.html#AEN17020"
>Caching PHP-Nuke: Conclusion</A
>,
    <A
HREF="search-engines-and-dynamic-urls.html#AEN17105"
>Search engines and dynamic URLs</A
>,
    <A
HREF="search-engines-and-dynamic-urls.html#AEN17108"
>Search engines and dynamic URLs</A
>,
    <A
HREF="make-php-nuke-search-engine-friendly.html#AEN17644"
>How to make PHP-Nuke search engine friendly</A
>,
    <A
HREF="googletap.html#AEN17821"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17848"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17855"
>Installation</A
>,
    <A
HREF="install-modules-with-database-change.html#AEN18643"
>How to install modules that change the database structure</A
>,
    <A
HREF="install-modules-with-database-files-change.html#AEN18668"
>How to install modules that change the database structure and the files</A
>,
    <A
HREF="install-modules-with-database-files-change.html#AEN18687"
>How to install modules that change the database structure and the files</A
>,
    <A
HREF="change-home-module.html#AEN18967"
>How to change the Home module</A
>,
    <A
HREF="find-last-date.html#AEN19700"
>How to find the last date of...</A
>,
    <A
HREF="database-tables.html#AEN20381"
>The database tables </A
>,
    <A
HREF="html-create-link.html#AEN20667"
>How to create a link in HTML</A
>,
    <A
HREF="html-insert-image.html#AEN20699"
>How to insert an image in HTML</A
>
  </DT
><DT
>mod_auth_mys,
    <A
HREF="xampp.html#AEN3251"
>XAMPP</A
>
  </DT
><DT
>Mod_Broken,
    <A
HREF="change-buggy-module.html#AEN12026"
>How to change a buggy module</A
>
  </DT
><DT
>mod_gzip,
    <A
HREF="changing-web-hoster.html#AEN5070"
>Changing Web hoster</A
>,
    <A
HREF="jpcache.html#AEN16616"
>How to use jpcache</A
>
  </DT
><DT
>mod_perl,
    <A
HREF="xampp.html#AEN3238"
>XAMPP</A
>
  </DT
><DT
>mod_php,
    <A
HREF="xampp.html#AEN3247"
>XAMPP</A
>
  </DT
><DT
>monitor,
    <A
HREF="php-nuke-header-change-logo-dynamic.html#AEN10232"
>How to change the logo's dimensions dynamically</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13730"
>How to create a Help Center Live block</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13746"
>How to create a Help Center Live block</A
>
  </DT
><DT
>Moon,
    <A
HREF="php-nuke-moon-sun-block.html#AEN7587"
>Moon &#38; Sun block</A
>
  </DT
><DT
>Mozilla,
    <A
HREF="compressed-output-in-forums.html#AEN4565"
>Compressed output in forums</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11072"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11118"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="cookies.html#AEN16211"
>Cookie hijack</A
>
  </DT
><DT
>mSQL,
    <A
HREF="sql-syntax.html#AEN21050"
>The syntax of SQL code</A
>
  </DT
><DT
>Multi-categories,
    <A
HREF="upload-add-on-for-phpbb.html#AEN8859"
>Upload add-on for phpBB</A
>
  </DT
><DT
>multilanguage,
    <A
HREF="module-management.html#AEN9348"
>Module management</A
>,
    <A
HREF="module-structure.html#AEN14180"
>Module structure </A
>
  </DT
><DT
>myfortune,
    <A
HREF="enter-thousands-of-ephemerids.html#AEN19444"
>How to enter thousands of ephemerids</A
>
  </DT
><DT
>MyHeadlines,
    <A
HREF="php-nuke-my-headlines-module.html#AEN8623"
>My Headlines module</A
>
  </DT
><DT
>MySQL,
    <A
HREF="install-php-nuke-nukesql.html#AEN3095"
>How to install PHP-Nuke using nukesql.php</A
>,
    <A
HREF="xampp.html#AEN3222"
>XAMPP</A
>,
    <A
HREF="xampp.html#AEN3244"
>XAMPP</A
>,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3430"
>Apache, PHP and MySQL on Red Hat Linux</A
>,
    <A
HREF="config-php-file.html#AEN3514"
>The config.php file</A
>,
    <A
HREF="call-to-undefined-function.html#AEN3962"
>Call to undefined function: message_die() in db.php line 88</A
>,
    <A
HREF="module-public.html#AEN14275"
>Module creation, the public part</A
>,
    <A
HREF="proceed-when-mysql-slow.html#AEN18249"
>How to proceed when MySQL is slow</A
>,
    <A
HREF="enter-thousands-of-web-links.html#AEN19213"
>How to enter thousands of web links</A
>,
    <A
HREF="enter-thousands-of-web-links.html#AEN19243"
>How to enter thousands of web links</A
>,
    <A
HREF="make-encyclopedia-international.html#AEN19533"
>How to make the Encyclopedia international</A
>,
    <A
HREF="sql-syntax.html#AEN21046"
>The syntax of SQL code</A
>
  </DT
><DT
>mysqldump,
    <A
HREF="transferring-local-installation-to-web.html#AEN5035"
>Transferring a local installation to the Web</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN24999"
>N</A
></H2
><DL
><DT
>nature,
    <A
HREF="php-nuke-vs-post-nuke.html#AEN2159"
>PHP-Nuke vs. Post-Nuke</A
>,
    <A
HREF="administration-functions.html#AEN6487"
>The administration functions</A
>,
    <A
HREF="display-images-php-nuke-blocks.html#AEN13872"
>How to display images in PHP-Nuke blocks</A
>,
    <A
HREF="security-fixes.html#AEN15819"
>Security fixes</A
>
  </DT
><DT
>navigation,
    <A
HREF="preinstalled-modules.html#AEN5693"
>The preinstalled modules</A
>
  </DT
><DT
>navigations,
    <A
HREF="module-public.html#AEN14345"
>Module creation, the public part</A
>
  </DT
><DT
>nessus,
    <A
HREF="how-secure-is-php-nuke.html#AEN15240"
>How secure is PHP-Nuke?</A
>,
    <A
HREF="how-secure-is-php-nuke.html#AEN15303"
>How secure is PHP-Nuke?</A
>
  </DT
><DT
>news,
    <A
HREF="whatis-phpnuke.html#AEN1830"
>What Is PHP-Nuke</A
>,
    <A
HREF="preinstalled-modules.html#AEN5246"
>The preinstalled modules</A
>,
    <A
HREF="administration-functions.html#AEN6401"
>The administration functions</A
>,
    <A
HREF="php-nuke-my-headlines-module.html#AEN8641"
>My Headlines module</A
>,
    <A
HREF="php-nuke-my-headlines-module.html#AEN8643"
>My Headlines module</A
>,
    <A
HREF="directory-structure.html#AEN9219"
>Directory structure </A
>,
    <A
HREF="change-order-of-messages.html#AEN11604"
>How to change the order of messages</A
>,
    <A
HREF="google-adsense-in-news-module.html#AEN15020"
>Google AdSense in the News module</A
>,
    <A
HREF="security-measures.html#AEN15899"
>Security measures </A
>,
    <A
HREF="permissions2.html#AEN16132"
>Permissions on folders and files</A
>,
    <A
HREF="cookies.html#AEN16203"
>Cookie hijack</A
>,
    <A
HREF="database-tables.html#AEN20171"
>The database tables </A
>
  </DT
><DT
>newsfeed,
    <A
HREF="preferences.html#AEN7366"
>The Preferences Page </A
>
  </DT
><DT
>newsletter,
    <A
HREF="whatis-phpnuke.html#AEN1859"
>What Is PHP-Nuke</A
>,
    <A
HREF="administration-functions.html#AEN6802"
>The administration functions</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7110"
>phpBB Forum administration</A
>,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12433"
>How to redirect Your Info to the Forums user profile</A
>,
    <A
HREF="allow-html-newsletter.html#AEN13046"
>How to allow HTML in the Newsletter</A
>
  </DT
><DT
>newspaper,
    <A
HREF="preinstalled-modules.html#AEN5727"
>The preinstalled modules</A
>
  </DT
><DT
>new_user,
    <A
HREF="disable-registration.html#AEN12546"
>How to disable registration</A
>,
    <A
HREF="disable-registration.html#AEN12550"
>How to disable registration</A
>,
    <A
HREF="find-all-registration-links.html#AEN18757"
>How to find all registration links</A
>,
    <A
HREF="find-all-registration-links.html#AEN18762"
>How to find all registration links</A
>
  </DT
><DT
>nickname,
    <A
HREF="preinstalled-modules.html#AEN5383"
>The preinstalled modules</A
>
  </DT
><DT
>nohtml,
    <A
HREF="allow-special-html-tags.html#AEN11243"
>How to allow special HTML tags</A
>
  </DT
><DT
>noise,
    <A
HREF="backend.html#AEN6137"
>Back end structure: administrator view</A
>
  </DT
><DT
>non-Netscape-4,
    <A
HREF="change-font-size-php-nuke.html#AEN11049"
>How to change the font size in PHP-Nuke</A
>
  </DT
><DT
>notation,
    <A
HREF="adjust-server-time.html#AEN19937"
>How to adjust server time</A
>,
    <A
HREF="adjust-server-time.html#AEN19941"
>How to adjust server time</A
>
  </DT
><DT
>notes,
    <A
HREF="permissions.html#AEN2529"
>File permissions</A
>,
    <A
HREF="permissions.html#AEN2531"
>File permissions</A
>,
    <A
HREF="permissions.html#AEN2533"
>File permissions</A
>,
    <A
HREF="administration-functions.html#AEN6905"
>The administration functions</A
>
  </DT
><DT
>notification,
    <A
HREF="php-nuke-approve-membership-module.html#AEN8122"
>Approve Membership module</A
>
  </DT
><DT
>notifications,
    <A
HREF="preferences.html#AEN7247"
>The Preferences Page </A
>
  </DT
><DT
>nuke-common,
    <A
HREF="more-than-one-php-nuke-sites.html#AEN3751"
>Different PHP-Nuke sites with the same user base</A
>
  </DT
><DT
>nuke-common_users,
    <A
HREF="more-than-one-php-nuke-sites.html#AEN3753"
>Different PHP-Nuke sites with the same user base</A
>
  </DT
><DT
>nuke.sql,
    <A
HREF="database-creation.html#AEN2639"
>Database creation</A
>
  </DT
><DT
>nuke2.sql,
    <A
HREF="duplicating-php-nuke-modules.html#AEN15105"
>Duplicating PHP-Nuke modules</A
>,
    <A
HREF="duplicating-php-nuke-modules.html#AEN15111"
>Duplicating PHP-Nuke modules</A
>,
    <A
HREF="duplicating-php-nuke-faq-module.html#AEN15170"
>Duplicating the PHP-Nuke FAQ module</A
>
  </DT
><DT
>Nuke6,
    <A
HREF="download.html#AEN2353"
>Download</A
>
  </DT
><DT
>nukecops,
    <A
HREF="googletap.html#AEN17845"
>Installation</A
>
  </DT
><DT
>nuked,
    <A
HREF="php-nuke-gallery-module.html#AEN8215"
>Gallery module</A
>
  </DT
><DT
>nukeforums.com,
    <A
HREF="aknowledgements.html#AEN1413"
>Aknowledgements</A
>,
    <A
HREF="translate-php-nuke-howto.html#AEN1697"
>How to translate this HOWTO</A
>
  </DT
><DT
>NukeNews,
    <A
HREF="theme-rules.html#AEN10827"
>Theme construction: the rules to follow </A
>
  </DT
><DT
>nuke_access,
    <A
HREF="database-tables.html#AEN20159"
>The database tables </A
>
  </DT
><DT
>nuke_authors,
    <A
HREF="phpmyadmin-navigation-bar-export.html#AEN2913"
>phpMyAdmin navigation bar: Export</A
>,
    <A
HREF="cannot-create-administrator-account.html#AEN4434"
>You cannot create the administrator account</A
>,
    <A
HREF="database-tables.html#AEN20165"
>The database tables </A
>
  </DT
><DT
>nuke_banlist,
    <A
HREF="database-tables.html#AEN20177"
>The database tables </A
>
  </DT
><DT
>nuke_bbsearch_wordlist,
    <A
HREF="proceed-when-mysql-slow.html#AEN18277"
>How to proceed when MySQL is slow</A
>
  </DT
><DT
>nuke_blocks,
    <A
HREF="database-tables.html#AEN20201"
>The database tables </A
>
  </DT
><DT
>nuke_catagories,
    <A
HREF="database-tables.html#AEN20207"
>The database tables </A
>
  </DT
><DT
>nuke_config,
    <A
HREF="php-nuke-upgrade-scripts.html#AEN4961"
>PHP-Nuke upgrade scripts</A
>,
    <A
HREF="database-tables.html#AEN20219"
>The database tables </A
>
  </DT
><DT
>nuke_disallow,
    <A
HREF="database-tables.html#AEN20231"
>The database tables </A
>
  </DT
><DT
>nuke_downloads_categories,
    <A
HREF="database-tables.html#AEN20237"
>The database tables </A
>
  </DT
><DT
>nuke_downloads_editorials,
    <A
HREF="database-tables.html#AEN20249"
>The database tables </A
>
  </DT
><DT
>nuke_downloads_modrequest,
    <A
HREF="database-tables.html#AEN20255"
>The database tables </A
>
  </DT
><DT
>nuke_encyclopedia_text,
    <A
HREF="database-tables.html#AEN20279"
>The database tables </A
>
  </DT
><DT
>nuke_encyclopedya,
    <A
HREF="database-tables.html#AEN20273"
>The database tables </A
>
  </DT
><DT
>nuke_ephem,
    <A
HREF="enter-thousands-of-ephemerids.html#AEN19434"
>How to enter thousands of ephemerids</A
>,
    <A
HREF="database-tables.html#AEN20285"
>The database tables </A
>
  </DT
><DT
>nuke_faqAnswer,
    <A
HREF="more-than-127-faq-answers.html#AEN12122"
>How to add more than 127 FAQ answers</A
>,
    <A
HREF="database-tables.html#AEN20291"
>The database tables </A
>
  </DT
><DT
>nuke_faqcategories,
    <A
HREF="database-tables.html#AEN20297"
>The database tables </A
>
  </DT
><DT
>nuke_forums,
    <A
HREF="database-tables.html#AEN20315"
>The database tables </A
>
  </DT
><DT
>nuke_forumtopics,
    <A
HREF="database-tables.html#AEN20321"
>The database tables </A
>
  </DT
><DT
>nuke_forum_access,
    <A
HREF="database-tables.html#AEN20303"
>The database tables </A
>
  </DT
><DT
>nuke_forum_mods,
    <A
HREF="database-tables.html#AEN20309"
>The database tables </A
>
  </DT
><DT
>nuke_links_categories,
    <A
HREF="database-tables.html#AEN20333"
>The database tables </A
>
  </DT
><DT
>nuke_links_editorials,
    <A
HREF="database-tables.html#AEN20339"
>The database tables </A
>
  </DT
><DT
>nuke_links_links,
    <A
HREF="database-tables.html#AEN20345"
>The database tables </A
>
  </DT
><DT
>nuke_links_modrequest,
    <A
HREF="database-tables.html#AEN20351"
>The database tables </A
>
  </DT
><DT
>nuke_links_newlink,
    <A
HREF="database-tables.html#AEN20357"
>The database tables </A
>
  </DT
><DT
>nuke_main,
    <A
HREF="database-tables.html#AEN20369"
>The database tables </A
>
  </DT
><DT
>nuke_message,
    <A
HREF="database-tables.html#AEN20375"
>The database tables </A
>
  </DT
><DT
>nuke_pages,
    <A
HREF="database-tables.html#AEN20387"
>The database tables </A
>
  </DT
><DT
>nuke_pages_categories,
    <A
HREF="database-tables.html#AEN20393"
>The database tables </A
>
  </DT
><DT
>nuke_poll_check,
    <A
HREF="database-tables.html#AEN20399"
>The database tables </A
>
  </DT
><DT
>nuke_poll_data,
    <A
HREF="database-tables.html#AEN20405"
>The database tables </A
>
  </DT
><DT
>nuke_poll_desc,
    <A
HREF="database-tables.html#AEN20411"
>The database tables </A
>
  </DT
><DT
>nuke_posts,
    <A
HREF="database-tables.html#AEN20423"
>The database tables </A
>
  </DT
><DT
>nuke_posts_text,
    <A
HREF="database-tables.html#AEN20429"
>The database tables </A
>
  </DT
><DT
>nuke_priv_msgs,
    <A
HREF="database-tables.html#AEN20435"
>The database tables </A
>
  </DT
><DT
>nuke_queue,
    <A
HREF="database-tables.html#AEN20441"
>The database tables </A
>
  </DT
><DT
>nuke_quotes,
    <A
HREF="database-tables.html#AEN20447"
>The database tables </A
>
  </DT
><DT
>nuke_ranks,
    <A
HREF="database-tables.html#AEN20453"
>The database tables </A
>
  </DT
><DT
>nuke_referer,
    <A
HREF="database-tables.html#AEN20459"
>The database tables </A
>
  </DT
><DT
>nuke_related,
    <A
HREF="database-tables.html#AEN20465"
>The database tables </A
>
  </DT
><DT
>nuke_reviews_add,
    <A
HREF="database-tables.html#AEN20477"
>The database tables </A
>
  </DT
><DT
>nuke_seccont,
    <A
HREF="database-tables.html#AEN20495"
>The database tables </A
>
  </DT
><DT
>nuke_sections,
    <A
HREF="database-tables.html#AEN20501"
>The database tables </A
>
  </DT
><DT
>nuke_session,
    <A
HREF="database-tables.html#AEN20507"
>The database tables </A
>
  </DT
><DT
>nuke_stats_hour,
    <A
HREF="database-tables.html#AEN20525"
>The database tables </A
>
  </DT
><DT
>nuke_stats_month,
    <A
HREF="database-tables.html#AEN20531"
>The database tables </A
>
  </DT
><DT
>nuke_stats_year,
    <A
HREF="database-tables.html#AEN20537"
>The database tables </A
>
  </DT
><DT
>nuke_stories,
    <A
HREF="database-tables.html#AEN20543"
>The database tables </A
>
  </DT
><DT
>nuke_stories_cat,
    <A
HREF="database-tables.html#AEN20549"
>The database tables </A
>
  </DT
><DT
>nuke_topics,
    <A
HREF="database-tables.html#AEN20555"
>The database tables </A
>
  </DT
><DT
>nuke_users,
    <A
HREF="restore-single-table.html#AEN18521"
>How to restore a single table</A
>,
    <A
HREF="database-tables.html#AEN20561"
>The database tables </A
>
  </DT
><DT
>nuke_words,
    <A
HREF="database-tables.html#AEN20567"
>The database tables </A
>
  </DT
><DT
>NUL-byte,
    <A
HREF="forums-cant-create-category-without-name.html#AEN4778"
>Forums Error: Can't create a category without a name</A
>
  </DT
><DT
>NULL,
    <A
HREF="security-audit.html#AEN16043"
>Security audit</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN25276"
>O</A
></H2
><DL
><DT
>objects,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15712"
>Cross-site tracing with PHP-Nuke</A
>
  </DT
><DT
>obscurity,
    <A
HREF="how-secure-is-php-nuke.html#AEN15242"
>How secure is PHP-Nuke?</A
>
  </DT
><DT
>obsolete,
    <A
HREF="search-engines-and-get-method.html#AEN17175"
>Search engines and the GET method</A
>
  </DT
><DT
>occurrences,
    <A
HREF="regular-expressions.html#AEN17481"
>Regular expressions</A
>
  </DT
><DT
>ODBC,
    <A
HREF="sql-syntax.html#AEN21062"
>The syntax of SQL code</A
>
  </DT
><DT
>ODBC_Adabas,
    <A
HREF="whatis-phpnuke.html#AEN1853"
>What Is PHP-Nuke</A
>,
    <A
HREF="sql-syntax.html#AEN21066"
>The syntax of SQL code</A
>
  </DT
><DT
>ODP,
    <A
HREF="enter-thousands-of-web-links.html#AEN19254"
>How to enter thousands of web links</A
>
  </DT
><DT
>odp.php,
    <A
HREF="php-nuke-odp-module.html#AEN8939"
>ODP module</A
>
  </DT
><DT
>offset,
    <A
HREF="adjust-server-time.html#AEN19877"
>How to adjust server time</A
>
  </DT
><DT
>OOP,
    <A
HREF="php-nuke-vs-xoops.html#AEN2247"
>PHP-Nuke vs. XOOPS</A
>
  </DT
><DT
>open-ended,
    <A
HREF="how-secure-is-php-nuke.html#AEN15299"
>How secure is PHP-Nuke?</A
>
  </DT
><DT
>OpenTable,
    <A
HREF="change-background-colour.html#AEN10598"
>How to change background colour</A
>
  </DT
><DT
>operation,
    <A
HREF="purpose.html#AEN1744"
>Purpose</A
>,
    <A
HREF="phpmyadmin2.html#AEN2734"
>phpMyAdmin: How to administer MySQL via Web</A
>,
    <A
HREF="cookies.html#AEN16182"
>Cookies - timeout and configuration</A
>,
    <A
HREF="solve-common-problems-php-nuke.html#AEN18294"
>How to solve common probems with PHP-Nuke</A
>
  </DT
><DT
>operator,
    <A
HREF="create-help-center-live-block.html#AEN13732"
>How to create a Help Center Live block</A
>
  </DT
><DT
>optimization,
    <A
HREF="caching-php-nuke.html#AEN16487"
>Caching PHP-Nuke</A
>
  </DT
><DT
>optimizer,
    <A
HREF="turck-mmcache.html#AEN16849"
>Turck MMCache</A
>
  </DT
><DT
>Optimizers,
    <A
HREF="caching-php-nuke.html#AEN16495"
>Caching PHP-Nuke</A
>
  </DT
><DT
>origin,
    <A
HREF="whatis-phpnuke.html#AEN1808"
>What Is PHP-Nuke</A
>,
    <A
HREF="css-syntax.html#AEN20882"
>The syntax of CSS</A
>
  </DT
><DT
>overlay,
    <A
HREF="php-nuke-webcam-module.html#AEN8604"
>WebCam module</A
>
  </DT
><DT
>Owen,
    <A
HREF="credits-general.html#AEN1256"
>General</A
>,
    <A
HREF="session-management.html#AEN9426"
>Session management</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN25344"
>P</A
></H2
><DL
><DT
>packages,
    <A
HREF="mandrake-linux-apache-php-mysql.html#AEN3337"
>Apache, PHP and MySQL on Mandrake Linux</A
>,
    <A
HREF="mandrake-linux-apache-php-mysql.html#AEN3355"
>Apache, PHP and MySQL on Mandrake Linux</A
>,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3382"
>Apache, PHP and MySQL on Red Hat Linux</A
>,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3419"
>Apache, PHP and MySQL on Red Hat Linux</A
>
  </DT
><DT
>pagebreaks,
    <A
HREF="book-behind-book.html#AEN1625"
>The book behind the book</A
>
  </DT
><DT
>pagination,
    <A
HREF="licence.html#AEN308"
>Licence</A
>
  </DT
><DT
>palmtop,
    <A
HREF="preinstalled-modules.html#AEN5328"
>The preinstalled modules</A
>
  </DT
><DT
>panel,
    <A
HREF="administration-functions.html#AEN6445"
>The administration functions</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7079"
>phpBB Forum administration</A
>,
    <A
HREF="php-nuke-menu-builder.html#AEN7709"
>Menu Builder</A
>,
    <A
HREF="php-nuke-treemenu-with-javascript.html#AEN7845"
>Treemenu with Javascript</A
>,
    <A
HREF="php-nuke-protector-module.html#AEN8504"
>Protector module</A
>,
    <A
HREF="php-nuke-webcam-module.html#AEN8532"
>WebCam module</A
>,
    <A
HREF="php-nuke-workboard-module.html#AEN9061"
>WorkBoard Module</A
>,
    <A
HREF="eliminate-session-checks.html#AEN9555"
>How to eliminate session checks</A
>,
    <A
HREF="php-nuke-header-change-banner-placement.html#AEN10261"
>How to change placement of the banner in the PHP-Nuke header</A
>,
    <A
HREF="php-nuke-theme-modifying-footer.html#AEN10697"
>Modifying the PHP-Nuke theme footer</A
>,
    <A
HREF="prevent-users-from-changing-php-nuke-theme.html#AEN10888"
>How to prevent users from changing the theme in PHP-Nuke</A
>,
    <A
HREF="build-rss-blocks-with-variable-news-number.html#AEN11875"
>How to build RSS blocks with variable number of news items</A
>,
    <A
HREF="modifying-php-nuke-homepage.html#AEN12040"
>Modifying the PHP-Nuke Homepage</A
>,
    <A
HREF="allow-html-newsletter.html#AEN13043"
>How to allow HTML in the Newsletter</A
>,
    <A
HREF="display-images-php-nuke-blocks.html#AEN13864"
>How to display images in PHP-Nuke blocks</A
>,
    <A
HREF="display-random-images-php-nuke-blocks.html#AEN13971"
>How to display random images in PHP-Nuke blocks</A
>,
    <A
HREF="paypal-block-for-php-nuke.html#AEN14078"
>How to display HTML forms in a block: Paypal</A
>,
    <A
HREF="create-logout-module.html#AEN15002"
>How to create a Logout module</A
>,
    <A
HREF="googletap.html#AEN17889"
>Installation</A
>,
    <A
HREF="adjust-server-time.html#AEN19841"
>How to adjust server time</A
>,
    <A
HREF="adjust-server-time.html#AEN20003"
>How to adjust server time</A
>,
    <A
HREF="foxserv.html#AEN21175"
>Foxserv, making PHP-Nuke work on Windows Systems</A
>
  </DT
><DT
>parameter,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3455"
>Apache, PHP and MySQL on Red Hat Linux</A
>,
    <A
HREF="php-nuke-treemenu-with-php.html#AEN7746"
>Treemenu with PHP</A
>,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12470"
>How to redirect Your Info to the Forums user profile</A
>,
    <A
HREF="disable-registration.html#AEN12552"
>How to disable registration</A
>,
    <A
HREF="block-practice.html#AEN13233"
>How to create a block, a practical example</A
>,
    <A
HREF="include-html-file-and-links-in-module.html#AEN14618"
>How to include a HTML file and its links in a PHP-Nuke module</A
>,
    <A
HREF="include-html-file-and-links-in-module.html#AEN14696"
>How to include a HTML file and its links in a PHP-Nuke module</A
>,
    <A
HREF="search-engines-and-dynamic-urls.html#AEN17120"
>Search engines and dynamic URLs</A
>,
    <A
HREF="search-engines-and-dynamic-urls.html#AEN17133"
>Search engines and dynamic URLs</A
>,
    <A
HREF="html-insert-image.html#AEN20701"
>How to insert an image in HTML</A
>
  </DT
><DT
>Paramétrable,
    <A
HREF="php-nuke-treemenu-with-javascript.html#AEN7791"
>Treemenu with Javascript</A
>
  </DT
><DT
>parent,
    <A
HREF="change-font-size-php-nuke.html#AEN10992"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11023"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="mod_rewrite-api-phases.html#AEN17308"
>API phases</A
>,
    <A
HREF="find-last-date.html#AEN19746"
>How to find the last date of...</A
>,
    <A
HREF="find-last-date.html#AEN19754"
>How to find the last date of...</A
>
  </DT
><DT
>parenthesis,
    <A
HREF="googletap.html#AEN18083"
>How it works</A
>,
    <A
HREF="php-functions.html#AEN20966"
>Functions</A
>
  </DT
><DT
>password,
    <A
HREF="upload.html#AEN2372"
>Upload through FTP</A
>,
    <A
HREF="phpmyadmin-navigation-bar-structure.html#AEN2809"
>phpMyAdmin navigation bar: Structure</A
>,
    <A
HREF="mandrake-linux-apache-php-mysql.html#AEN3326"
>Apache, PHP and MySQL on Mandrake Linux</A
>,
    <A
HREF="config-php-file.html#AEN3639"
>The config.php file</A
>,
    <A
HREF="administrator-password-lost.html#AEN4509"
>You lost the administrator password, or deleted the admin account</A
>,
    <A
HREF="mysql-errno-145.html#AEN4691"
>MySQL errno: 145: Can't open file nuke_XXXX.MYI</A
>,
    <A
HREF="preinstalled-blocks.html#AEN5995"
>The preinstalled blocks</A
>,
    <A
HREF="backend.html#AEN6129"
>Back end structure: administrator view</A
>,
    <A
HREF="preferences.html#AEN7451"
>The Preferences Page </A
>,
    <A
HREF="mysql-frontend.html#AEN21117"
>MySQL Front, how to administer a MySQL DB from Windows </A
>
  </DT
><DT
>patch,
    <A
HREF="install-patches-correct-errors.html#AEN18713"
>How to install patches and correct errors</A
>
  </DT
><DT
>pattern,
    <A
HREF="php-nuke-comic-block.html#AEN7664"
>Comic block</A
>,
    <A
HREF="display-images-php-nuke-blocks.html#AEN13897"
>How to display images in PHP-Nuke blocks</A
>,
    <A
HREF="regular-expressions.html#AEN17506"
>Regular expressions</A
>,
    <A
HREF="regular-expressions.html#AEN17526"
>Regular expressions</A
>
  </DT
><DT
>patterns,
    <A
HREF="common-php-nuke-security-vulnerabilities.html#AEN15342"
>Common PHP-Nuke security vulnerabilities</A
>,
    <A
HREF="regular-expressions.html#AEN17463"
>Regular expressions</A
>
  </DT
><DT
>payment,
    <A
HREF="paypal-block-for-php-nuke.html#AEN14038"
>How to display HTML forms in a block: Paypal</A
>,
    <A
HREF="paypal-block-for-php-nuke.html#AEN14044"
>How to display HTML forms in a block: Paypal</A
>
  </DT
><DT
>PayPal,
    <A
HREF="paypal-block-for-php-nuke.html#AEN14005"
>How to display HTML forms in a block: Paypal</A
>,
    <A
HREF="paypal-block-for-php-nuke.html#AEN14094"
>How to display HTML forms in a block: Paypal</A
>
  </DT
><DT
>PEAR,
    <A
HREF="xampp.html#AEN3234"
>XAMPP</A
>,
    <A
HREF="cache-lite.html#AEN16658"
>Installation of Cache-Lite</A
>,
    <A
HREF="cache-lite.html#AEN16669"
>Installation of Cache-Lite</A
>,
    <A
HREF="cache-lite.html#AEN16671"
>Installation of Cache-Lite</A
>,
    <A
HREF="cache-lite.html#AEN16673"
>Installation of Cache-Lite</A
>
  </DT
><DT
>PEAR.php,
    <A
HREF="cache-lite.html#AEN16778"
>How to use Cache-Lite</A
>
  </DT
><DT
>pending,
    <A
HREF="regular-expressions.html#AEN17438"
>Regular expressions</A
>
  </DT
><DT
>performance,
    <A
HREF="htaccess-file.html#AEN17586"
>The .htaccess file</A
>
  </DT
><DT
>Perl,
    <A
HREF="php-nuke-tools-module.html#AEN8696"
>PHP-Nuke-Tools module </A
>
  </DT
><DT
>permission,
    <A
HREF="credits-general.html#AEN1261"
>General</A
>,
    <A
HREF="permissions.html#AEN2584"
>File permissions</A
>,
    <A
HREF="php-nuke-upload-module.html#AEN8786"
>Upload module</A
>,
    <A
HREF="php-nuke-upload-module.html#AEN8788"
>Upload module</A
>
  </DT
><DT
>permissions,
    <A
HREF="php-nuke-vs-xoops.html#AEN2229"
>PHP-Nuke vs. XOOPS</A
>,
    <A
HREF="permissions.html#AEN2497"
>File permissions</A
>,
    <A
HREF="permissions.html#AEN2501"
>File permissions</A
>,
    <A
HREF="permissions.html#AEN2522"
>File permissions</A
>,
    <A
HREF="permissions.html#AEN2542"
>File permissions</A
>,
    <A
HREF="permissions.html#AEN2565"
>File permissions</A
>,
    <A
HREF="permissions.html#AEN2600"
>File permissions</A
>,
    <A
HREF="mandrake-linux-apache-php-mysql.html#AEN3363"
>Apache, PHP and MySQL on Mandrake Linux</A
>,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3465"
>Apache, PHP and MySQL on Red Hat Linux</A
>,
    <A
HREF="test-scripts.html#AEN3911"
>analyze.php</A
>,
    <A
HREF="administration-functions.html#AEN6350"
>The administration functions</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7190"
>phpBB Forum administration</A
>,
    <A
HREF="permissions2.html#AEN16111"
>Permissions on folders and files</A
>,
    <A
HREF="permissions2.html#AEN16125"
>Permissions on folders and files</A
>
  </DT
><DT
>phase,
    <A
HREF="mod_rewrite-api-phases.html#AEN17276"
>API phases</A
>,
    <A
HREF="mod_rewrite-api-phases.html#AEN17278"
>API phases</A
>,
    <A
HREF="mysql-frontend.html#AEN21111"
>MySQL Front, how to administer a MySQL DB from Windows </A
>
  </DT
><DT
>phases,
    <A
HREF="mod_rewrite-api-phases.html#AEN17261"
>API phases</A
>,
    <A
HREF="mod_rewrite-api-phases.html#AEN17269"
>API phases</A
>,
    <A
HREF="mod_rewrite-api-phases.html#AEN17305"
>API phases</A
>,
    <A
HREF="mod_rewrite-ruleset-processing.html#AEN17314"
>Ruleset processing</A
>
  </DT
><DT
>Philosophy,
    <A
HREF="discordian-calendar.html#AEN20060"
>The Discordian Calendar</A
>
  </DT
><DT
>photos,
    <A
HREF="php-nuke-gallery-module.html#AEN8262"
>Gallery module</A
>
  </DT
><DT
>PHP,
    <A
HREF="history.html#AEN1884"
>Short history of PHP-Nuke</A
>,
    <A
HREF="php-nuke-vs-xoops.html#AEN2181"
>PHP-Nuke vs. XOOPS</A
>,
    <A
HREF="easyphp.html#AEN3181"
>How to check a successful installation</A
>,
    <A
HREF="empty-page-in-windows.html#AEN4627"
>In Windows, you get an empty page</A
>,
    <A
HREF="descriptive-error-message.html#AEN4651"
>How to get a more descriptive error message</A
>,
    <A
HREF="php-nuke-autotheme.html#AEN7529"
>AutoTheme</A
>,
    <A
HREF="php-nuke-tools-module.html#AEN8686"
>PHP-Nuke-Tools module </A
>,
    <A
HREF="editing-php-nuke-files.html#AEN9584"
>Editing PHP (-Nuke) files</A
>,
    <A
HREF="topic-structure.html#AEN10028"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="javascript-in-php-nuke-blocks.html#AEN13361"
>How to use Javascript in PHP-Nuke blocks</A
>,
    <A
HREF="javascript-in-php-nuke-blocks.html#AEN13371"
>How to use Javascript in PHP-Nuke blocks</A
>,
    <A
HREF="include-html-file-in-module.html#AEN14600"
>How to include a HTML file in a PHP-Nuke module</A
>,
    <A
HREF="cache-lite.html#AEN16646"
>Cache-Lite</A
>,
    <A
HREF="turck-mmcache.html#AEN16852"
>Turck MMCache</A
>,
    <A
HREF="googletap.html#AEN18029"
>How it works</A
>
  </DT
><DT
>php.ini,
    <A
HREF="cannot-add-header-information-in-forums.html#AEN4601"
>Warning: Cannot add header information...in forums</A
>,
    <A
HREF="lots-of-notice-lines.html#AEN4642"
>You get a lot of Notice lines in the output of PHP-Nuke</A
>,
    <A
HREF="security-measures.html#AEN15970"
>Security measures </A
>,
    <A
HREF="security-measures.html#AEN15977"
>Security measures </A
>,
    <A
HREF="turck-mmcache.html#AEN16978"
>How to use Turck MMCache</A
>,
    <A
HREF="search-engines-and-dynamic-urls.html#AEN17115"
>Search engines and dynamic URLs</A
>,
    <A
HREF="change-php-parameters.html#AEN19106"
>How to change PHP parameters when you don't have access to php.ini</A
>,
    <A
HREF="change-php-parameters.html#AEN19140"
>How to change PHP parameters when you don't have access to php.ini</A
>
  </DT
><DT
>phpBB,
    <A
HREF="frontend.html#AEN5200"
>Front end structure: user view</A
>,
    <A
HREF="preinstalled-modules.html#AEN5426"
>The preinstalled modules</A
>,
    <A
HREF="how-sessions-work.html#AEN9496"
>How sessions work in the forums</A
>,
    <A
HREF="how-sessions-work.html#AEN9499"
>How sessions work in the forums</A
>,
    <A
HREF="eliminate-session-checks.html#AEN9562"
>How to eliminate session checks</A
>,
    <A
HREF="sql-syntax.html#AEN21078"
>The syntax of SQL code</A
>
  </DT
><DT
>phpbb2mysql2,
    <A
HREF="invalid-session-in-forums.html#AEN4392"
>Invalid session in forums</A
>
  </DT
><DT
>PHPNuke,
    <A
HREF="aknowledgements.html#AEN1357"
>Aknowledgements</A
>,
    <A
HREF="php-nuke-copyright-notice.html#AEN10782"
>The PHP-Nuke Copyright notice</A
>
  </DT
><DT
>phpnuke.org,
    <A
HREF="bypass-article-approval.html#AEN12757"
>How to bypass article approval</A
>
  </DT
><DT
>PHP_PREFIX,
    <A
HREF="turck-mmcache.html#AEN16902"
>Installation of Turck MMCache</A
>
  </DT
><DT
>PicShow.php,
    <A
HREF="display-random-images-php-nuke-blocks.html#AEN13987"
>How to display random images in PHP-Nuke blocks</A
>,
    <A
HREF="display-random-images-php-nuke-blocks.html#AEN13993"
>How to display random images in PHP-Nuke blocks</A
>
  </DT
><DT
>Pippo,
    <A
HREF="install-phpmyadmin.html#AEN2691"
>How to install phpMyAdmin</A
>
  </DT
><DT
>pixels,
    <A
HREF="example-creation-html-template.html#AEN10064"
>Example creation of HTML file to include in the theme</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN10987"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="html-create-table.html#AEN20744"
>How to create a table in HTML</A
>,
    <A
HREF="html-create-table.html#AEN20748"
>How to create a table in HTML</A
>,
    <A
HREF="css-syntax.html#AEN20834"
>The syntax of CSS</A
>
  </DT
><DT
>plattform,
    <A
HREF="aknowledgements.html#AEN1545"
>Aknowledgements</A
>,
    <A
HREF="upload.html#AEN2383"
>Upload through FTP</A
>
  </DT
><DT
>Pluto,
    <A
HREF="module-public.html#AEN14304"
>Module creation, the public part</A
>
  </DT
><DT
>PNG,
    <A
HREF="credits-version-1.0.html#AEN507"
>Version 1.0</A
>,
    <A
HREF="credits-version-2.0.html#AEN1204"
>Version 2.0</A
>,
    <A
HREF="favourites-icon-favicon-ico.html#AEN11159"
>How to implement a favourites icon (favicon.ico)</A
>,
    <A
HREF="create-fade-block.html#AEN13502"
>How to create a fade block</A
>,
    <A
HREF="html-insert-image.html#AEN20684"
>How to insert an image in HTML</A
>
  </DT
><DT
>poisoned,
    <A
HREF="backend.html#AEN6135"
>Back end structure: administrator view</A
>
  </DT
><DT
>Polls,
    <A
HREF="administration-functions.html#AEN6920"
>The administration functions</A
>,
    <A
HREF="preferences.html#AEN7442"
>The Preferences Page </A
>
  </DT
><DT
>pop-up,
    <A
HREF="administration-functions.html#AEN6941"
>The administration functions</A
>
  </DT
><DT
>portal,
    <A
HREF="whatis-phpnuke.html#AEN1820"
>What Is PHP-Nuke</A
>,
    <A
HREF="communities.html#AEN1997"
>The PHP-Nuke Communities</A
>,
    <A
HREF="whyphpnuke.html#AEN2030"
>Why use PHP-Nuke and not static HTML pages</A
>,
    <A
HREF="frontend.html#AEN5204"
>Front end structure: user view</A
>,
    <A
HREF="frontend.html#AEN5208"
>Front end structure: user view</A
>,
    <A
HREF="administration-functions.html#AEN6346"
>The administration functions</A
>,
    <A
HREF="php-nuke-google-adsense-block.html#AEN7856"
>Google AdSense block</A
>
  </DT
><DT
>portals,
    <A
HREF="php-nuke-vs-xoops.html#AEN2183"
>PHP-Nuke vs. XOOPS</A
>,
    <A
HREF="php-nuke-vs-xoops.html#AEN2185"
>PHP-Nuke vs. XOOPS</A
>
  </DT
><DT
>POST,
    <A
HREF="forums-cant-create-category-without-name.html#AEN4796"
>Forums Error: Can't create a category without a name</A
>,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15769"
>Cross-site tracing with PHP-Nuke</A
>
  </DT
><DT
>Post-Nuke,
    <A
HREF="php-nuke-vs-post-nuke.html#AEN2087"
>PHP-Nuke vs. Post-Nuke</A
>,
    <A
HREF="php-nuke-vs-post-nuke.html#AEN2157"
>PHP-Nuke vs. Post-Nuke</A
>,
    <A
HREF="xoops-vs-post-nuke.html#AEN2252"
>XOOPS vs. Post-Nuke</A
>,
    <A
HREF="xoops-vs-post-nuke.html#AEN2254"
>XOOPS vs. Post-Nuke</A
>
  </DT
><DT
>PostgreSQL,
    <A
HREF="sql-syntax.html#AEN21054"
>The syntax of SQL code</A
>
  </DT
><DT
>PostgreSQL_local,
    <A
HREF="sql-syntax.html#AEN21058"
>The syntax of SQL code</A
>
  </DT
><DT
>posts,
    <A
HREF="bypass-article-approval.html#AEN12746"
>How to bypass article approval</A
>,
    <A
HREF="caching-php-nuke-conclusion.html#AEN17029"
>Caching PHP-Nuke: Conclusion</A
>,
    <A
HREF="proceed-when-mysql-slow.html#AEN18279"
>How to proceed when MySQL is slow</A
>,
    <A
HREF="discordian-calendar.html#AEN20057"
>The Discordian Calendar</A
>
  </DT
><DT
>powered_by_apache.png,
    <A
HREF="preferences.html#AEN7341"
>The Preferences Page </A
>
  </DT
><DT
>Preferences,
    <A
HREF="administration-functions.html#AEN6691"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6838"
>The administration functions</A
>,
    <A
HREF="user-extra-information.html#AEN9651"
>More than 255 characters of user extra information</A
>,
    <A
HREF="adjust-server-time.html#AEN19988"
>How to adjust server time</A
>
  </DT
><DT
>prefix,
    <A
HREF="more-than-one-php-nuke-sites.html#AEN3681"
>Different PHP-Nuke sites from the same database</A
>,
    <A
HREF="more-than-one-php-nuke-sites.html#AEN3686"
>Different PHP-Nuke sites from the same database</A
>,
    <A
HREF="user-extra-information.html#AEN9670"
>More than 255 characters of user extra information</A
>,
    <A
HREF="user-extra-information.html#AEN9672"
>More than 255 characters of user extra information</A
>,
    <A
HREF="module-rules.html#AEN14235"
>Creating fully compatible modules: the rules to follow</A
>,
    <A
HREF="module-rules.html#AEN14237"
>Creating fully compatible modules: the rules to follow</A
>,
    <A
HREF="check-validity-of-web-links.html#AEN19375"
>How to check the validity of thousands of web links</A
>
  </DT
><DT
>preinstall,
    <A
HREF="upload.html#AEN2393"
>Upload through FTP</A
>
  </DT
><DT
>preprocessor,
    <A
HREF="main-page-management.html#AEN9329"
>Main page management</A
>
  </DT
><DT
>presentation,
    <A
HREF="css-syntax.html#AEN20765"
>The syntax of CSS</A
>
  </DT
><DT
>presented,
    <A
HREF="how-sessions-work.html#AEN9479"
>How sessions work in the forums</A
>,
    <A
HREF="php-nuke-copyright-notice.html#AEN10753"
>The PHP-Nuke Copyright notice</A
>
  </DT
><DT
>prevention,
    <A
HREF="upload-add-on-for-phpbb.html#AEN8890"
>Upload add-on for phpBB</A
>
  </DT
><DT
>Preview,
    <A
HREF="history.html#AEN1893"
>Short history of PHP-Nuke</A
>,
    <A
HREF="administration-functions.html#AEN6222"
>The administration functions</A
>
  </DT
><DT
>Prickle-Prickle,
    <A
HREF="discordian-calendar.html#AEN20026"
>The Discordian Calendar</A
>
  </DT
><DT
>printer-friendly,
    <A
HREF="make-dynamic-css.html#AEN18221"
>How to make a dynamic CSS</A
>
  </DT
><DT
>printing,
    <A
HREF="book-behind-book.html#AEN1627"
>The book behind the book</A
>,
    <A
HREF="include-html-file-and-links-in-module-iframe.html#AEN14846"
>How to include a HTML file and its links using an iframe in a PHP-Nuke module</A
>
  </DT
><DT
>privileges,
    <A
HREF="phpmyadmin-other-commands.html#AEN2971"
>phpMyAdmin: other commands</A
>,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3453"
>Apache, PHP and MySQL on Red Hat Linux</A
>
  </DT
><DT
>procedure,
    <A
HREF="installation.html#AEN2269"
>How to install PHP-Nuke</A
>,
    <A
HREF="upload.html#AEN2408"
>Upload through FTP</A
>,
    <A
HREF="install-db.html#AEN3021"
>How to install the DB of PHP-Nuke with PHPMyadmin</A
>,
    <A
HREF="changing-web-hoster.html#AEN5060"
>Changing Web hoster</A
>,
    <A
HREF="administration-functions.html#AEN6539"
>The administration functions</A
>,
    <A
HREF="php-nuke-header-change-logo-dynamic.html#AEN10241"
>How to change the logo's dimensions dynamically</A
>,
    <A
HREF="display-web-links-in-the-same-window.html#AEN12226"
>How to display Web Links in the same window</A
>,
    <A
HREF="register-users-through-ibill.html#AEN12645"
>How to register users through iBill</A
>,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18494"
>How to restore PHP-Nuke from backup</A
>
  </DT
><DT
>profile,
    <A
HREF="preinstalled-modules.html#AEN5717"
>The preinstalled modules</A
>,
    <A
HREF="user-extra-information.html#AEN9653"
>More than 255 characters of user extra information</A
>,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12456"
>How to redirect Your Info to the Forums user profile</A
>,
    <A
HREF="disable-registration.html#AEN12565"
>How to disable registration</A
>,
    <A
HREF="bypass-article-approval.html#AEN12795"
>The formatAidHeader() function</A
>,
    <A
HREF="cross-site-scripting-with-php-nuke.html#AEN15519"
>Cross-site scripting with PHP-Nuke</A
>,
    <A
HREF="googletap.html#AEN18067"
>How it works</A
>
  </DT
><DT
>programmer,
    <A
HREF="security-audit.html#AEN16025"
>Security audit</A
>
  </DT
><DT
>project,
    <A
HREF="aknowledgements.html#AEN1293"
>Aknowledgements</A
>,
    <A
HREF="history.html#AEN1904"
>Short history of PHP-Nuke</A
>
  </DT
><DT
>Protector,
    <A
HREF="php-nuke-ip-tracking-module.html#AEN8382"
>IP Tracking module</A
>
  </DT
><DT
>protocol,
    <A
HREF="login-loop.html#AEN4327"
>Login loop</A
>,
    <A
HREF="php-nuke-header-change-logo-dynamic.html#AEN10237"
>How to change the logo's dimensions dynamically</A
>
  </DT
><DT
>provider,
    <A
HREF="upload.html#AEN2361"
>Upload through FTP</A
>
  </DT
><DT
>proxies,
    <A
HREF="how-sessions-work.html#AEN9456"
>How sessions work in the forums</A
>
  </DT
><DT
>Pruning,
    <A
HREF="phpbb-forum-administration.html#AEN7050"
>phpBB Forum administration</A
>
  </DT
><DT
>punctuation,
    <A
HREF="security-audit.html#AEN16031"
>Security audit</A
>
  </DT
><DT
>Python,
    <A
HREF="apache2triad.html#AEN3293"
>Apache2Triad</A
>
  </DT
><DT
>Pà.,
    <A
HREF="aknowledgements.html#AEN1351"
>Aknowledgements</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN25727"
>Q</A
></H2
><DL
><DT
>queries,
    <A
HREF="module-admin.html#AEN14475"
>Module creation, administrator part</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15627"
>SQL injection with PHP-Nuke</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15647"
>SQL injection with PHP-Nuke</A
>,
    <A
HREF="security-audit.html#AEN16085"
>Security audit</A
>,
    <A
HREF="restore-single-table.html#AEN18538"
>How to restore a single table</A
>
  </DT
><DT
>Query,
    <A
HREF="phpmyadmin2.html#AEN2758"
>phpMyAdmin: How to administer MySQL via Web</A
>,
    <A
HREF="cannot-create-administrator-account.html#AEN4450"
>You cannot create the administrator account</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15605"
>SQL injection with PHP-Nuke</A
>,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18477"
>How to restore PHP-Nuke from backup</A
>,
    <A
HREF="restore-single-table.html#AEN18533"
>How to restore a single table</A
>,
    <A
HREF="enter-thousands-of-ephemerids.html#AEN19459"
>How to enter thousands of ephemerids</A
>,
    <A
HREF="make-encyclopedia-international.html#AEN19540"
>How to make the Encyclopedia international</A
>,
    <A
HREF="sql-syntax.html#AEN21090"
>The syntax of SQL code</A
>
  </DT
><DT
>query.php,
    <A
HREF="find-last-date.html#AEN19707"
>How to find the last date of...</A
>,
    <A
HREF="find-last-date.html#AEN19709"
>How to find the last date of...</A
>
  </DT
><DT
>quotas,
    <A
HREF="php-nuke-upload-module.html#AEN8808"
>Upload module</A
>
  </DT
><DT
>quote,
    <A
HREF="php-nuke-vs-post-nuke.html#AEN2139"
>PHP-Nuke vs. Post-Nuke</A
>,
    <A
HREF="javascript-php.html#AEN14915"
>Javascript functions in javascript.php</A
>
  </DT
><DT
>quotes,
    <A
HREF="config-php-file.html#AEN3655"
>The config.php file</A
>,
    <A
HREF="allow-html-newsletter.html#AEN13055"
>How to allow HTML in the Newsletter</A
>,
    <A
HREF="paypal-block-for-php-nuke.html#AEN14072"
>How to display HTML forms in a block: Paypal</A
>,
    <A
HREF="javascript-php.html#AEN14911"
>Javascript functions in javascript.php</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15580"
>SQL injection with PHP-Nuke</A
>,
    <A
HREF="html-insert-image.html#AEN20711"
>How to insert an image in HTML</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN25765"
>R</A
></H2
><DL
><DT
>Radio,
    <A
HREF="whatis-phpnuke.html#AEN1804"
>What Is PHP-Nuke</A
>,
    <A
HREF="php-nuke-ecommerce-module.html#AEN9009"
>eCommerce module</A
>
  </DT
><DT
>random,
    <A
HREF="backend.html#AEN6140"
>Back end structure: administrator view</A
>
  </DT
><DT
>range,
    <A
HREF="php-nuke-protector-module.html#AEN8398"
>Protector module</A
>,
    <A
HREF="how-sessions-work.html#AEN9460"
>How sessions work in the forums</A
>
  </DT
><DT
>rank,
    <A
HREF="phpbb-forum-administration.html#AEN7198"
>phpBB Forum administration</A
>
  </DT
><DT
>Ranks,
    <A
HREF="test-scripts.html#AEN3899"
>analyze.php</A
>,
    <A
HREF="administration-functions.html#AEN6701"
>The administration functions</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7194"
>phpBB Forum administration</A
>
  </DT
><DT
>RDF,
    <A
HREF="administration-functions.html#AEN6363"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6425"
>The administration functions</A
>,
    <A
HREF="block-types.html#AEN13117"
>The characteristics of the various types of blocks</A
>
  </DT
><DT
>readme,
    <A
HREF="php-nuke-event-calendar-module.html#AEN8047"
>Event calendar</A
>
  </DT
><DT
>ready-to-use,
    <A
HREF="install-php-nuke-locally.html#AEN3116"
>How to install PHP-Nuke locally</A
>
  </DT
><DT
>rebuild,
    <A
HREF="repair-corrupt-table.html#AEN18363"
>How to repair a corrupt table</A
>
  </DT
><DT
>recipes,
    <A
HREF="php-nuke-header-change-banner-placement.html#AEN10272"
>How to change placement of the banner in the PHP-Nuke header</A
>
  </DT
><DT
>RedHat,
    <A
HREF="xampp.html#AEN3230"
>XAMPP</A
>
  </DT
><DT
>redirect,
    <A
HREF="regular-expressions.html#AEN17514"
>Regular expressions</A
>
  </DT
><DT
>redirection,
    <A
HREF="redirect-users-to-login-and-back.html#AEN12509"
>How to redirect users to Login and back</A
>
  </DT
><DT
>referers,
    <A
HREF="preinstalled-blocks.html#AEN6078"
>The preinstalled blocks</A
>,
    <A
HREF="administration-functions.html#AEN6718"
>The administration functions</A
>,
    <A
HREF="preferences.html#AEN7434"
>The Preferences Page </A
>
  </DT
><DT
>referrals,
    <A
HREF="search-engines-and-get-method.html#AEN17166"
>Search engines and the GET method</A
>
  </DT
><DT
>Refresh,
    <A
HREF="upload.html#AEN2453"
>Upload through FTP</A
>,
    <A
HREF="compressed-output-in-forums.html#AEN4567"
>Compressed output in forums</A
>
  </DT
><DT
>registered,
    <A
HREF="preinstalled-modules.html#AEN5575"
>The preinstalled modules</A
>,
    <A
HREF="administration-functions.html#AEN6796"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6798"
>The administration functions</A
>,
    <A
HREF="php-nuke-upload-module.html#AEN8776"
>Upload module</A
>,
    <A
HREF="find-user-name.html#AEN19561"
>How to find the user name in a module</A
>,
    <A
HREF="php-functions.html#AEN20970"
>Functions</A
>
  </DT
><DT
>register_globals,
    <A
HREF="security-measures.html#AEN15975"
>Security measures </A
>
  </DT
><DT
>registration,
    <A
HREF="mail-problems.html#AEN4303"
>Users don't receive any confirmation mails</A
>,
    <A
HREF="mail-problems.html#AEN4306"
>Users don't receive any confirmation mails</A
>,
    <A
HREF="php-nuke-approve-membership-module.html#AEN8208"
>Approve Membership module</A
>,
    <A
HREF="php-nuke-module-texts.html#AEN9754"
>PHP-Nuke module texts</A
>,
    <A
HREF="php-nuke-module-texts.html#AEN9763"
>PHP-Nuke module texts</A
>,
    <A
HREF="disable-registration.html#AEN12579"
>How to disable registration</A
>,
    <A
HREF="register-users-immediately.html#AEN12611"
>How to let users register immediately</A
>,
    <A
HREF="register-users-immediately.html#AEN12614"
>How to let users register immediately</A
>,
    <A
HREF="approve-users.html#AEN12627"
>How to approve users before registration</A
>,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18456"
>How to restore PHP-Nuke from backup</A
>,
    <A
HREF="find-all-registration-links.html#AEN18747"
>How to find all registration links</A
>
  </DT
><DT
>regular-expression,
    <A
HREF="mod_rewrite.html#AEN17213"
>mod_rewrite</A
>
  </DT
><DT
>reinstall,
    <A
HREF="empty-page-in-windows.html#AEN4632"
>In Windows, you get an empty page</A
>
  </DT
><DT
>REMOTE_ADDR,
    <A
HREF="how-sessions-work.html#AEN9462"
>How sessions work in the forums</A
>
  </DT
><DT
>REPAIR,
    <A
HREF="make-encyclopedia-international.html#AEN19510"
>How to make the Encyclopedia international</A
>
  </DT
><DT
>repair.php,
    <A
HREF="proceed-when-mysql-slow.html#AEN18263"
>How to proceed when MySQL is slow</A
>
  </DT
><DT
>requirements,
    <A
HREF="prerequisites.html#AEN2294"
>Prerequisites</A
>,
    <A
HREF="treemenu-block.html#AEN11779"
>The general idea </A
>,
    <A
HREF="googletap.html#AEN17698"
>Requirements</A
>
  </DT
><DT
>rescue,
    <A
HREF="change-php-parameters.html#AEN19109"
>How to change PHP parameters when you don't have access to php.ini</A
>
  </DT
><DT
>response,
    <A
HREF="preinstalled-modules.html#AEN5846"
>The preinstalled modules</A
>,
    <A
HREF="php-nuke-treemenu-with-javascript.html#AEN7788"
>Treemenu with Javascript</A
>,
    <A
HREF="how-sessions-work.html#AEN9512"
>How sessions work in the forums</A
>,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15707"
>Cross-site tracing with PHP-Nuke</A
>,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15735"
>Cross-site tracing with PHP-Nuke</A
>,
    <A
HREF="optimizing-php-nuke.html#AEN17066"
>Optimizing PHP-Nuke </A
>
  </DT
><DT
>restart,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3486"
>Apache, PHP and MySQL on Red Hat Linux</A
>
  </DT
><DT
>restore,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18410"
>How to restore PHP-Nuke from backup</A
>
  </DT
><DT
>reviews,
    <A
HREF="preinstalled-modules.html#AEN5451"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5648"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-blocks.html#AEN6093"
>The preinstalled blocks</A
>,
    <A
HREF="administration-functions.html#AEN6860"
>The administration functions</A
>,
    <A
HREF="multipage-news-articles.html#AEN10517"
>How to get multipage News articles</A
>,
    <A
HREF="allow-only-registered-users-to-review.html#AEN12168"
>How to allow only registered users to enter a review</A
>,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12435"
>How to redirect Your Info to the Forums user profile</A
>,
    <A
HREF="database-tables.html#AEN20471"
>The database tables </A
>,
    <A
HREF="database-tables.html#AEN20485"
>The database tables </A
>,
    <A
HREF="database-tables.html#AEN20491"
>The database tables </A
>
  </DT
><DT
>rewrite,
    <A
HREF="credits-general.html#AEN1245"
>General</A
>,
    <A
HREF="history.html#AEN1887"
>Short history of PHP-Nuke</A
>,
    <A
HREF="directory-structure.html#AEN9202"
>Directory structure </A
>,
    <A
HREF="search-engines-and-get-method.html#AEN17205"
>Search engines and the GET method</A
>,
    <A
HREF="mod_rewrite-api-phases.html#AEN17280"
>API phases</A
>,
    <A
HREF="mod_rewrite-regex-backreferences.html#AEN17379"
>Regex backreference availability</A
>,
    <A
HREF="regular-expressions.html#AEN17521"
>Regular expressions</A
>,
    <A
HREF="regular-expressions.html#AEN17544"
>Regular expressions</A
>,
    <A
HREF="googletap.html#AEN18109"
>How it works</A
>
  </DT
><DT
>risk,
    <A
HREF="permissions2.html#AEN16159"
>Permissions on folders and files</A
>
  </DT
><DT
>robots,
    <A
HREF="directory-structure.html#AEN9182"
>Directory structure </A
>,
    <A
HREF="directory-structure.html#AEN9186"
>Directory structure </A
>,
    <A
HREF="directory-structure.html#AEN9192"
>Directory structure </A
>,
    <A
HREF="directory-structure.html#AEN9198"
>Directory structure </A
>,
    <A
HREF="directory-structure.html#AEN9200"
>Directory structure </A
>
  </DT
><DT
>root,
    <A
HREF="mandrake-linux-apache-php-mysql.html#AEN3366"
>Apache, PHP and MySQL on Mandrake Linux</A
>,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3443"
>Apache, PHP and MySQL on Red Hat Linux</A
>,
    <A
HREF="transferring-local-installation-to-web.html#AEN5029"
>Transferring a local installation to the Web</A
>,
    <A
HREF="php-nuke-workboard-module.html#AEN9050"
>WorkBoard Module</A
>,
    <A
HREF="php-nuke-copyright-notice.html#AEN10740"
>The PHP-Nuke Copyright notice</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13547"
>How to create a Help Center Live block</A
>,
    <A
HREF="permissions2.html#AEN16151"
>Permissions on folders and files</A
>,
    <A
HREF="turck-mmcache.html#AEN16879"
>Installation of Turck MMCache</A
>,
    <A
HREF="googletap.html#AEN17714"
>Requirements</A
>,
    <A
HREF="change-php-parameters.html#AEN19093"
>How to change PHP parameters when you don't have access to php.ini</A
>,
    <A
HREF="change-php-parameters.html#AEN19119"
>How to change PHP parameters when you don't have access to php.ini</A
>,
    <A
HREF="foxserv.html#AEN21191"
>Foxserv, making PHP-Nuke work on Windows Systems</A
>
  </DT
><DT
>RPMdrake,
    <A
HREF="mandrake-linux-apache-php-mysql.html#AEN3324"
>Apache, PHP and MySQL on Mandrake Linux</A
>
  </DT
><DT
>RSS,
    <A
HREF="preinstalled-modules.html#AEN5723"
>The preinstalled modules</A
>,
    <A
HREF="administration-functions.html#AEN6382"
>The administration functions</A
>
  </DT
><DT
>Rule,
    <A
HREF="module-rules.html#AEN14225"
>Creating fully compatible modules: the rules to follow</A
>,
    <A
HREF="module-rules.html#AEN14229"
>Creating fully compatible modules: the rules to follow</A
>,
    <A
HREF="module-rules.html#AEN14243"
>Creating fully compatible modules: the rules to follow</A
>,
    <A
HREF="module-rules.html#AEN14249"
>Creating fully compatible modules: the rules to follow</A
>,
    <A
HREF="regular-expressions.html#AEN17499"
>Regular expressions</A
>
  </DT
><DT
>rule-looping,
    <A
HREF="mod_rewrite-ruleset-processing.html#AEN17333"
>Ruleset processing</A
>
  </DT
><DT
>rules,
    <A
HREF="example-creation-html-template.html#AEN10058"
>Example creation of HTML file to include in the theme</A
>,
    <A
HREF="create-hello-world-block.html#AEN13449"
>How to create a Hello World block</A
>,
    <A
HREF="module-rules.html#AEN14216"
>Creating fully compatible modules: the rules to follow</A
>,
    <A
HREF="module-rules.html#AEN14219"
>Creating fully compatible modules: the rules to follow</A
>,
    <A
HREF="javascript-php.html#AEN14895"
>Javascript functions in javascript.php</A
>,
    <A
HREF="css-syntax.html#AEN20768"
>The syntax of CSS</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN25957"
>S</A
></H2
><DL
><DT
>Sand_Journey,
    <A
HREF="change-home-module.html#AEN18999"
>How to change the Home module</A
>
  </DT
><DT
>sanitize,
    <A
HREF="security-audit.html#AEN16027"
>Security audit</A
>
  </DT
><DT
>scheme,
    <A
HREF="preinstalled-modules.html#AEN5485"
>The preinstalled modules</A
>,
    <A
HREF="admin-management.html#AEN9415"
>Administration management </A
>,
    <A
HREF="module-admin.html#AEN14425"
>Module creation, administrator part</A
>
  </DT
><DT
>score,
    <A
HREF="preinstalled-modules.html#AEN5350"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5604"
>The preinstalled modules</A
>
  </DT
><DT
>scrapping,
    <A
HREF="php-nuke-comic-block.html#AEN7671"
>Comic block</A
>,
    <A
HREF="display-images-php-nuke-blocks.html#AEN13904"
>How to display images in PHP-Nuke blocks</A
>
  </DT
><DT
>scratch,
    <A
HREF="how-secure-is-php-nuke.html#AEN15218"
>How secure is PHP-Nuke?</A
>,
    <A
HREF="cache-lite.html#AEN16748"
>How to use Cache-Lite</A
>
  </DT
><DT
>screen,
    <A
HREF="upload.html#AEN2424"
>Upload through FTP</A
>,
    <A
HREF="easyphp.html#AEN3155"
>easyPHP</A
>,
    <A
HREF="easyphp.html#AEN3173"
>easyPHP</A
>,
    <A
HREF="administration-functions.html#AEN6606"
>The administration functions</A
>
  </DT
><DT
>script kiddie,
    <A
HREF="cookies.html#AEN16220"
>Cookie hijack</A
>
  </DT
><DT
>scripting,
    <A
HREF="administration-functions.html#AEN6974"
>The administration functions</A
>,
    <A
HREF="nsn-your-account-tweak-module.html#AEN8089"
>NSN Your Account Tweak module</A
>,
    <A
HREF="cross-site-scripting-with-php-nuke.html#AEN15546"
>Cross-site scripting with PHP-Nuke</A
>
  </DT
><DT
>scrutiny,
    <A
HREF="get-rid-of-br-in-news.html#AEN12689"
>How to get rid of the need to use &#60;br&#62; for new lines</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15582"
>SQL injection with PHP-Nuke</A
>
  </DT
><DT
>search,
    <A
HREF="preinstalled-modules.html#AEN5663"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-blocks.html#AEN6068"
>The preinstalled blocks</A
>,
    <A
HREF="search-engines-and-get-method.html#AEN17189"
>Search engines and the GET method</A
>,
    <A
HREF="search-engines-and-get-method.html#AEN17196"
>Search engines and the GET method</A
>,
    <A
HREF="make-php-nuke-search-engine-friendly.html#AEN17640"
>How to make PHP-Nuke search engine friendly</A
>
  </DT
><DT
>seconds,
    <A
HREF="jpcache.html#AEN16599"
>How to use jpcache</A
>,
    <A
HREF="cache-lite.html#AEN16706"
>How to use Cache-Lite</A
>,
    <A
HREF="turck-mmcache.html#AEN16985"
>How to use Turck MMCache</A
>,
    <A
HREF="turck-mmcache.html#AEN16994"
>How to use Turck MMCache</A
>,
    <A
HREF="change-php-parameters.html#AEN19138"
>How to change PHP parameters when you don't have access to php.ini</A
>,
    <A
HREF="adjust-server-time.html#AEN19993"
>How to adjust server time</A
>
  </DT
><DT
>Sections,
    <A
HREF="credits-version-2.0.html#AEN586"
>Version 2.0</A
>,
    <A
HREF="credits-version-2.0.html#AEN940"
>Version 2.0</A
>,
    <A
HREF="credits-version-2.1.html#AEN1230"
>Version 2.1</A
>,
    <A
HREF="preinstalled-modules.html#AEN5476"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-blocks.html#AEN6100"
>The preinstalled blocks</A
>,
    <A
HREF="administration-functions.html#AEN6880"
>The administration functions</A
>,
    <A
HREF="change-php-nuke-theme-depending-on-module.html#AEN10931"
>How to change the PHP-Nuke theme depending on the module</A
>,
    <A
HREF="change-php-nuke-theme-depending-on-module.html#AEN10940"
>How to change the PHP-Nuke theme depending on the module</A
>,
    <A
HREF="order-articles-in-sections.html#AEN12834"
>How to order the articles in the Sections module</A
>,
    <A
HREF="googletap.html#AEN17826"
>Installation</A
>
  </DT
><DT
>security,
    <A
HREF="communities.html#AEN1957"
>The PHP-Nuke Communities</A
>,
    <A
HREF="php-nuke-vs-post-nuke.html#AEN2163"
>PHP-Nuke vs. Post-Nuke</A
>,
    <A
HREF="security-code.html#AEN4219"
>How to bypass the security code</A
>,
    <A
HREF="preferences.html#AEN7475"
>The Preferences Page </A
>,
    <A
HREF="how-secure-is-php-nuke.html#AEN15280"
>How secure is PHP-Nuke?</A
>,
    <A
HREF="how-secure-is-php-nuke.html#AEN15286"
>How secure is PHP-Nuke?</A
>,
    <A
HREF="how-secure-is-php-nuke.html#AEN15288"
>How secure is PHP-Nuke?</A
>,
    <A
HREF="guard-security-vulnerabilities-in-php-nuke.html#AEN15784"
>How to guard against security vulnerabilities in PHP-Nuke</A
>,
    <A
HREF="security-measures.html#AEN15890"
>Security measures </A
>,
    <A
HREF="htaccess-file.html#AEN17601"
>The .htaccess file</A
>,
    <A
HREF="find-last-date.html#AEN19719"
>How to find the last date of...</A
>
  </DT
><DT
>sedscr,
    <A
HREF="javascript-in-php-nuke-blocks.html#AEN13413"
>How to use Javascript in PHP-Nuke blocks</A
>,
    <A
HREF="display-html-code-in-faq.html#AEN19181"
>How to display HTML code in a FAQ</A
>
  </DT
><DT
>sedscr_downloads,
    <A
HREF="enter-thousands-of-web-links.html#AEN19226"
>How to enter thousands of web links</A
>
  </DT
><DT
>selector,
    <A
HREF="change-font-size-php-nuke.html#AEN11055"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11066"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11086"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11088"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11092"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11122"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="css-syntax.html#AEN20823"
>The syntax of CSS</A
>,
    <A
HREF="css-syntax.html#AEN20886"
>The syntax of CSS</A
>,
    <A
HREF="css-syntax.html#AEN20889"
>The syntax of CSS</A
>
  </DT
><DT
>sendmail,
    <A
HREF="security-record-software-popularity.html#AEN15313"
>The impact of bad security record on software popularity </A
>,
    <A
HREF="security-record-software-popularity.html#AEN15315"
>The impact of bad security record on software popularity </A
>,
    <A
HREF="security-record-software-popularity.html#AEN15317"
>The impact of bad security record on software popularity </A
>,
    <A
HREF="security-record-software-popularity.html#AEN15321"
>The impact of bad security record on software popularity </A
>
  </DT
><DT
>series,
    <A
HREF="change-order-of-messages.html#AEN11601"
>How to change the order of messages</A
>,
    <A
HREF="search-engines-and-dynamic-urls.html#AEN17127"
>Search engines and dynamic URLs</A
>
  </DT
><DT
>server,
    <A
HREF="whatis-phpnuke.html#AEN1798"
>What Is PHP-Nuke</A
>,
    <A
HREF="whatis-phpnuke.html#AEN1850"
>What Is PHP-Nuke</A
>,
    <A
HREF="upload.html#AEN2376"
>Upload through FTP</A
>,
    <A
HREF="upload.html#AEN2442"
>Upload through FTP</A
>,
    <A
HREF="upload.html#AEN2451"
>Upload through FTP</A
>,
    <A
HREF="permissions.html#AEN2494"
>File permissions</A
>,
    <A
HREF="install-phpmyadmin.html#AEN2679"
>How to install phpMyAdmin</A
>,
    <A
HREF="install-phpmyadmin.html#AEN2687"
>How to install phpMyAdmin</A
>,
    <A
HREF="phpmyadmin-navigation-bar-sql.html#AEN2832"
>phpMyAdmin navigation bar: SQL</A
>,
    <A
HREF="more-than-one-php-nuke-sites.html#AEN3678"
>Different PHP-Nuke sites from the same database</A
>,
    <A
HREF="mail-problems.html#AEN4281"
>Users don't receive any confirmation mails</A
>,
    <A
HREF="mail-problems.html#AEN4283"
>Users don't receive any confirmation mails</A
>,
    <A
HREF="mail-problems.html#AEN4293"
>Users don't receive any confirmation mails</A
>,
    <A
HREF="garbage-on-page.html#AEN4540"
>You get garbage in some parts of the page</A
>,
    <A
HREF="forums-cant-create-category-without-name.html#AEN4802"
>Forums Error: Can't create a category without a name</A
>,
    <A
HREF="preferences.html#AEN7281"
>The Preferences Page </A
>,
    <A
HREF="php-nuke-treemenu-with-php.html#AEN7761"
>Treemenu with PHP</A
>,
    <A
HREF="display-random-images-php-nuke-blocks.html#AEN13964"
>How to display random images in PHP-Nuke blocks</A
>,
    <A
HREF="include-html-file-and-links-in-module.html#AEN14754"
>How to include a HTML file and its links in a PHP-Nuke module</A
>,
    <A
HREF="how-secure-is-php-nuke.html#AEN15252"
>How secure is PHP-Nuke?</A
>,
    <A
HREF="path-disclosure-with-php-nuke.html#AEN15662"
>Path disclosure with PHP-Nuke</A
>,
    <A
HREF="path-disclosure-with-php-nuke.html#AEN15671"
>Path disclosure with PHP-Nuke</A
>,
    <A
HREF="security-measures.html#AEN15908"
>Security measures </A
>,
    <A
HREF="security-measures.html#AEN15919"
>Security measures </A
>,
    <A
HREF="cache-lite.html#AEN16702"
>How to use Cache-Lite</A
>,
    <A
HREF="turck-mmcache.html#AEN16867"
>Turck MMCache</A
>,
    <A
HREF="turck-mmcache.html#AEN16916"
>Installation of Turck MMCache</A
>,
    <A
HREF="turck-mmcache.html#AEN16933"
>Configuration of Turck MMCache</A
>,
    <A
HREF="caching-php-nuke-conclusion.html#AEN17035"
>Caching PHP-Nuke: Conclusion</A
>,
    <A
HREF="caching-php-nuke-conclusion.html#AEN17045"
>Caching PHP-Nuke: Conclusion</A
>,
    <A
HREF="mod_rewrite.html#AEN17211"
>mod_rewrite</A
>,
    <A
HREF="mod_rewrite.html#AEN17215"
>mod_rewrite</A
>,
    <A
HREF="htaccess-file.html#AEN17556"
>The .htaccess file</A
>,
    <A
HREF="htaccess-file.html#AEN17578"
>The .htaccess file</A
>,
    <A
HREF="htaccess-file.html#AEN17608"
>The .htaccess file</A
>,
    <A
HREF="googletap.html#AEN18119"
>How it works</A
>,
    <A
HREF="make-php-nuke-hot-link-stealth.html#AEN18155"
>How to make PHP-Nuke hot link stealth</A
>,
    <A
HREF="change-php-parameters.html#AEN19095"
>How to change PHP parameters when you don't have access to php.ini</A
>,
    <A
HREF="make-encyclopedia-international.html#AEN19503"
>How to make the Encyclopedia international</A
>,
    <A
HREF="adjust-server-time.html#AEN19837"
>How to adjust server time</A
>,
    <A
HREF="adjust-server-time.html#AEN19858"
>How to adjust server time</A
>,
    <A
HREF="html-create-link.html#AEN20659"
>How to create a link in HTML</A
>,
    <A
HREF="foxserv.html#AEN21167"
>Foxserv, making PHP-Nuke work on Windows Systems</A
>,
    <A
HREF="foxserv.html#AEN21177"
>Foxserv, making PHP-Nuke work on Windows Systems</A
>
  </DT
><DT
>SERVER_PORT,
    <A
HREF="php-nuke-under-ssl.html#AEN19076"
>How to use PHP-Nuke under SSL</A
>
  </DT
><DT
>services,
    <A
HREF="red-hat-linux-apache-php-mysql.html#AEN3468"
>Apache, PHP and MySQL on Red Hat Linux</A
>,
    <A
HREF="preinstalled-blocks.html#AEN5997"
>The preinstalled blocks</A
>
  </DT
><DT
>session,
    <A
HREF="phpmyadmin-other-commands.html#AEN2979"
>phpMyAdmin: other commands</A
>,
    <A
HREF="upload-add-on-for-phpbb.html#AEN8838"
>Upload add-on for phpBB</A
>,
    <A
HREF="how-sessions-work.html#AEN9440"
>How sessions work in the forums</A
>,
    <A
HREF="how-sessions-work.html#AEN9449"
>How sessions work in the forums</A
>,
    <A
HREF="how-sessions-work.html#AEN9470"
>How sessions work in the forums</A
>,
    <A
HREF="how-sessions-work.html#AEN9524"
>How sessions work in the forums</A
>,
    <A
HREF="how-sessions-work.html#AEN9528"
>How sessions work in the forums</A
>,
    <A
HREF="eliminate-session-checks.html#AEN9558"
>How to eliminate session checks</A
>,
    <A
HREF="how-to-include-files.html#AEN13304"
>How to include PHP/HTML files in a PHP-Nuke block</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13531"
>How to create a Help Center Live block</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13790"
>How to create a Help Center Live block</A
>,
    <A
HREF="search-engines-and-get-method.html#AEN17152"
>Search engines and the GET method</A
>,
    <A
HREF="foxserv.html#AEN21203"
>Foxserv, making PHP-Nuke work on Windows Systems</A
>
  </DT
><DT
>sessions.php,
    <A
HREF="googletap.html#AEN17806"
>Installation</A
>
  </DT
><DT
>session_id,
    <A
HREF="how-sessions-work.html#AEN9447"
>How sessions work in the forums</A
>,
    <A
HREF="how-sessions-work.html#AEN9544"
>How sessions work in the forums</A
>
  </DT
><DT
>settings,
    <A
HREF="test-scripts.html#AEN3879"
>analyze.php</A
>,
    <A
HREF="test-scripts.html#AEN3883"
>analyze.php</A
>,
    <A
HREF="test-scripts.html#AEN3905"
>analyze.php</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7104"
>phpBB Forum administration</A
>,
    <A
HREF="set-arbitrary-stories-number-in-home.html#AEN13014"
>How to set an arbitrary "Stories Number in Home"</A
>,
    <A
HREF="cache-lite.html#AEN16710"
>How to use Cache-Lite</A
>,
    <A
HREF="adjust-server-time.html#AEN19839"
>How to adjust server time</A
>,
    <A
HREF="deal-with-quotes-in-sitename.html#AEN20088"
>How to deal with quotes in the site's name</A
>,
    <A
HREF="deal-with-quotes-in-sitename.html#AEN20094"
>How to deal with quotes in the site's name</A
>
  </DT
><DT
>setup,
    <A
HREF="easyphp.html#AEN3126"
>easyPHP</A
>,
    <A
HREF="administration-functions.html#AEN6395"
>The administration functions</A
>
  </DT
><DT
>SGML,
    <A
HREF="book-behind-book.html#AEN1636"
>The book behind the book</A
>,
    <A
HREF="translate-php-nuke-howto.html#AEN1724"
>How to translate this HOWTO</A
>
  </DT
><DT
>shell,
    <A
HREF="mysql-errno-145.html#AEN4684"
>MySQL errno: 145: Can't open file nuke_XXXX.MYI</A
>,
    <A
HREF="repair-corrupt-table.html#AEN18380"
>How to repair a corrupt table</A
>
  </DT
><DT
>showpage,
    <A
HREF="php-switches.html#AEN20985"
>Switches</A
>
  </DT
><DT
>sid,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12392"
>How to redirect Your Info to the Forums user profile</A
>
  </DT
><DT
>sign,
    <A
HREF="main-page-management.html#AEN9331"
>Main page management</A
>,
    <A
HREF="example-creation-html-template.html#AEN10051"
>Example creation of HTML file to include in the theme</A
>,
    <A
HREF="urls-longer-than-100-characters.html#AEN12873"
>How to add URLs longer than 100 characters in Downloads and Web Links</A
>
  </DT
><DT
>Slash,
    <A
HREF="history.html#AEN1873"
>Short history of PHP-Nuke</A
>,
    <A
HREF="php-nuke-header-insert-slashocean-search-box.html#AEN10163"
>How to insert a Search Box as in SlashOcean theme</A
>
  </DT
><DT
>SlashOcean,
    <A
HREF="php-nuke-header-insert-slashocean-search-box.html#AEN10159"
>How to insert a Search Box as in SlashOcean theme</A
>
  </DT
><DT
>Slogan,
    <A
HREF="preferences.html#AEN7235"
>The Preferences Page </A
>
  </DT
><DT
>sophisticated,
    <A
HREF="php-nuke-module-texts.html#AEN9768"
>PHP-Nuke module texts</A
>,
    <A
HREF="bypass-article-approval.html#AEN12806"
>The formatAidHeader() function</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13539"
>How to create a Help Center Live block</A
>
  </DT
><DT
>sorting,
    <A
HREF="make-encyclopedia-international.html#AEN19494"
>How to make the Encyclopedia international</A
>
  </DT
><DT
>sources,
    <A
HREF="preinstalled-modules.html#AEN5725"
>The preinstalled modules</A
>,
    <A
HREF="guard-security-vulnerabilities-in-php-nuke.html#AEN15786"
>How to guard against security vulnerabilities in PHP-Nuke</A
>
  </DT
><DT
>space,
    <A
HREF="forums-cant-create-category-without-name.html#AEN4762"
>Forums Error: Can't create a category without a name</A
>,
    <A
HREF="forums-cant-create-category-without-name.html#AEN4768"
>Forums Error: Can't create a category without a name</A
>,
    <A
HREF="forums-cant-create-category-without-name.html#AEN4798"
>Forums Error: Can't create a category without a name</A
>,
    <A
HREF="transferring-local-installation-to-web.html#AEN5026"
>Transferring a local installation to the Web</A
>,
    <A
HREF="turck-mmcache.html#AEN16926"
>Configuration of Turck MMCache</A
>,
    <A
HREF="correct-thousands-of-users-fields.html#AEN19572"
>How to correct thousands of users fields</A
>
  </DT
><DT
>speed,
    <A
HREF="jpcache.html#AEN16601"
>How to use jpcache</A
>
  </DT
><DT
>spider,
    <A
HREF="search-engines-and-get-method.html#AEN17191"
>Search engines and the GET method</A
>
  </DT
><DT
>spiders,
    <A
HREF="make-php-nuke-search-engine-friendly.html#AEN17642"
>How to make PHP-Nuke search engine friendly</A
>
  </DT
><DT
>SQL,
    <A
HREF="phpmyadmin2.html#AEN2746"
>phpMyAdmin: How to administer MySQL via Web</A
>,
    <A
HREF="phpmyadmin-navigation-bar-sql.html#AEN2830"
>phpMyAdmin navigation bar: SQL</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15567"
>SQL injection with PHP-Nuke</A
>
  </DT
><DT
>SSL,
    <A
HREF="php-nuke-under-ssl.html#AEN19043"
>How to use PHP-Nuke under SSL</A
>,
    <A
HREF="php-nuke-under-ssl.html#AEN19058"
>How to use PHP-Nuke under SSL</A
>
  </DT
><DT
>SSLCert,
    <A
HREF="apache2triad.html#AEN3296"
>Apache2Triad</A
>
  </DT
><DT
>standards,
    <A
HREF="html-insert-image.html#AEN20709"
>How to insert an image in HTML</A
>
  </DT
><DT
>statements,
    <A
HREF="phpmyadmin-navigation-bar-sql.html#AEN2846"
>phpMyAdmin navigation bar: SQL</A
>,
    <A
HREF="module-admin.html#AEN14514"
>Module creation, administrator part</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15558"
>SQL injection with PHP-Nuke</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15561"
>SQL injection with PHP-Nuke</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15565"
>SQL injection with PHP-Nuke</A
>
  </DT
><DT
>Statistics,
    <A
HREF="preinstalled-modules.html#AEN5571"
>The preinstalled modules</A
>,
    <A
HREF="preferences.html#AEN7241"
>The Preferences Page </A
>,
    <A
HREF="preferences.html#AEN7438"
>The Preferences Page </A
>,
    <A
HREF="googletap.html#AEN17830"
>Installation</A
>,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18454"
>How to restore PHP-Nuke from backup</A
>
  </DT
><DT
>steps,
    <A
HREF="upgrade-php-nuke.html#AEN4853"
>How to upgrade PHP-Nuke</A
>,
    <A
HREF="check-validity-of-web-links.html#AEN19363"
>How to check the validity of thousands of web links</A
>
  </DT
><DT
>stolen,
    <A
HREF="cookies.html#AEN16252"
>Cookie hijack</A
>
  </DT
><DT
>strings,
    <A
HREF="javascript-in-php-nuke-blocks.html#AEN13384"
>How to use Javascript in PHP-Nuke blocks</A
>,
    <A
HREF="mod_rewrite-quoting-special-characters.html#AEN17346"
>Quoting special characters</A
>
  </DT
><DT
>strip,
    <A
HREF="display-images-php-nuke-blocks.html#AEN13892"
>How to display images in PHP-Nuke blocks</A
>
  </DT
><DT
>structure,
    <A
HREF="phpmyadmin2.html#AEN2742"
>phpMyAdmin: How to administer MySQL via Web</A
>,
    <A
HREF="changing-web-hoster.html#AEN5091"
>Changing Web hoster</A
>,
    <A
HREF="php-nuke-autotheme.html#AEN7544"
>AutoTheme</A
>,
    <A
HREF="get-rid-of-br-in-news.html#AEN12694"
>How to get rid of the need to use &#60;br&#62; for new lines</A
>,
    <A
HREF="include-plain-text-file-in-module.html#AEN14859"
>How to include a plain text file in a PHP-Nuke module</A
>,
    <A
HREF="php-functions.html#AEN20956"
>Functions</A
>
  </DT
><DT
>style sheets,
    <A
HREF="whatis-phpnuke.html#AEN1810"
>What Is PHP-Nuke</A
>
  </DT
><DT
>style.css,
    <A
HREF="change-font-size-php-nuke.html#AEN10958"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="css-syntax.html#AEN20775"
>The syntax of CSS</A
>
  </DT
><DT
>sub-administrators,
    <A
HREF="administration-functions.html#AEN6564"
>The administration functions</A
>
  </DT
><DT
>subcategories,
    <A
HREF="find-last-date.html#AEN19731"
>How to find the last date of...</A
>
  </DT
><DT
>subcategory,
    <A
HREF="find-last-date.html#AEN19752"
>How to find the last date of...</A
>
  </DT
><DT
>subdirectories,
    <A
HREF="easyphp.html#AEN3148"
>easyPHP</A
>,
    <A
HREF="htaccess-file.html#AEN17558"
>The .htaccess file</A
>
  </DT
><DT
>subdirectory,
    <A
HREF="call-to-undefined-function.html#AEN3958"
>Call to undefined function: message_die() in db.php line 88</A
>,
    <A
HREF="htaccess-file.html#AEN17563"
>The .htaccess file</A
>
  </DT
><DT
>subexpression,
    <A
HREF="regular-expressions.html#AEN17538"
>Regular expressions</A
>,
    <A
HREF="googletap.html#AEN17982"
>How it works</A
>
  </DT
><DT
>subject,
    <A
HREF="credits.html#AEN355"
>Credits</A
>,
    <A
HREF="purpose.html#AEN1748"
>Purpose</A
>,
    <A
HREF="changing-web-hoster.html#AEN5132"
>Changing Web hoster</A
>,
    <A
HREF="administration-functions.html#AEN6884"
>The administration functions</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7174"
>phpBB Forum administration</A
>,
    <A
HREF="preferences.html#AEN7385"
>The Preferences Page </A
>,
    <A
HREF="allow-special-html-tags.html#AEN11266"
>How to allow special HTML tags</A
>
  </DT
><DT
>Submissions,
    <A
HREF="administration-functions.html#AEN6901"
>The administration functions</A
>,
    <A
HREF="cookies.html#AEN16216"
>Cookie hijack</A
>
  </DT
><DT
>superadmin,
    <A
HREF="backend.html#AEN6144"
>Back end structure: administrator view</A
>,
    <A
HREF="module-admin.html#AEN14469"
>Module creation, administrator part</A
>
  </DT
><DT
>Survey,
    <A
HREF="preinstalled-blocks.html#AEN5976"
>The preinstalled blocks</A
>,
    <A
HREF="administration-functions.html#AEN6234"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6924"
>The administration functions</A
>,
    <A
HREF="topic-structure.html#AEN9965"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="database-tables.html#AEN20419"
>The database tables </A
>
  </DT
><DT
>Surveys,
    <A
HREF="preinstalled-modules.html#AEN5620"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5642"
>The preinstalled modules</A
>
  </DT
><DT
>Swiss-Army-Knife,
    <A
HREF="search-engines-and-get-method.html#AEN17203"
>Search engines and the GET method</A
>
  </DT
><DT
>syndicate,
    <A
HREF="administration-functions.html#AEN6378"
>The administration functions</A
>
  </DT
><DT
>syntax,
    <A
HREF="topic-structure.html#AEN9989"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="module-admin.html#AEN14529"
>Module creation, administrator part</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15556"
>SQL injection with PHP-Nuke</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15613"
>SQL injection with PHP-Nuke</A
>,
    <A
HREF="sql-syntax.html#AEN21008"
>The syntax of SQL code</A
>,
    <A
HREF="sql-syntax.html#AEN21010"
>The syntax of SQL code</A
>
  </DT
><DT
>system,
    <A
HREF="disclaimer.html#AEN132"
>Disclaimer</A
>,
    <A
HREF="aknowledgements.html#AEN1473"
>Aknowledgements</A
>,
    <A
HREF="whatis-phpnuke.html#AEN1758"
>What Is PHP-Nuke</A
>,
    <A
HREF="whatis-phpnuke.html#AEN1812"
>What Is PHP-Nuke</A
>,
    <A
HREF="whatis-phpnuke.html#AEN1827"
>What Is PHP-Nuke</A
>,
    <A
HREF="whatis-phpnuke.html#AEN1832"
>What Is PHP-Nuke</A
>,
    <A
HREF="whatis-phpnuke.html#AEN1842"
>What Is PHP-Nuke</A
>,
    <A
HREF="whatis-phpnuke.html#AEN1846"
>What Is PHP-Nuke</A
>,
    <A
HREF="php-nuke-vs-xoops.html#AEN2234"
>PHP-Nuke vs. XOOPS</A
>,
    <A
HREF="easyphp.html#AEN3179"
>How to check a successful installation</A
>,
    <A
HREF="xampp.html#AEN3275"
>XAMPP</A
>,
    <A
HREF="preinstalled-modules.html#AEN5391"
>The preinstalled modules</A
>,
    <A
HREF="administration-functions.html#AEN6376"
>The administration functions</A
>,
    <A
HREF="php-nuke-gallery-module.html#AEN8220"
>Gallery module</A
>,
    <A
HREF="php-nuke-protector-module.html#AEN8419"
>Protector module</A
>,
    <A
HREF="php-nuke-protector-module.html#AEN8431"
>Protector module</A
>,
    <A
HREF="php-nuke-protector-module.html#AEN8486"
>Protector module</A
>,
    <A
HREF="php-nuke-webcam-module.html#AEN8546"
>WebCam module</A
>,
    <A
HREF="php-nuke-webcam-module.html#AEN8589"
>WebCam module</A
>,
    <A
HREF="php-nuke-webcam-module.html#AEN8591"
>WebCam module</A
>,
    <A
HREF="upload-add-on-for-phpbb.html#AEN8863"
>Upload add-on for phpBB</A
>,
    <A
HREF="upload-add-on-for-phpbb.html#AEN8877"
>Upload add-on for phpBB</A
>,
    <A
HREF="upload-add-on-for-phpbb.html#AEN8881"
>Upload add-on for phpBB</A
>,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12482"
>How to redirect Your Info to the Forums user profile</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13544"
>How to create a Help Center Live block</A
>,
    <A
HREF="how-secure-is-php-nuke.html#AEN15250"
>How secure is PHP-Nuke?</A
>,
    <A
HREF="security-measures.html#AEN15888"
>Security measures </A
>,
    <A
HREF="permissions2.html#AEN16163"
>Permissions on folders and files</A
>,
    <A
HREF="turck-mmcache.html#AEN16894"
>Installation of Turck MMCache</A
>,
    <A
HREF="mod_rewrite-api-phases.html#AEN17297"
>API phases</A
>,
    <A
HREF="install-modules-with-database-files-change.html#AEN18689"
>How to install modules that change the database structure and the files</A
>,
    <A
HREF="php-nuke-under-ssl.html#AEN19025"
>How to use PHP-Nuke under SSL</A
>,
    <A
HREF="display-html-code-in-faq.html#AEN19165"
>How to display HTML code in a FAQ</A
>,
    <A
HREF="display-html-code-in-faq.html#AEN19170"
>How to display HTML code in a FAQ</A
>,
    <A
HREF="mysql-frontend.html#AEN21131"
>MySQL Front, how to administer a MySQL DB from Windows </A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN26374"
>T</A
></H2
><DL
><DT
>tables,
    <A
HREF="credits-version-1.0.html#AEN492"
>Version 1.0</A
>,
    <A
HREF="upload.html#AEN2472"
>Upload through FTP</A
>,
    <A
HREF="database-creation.html#AEN2624"
>Database creation</A
>,
    <A
HREF="phpmyadmin-navigation-bar-export.html#AEN2890"
>phpMyAdmin navigation bar: Export</A
>,
    <A
HREF="phpmyadmin-navigation-bar-export.html#AEN2895"
>phpMyAdmin navigation bar: Export</A
>,
    <A
HREF="phpmyadmin-navigation-bar-export.html#AEN2920"
>phpMyAdmin navigation bar: Export</A
>,
    <A
HREF="phpmyadmin-navigation-bar-export.html#AEN2933"
>phpMyAdmin navigation bar: Export</A
>,
    <A
HREF="install-php-nuke-nukesql.html#AEN3069"
>How to install PHP-Nuke using nukesql.php</A
>,
    <A
HREF="mysql-errno-145.html#AEN4702"
>MySQL errno: 145: Can't open file nuke_XXXX.MYI</A
>,
    <A
HREF="change-background-colour.html#AEN10575"
>How to change background colour</A
>,
    <A
HREF="change-background-colour.html#AEN10579"
>How to change background colour</A
>,
    <A
HREF="theme-rules.html#AEN10842"
>Theme construction: the rules to follow </A
>,
    <A
HREF="theme-rules.html#AEN10844"
>Theme construction: the rules to follow </A
>,
    <A
HREF="urls-longer-than-100-characters.html#AEN12876"
>How to add URLs longer than 100 characters in Downloads and Web Links</A
>,
    <A
HREF="duplicating-php-nuke-modules.html#AEN15103"
>Duplicating PHP-Nuke modules</A
>,
    <A
HREF="html-syntax.html#AEN20587"
>The syntax of HTML code</A
>
  </DT
><DT
>taste,
    <A
HREF="book-behind-book-line-of-attack.html#AEN1679"
>Line of attack </A
>
  </DT
><DT
>tax,
    <A
HREF="paypal-block-for-php-nuke.html#AEN14032"
>How to display HTML forms in a block: Paypal</A
>,
    <A
HREF="paypal-block-for-php-nuke.html#AEN14052"
>How to display HTML forms in a block: Paypal</A
>
  </DT
><DT
>terms,
    <A
HREF="administration-functions.html#AEN6600"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6608"
>The administration functions</A
>,
    <A
HREF="php-nuke-random-quotes-block.html#AEN7893"
>Random Quotes block</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11057"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="make-encyclopedia-international.html#AEN19484"
>How to make the Encyclopedia international</A
>
  </DT
><DT
>test,
    <A
HREF="test-scripts.html#AEN3802"
>Test scripts</A
>,
    <A
HREF="test-scripts.html#AEN3813"
>test.php</A
>,
    <A
HREF="test-scripts.html#AEN3816"
>test.php</A
>,
    <A
HREF="test-scripts.html#AEN3832"
>test.php</A
>,
    <A
HREF="security-code.html#AEN4161"
>Security code is not showing up</A
>,
    <A
HREF="include-path.html#AEN4261"
>Include path is wrong</A
>,
    <A
HREF="changing-web-hoster.html#AEN5110"
>Changing Web hoster</A
>,
    <A
HREF="changing-web-hoster.html#AEN5135"
>Changing Web hoster</A
>,
    <A
HREF="caching-php-nuke-conclusion.html#AEN17059"
>Caching PHP-Nuke: Conclusion</A
>
  </DT
><DT
>tests,
    <A
HREF="preinstalled-modules.html#AEN5695"
>The preinstalled modules</A
>
  </DT
><DT
>TestString,
    <A
HREF="mod_rewrite-regex-backreferences.html#AEN17360"
>Regex backreference availability</A
>
  </DT
><DT
>textfield,
    <A
HREF="php-nuke-ecommerce-module.html#AEN9011"
>eCommerce module</A
>
  </DT
><DT
>Thatware,
    <A
HREF="history.html#AEN1881"
>Short history of PHP-Nuke</A
>
  </DT
><DT
>theme,
    <A
HREF="upgrade-php-nuke.html#AEN4871"
>How to upgrade PHP-Nuke</A
>,
    <A
HREF="preinstalled-modules.html#AEN5770"
>The preinstalled modules</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7164"
>phpBB Forum administration</A
>,
    <A
HREF="preferences.html#AEN7273"
>The Preferences Page </A
>,
    <A
HREF="directory-structure.html#AEN9304"
>Directory structure </A
>,
    <A
HREF="topic-structure.html#AEN9843"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="topic-structure.html#AEN9846"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="topic-structure.html#AEN9851"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="topic-structure.html#AEN9858"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="topic-structure.html#AEN9913"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="topic-structure.html#AEN9940"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="topic-structure.html#AEN9973"
>Structure of a PHP-Nuke theme</A
>,
    <A
HREF="example-creation-html-template.html#AEN10067"
>Example creation of HTML file to include in the theme</A
>,
    <A
HREF="example-creation-html-template.html#AEN10073"
>Example creation of HTML file to include in the theme</A
>,
    <A
HREF="php-nuke-theme-modifying-header.html#AEN10080"
>Modifying the PHP-Nuke theme header</A
>,
    <A
HREF="php-nuke-theme-modifying-header.html#AEN10082"
>Modifying the PHP-Nuke theme header</A
>,
    <A
HREF="php-nuke-theme-modifying-header.html#AEN10084"
>Modifying the PHP-Nuke theme header</A
>,
    <A
HREF="php-nuke-header-create-top-navigation-bar.html#AEN10127"
>How to create a top navigation bar as in NukeNews theme</A
>,
    <A
HREF="php-nuke-header-create-top-navigation-bar.html#AEN10144"
>How to create a top navigation bar as in NukeNews theme</A
>,
    <A
HREF="php-nuke-header-insert-slashocean-search-box.html#AEN10153"
>How to insert a Search Box as in SlashOcean theme</A
>,
    <A
HREF="php-nuke-header-change.html#AEN10175"
>How to change the PHP-Nuke header depending on some global feature</A
>,
    <A
HREF="php-nuke-header-change.html#AEN10181"
>How to change the PHP-Nuke header depending on some global feature</A
>,
    <A
HREF="php-nuke-header-change-logo.html#AEN10218"
>How to change the logo in the PHP-Nuke header</A
>,
    <A
HREF="php-nuke-header-change-banner-placement.html#AEN10266"
>How to change placement of the banner in the PHP-Nuke header</A
>,
    <A
HREF="php-nuke-header-watermark-background-image.html#AEN10300"
>How to display a watermark background image</A
>,
    <A
HREF="php-nuke-header-watermark-background-image.html#AEN10302"
>How to display a watermark background image</A
>,
    <A
HREF="php-nuke-header-watermark-background-image.html#AEN10315"
>How to display a watermark background image</A
>,
    <A
HREF="php-nuke-header-watermark-background-image.html#AEN10397"
>How to display a watermark background image</A
>,
    <A
HREF="php-nuke-header-watermark-background-image.html#AEN10410"
>How to display a watermark background image</A
>,
    <A
HREF="php-nuke-header-watermark-background-image.html#AEN10414"
>How to display a watermark background image</A
>,
    <A
HREF="php-nuke-header-display-flash-object.html#AEN10440"
>How to display a Flash object in the PHP-Nuke header</A
>,
    <A
HREF="hide-left-blocks.html#AEN10459"
>How to hide the left blocks</A
>,
    <A
HREF="hide-left-blocks.html#AEN10484"
>How to hide the left blocks</A
>,
    <A
HREF="multipage-news-articles.html#AEN10524"
>How to get multipage News articles</A
>,
    <A
HREF="multipage-news-articles.html#AEN10529"
>How to get multipage News articles</A
>,
    <A
HREF="multipage-news-articles.html#AEN10535"
>How to get multipage News articles</A
>,
    <A
HREF="change-background-colour.html#AEN10548"
>How to change background colour</A
>,
    <A
HREF="change-background-colour.html#AEN10577"
>How to change background colour</A
>,
    <A
HREF="change-background-colour.html#AEN10586"
>How to change background colour</A
>,
    <A
HREF="change-background-colour.html#AEN10594"
>How to change background colour</A
>,
    <A
HREF="change-background-colour.html#AEN10618"
>How to change background colour</A
>,
    <A
HREF="php-nuke-theme-modifying-index.html#AEN10645"
>Modifying the PHP-Nuke theme index</A
>,
    <A
HREF="php-nuke-theme-modifying-index.html#AEN10647"
>Modifying the PHP-Nuke theme index</A
>,
    <A
HREF="php-nuke-theme-modifying-index.html#AEN10664"
>Modifying the PHP-Nuke theme index</A
>,
    <A
HREF="php-nuke-theme-modifying-index.html#AEN10669"
>Modifying the PHP-Nuke theme index</A
>,
    <A
HREF="php-nuke-theme-modifying-footer.html#AEN10700"
>Modifying the PHP-Nuke theme footer</A
>,
    <A
HREF="insert-right-extra-table.html#AEN10718"
>How to insert an extra table to the right of the page</A
>,
    <A
HREF="php-nuke-copyright-notice.html#AEN10734"
>The PHP-Nuke Copyright notice</A
>,
    <A
HREF="php-nuke-copyright-notice.html#AEN10759"
>The PHP-Nuke Copyright notice</A
>,
    <A
HREF="change-buggy-php-nuke-theme.html#AEN10868"
>How to change a buggy PHP-Nuke theme</A
>,
    <A
HREF="change-buggy-php-nuke-theme.html#AEN10874"
>How to change a buggy PHP-Nuke theme</A
>,
    <A
HREF="prevent-users-from-changing-php-nuke-theme.html#AEN10898"
>How to prevent users from changing the theme in PHP-Nuke</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN10965"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="paypal-block-for-php-nuke.html#AEN14091"
>How to display HTML forms in a block: Paypal</A
>,
    <A
HREF="include-html-file-and-links-in-module-iframe.html#AEN14810"
>How to include a HTML file and its links using an iframe in a PHP-Nuke module</A
>,
    <A
HREF="make-dynamic-css.html#AEN18236"
>How to make a dynamic CSS</A
>,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18442"
>How to restore PHP-Nuke from backup</A
>,
    <A
HREF="css-syntax.html#AEN20777"
>The syntax of CSS</A
>,
    <A
HREF="css-syntax.html#AEN20779"
>The syntax of CSS</A
>
  </DT
><DT
>themes,
    <A
HREF="whatis-phpnuke.html#AEN1818"
>What Is PHP-Nuke</A
>,
    <A
HREF="history.html#AEN1906"
>Short history of PHP-Nuke</A
>,
    <A
HREF="php-nuke-vs-post-nuke.html#AEN2064"
>PHP-Nuke vs. Post-Nuke</A
>,
    <A
HREF="php-nuke-vs-xoops.html#AEN2207"
>PHP-Nuke vs. XOOPS</A
>,
    <A
HREF="preinstalled-modules.html#AEN5703"
>The preinstalled modules</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7156"
>phpBB Forum administration</A
>,
    <A
HREF="phpbb-forum-administration.html#AEN7158"
>phpBB Forum administration</A
>,
    <A
HREF="directory-structure.html#AEN9298"
>Directory structure </A
>,
    <A
HREF="directory-structure.html#AEN9302"
>Directory structure </A
>,
    <A
HREF="php-nuke-header-insert-slashocean-search-box.html#AEN10161"
>How to insert a Search Box as in SlashOcean theme</A
>,
    <A
HREF="php-nuke-header-change-logo.html#AEN10222"
>How to change the logo in the PHP-Nuke header</A
>,
    <A
HREF="change-buggy-php-nuke-theme.html#AEN10872"
>How to change a buggy PHP-Nuke theme</A
>,
    <A
HREF="prevent-users-from-changing-php-nuke-theme.html#AEN10884"
>How to prevent users from changing the theme in PHP-Nuke</A
>,
    <A
HREF="prevent-users-from-changing-php-nuke-theme.html#AEN10908"
>How to prevent users from changing the theme in PHP-Nuke</A
>
  </DT
><DT
>themes/NukeNews,
    <A
HREF="topic-structure.html#AEN9900"
>Structure of a PHP-Nuke theme</A
>
  </DT
><DT
>thousands,
    <A
HREF="how-secure-is-php-nuke.html#AEN15258"
>How secure is PHP-Nuke?</A
>
  </DT
><DT
>threshold,
    <A
HREF="phpbb-forum-administration.html#AEN7090"
>phpBB Forum administration</A
>
  </DT
><DT
>thumb,
    <A
HREF="how-sessions-work.html#AEN9509"
>How sessions work in the forums</A
>
  </DT
><DT
>thumbnail,
    <A
HREF="php-nuke-gallery-module.html#AEN8247"
>Gallery module</A
>,
    <A
HREF="php-nuke-gallery-module.html#AEN8250"
>Gallery module</A
>
  </DT
><DT
>thumbnails,
    <A
HREF="book-behind-book.html#AEN1641"
>The book behind the book</A
>
  </DT
><DT
>ticket,
    <A
HREF="create-help-center-live-block.html#AEN13535"
>How to create a Help Center Live block</A
>
  </DT
><DT
>timestamp,
    <A
HREF="adjust-server-time.html#AEN19959"
>How to adjust server time</A
>
  </DT
><DT
>timezone,
    <A
HREF="adjust-server-time.html#AEN19866"
>How to adjust server time</A
>,
    <A
HREF="adjust-server-time.html#AEN19995"
>How to adjust server time</A
>,
    <A
HREF="adjust-server-time.html#AEN19999"
>How to adjust server time</A
>
  </DT
><DT
>tinytext,
    <A
HREF="user-extra-information.html#AEN9675"
>More than 255 characters of user extra information</A
>
  </DT
><DT
>title,
    <A
HREF="preinstalled-modules.html#AEN5252"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5614"
>The preinstalled modules</A
>,
    <A
HREF="administration-functions.html#AEN6192"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6473"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6477"
>The administration functions</A
>,
    <A
HREF="preferences.html#AEN7364"
>The Preferences Page </A
>,
    <A
HREF="php-nuke-webcam-module.html#AEN8606"
>WebCam module</A
>,
    <A
HREF="php-nuke-module-and-block-titles.html#AEN9780"
>PHP-Nuke module and block titles</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11021"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="allow-special-html-tags.html#AEN11380"
>How to allow special HTML tags</A
>,
    <A
HREF="simple-module-block.html#AEN11723"
>Simple module block</A
>,
    <A
HREF="build-rss-blocks-with-variable-news-number.html#AEN11877"
>How to build RSS blocks with variable number of news items</A
>,
    <A
HREF="how-to-include-files.html#AEN13289"
>How to include PHP/HTML files in a PHP-Nuke block</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15590"
>SQL injection with PHP-Nuke</A
>
  </DT
><DT
>Top10,
    <A
HREF="preinstalled-modules.html#AEN5627"
>The preinstalled modules</A
>
  </DT
><DT
>topics,
    <A
HREF="preinstalled-modules.html#AEN5271"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5480"
>The preinstalled modules</A
>,
    <A
HREF="preinstalled-modules.html#AEN5656"
>The preinstalled modules</A
>,
    <A
HREF="administration-functions.html#AEN6886"
>The administration functions</A
>,
    <A
HREF="directory-structure.html#AEN9217"
>Directory structure </A
>,
    <A
HREF="how-sessions-work.html#AEN9437"
>How sessions work in the forums</A
>,
    <A
HREF="customization.html#AEN9787"
>Customising PHP-Nuke themes </A
>,
    <A
HREF="modifying-php-nuke-blocks.html#AEN11638"
>Modifying PHP-Nuke blocks</A
>,
    <A
HREF="choose-images-from-dropdown-list.html#AEN12188"
>How to choose images from a dropdown list</A
>,
    <A
HREF="optimizing-php-nuke.html#AEN17068"
>Optimizing PHP-Nuke </A
>
  </DT
><DT
>Topolino,
    <A
HREF="install-phpmyadmin.html#AEN2695"
>How to install phpMyAdmin</A
>,
    <A
HREF="module-rules.html#AEN14255"
>Creating fully compatible modules: the rules to follow</A
>,
    <A
HREF="module-rules.html#AEN14261"
>Creating fully compatible modules: the rules to follow</A
>,
    <A
HREF="module-public.html#AEN14296"
>Module creation, the public part</A
>,
    <A
HREF="module-admin.html#AEN14438"
>Module creation, administrator part</A
>,
    <A
HREF="module-admin.html#AEN14442"
>Module creation, administrator part</A
>,
    <A
HREF="module-admin.html#AEN14446"
>Module creation, administrator part</A
>,
    <A
HREF="module-admin.html#AEN14449"
>Module creation, administrator part</A
>,
    <A
HREF="module-admin.html#AEN14519"
>Module creation, administrator part</A
>,
    <A
HREF="module-admin.html#AEN14524"
>Module creation, administrator part</A
>,
    <A
HREF="module-admin.html#AEN14526"
>Module creation, administrator part</A
>,
    <A
HREF="module-admin.html#AEN14533"
>Module creation, administrator part</A
>,
    <A
HREF="module-admin.html#AEN14535"
>Module creation, administrator part</A
>
  </DT
><DT
>tracking,
    <A
HREF="php-nuke-event-calendar-module.html#AEN7977"
>Event calendar</A
>,
    <A
HREF="php-nuke-ip-tracking-module.html#AEN8321"
>IP Tracking module</A
>
  </DT
><DT
>transfer.php,
    <A
HREF="upgrade-phpbb-php-nuke.html#AEN4939"
>From phpBB to PHP-Nuke</A
>
  </DT
><DT
>Transitional,
    <A
HREF="block-theory.html#AEN13219"
>How to create a block, theoretical approach</A
>
  </DT
><DT
>translation,
    <A
HREF="translate-php-nuke-howto.html#AEN1694"
>How to translate this HOWTO</A
>,
    <A
HREF="regular-expressions.html#AEN17529"
>Regular expressions</A
>,
    <A
HREF="googletap.html#AEN18092"
>How it works</A
>
  </DT
><DT
>translators,
    <A
HREF="credits-version-1.0.html#AEN497"
>Version 1.0</A
>
  </DT
><DT
>tree-like,
    <A
HREF="preinstalled-modules.html#AEN5483"
>The preinstalled modules</A
>
  </DT
><DT
>trivial,
    <A
HREF="include-html-file-and-links-in-module.html#AEN14700"
>How to include a HTML file and its links in a PHP-Nuke module</A
>,
    <A
HREF="google-adsense-on-top-of-php-nuke-module.html#AEN15058"
>Google AdSense on top of a PHP-Nuke module</A
>,
    <A
HREF="make-php-nuke-hot-link-stealth.html#AEN18125"
>How to make PHP-Nuke hot link stealth</A
>
  </DT
><DT
>TTL,
    <A
HREF="changing-web-hoster.html#AEN5175"
>Changing Web hoster</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN26616"
>U</A
></H2
><DL
><DT
>U.S.,
    <A
HREF="php-nuke-moon-sun-block.html#AEN7591"
>Moon &#38; Sun block</A
>,
    <A
HREF="paypal-block-for-php-nuke.html#AEN14046"
>How to display HTML forms in a block: Paypal</A
>,
    <A
HREF="paypal-block-for-php-nuke.html#AEN14048"
>How to display HTML forms in a block: Paypal</A
>
  </DT
><DT
>ulterior,
    <A
HREF="installation.html#AEN2272"
>How to install PHP-Nuke</A
>
  </DT
><DT
>ultramode,
    <A
HREF="preferences.html#AEN7265"
>The Preferences Page </A
>
  </DT
><DT
>underscores,
    <A
HREF="include-html-file-in-module.html#AEN14554"
>How to include a HTML file in a PHP-Nuke module</A
>
  </DT
><DT
>undisclosed,
    <A
HREF="path-disclosure-with-php-nuke.html#AEN15673"
>Path disclosure with PHP-Nuke</A
>
  </DT
><DT
>Unicode,
    <A
HREF="make-encyclopedia-international.html#AEN19554"
>How to make the Encyclopedia international</A
>
  </DT
><DT
>University,
    <A
HREF="aknowledgements.html#AEN1377"
>Aknowledgements</A
>
  </DT
><DT
>Unix,
    <A
HREF="permissions2.html#AEN16098"
>Permissions on folders and files</A
>,
    <A
HREF="regular-expressions.html#AEN17420"
>Regular expressions</A
>
  </DT
><DT
>unregistered,
    <A
HREF="preferences.html#AEN7420"
>The Preferences Page </A
>
  </DT
><DT
>upgrade66-67.php,
    <A
HREF="upgrade-php-nuke.html#AEN4891"
>How to upgrade PHP-Nuke</A
>
  </DT
><DT
>upgrade67-68.php,
    <A
HREF="upgrade-php-nuke.html#AEN4893"
>How to upgrade PHP-Nuke</A
>
  </DT
><DT
>upgrades,
    <A
HREF="install-modules-with-database-files-change.html#AEN18685"
>How to install modules that change the database structure and the files</A
>
  </DT
><DT
>upload,
    <A
HREF="mysql-frontend.html#AEN21113"
>MySQL Front, how to administer a MySQL DB from Windows </A
>
  </DT
><DT
>URL,
    <A
HREF="easyphp.html#AEN3213"
>How to check a successful installation</A
>,
    <A
HREF="administration-functions.html#AEN6412"
>The administration functions</A
>,
    <A
HREF="preferences.html#AEN7227"
>The Preferences Page </A
>,
    <A
HREF="php-nuke-moon-sun-block.html#AEN7589"
>Moon &#38; Sun block</A
>,
    <A
HREF="php-nuke-moon-sun-block.html#AEN7593"
>Moon &#38; Sun block</A
>,
    <A
HREF="how-sessions-work.html#AEN9501"
>How sessions work in the forums</A
>,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12371"
>How to redirect Your Info to the Forums user profile</A
>,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12387"
>How to redirect Your Info to the Forums user profile</A
>,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12458"
>How to redirect Your Info to the Forums user profile</A
>,
    <A
HREF="urls-longer-than-100-characters.html#AEN12882"
>How to add URLs longer than 100 characters in Downloads and Web Links</A
>,
    <A
HREF="urls-longer-than-100-characters.html#AEN12884"
>How to add URLs longer than 100 characters in Downloads and Web Links</A
>,
    <A
HREF="display-images-php-nuke-blocks.html#AEN13888"
>How to display images in PHP-Nuke blocks</A
>,
    <A
HREF="include-html-file-and-links-in-module.html#AEN14698"
>How to include a HTML file and its links in a PHP-Nuke module</A
>,
    <A
HREF="include-html-file-and-links-in-module.html#AEN14750"
>How to include a HTML file and its links in a PHP-Nuke module</A
>,
    <A
HREF="include-html-file-and-links-in-module-iframe.html#AEN14798"
>How to include a HTML file and its links using an iframe in a PHP-Nuke module</A
>,
    <A
HREF="duplicating-php-nuke-modules.html#AEN15115"
>Duplicating PHP-Nuke modules</A
>,
    <A
HREF="hacked-now-what.html#AEN16391"
>Hacked - now what?</A
>,
    <A
HREF="search-engines-and-get-method.html#AEN17158"
>Search engines and the GET method</A
>,
    <A
HREF="search-engines-and-get-method.html#AEN17181"
>Search engines and the GET method</A
>,
    <A
HREF="mod_rewrite-api-phases.html#AEN17303"
>API phases</A
>,
    <A
HREF="mod_rewrite-ruleset-processing.html#AEN17335"
>Ruleset processing</A
>,
    <A
HREF="regular-expressions.html#AEN17512"
>Regular expressions</A
>,
    <A
HREF="googletap.html#AEN17859"
>Installation</A
>,
    <A
HREF="googletap.html#AEN18009"
>How it works</A
>,
    <A
HREF="find-all-registration-links.html#AEN18753"
>How to find all registration links</A
>,
    <A
HREF="enter-thousands-of-web-links.html#AEN19230"
>How to enter thousands of web links</A
>,
    <A
HREF="html-create-link.html#AEN20645"
>How to create a link in HTML</A
>
  </DT
><DT
>urlin,
    <A
HREF="googletap.html#AEN17761"
>Installation</A
>
  </DT
><DT
>urlout,
    <A
HREF="googletap.html#AEN17763"
>Installation</A
>,
    <A
HREF="googletap.html#AEN17901"
>How it works</A
>,
    <A
HREF="googletap.html#AEN17905"
>How it works</A
>,
    <A
HREF="googletap.html#AEN17911"
>How it works</A
>,
    <A
HREF="googletap.html#AEN17913"
>How it works</A
>
  </DT
><DT
>usability,
    <A
HREF="aknowledgements.html#AEN1327"
>Aknowledgements</A
>
  </DT
><DT
>User,
    <A
HREF="permissions.html#AEN2499"
>File permissions</A
>,
    <A
HREF="permissions.html#AEN2519"
>File permissions</A
>,
    <A
HREF="cannot-create-administrator-account.html#AEN4414"
>You cannot create the administrator account</A
>,
    <A
HREF="cannot-create-administrator-account.html#AEN4423"
>You cannot create the administrator account</A
>
  </DT
><DT
>username,
    <A
HREF="php-nuke-protector-module.html#AEN8409"
>Protector module</A
>
  </DT
><DT
>usernames,
    <A
HREF="restore-php-nuke-from-backup.html#AEN18429"
>How to restore PHP-Nuke from backup</A
>
  </DT
><DT
>user_id,
    <A
HREF="how-sessions-work.html#AEN9489"
>How sessions work in the forums</A
>
  </DT
><DT
>utility,
    <A
HREF="mysql-errno-145.html#AEN4697"
>MySQL errno: 145: Can't open file nuke_XXXX.MYI</A
>,
    <A
HREF="repair-corrupt-table.html#AEN18382"
>How to repair a corrupt table</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN26721"
>V</A
></H2
><DL
><DT
>validation,
    <A
HREF="aknowledgements.html#AEN1330"
>Aknowledgements</A
>,
    <A
HREF="how-sessions-work.html#AEN9515"
>How sessions work in the forums</A
>,
    <A
HREF="how-sessions-work.html#AEN9532"
>How sessions work in the forums</A
>,
    <A
HREF="how-sessions-work.html#AEN9537"
>How sessions work in the forums</A
>
  </DT
><DT
>validity,
    <A
HREF="preinstalled-modules.html#AEN5311"
>The preinstalled modules</A
>
  </DT
><DT
>variants,
    <A
HREF="make-dynamic-css.html#AEN18234"
>How to make a dynamic CSS</A
>
  </DT
><DT
>verdana,
    <A
HREF="css-syntax.html#AEN20846"
>The syntax of CSS</A
>
  </DT
><DT
>viewable,
    <A
HREF="phpbb-forum-administration.html#AEN7141"
>phpBB Forum administration</A
>
  </DT
><DT
>views,
    <A
HREF="preinstalled-modules.html#AEN5447"
>The preinstalled modules</A
>,
    <A
HREF="administration-functions.html#AEN6856"
>The administration functions</A
>
  </DT
><DT
>virtual,
    <A
HREF="googletap.html#AEN17716"
>Requirements</A
>,
    <A
HREF="change-php-parameters.html#AEN19097"
>How to change PHP parameters when you don't have access to php.ini</A
>
  </DT
><DT
>VirtualDarkness,
    <A
HREF="aknowledgements.html#AEN1386"
>Aknowledgements</A
>
  </DT
><DT
>visibility,
    <A
HREF="aknowledgements.html#AEN1335"
>Aknowledgements</A
>
  </DT
><DT
>visitor,
    <A
HREF="frontend.html#AEN5186"
>Front end structure: user view</A
>,
    <A
HREF="include-plain-text-file-in-module.html#AEN14864"
>How to include a plain text file in a PHP-Nuke module</A
>,
    <A
HREF="googletap.html#AEN17800"
>Installation</A
>
  </DT
><DT
>vote,
    <A
HREF="preinstalled-modules.html#AEN5358"
>The preinstalled modules</A
>,
    <A
HREF="administration-functions.html#AEN6862"
>The administration functions</A
>
  </DT
><DT
>vulnerabilities,
    <A
HREF="php-nuke-vs-post-nuke.html#AEN2166"
>PHP-Nuke vs. Post-Nuke</A
>,
    <A
HREF="how-secure-is-php-nuke.html#AEN15237"
>How secure is PHP-Nuke?</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15617"
>SQL injection with PHP-Nuke</A
>,
    <A
HREF="guard-security-vulnerabilities-in-php-nuke.html#AEN15789"
>How to guard against security vulnerabilities in PHP-Nuke</A
>
  </DT
><DT
>vulnerability,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15699"
>Cross-site tracing with PHP-Nuke</A
>,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15773"
>Cross-site tracing with PHP-Nuke</A
>,
    <A
HREF="permissions2.html#AEN16149"
>Permissions on folders and files</A
>,
    <A
HREF="php-nuke-under-ssl.html#AEN19035"
>How to use PHP-Nuke under SSL</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN26776"
>W</A
></H2
><DL
><DT
>watermark,
    <A
HREF="php-nuke-header-watermark-background-image.html#AEN10402"
>How to display a watermark background image</A
>
  </DT
><DT
>Web Links,
    <A
HREF="php-nuke-odp-module.html#AEN8943"
>ODP module</A
>
  </DT
><DT
>webcam,
    <A
HREF="php-nuke-webcam-module.html#AEN8582"
>WebCam module</A
>
  </DT
><DT
>WebLinks,
    <A
HREF="preinstalled-modules.html#AEN5669"
>The preinstalled modules</A
>,
    <A
HREF="check-validity-of-web-links.html#AEN19390"
>How to check the validity of thousands of web links</A
>
  </DT
><DT
>Weblog,
    <A
HREF="preinstalled-modules.html#AEN5709"
>The preinstalled modules</A
>
  </DT
><DT
>Webmail,
    <A
HREF="preinstalled-modules.html#AEN5713"
>The preinstalled modules</A
>,
    <A
HREF="preferences.html#AEN7484"
>The Preferences Page </A
>
  </DT
><DT
>webmaster,
    <A
HREF="preinstalled-modules.html#AEN5375"
>The preinstalled modules</A
>,
    <A
HREF="preferences.html#AEN7391"
>The Preferences Page </A
>
  </DT
><DT
>website,
    <A
HREF="credits-general.html#AEN1282"
>General</A
>,
    <A
HREF="how-sessions-work.html#AEN9494"
>How sessions work in the forums</A
>,
    <A
HREF="php-nuke-copyright-notice.html#AEN10773"
>The PHP-Nuke Copyright notice</A
>,
    <A
HREF="cross-site-scripting-with-php-nuke.html#AEN15537"
>Cross-site scripting with PHP-Nuke</A
>,
    <A
HREF="search-engines-and-get-method.html#AEN17171"
>Search engines and the GET method</A
>,
    <A
HREF="search-engines-and-get-method.html#AEN17183"
>Search engines and the GET method</A
>,
    <A
HREF="search-engines-and-get-method.html#AEN17185"
>Search engines and the GET method</A
>,
    <A
HREF="htaccess-file.html#AEN17561"
>The .htaccess file</A
>,
    <A
HREF="htaccess-file.html#AEN17565"
>The .htaccess file</A
>,
    <A
HREF="allow-anonymous-web-link-submissions.html#AEN18800"
>How to allow anonymous web link submissions</A
>,
    <A
HREF="enter-thousands-of-web-links.html#AEN19256"
>How to enter thousands of web links</A
>,
    <A
HREF="enter-thousands-of-web-links.html#AEN19259"
>How to enter thousands of web links</A
>
  </DT
><DT
>Web_Links,
    <A
HREF="googletap.html#AEN17834"
>Installation</A
>
  </DT
><DT
>WhiteHat,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15731"
>Cross-site tracing with PHP-Nuke</A
>
  </DT
><DT
>window.open,
    <A
HREF="javascript-php.html#AEN14919"
>Javascript functions in javascript.php</A
>
  </DT
><DT
>Windows,
    <A
HREF="install-php-nuke-locally.html#AEN3113"
>How to install PHP-Nuke locally</A
>,
    <A
HREF="xampp.html#AEN3253"
>XAMPP</A
>,
    <A
HREF="empty-page-in-windows.html#AEN4629"
>In Windows, you get an empty page</A
>,
    <A
HREF="php-nuke-webcam-module.html#AEN8585"
>WebCam module</A
>,
    <A
HREF="favourites-icon-favicon-ico.html#AEN11163"
>How to implement a favourites icon (favicon.ico)</A
>,
    <A
HREF="turck-mmcache.html#AEN16859"
>Turck MMCache</A
>
  </DT
><DT
>wizard,
    <A
HREF="php-nuke-gallery-module.html#AEN8218"
>Gallery module</A
>
  </DT
><DT
>Wordpad,
    <A
HREF="call-to-undefined-function.html#AEN3978"
>Call to undefined function: message_die() in db.php line 88</A
>
  </DT
><DT
>words,
    <A
HREF="translate-php-nuke-howto.html#AEN1730"
>How to translate this HOWTO</A
>,
    <A
HREF="forums-cant-create-category-without-name.html#AEN4783"
>Forums Error: Can't create a category without a name</A
>,
    <A
HREF="preinstalled-modules.html#AEN5418"
>The preinstalled modules</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11070"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="change-font-size-php-nuke.html#AEN11084"
>How to change the font size in PHP-Nuke</A
>,
    <A
HREF="create-help-center-live-block.html#AEN13750"
>How to create a Help Center Live block</A
>,
    <A
HREF="security-record-software-popularity.html#AEN15309"
>The impact of bad security record on software popularity </A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15596"
>SQL injection with PHP-Nuke</A
>,
    <A
HREF="hacked-now-what.html#AEN16387"
>Hacked - now what?</A
>,
    <A
HREF="mod_rewrite-api-phases.html#AEN17299"
>API phases</A
>,
    <A
HREF="mod_rewrite-quoting-special-characters.html#AEN17350"
>Quoting special characters</A
>
  </DT
><DT
>WorkBoard,
    <A
HREF="php-nuke-workboard-module.html#AEN9045"
>WorkBoard Module</A
>
  </DT
><DT
>world-readable,
    <A
HREF="administration-functions.html#AEN6764"
>The administration functions</A
>
  </DT
><DT
>World-wide,
    <A
HREF="php-nuke-vs-xoops.html#AEN2219"
>PHP-Nuke vs. XOOPS</A
>
  </DT
><DT
>ws_ftp,
    <A
HREF="upload.html#AEN2390"
>Upload through FTP</A
>,
    <A
HREF="upload.html#AEN2444"
>Upload through FTP</A
>,
    <A
HREF="upload.html#AEN2447"
>Upload through FTP</A
>
  </DT
><DT
>WYGIWYM,
    <A
HREF="book-behind-book-general-idea.html#AEN1656"
>The general idea </A
>
  </DT
><DT
>WYSIWYG,
    <A
HREF="book-behind-book-general-idea.html#AEN1653"
>The general idea </A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN26872"
>X</A
></H2
><DL
><DT
>XAMPP,
    <A
HREF="xampp.html#AEN3269"
>XAMPP</A
>
  </DT
><DT
>XDMP,
    <A
HREF="preinstalled-modules.html#AEN5861"
>The preinstalled modules</A
>
  </DT
><DT
>XHTML,
    <A
HREF="html-syntax.html#AEN20574"
>The syntax of HTML code</A
>,
    <A
HREF="html-format-text.html#AEN20592"
>How to format text in HTML</A
>,
    <A
HREF="html-format-text.html#AEN20610"
>How to format text in HTML</A
>
  </DT
><DT
>XML,
    <A
HREF="administration-functions.html#AEN6369"
>The administration functions</A
>
  </DT
><DT
>XST,
    <A
HREF="cross-site-tracing-with-php-nuke.html#AEN15726"
>Cross-site tracing with PHP-Nuke</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN26891"
>Y</A
></H2
><DL
><DT
>Yahoo,
    <A
HREF="php-nuke-ecommerce-module.html#AEN9005"
>eCommerce module</A
>
  </DT
><DT
>Your Account,
    <A
HREF="php-nuke-header-create-top-navigation-bar.html#AEN10137"
>How to create a top navigation bar as in NukeNews theme</A
>,
    <A
HREF="redirect-users-to-homepage.html#AEN12321"
>How to redirect users to the Homepage</A
>,
    <A
HREF="redirect-users-to-login-and-back.html#AEN12525"
>How to redirect users to Login and back</A
>,
    <A
HREF="create-logout-module.html#AEN14977"
>How to create a Logout module</A
>
  </DT
><DT
>Your_Account,
    <A
HREF="redirect-users-to-login-and-back.html#AEN12528"
>How to redirect users to Login and back</A
>,
    <A
HREF="sql-injection-with-php-nuke.html#AEN15640"
>SQL injection with PHP-Nuke</A
>,
    <A
HREF="googletap.html#AEN17840"
>Installation</A
>,
    <A
HREF="find-all-registration-links.html#AEN18755"
>How to find all registration links</A
>,
    <A
HREF="find-all-registration-links.html#AEN18759"
>How to find all registration links</A
>
  </DT
><DT
>Your_Info,
    <A
HREF="redirect-your-info-to-forums-user-profile.html#AEN12426"
>How to redirect Your Info to the Forums user profile</A
>
  </DT
><DT
>Your_Module,
    <A
HREF="include-html-file-and-links-in-module.html#AEN14632"
>How to include a HTML file and its links in a PHP-Nuke module</A
>,
    <A
HREF="include-html-file-and-links-in-module.html#AEN14634"
>How to include a HTML file and its links in a PHP-Nuke module</A
>,
    <A
HREF="include-html-file-and-links-in-module.html#AEN14692"
>How to include a HTML file and its links in a PHP-Nuke module</A
>
  </DT
></DL
></DIV
><DIV
CLASS="INDEXDIV"
><HR><H2
CLASS="INDEXDIV"
><A
NAME="AEN26917"
>Z</A
></H2
><DL
><DT
>zero,
    <A
HREF="regular-expressions.html#AEN17428"
>Regular expressions</A
>
  </DT
><DT
>zip,
    <A
HREF="phpmyadmin-navigation-bar-export.html#AEN2930"
>phpMyAdmin navigation bar: Export</A
>,
    <A
HREF="administration-functions.html#AEN6532"
>The administration functions</A
>,
    <A
HREF="administration-functions.html#AEN6536"
>The administration functions</A
>,
    <A
HREF="php-nuke-treemenu-with-javascript.html#AEN7850"
>Treemenu with Javascript</A
>
  </DT
><DT
>zipped,
    <A
HREF="phpmyadmin-navigation-bar-export.html#AEN2926"
>phpMyAdmin navigation bar: Export</A
>,
    <A
HREF="phpmyadmin-navigation-bar-export.html#AEN2928"
>phpMyAdmin navigation bar: Export</A
>
  </DT
><DT
>zlib,
    <A
HREF="xampp.html#AEN3236"
>XAMPP</A
>
  </DT
></DL
></DIV
></DIV
></DIV
><H3
CLASS="FOOTNOTES"
>Notes</H3
><TABLE
BORDER="0"
CLASS="FOOTNOTES"
WIDTH="100%"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN330"
HREF="#AEN330"
><SPAN
CLASS="footnote"
>[1]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>Openoffice is an office suite completely free which you can download from <A
HREF="http://www.openoffice.org"
TARGET="_top"
>OpenOffice</A
>.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN531"
HREF="#AEN531"
><SPAN
CLASS="footnote"
>[2]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>all, that is, except those that contain <A
HREF="http://www.karakas-online.de/mySGML/lyx-callouts.html"
TARGET="_top"
>callouts</A
>, see <A
HREF="http://www.karakas-online.de/mySGML/HTML-validation"
TARGET="_top"
>HTML validation</A
>.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN1681"
HREF="#AEN1681"
><SPAN
CLASS="footnote"
>[3]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>The current version of the <A
HREF="lyxtox"
TARGET="_top"
>lyxtox</A
> script make less use of sgmltools, due to the need of processing intermediate results for the integration of Mathematics, Bibliography etc. The originally used calls to sgmltools are nonetheless included in the comments of that script to demonstrate alternative ways of achieving the same result.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN2522"
HREF="#AEN2522"
><SPAN
CLASS="footnote"
>[4]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>directories are just special files in Linux</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN4884"
HREF="#AEN4884"
><SPAN
CLASS="footnote"
>[5]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>&#8220;White space&#8221;, in the setting of the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> trim(), function can contain only the following characters:</P
><P
></P
><UL
><LI
><P
>" " (ASCII 32 (0x20)), an ordinary space.</P
></LI
><LI
><P
>"\t" (ASCII 9 (0x09)), a tab.</P
></LI
><LI
><P
>"\n" (ASCII 10 (0x0A)), a new line (line feed).</P
></LI
><LI
><P
>"\r" (ASCII 13 (0x0D)), a carriage return.</P
></LI
><LI
><P
>"\0" (ASCII 0 (0x00)), the NUL-byte.</P
></LI
><LI
><P
>"\x0B" (ASCII 11 (0x0B)), a vertical tab. </P
></LI
></UL
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN5081"
HREF="#AEN5081"
><SPAN
CLASS="footnote"
>[6]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>We will assume all prefixes, like $prefix and $user_prefix to be &#8220;nuke&#8221;.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN5347"
HREF="#AEN5347"
><SPAN
CLASS="footnote"
>[7]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>In fact, a way exists to personalize the visualization of the blocks based on the page in which they are displayed to us, for example, in module news we see both the left and the right block, in module search instead, we see only the blocks on the left. </P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN6351"
HREF="#AEN6351"
><SPAN
CLASS="footnote"
>[8]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>Note that, starting from version 6.7, a news article may be associated with multiple topics.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN6874"
HREF="#AEN6874"
><SPAN
CLASS="footnote"
>[9]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>This applies to <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> version 6.0, that has the Splatt Forum installed, or to those installations of a later version that nevertheless use the Splatt Forum module. For the administration functions of the phpBB Forum, see <A
HREF="#PHPBB-FORUM-ADMINISTRATION"
>Section 7.1.1</A
>.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN7869"
HREF="#AEN7869"
><SPAN
CLASS="footnote"
>[10]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>Actually, the source code for the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> block is slightly different, but the algorithm is exactly the same.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN7924"
HREF="#AEN7924"
><SPAN
CLASS="footnote"
>[11]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>Laws without morals are empty.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN8035"
HREF="#AEN8035"
><SPAN
CLASS="footnote"
>[12]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>This is the original name.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN9148"
HREF="#AEN9148"
><SPAN
CLASS="footnote"
>[13]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>To find out if you have the GD library loaded, run a test script like test.php (see <A
HREF="#TEST-PHP"
>Section 3.9.1.1</A
>), ConnectTest.php (see <A
HREF="#CONNECTTEST-PHP"
>Section 3.9.1.2</A
>) or analyze.php (see <A
HREF="#ANALYZE-PHP"
>Section 3.9.1.3</A
>).</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN9187"
HREF="#AEN9187"
><SPAN
CLASS="footnote"
>[14]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>See <A
HREF="#MAKE-PHP-NUKE-HOT-LINK-STEALTH"
>Section 25.6</A
> for a do-it-yourself solution to hot link prevention.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN9902"
HREF="#AEN9902"
><SPAN
CLASS="footnote"
>[15]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>How much emptiness there is in things!</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN9993"
HREF="#AEN9993"
><SPAN
CLASS="footnote"
>[16]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>See <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=12907"
TARGET="_top"
>edit module your_acount</A
>.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN10087"
HREF="#AEN10087"
><SPAN
CLASS="footnote"
>[17]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>Life has given nothing to mortals without hard work!</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN10629"
HREF="#AEN10629"
><SPAN
CLASS="footnote"
>[18]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>Of course, this also means that our change has to be applied for every theme and after every upgrade anew. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
></P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN10742"
HREF="#AEN10742"
><SPAN
CLASS="footnote"
>[19]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>That is at least the way I managed to get it to work with the ExtraLight theme. Since everyt heme is different, you will have to experiment here.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN10865"
HREF="#AEN10865"
><SPAN
CLASS="footnote"
>[20]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>Notice that we have added $page to the global variable list - other than that ,the first two lines are included here only for your orientation.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN10918"
HREF="#AEN10918"
><SPAN
CLASS="footnote"
>[21]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>Strictly seen, the CloseTableNew() function is not necessarily needed, since no new colour is defined there, but it is good to have, to keep the functions conceptually separated from the standard ones.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN11547"
HREF="#AEN11547"
><SPAN
CLASS="footnote"
>[22]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>See <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?topic=12839&#38;forum=42"
TARGET="_top"
>Block hosts from total hits in statistics module</A
>.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN13240"
HREF="#AEN13240"
><SPAN
CLASS="footnote"
>[23]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>See <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=13447"
TARGET="_top"
>How to sort in Sections</A
>.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN13422"
HREF="#AEN13422"
><SPAN
CLASS="footnote"
>[24]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>Line numbers are subject to change. If you don't find what you expected, search for it. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
></P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN14385"
HREF="#AEN14385"
><SPAN
CLASS="footnote"
>[25]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>One person's medicine is another's foul poison.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN15365"
HREF="#AEN15365"
><SPAN
CLASS="footnote"
>[26]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>the &#8220;window.open&#8221; line in the example above is actually a long line that has been broken to 3 lines only for layout purposes, that's why there are no newlines (\n) at the ends of two lines (just as there is no semicolon for the same reason).</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN16048"
HREF="#AEN16048"
><SPAN
CLASS="footnote"
>[27]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>this kind of SQL injection needs a database capable of understanding the UNION clause (for MySQL at least v. 4.x)</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN17660"
HREF="#AEN17660"
><SPAN
CLASS="footnote"
>[28]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>A typical website will get about two thirds of its external traffic from search engines and one third from sites that link directly to it. Of course, your mileage may vary.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN17907"
HREF="#AEN17907"
><SPAN
CLASS="footnote"
>[29]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>The regular expression matches the HTML code for the text shown in <A
HREF="#FIG-REGULAR-EXPRESSIONS"
>Figure 25-4</A
>, where the capital letters A and C were enclosed in &#60;i&#62; tags. This makes it look more formidable than it actually is.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN18417"
HREF="#AEN18417"
><SPAN
CLASS="footnote"
>[30]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>For better readability, the urlin regular expression was broken across several lines in their table cell. The parts of the regular expression that match an URL parameter of the dynamic URL are on separate lines. But in reality, the regular expression is a one line long string. </P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN19761"
HREF="#AEN19761"
><SPAN
CLASS="footnote"
>[31]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>If you are looking for a ready-made ODP module for PHP-Nuke, see <A
HREF="#PHP-NUKE-ODP-MODULE"
>Section 8.3.13</A
>.</P
></TD
></TR
></TABLE
></BODY
></HTML
>