<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Common installation problems</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="PHP-Nuke: Management and Programming"
HREF="index.html"><LINK
REL="UP"
TITLE="How to install PHP-Nuke"
HREF="installation.html"><LINK
REL="PREVIOUS"
TITLE="Resources"
HREF="resources.html"><LINK
REL="NEXT"
TITLE="Common miscellaneous errors"
HREF="common-miscellaneous-errors.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PHP-Nuke: Management and Programming</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="resources.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 3. How to install PHP-Nuke</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="common-miscellaneous-errors.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="COMMON-INSTALLATION-PROBLEMS"
>3.9. Common installation problems</A
></H1
><P
>Some of the most common installation problems of <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> are discussed in the following subsections. In identifying the most common sources of problems and frustration, we hope to eliminate a good portion of the Help! posts in the various forums of the community. Feel free to post your own favourite to Chris' <A
HREF="http://www.karakas-online.de/forum/phpnuke.html"
TARGET="_top"
>PHP-Nuke Forum</A
>for inclusion in the next version of this HOWTO.</P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="TEST-SCRIPTS"
>3.9.1. Test scripts</A
></H2
><P
>Before you start the ambitious undertaking of debugging your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> installation, you should download and run some tools that may shorten the search path and save you some headaches:</P
><P
></P
><UL
><LI
><P
>test.php</P
></LI
><LI
><P
>ConnectTest.php and</P
></LI
><LI
><P
>analyze.php</P
></LI
></UL
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="TEST-PHP"
>3.9.1.1. test.php</A
></H3
><P
>test.php is a &#8220;quick'n dirty&#8221; script to help you find out if you could connect to the database and how your <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> configuration looks like. Put the following lines in a file, name it test.php, upload it in the same directory where you have your config.php and tell your browser to open it (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=36"
TARGET="_top"
>Warning: Invalid argument supplied for foreach()</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php 
include("config.php"); 
mysql_connect("$dbhost", "$dbuname", "$dbpass"); 
mysql_select_db("$dbname"); 
echo mysql_error(); 
phpinfo(); 
?&#62; </PRE
></FONT
></TD
></TR
></TABLE
><P
>If everything is right, you will only see the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> info. Otherwise, you will see a descriptive message of the error first (in the first line) and also the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> info. You can use the output to determine various parameters of your <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> configuration, like version numbers, libraries, paths and variables. Whenever you ask yourself if you have feature X enabled, remember to run this small script and search its output for a string that describes the feature. You will most probably find the answer there. Conversely, if you don't find the answer in the output of test.php (i.e. the output of the phpinfo() function), you will probably not find it easily.</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="CONNECTTEST-PHP"
>3.9.1.2. ConnectTest.php</A
></H3
><P
>The <A
HREF="http://humpa.com/news/ConnectTest.txt"
TARGET="_top"
>ConnectTest.php</A
> script from <A
HREF="http://www.humpa.com"
TARGET="_top"
>Humpa</A
> is a more elaborate test script that you can help with database connection problems. Download and save it with a .php ending (it comes with a .txt ending to prevent the web server from interpreting the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> code in it). You should put the ConnectTest.php file in the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> root directory, i.e. in the same directory where also config.php is located. Then you just tell your browser to open it.</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
if($phpinfo=="phpinfo") {
        phpinfo();
        die();
}
require_once("config.php");
$dbcheck = mysql_connect("$dbhost", "$dbuname", "$dbpass");
if (!$dbcheck) {
        echo mysql_error();
        echo "&#60;br&#62;&#60;b&#62;The Connection Test Script was unable to connect 
to the MySQL server!&#60;br&#62;One or more of these variables are wrong in 
your config.php:&#60;/b&#62; &#60;font color=purple&#62;&#60;b&#62;\$dbhost=\"&#60;i&#62;$dbhost&#60;/i&#62;\",
\$dbuname=\"&#60;i&#62;$dbuname&#60;/i&#62;\", and/or \$dbpass=\"*&#60;i&#62;hidden&#60;/i&#62;*\"
&#60;/b&#62;&#60;/font&#62;&#60;br&#62;";
        echo "&#60;br&#62;Now, please don't say that you &#60;u&#62;are&#60;/u&#62; using the 
correct values - say it to your mysql server, because that is who(what?) 
is stopping you. : )&#60;br&#62;";
        echo "Email your web host and ask them what to use for a mysql 
username and password.&#60;br&#62;";
        echo "PHP Manual, function: 
&#60;a href=\"http://www.php.net/manual/en/function.mysql-connect.php\"
target=\"_blank\"&#62;mysql_connect&#60;/a&#62;&#60;br&#62;";
        echo "If you are the server, perhaps you just need to create 
a mysql user instead of using your root user.&#60;br&#62;";
        die("&#60;br&#62;&#60;a href=\"$_SERVER[PHP_SELF]?phpinfo=phpinfo\"&#62;
phpinfo&#60;/a&#62;");
}else{
        echo "&#60;a href=\"$_SERVER[PHP_SELF]?phpinfo=phpinfo\"&#62;
phpinfo&#60;/a&#62;&#60;br&#62;&#60;br&#62;";
        echo "&#60;font color=red&#62;&#60;b&#62;If everything looks good, but you 
still have problems, get the ";
        echo "&#60;a href=\"http://nukecops.com/downloads-cat-7.htm\"&#62;
analyzer from NukeCops&#60;/a&#62;&#60;/b&#62;&#60;/font&#62;&#60;br&#62;&#60;br&#62;";
        echo "&#60;b&#62;Connection Test Script connected to your MySQL server 
successfully!&#60;br&#62;";
        echo "&#60;br&#62;\$dbuname = \"$dbuname\";&#60;br&#62;\$dbtype = \"$dbtype\";
&#60;br&#62;\$prefix = \"$prefix\";&#60;br&#62;\$user_prefix = \"$user_prefix\";&#60;br&#62;";
        if (mysql_select_db($dbname)) {
                echo "&#60;br&#62;Connection to your database \"
&#60;font color=purple&#62;$dbname&#60;/font&#62;\" was also successful.&#60;br&#62;";
                $result = mysql_list_tables($dbname);
        if (!$result) {
                print "DB Error, could not list tables\n";
                print 'MySQL Error: ' . mysql_error();
                die();
        }
        $i=0;
        $stufftoprint = "";
        while ($row = mysql_fetch_row($result)) {
                $tablename = $row[0];
                if($tablename == "".$prefix."_authors") {
                        $result4 = mysql_query("select aid from $tablename");
                        while(list($admin_name) = mysql_fetch_row($result4)) {
                                $admin_names .= "$admin_name, &#38;nbsp;";
                        }
                }
                $result3 = mysql_query("select * from $tablename");
                        $numFields = mysql_num_fields($result3);
                        $numRows = mysql_num_rows($result3);
                        $rows = "rows";
                        $fields = "fields";
                        if($numFields == 1) {$fields = "field";}
                        if($numRows == 1) {$rows = "row";}
                $stufftoprint .= "Table: &#60;font color=purple&#62;$tablename
&#60;/font&#62; &#38;nbsp;($numFields $fields / $numRows $rows)\n&#60;br&#62;";
                $i++;
        }
        if($dbtype != "MySQL" AND eregi("mysql",$dbtype)) {
                echo "&#60;br&#62;&#60;font color=red&#62;&#60;b&#62;But, you need to set &#60;/b&#62;
&#60;/font&#62;&#60;font color=purple&#62;&#60;b&#62; \$dbtype = \"MySQL\"; &#60;/b&#62;&#60;/font&#62;";
                echo "&#60;font color=red&#62;&#60;b&#62; &#38;nbsp;&#38;nbsp; in your config.php!!!!!!!!&#60;/b&#62;&#60;/font&#62;&#60;br&#62;";
        }
        echo "&#60;br&#62;There are &#60;font color=purple&#62;$i tables&#60;/font&#62; in your \"
&#60;font color=purple&#62;$dbname&#60;/font&#62;\" database&#60;br&#62;";
        echo "(by default, there are 89 fields in phpnuke 6.5 and 76 fields 
in phpnuke 6.0)&#60;br&#62;";
        if($i&#60;66) {
                echo "&#60;br&#62;&#60;font color=red&#62;&#60;b&#62;You don't seem to have all the 
tables installed.&#60;br&#62;Get the ";
                echo "&#60;a href=\"http://www.nukeresources.com/modules.php?name=Downloads
&#38;d_op=viewdownload&#38;cid=79\"&#62;Web Installer&#60;/a&#62; for your version of 
phpnuke&#60;/b&#62;&#60;/font&#62;&#60;br&#62;";
        }
        echo "&#60;br&#62;These are the admin names (aid) in your nuke_authors 
table: &#38;nbsp;&#60;font color=purple&#62;$admin_names&#60;/font&#62;&#60;br&#62;";
        echo "&#60;br&#62;Now check this list of tables with your nuke.sql file:&#60;br&#62;&#60;br&#62;$stufftoprint&#60;/b&#62;";
        }else {
                if(mysql_query("CREATE DATABASE $dbname")) {
                        echo "&#60;br&#62;Your database \"$dbname\" did not exist, 
but this script just created it sucessfully&#60;br&#62;";
                        echo "Now, you need to get the appropriate 
&#60;a href=\"http://www.nukeresources.com/modules.php?name=Downloads
&#38;d_op=viewdownload&#38;cid=79\"&#62;";
                        echo "Web Installer from nukeresources.com&#60;/a&#62;";
                        die();
                }
                echo "&#60;br&#62;However, the \"$dbname\" database does not exist. 
If that is not the correct name, then put in the correct ";
                echo "name for&#60;br&#62;&#60;font color=purple&#62;
\$dbname =\"$dbname\";&#60;/font&#62;&#38;nbsp;&#38;nbsp; (in your config.php)
&#60;br&#62;If you have not created the database yet, then ";
                echo "create it. If you are not the server, then ask your 
web host to create it for you.&#60;br&#62;";
                echo "&#60;br&#62;Then, get the appropriate 
&#60;a href=\"http://www.nukeresources.com/modules.php?name=Downloads
&#38;d_op=viewdownload&#38;cid=79\"&#62;";
                echo "Web Installer from nukeresources.com&#60;/a&#62;";
        }
}
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="ANALYZE-PHP"
>3.9.1.3. analyze.php</A
></H3
><P
>The <A
HREF="http://nukecops.com/downloads-file-13-details-Analyzer.html"
TARGET="_top"
>analyze.php</A
> script from Paul Laudanski (a.k.a. <A
HREF="http://zhen-xjell.com"
TARGET="_top"
>Zhen-Xjell</A
>) is the most elaborate from all the three script presented here. Rename the file to "analyze.php", transfer it to the same place that your config.php file is found and call it from your browser. For a preview of what it reports, <A
HREF="http://nukecops.com/analyze.php"
TARGET="_top"
>run analyze.php for the nukecops site</A
>. The code has been successfully tested for Nuke versions 6.5B6, 6.5B5, 6.0, 5.6.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-ANALYZE-MYSQL-CONNECTION"
></A
><P
><B
>Figure 3-25.    analyze.php: MySQL connection transcript.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/analyze-mysql-connection.png"><DIV
CLASS="CAPTION"
><P
>analyze.php: MySQL connection transcript.</P
></DIV
></P
></DIV
></DIV
></P
><P
>The script not only tests your MySQL database connection (see <A
HREF="common-installation-problems.html#FIG-ANALYZE-MYSQL-CONNECTION"
>Figure 3-25</A
>), but also displays information on:</P
><P
></P
><UL
><LI
><P
>config.php settings</P
></LI
><LI
><P
>SMTP (mail server) settings</P
></LI
><LI
><P
>GD (graphics) library settings</P
></LI
><LI
><P
>Databases</P
></LI
><LI
><P
>Modules</P
></LI
><LI
><P
>Blocks</P
></LI
><LI
><P
>Notices</P
></LI
><LI
><P
>Ranks</P
></LI
><LI
><P
>Administrators and Moderators</P
></LI
><LI
><P
>php,ini settings</P
></LI
><LI
><P
>Security code</P
></LI
><LI
><P
>Recursive file listing along with resource permissions</P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-ANALYZE-WARNING-MYSQL"
></A
><P
><B
>Figure 3-26.    analyze.php: MySQL security warning.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/analyze-warning-mysql.png"><DIV
CLASS="CAPTION"
><P
>analyze.php: MySQL security warning.</P
></DIV
></P
></DIV
></DIV
></P
><P
>It also checks for MySQL (see <A
HREF="common-installation-problems.html#FIG-ANALYZE-WARNING-MYSQL"
>Figure 3-26</A
>) and <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> (see <A
HREF="guard-security-vulnerabilities-in-php-nuke.html#FIG-ANALYZE-WARNING-PHP"
>Figure 23-1</A
>) vulnerabilities and reports them to you if they need to be patched.</P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="WARNING-MYSQL-FETCH-ROW-SUPPLIED-ARGUMENT"
>3.9.2. Warning: mysql_fetch_row(): supplied argument is not a valid MySQL result resource</A
></H2
><P
>You get this</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Warning: mysql_fetch_row(): supplied argument is not a valid MySQL result 
resource in html/includes/sql_layer.php on line 286</PRE
></FONT
></TD
></TR
></TABLE
><P
>This is a very general error. Most of the time it just means that you could not connect to the database (for whatever reason) and thus the result set you tried to fetch was not a &#8220;valid MySQL result resource&#8221;. You should try first to get a more descriptive error message. For this purpose, you must edit the "case" lines in the sql_layer.php file.</P
><P
>Example:This is the "case" that starts at line 286 in the nuke 6.5 sql_layer.php (for the line 286 error), at line 300 in the nuke 6.0 sql_layer.php (for the line 301 error message) - or line 285 in nuke 5.6 (for the line 286 error message):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    case "MySQL":
        $row = mysql_fetch_row($res);
        return $row;
    break;;</PRE
></FONT
></TD
></TR
></TABLE
><P
>Edit it like this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    case "MySQL":
        if ($row = mysql_fetch_row($res)) {
           return $row;
        } else {
           print (mysql_error());
        }
    break;;</PRE
></FONT
></TD
></TR
></TABLE
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Please note:</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>This will NOT fix your problem. But it will give a more descriptive message as to what the error cause is.</P
></TD
></TR
></TABLE
></DIV
><P
>See <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=37"
TARGET="_top"
>Warning: mysql fetch row: supplied argument is not a valid MySQL result resource</A
> and <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=14121"
TARGET="_top"
>submit news problem</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="CALL-TO-UNDEFINED-FUNCTION"
>3.9.3. Call to undefined function: message_die() in db.php line 88</A
></H2
><P
>This is the most &#8220;popular&#8221; error. It basically means that it couldn't connect to the database. You may get this error even if you did everything right, depending on the version you are using. The reasons are multiple:</P
><P
></P
><UL
><LI
><P
>Are you sure you downloaded *all* the files? Maybe some file is missing. Perhaps you wanted to save some bandwidth and omitted some crucial file or directory, or subdirectory.</P
></LI
><LI
><P
>You didn't enter "MySQL" as the dbtype in config.php (see <A
HREF="config-php-file.html"
>Section 3.7</A
>). It must be exactly with a Capital M, a small y, and capital S, Q and L.</P
></LI
><LI
><P
>The code tries to select the database, but the database is not there. Create the database and populate it with tables (see <A
HREF="installation-process.html#DATABASE-CREATION"
>Section 3.2.4</A
>).</P
></LI
><LI
><P
>You have some error in the config.php file (see <A
HREF="config-php-file.html"
>Section 3.7</A
>). Double check that the username and password are correct. Don't forget, the " and ; <EM
>are</EM
> important. And DON'T remove the $ in front of the variables! If you used an editor like Notepad, Wordpad, or some editor that you are not 100% sure that works correctly, delete the config.php file, get a fresh copy and edit it with a <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=122"
TARGET="_top"
>decent text editor</A
> (see <A
HREF="editing-php-nuke-files.html"
>Chapter 11</A
>).</P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="FAILED-OPENING-LANG-PHP"
>3.9.4. Error: Failed opening 'language/lang-.php' for inclusion</A
></H2
><P
>You either </P
><P
></P
><UL
><LI
><P
>didn't install the language files lang-xxx.php (like language/lang-english.php), or </P
></LI
><LI
><P
>you cannot connect to the database, so that the value of the default language could not be set and is empty (and that's why you get an error about lang-.php, instead of lang-english.php, or lang-french.php etc.). Try the small test script (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?p=72"
TARGET="_top"
>Call to undefined function: message die in db.php line 88</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
include("config.php");
mysql_connect("$dbhost", "$dbuname", "$dbpass");
mysql_select_db("$dbname");
echo mysql_error();
phpinfo();
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>(see also <A
HREF="common-installation-problems.html#TEST-SCRIPTS"
>Section 3.9.1</A
>), or</P
></LI
><LI
><P
>your include path information is missing some paths (like ".", the current directory), see <A
HREF="common-installation-problems.html#INCLUDE-PATH"
>Section 3.9.10</A
>.</P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="FAILED-OPENING-SQL-LAYER-PHP"
>3.9.5. Fatal error: Failed opening required 'includes/sql_layer.php'</A
></H2
><P
>Your web server could not open includes/sql_layer.php. There are many reasons for this (<A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=17"
TARGET="_top"
>Fatal error: Failed opening required includes/sql layer.php</A
>): </P
><P
></P
><UL
><LI
><P
>The file is really not there, something went wrong with the installation - reinstall (see <A
HREF="installation.html"
>Chapter 3</A
>).</P
></LI
><LI
><P
>The file is there but the web server does not have the right to open it - check permissions (see <A
HREF="installation-process.html#PERMISSIONS"
>Section 3.2.3</A
>).</P
></LI
><LI
><P
>There is a .htaccess file somewhere in the directory hierarchy that denies access to you. </P
></LI
><LI
><P
>There is something wrong with the include path of the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> interpreter (see <A
HREF="common-installation-problems.html#INCLUDE-PATH"
>Section 3.9.10</A
>).</P
></LI
></UL
><P
>You might see more information on the cause of your problem if you have access to the web server access and error logs.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="SORRY-SUCH-FILE-DOESNT-EXIST"
>3.9.6. Sorry, such file doesn't exist...</A
></H2
><P
>Whenever you try to access a module (or simply your site), you ge the error (see, for example: <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=143"
TARGET="_top"
>Humpa Chess Install</A
> and <A
HREF="Fehler: Sorry, such file doesn't exist"
TARGET="_top"
>http://www.karakas-online.de/forum/viewtopic.php?t=348</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Sorry, such file doesn't exist...</PRE
></FONT
></TD
></TR
></TABLE
><P
>Of course, following a classic attitude to error handling, it doesn't tell you which file does not exist...<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
>  We thus have to search the code to see what is happening:</P
><P
>The error</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Sorry, such file doesn't exist...</PRE
></FONT
></TD
></TR
></TABLE
><P
>comes from mainfile.php. There are exactly three occurences of it in the code. In all three the pattern is the same (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=353"
TARGET="_top"
>Sorry, such file doesn't exist...</A
>):</P
><P
></P
><OL
TYPE="1"
><LI
><P
>First it is tested if you are a normal user, an administrator, if the module is active etc., depending on the circumstances.</P
></LI
><LI
><P
>Then, a test is made on the existence of $modpath. Upon its failure, you get the error above:</P
></LI
></OL
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$modpath .= "modules/$name/$file.php";
if (file_exists($modpath)) {
    include($modpath);
} else {
    die ("Sorry, such file doesn't exist...");
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>$modpath, in turn, is the path to the module in question. As you can see in the code snippet yourself, it depends on the value of $name, which is the name of the module, and $file, which is...well, for this you have to scroll up to the start of mainfile.php. There, we read</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>if (!isset($file)) { $file="index"; }</PRE
></FONT
></TD
></TR
></TABLE
><P
>which in plain english says "if the variable $file is NOT set, set it to 'index'".</P
><P
>Putting all the puzzle pieces together, we arrive to the conclusion that the file</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>modules/YourModule/index.php</PRE
></FONT
></TD
></TR
></TABLE
><P
>is not there.</P
><P
>There are various things you should check and all have to do with trying to find out why your web server cannot find the index file of the module you are trying to access:</P
><P
></P
><UL
><LI
><P
>Is the index.php file really there in the modules/YourModule folder?</P
></LI
><LI
><P
>Did you set up the permissions (<A
HREF="installation-process.html#PERMISSIONS"
>Section 3.2.3</A
>, <A
HREF="guard-security-vulnerabilities-in-php-nuke.html#PERMISSIONS2"
>Section 23.4.4</A
>) correctly? Does your web server have read access to that folder and file?</P
></LI
><LI
><P
>Is there a (hidden) .htaccess file (<A
HREF="htaccess-file.html"
>Section 25.4</A
>) somewhere in your document tree that prevents the web browser from accessing that file?</P
></LI
><LI
><P
>Did you install all files? You have to dive in the docs of that module to see if you are missing anything.</P
></LI
><LI
><P
>Check if</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>http://www.yoursite.com/modules/YourModule/index.php</PRE
></FONT
></TD
></TR
></TABLE
><P
>returns an error. Substitute YourModule with the name of the module that is giving you the headaches.</P
></LI
><LI
><P
>If this is a module you downloaded and installed yourself (as opposed to a preinstalled one, see <A
HREF="preinstalled-modules.html"
>Section 6.1</A
>): Did you really follow the instructions? Did you download the right file? Did you extract it in the modules folder?</P
></LI
><LI
><P
>Did you see the module in the list of modules and did you activate it (<A
HREF="administration-functions.html"
>Section 7.1</A
> and <A
HREF="common-installation-problems.html#FIG-MODULES-ADMIN-2"
>Figure 3-27</A
>)?</P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-MODULES-ADMIN-2"
></A
><P
><B
>Figure 3-27.    Modules administration panel.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/modules-admin.png"><DIV
CLASS="CAPTION"
><P
>Modules administration panel.</P
></DIV
></P
></DIV
></DIV
></P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="WARNING-SETLOCALE"
>3.9.7. Warning: setlocale(): Passing locale category name as string is deprecated</A
></H2
><P
>All of a sudden, you get tons of warnings like this one:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Warning: setlocale(): Passing locale category name as string is deprecated. 
Use the LC_* -constants instead. 
in /home/chris/public_html/nuke/mainfile.php on line 565</PRE
></FONT
></TD
></TR
></TABLE
><P
>The problem comes suddenly after your ISP has upgraded to a newer version of <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> (without telling you, of course! <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
> </P
><P
>To fix this, remove the quotes that are around "LC_TIME" in the line/file mentioned in the error message displayed (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=21"
TARGET="_top"
>Warning: setlocale(): Passing locale category name as string is deprecated</A
> and <A
HREF=""
TARGET="_top"
>News article: Warning: setlocale(): Passing locale category name as string is deprecated.</A
>).</P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Attention: repetitious error!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>You may get this error again and again. You will have to do the above change in *all* occurences of the LC_something constants! I once counted 17 of them, scattered all around the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> files...</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="SECURITY-CODE"
>3.9.8. Security code is not showing up</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-SECURITY-CODE"
></A
><P
><B
>Figure 3-28.    Security code in the User Login screen.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/security-code.png"><DIV
CLASS="CAPTION"
><P
>Security code in the User Login screen.</P
></DIV
></P
></DIV
></DIV
></P
><P
>You just installed <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> for the first time, created a super user, and you can't log in because the security code graphic (see <A
HREF="common-installation-problems.html#FIG-SECURITY-CODE"
>Figure 3-28</A
>) is coming up as a dead image.<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
> </P
><P
>This is a frequent error, but it seems that the reasons (and cures) may be multiple (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=22"
TARGET="_top"
>Security code graphic not showing up</A
>, <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=14758"
TARGET="_top"
>security image stopped working</A
>):</P
><P
></P
><UL
><LI
><P
>You changed something in the language files and put comments - remove the comments.</P
></LI
><LI
><P
>You (or your ISP) don't have the GD library loaded. To find out if you have the GD library loaded, run a test script like test.php (see <A
HREF="common-installation-problems.html#TEST-PHP"
>Section 3.9.1.1</A
>), ConnectTest.php (see <A
HREF="common-installation-problems.html#CONNECTTEST-PHP"
>Section 3.9.1.2</A
>) or analyze.php (see <A
HREF="common-installation-problems.html#ANALYZE-PHP"
>Section 3.9.1.3</A
>). The first two display the output of the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> phpinfo() function directly ( <A
HREF="common-installation-problems.html#FIG-PHPINFO-GD"
>Figure 3-29</A
>), analyze.php will display an only slightly different information box on GD (<A
HREF="common-installation-problems.html#FIG-ANALYZE-GD"
>Figure 3-30</A
>). If you are on <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
> 2000, read <A
HREF="http://forums.devshed.com/archive/5/2002/08/3/41595"
TARGET="_top"
>how to install GD on a Win2K box</A
>.</P
></LI
><LI
><P
>The gfx function in admin.php is not always working fine. You could try to put it in a separate file and change the call from admin.php to the new file. See Humpa's posting in <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=14550"
TARGET="_top"
>Admin Security login jpeg not showing</A
> for an example.</P
></LI
><LI
><P
>Activate (or reactivate) the Your Account module. If your Admin's security code works, but the others don't (showing an read X mark for others), then you may want to set the Your Account module as viewable by <EM
>all</EM
> visitors (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=299"
TARGET="_top"
>PhpNuke 6.5 Security Code Problem</A
>). </P
></LI
></UL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHPINFO-GD"
></A
><P
><B
>Figure 3-29.    phpinfo(): GD library information.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/phpinfo-gd.png"><DIV
CLASS="CAPTION"
><P
>phpinfo(): GD library information.</P
></DIV
></P
></DIV
></DIV
></P
><P
>For more thoughts on this problem, read <A
HREF="http://www.humpa.com/HelpMeHumpa/index.php?humpa_id=3#h3"
TARGET="_top"
>Humpa's <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> FAQ on the security code</A
>. </P
><P
>If you want to use a PNG or GIF image for the security code, consult the solution in <A
HREF="http://www.nukefixes.com/postlite44-0.html"
TARGET="_top"
>Using a png or gif for security code image</A
>. If you want to display the security code as text, rather than an image, see <A
HREF="http://www.nukefixes.com/postlite76-0.html"
TARGET="_top"
>security code in plain text format</A
> - but then there is no point to it (the idea is to display an image that makes automatic number recognition difficult to robots), then you can disable it just as well.</P
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-ANALYZE-GD"
></A
><P
><B
>Figure 3-30.    analyze.php: GD library information.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/analyze-gd.png"><DIV
CLASS="CAPTION"
><P
>analyze.php: GD library information.</P
></DIV
></P
></DIV
></DIV
></P
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="BYPASS-SECURITY-CODE"
>3.9.8.1. How to bypass the security code</A
></H3
><P
>Another approach could be to bypass the security code altogether. This is probably the only option you have (unless you are willing to display it as plain text - see the links at the end of this section for this), if your ISP refuses to load the GD library: without GD, no security code image - without security code image, you cannot enter anything in the security code field, and you get an &#8220;Access denied&#8221; error. </P
><P
>Here is how you disable the security code:</P
><P
>Find the 7 occurences of:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>extension_loaded("gd")</PRE
></FONT
></TD
></TR
></TABLE
><P
>For the Admin login, there is one in the admin.php, and one in the auth.php. For Users, there will be five in the modules/Your_Account/index.php (and there might be one in the block-Login.php, and/or one in the block-User_Info.php, if they are modified). Replace all of the occurances with this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$user == "whatever"</PRE
></FONT
></TD
></TR
></TABLE
><P
>Follow the above instruction exactly. </P
><DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Be careful not to introduce syntax errors!</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Changes like the last one (bypassing the security code) require extreme caution on your part. All too big is the risk of introducing new errors, while trying to correct old ones! If you get an error, it does't mean the solution ceased to work for you. Check for syntax errors that you might have introduced with your editing. Most probably, you will find something.
<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
> 
See <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=18076"
TARGET="_top"
>syntax error, security images removed</A
> for a real world example.</P
></TD
></TR
></TABLE
></DIV
><P
>If you have one of the later versions of PHP-Nuke, you can try a trick: edit the config.php file and if you find a line there, like this one:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$gfx_chk = 7;</PRE
></FONT
></TD
></TR
></TABLE
><P
>and change it to (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=266"
TARGET="_top"
>How to disable the security code</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$gfx_chk = 0;</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="WARNING-INVALID-ARGUMENT-SUPPLIED"
>3.9.9. Warning: Invalid argument supplied for foreach() in mainfile.php</A
></H2
><P
>You get errors and warnings like:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Warning: Invalid argument supplied for foreach() in ...mainfile.php on line 42
Warning: Invalid argument supplied for foreach() in ...mainfile.php on line 57
Warning: Cannot add header information - headers already sent by 
(output started at ...mainfile.php:42) in ...mainfile.php on line 165</PRE
></FONT
></TD
></TR
></TABLE
><P
>You must have at least <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> v. 4.1.0 to run <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.5 and later. See <A
HREF="prerequisites.html"
>Section 3.1</A
> and <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=36"
TARGET="_top"
>Warning: Invalid argument supplied for foreach()</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="INCLUDE-PATH"
>3.9.10. Include path is wrong</A
></H2
><P
>If the include path happens to be wrong (you can see your include path in the output of test.php, see <A
HREF="common-installation-problems.html#TEST-SCRIPTS"
>Section 3.9.1</A
>), you could try the following: </P
><P
>Suppose your nuke files are in /usr/local/httpd/htdocs/nuke/html (just an example ). Suppose that this is the directory that contains</P
><P
>the includes directory beneath it. Then create a .htaccess file (<A
HREF="htaccess-file.html"
>Section 25.4</A
>) that contains the line </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>php_value include_path .:/usr/local/httpd/htdocs/nuke/html/includes</PRE
></FONT
></TD
></TR
></TABLE
><P
>(no equal signs, just copy it in the .htaccess file). In most cases the include path will be correctly configured. In the few ones that it's not, the most probable cause of errors will be a missing &#8220;current directory&#8221; (a missing dot in the include path).</P
><P
>If you have access to the php.ini file, you can do the same there. Find the line where include_path is defined and add the dot in the list, e.g.:</P
><P
>include_path = &#8220;.:/usr/local/httpd/htdocs/nuke/html/includes&#8221;</P
><P
>See also <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=381"
TARGET="_top"
>Warning: main(/db/db.php): failed to open stream</A
> and <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=17"
TARGET="_top"
>Fatal error: Failed opening required 'includes/sql_layer.php"</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="MAIL-PROBLEMS"
>3.9.11. Users don't receive any confirmation mails</A
></H2
><P
>This is not a <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> error. <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> uses PHP's mail() function and this, in turn, uses the mail server that is found on the web server. If that mail server is configured incorrectly, you will get problems with mail. The best way to solve them is to talk to your ISP and try to find out which configuration is used for your case. We have seen cases of ISPs that would configure the mail server to deliver mail only to local domains, thus making communication between <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> and users of other domains impossible (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=137"
TARGET="_top"
>E-mail problems</A
>, <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?p=56082"
TARGET="_top"
>my nuke only sends mail to my domain</A
>).</P
><P
>Now, what do you do after you have fixed your mail server? Those e-mails with the activation links have already been sent once, and since they never reached their destinations... You are losing users because you cannot resend them! </P
><P
>If you ever needed to resend an activation email, or just wanted to delete one that was awaiting activation, then you will appreciate the <A
HREF="http://ravenphpscripts.com/download-file-59.html"
TARGET="_top"
>Resend module</A
>. It will help you manage the temp_users table.</P
><P
>If you want users to be registered directly, without confirmation mails, see <A
HREF="modifying-php-nuke-moduke-your-account.html#REGISTER-USERS-IMMEDIATELY"
>Section 18.6.5</A
>. If you want to disable registration, see <A
HREF="modifying-php-nuke-moduke-your-account.html#DISABLE-REGISTRATION"
>Section 18.6.4</A
>. If you want to approve every user who applied for registration, you can use the Approve Membership module (see <A
HREF="php-nuke-add-on-modules.html#PHP-NUKE-APPROVE-MEMBERSHIP-MODULE"
>Section 8.3.4</A
> and <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=83"
TARGET="_top"
>Authorize accounts</A
>).</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="LOGIN-LOOP"
>3.9.12. Login loop</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-LOGIN-SCREEN"
></A
><P
><B
>Figure 3-31.    User Login screen.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/security-code.png"><DIV
CLASS="CAPTION"
><P
>User Login screen.</P
></DIV
></P
></DIV
></DIV
></P
><P
>You login without problems, but whenever you try to access a function or links of the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site, you are returned to the login screen and are asked to enter your user name and password again - a very annoying procedure!</P
><P
>The first thing you should check, is if you have cookies enabled in your browser. <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> uses cookies to store authentication information on your computer (in the cookies file, see also <A
HREF="guard-security-vulnerabilities-in-php-nuke.html#COOKIES"
>Section 23.4.5</A
>), in order to be able to recognize you on your next page request (remember, HTTP is a stateless protocol, meaning that, whenever the web server serves you a page you requested, it forgets about it, so the next page request is seen as being completely unrelated to the previous one). Thus, you must have cookies enabled to use <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
>.</P
><P
>If enabling cookies does not make the problem disappear, it might be a permissions problem (see <A
HREF="installation-process.html#PERMISSIONS"
>Section 3.2.3</A
>), in which case you should contact the administrator of the site.</P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>3rd party cookies</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you are experimenting with frames, you will find out that the cookie will be set fine, as long as the  frame and the parent page are on the same site. If the frame is a different site than the parent, then you will have to allow 3rd party cookies (a lower security setting), see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=13433"
TARGET="_top"
>Why do users have to put security to "low" to be able to log</A
>.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="SQL-SYNTAX-ERROR"
>3.9.13. You have an error in your SQL syntax near '-------------</A
></H2
><P
>When you try to create the database tables with the nuke.sql file (see <A
HREF="installation-process.html#DATABASE-CREATION"
>Section 3.2.4</A
>), you get an error:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>--
---------------------------------------------------------
-- 
-- 
CREATE TABLE confirm (
  confirm_id char(32) NOT NULL default ",
  session_id char(32) NOT NULL default ",
  code char(6) NOT NULL default ",
  PRIMARY KEY  (session_id,confirm_id)
) TYPE=MyISAM
MySQL said:
You have an error in your SQL syntax near '---------------------------------------------------------
-- 
-- 
CREATE TABLE co' at line 2</PRE
></FONT
></TD
></TR
></TABLE
><P
>This is because your nuke.sql file came with nice, useless long lines containing dashes, like these ones:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>---------------------------------------------------------</PRE
></FONT
></TD
></TR
></TABLE
><P
>Just use a <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=122"
TARGET="_top"
>decent text editor</A
> (see <A
HREF="editing-php-nuke-files.html"
>Chapter 11</A
>) and delete that long line, or put a # in front of it. If that doesn't help, put a # in front of every line that starts with a dash, making it a comment. SQL accepts &#8220;--&#8221; as the string that starts a comment, but it seems that MySQL does not like the rest of the dashes (after the first two ones) as a comment.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="ERROR-UPDATE-PRIVATE-FORUM-PERMISSIONS"
>3.9.14. Error: Couldn't update private forum permissions</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-FORUM-3"
></A
><P
><B
>Figure 3-32.    Administration panel: Forums.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/forum.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Forums.</P
></DIV
></P
></DIV
></DIV
></P
><P
>You get the following error everytime you try to make a particular user (or a site administrator) a moderator in <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> 6.5-7.0:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Couldn't update private forum permissions
DEBUG MODE
SQL Error : 1064 You have an error in your SQL syntax near ' 1)' at line 2
INSERT INTO nuke_bbauth_access (forum_id, group_id, auth_mod) VALUES (3, , 1)
Line : 385
FIle: xxxx/modules/Forums/admin/admin_ug_auth.php</PRE
></FONT
></TD
></TR
></TABLE
><P
>This is a bug modules/Forums/admin/admin_ug_auth.php - the INSERT statement is missing a string value in the VALUES clause. Try this <A
HREF="http://www.nukeresources.com/files/admin_ug_auth.zip"
TARGET="_top"
>admin_ug_auth.php</A
> instead. See <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=16633"
TARGET="_top"
>Couldn't update private forum permissions</A
> and <A
HREF="http://www.nukecops.com/postp77425.html"
TARGET="_top"
>Site Admin &#38; Moderator</A
> for more details.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="INVALID-SESSION-IN-FORUMS"
>3.9.15. Invalid session in forums</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-FORUM-4"
></A
><P
><B
>Figure 3-33.    Administration panel: Forums.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/forum.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Forums.</P
></DIV
></P
></DIV
></DIV
></P
><P
>You installed the <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Forum (which is the phpBB forum starting v.6.5 of PHP-Nuke, see <A
HREF="administration-functions.html#PHPBB-FORUM-ADMINISTRATION"
>Section 7.1.1</A
>), but now, when you try to access it you get the error: </P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Invalid session.</PRE
></FONT
></TD
></TR
></TABLE
><P
>Solution: In the forum configuration, go to the Cookies section and change the name of the cookie file from "phpbb2mysql " to something more original or unique, like "phpbb2mysql2" . You also need to have the right cookie domain, i.e. if you have installed the forum under http://yoursite.com/nuke/html, the cookie domain should be http://yoursite.com/nuke/html too. </P
><P
>&#8220;What is this session id anyway?&#8221;, you may ask. This is quite a technical matter and is covered in detail in <A
HREF="session-management.html"
>Chapter 10</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="CANNOT-CREATE-ADMINISTRATOR-ACCOUNT"
>3.9.16. You cannot create the administrator account</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-EDIT-ADMINS-2"
></A
><P
><B
>Figure 3-34.    Administration panel: Edit Admins.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/authors.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Edit Admins.</P
></DIV
></P
></DIV
></DIV
></P
><P
>Everything looks fine with your newly created <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> site, then you are told by the system that there is no administrator yet and you should create one:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>There are no Administrators Accounts yet, proceeed to create the Super User:</PRE
></FONT
></TD
></TR
></TABLE
><P
>You do what you are told and create that Super User, but the next time you get the same message. It seems that you cannot create the administrator account!</P
><P
>The message that asks you to create the Super User is the _NOADMINYET message whose translation you can find in the various language files (see <A
HREF="general-php-nuke-texts.html"
>Section 13.1</A
>) in the admin/language folder. For example, in admin/language/lang-english.php, we read:</P
><P
>define("_NOADMINYET","There are no Administrators Accounts yet, proceeed to create the Super User:");</P
><P
>The _NOADMINYET message is output in admin.php:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$the_first = $db-&#62;sql_numrows($db-&#62;sql_query("SELECT * FROM ".$prefix."_authors"));
if ($the_first == 0) {
    if (!$name) {
    include("header.php");
    title("$sitename: "._ADMINISTRATION."");
    OpenTable();
    echo "&#60;center&#62;&#60;b&#62;"._NOADMINYET."&#60;/b&#62;&#60;/center&#62;&#60;br&#62;&#60;br&#62;"</PRE
></FONT
></TD
></TR
></TABLE
><P
>From the code we see that it is echoed only if $the_first is 0, meaning no entries in the $prefix_authors table. Thus, for some reason, the nuke_authors table (assuming your $prefix is "nuke" in config.php), is not filled. You can do the following (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=289"
TARGET="_top"
>I cant make my Admin acount work</A
>):</P
><P
>You should check the entries in nuke_authors. You can do this either from the MySQL prompt with</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>select aid, name, email, pwd from nuke_authors;</PRE
></FONT
></TD
></TR
></TABLE
><P
>or with the "browse" function of phpMyAdmin (<A
HREF="phpmyadmin2.html"
>Section 3.4</A
>).</P
><P
>If your Super Admin is there, then it is weird...<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
> </P
><P
>If the Super Admin is not there, then you can't write to the database. To check this possibility, find the function create_first() in admin.php. There, you will see two lines with a call to sql_query. They are both identical:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$db-&#62;sql_query($sql);</PRE
></FONT
></TD
></TR
></TABLE
><P
>Insert the line:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>echo mysql_error();</PRE
></FONT
></TD
></TR
></TABLE
><P
>after each one. This will echo a more descriptive error message (see <A
HREF="common-installation-problems.html#DESCRIPTIVE-ERROR-MESSAGE"
>Section 3.9.23</A
>) and may lead you to the solution. But, as experience shows (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=289"
TARGET="_top"
>I cant make my Admin acount work</A
>), you most probably have set the wrong values in your config.php (<A
HREF="config-php-file.html"
>Section 3.7</A
>).<SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_wink.png"></SPAN
>This is a known issue and a solution is presented in <A
HREF="common-miscellaneous-errors.html#RSS-BLOCK-ERROR"
>Section 3.10.1</A
>.</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
></PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="ADMINISTRATOR-PASSWORD-LOST"
>3.9.17. You lost the administrator password, or deleted the admin account</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-EDIT-ADMINS-3"
></A
><P
><B
>Figure 3-35.    Administration panel: Edit Admins.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/authors.png"><DIV
CLASS="CAPTION"
><P
>Administration panel: Edit Admins.</P
></DIV
></P
></DIV
></DIV
></P
><P
>You did a Very Big Mistake - you erased your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> Super Admin! Now you cannot do anything on your website! Your powers are those of a normal member... <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
>How do you get your Admin back? </P
><P
>You can try one of the following two solutions (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=11"
TARGET="_top"
>I deleted my Super Admin. How do I get him back?</A
>):</P
><P
></P
><OL
TYPE="1"
><LI
><P
>You can use phpMyAdmin (or a similar DB administration package, see <A
HREF="phpmyadmin.html"
>Section 3.3</A
>) and look in (the technical term on the link is &#8220;browse&#8221;) the nuke_authors table. You can take two approaches:</P
><P
></P
><OL
TYPE="a"
><LI
><P
>See if your admin is still there, and you can set a new password (you'll have to choose &#8220;MD5&#8221; from the dropdown menu on the pass field, see <A
HREF="common-installation-problems.html#FIG-PHPMYADMIN-FIELD-FUNCTIONS-2"
>Figure 3-36</A
>). If your admin is not there, then just add a new row to the table and put in the missing info. </P
></LI
><LI
><P
>Or you can just delete the line with the administrator name and point your browser to the admin.php file - you will then be prompted to enter a new admin name and password. You may enter whatever new values you like there, but you should not create a user with the same name, even if prompted to.</P
></LI
></OL
></LI
><LI
><P
>Using phpMyAdmin (or directly in MySQL), go to the nuke_authors table and make your password dc647eb65e6711e155375218212b3964 - that will make it Password, then just login and change it. Here we make use of the fact that the MD5 hash of the word &#8220;Password&#8221; is dc647eb65e6711e155375218212b3964.</P
></LI
></OL
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-PHPMYADMIN-FIELD-FUNCTIONS-2"
></A
><P
><B
>Figure 3-36.    phpMyAdmin: field functions.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/phpmyadmin-field-functions.png"><DIV
CLASS="CAPTION"
><P
>phpMyAdmin: field functions.</P
></DIV
></P
></DIV
></DIV
></P
><DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.png"
HSPACE="5"
ALT="Tip"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>How to compute the MD5 hash of an arbitrary password using only <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and your browser</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If you are curious about the MD5 hash of a certain password, but do not have easy access to a function that computes it, you can make use of the fact that the <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> interpreter of your web server can compute is for you.  Substitute XXXX for the password whose MD5 hash you want to compute in the following script:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#60;?php
$pass="XXXX";
$new_password = md5($pass);
print("MD5 hash of $pass = $new_password");
?&#62;</PRE
></FONT
></TD
></TR
></TABLE
><P
>and upload it somewhere on your web server. Then point your browser to it and you should see the answer. You can use it to change the password field of the nuke_authors table directly in MySQL.</P
></TD
></TR
></TABLE
></DIV
><P
>See <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=11383"
TARGET="_top"
>Admin Password - i've lost it</A
>, <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=18212"
TARGET="_top"
>Password help</A
> for discussions.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="GARBAGE-ON-PAGE"
>3.9.18. You get garbage in some parts of the page</A
></H2
><P
>If some parts of your page looks like containing garbage, it may be due to a compressed output from the server. You could try to disable compression by just commenting the line (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=289"
TARGET="_top"
>I cant make my Admin acount work</A
>):</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>ob_start('ob_gzhandler');</PRE
></FONT
></TD
></TR
></TABLE
><P
>or setting $do_gzip_compress to FALSE:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$do_gzip_compress = FALSE;</PRE
></FONT
></TD
></TR
></TABLE
><P
>in mainfile.php. The part that controls compression in mainfile.php is:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>$phpver = phpversion();
if ($phpver &#62;= '4.0.4pl1' &#38;&#38; strstr($HTTP_USER_AGENT,'compatible')) {
    if (extension_loaded('zlib')) {
        ob_end_clean();
        ob_start('ob_gzhandler');
    }
} else if ($phpver &#62; '4.0') {
    if (strstr($HTTP_SERVER_VARS['HTTP_ACCEPT_ENCODING'], 'gzip')) {
        if (extension_loaded('zlib')) {
            $do_gzip_compress = TRUE;
            ob_start();
            ob_implicit_flush(0);
            //header('Content-Encoding: gzip');
        }
    }
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>You might even have to comment it completely (see <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=16439"
TARGET="_top"
>PhpNuke wont show in IE or Opera</A
>).</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="COMPRESSED-OUTPUT-IN-FORUMS"
>3.9.19. Compressed output in forums</A
></H2
><P
><DIV
CLASS="FIGURE"
><A
NAME="FIG-FORUM-GZIP-COMPRESSION"
></A
><P
><B
>Figure 3-37.    Gzip compression in the Admin Panel of the Forums module.
   </B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="./images/forum-gzip-compression.png"><DIV
CLASS="CAPTION"
><P
>Gzip compression in the Admin Panel of the Forums module.</P
></DIV
></P
></DIV
></DIV
></P
><P
>You seem to be getting a compressed output in the forums. You are either seeing garbage, or you can see it in IE, but not in Mozilla. When you press &#8220;Refresh&#8221;, Mozilla reacts like you want to download something that is &#8220;encrypted&#8221; or compressed.</P
><P
>All this is a sign that you may be compressing the page twice. If, for example, your Apache has been already configured to send compressed output (with <A
HREF="http://www.schroepl.net/projekte/mod_gzip/index.htm"
TARGET="_top"
>mod_gzip</A
>, or some other technique for <A
HREF="http://perl.apache.org/docs/tutorials/client/compression/compression.html"
TARGET="_top"
>Web Content Compression</A
>), then you should disable gzip compression in the forums administration panel (from &#8220;General Admin, Configuration&#8221;, as in <A
HREF="common-installation-problems.html#FIG-FORUM-GZIP-COMPRESSION"
>Figure 3-37</A
>).</P
><P
>See also <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?p=58655"
TARGET="_top"
>Cannot see forum in Mozilla and see in IE</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="CANNOT-ADD-HEADER-INFORMATION-IN-FORUMS"
>3.9.20. Warning: Cannot add header information...in forums</A
></H2
><P
>You get errors of the form:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Warning: Cannot modify header information  headers already sent</PRE
></FONT
></TD
></TR
></TABLE
><P
>when vieweing the forums. There are two solutions (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=291"
TARGET="_top"
>Warning: Cannot add header information...in forums</A
>):</P
><P
></P
><OL
TYPE="1"
><LI
><P
>Near the start of mainfile.php find:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>42 = phpversion();
if (42 &#62;= '4.0.4pl1' &#38;&#38; strstr(Mozilla/4.0 (compatible; MSIE 6.0; &#60;productname&#62;Windows&#60;/productname&#62; NT 5.1),'compatible')) {
    if (extension_loaded('zlib')) {
        ob_end_clean();
        ob_start('ob_gzhandler');
    }
} else if (42 &#62; '4.0') {</PRE
></FONT
></TD
></TR
></TABLE
><P
>and change it to:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>42 = phpversion();
if (42 &#62;= '4.0.4pl1')
{
    ob_start('ob_gzhandler');
}else if (42 &#62; '4.0') {</PRE
></FONT
></TD
></TR
></TABLE
></LI
><LI
><P
>Add the following line to a .htaccess file (see <A
HREF="htaccess-file.html"
>Section 25.4</A
>) placed in your root <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> directory:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>PHP_FLAG output_buffering on</PRE
></FONT
></TD
></TR
></TABLE
><P
>or if you have access to php.ini, set:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>output_buffering=on;</PRE
></FONT
></TD
></TR
></TABLE
></LI
></OL
><P
>See also <A
HREF="http://www.nukefixes.com/postt36.html"
TARGET="_top"
>Warning: Cannot modify header information on Forums</A
> and <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?p=56538"
TARGET="_top"
>Cannot modify header information</A
>. To learn more about <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> output buffering, see <A
HREF="http://www.devshed.com/Server_Side/PHP/OutputBuffering/"
TARGET="_top"
>Output Buffering with PHP</A
> and <A
HREF="http://jinxidoru.com/tutorials/buffering.html"
TARGET="_top"
>PHP Output Buffering tutorial</A
>.</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
></PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="EMPTY-PAGE-IN-WINDOWS"
>3.9.21. In Windows, you get an empty page</A
></H2
><P
>You installed Apache, <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and MySQL in <SPAN
CLASS="PRODUCTNAME"
>Windows</SPAN
>. It seems to work, but when you try to run PHP-Nuke's index page, the browser starts  searching the page without showing anytihg. <SPAN
CLASS="INLINEMEDIAOBJECT"
><IMG
SRC="./images/icon_frown.png"></SPAN
>How do you get your Admin back? </P
><P
>This is too vague an error to trace down to anything specific with certainty, but there are indications (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=257"
TARGET="_top"
>Problems with header function</A
>) that it is related to the header() function of <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> and <A
HREF="http://bugs.php.net/bug.php?id=16842"
TARGET="_top"
>PHP's Bug #16842: header() function doesn`t work</A
>. The bug seems to have been fixed in newer versions of PHP, but it might still appear, if you had a previous version that you did not uninstall cleanly (the old problem with DLLs not being correctly managed under Windows, with old versions still lying around even after an uninstall). If you suspect this might be the case with you, uninstall <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> cleanly and reinstall.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="LOTS-OF-NOTICE-LINES"
>3.9.22. You get a lot of Notice lines in the output of PHP-Nuke</A
></H2
><P
>If you get lots of Notice lines in your <SPAN
CLASS="APPLICATION"
>PHP-Nuke</SPAN
> output like this:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Notice: No prefix specified in import_request_variables() 
- possible security hazard in 
c:\program files\apache group\apache\htdocs\html\mainfile.php on line 23
Notice: Constant _ youhave already defined in 
c:\program files\apache group\apache\htdocs\html\language\lang-english.php on line 158
Notice: Use of undefined constant admin - assumed 'admin' 
in c:\program files\apache group\apache\htdocs\html\admin.php on line 16
Notice: Use of undefined constant admin - assumed 'admin' 
in c:\program files\apache group\apache\htdocs\html\mainfile.php on line 88
Notice: Constant _yes already defined in 
c:\program files\apache group\apache\htdocs\html\admin\language\lang-english.php on line 24
Notice: Constant _no already defined in 
c:\program files\apache group\apache\htdocs\html\admin\language\lang-english.php on line 25</PRE
></FONT
></TD
></TR
></TABLE
><P
>then the error level for the reporting is too high (see <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=221"
TARGET="_top"
>A lot of Notice lines in the output of PHP-Nuke</A
>). Set display_errors so that <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
> will display all errors, except notices, in your php.ini. Edit php.ini with a <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=122"
TARGET="_top"
>decent text editor</A
> (see also <A
HREF="editing-php-nuke-files.html"
>Chapter 11</A
>) as follows - the important line is the last one, which is the only uncommented one:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Error handling and logging ;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; error_reporting is a bit-field.  Or each number up to get desired error
; reporting level
; E_ALL             - All errors and warnings
; E_ERROR           - fatal run-time errors
; E_WARNING         - run-time warnings (non-fatal errors)
; E_PARSE           - compile-time parse errors
; E_NOTICE          - run-time notices (these are warnings which often result
;                     from a bug in your code, but it's possible that it was
;                     intentional (e.g., using an uninitialized variable and
;                     relying on the fact it's automatically initialized to an
;                     empty string)
; E_CORE_ERROR      - fatal errors that occur during PHP's initial startup
; E_CORE_WARNING    - warnings (non-fatal errors) that occur during PHP's
;                     initial startup
; E_COMPILE_ERROR   - fatal compile-time errors
; E_COMPILE_WARNING - compile-time warnings (non-fatal errors)
; E_USER_ERROR      - user-generated error message
; E_USER_WARNING    - user-generated warning message
; E_USER_NOTICE     - user-generated notice message
;
; Examples:
;
;   - Show all errors, except for notices
;
;error_reporting = E_ALL &#38; ~E_NOTICE
;
;   - Show only errors
;
;error_reporting = E_COMPILE_ERROR|E_ERROR|E_CORE_ERROR
;
;   - Show all errors except for notices
;
error_reporting  =  E_ALL &#38; ~E_NOTICE</PRE
></FONT
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="DESCRIPTIVE-ERROR-MESSAGE"
>3.9.23. How to get a more descriptive error message</A
></H2
><P
>If you get an error, but you have no idea what is happening, you could try to narrow it down in the code, if you feel comfortable with <ACRONYM
CLASS="ACRONYM"
>PHP</ACRONYM
>. Then, after you found the offending line, you should insert the line</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>print (mysql_error());</PRE
></FONT
></TD
></TR
></TABLE
><P
>immediately after it. This will give a more descriptive message of the error and hopefully lead you to a solution. We already used this trick in <A
HREF="common-installation-problems.html#WARNING-MYSQL-FETCH-ROW-SUPPLIED-ARGUMENT"
>Section 3.9.2</A
>. See also <A
HREF="http://www.karakas-online.de/forum/viewtopic.php?t=37"
TARGET="_top"
>Warning: mysql fetch row: supplied argument is not a valid MySQL result resource</A
> and <A
HREF="http://www.nukeforums.com/forums/viewtopic.php?t=14121"
TARGET="_top"
>submit news problem</A
>.</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="resources.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="common-miscellaneous-errors.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Resources</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="installation.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Common miscellaneous errors</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>