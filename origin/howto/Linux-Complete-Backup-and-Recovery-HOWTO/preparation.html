<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Preparation</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="Linux Complete Backup and Recovery HOWTO"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Overview"
HREF="overview.html"><LINK
REL="NEXT"
TITLE="Creating the Stage 1 Back Up"
HREF="creatingthestage1backup.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Linux Complete Backup and Recovery HOWTO</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="overview.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="creatingthestage1backup.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="PREPARATION"
>3. Preparation</A
></H1
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.png"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>WARNING</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Do your normal backups on their regular schedule. This HOWTO is useless if you don't do that.</P
></TD
></TR
></TABLE
></DIV
><P
>Build yourself a restoration Linux disk. I have used <A
HREF="http://www.knoppix.org/"
TARGET="_top"
>Knoppix</A
>. See the notes on <A
HREF="distributionspecificnotes.html#KNOPPIX"
>Knoppix</A
> below. However, everything here is command line. We don't need a GUI. A GUI-less distribution will boot faster and can load itself into memory (so you can use the CD drive) even on a minimal machine. For this I now use <A
HREF="http://www.finnix.org/"
TARGET="_top"
>Finnix</A
>.</P
><P
>In the past, I have used <A
HREF="http://www.toms.net/rb"
TARGET="_top"
>tomsrtbt</A
>. It is well documented and packs a lot of useful tools onto one floppy diskette. Unfortunately, the changes I've had to make in the scripts to handle more recent Linux systems cause problems for <A
HREF="http://www.toms.net/rb"
TARGET="_top"
>tomsrtbt</A
>. The <A
HREF="http://www.toms.net/rb"
TARGET="_top"
>tomsrtbt</A
> 2.0.103 tar is based on <A
HREF="http://www.busybox.net/"
TARGET="_top"
>busybox</A
>, so remarks about it may apply to other Linux disties which use busybox.</P
><P
>Next, figure out how to do the operating system backup you will need so that you can restore your normal backup. I used to follow Preston's advice and use an Iomega parallel port ZIP drive. The drives get approximately 90 MB of useful storage to a disk. I need about 85 MB to back up my desktop, so a 100MB ZIP drive may be pushing your luck. These days I use CD-RWs or NFS. For more on those, see the sections on using <A
HREF="creatingthestage1backup.html#AEN395"
>CD-ROM</A
>s and <A
HREF="creatingthestage1backup.html#AEN431"
>NFS</A
>.</P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="INSTALLINGZIPDRIVE"
>3.1. Installing the ZIP Drive</A
></H2
><P
>Installing the ZIP drive is covered in the <A
HREF="http://www.tldp.org/HOWTO/mini/ZIP-Drive.html"
TARGET="_top"
>ZIP Drive HOWTO</A
>, available at <A
HREF="http://www.tldp.org/"
TARGET="_top"
>the Linux Documentation Project</A
> and at its home page, <A
HREF="http://www.njtcom.com/dansie/zip-drive.html"
TARGET="_top"
>http://www.njtcom.com/dansie/zip-drive.html</A
>. </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="BACKUP.SERVER"
>3.2. Backup Server</A
></H2
><P
>You can set up a backup server for this process. Scripts on the backup server interact with the target machines (including itself) via SSH. They assume that your backup server user (root here, for simplicity) can log in with no password to the targets. This is necessary for unattended backups.</P
><P
>First, create a suitable directory to keep all the backups in. We'll call it <TT
CLASS="FILENAME"
>backs</TT
>. In backs, create a directory for each target computer. The first field in the directory should be the host name. Subsequent fields can be other useful information. For example, to preserve the last backup of a target before an installation of a new version of the distribution, I use an abbreviation for the distribution, e.g. <SPAN
CLASS="QUOTE"
>"fc5"</SPAN
>. Fields are separated with periods (<SPAN
CLASS="QUOTE"
>"."</SPAN
>). So, for example, <TT
CLASS="FILENAME"
>tester.f7</TT
>. The host name is required because the scripts use that to determine which host to back up.</P
><P
>Copy the scripts <TT
CLASS="FILENAME"
>get</TT
> and <TT
CLASS="FILENAME"
>restore</TT
> into each target's directory. Then customize them for each host as needed.</P
><P
>Also create in <TT
CLASS="FILENAME"
>backs</TT
> a directory called <TT
CLASS="FILENAME"
>scripts</TT
> and put in it the script <TT
CLASS="FILENAME"
>get.target</TT
>. This is a library for the backup and restore scripts. It performs actions common to all backups and restorations.</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="overview.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="creatingthestage1backup.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Overview</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Creating the Stage 1 Back Up</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>