<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Appendix C. Troubleshooting</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="The Linux 2.4 SCSI subsystem HOWTO"><link rel="up" href="index.html" title="The Linux 2.4 SCSI subsystem HOWTO"><link rel="prev" href="apbs06.html" title="6. Changes during the lk 2.4 series"><link rel="next" href="apd.html" title="Appendix D. Performance, Test and Debugging tools"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Appendix C. Troubleshooting</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="apbs06.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="apd.html">Next</a></td></tr></table><hr></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="trouble"></a>Appendix C. Troubleshooting</h1></div></div></div><p>
Many SCSI problems are caused by cabling and (lack of, or inappropriate)
termination. This often results in repeated SCSI bus resets, parity
or CRC errors and sometimes reduced transfer speeds. There is a good
SCSI termination tutorial at this site:
<a class="ulink" href="http://www.scsita.org/aboutscsi/SCSI_Termination_Tutorial.html" target="_top">
www.scsita.org/aboutscsi/SCSI_Termination_Tutorial.html</a>. There is
other useful SCSI information at that site (see <a class="link" href="apf.html#W9">W9</a>).
</p><p>
There is also a SCSI "faq" site (see <a class="link" href="apf.html#W10">W10</a>)
that addresses many configuration and troubleshooting issues. Although
the main focus of this site is Windows (and its ASPI interface), much
is relevant to SCSI in Linux and other Unix implementations.
</p><p>
When it looks like something has partially locked up the system, the
<span class="command"><strong>ps</strong></span> command can be useful for finding out what may be
causing the problem. The following options may be useful for identifying what
part of the kernel may be causing the problem. This information could be
forwarded to the maintainers.
</p><pre class="programlisting">
ps -eo cmd,wchan
ps -eo fname,tty,pid,stat,pcpu,wchan
ps -eo pid,stat,pcpu,nwchan,wchan=WIDE-WCHAN-COLUMN -o args
</pre><p>
The most interesting option for finding the location of the "hang" is
"wchan". If this is a kernel address then <span class="command"><strong>ps</strong></span> will
use <code class="filename">/proc/ksyms</code> to find the nearest symbolic
location. The "nwchan" option outputs the numerical address of the "hang".
</p><p>
If the system is not responding to keystrokes, then &lt;Alt+ScrollLock&gt;
in text mode should output a stack trace while &lt;Ctrl+ScrollLock&gt;
should output a list of all processes. If the log is still working, the
output will be sent there as well as appearing on the console.
</p><p>
If the kernel has been built with the CONFIG_MAGIC_SYSRQ, then in text
mode &lt;Alt+SysRq+H&gt; will list available commands. Of these &lt;Alt+SysRq+S&gt;
is useful for doing an emergency sync while &lt;Alt+SysRq+U&gt; will remount
file systems in read only mode. After that &lt;Alt+SysRq+B&gt; to reboot the
machine might be your next move.
</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="apbs06.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="apd.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">6. Changes during the lk 2.4 series </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Appendix D. Performance, Test and Debugging tools</td></tr></table></div></body></html>
