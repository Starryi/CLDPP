<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Appendix B. Changes between lk 2.2 and (during) 2.4</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="The Linux 2.4 SCSI subsystem HOWTO"><link rel="up" href="index.html" title="The Linux 2.4 SCSI subsystem HOWTO"><link rel="prev" href="apa.html" title="Appendix A. Common bus types (SCSI and other)"><link rel="next" href="apbs01.html" title="1. Mid level changes"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Appendix B. Changes between lk 2.2 and (during) 2.4</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="apa.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="apbs01.html">Next</a></td></tr></table><hr></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="changes"></a>Appendix B. Changes between lk 2.2 and (during) 2.4</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="apbs01.html">1. Mid level changes</a></span></dt><dt><span class="sect1"><a href="apbs02.html">2. sd changes</a></span></dt><dt><span class="sect1"><a href="apbs03.html">3. sr changes</a></span></dt><dt><span class="sect1"><a href="apbs04.html">4. st changes</a></span></dt><dt><span class="sect1"><a href="apbs05.html">5. sg changes</a></span></dt><dt><span class="sect1"><a href="apbs06.html">6. Changes during the lk 2.4 series</a></span></dt></dl></div><p>
Significant work has been done to change the single SCSI command queue
used in lk 2.2 to one command queue per device. To make the SCSI subsystem
more SMP friendly the granularity of the locks is much finer grained. In
lk 2.2 the whole subsystem essentially used one lock.
</p><p>
Even though it is not part of the SCSI subsystem, the inclusion of devfs
solves many SCSI device addressing problems that existed in the past.
Associated with devfs but very useful even in its absence is the
"scsihosts" kernel boot time (and module load time) option. This option
allows users to have some control over the ordering of multiple SCSI hosts.
</p><p>
This appendix is difficult to maintain since features and drivers that
have proven useful in lk 2.4 (and its development tree) have tended to
be back ported into the higher release numbers of the lk 2.2 series.
</p><p>
Currently (lk 2.4.2) support for MO devices is broken. Old DOS file
systems with a block size of 2048 bytes also have been reported as broken.
The problem seems to arise with media that have a physical block size
larger than the 1 KB logical block size used by the block subsystem.
Only the sd driver has this problem (luckily not the sr driver in
which 2048 byte sectors are the norm).
</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="apa.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="apbs01.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Appendix A. Common bus types (SCSI and other) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 1. Mid level changes</td></tr></table></div></body></html>
