<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Handspring-Visor with Linux mini-HOWTO</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><META
NAME="KEYWORD"
CONTENT="Linux"><META
NAME="KEYWORD"
CONTENT="Handspring"><META
NAME="KEYWORD"
CONTENT="Visor"><META
NAME="KEYWORD"
CONTENT="USB"><META
NAME="KEYWORD"
CONTENT="pilot-link"><META
NAME="KEYWORD"
CONTENT="coldsync"></HEAD
><BODY
CLASS="ARTICLE"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="ARTICLE"
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="TITLE"
><A
NAME="AEN2"
>Handspring-Visor with Linux mini-HOWTO</A
></H1
><H3
CLASS="AUTHOR"
><A
NAME="AEN4"
>Ryan VanderBijl</A
></H3
><DIV
CLASS="AFFILIATION"
><DIV
CLASS="ADDRESS"
><P
CLASS="ADDRESS"
>		<CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:rvbijl-howto@vanderbijlfamily.com"
>rvbijl-howto@vanderbijlfamily.com</A
>&#62;</CODE
><br>
	&nbsp;&nbsp;&nbsp;&nbsp;</P
></DIV
></DIV
><DIV
CLASS="REVHISTORY"
><TABLE
WIDTH="100%"
BORDER="0"
><TR
><TH
ALIGN="LEFT"
VALIGN="TOP"
COLSPAN="3"
><B
>Revision History</B
></TH
></TR
><TR
><TD
ALIGN="LEFT"
>Revision v0.6</TD
><TD
ALIGN="LEFT"
>January 2003</TD
><TD
ALIGN="LEFT"
>Revised by: rvbijl</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Update my contact information.  Remove references to outdated 
                software. Removed PPP stuff.  Updated hotplug section.</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Revision v0.5</TD
><TD
ALIGN="LEFT"
>December, 2000 - Feb, 2001</TD
><TD
ALIGN="LEFT"
>Revised by: rvbijl39</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Seperate kernel/user-space parts. Updates for modules.
		Add usbdevfs info. Hotpluggable info. PPP info.  Updates
		for the linux 2.4 kernel. Added troubleshooting tips.
		Change the SGML to DocBook format.</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Revision v0.4</TD
><TD
ALIGN="LEFT"
>August 7, 2000</TD
><TD
ALIGN="LEFT"
>Revised by: rvbijl39</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Clarifications, updates, suggested by Matt Shook,
		Steven Coffman, Miles Lott, and info from Greg KH.</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Revision v0.3</TD
><TD
ALIGN="LEFT"
>April or May, 2000</TD
><TD
ALIGN="LEFT"
>Revised by: rvbijl39</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>SGML version. Some fixes from Miles Lott.</TD
></TR
><TR
><TD
ALIGN="LEFT"
>Revision v0.1, v0.2</TD
><TD
ALIGN="LEFT"
>April 6, 2000</TD
><TD
ALIGN="LEFT"
>Revised by: rvbijl39</TD
></TR
><TR
><TD
ALIGN="LEFT"
COLSPAN="3"
>Original Version, HTML version.</TD
></TR
></TABLE
></DIV
><DIV
><DIV
CLASS="ABSTRACT"
><P
></P
><A
NAME="AEN36"
></A
><P
>	This document should give you instructions on how to connect
	your Handspring Visor (any version) to Linux, using USB.
	</P
><P
></P
></DIV
></DIV
><HR></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
>1. <A
HREF="#STANRD"
>Standard Information</A
></DT
><DD
><DL
><DT
>1.1. <A
HREF="#DISCLAIMER"
>Disclaimer</A
></DT
><DT
>1.2. <A
HREF="#AUTHOR"
>Author</A
></DT
><DT
>1.3. <A
HREF="#COPYRIGHT"
>Copyright</A
></DT
></DL
></DD
><DT
>2. <A
HREF="#INTRODUCTION"
>Introduction</A
></DT
><DD
><DL
><DT
>2.1. <A
HREF="#DEVICES"
>Supported Devices</A
></DT
><DT
>2.2. <A
HREF="#NEEDED"
>What's needed?</A
></DT
><DT
>2.3. <A
HREF="#DISTROS"
>Linux Distributions</A
></DT
></DL
></DD
><DT
>3. <A
HREF="#KERNEL"
>Configuring the Kernel</A
></DT
><DD
><DL
><DT
>3.1. <A
HREF="#REQUIREMENTS"
>Requirements</A
></DT
><DT
>3.2. <A
HREF="#KERNELVERSION"
>Kernel Version</A
></DT
><DT
>3.3. <A
HREF="#CONTROLLER"
>USB Controller Type</A
></DT
><DT
>3.4. <A
HREF="#MAKEKERNEL"
>Configure/Build Kernel</A
></DT
><DT
>3.5. <A
HREF="#USBDEVFS"
>usbdevfs</A
></DT
><DT
>3.6. <A
HREF="#DEVENTRIES"
>Making <TT
CLASS="FILENAME"
>/dev</TT
> Entries</A
></DT
><DT
>3.7. <A
HREF="#USINGMODULES"
>Using the Modules</A
></DT
></DL
></DD
><DT
>4. <A
HREF="#SYNCSOFTWARE"
>Synchronization Software</A
></DT
><DD
><DL
><DT
>4.1. <A
HREF="#AEN190"
>General</A
></DT
><DT
>4.2. <A
HREF="#COLDSYNC"
>coldsync</A
></DT
><DT
>4.3. <A
HREF="#PILOTLINK"
>pilot-link</A
></DT
><DT
>4.4. <A
HREF="#TESTING"
>Time to Sync</A
></DT
><DT
>4.5. <A
HREF="#AEN217"
>Palm Desktop Equivalents</A
></DT
><DT
>4.6. <A
HREF="#AEN231"
>Your Done!</A
></DT
></DL
></DD
><DT
>5. <A
HREF="#HOTPLUG"
>Hotplug-able</A
></DT
><DD
><DL
><DT
>5.1. <A
HREF="#HPKERNEL"
>Hotplug Kernel Config</A
></DT
><DT
>5.2. <A
HREF="#HPINSTALLBASE"
>Installing Hotplug</A
></DT
><DT
>5.3. <A
HREF="#HPINSTALLVISOR"
>Configure the Visor Driver</A
></DT
></DL
></DD
><DT
>6. <A
HREF="#TROUBLESHOOTING"
>Troubleshooting Tips</A
></DT
><DD
><DL
><DT
>6.1. <A
HREF="#THETIPS"
>The Tips</A
></DT
></DL
></DD
><DT
>7. <A
HREF="#REFERENCES"
>Links</A
></DT
></DL
></DIV
><DIV
CLASS="SECT1"
><H2
CLASS="SECT1"
><A
NAME="STANRD"
>1. Standard Information</A
></H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="DISCLAIMER"
>1.1. Disclaimer</A
></H3
><P
>	    No liability for the contents of this documents can be 
	    accepted.  Use the concepts, examples and other content at 
	    your own risk.  As this is a new edition of this document,
	    there may be errors and inaccuracies, that may of course 
	    be damaging to your system.  Proceed with caution, and 
	    although this is highly unlikely, the author(s) do not
	    take any responsibility for that.
	</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AUTHOR"
>1.2. Author</A
></H3
><P
>	    This document was originally written, and is maintained 
            (occasionally) by Ryan VanderBijl.  Many people have
            made good suggestions for the improvement of this
            document. Many thanks to Miles Lott and especially
            to Greg Kroah-Hartman.  Feedback is always welcome,
            although I can't promise if/when any suggestions
            will be incorporrated.
	</P
><P
>            After being out-of-date for about a year and a half,
            I have finally updated my contact information. Also,
	    very occasionally their may be a new copy of this
            document on my website.  Test your luck at: 
            <A
HREF="http://www.vanderbijlfamily.com/~rvbijl/visor/howto/"
TARGET="_top"
>http://www.vanderbijlfamily.com/~rvbijl/visor/howto/</A
>.
	</P
><P
>	    I would appreciate receiving an email from you 
	    if you get your Visor up and Sync'ed using this document.
	</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="COPYRIGHT"
>1.3. Copyright</A
></H3
><P
>	    This document is Copyright (c) 2000-2002 by Ryan VanderBijl. 
	    You may distribute freely under the terms of the GPL 
	    (<A
HREF="http://www.gnu.org/copyleft/gpl.html"
TARGET="_top"
>http://www.gnu.org/copyleft/gpl.html</A
>). 
	</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="INTRODUCTION"
>2. Introduction</A
></H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="DEVICES"
>2.1. Supported Devices</A
></H3
><P
>            The following list of PDA's are supported by the Linux USB-Visor module:
        </P
><P
></P
><UL
><LI
><P
>Handspring Visor (all)</P
></LI
><LI
><P
>Palm USB Devices (all)</P
></LI
><LI
><P
>Sony Clie (all)</P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="NEEDED"
>2.2. What's needed?</A
></H3
><P
>            To syncronize your Handspring Visor onto your linux computer, you
            need to configure linux to know how to do the low-level communication
            with your device, and then a user-space program to do the actual
            communication with the device.
        </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="DISTROS"
>2.3. Linux Distributions</A
></H3
><P
>            Many distibutions now come with kernels pre-configured with appropriate 
            support.  If you have such a distro, and do not wish to re-compile the
            kernel, then you can probably skip ahead to the 
            <A
HREF="#SYNCSOFTWARE"
>Syncronziation Software</A
> section.
            The following is an incomplete list of distro's that have 
            support pre-configured:
        </P
><P
></P
><UL
><LI
><P
>Mandrake 8.2 (or later)</P
></LI
><LI
><P
>Redhat 7.2 (or later)</P
></LI
><LI
><P
>Suse 8.0 (or later)</P
></LI
></UL
><P
>            You may check if your distro already has support by running this command
            as root:
        </P
><P
>	   <TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>modprobe visor</PRE
></FONT
></TD
></TR
></TABLE
>
	</P
><P
>            If the program printed any error messages, then you will need to
            re-compile the kernel with the approriate support.  If nothing
            was printed, it means that it was successful, and your distro
            already provides support.  
        </P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="KERNEL"
>3. Configuring the Kernel</A
></H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="REQUIREMENTS"
>3.1. Requirements</A
></H3
><P
>	    Some obvious things are required, such as a computer,
	    USB ports, Handspring Visor (with USB cradle).
	    You should also know how to compile and install programs 
	    and the kernel. If you do not, you have a few options:
	    learn, get your resident expert to help you, or get a distro
	    with everything prepared for you. 
	</P
><P
>	    If you don't have a USB controller for your computer, then 
	    you need to either buy the serial cradle for the Visor
            (but you wont need this document), or buy a USB-capable 
            device for your computer (ie. add-on card or a new 
            motherboard).  
	</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="KERNELVERSION"
>3.2. Kernel Version</A
></H3
><P
>	    The linux kernel version v2.4 was the first to have USB support.  You can get the latest v2.4 kernel from: 
            <A
HREF="ftp://ftp.kernel.org/pub/linux/kernel/v2.4/"
TARGET="_top"
>ftp://ftp.kernel.org/pub/linux/kernel/v2.4/</A
>. 
	</P
><P
>            The USB code has been backported to the v2.2 kernel, starting
            at version v2.2.18.  If you must, you should probably be
            able to follow the same instructions with the latest v2.2 kernel
	</P
><P
>            Now would be a good time to download the latest kernel, and
            configure things to your desire.  The following has the
            instructions you need to configure USB.
        </P
><P
>            If you have already have compiled and installed the kernel,
            you should not need to reboot!  All we need to do is
            to compile and install the appropriate modules, and we
            will be all set.
	</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="CONTROLLER"
>3.3. USB Controller Type</A
></H3
><P
>	    The first thing to do is o determine which type of USB 
	    host controller you have. The USB host controller is the 
	    hardware in your computer which handles USB input/output.
	</P
><P
>	    Motherboards based on Intel chipsets, are 
	    typically UHCI controllers. Most addon cards are OHCI
	    controllers. You can determine the type of USB hardware 
	    available by using, as root, the following command:
	</P
><P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>lspci -v</PRE
></FONT
></TD
></TR
></TABLE
></P
><P
>	    If you see an entry like:
	</P
><P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>USB Controller: ......
Flags: .....
I/O ports at ....</PRE
></FONT
></TD
></TR
></TABLE
>
	</P
><P
>	Then you have a UHCI based controller.  If you see an entry like:
	</P
><P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>USB Controller: .....
Flags: ....
Memory at .....</PRE
></FONT
></TD
></TR
></TABLE
>
	</P
><P
>	    Then you have a OHCI based controller.  You could 
	    refer to <A
HREF="http://www.linux-usb.org"
TARGET="_top"
>http://www.linux-usb.org</A
>
	    for further details. The kernel documentation 
	    <TT
CLASS="FILENAME"
>/usr/src/linux/Documentation/usb/usb.txt</TT
> may
	    also be helpful in determining which type of controller 
	    you have.
	</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="MAKEKERNEL"
>3.4. Configure/Build Kernel</A
></H3
><P
>	    Now we need to configure, and make your kernel. During 
	    configuration, make sure you enable the following entries.
	    You may either compile them directly into your kernel,
	    or as modules. It is highly recommended that you compile 
            them as modules. If you compile them directly in, you will
	    need to reboot.  
	</P
><P
>	    <P
></P
><UL
><LI
><P
>		       USB support (<EM
>CONFIG_USB</EM
>)
		    </P
></LI
><LI
><P
>		       The preliminary USB Device Filesystem
		       (<EM
>CONFIG_USB_DEVICEFS</EM
>)
		    </P
></LI
><LI
><P
>		       The appropriate controller - UHCI, or OHCI 
		       (<EM
>CONFIG_USB_UHCI</EM
>, or 
		       <EM
>CONFIG_USB_OHCI</EM
>) 
		    </P
></LI
><LI
><P
>		       USB Serial Converter support 
		       (<EM
>CONFIG_USB_SERIAL</EM
>)
		    </P
></LI
><LI
><P
>			USB Handspring Visor Driver 
			(<EM
>CONFIG_USB_SERIAL_VISOR</EM
>)
			(serial converter's sub-option)
		    </P
></LI
></UL
>
	</P
><P
>	    There are two UHCI drivers. You do not want the "UHCI 
	    Alternate (JE)" driver. This driver does not yet support 
	    all the USB features which the Visor uses. Thus, you will be
            unable to sync using this driver.  If you are unable to
            see the original driver, ensure that the UHCI-JE driver
            is NOT selected, you should then see the option for both
            drivers.
	</P
><P
> 
	    Here, you should decide if you would like to include
            Hotplug support.  With Hotplug support, you are able
            to auto-magically sync your visor by only pressing the 
            Hotsync button.  Please see the 
            <A
HREF="#HOTPLUG"
>hotplug section</A
>, and
            especially the <A
HREF="#HPKERNEL"
>Hotplug Kernel
            Config</A
>, before choosing this route.
	</P
><P
>	    Compile and install as required. Don't forget to run
	    lilo. If you are installing a new kernel image, do not
	    reboot yet.
	</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="USBDEVFS"
>3.5. usbdevfs</A
></H3
><P
>	    <EM
>usbdevfs</EM
> puts information about your 
	    USB bus into the 
	    <TT
CLASS="FILENAME"
>/proc</TT
> 
	    directory tree. Its a good thing, and can be especially 
	    useful for debugging. You can enable it by adding the 
	    following line into your <TT
CLASS="FILENAME"
>/etc/fstab</TT
>.
	</P
><P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>none  /proc/bus/usb  usbdevfs  defaults  0  0</PRE
></FONT
></TD
></TR
></TABLE
>
	</P
><P
>	    If you installed a new kernel image, you could reboot
	    from this point on. Remember, if you are just adding the
	    USB info as modules, you do not need to reboot. 
	</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="DEVENTRIES"
>3.6. Making <TT
CLASS="FILENAME"
>/dev</TT
> Entries</A
></H3
><P
>            If your linux distro does not come with USB Visor support,
            or if you are NOT using <EM
>devfs</EM
> (not
            the same thing as <EM
>usbdevfs</EM
>), you will need 
            to make the USB tty devices. 
        </P
><P
>            If you are using <EM
>devfs</EM
>, these devices are 
            automagically created under 
            <TT
CLASS="FILENAME"
>/dev/usb/tts/{0,1,...}</TT
>; so you can skip 
            ahead to <A
HREF="#USINGMODULES"
>using the modules</A
>
	</P
><P
>            If you are not using <EM
>devfs</EM
>, you can create
            the devices by executing these commands, as root: 
	</P
><P
>            <TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>            mknod /dev/ttyUSB0 c 188 0
            mknod /dev/ttyUSB1 c 188 1
            mknod /dev/ttyUSB2 c 188 2
            mknod /dev/ttyUSB3 c 188 3
            etc...
            chmod 666 /dev/ttyUSB*
            </PRE
></FONT
></TD
></TR
></TABLE
>
	</P
><P
>	    You are able to have up to 255
	    connections/ports/devices, but unless you have more than 
	    one USB serial device, you'll probably only need the first few.
	    The chmod is to allow users to be able to access the Visor
	    device.  It is the opinion of the author of this document 
	    that this should be safe for a personal computer. Multiuser
	    computers may want to look into the security for this 
	    (please let me know).
	</P
><P
>	    When a Visor connects, there are two "ports" opened. (For 
	    most people, this will be <TT
CLASS="FILENAME"
>/dev/ttyUSB0</TT
>,
	    and <TT
CLASS="FILENAME"
>/dev/ttyUSB1</TT
>).  The first port 
	    (zero), is a generic connection. The second 
	    port is the hotsync port. This feature allows for future 
	    developments; for example, to export a filesystem from the 
	    Visor. A useful thing to do is to create a link to the 
	    hotsync port so that synchronization software will use the 
	    appropriate device be default. You can do this by:
	</P
><P
>            <TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>            cd /dev
            ln -s /dev/ttyUSB1 pilot
            ln -s /dev/ttyUSB1 palm
            </PRE
></FONT
></TD
></TR
></TABLE
>
	</P
><P
>	    The software package <SPAN
CLASS="APPLICATION"
>pilot-xfer</SPAN
>
	    uses <TT
CLASS="FILENAME"
>/dev/pilot</TT
> by default. 
	    <SPAN
CLASS="APPLICATION"
>coldsync</SPAN
>
	    defaults to <TT
CLASS="FILENAME"
>/dev/palm</TT
>. Create devices 
	    and links as appropriate.  Just for fun, you might also want
	    to create a link from <TT
CLASS="FILENAME"
>/dev/visor</TT
> to 
	    <TT
CLASS="FILENAME"
>/dev/ttyUSB1</TT
>, just, well, because 
	    we have a visor, not a pilot (or Palm(tm)). The actual 
	    device number may change, depending on how many (active?) 
	    USB-serial devices you have on your system. A message
	    containing the device actually used is entered into syslog.
	    Eventually, the idea is to make an entry in the 
	    <TT
CLASS="FILENAME"
>/proc</TT
> filesystem 
	    which contains the needed information.  
	</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="USINGMODULES"
>3.7. Using the Modules</A
></H3
><P
>	    For people who compiled the USB code as modules, you 
	    will also need to insert the modules into the running 
	    kernel.  When you want to use the visor, you will need to 
            runt the following commands as root:
	</P
><P
>            <TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>            /sbin/modprobe usb-uhci
            /sbin/modprobe usb-ohci
            /sbin/modprobe visor
            </PRE
></FONT
></TD
></TR
></TABLE
>
	</P
><P
>	    One important note is that the actually driver/device 
	    connection for <TT
CLASS="FILENAME"
>/dev/ttyUSB*</TT
> are not 
	    created in the kernel memory until the hotsync button is 
	    pressed.  Therefore, if you try to use any software before 
	    pressing the hotsync button, it won't work.
	</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="SYNCSOFTWARE"
>4. Synchronization Software</A
></H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="AEN190"
>4.1. General</A
></H3
><P
>            There are two software packages which communicate with your
            Visor.  The first is <SPAN
CLASS="APPLICATION"
>coldsync</SPAN
>,
            and the second is <SPAN
CLASS="APPLICATION"
>pilot-link</SPAN
>.
            These programs are command-line based, and do "low-level" 
            synchronization of the actual databases.  They provide 
            [different] interfaces for conduits.  I assume you know 
            how to download and install programs yourself.  
            If not, learn. (I suppose you could cheat and install a 
            pre-compiled package, but I don't support that ;-).
	</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="COLDSYNC"
>4.2. coldsync</A
></H3
><P
>	    <SPAN
CLASS="APPLICATION"
>coldsync</SPAN
> can be found at 
	    <A
HREF="http://coldsync.org/"
TARGET="_top"
>http://coldsync.org/</A
>.
	</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="PILOTLINK"
>4.3. pilot-link</A
></H3
><P
>	    <SPAN
CLASS="APPLICATION"
>pilot-link</SPAN
> can be found at
            <A
HREF="http://www.pilot-link.org/"
TARGET="_top"
>http://www.pilot-link.org/</A
>.
            If you plan on using a Palm Desktop Equivalant, you'll want to use
            this package.
	</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="TESTING"
>4.4. Time to Sync</A
></H3
><P
>	    At this point we should be able to test to make sure things
	    are working.  Of course, the visor needs to be in the 
	    cradle, and the cradle needs to be plugged into your USB 
	    port. The proper modules should be 
	    <A
HREF="#USINGMODULES"
>loaded</A
>.
	</P
><P
>	    NOTE: you MUST press the hotsync button BEFORE 
	    running the software.  The visor driver will make an entry
	    in syslog, and, eventually (ie, in newer drivers), to 
	    <TT
CLASS="FILENAME"
>/proc/drivers/visor</TT
>.  Assuming the 
	    driver connects to <TT
CLASS="FILENAME"
>/dev/ttyUSB0</TT
> and 
	    <TT
CLASS="FILENAME"
>/dev/ttyUSB1</TT
>, you may run your program
	    to backup the visor (chose the appropriate program):
	</P
><P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>cd ~
mkdir visorbackup
coldsync   -p /dev/ttyUSB1 -mb visorbackup 
pilot-xfer -p /dev/ttyUSB1 -b  visorbackup </PRE
></FONT
></TD
></TR
></TABLE
>
	</P
><P
>	    If you get an error such as "unable to bind to the port", 
	    you probably need to re-read the previous paragraph.
            With any other errors, please refer to the
            <A
HREF="#TROUBLESHOOTING"
>Troubleshooting Guide</A
>.
	</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN217"
>4.5. Palm Desktop Equivalents</A
></H3
><P
>	    There are a few Palm desktop equivalents. I haven't had
	    time to test them. I intend, at some
	    point, to put something about them in here. If you want
	    to write up something to have it included here, please
	    feel free to send it in. To my knowledge, all of them use
	    the pilot-link libraries to talk with the Visor.
	</P
><P
>	    Here is the list that I know of:
	    <P
></P
><UL
><LI
><P
><A
HREF="http://www.jpilot.org/"
TARGET="_top"
>J-Pilot</A
></P
></LI
><LI
><P
><A
HREF="http://www.slac.com/pilone/kpilot_home/"
TARGET="_top"
>KPilot</A
> (KDE)</P
></LI
><LI
><P
><A
HREF="http://www.gnome.org/gnome-pilot/"
TARGET="_top"
>Gnome-Pilot</A
> (GNOME)</P
></LI
></UL
>
	</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="AEN231"
>4.6. Your Done!</A
></H3
><P
>	    At this point, you are done! You are able to install,
	    backup, and syncronize your information. Congratulations!
	    I would appreciate an email of gratitutde!  The next 
            sections talk about setting up a PPP connection
	    and Hotplug support. 
	</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="HOTPLUG"
>5. Hotplug-able</A
></H2
><P
>        You must be using a fairly recent v2.4 kernel for this.  
	You may wish to read over the whole section before proceeding.
    </P
><P
>        Hotplug will allow you to automatically run your syncronization
        software when you press your sync button.  You will only be
        able to configure this to sync for one Visor. If you need
        to be able to sync multiple users with differen Visors, you
        can't. (With different Palm's and Clie's, is a separate 
        question, to which I don't know the answer to).
    </P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="HPKERNEL"
>5.1. Hotplug Kernel Config</A
></H3
><P
>	    You will need to enable "Support for hot-pluggable devices"
	    under "General Options" in the kernel config. This is
	    the kernel option <EM
>CONFIG_HOTPLUG</EM
>.
            Make sure you compile/re-install.
	</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="HPINSTALLBASE"
>5.2. Installing Hotplug</A
></H3
><P
>	    You need to get the hotplug scripts from the linux-hotplug
            homepage: <A
HREF="http://linux-hotplug.sourceforge.net"
TARGET="_top"
>http://linux-hotplug.sourceforge.net</A
>.
            The scripts are available as a rpm package or tarball If 
            installing the tarball package, please read the README 
            file that is included on proper installation procedures.
            If all you are configuring is the Visor hotplug support,
            then most likely you'll just have to do this:
	</P
><P
>            <TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>            gzip -dc hotplug-2002_08_26.tar.gz | tar xvf -
            cp hotplug-2002_08_26/sbin/hotplug /sbin/hotplug
            cp -r hotplug-2002_08_26/etc/hotplug  /etc
            </PRE
></FONT
></TD
></TR
></TABLE
>
        </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="HPINSTALLVISOR"
>5.3. Configure the Visor Driver</A
></H3
><P
>            When all is said and done, an (executable) script named
            <TT
CLASS="FILENAME"
>/etc/hotplug/usb/visor</TT
> should
            get run when you press the hotsync button.
	</P
><P
>	    <TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>		#!/bin/sh
		/bin/su rvbijl -c /usr/local/bin/coldsync
	    </PRE
></FONT
></TD
></TR
></TABLE
>
	</P
><P
>	    Obviously, you would want to replace the 
	    <EM
>rvbijl39</EM
> with your normal user account.
	    And make that script executable. 
	</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="TROUBLESHOOTING"
>6. Troubleshooting Tips</A
></H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="THETIPS"
>6.1. The Tips</A
></H3
><P
>	<P
></P
><UL
><LI
><P
>		    There is a known bug about the Visor that sometimes
		    you need to reset the Visor before it is able to
		    sync properly.  This is the number one solution for 
                    most people having problems syncing.  If a soft 
		    reset does not work, and other USB devices work on 
		    this machine on Linux, a hard reset has been known 
		    to solve the problem. (Try some of the other 
                    suggestions before doing a hard reset).
		</P
></LI
><LI
><P
>Did you install the new kernel/modules?</P
></LI
><LI
><P
>		    Make sure that all the modules are running. The
		    command is <EM
>lsmod</EM
> and there
		    should be, at least, these modules: visor,
		    usbserial, usbcore; and one of the following:
                    usb-uhci or usb-ohci.
		</P
></LI
><LI
><P
>If you installed a new kernel, did you reboot?</P
></LI
><LI
><P
>		    Is the USB hardware enabled on your computer?
		    (Check your BIOS. Does it work in other operating
		    systems?)
		</P
></LI
><LI
><P
>		    Are things (ie "usb-serial") appearing in
		    <TT
CLASS="FILENAME"
>/proc/devices</TT
>? In 
		    <TT
CLASS="FILENAME"
>/proc/bus/usb/devices</TT
>? If not,
		    then the drivers aren't being loaded properly. 
	        </P
></LI
><LI
><P
>                    Is there any information being entered in syslog
                    when you press the hotsync button?
	        </P
></LI
><LI
><P
>		    Did you really remember to press the hotsync button
		    BEFORE running your synchronization script?
		</P
></LI
><LI
><P
> Email <CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:usbvisor-unix@lists.sourceforge.net"
>usbvisor-unix@lists.sourceforge.net</A
>&#62;</CODE
>.  </P
></LI
></UL
>
	</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="REFERENCES"
>7. Links</A
></H2
><P
>	You may find useful information at the following webpages.  
        Some provided the information included in this document.
    </P
><P
>	<P
></P
><UL
><LI
><P
>		   ColdSync: <A
HREF="http://coldsync.org"
TARGET="_top"
>http://coldsync.org</A
> 
		</P
></LI
><LI
><P
>		   Pilot-link: <A
HREF="http://www.pilot-link.org/"
TARGET="_top"
>http://www.pilot-link.org/</A
>
		</P
></LI
><LI
><P
>		   PalmOS HOWTO: <A
HREF="http://www.orbits.com/Palm/"
TARGET="_top"
>http://www.orbits.com/Palm/</A
>
		</P
></LI
><LI
><P
>		   Linux Kernel: <A
HREF="ftp.kernel.org/pub/linux/kernel/"
TARGET="_top"
>ftp.kernel.org/pub/linux/kernel/</A
>
		</P
></LI
><LI
><P
>		   USB Visor page: <A
HREF="http://usbvisor.sourceforge.net"
TARGET="_top"
>http://usbvisor.sourceforge.net</A
>
		</P
></LI
><LI
><P
>		    Hotplug info: <A
HREF="http://linux-hotplug.sourceforge.net/"
TARGET="_top"
>http://linux-hotplug.sourceforge.net/</A
>.
		</P
></LI
><LI
><P
>		   Documentation to figure out the type of controller 
		   was leached from the kernel documentation, 
		   Documentation/usb/scanner.txt.
		</P
></LI
></UL
>
    </P
></DIV
></DIV
></BODY
></HTML
>