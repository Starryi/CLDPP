<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>2. Increasing Your Softlimit</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Qmail-Scanner and ClamAV HowTo"><link rel="up" href="ch05.html" title="Chapter 5. Configuring qmail to Use qmail-scanner-queue.pl"><link rel="prev" href="ch05s01.html" title="1. Changing Your Tcp Rules"><link rel="next" href="ch06.html" title="Chapter 6. Conclusion"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2. Increasing Your Softlimit</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch05s01.html">Prev</a> </td><th width="60%" align="center">Chapter 5. Configuring qmail to Use qmail-scanner-queue.pl</th><td width="20%" align="right"> <a accesskey="n" href="ch06.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm277"></a>2. Increasing Your Softlimit</h2></div></div></div><p>If you try to send an email message, you will most likely receive an
				error from your client. The error message will say something that includes
				this:</p><pre class="screen">451 qq temporary problem (#4.3.0)</pre><p>If you followed Life with qmail, you then have a memory limit set in the
				/var/qmail/supervise/qmail-smtpd/run file. Look for the line that contains
				softlimit. It should look similar to this:</p><pre class="screen">exec /usr/local/bin/softlimit -m 2000000 \</pre><p>This example sets the memory limit for qmail-smtpd to 2M. After all of
				your changes qmail-smtpd is now running the entire Perl interpreter, and
				ClamAV. 2M will never be enough.</p><p>Each system is different, and has different requirements. It will take
				some experimenting on your part to find the correct value for your system's
				softlimit. Do not set softlimit to some high value! You are asking for
				trouble if you do this. To find the minimal value for your system, I
				recommend the following steps:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Increase softlimit by 1M</p></li><li class="listitem"><p>#qmailctl restart</p></li><li class="listitem"><p>Send a message</p></li><li class="listitem"><p>Repeat until you can successfully send an email</p></li></ul></div><p>Once you have found the minimum, I recommend increasing that by 1.5M,
				just for times that your email server has a heavy load.</p><p>After that just create a daily cronjob that runs
				/var/qmail/bin/qmail-scan-queue.pl -z to cleanup any dropped SMTP sessions
				that may be lying around in /var/spool/qmailscan.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch05s01.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch05.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch06.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">1. Changing Your Tcp Rules </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 6. Conclusion</td></tr></table></div></body></html>
