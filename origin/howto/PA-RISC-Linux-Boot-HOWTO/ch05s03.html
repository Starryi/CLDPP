<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>3. Kernel installation</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="keywords" content="PA-RISC, Linux, boot"><link rel="home" href="index.html" title="PA-RISC/Linux Boot HOWTO"><link rel="up" href="ch05.html" title="Chapter 5. Building and installing a custom kernel"><link rel="prev" href="ch05s02.html" title="2. Kernel configuration"><link rel="next" href="apa.html" title="Appendix A. Windows&#8482; 2003 boot server howto"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3. Kernel installation</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch05s02.html">Prev</a> </td><th width="60%" align="center">Chapter 5. Building and installing a custom kernel</th><td width="20%" align="right"> <a accesskey="n" href="apa.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="kernelinstall"></a>3. Kernel installation</h2></div></div></div><p>
				If you have made a native build on the box you wish to install, you can setup
				the new kernel as follows:
				within the kernel source tree <code class="filename">linux/</code>, as <code class="literal">root</code> execute:

			  </p><pre class="programlisting">
<code class="prompt">[user@machine ~/dir]&gt;</code> <span class="command"><strong>cp vmlinux /boot/vmlinux-<em class="replaceable"><code>[kernelversion]</code></em></strong></span>
<code class="prompt">[user@machine ~/dir]&gt;</code> <span class="command"><strong>cp System.map /boot/System.map-<em class="replaceable"><code>[kernelversion]</code></em></strong></span>
<code class="prompt">[user@machine ~/dir]&gt;</code> <span class="command"><strong>cp .config /boot/config-<em class="replaceable"><code>[kernelversion]</code></em></strong></span>
				</pre><p>

				Though it is not mandatory, we suggest you to replace
				<em class="replaceable"><code>[kernelversion]</code></em> by the version of the
				kernel you built, <span class="emphasis"><em>e.g.</em></span>:
				<code class="filename">vmlinux-2.4.18-pa44</code>. This will help you
				dealing with multiple kernel versions on the same machine.
				The same applies to <code class="filename">.config</code>.
				It is not needed to have a working kernel, though it might
				be very helpful when configuring a new one.
				Now, do <span class="command"><strong>cd /boot</strong></span>, make sure that
				<code class="filename">vmlinux</code> is a symbolic link to another
				file, as in the following example:

			  </p><pre class="programlisting">
<code class="prompt">[user@machine ~/dir]&gt;</code> <span class="command"><strong>ls -l vmlinux</strong></span>
<code class="computeroutput">lrwxrwxrwx  1 root   root   35 Jun 23 01:38 vmlinux -&gt; vmlinux-2.4.18-64-SMP</code>
				</pre><p>

				Make sure to remember the name of the kernel actually running
				on your box if ever the new one won't work properly.
				You are now able to ask <span class="command"><strong>PALO</strong></span> to boot on it if needed
				(see <a class="xref" href="ch03.html" title="Chapter 3. PALO, the PA/Linux kernel loader">Chapter 3, <i><span class="command"><strong>PALO</strong></span>, the PA/Linux kernel loader</i></a> for more information).
				Now do the following:

			  </p><pre class="programlisting">
<code class="prompt">[user@machine ~/dir]&gt;</code> <span class="command"><strong>rm -f vmlinux</strong></span>
<code class="prompt">[user@machine ~/dir]&gt;</code> <span class="command"><strong>ln -s vmlinux-<em class="replaceable"><code>[kernelversion]</code></em> vmlinux</strong></span>
<code class="prompt">[user@machine ~/dir]&gt;</code> <span class="command"><strong>sync</strong></span>
				</pre><p>

				If you want to boot from network you can forget all this,
				as you will need to set <span class="command"><strong>PALO</strong></span> as explained in the
				<a class="xref" href="ch03s03.html" title="3. PALO management tool usage">Section 3, &#8220;<span class="command"><strong>PALO</strong></span> management tool usage&#8221;</a>, and run <span class="command"><strong>make palo</strong></span>
				to create the bootable <span class="emphasis"><em>lifimage</em></span>.
			</p><p>
				If you have made a cross-compiled build or built a kernel on a
				PA box which is not the one you wish to install,
				you have to find a way to put <code class="filename">vmlinux</code>,
				<code class="filename">System.map</code> and eventually <code class="filename">.config</code>
				in <code class="filename">/boot/</code> as mentioned before.
				You can use the network (like <span class="command"><strong>ftp</strong></span>)
				or a CD to do so, or even direct copy to the hard disk drive.
			</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch05s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch05.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="apa.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">2. Kernel configuration </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Appendix A. <span class="trademark">Windows</span>&#8482; 2003 boot server howto</td></tr></table></div></body></html>
