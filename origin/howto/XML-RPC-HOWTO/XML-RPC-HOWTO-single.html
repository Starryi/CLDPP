<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>XML-RPC HOWTO</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="description" content="Describes how to use XML-RPC to implement clients and servers in a variety of languages. Provides example code in Perl, Python, C, C++, Java, PHP, XML-RPC.Net and other languages. Includes sections on Zope and KDE 2.0. Applies to all operating systems with XML-RPC support."></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article"><div class="titlepage"><div><div><h2 class="title"><a name="xmlrpc-howto"></a>XML-RPC HOWTO</h2></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Eric</span> <span class="surname">Kidd</span></h3><div class="affiliation"><span class="orgname">Source Builders<br></span><div class="address"><p><code class="email">&lt;<a class="email" href="mailto:eric.kidd@pobox.com">eric.kidd@pobox.com</a>&gt;</code></p></div></div></div><div class="author"><h3 class="author"><span class="firstname">Charles</span> <span class="surname">Cook</span></h3><div class="affiliation"><span class="orgname">Cook Computing<br></span><div class="address"><p><code class="email">&lt;<a class="email" href="mailto:charlescook@ukonline.co.uk">charlescook@ukonline.co.uk</a>&gt;</code></p></div></div></div><div class="author"><h3 class="author"><span class="othername">And Other Contributors</span></h3></div></div></div><div><p class="copyright">Copyright © 2001 Eric Kidd, Charles Cook</p></div><div><p class="pubdate">0.8.0, 2001-04-12</p></div><div><div class="revhistory"><table style="border-style:solid; width:100%;" summary="Revision History"><tr><th align="left" valign="top" colspan="2"><b>Revision History</b></th></tr><tr><td align="left">Revision 0.9.0</td><td align="left">2001-05-13</td></tr><tr><td align="left" colspan="2">Merged in Charles Cook's chapter on
	XML-RPC.Net.</td></tr><tr><td align="left">Revision 0.8.0</td><td align="left">2001-04-12</td></tr><tr><td align="left" colspan="2">Updated section on common interfaces.  Added pointer to
	XML-RPC.Net information.</td></tr><tr><td align="left">Revision 0.7.0</td><td align="left">2001-04-03</td></tr><tr><td align="left" colspan="2">Added section on C++ proxy classes.</td></tr><tr><td align="left">Revision 0.6.0</td><td align="left">2001-02-02</td></tr><tr><td align="left" colspan="2">Added sections on Ruby, K and common
	interfaces.</td></tr><tr><td align="left">Revision 0.5.0</td><td align="left">2001-01-23</td></tr><tr><td align="left" colspan="2">Initial version.</td></tr></table></div></div><div><div class="abstract"><p class="title"><b>Abstract</b></p><p>Describes how to use XML-RPC to implement clients and servers
      in a variety of languages. Provides example code in Perl, Python, C,
      C++, Java, PHP, XML-RPC.Net and other languages. Includes sections on
      Zope and KDE 2.0. Applies to all operating systems with XML-RPC
      support.</p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#xmlrpc-howto-legal">1. Legal Notice</a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-intro">2. What is XML-RPC?</a></span></dt><dd><dl><dt><span class="section"><a href="#xmlrpc-howto-spec">2.1. How it Works</a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-types">2.2. Supported Data Types</a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-history">2.3. The History of XML-RPC</a></span></dt></dl></dd><dt><span class="section"><a href="#xmlrpc-howto-competition">3. XML-RPC vs. Other Protocols</a></span></dt><dd><dl><dt><span class="section"><a href="#xmlrpc-howto-corba">3.1. XML-RPC vs. CORBA</a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-dcom">3.2. XML-RPC vs. DCOM</a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-soap">3.3. XML-RPC vs. SOAP</a></span></dt></dl></dd><dt><span class="section"><a href="#xmlrpc-howto-interfaces">4. Common XML-RPC Interfaces</a></span></dt><dd><dl><dt><span class="section"><a href="#xmlrpc-howto-api-introspection">4.1. Introspection: Discovering Server APIs</a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-api-boxcarring">4.2. Boxcarring: Sending Multiple Requests at Once</a></span></dt></dl></dd><dt><span class="section"><a href="#xmlrpc-howto-api">5. A Sample API: <code class="function">sumAndDifference</code></a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-perl">6. Using XML-RPC with Perl</a></span></dt><dd><dl><dt><span class="section"><a href="#xmlrpc-howto-perl-client">6.1. A Perl Client</a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-perl-server">6.2. A Stand-Alone Perl Server</a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-perl-cgi">6.3. A CGI-Based Perl Server</a></span></dt></dl></dd><dt><span class="section"><a href="#xmlrpc-howto-python">7. Using XML-RPC with Python</a></span></dt><dd><dl><dt><span class="section"><a href="#xmlrpc-howto-python-client">7.1. A Python Client</a></span></dt></dl></dd><dt><span class="section"><a href="#xmlrpc-howto-c">8. Using XML-RPC with C and C++</a></span></dt><dd><dl><dt><span class="section"><a href="#xmlrpc-howto-c-client">8.1. A C Client</a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-cc-client">8.2. A C++ Client</a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-cc-proxy">8.3. A C++ Client with Proxy Classes</a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-c-cgi">8.4. A CGI-Based C Server</a></span></dt></dl></dd><dt><span class="section"><a href="#xmlrpc-howto-java">9. Using XML-RPC with Java</a></span></dt><dd><dl><dt><span class="section"><a href="#xmlrpc-howto-java-client">9.1. A Java Client</a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-java-server">9.2. A Stand-Alone Java Server</a></span></dt></dl></dd><dt><span class="section"><a href="#xmlrpc-howto-php">10. Using XML-RPC with PHP</a></span></dt><dd><dl><dt><span class="section"><a href="#xmlrpc-howto-php-client">10.1. A PHP Client</a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-php-server">10.2. A PHP Server</a></span></dt></dl></dd><dt><span class="section"><a href="#xmlrpc-howto-dotnet">11. Using XML-RPC with Microsoft .NET</a></span></dt><dd><dl><dt><span class="section"><a href="#xmlrpc-howto-csharp-client">11.1. A C# Client</a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-vbdotnet-client">11.2. A Visual Basic .NET Client</a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-csharp-server">11.3. A C# Server</a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-vbdotnet-server">11.4. A Visual Basic .NET Server</a></span></dt></dl></dd><dt><span class="section"><a href="#xmlrpc-howto-ruby">12. Using XML-RPC with Ruby</a></span></dt><dd><dl><dt><span class="section"><a href="#xmlrpc-howto-ruby-client">12.1. A Ruby Client</a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-ruby-server">12.2. A Ruby Server</a></span></dt></dl></dd><dt><span class="section"><a href="#xmlrpc-howto-proprietary">13. Using XML-RPC with Proprietary Languages</a></span></dt><dd><dl><dt><span class="section"><a href="#xmlrpc-howto-k">13.1. Using XML-RPC with K</a></span></dt></dl></dd><dt><span class="section"><a href="#xmlrpc-howto-applist">14. Applications with Built-in XML-RPC Support</a></span></dt><dd><dl><dt><span class="section"><a href="#xmlrpc-howto-zope">14.1. Zope</a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-kde">14.2. KDE 2.0</a></span></dt></dl></dd><dt><span class="section"><a href="#xmlrpc-howto-about">15. About This Document</a></span></dt><dd><dl><dt><span class="section"><a href="#xmlrpc-howto-versions">15.1. New Versions of This Document</a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-contributors">15.2. Contributors to the XML-RPC HOWTO</a></span></dt><dt><span class="section"><a href="#xmlrpc-howto-submitting">15.3. Submitting Other Snippets</a></span></dt></dl></dd></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xmlrpc-howto-legal"></a>1. Legal Notice</h2></div></div></div><p>Permission is granted to copy, distribute and/or modify this
      document under the terms of the <a class="ulink" href="http://www.fsf.org/copyleft/fdl.html" target="_top"><em class="citetitle">GNU Free
      Documentation License</em></a>, Version 1.1 or any later
      version published by the Free Software Foundation with no Invariant
      Sections, no Front-Cover Texts, and no Back-Cover Texts. You may
      obtain a copy of the <em class="citetitle">GNU Free Documentation
      License</em> from the Free Software Foundation by visiting
      <a class="ulink" href="http://www.fsf.org/" target="_top">their Web site</a>
      or by writing to: Free Software Foundation, Inc., 59 Temple Place -
      Suite 330, Boston, MA 02111-1307, USA.</p><p>This manual contains short example programs (<span class="quote">&#8220;<span class="quote">the
      Software</span>&#8221;</span>). Permission is hereby granted, free of charge, to
      any person obtaining a copy of the Software, to deal in the Software
      without restriction, including without limitation the rights to use,
      copy, modify, merge, publish, distribute, sublicense, and/or sell
      copies of the Software, and to permit persons to whom the Software is
      furnished to do so, subject to the following condition:</p><p>THE SOFTWARE IS PROVIDED <span class="quote">&#8220;<span class="quote">AS IS</span>&#8221;</span>, WITHOUT WARRANTY
      OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
      WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
      NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY
      CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
      TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
      SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xmlrpc-howto-intro"></a>2. What is XML-RPC?</h2></div></div></div><p><a class="ulink" href="http://www.xmlrpc.com/" target="_top">XML-RPC</a> is a simple,
    portable way to make remote procedure calls over HTTP. It can be used
    with Perl, Java, Python, C, C++, PHP and many other programming
    languages. Implementations are available for Unix, Windows and the
    Macintosh.</p><p>Here's a short XML-RPC client written in Perl. (We use Ken
    MacLeod's <a class="ulink" href="http://bitsko.slc.ut.us/~ken/xml-rpc/" target="_top">Frontier::Client</a>
    module.)</p><pre class="programlisting">use Frontier::Client;
$server = Frontier::Client-&gt;new(url =&gt; 'http://betty.userland.com/RPC2');
$name = $server-&gt;call('examples.getStateName', 41);
print "$name\n";</pre><p>When run, this program will connect to the remote server, get the
    state name, and print it. (State #41 should be South Dakota in this
    example.)</p><p>Here's the same program in Python. (This time, we use Fredrik
    Lundh's <a class="ulink" href="http://www.pythonware.com/products/xmlrpc/" target="_top">xmlrpclib</a>.)</p><pre class="programlisting">python&gt; import xmlrpclib
python&gt; server = xmlrpclib.Server("http://betty.userland.com/RPC2")
python&gt; server.examples.getStateName(41)
'South Dakota'</pre><p>In the following chapters, you'll learn how to write XML-RPC
    clients and servers in a variety of programming languages.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-spec"></a>2.1. How it Works</h3></div></div></div><p>XML-RPC is described fully in Dave Winer's <a class="ulink" href="http://www.xmlrpc.com/spec" target="_top">official specification</a>. If
      you're curious, go ahead and take a look&#8212;it's a quick and
      straight-forward read.</p><p>On the wire, XML-RPC values are encoded as XML:</p><pre class="programlisting">&lt;methodCall&gt;
  &lt;methodName&gt;sample.sumAndDifference&lt;/methodName&gt;
  &lt;params&gt;
    &lt;param&gt;&lt;value&gt;&lt;int&gt;5&lt;/int&gt;&lt;/value&gt;&lt;/param&gt;
    &lt;param&gt;&lt;value&gt;&lt;int&gt;3&lt;/int&gt;&lt;/value&gt;&lt;/param&gt;
  &lt;/params&gt;
&lt;/methodCall&gt;</pre><p>This is verbose, but compresses readily. It's also faster than
      you might expect&#8212;according to measurements by Rick Blair, a
      round-trip XML-RPC call takes 3 milliseconds using Hannes
      Wallnöfer's Java implementation.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-types"></a>2.2. Supported Data Types</h3></div></div></div><p>XML-RPC supports the following data types:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">int</code></span></dt><dd><p>A signed, 32-bit integer.</p></dd><dt><span class="term"><code class="literal">string</code></span></dt><dd><p>An ASCII string, which may contain NULL bytes. (Actually,
	    several XML-RPC implementations support Unicode, thanks to the
	    underlying features of XML.)</p></dd><dt><span class="term"><code class="literal">boolean</code></span></dt><dd><p>Either true or false.</p></dd><dt><span class="term"><code class="literal">double</code></span></dt><dd><p>A double-precision floating point number. (Accuracy may
	    be limited in some implementations.)</p></dd><dt><span class="term"><code class="literal">dateTime.iso8601</code></span></dt><dd><p>A date and time. Unfortunately, since XML-RPC forbids the
	    use of timezones, this is very nearly useless.</p></dd><dt><span class="term"><code class="literal">base64</code></span></dt><dd><p>Raw binary data of any length; encoded using Base64 on
	    the wire. Very useful. (Some implementations don't like to
	    receive zero bytes of data, though.)</p></dd><dt><span class="term"><code class="literal">array</code></span></dt><dd><p>An one-dimensional array of values. Individual values may
	    be of any type.</p></dd><dt><span class="term"><code class="literal">struct</code></span></dt><dd><p>A collection of key-value pairs. The keys are strings;
	    the values may be of any type.</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-history"></a>2.3. The History of XML-RPC</h3></div></div></div><p>XML-RPC was inspired by two earlier protocols. The first is an
      anonymous RPC protocol designed by Dave Winer and announced in an
      <a class="ulink" href="http://davenet.userland.com/1998/02/27/rpcOverHttpViaXml" target="_top">old
      DaveNet essay</a>. (This is why XML-RPC servers are often
      installed under <code class="filename">/RPC2</code>.) The other, more
      important inspiration was an early draft of the SOAP protocol.</p><p>A longer <a class="ulink" href="http://www.xmlrpc.com/stories/storyReader%24555" target="_top">history of
      XML-RPC</a> has been generously provided by Dave Winer. This also
      explains the relationship between XML-RPC and SOAP.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xmlrpc-howto-competition"></a>3. XML-RPC vs. Other Protocols</h2></div></div></div><p>XML-RPC is not the only way to make remote procedure calls. Other
    popular protocols include CORBA, DCOM and SOAP. Each of these protocols
    has advantages and disadvantages.</p><p>The opinions in the section are obviously biased; please take
    them with a grain of salt.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-corba"></a>3.1. XML-RPC vs. CORBA</h3></div></div></div><p><a class="ulink" href="http://www.corba.org/" target="_top">CORBA</a> is a popular
      protocol for writing distributed, object-oriented applications. It's
      typically used in multi-tier enterprise applications. Recently, it's
      also been adopted by the <a class="ulink" href="http://www.gnome.org/" target="_top">Gnome</a> project for
      interapplication communication.</p><p>CORBA is well-supported by many vendors and several free
      software projects. CORBA works well with Java and C++, and is
      available for many other languages. CORBA also provides an excellent
      <em class="glossterm">interface definition language</em> (IDL), allowing
      you to define readable, object-oriented APIs.</p><p>Unfortunately, CORBA is very complex. It has a steep
      learning curve, requires significant effort to implement, and
      requires fairly sophisticated clients. It's better-suited to
      enterprise and desktop applications than it is to distributed web
      applications.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-dcom"></a>3.2. XML-RPC vs. DCOM</h3></div></div></div><p><a class="ulink" href="http://www.microsoft.com/com/tech/DCOM.asp" target="_top">DCOM</a> is
      Microsoft's answer to CORBA. It's great if you're already using COM
      components, and you don't need to talk to non-Microsoft
      systems. Otherwise, it won't help you very much.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-soap"></a>3.3. XML-RPC vs. SOAP</h3></div></div></div><p><a class="ulink" href="http://www.w3.org/TR/SOAP/" target="_top">SOAP</a> is very
      similar to XML-RPC. It, too, works by marshaling procedure calls
      over HTTP as XML documents. Unfortunately, SOAP appears to be
      suffering from specification creep.</p><p>SOAP was originally created as a collaboration between
      UserLand, DevelopMentor and Microsoft. The initial public release was
      basically XML-RPC with namespaces and longer element names. Since
      then, however, SOAP has been turned over a W3C working group.</p><p>Unfortunately, the working group has been adding a laundry-list
      of strange features to SOAP. As of the current writing, SOAP supports
      XML Schemas, enumerations, strange hybrids of structs and arrays, and
      custom types. At the same time, several aspects of SOAP are
      implementation defined.</p><p>Basically, if you like XML-RPC, but wish the protocol had more
      features, check out SOAP. :-)</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xmlrpc-howto-interfaces"></a>4. Common XML-RPC Interfaces</h2></div></div></div><p>Several XML-RPC servers provide built-in methods. These aren't
    part of XML-RPC itself, but they make handy add-ons.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-api-introspection"></a>4.1. Introspection: Discovering Server APIs</h3></div></div></div><p>Edd Dumbill <a class="ulink" href="http://xmlrpc.usefulinc.com/doc/reserved.html" target="_top">proposed</a>
      the following set of methods:</p><pre class="synopsis"><span class="returnvalue">array</span> <code class="function">system.listMethods</code> ()
<span class="returnvalue">string</span> <code class="function">system.methodHelp</code> (<span class="type">string</span> <em class="parameter"><code>methodName</code></em>)
<span class="returnvalue">array</span> <code class="function">system.methodSignature</code> (<span class="type">string</span> <em class="parameter"><code>methodName</code></em>)</pre><p>If a server supports these methods, you can ask it to print out
      some documentation:</p><pre class="programlisting">import xmlrpclib
server = xmlrpclib.Server("http://xmlrpc-c.sourceforge.net/api/sample.php")
for method in server.system.listMethods():
    print method
    print server.system.methodHelp(method)
    print</pre><p>These methods are currently supported by servers written in
      PHP, C and Microsoft .NET.  Partial introspection support is included
      in recent updates to UserLand Frontier.  Introspection support for
      Perl, Python and Java is available at the <a class="ulink" href="http://xmlrpc-c.sourceforge.net/hacks.php" target="_top">XML-RPC
      Hacks</a> page.  Please feel free to add introspection support to
      other XML-RPC servers!</p><p>Various client-side tools (documentation generators, wrapper
      generators, and so on) can be found at the XML-RPC Hacks page as
      well.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-api-boxcarring"></a>4.2. Boxcarring: Sending Multiple Requests at Once</h3></div></div></div><p>If you're writing an XML-RPC client which makes lots of small
      function calls, you may discover that your round-trip time is fairly
      high, thanks to Internet backbone latency. Some servers allow you to
      batch up multiple requests using the following function:</p><pre class="synopsis"><span class="returnvalue">array</span> <code class="function">system.multicall</code> (<span class="type">array</span> <em class="parameter"><code>calls</code></em>)</pre><p>You can find more information in the <a class="ulink" href="http://www.xmlrpc.com/discuss/msgReader%241208" target="_top">system.multicall
      RFC</a>.</p><p>This method is currently supported by servers written in C and
      UserLand Frontier.  Servers written in Python and Perl can use the
      code at the <a class="ulink" href="http://xmlrpc-c.sourceforge.net/hacks.php" target="_top">XML-RPC
      Hacks</a> page.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xmlrpc-howto-api"></a>5. A Sample API: <code class="function">sumAndDifference</code></h2></div></div></div><p>To demonstrate XML-RPC, we implement the following API in as many
    languages as possible.</p><pre class="synopsis"><span class="returnvalue">struct</span> <code class="function">sample.sumAndDifference</code> (<span class="type">int</span> <em class="parameter"><code>x</code></em>, <span class="type">int</span> <em class="parameter"><code>y</code></em>)</pre><p>This function takes two integers as arguments, and returns an
    XML-RPC <code class="literal">&lt;struct&gt;</code> containing two elements:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="parameter"><code>sum</code></em></span></dt><dd><p>The sum of the two integers.</p></dd><dt><span class="term"><em class="parameter"><code>difference</code></em></span></dt><dd><p>The difference between the two integers.</p></dd></dl></div><p>It's not very useful, but it makes a nice example. :-)</p><p>This function (and others) are available using the URL
    <code class="literal">http://xmlrpc-c.sourceforge.net/api/sample.php</code>.
    (This URL won't do anything in a browser; it requires an XML-RPC
    client.)</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xmlrpc-howto-perl"></a>6. Using XML-RPC with Perl</h2></div></div></div><p>Ken MacLeod has implemented XML-RPC for Perl. You can find his
    Frontier::RPC module at his <a class="ulink" href="http://bitsko.slc.ut.us/~ken/xml-rpc/" target="_top">website</a> or through
    <a class="ulink" href="http://www.cpan.org/" target="_top">CPAN</a>.</p><p>To install Frontier::RPC, download the package and compile
    it in the standard fashion:</p><pre class="programlisting">bash$ gunzip -c Frontier-RPC-0.07b1.tar.gz | tar xvf -
bash$ cd Frontier-RPC-0.07b1
bash$ perl Makefile.PL
bash$ make
bash$ make test
bash$ su -c 'make install'</pre><p>(The process will be slightly different on Windows systems, or if
    you don't have root access. Consult your Perl documentation for
    details.)</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-perl-client"></a>6.1. A Perl Client</h3></div></div></div><p>The following program shows how to call an XML-RPC server from
      Perl:</p><pre class="programlisting">use Frontier::Client;

# Make an object to represent the XML-RPC server.
$server_url = 'http://xmlrpc-c.sourceforge.net/api/sample.php';
$server = Frontier::Client-&gt;new(url =&gt; $server_url);

# Call the remote server and get our result.
$result = $server-&gt;call('sample.sumAndDifference', 5, 3);
$sum = $result-&gt;{'sum'};
$difference = $result-&gt;{'difference'};

print "Sum: $sum, Difference: $difference\n";</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-perl-server"></a>6.2. A Stand-Alone Perl Server</h3></div></div></div><p>The following program shows how to write an XML-RPC server in
      Perl:</p><pre class="programlisting">use Frontier::Daemon;

sub sumAndDifference {
    my ($x, $y) = @_;
    return {'sum' =&gt; $x + $y, 'difference' =&gt; $x - $y};
}

# Call me as http://localhost:8080/RPC2
$methods = {'sample.sumAndDifference' =&gt; \&amp;sumAndDifference};
Frontier::Daemon-&gt;new(LocalPort =&gt; 8080, methods =&gt; $methods)
    or die "Couldn't start HTTP server: $!";</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-perl-cgi"></a>6.3. A CGI-Based Perl Server</h3></div></div></div><p><code class="literal">Frontier::RPC2</code> doesn't provide built-in
      support for CGI-based servers. It <span class="emphasis"><em>does</em></span>, however,
      provide most of the pieces you'll need.</p><p>Save the following code as
      <code class="filename">sumAndDifference.cgi</code> in your web server's
      <code class="filename">cgi-bin</code> directory. (On Unix systems, you'll need
      to make it executable by typing <code class="literal">chmod +x
      sumAndDifference.cgi</code>.)</p><pre class="programlisting">#!/usr/bin/perl -w

use strict;
use Frontier::RPC2;

sub sumAndDifference {
    my ($x, $y) = @_;
    return {'sum' =&gt; $x + $y, 'difference' =&gt; $x - $y};
}

process_cgi_call({'sample.sumAndDifference' =&gt; \&amp;sumAndDifference});


#==========================================================================
#  CGI Support
#==========================================================================
#  Simple CGI support for Frontier::RPC2. You can copy this into your CGI
#  scripts verbatim, or you can package it into a library.
#  (Based on xmlrpc_cgi.c by Eric Kidd &lt;http://xmlrpc-c.sourceforge.net/&gt;.)

# Process a CGI call.
sub process_cgi_call ($) {
    my ($methods) = @_;

    # Get our CGI request information.
    my $method = $ENV{'REQUEST_METHOD'};
    my $type = $ENV{'CONTENT_TYPE'};
    my $length = $ENV{'CONTENT_LENGTH'};

    # Perform some sanity checks.
    http_error(405, "Method Not Allowed") unless $method eq "POST";
    http_error(400, "Bad Request") unless $type eq "text/xml";
    http_error(411, "Length Required") unless $length &gt; 0;

    # Fetch our body.
    my $body;
    my $count = read STDIN, $body, $length;
    http_error(400, "Bad Request") unless $count == $length; 

    # Serve our request.
    my $coder = Frontier::RPC2-&gt;new;
    send_xml($coder-&gt;serve($body, $methods));
}

# Send an HTTP error and exit.
sub http_error ($$) {
    my ($code, $message) = @_;
    print &lt;&lt;"EOD";
Status: $code $message
Content-type: text/html

&lt;title&gt;$code $message&lt;/title&gt;
&lt;h1&gt;$code $message&lt;/h1&gt;
&lt;p&gt;Unexpected error processing XML-RPC request.&lt;/p&gt;
EOD
    exit 0;
}

# Send an XML document (but don't exit).
sub send_xml ($) {
    my ($xml_string) = @_;
    my $length = length($xml_string);
    print &lt;&lt;"EOD";
Status: 200 OK
Content-type: text/xml
Content-length: $length

EOD
    # We want precise control over whitespace here.
    print $xml_string;
}</pre><p>You can copy the utility routines into your own CGI
      scripts.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xmlrpc-howto-python"></a>7. Using XML-RPC with Python</h2></div></div></div><p>Fredrik Lundh has provided an excellent <a class="ulink" href="http://www.pythonware.com/products/xmlrpc/" target="_top">XML-RPC library for
    Python</a>.</p><p>To install, download the latest version. You can either stick the 
    <code class="filename">*.py</code> files in the same directory as your Python
    code, or you can install them in your system's Python directory.</p><p>RedHat 6.2 users can type the following:</p><pre class="programlisting">bash$ mkdir xmlrpclib-0.9.8
bash$ cd xmlrpclib-0.9.8
bash$ unzip ../xmlrpc-0.9.8-990621.zip
bash$ python
python&gt; import xmlrpclib
python&gt; import xmlrpcserver
python&gt; <span class="keycap"><strong>Control-D</strong></span>
bash$ su -c 'cp *.py *.pyc /usr/lib/python1.5/'</pre><p>We <code class="literal">import</code> two of the <code class="filename">*.py</code>
    files to trick Python into compiling them. Users of other platforms
    should consult their Python documentation.</p><p>For more Python examples, see the article <a class="ulink" href="http://www.oreillynet.com/pub/a/python/2001/01/17/xmlrpcserver.html" target="_top">XML-RPC:
    It Works Both Ways</a> on the O'Reilly Network.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-python-client"></a>7.1. A Python Client</h3></div></div></div><p>The following program shows how to call an XML-RPC server from
      Python:</p><pre class="programlisting">import xmlrpclib

# Create an object to represent our server.
server_url = 'http://xmlrpc-c.sourceforge.net/api/sample.php';
server = xmlrpclib.Server(server_url);

# Call the server and get our result.
result = server.sample.sumAndDifference(5, 3)
print "Sum:", result['sum']
print "Difference:", result['difference']</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xmlrpc-howto-c"></a>8. Using XML-RPC with C and C++</h2></div></div></div><p>To get a copy of XML-RPC for C/C++, see the <a class="ulink" href="http://xmlrpc-c.sourceforge.net" target="_top">xmlrpc-c website</a>.</p><p>You can either download everything in RPM format, or you can
    build it from source.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-c-client"></a>8.1. A C Client</h3></div></div></div><p>Save the following code in a file called
      <code class="filename">getSumAndDifference.c</code>:</p><pre class="programlisting">#include &lt;stdio.h&gt;
#include &lt;xmlrpc.h&gt;
#include &lt;xmlrpc_client.h&gt;

#define NAME       "XML-RPC getSumAndDifference C Client"
#define VERSION    "0.1"
#define SERVER_URL "http://xmlrpc-c.sourceforge.net/api/sample.php"

void die_if_fault_occurred (xmlrpc_env *env)
{
    /* Check our error-handling environment for an XML-RPC fault. */
    if (env-&gt;fault_occurred) {
        fprintf(stderr, "XML-RPC Fault: %s (%d)\n",
                env-&gt;fault_string, env-&gt;fault_code);
        exit(1);
    }
}

int main (int argc, char** argv)
{
    xmlrpc_env env;
    xmlrpc_value *result;
    xmlrpc_int32 sum, difference;
    
    /* Start up our XML-RPC client library. */
    xmlrpc_client_init(XMLRPC_CLIENT_NO_FLAGS, NAME, VERSION);
    xmlrpc_env_init(&amp;env);

    /* Call our XML-RPC server. */
    result = xmlrpc_client_call(&amp;env, SERVER_URL,
                                "sample.sumAndDifference", "(ii)",
                                (xmlrpc_int32) 5,
                                (xmlrpc_int32) 3);
    die_if_fault_occurred(&amp;env);
    
    /* Parse our result value. */
    xmlrpc_parse_value(&amp;env, result, "{s:i,s:i,*}",
                       "sum", &amp;sum,
                       "difference", &amp;difference);
    die_if_fault_occurred(&amp;env);

    /* Print out our sum and difference. */
    printf("Sum: %d, Difference: %d\n", (int) sum, (int) difference);
    
    /* Dispose of our result value. */
    xmlrpc_DECREF(result);

    /* Shutdown our XML-RPC client library. */
    xmlrpc_env_clean(&amp;env);
    xmlrpc_client_cleanup();

    return 0;
}</pre><p>To compile it, you can type:</p><pre class="programlisting">bash$ CLIENT_CFLAGS=`xmlrpc-c-config libwww-client --cflags`
bash$ CLIENT_LIBS=`xmlrpc-c-config libwww-client --libs`
bash$ gcc $CLIENT_CFLAGS -o getSumAndDifference getSumAndDifference.c $CLIENT_LIBS</pre><p>You may need to replace <span class="command"><strong>gcc</strong></span> with the name of
      your system's C compiler.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-cc-client"></a>8.2. A C++ Client</h3></div></div></div><p>Save the following code in a file called
      <code class="filename">getSumAndDifference2.cc</code>:</p><pre class="programlisting">#include &lt;iostream.h&gt;
#include &lt;XmlRpcCpp.h&gt;

#define NAME       "XML-RPC getSumAndDifference C++ Client"
#define VERSION    "0.1"
#define SERVER_URL "http://xmlrpc-c.sourceforge.net/api/sample.php"

static void get_sum_and_difference () {

    // Build our parameter array.
    XmlRpcValue param_array = XmlRpcValue::makeArray();
    param_array.arrayAppendItem(XmlRpcValue::makeInt(5));
    param_array.arrayAppendItem(XmlRpcValue::makeInt(3));

    // Create an object to resprent the server, and make our call.
    XmlRpcClient server (SERVER_URL);
    XmlRpcValue result = server.call("sample.sumAndDifference", param_array);

    // Extract the sum and difference from our struct.
    XmlRpcValue::int32 sum = result.structGetValue("sum").getInt();
    XmlRpcValue::int32 diff = result.structGetValue("difference").getInt();
        
    cout &lt;&lt; "Sum: " &lt;&lt; sum &lt;&lt; ", Difference: " &lt;&lt; diff &lt;&lt; endl;
}

int main (int argc, char **argv) {

    // Start up our client library.
    XmlRpcClient::Initialize(NAME, VERSION);

    // Call our client routine, and watch out for faults.
    try {
        get_sum_and_difference();
    } catch (XmlRpcFault&amp; fault) {
        cerr &lt;&lt; argv[0] &lt;&lt; ": XML-RPC fault #" &lt;&lt; fault.getFaultCode()
             &lt;&lt; ": " &lt;&lt; fault.getFaultString() &lt;&lt; endl;
        XmlRpcClient::Terminate();
        exit(1);
    }

    // Shut down our client library.
    XmlRpcClient::Terminate();
    return 0;
}</pre><p>To compile it, you can type:</p><pre class="programlisting">bash$ CLIENT_CFLAGS=`xmlrpc-c-config c++ libwww-client --cflags`
bash$ CLIENT_LIBS=`xmlrpc-c-config c++ libwww-client --libs`
bash$ c++ $CLIENT_CFLAGS -o getSumAndDifference2 getSumAndDifference2.cc $CLIENT_LIBS</pre><p>You'll need a reasonably modern C++ compiler for this to
      work.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-cc-proxy"></a>8.3. A C++ Client with Proxy Classes</h3></div></div></div><p>If your XML-RPC server supports the <a class="link" href="#xmlrpc-howto-api-introspection" title="4.1. Introspection: Discovering Server APIs">Introspection API</a>,
      you can automatically generate C++ proxy classes for it.  To generate
      a proxy class, type the following command and save the output to a
      file:</p><pre class="programlisting">bash$ xml-rpc-api2cpp \
&gt; http://xmlrpc-c.sourceforge.net/api/sample.php sample SampleProxy</pre><p>This will generate a proxy class named
      <code class="literal">SampleProxy</code> containing wrappers for all the
      methods beginning with <code class="literal">sample</code>. You can edit this
      class in any fashion you'd like.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-c-cgi"></a>8.4. A CGI-Based C Server</h3></div></div></div><p>Save the following code in a file called
      <code class="filename">sumAndDifference.c</code>:</p><pre class="programlisting">#include &lt;xmlrpc.h&gt;
#include &lt;xmlrpc_cgi.h&gt;

xmlrpc_value *
sumAndDifference (xmlrpc_env *env, xmlrpc_value *param_array, void *user_data)
{
    xmlrpc_int32 x, y;

    /* Parse our argument array. */
    xmlrpc_parse_value(env, param_array, "(ii)", &amp;x, &amp;y);
    if (env-&gt;fault_occurred)
        return NULL;

    /* Return our result. */
    return xmlrpc_build_value(env, "{s:i,s:i}",
                              "sum", x + y,
                              "difference", x - y);
}

int main (int argc, char **argv)
{
    /* Set up our CGI library. */
    xmlrpc_cgi_init(XMLRPC_CGI_NO_FLAGS);

    /* Install our only method (with a method signature and a help string). */
    xmlrpc_cgi_add_method_w_doc("sample.sumAndDifference",
                                &amp;sumAndDifference, NULL,
                                "S:ii", "Add and subtract two integers.");

    /* Call the appropriate method. */
    xmlrpc_cgi_process_call();

    /* Clean up our CGI library. */
    xmlrpc_cgi_cleanup();
}</pre><p>To compile it, you can type:</p><pre class="programlisting">bash$ CGI_CFLAGS=`xmlrpc-c-config cgi-server --cflags`
bash$ CGI_LIBS=`xmlrpc-c-config cgi-server --libs`
bash$ gcc $CGI_CFLAGS -o sumAndDifference.cgi sumAndDifference.c $CGI_LIBS</pre><p>Once this is done, copy
      <code class="filename">sumAndDifference.cgi</code> into your webserver's
      <code class="filename">cgi-bin</code> directory.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xmlrpc-howto-java"></a>9. Using XML-RPC with Java</h2></div></div></div><p>Hannes Wallnöfer has provided <a class="ulink" href="http://helma.at/hannes/xmlrpc/" target="_top">an excellent
    implementation</a> of XML-RPC for Java.</p><p>To install it, download the distribution, unzip it, and add the
    <code class="filename">*.jar</code> files to your <code class="envar">CLASSPATH</code>. On a
    Unix system, you can do this by typing:</p><pre class="programlisting">bash$ unzip xmlrpc-java.zip
bash$ cd xmlrpc-java/lib
bash$ CLASSPATH=`pwd`/openxml-1.2.jar:`pwd`/xmlrpc.jar:$CLASSPATH</pre><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-java-client"></a>9.1. A Java Client</h3></div></div></div><p>Save the following program in a file named
      <code class="filename">JavaClient.java</code>.</p><pre class="programlisting">import java.util.Vector;
import java.util.Hashtable;
import helma.xmlrpc.*;

public class JavaClient {

    // The location of our server.
    private final static String server_url =
        "http://xmlrpc-c.sourceforge.net/api/sample.php";

    public static void main (String [] args) {
        try {

            // Create an object to represent our server.
            XmlRpcClient server = new XmlRpcClient(server_url);

            // Build our parameter list.
            Vector params = new Vector();
            params.addElement(new Integer(5));
            params.addElement(new Integer(3));

            // Call the server, and get our result.
            Hashtable result =
                (Hashtable) server.execute("sample.sumAndDifference", params);
            int sum = ((Integer) result.get("sum")).intValue();
            int difference = ((Integer) result.get("difference")).intValue();

            // Print out our result.
            System.out.println("Sum: " + Integer.toString(sum) +
                               ", Difference: " +
                               Integer.toString(difference));

        } catch (XmlRpcException exception) {
            System.err.println("JavaClient: XML-RPC Fault #" +
                               Integer.toString(exception.code) + ": " +
                               exception.toString());
        } catch (Exception exception) {
            System.err.println("JavaClient: " + exception.toString());
        }
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-java-server"></a>9.2. A Stand-Alone Java Server</h3></div></div></div><p>Save the following program in a file named
      <code class="filename">JavaServer.java</code>.</p><pre class="programlisting">import java.util.Hashtable;
import helma.xmlrpc.*;

public class JavaServer {

    public JavaServer () {
        // Our handler is a regular Java object. It can have a
        // constructor and member variables in the ordinary fashion.
        // Public methods will be exposed to XML-RPC clients.
    }

    public Hashtable sumAndDifference (int x, int y) {
        Hashtable result = new Hashtable();
        result.put("sum", new Integer(x + y));
        result.put("difference", new Integer(x - y));
        return result;
    }

    public static void main (String [] args) {
        try {
            
            // Invoke me as &lt;http://localhost:8080/RPC2&gt;.
            WebServer server = new WebServer(8080);
            server.addHandler("sample", new JavaServer());

        } catch (Exception exception) {
            System.err.println("JavaServer: " + exception.toString());
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xmlrpc-howto-php"></a>10. Using XML-RPC with PHP</h2></div></div></div><p>Edd Dumbill has implemented XML-RPC for PHP. You can download it
    from the <a class="ulink" href="http://xmlrpc.usefulinc.com/" target="_top">UsefulInc XML-RPC
    website</a>.</p><p>To install the distribution, decompress it and copy
    <code class="filename">xmlrpc.inc</code> and <code class="filename">xmlrpcs.inc</code>
    into the same directory as your PHP scripts.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-php-client"></a>10.1. A PHP Client</h3></div></div></div><p>The following script shows how to embed XML-RPC calls into a
      web page.</p><pre class="programlisting">&lt;html&gt;
&lt;head&gt;
&lt;title&gt;XML-RPC PHP Demo&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;XML-RPC PHP Demo&lt;/h1&gt;

&lt;?php
include 'xmlrpc.inc';

// Make an object to represent our server.
$server = new xmlrpc_client('/api/sample.php',
                            'xmlrpc-c.sourceforge.net', 80);

// Send a message to the server.
$message = new xmlrpcmsg('sample.sumAndDifference',
                         array(new xmlrpcval(5, 'int'),
                               new xmlrpcval(3, 'int')));
$result = $server-&gt;send($message);

// Process the response.
if (!$result) {
    print "&lt;p&gt;Could not connect to HTTP server.&lt;/p&gt;";
} elseif ($result-&gt;faultCode()) {
    print "&lt;p&gt;XML-RPC Fault #" . $result-&gt;faultCode() . ": " .
        $result-&gt;faultString();
} else {
    $struct = $result-&gt;value();
    $sumval = $struct-&gt;structmem('sum');
    $sum = $sumval-&gt;scalarval();
    $differenceval = $struct-&gt;structmem('difference');
    $difference = $differenceval-&gt;scalarval();
    print "&lt;p&gt;Sum: " . htmlentities($sum) .
        ", Difference: " . htmlentities($difference) . "&lt;/p&gt;";
}
?&gt;

&lt;/body&gt;&lt;/html&gt;</pre><p>If your webserver doesn't run PHP scripts, see the <a class="ulink" href="http://www.php.net/" target="_top">PHP website</a> for more
      information.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-php-server"></a>10.2. A PHP Server</h3></div></div></div><p>The following script shows how to implement an XML-RPC server
      using PHP.</p><pre class="programlisting">&lt;?php
include 'xmlrpc.inc';
include 'xmlrpcs.inc';

function sumAndDifference ($params) {

    // Parse our parameters.
    $xval = $params-&gt;getParam(0);
    $x = $xval-&gt;scalarval();
    $yval = $params-&gt;getParam(1);
    $y = $yval-&gt;scalarval();

    // Build our response.
    $struct = array('sum' =&gt; new xmlrpcval($x + $y, 'int'),
                    'difference' =&gt; new xmlrpcval($x - $y, 'int'));
    return new xmlrpcresp(new xmlrpcval($struct, 'struct'));
}

// Declare our signature and provide some documentation.
// (The PHP server supports remote introspection. Nifty!)
$sumAndDifference_sig = array(array('struct', 'int', 'int'));
$sumAndDifference_doc = 'Add and subtract two numbers';

new xmlrpc_server(array('sample.sumAndDifference' =&gt;
                        array('function' =&gt; 'sumAndDifference',
                              'signature' =&gt; $sumAndDifference_sig,
                              'docstring' =&gt; $sumAndDifference_doc)));
?&gt;</pre><p>You would normally invoke this as something like
      <code class="literal">http://localhost/path/sumAndDifference.php</code>.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xmlrpc-howto-dotnet"></a>11. Using XML-RPC with Microsoft .NET</h2></div></div></div><p><span class="emphasis"><em>(This section of the XML-RPC HOWTO was generously
    provided by Charles Cook.)</em></span></p><p>Charles Cook has implemented XML-RPC for Microsoft's .NET
    environment. You can find his XML-RPC.Net library at <a class="ulink" href="http://www.cookcomputing.com/xmlrpc/xmlrpc.shtml" target="_top">the Cook
    Computing website</a>.</p><p>The following code requires the .NET SDK to be installed. To
    build and run XML-RPC.Net client and server applications, unzip
    <code class="filename">cookcomputing.xmlrpc.dll</code> from the XML-RPC.Net
    distribution and copy to the required directories.</p><p>XML-RPC.Net is compliant with the Common Language Specification
    and so can be used to build XML-RPC clients and servers using any
    CLS-compliant programming language. At the time of writing this means
    the languages provided by Microsoft&#8212;C#, VB.Net, JScript, and
    Managed C++&#8212;but in the future will include other languages such
    as Eiffel, Perl and Python.</p><p><code class="function">sample.sumAndDifference</code> client and server
    samples are presented here in both C# and VB.Net.  The client samples
    make synchronous calls but it is also possible to make asynchronous
    calls&#8212;refer to the XML-RPC.Net documentation for further
    information.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-csharp-client"></a>11.1. A C# Client</h3></div></div></div><p>Save the following code in a file called
      <code class="filename">getSumAndDiffCS.cs</code>:</p><pre class="programlisting">using System;
using CookComputing.XmlRpc;

public struct Result 
{
  public int sum;
  public int difference;
}

[XmlRpcUri(
  "http://aspx.securedomains.com/cookcomputing/sumanddiffvb.aspx")]
class Proxy : XmlRpcClientProtocol
{
  [XmlRpcMethod("sample.sumAndDifference")]
    public Result SumAndDifference(int x, int y)
  {
    return (Result)Invoke("SumAndDifference", new Object[]{x,y})[0]; 
  }
}

public class App
{
  public static int Main(string[] args)
  {
    try
    {
      Proxy theProxy = new Proxy();
      Result ret = theProxy.SumAndDifference(5, 3);
      Console.WriteLine("5 + 3 = {0}", ret.sum);
      Console.WriteLine("5 - 3 = {0}", ret.difference);
    }
    catch(XmlRpcClientException cex)
    {
      Console.WriteLine("Client exception: {0} {1}", 
        cex.FaultCode, cex.FaultString);
    }
    catch(XmlRpcFaultException fex)
    {
      Console.WriteLine("Server exception: {0} {1}", 
        fex.FaultCode, fex.FaultString);
    }
    return 0;
  }
}</pre><p>Use the following command to build the client:</p><pre class="programlisting">csc /r:cookcomputing.xmlrpc.dll getSumAndDiffCS.cs</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-vbdotnet-client"></a>11.2. A Visual Basic .NET Client</h3></div></div></div><p>Save the following code in a file called
      <code class="filename">getSumAndDiffVB.vb</code>:</p><pre class="programlisting">Imports CookComputing.XmlRpc

Module Module1
  
  Structure Result
    Dim sum, difference As Integer
  End Structure
  
  Class &lt;XmlRpcUri( _
    "http://aspx.securedomains.com/cookcomputing/sumanddiffcs.xmlrpc")&gt; _
  Proxy : Inherits XmlRpcClientProtocol

    Public Function &lt;XmlRpcMethod("sample.sumAndDifference")&gt; _
    SumAndDifference(ByVal x As Integer, ByVal y As Integer) As Result
      Dim results As Object() = Me.Invoke("SumAndDifference", _
                                 New Object() {x,y})
      Return CType(results(0), Result)
    End Function

  End Class
  
  Sub Main()
    Dim theProxy As New Proxy()
    Try
      Dim ret As Result = theProxy.SumAndDifference(5, 3)
      Console.WriteLine("5 + 3 = {0}", ret.sum)
      Console.WriteLine("5 - 3 = {0}", ret.difference)
    Catch cex As XmlRpcClientException
      Console.WriteLine("Client exception: {0} {1}", _
                        cex.FaultCode, cex.FaultString)
    Catch fex As XmlRpcFaultException
      Console.WriteLine("Server exception: {0} {1}", _
                        fex.FaultCode, fex.FaultString)
    End Try
  End Sub
  
End Module</pre><p>Use the following command to build the client:</p><pre class="programlisting">vbc /r:cookcomputing.xmlrpc.dll getSumAndDiffVB.vb</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-csharp-server"></a>11.3. A C# Server</h3></div></div></div><p>XML-RPC.Net enables the implementation of XML-RPC Services
      running in the IIS 5 web server environment.</p><p>Save the following code in a file called
      <code class="filename">SumAndDiffCS.cs</code>:</p><pre class="programlisting">using System;
using CookComputing.XmlRpc;

public struct Result 
{
  public int sum;
  public int difference;
}

[XmlRpcService(Description=
  "Sample XML-RPC.Net Service implemented in C#")]
public class SumAndDiffService : XmlRpcService
{
  [XmlRpcMethod("sample.sumAndDifference", Description=
    "This function takes two integers as arguments and returns an "+
    "XML-RPC struct containing two elements: sum, the sum of the "+
    "two integers, and difference, the difference between the two "+
    "integers")]
  public Result SumAndDifference(int x, int y)
  {
    Result ret;
    ret.sum = x + y;
    ret.difference = x - y;
    return ret;
  }
}</pre><p>Use the following to build the client:</p><pre class="programlisting">csc /r:System.Web.dll,cookcomputing.xmlrpc.dll /target:library SumAndDiffCS.cs</pre><p>Create an IIS virtual root, say
      <code class="filename">cookcomputing</code> for this example, and a
      <code class="filename">bin</code> directory underneath it. Place the assembly
      (<code class="filename">SumAndDiffCS.dll</code>) and the XML-RPC.Net assembly
      (<code class="filename">cookcomputing.xmlrpc.dll</code>) in the
      <code class="filename">bin</code> directory.</p><p>Create a text file called <code class="filename">config.web</code> in
      the <code class="filename">cookcomputing</code> root directory with the
      following contents:</p><pre class="programlisting">&lt;configuration&gt;
  &lt;httphandlers&gt;
    &lt;add verb="*" path="sumanddiffcs.aspx" type="SumAndDiffService, 
SumAndDiffCS" /&gt;
  &lt;/httphandlers&gt; 
&lt;/configuration&gt;</pre><p>The Service is now installed and configured. To check this
      navigate your browser to the URL of the Service where you will see an
      automatically generated documentation page.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-vbdotnet-server"></a>11.4. A Visual Basic .NET Server</h3></div></div></div><p>Save the following code in a file called
      <code class="filename">SumAndDiffVB.cs</code>:</p><pre class="programlisting">Imports System
Imports CookComputing.XmlRpc

Public Structure Result
  Dim sum, difference As Integer
End Structure

Public Class &lt;XmlRpcService(Description:= _
  "Sample XML-RPC.Net Service implemented in VB.Net")&gt; _
SumAndDiffService : Inherits XmlRpcService
  
  Public Function &lt;XmlRpcMethod("sample.sumAndDifference", _
  Description:= "This function takes two integers as arguments "+ _  
                "and returns an XML-RPC struct containing two "+ _
                "elements: sum, the sum of the two integers, and "+ _
                "difference, the difference between the two "+ _
                "integers")&gt; _
  SumAndDifference(ByVal x As Integer, ByVal y As Integer) As Result
    Dim ret As Result
    ret.sum = x + y
    ret.difference = x - y
    Return ret
  End Function
  
End Class</pre><p>Use the following to build the client:</p><pre class="programlisting">vbc /r:System.Web.dll,cookcomputing.xmlrpc.dll /target:library SumAndDiffVB.vb</pre><p>Create an IIS virtual root, say
      <code class="filename">cookcomputing</code> for this example, and a
      <code class="filename">bin</code> directory underneath it.  Place the assembly
      (<code class="filename">SumAndDiffVB.dll</code>) and the XML-RPC.Net assembly
      (<code class="filename">cookcomputing.xmlrpc.dll</code>) in the
      <code class="filename">bin</code> directory.</p><p>Create a text file called <code class="filename">config.web</code> in
      the <code class="filename">cookcomputing</code> root directory with the
      following contents (note that the entries are case sensitive):</p><pre class="programlisting">&lt;configuration&gt;
  &lt;httphandlers&gt;
    &lt;add verb="*" path="sumanddiffvb.aspx" type="SumAndDiffService, 
SumAndDiffVB" /&gt;
  &lt;/httphandlers&gt; 
&lt;/configuration&gt;</pre><p>The Service is now installed and configured. To check this
      navigate your browser to the URL of the Service where you will see an
      automatically generated documentation page.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xmlrpc-howto-ruby"></a>12. Using XML-RPC with Ruby</h2></div></div></div><p><span class="emphasis"><em>(This section of the XML-RPC HOWTO was generously
    provided by Michael Neumann.)</em></span></p><p><a class="ulink" href="http://www.ruby-lang.org/" target="_top">Ruby</a> is an
    object-oriented scripting language. It already has a major following in
    Japan, and it's becoming popular elsewhere.</p><p>To use XML-RPC with Ruby, you must first install Yoshida Masato's
    xmlparser module (a wrapper for James Clark's expat parser). This can
    be found at the <a class="ulink" href="http://www.ruby-lang.org/en/raa.html" target="_top">Ruby
    Application Archive</a>.</p><p>Then, you must install <a class="ulink" href="http://www.s-direktnet.de/homepages/neumann/xmlrpc4r/index.html" target="_top">xmlrpc4r</a>
    using the following commands:</p><pre class="programlisting">bash$ tar -xvzf xmlrpc4r-1_2.tar.gz
bash$ cd xmlrpc4r-1_2
bash$ su root -c "ruby install.rb"</pre><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-ruby-client"></a>12.1. A Ruby Client</h3></div></div></div><p>Here's a simple Ruby client:</p><pre class="programlisting">require "xmlrpc/client"

# Make an object to represent the XML-RPC server.
server = XMLRPC::Client.new( "xmlrpc-c.sourceforge.net", "/api/sample.php")

# Call the remote server and get our result
result = server.call("sample.sumAndDifference", 5, 3)

sum = result["sum"]
difference = result["difference"]

puts "Sum: #{sum}, Difference: #{difference}"</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-ruby-server"></a>12.2. A Ruby Server</h3></div></div></div><p>Here's a simple Ruby server:</p><pre class="programlisting">require "xmlrpc/server"

s = XMLRPC::CGIServer.new

s.add_hanlder("sample.sumAndDifference") do |a,b|
  { "sum" =&gt; a + b, "difference" =&gt; a - b }
end

s.serve</pre><p>This could also have been written as follows:</p><pre class="programlisting">require "xmlrpc/server"

s = XMLRPC::CGIServer.new

class MyHandler
  def sumAndDifference(a, b)
    { "sum" =&gt; a + b, "difference" =&gt; a - b }
  end
end

s.add_handler("sample", MyHandler.new)
s.serve</pre><p>To run either server in standalone mode, replace the second line
      of code with the following:</p><pre class="programlisting">s = XMLRPC::Server.new(8080)</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xmlrpc-howto-proprietary"></a>13. Using XML-RPC with Proprietary Languages</h2></div></div></div><p>Implementations of XML-RPC are available for the following
    proprietary programming languages and environments.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-k"></a>13.1. Using XML-RPC with K</h3></div></div></div><p><span class="emphasis"><em>(This section of the XML-RPC HOWTO was generously
      provided by Christian Langreiter.)</em></span></p><p><a class="ulink" href="http://www.kx.com/" target="_top">K</a> is a language used in
      finance and database development. To install XML-RPC for K, download
      it from the <a class="ulink" href="http://www.langreiter.com/k/kxr" target="_top">Kx
      website</a>. Uncompress and copy the files into the directory in
      which you keep your .k programs.</p><p>Here's a short client:</p><pre class="programlisting">\l kxr
server:("localhost";"/cgi-bin/sumAndDifference.cgi");
.kxr.c[server;"sumAndDifference";2 3]</pre><p>And here's a server:</p><pre class="programlisting">\l kxrsc
.kxr.sm: ,("sumAndDifference";{.((`sum;+/x);(`difference;-/x))})</pre><p>More examples are included in the distribution.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xmlrpc-howto-applist"></a>14. Applications with Built-in XML-RPC Support</h2></div></div></div><p>Several popular Linux applications include support for
    XML-RPC. These have already been described elsewhere, so we mostly
    provide pointers to articles.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-zope"></a>14.1. Zope</h3></div></div></div><p>Articles on using XML-RPC with Zope are available elsewhere on
      the web:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="http://www.byte.com/column/BYT19991021S0014" target="_top">XML-RPC
	  Programming with Zope</a> by Jon Udell</p></li><li class="listitem"><p><a class="ulink" href="http://linux.userland.com/stories/storyReader%2418" target="_top">Zope
	  XML-RPC</a> at UserLand.Com</p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-kde"></a>14.2. KDE 2.0</h3></div></div></div><p>KDE 2.0 includes Kurt Ganroth's <a class="ulink" href="http://kdecvs.stud.fh-heilbronn.de/cvsweb/kdebase/kxmlrpc/" target="_top">kxmlrpc
      daemon</a>, which allows you to script KDE applications using
      XML-RPC.</p><p>Here's a short <a class="ulink" href="http://kdecvs.stud.fh-heilbronn.de/cvsweb/kdebase/kxmlrpc/test/testxmlrpc.py?rev=1.6&amp;content-type=text/x-cvsweb-markup" target="_top">sample
      application</a> in Python. It shows you how to connect to
      kxmlrpc, manipulate your KDE address book, and query the KDE
      trader.</p><p>If you have any other articles or example code, please see
      <a class="xref" href="#xmlrpc-howto-submitting" title="15.3. Submitting Other Snippets">Section 15.3, &#8220;Submitting Other Snippets&#8221;</a>. We'd like to have more
      information on scripting KDE.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xmlrpc-howto-about"></a>15. About This Document</h2></div></div></div><p>This document is part of the <a class="ulink" href="http://www.linuxdoc.org/" target="_top">Linux Documentation
    Project</a>. Thanks go to Dave Winer and maintainers of all the
    various XML-RPC libraries.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-versions"></a>15.1. New Versions of This Document</h3></div></div></div><p>New versions of this document are available at the <a class="ulink" href="http://www.linuxdoc.org/HOWTO/XML-RPC-HOWTO/index.html" target="_top">Linux
      Documentation Project</a> website.</p><p>They also provide this manual in alternate formats, including
      <a class="ulink" href="http://www.ibiblio.org/pub/Linux/docs/HOWTO/other-formats/pdf/XML-RPC-HOWTO.pdf" target="_top">PDF</a>,
      <a class="ulink" href="http://www.ibiblio.org/pub/Linux/docs/HOWTO/other-formats/html/XML-RPC-HOWTO-html.tar.gz" target="_top">gzipped
      HTML</a> and <a class="ulink" href="http://www.ibiblio.org/pub/Linux/docs/HOWTO/XML-RPC-HOWTO" target="_top">ASCII
      text</a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-contributors"></a>15.2. Contributors to the XML-RPC HOWTO</h3></div></div></div><p>The section on Ruby was contributed by Michael Neumann
      (neumann AT s-direktnet DOT de). The section on K was contributed by
      Christian Langreiter (c DOT langreiter AT synerge DOT at).</p><p>These contributors are all credited at the beginning of their
      sections.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlrpc-howto-submitting"></a>15.3. Submitting Other Snippets</h3></div></div></div><p>If you have a sample client or server in another language or
      environment, we'd love to include it in this manual. To add a new
      entry, we need the following information:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The URL of the XML-RPC implementation used.</p></li><li class="listitem"><p>Installation instructions.</p></li><li class="listitem"><p>A complete, runnable program.</p></li><li class="listitem"><p>Compilation instructions, if applicable.</p></li></ul></div><p>E-mail your example to the <a class="ulink" href="http://xmlrpc-c.sourceforge.net/lists.php" target="_top">xmlrpc-c-devel
      mailing list</a> or directly to <a class="ulink" href="mailto:eric.kidd@pobox.com" target="_top">Eric Kidd</a>.</p><p>Thank you for your help!</p></div></div></div></body></html>
